var FP=Object.defineProperty;var $P=(e,t,i)=>t in e?FP(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i;var Ni=(e,t,i)=>$P(e,typeof t!="symbol"?t+"":t,i);function _T(e,t){for(var i=0;i<t.length;i++){const a=t[i];if(typeof a!="string"&&!Array.isArray(a)){for(const f in a)if(f!=="default"&&!(f in e)){const v=Object.getOwnPropertyDescriptor(a,f);v&&Object.defineProperty(e,f,v.get?v:{enumerable:!0,get:()=>a[f]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const f of document.querySelectorAll('link[rel="modulepreload"]'))a(f);new MutationObserver(f=>{for(const v of f)if(v.type==="childList")for(const g of v.addedNodes)g.tagName==="LINK"&&g.rel==="modulepreload"&&a(g)}).observe(document,{childList:!0,subtree:!0});function i(f){const v={};return f.integrity&&(v.integrity=f.integrity),f.referrerPolicy&&(v.referrerPolicy=f.referrerPolicy),f.crossOrigin==="use-credentials"?v.credentials="include":f.crossOrigin==="anonymous"?v.credentials="omit":v.credentials="same-origin",v}function a(f){if(f.ep)return;f.ep=!0;const v=i(f);fetch(f.href,v)}})();function f0(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var pb={exports:{}},Qg={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tS;function VP(){if(tS)return Qg;tS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function i(a,f,v){var g=null;if(v!==void 0&&(g=""+v),f.key!==void 0&&(g=""+f.key),"key"in f){v={};for(var u in f)u!=="key"&&(v[u]=f[u])}else v=f;return f=v.ref,{$$typeof:e,type:a,key:g,ref:f!==void 0?f:null,props:v}}return Qg.Fragment=t,Qg.jsx=i,Qg.jsxs=i,Qg}var nS;function UP(){return nS||(nS=1,pb.exports=VP()),pb.exports}var Ct=UP(),mb={exports:{}},nr={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rS;function HP(){if(rS)return nr;rS=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),v=Symbol.for("react.consumer"),g=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),P=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),B=Symbol.iterator;function j(we){return we===null||typeof we!="object"?null:(we=B&&we[B]||we["@@iterator"],typeof we=="function"?we:null)}var $={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},X=Object.assign,J={};function G(we,tt,_t){this.props=we,this.context=tt,this.refs=J,this.updater=_t||$}G.prototype.isReactComponent={},G.prototype.setState=function(we,tt){if(typeof we!="object"&&typeof we!="function"&&we!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,we,tt,"setState")},G.prototype.forceUpdate=function(we){this.updater.enqueueForceUpdate(this,we,"forceUpdate")};function le(){}le.prototype=G.prototype;function oe(we,tt,_t){this.props=we,this.context=tt,this.refs=J,this.updater=_t||$}var pe=oe.prototype=new le;pe.constructor=oe,X(pe,G.prototype),pe.isPureReactComponent=!0;var he=Array.isArray,ae={H:null,A:null,T:null,S:null,V:null},ve=Object.prototype.hasOwnProperty;function Se(we,tt,_t,Pt,At,St){return _t=St.ref,{$$typeof:e,type:we,key:tt,ref:_t!==void 0?_t:null,props:St}}function ke(we,tt){return Se(we.type,tt,void 0,void 0,void 0,we.props)}function Le(we){return typeof we=="object"&&we!==null&&we.$$typeof===e}function Re(we){var tt={"=":"=0",":":"=2"};return"$"+we.replace(/[=:]/g,function(_t){return tt[_t]})}var me=/\/+/g;function Ae(we,tt){return typeof we=="object"&&we!==null&&we.key!=null?Re(""+we.key):tt.toString(36)}function He(){}function We(we){switch(we.status){case"fulfilled":return we.value;case"rejected":throw we.reason;default:switch(typeof we.status=="string"?we.then(He,He):(we.status="pending",we.then(function(tt){we.status==="pending"&&(we.status="fulfilled",we.value=tt)},function(tt){we.status==="pending"&&(we.status="rejected",we.reason=tt)})),we.status){case"fulfilled":return we.value;case"rejected":throw we.reason}}throw we}function pt(we,tt,_t,Pt,At){var St=typeof we;(St==="undefined"||St==="boolean")&&(we=null);var qt=!1;if(we===null)qt=!0;else switch(St){case"bigint":case"string":case"number":qt=!0;break;case"object":switch(we.$$typeof){case e:case t:qt=!0;break;case I:return qt=we._init,pt(qt(we._payload),tt,_t,Pt,At)}}if(qt)return At=At(we),qt=Pt===""?"."+Ae(we,0):Pt,he(At)?(_t="",qt!=null&&(_t=qt.replace(me,"$&/")+"/"),pt(At,tt,_t,"",function(ft){return ft})):At!=null&&(Le(At)&&(At=ke(At,_t+(At.key==null||we&&we.key===At.key?"":(""+At.key).replace(me,"$&/")+"/")+qt)),tt.push(At)),1;qt=0;var Xe=Pt===""?".":Pt+":";if(he(we))for(var mt=0;mt<we.length;mt++)Pt=we[mt],St=Xe+Ae(Pt,mt),qt+=pt(Pt,tt,_t,St,At);else if(mt=j(we),typeof mt=="function")for(we=mt.call(we),mt=0;!(Pt=we.next()).done;)Pt=Pt.value,St=Xe+Ae(Pt,mt++),qt+=pt(Pt,tt,_t,St,At);else if(St==="object"){if(typeof we.then=="function")return pt(We(we),tt,_t,Pt,At);throw tt=String(we),Error("Objects are not valid as a React child (found: "+(tt==="[object Object]"?"object with keys {"+Object.keys(we).join(", ")+"}":tt)+"). If you meant to render a collection of children, use an array instead.")}return qt}function xe(we,tt,_t){if(we==null)return we;var Pt=[],At=0;return pt(we,Pt,"","",function(St){return tt.call(_t,St,At++)}),Pt}function et(we){if(we._status===-1){var tt=we._result;tt=tt(),tt.then(function(_t){(we._status===0||we._status===-1)&&(we._status=1,we._result=_t)},function(_t){(we._status===0||we._status===-1)&&(we._status=2,we._result=_t)}),we._status===-1&&(we._status=0,we._result=tt)}if(we._status===1)return we._result.default;throw we._result}var Qe=typeof reportError=="function"?reportError:function(we){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var tt=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof we=="object"&&we!==null&&typeof we.message=="string"?String(we.message):String(we),error:we});if(!window.dispatchEvent(tt))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",we);return}console.error(we)};function Rt(){}return nr.Children={map:xe,forEach:function(we,tt,_t){xe(we,function(){tt.apply(this,arguments)},_t)},count:function(we){var tt=0;return xe(we,function(){tt++}),tt},toArray:function(we){return xe(we,function(tt){return tt})||[]},only:function(we){if(!Le(we))throw Error("React.Children.only expected to receive a single React element child.");return we}},nr.Component=G,nr.Fragment=i,nr.Profiler=f,nr.PureComponent=oe,nr.StrictMode=a,nr.Suspense=E,nr.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=ae,nr.__COMPILER_RUNTIME={__proto__:null,c:function(we){return ae.H.useMemoCache(we)}},nr.cache=function(we){return function(){return we.apply(null,arguments)}},nr.cloneElement=function(we,tt,_t){if(we==null)throw Error("The argument must be a React element, but you passed "+we+".");var Pt=X({},we.props),At=we.key,St=void 0;if(tt!=null)for(qt in tt.ref!==void 0&&(St=void 0),tt.key!==void 0&&(At=""+tt.key),tt)!ve.call(tt,qt)||qt==="key"||qt==="__self"||qt==="__source"||qt==="ref"&&tt.ref===void 0||(Pt[qt]=tt[qt]);var qt=arguments.length-2;if(qt===1)Pt.children=_t;else if(1<qt){for(var Xe=Array(qt),mt=0;mt<qt;mt++)Xe[mt]=arguments[mt+2];Pt.children=Xe}return Se(we.type,At,void 0,void 0,St,Pt)},nr.createContext=function(we){return we={$$typeof:g,_currentValue:we,_currentValue2:we,_threadCount:0,Provider:null,Consumer:null},we.Provider=we,we.Consumer={$$typeof:v,_context:we},we},nr.createElement=function(we,tt,_t){var Pt,At={},St=null;if(tt!=null)for(Pt in tt.key!==void 0&&(St=""+tt.key),tt)ve.call(tt,Pt)&&Pt!=="key"&&Pt!=="__self"&&Pt!=="__source"&&(At[Pt]=tt[Pt]);var qt=arguments.length-2;if(qt===1)At.children=_t;else if(1<qt){for(var Xe=Array(qt),mt=0;mt<qt;mt++)Xe[mt]=arguments[mt+2];At.children=Xe}if(we&&we.defaultProps)for(Pt in qt=we.defaultProps,qt)At[Pt]===void 0&&(At[Pt]=qt[Pt]);return Se(we,St,void 0,void 0,null,At)},nr.createRef=function(){return{current:null}},nr.forwardRef=function(we){return{$$typeof:u,render:we}},nr.isValidElement=Le,nr.lazy=function(we){return{$$typeof:I,_payload:{_status:-1,_result:we},_init:et}},nr.memo=function(we,tt){return{$$typeof:P,type:we,compare:tt===void 0?null:tt}},nr.startTransition=function(we){var tt=ae.T,_t={};ae.T=_t;try{var Pt=we(),At=ae.S;At!==null&&At(_t,Pt),typeof Pt=="object"&&Pt!==null&&typeof Pt.then=="function"&&Pt.then(Rt,Qe)}catch(St){Qe(St)}finally{ae.T=tt}},nr.unstable_useCacheRefresh=function(){return ae.H.useCacheRefresh()},nr.use=function(we){return ae.H.use(we)},nr.useActionState=function(we,tt,_t){return ae.H.useActionState(we,tt,_t)},nr.useCallback=function(we,tt){return ae.H.useCallback(we,tt)},nr.useContext=function(we){return ae.H.useContext(we)},nr.useDebugValue=function(){},nr.useDeferredValue=function(we,tt){return ae.H.useDeferredValue(we,tt)},nr.useEffect=function(we,tt,_t){var Pt=ae.H;if(typeof _t=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return Pt.useEffect(we,tt)},nr.useId=function(){return ae.H.useId()},nr.useImperativeHandle=function(we,tt,_t){return ae.H.useImperativeHandle(we,tt,_t)},nr.useInsertionEffect=function(we,tt){return ae.H.useInsertionEffect(we,tt)},nr.useLayoutEffect=function(we,tt){return ae.H.useLayoutEffect(we,tt)},nr.useMemo=function(we,tt){return ae.H.useMemo(we,tt)},nr.useOptimistic=function(we,tt){return ae.H.useOptimistic(we,tt)},nr.useReducer=function(we,tt,_t){return ae.H.useReducer(we,tt,_t)},nr.useRef=function(we){return ae.H.useRef(we)},nr.useState=function(we){return ae.H.useState(we)},nr.useSyncExternalStore=function(we,tt,_t){return ae.H.useSyncExternalStore(we,tt,_t)},nr.useTransition=function(){return ae.H.useTransition()},nr.version="19.1.0",nr}var iS;function d0(){return iS||(iS=1,mb.exports=HP()),mb.exports}var U=d0();const Nt=f0(U),Dm=_T({__proto__:null,default:Nt},[U]);var gb={exports:{}},Jg={},yb={exports:{}},_b={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aS;function qP(){return aS||(aS=1,function(e){function t(xe,et){var Qe=xe.length;xe.push(et);e:for(;0<Qe;){var Rt=Qe-1>>>1,we=xe[Rt];if(0<f(we,et))xe[Rt]=et,xe[Qe]=we,Qe=Rt;else break e}}function i(xe){return xe.length===0?null:xe[0]}function a(xe){if(xe.length===0)return null;var et=xe[0],Qe=xe.pop();if(Qe!==et){xe[0]=Qe;e:for(var Rt=0,we=xe.length,tt=we>>>1;Rt<tt;){var _t=2*(Rt+1)-1,Pt=xe[_t],At=_t+1,St=xe[At];if(0>f(Pt,Qe))At<we&&0>f(St,Pt)?(xe[Rt]=St,xe[At]=Qe,Rt=At):(xe[Rt]=Pt,xe[_t]=Qe,Rt=_t);else if(At<we&&0>f(St,Qe))xe[Rt]=St,xe[At]=Qe,Rt=At;else break e}}return et}function f(xe,et){var Qe=xe.sortIndex-et.sortIndex;return Qe!==0?Qe:xe.id-et.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var v=performance;e.unstable_now=function(){return v.now()}}else{var g=Date,u=g.now();e.unstable_now=function(){return g.now()-u}}var E=[],P=[],I=1,B=null,j=3,$=!1,X=!1,J=!1,G=!1,le=typeof setTimeout=="function"?setTimeout:null,oe=typeof clearTimeout=="function"?clearTimeout:null,pe=typeof setImmediate<"u"?setImmediate:null;function he(xe){for(var et=i(P);et!==null;){if(et.callback===null)a(P);else if(et.startTime<=xe)a(P),et.sortIndex=et.expirationTime,t(E,et);else break;et=i(P)}}function ae(xe){if(J=!1,he(xe),!X)if(i(E)!==null)X=!0,ve||(ve=!0,Ae());else{var et=i(P);et!==null&&pt(ae,et.startTime-xe)}}var ve=!1,Se=-1,ke=5,Le=-1;function Re(){return G?!0:!(e.unstable_now()-Le<ke)}function me(){if(G=!1,ve){var xe=e.unstable_now();Le=xe;var et=!0;try{e:{X=!1,J&&(J=!1,oe(Se),Se=-1),$=!0;var Qe=j;try{t:{for(he(xe),B=i(E);B!==null&&!(B.expirationTime>xe&&Re());){var Rt=B.callback;if(typeof Rt=="function"){B.callback=null,j=B.priorityLevel;var we=Rt(B.expirationTime<=xe);if(xe=e.unstable_now(),typeof we=="function"){B.callback=we,he(xe),et=!0;break t}B===i(E)&&a(E),he(xe)}else a(E);B=i(E)}if(B!==null)et=!0;else{var tt=i(P);tt!==null&&pt(ae,tt.startTime-xe),et=!1}}break e}finally{B=null,j=Qe,$=!1}et=void 0}}finally{et?Ae():ve=!1}}}var Ae;if(typeof pe=="function")Ae=function(){pe(me)};else if(typeof MessageChannel<"u"){var He=new MessageChannel,We=He.port2;He.port1.onmessage=me,Ae=function(){We.postMessage(null)}}else Ae=function(){le(me,0)};function pt(xe,et){Se=le(function(){xe(e.unstable_now())},et)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(xe){xe.callback=null},e.unstable_forceFrameRate=function(xe){0>xe||125<xe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):ke=0<xe?Math.floor(1e3/xe):5},e.unstable_getCurrentPriorityLevel=function(){return j},e.unstable_next=function(xe){switch(j){case 1:case 2:case 3:var et=3;break;default:et=j}var Qe=j;j=et;try{return xe()}finally{j=Qe}},e.unstable_requestPaint=function(){G=!0},e.unstable_runWithPriority=function(xe,et){switch(xe){case 1:case 2:case 3:case 4:case 5:break;default:xe=3}var Qe=j;j=xe;try{return et()}finally{j=Qe}},e.unstable_scheduleCallback=function(xe,et,Qe){var Rt=e.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?Rt+Qe:Rt):Qe=Rt,xe){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=Qe+we,xe={id:I++,callback:et,priorityLevel:xe,startTime:Qe,expirationTime:we,sortIndex:-1},Qe>Rt?(xe.sortIndex=Qe,t(P,xe),i(E)===null&&xe===i(P)&&(J?(oe(Se),Se=-1):J=!0,pt(ae,Qe-Rt))):(xe.sortIndex=we,t(E,xe),X||$||(X=!0,ve||(ve=!0,Ae()))),xe},e.unstable_shouldYield=Re,e.unstable_wrapCallback=function(xe){var et=j;return function(){var Qe=j;j=et;try{return xe.apply(this,arguments)}finally{j=Qe}}}}(_b)),_b}var oS;function GP(){return oS||(oS=1,yb.exports=qP()),yb.exports}var vb={exports:{}},Eo={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sS;function ZP(){if(sS)return Eo;sS=1;var e=d0();function t(E){var P="https://react.dev/errors/"+E;if(1<arguments.length){P+="?args[]="+encodeURIComponent(arguments[1]);for(var I=2;I<arguments.length;I++)P+="&args[]="+encodeURIComponent(arguments[I])}return"Minified React error #"+E+"; visit "+P+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(){}var a={d:{f:i,r:function(){throw Error(t(522))},D:i,C:i,L:i,m:i,X:i,S:i,M:i},p:0,findDOMNode:null},f=Symbol.for("react.portal");function v(E,P,I){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:f,key:B==null?null:""+B,children:E,containerInfo:P,implementation:I}}var g=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function u(E,P){if(E==="font")return"";if(typeof P=="string")return P==="use-credentials"?P:""}return Eo.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=a,Eo.createPortal=function(E,P){var I=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!P||P.nodeType!==1&&P.nodeType!==9&&P.nodeType!==11)throw Error(t(299));return v(E,P,null,I)},Eo.flushSync=function(E){var P=g.T,I=a.p;try{if(g.T=null,a.p=2,E)return E()}finally{g.T=P,a.p=I,a.d.f()}},Eo.preconnect=function(E,P){typeof E=="string"&&(P?(P=P.crossOrigin,P=typeof P=="string"?P==="use-credentials"?P:"":void 0):P=null,a.d.C(E,P))},Eo.prefetchDNS=function(E){typeof E=="string"&&a.d.D(E)},Eo.preinit=function(E,P){if(typeof E=="string"&&P&&typeof P.as=="string"){var I=P.as,B=u(I,P.crossOrigin),j=typeof P.integrity=="string"?P.integrity:void 0,$=typeof P.fetchPriority=="string"?P.fetchPriority:void 0;I==="style"?a.d.S(E,typeof P.precedence=="string"?P.precedence:void 0,{crossOrigin:B,integrity:j,fetchPriority:$}):I==="script"&&a.d.X(E,{crossOrigin:B,integrity:j,fetchPriority:$,nonce:typeof P.nonce=="string"?P.nonce:void 0})}},Eo.preinitModule=function(E,P){if(typeof E=="string")if(typeof P=="object"&&P!==null){if(P.as==null||P.as==="script"){var I=u(P.as,P.crossOrigin);a.d.M(E,{crossOrigin:I,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0})}}else P==null&&a.d.M(E)},Eo.preload=function(E,P){if(typeof E=="string"&&typeof P=="object"&&P!==null&&typeof P.as=="string"){var I=P.as,B=u(I,P.crossOrigin);a.d.L(E,I,{crossOrigin:B,integrity:typeof P.integrity=="string"?P.integrity:void 0,nonce:typeof P.nonce=="string"?P.nonce:void 0,type:typeof P.type=="string"?P.type:void 0,fetchPriority:typeof P.fetchPriority=="string"?P.fetchPriority:void 0,referrerPolicy:typeof P.referrerPolicy=="string"?P.referrerPolicy:void 0,imageSrcSet:typeof P.imageSrcSet=="string"?P.imageSrcSet:void 0,imageSizes:typeof P.imageSizes=="string"?P.imageSizes:void 0,media:typeof P.media=="string"?P.media:void 0})}},Eo.preloadModule=function(E,P){if(typeof E=="string")if(P){var I=u(P.as,P.crossOrigin);a.d.m(E,{as:typeof P.as=="string"&&P.as!=="script"?P.as:void 0,crossOrigin:I,integrity:typeof P.integrity=="string"?P.integrity:void 0})}else a.d.m(E)},Eo.requestFormReset=function(E){a.d.r(E)},Eo.unstable_batchedUpdates=function(E,P){return E(P)},Eo.useFormState=function(E,P,I){return g.H.useFormState(E,P,I)},Eo.useFormStatus=function(){return g.H.useHostTransitionStatus()},Eo.version="19.1.0",Eo}var lS;function vT(){if(lS)return vb.exports;lS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),vb.exports=ZP(),vb.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cS;function XP(){if(cS)return Jg;cS=1;var e=GP(),t=d0(),i=vT();function a(o){var h="https://react.dev/errors/"+o;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)h+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+o+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function f(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function v(o){var h=o,m=o;if(o.alternate)for(;h.return;)h=h.return;else{o=h;do h=o,(h.flags&4098)!==0&&(m=h.return),o=h.return;while(o)}return h.tag===3?m:null}function g(o){if(o.tag===13){var h=o.memoizedState;if(h===null&&(o=o.alternate,o!==null&&(h=o.memoizedState)),h!==null)return h.dehydrated}return null}function u(o){if(v(o)!==o)throw Error(a(188))}function E(o){var h=o.alternate;if(!h){if(h=v(o),h===null)throw Error(a(188));return h!==o?null:o}for(var m=o,x=h;;){var A=m.return;if(A===null)break;var z=A.alternate;if(z===null){if(x=A.return,x!==null){m=x;continue}break}if(A.child===z.child){for(z=A.child;z;){if(z===m)return u(A),o;if(z===x)return u(A),h;z=z.sibling}throw Error(a(188))}if(m.return!==x.return)m=A,x=z;else{for(var K=!1,se=A.child;se;){if(se===m){K=!0,m=A,x=z;break}if(se===x){K=!0,x=A,m=z;break}se=se.sibling}if(!K){for(se=z.child;se;){if(se===m){K=!0,m=z,x=A;break}if(se===x){K=!0,x=z,m=A;break}se=se.sibling}if(!K)throw Error(a(189))}}if(m.alternate!==x)throw Error(a(190))}if(m.tag!==3)throw Error(a(188));return m.stateNode.current===m?o:h}function P(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o;for(o=o.child;o!==null;){if(h=P(o),h!==null)return h;o=o.sibling}return null}var I=Object.assign,B=Symbol.for("react.element"),j=Symbol.for("react.transitional.element"),$=Symbol.for("react.portal"),X=Symbol.for("react.fragment"),J=Symbol.for("react.strict_mode"),G=Symbol.for("react.profiler"),le=Symbol.for("react.provider"),oe=Symbol.for("react.consumer"),pe=Symbol.for("react.context"),he=Symbol.for("react.forward_ref"),ae=Symbol.for("react.suspense"),ve=Symbol.for("react.suspense_list"),Se=Symbol.for("react.memo"),ke=Symbol.for("react.lazy"),Le=Symbol.for("react.activity"),Re=Symbol.for("react.memo_cache_sentinel"),me=Symbol.iterator;function Ae(o){return o===null||typeof o!="object"?null:(o=me&&o[me]||o["@@iterator"],typeof o=="function"?o:null)}var He=Symbol.for("react.client.reference");function We(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===He?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case X:return"Fragment";case G:return"Profiler";case J:return"StrictMode";case ae:return"Suspense";case ve:return"SuspenseList";case Le:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case $:return"Portal";case pe:return(o.displayName||"Context")+".Provider";case oe:return(o._context.displayName||"Context")+".Consumer";case he:var h=o.render;return o=o.displayName,o||(o=h.displayName||h.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case Se:return h=o.displayName||null,h!==null?h:We(o.type)||"Memo";case ke:h=o._payload,o=o._init;try{return We(o(h))}catch{}}return null}var pt=Array.isArray,xe=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,et=i.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Qe={pending:!1,data:null,method:null,action:null},Rt=[],we=-1;function tt(o){return{current:o}}function _t(o){0>we||(o.current=Rt[we],Rt[we]=null,we--)}function Pt(o,h){we++,Rt[we]=o.current,o.current=h}var At=tt(null),St=tt(null),qt=tt(null),Xe=tt(null);function mt(o,h){switch(Pt(qt,h),Pt(St,o),Pt(At,null),h.nodeType){case 9:case 11:o=(o=h.documentElement)&&(o=o.namespaceURI)?Gg(o):0;break;default:if(o=h.tagName,h=h.namespaceURI)h=Gg(h),o=Zg(h,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}_t(At),Pt(At,o)}function ft(){_t(At),_t(St),_t(qt)}function Ke(o){o.memoizedState!==null&&Pt(Xe,o);var h=At.current,m=Zg(h,o.type);h!==m&&(Pt(St,o),Pt(At,m))}function Je(o){St.current===o&&(_t(At),_t(St)),Xe.current===o&&(_t(Xe),Te._currentValue=Qe)}var Vt=Object.prototype.hasOwnProperty,$t=e.unstable_scheduleCallback,Kt=e.unstable_cancelCallback,Gt=e.unstable_shouldYield,kt=e.unstable_requestPaint,Qt=e.unstable_now,ln=e.unstable_getCurrentPriorityLevel,Sn=e.unstable_ImmediatePriority,bn=e.unstable_UserBlockingPriority,gn=e.unstable_NormalPriority,En=e.unstable_LowPriority,Ln=e.unstable_IdlePriority,Pn=e.log,Hn=e.unstable_setDisableYieldValue,or=null,dr=null;function sr(o){if(typeof Pn=="function"&&Hn(o),dr&&typeof dr.setStrictMode=="function")try{dr.setStrictMode(or,o)}catch{}}var Gn=Math.clz32?Math.clz32:br,pr=Math.log,Jn=Math.LN2;function br(o){return o>>>=0,o===0?32:31-(pr(o)/Jn|0)|0}var gr=256,Lr=4194304;function Ge(o){var h=o&42;if(h!==0)return h;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function te(o,h,m){var x=o.pendingLanes;if(x===0)return 0;var A=0,z=o.suspendedLanes,K=o.pingedLanes;o=o.warmLanes;var se=x&134217727;return se!==0?(x=se&~z,x!==0?A=Ge(x):(K&=se,K!==0?A=Ge(K):m||(m=se&~o,m!==0&&(A=Ge(m))))):(se=x&~z,se!==0?A=Ge(se):K!==0?A=Ge(K):m||(m=x&~o,m!==0&&(A=Ge(m)))),A===0?0:h!==0&&h!==A&&(h&z)===0&&(z=A&-A,m=h&-h,z>=m||z===32&&(m&4194048)!==0)?h:A}function ie(o,h){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&h)===0}function de(o,h){switch(o){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ce(){var o=gr;return gr<<=1,(gr&4194048)===0&&(gr=256),o}function Ne(){var o=Lr;return Lr<<=1,(Lr&62914560)===0&&(Lr=4194304),o}function ce(o){for(var h=[],m=0;31>m;m++)h.push(o);return h}function rt(o,h){o.pendingLanes|=h,h!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ve(o,h,m,x,A,z){var K=o.pendingLanes;o.pendingLanes=m,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=m,o.entangledLanes&=m,o.errorRecoveryDisabledLanes&=m,o.shellSuspendCounter=0;var se=o.entanglements,Be=o.expirationTimes,lt=o.hiddenUpdates;for(m=K&~m;0<m;){var zt=31-Gn(m),Bt=1<<zt;se[zt]=0,Be[zt]=-1;var yt=lt[zt];if(yt!==null)for(lt[zt]=null,zt=0;zt<yt.length;zt++){var bt=yt[zt];bt!==null&&(bt.lane&=-536870913)}m&=~Bt}x!==0&&Ie(o,x,0),z!==0&&A===0&&o.tag!==0&&(o.suspendedLanes|=z&~(K&~h))}function Ie(o,h,m){o.pendingLanes|=h,o.suspendedLanes&=~h;var x=31-Gn(h);o.entangledLanes|=h,o.entanglements[x]=o.entanglements[x]|1073741824|m&4194090}function Pe(o,h){var m=o.entangledLanes|=h;for(o=o.entanglements;m;){var x=31-Gn(m),A=1<<x;A&h|o[x]&h&&(o[x]|=h),m&=~A}}function Me(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ye(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function xt(){var o=et.p;return o!==0?o:(o=window.event,o===void 0?32:hn(o.type))}function Mt(o,h){var m=et.p;try{return et.p=o,h()}finally{et.p=m}}var Ot=Math.random().toString(36).slice(2),Xt="__reactFiber$"+Ot,It="__reactProps$"+Ot,qe="__reactContainer$"+Ot,dn="__reactEvents$"+Ot,cn="__reactListeners$"+Ot,en="__reactHandles$"+Ot,Wt="__reactResources$"+Ot,at="__reactMarker$"+Ot;function Ht(o){delete o[Xt],delete o[It],delete o[dn],delete o[cn],delete o[en]}function an(o){var h=o[Xt];if(h)return h;for(var m=o.parentNode;m;){if(h=m[qe]||m[Xt]){if(m=h.alternate,h.child!==null||m!==null&&m.child!==null)for(o=Cc(o);o!==null;){if(m=o[Xt])return m;o=Cc(o)}return h}o=m,m=o.parentNode}return null}function Cn(o){if(o=o[Xt]||o[qe]){var h=o.tag;if(h===5||h===6||h===13||h===26||h===27||h===3)return o}return null}function pn(o){var h=o.tag;if(h===5||h===26||h===27||h===6)return o.stateNode;throw Error(a(33))}function Bn(o){var h=o[Wt];return h||(h=o[Wt]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function tn(o){o[at]=!0}var xr=new Set,mi={};function Wn(o,h){Xn(o,h),Xn(o+"Capture",h)}function Xn(o,h){for(mi[o]=h,o=0;o<h.length;o++)xr.add(h[o])}var rr=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lr={},On={};function cr(o){return Vt.call(On,o)?!0:Vt.call(lr,o)?!1:rr.test(o)?On[o]=!0:(lr[o]=!0,!1)}function Dn(o,h,m){if(cr(h))if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":o.removeAttribute(h);return;case"boolean":var x=h.toLowerCase().slice(0,5);if(x!=="data-"&&x!=="aria-"){o.removeAttribute(h);return}}o.setAttribute(h,""+m)}}function Rr(o,h,m){if(m===null)o.removeAttribute(h);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttribute(h,""+m)}}function Yr(o,h,m,x){if(x===null)o.removeAttribute(m);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(m);return}o.setAttributeNS(h,m,""+x)}}var Na,Di;function ci(o){if(Na===void 0)try{throw Error()}catch(m){var h=m.stack.trim().match(/\n( *(at )?)/);Na=h&&h[1]||"",Di=-1<m.stack.indexOf(`
    at`)?" (<anonymous>)":-1<m.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Na+o+Di}var Ca=!1;function Ta(o,h){if(!o||Ca)return"";Ca=!0;var m=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var x={DetermineComponentFrameRoot:function(){try{if(h){var Bt=function(){throw Error()};if(Object.defineProperty(Bt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Bt,[])}catch(bt){var yt=bt}Reflect.construct(o,[],Bt)}else{try{Bt.call()}catch(bt){yt=bt}o.call(Bt.prototype)}}else{try{throw Error()}catch(bt){yt=bt}(Bt=o())&&typeof Bt.catch=="function"&&Bt.catch(function(){})}}catch(bt){if(bt&&yt&&typeof bt.stack=="string")return[bt.stack,yt.stack]}return[null,null]}};x.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var A=Object.getOwnPropertyDescriptor(x.DetermineComponentFrameRoot,"name");A&&A.configurable&&Object.defineProperty(x.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=x.DetermineComponentFrameRoot(),K=z[0],se=z[1];if(K&&se){var Be=K.split(`
`),lt=se.split(`
`);for(A=x=0;x<Be.length&&!Be[x].includes("DetermineComponentFrameRoot");)x++;for(;A<lt.length&&!lt[A].includes("DetermineComponentFrameRoot");)A++;if(x===Be.length||A===lt.length)for(x=Be.length-1,A=lt.length-1;1<=x&&0<=A&&Be[x]!==lt[A];)A--;for(;1<=x&&0<=A;x--,A--)if(Be[x]!==lt[A]){if(x!==1||A!==1)do if(x--,A--,0>A||Be[x]!==lt[A]){var zt=`
`+Be[x].replace(" at new "," at ");return o.displayName&&zt.includes("<anonymous>")&&(zt=zt.replace("<anonymous>",o.displayName)),zt}while(1<=x&&0<=A);break}}}finally{Ca=!1,Error.prepareStackTrace=m}return(m=o?o.displayName||o.name:"")?ci(m):""}function Vc(o){switch(o.tag){case 26:case 27:case 5:return ci(o.type);case 16:return ci("Lazy");case 13:return ci("Suspense");case 19:return ci("SuspenseList");case 0:case 15:return Ta(o.type,!1);case 11:return Ta(o.type.render,!1);case 1:return Ta(o.type,!0);case 31:return ci("Activity");default:return""}}function bs(o){try{var h="";do h+=Vc(o),o=o.return;while(o);return h}catch(m){return`
Error generating stack: `+m.message+`
`+m.stack}}function Ea(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Bh(o){var h=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function op(o){var h=Bh(o)?"checked":"value",m=Object.getOwnPropertyDescriptor(o.constructor.prototype,h),x=""+o[h];if(!o.hasOwnProperty(h)&&typeof m<"u"&&typeof m.get=="function"&&typeof m.set=="function"){var A=m.get,z=m.set;return Object.defineProperty(o,h,{configurable:!0,get:function(){return A.call(this)},set:function(K){x=""+K,z.call(this,K)}}),Object.defineProperty(o,h,{enumerable:m.enumerable}),{getValue:function(){return x},setValue:function(K){x=""+K},stopTracking:function(){o._valueTracker=null,delete o[h]}}}}function ho(o){o._valueTracker||(o._valueTracker=op(o))}function aa(o){if(!o)return!1;var h=o._valueTracker;if(!h)return!0;var m=h.getValue(),x="";return o&&(x=Bh(o)?o.checked?"true":"false":o.value),o=x,o!==m?(h.setValue(o),!0):!1}function ja(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var fo=/[\n"\\]/g;function ri(o){return o.replace(fo,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Xo(o,h,m,x,A,z,K,se){o.name="",K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"?o.type=K:o.removeAttribute("type"),h!=null?K==="number"?(h===0&&o.value===""||o.value!=h)&&(o.value=""+Ea(h)):o.value!==""+Ea(h)&&(o.value=""+Ea(h)):K!=="submit"&&K!=="reset"||o.removeAttribute("value"),h!=null?po(o,K,Ea(h)):m!=null?po(o,K,Ea(m)):x!=null&&o.removeAttribute("value"),A==null&&z!=null&&(o.defaultChecked=!!z),A!=null&&(o.checked=A&&typeof A!="function"&&typeof A!="symbol"),se!=null&&typeof se!="function"&&typeof se!="symbol"&&typeof se!="boolean"?o.name=""+Ea(se):o.removeAttribute("name")}function oa(o,h,m,x,A,z,K,se){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(o.type=z),h!=null||m!=null){if(!(z!=="submit"&&z!=="reset"||h!=null))return;m=m!=null?""+Ea(m):"",h=h!=null?""+Ea(h):m,se||h===o.value||(o.value=h),o.defaultValue=h}x=x??A,x=typeof x!="function"&&typeof x!="symbol"&&!!x,o.checked=se?o.checked:!!x,o.defaultChecked=!!x,K!=null&&typeof K!="function"&&typeof K!="symbol"&&typeof K!="boolean"&&(o.name=K)}function po(o,h,m){h==="number"&&ja(o.ownerDocument)===o||o.defaultValue===""+m||(o.defaultValue=""+m)}function Po(o,h,m,x){if(o=o.options,h){h={};for(var A=0;A<m.length;A++)h["$"+m[A]]=!0;for(m=0;m<o.length;m++)A=h.hasOwnProperty("$"+o[m].value),o[m].selected!==A&&(o[m].selected=A),A&&x&&(o[m].defaultSelected=!0)}else{for(m=""+Ea(m),h=null,A=0;A<o.length;A++){if(o[A].value===m){o[A].selected=!0,x&&(o[A].defaultSelected=!0);return}h!==null||o[A].disabled||(h=o[A])}h!==null&&(h.selected=!0)}}function xs(o,h,m){if(h!=null&&(h=""+Ea(h),h!==o.value&&(o.value=h),m==null)){o.defaultValue!==h&&(o.defaultValue=h);return}o.defaultValue=m!=null?""+Ea(m):""}function Uc(o,h,m,x){if(h==null){if(x!=null){if(m!=null)throw Error(a(92));if(pt(x)){if(1<x.length)throw Error(a(93));x=x[0]}m=x}m==null&&(m=""),h=m}m=Ea(h),o.defaultValue=m,x=o.textContent,x===m&&x!==""&&x!==null&&(o.value=x)}function il(o,h){if(h){var m=o.firstChild;if(m&&m===o.lastChild&&m.nodeType===3){m.nodeValue=h;return}}o.textContent=h}var Ma=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function tr(o,h,m){var x=h.indexOf("--")===0;m==null||typeof m=="boolean"||m===""?x?o.setProperty(h,""):h==="float"?o.cssFloat="":o[h]="":x?o.setProperty(h,m):typeof m!="number"||m===0||Ma.has(h)?h==="float"?o.cssFloat=m:o[h]=(""+m).trim():o[h]=m+"px"}function jl(o,h,m){if(h!=null&&typeof h!="object")throw Error(a(62));if(o=o.style,m!=null){for(var x in m)!m.hasOwnProperty(x)||h!=null&&h.hasOwnProperty(x)||(x.indexOf("--")===0?o.setProperty(x,""):x==="float"?o.cssFloat="":o[x]="");for(var A in h)x=h[A],h.hasOwnProperty(A)&&m[A]!==x&&tr(o,A,x)}else for(var z in h)h.hasOwnProperty(z)&&tr(o,z,h[z])}function Ji(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Fl=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),er=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(o){return er.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}var $l=null;function ol(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var ji=null,gi=null;function yi(o){var h=Cn(o);if(h&&(o=h.stateNode)){var m=o[It]||null;e:switch(o=h.stateNode,h.type){case"input":if(Xo(o,m.value,m.defaultValue,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name),h=m.name,m.type==="radio"&&h!=null){for(m=o;m.parentNode;)m=m.parentNode;for(m=m.querySelectorAll('input[name="'+ri(""+h)+'"][type="radio"]'),h=0;h<m.length;h++){var x=m[h];if(x!==o&&x.form===o.form){var A=x[It]||null;if(!A)throw Error(a(90));Xo(x,A.value,A.defaultValue,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name)}}for(h=0;h<m.length;h++)x=m[h],x.form===o.form&&aa(x)}break e;case"textarea":xs(o,m.value,m.defaultValue);break e;case"select":h=m.value,h!=null&&Po(o,!!m.multiple,h,!1)}}}var Fi=!1;function Br(o,h,m){if(Fi)return o(h,m);Fi=!0;try{var x=o(h);return x}finally{if(Fi=!1,(ji!==null||gi!==null)&&(ya(),ji&&(h=ji,o=gi,gi=ji=null,yi(h),o)))for(h=0;h<o.length;h++)yi(o[h])}}function Wo(o,h){var m=o.stateNode;if(m===null)return null;var x=m[It]||null;if(x===null)return null;m=x[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(x=!x.disabled)||(o=o.type,x=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!x;break e;default:o=!1}if(o)return null;if(m&&typeof m!="function")throw Error(a(231,h,typeof m));return m}var ui=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Aa=!1;if(ui)try{var qi={};Object.defineProperty(qi,"passive",{get:function(){Aa=!0}}),window.addEventListener("test",qi,qi),window.removeEventListener("test",qi,qi)}catch{Aa=!1}var mo=null,wr=null,Hr=null;function Yn(){if(Hr)return Hr;var o,h=wr,m=h.length,x,A="value"in mo?mo.value:mo.textContent,z=A.length;for(o=0;o<m&&h[o]===A[o];o++);var K=m-o;for(x=1;x<=K&&h[m-x]===A[z-x];x++);return Hr=A.slice(o,1<x?1-x:void 0)}function Rn(o){var h=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&h===13&&(o=13)):o=h,o===10&&(o=13),32<=o||o===13?o:0}function ws(){return!0}function Fn(){return!1}function ea(o){function h(m,x,A,z,K){this._reactName=m,this._targetInst=A,this.type=x,this.nativeEvent=z,this.target=K,this.currentTarget=null;for(var se in o)o.hasOwnProperty(se)&&(m=o[se],this[se]=m?m(z):z[se]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?ws:Fn,this.isPropagationStopped=Fn,this}return I(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var m=this.nativeEvent;m&&(m.preventDefault?m.preventDefault():typeof m.returnValue!="unknown"&&(m.returnValue=!1),this.isDefaultPrevented=ws)},stopPropagation:function(){var m=this.nativeEvent;m&&(m.stopPropagation?m.stopPropagation():typeof m.cancelBubble!="unknown"&&(m.cancelBubble=!0),this.isPropagationStopped=ws)},persist:function(){},isPersistent:ws}),h}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Hc=ea(_i),Vl=I({},_i,{view:0,detail:0}),qu=ea(Vl),sl,Ul,Hl,ql=I({},Vl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Yl,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==Hl&&(Hl&&o.type==="mousemove"?(sl=o.screenX-Hl.screenX,Ul=o.screenY-Hl.screenY):Ul=sl=0,Hl=o),sl)},movementY:function(o){return"movementY"in o?o.movementY:Ul}}),qc=ea(ql),Gl=I({},ql,{dataTransfer:0}),Gi=ea(Gl),Zl=I({},Vl,{relatedTarget:0}),Xl=ea(Zl),ll=I({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),Zi=ea(ll),Nh=I({},_i,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),jh=ea(Nh),sp=I({},_i,{data:0}),lp=ea(sp),sa={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Yo={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Wl(o){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(o):(o=Yo[o])?!!h[o]:!1}function Yl(){return Wl}var go=I({},Vl,{key:function(o){if(o.key){var h=sa[o.key]||o.key;if(h!=="Unidentified")return h}return o.type==="keypress"?(o=Rn(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?Gu[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Yl,charCode:function(o){return o.type==="keypress"?Rn(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?Rn(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Kl=ea(go),Fh=I({},ql,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cp=ea(Fh),Gf=I({},Vl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Yl}),ig=ea(Gf),ag=I({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),og=ea(ag),$h=I({},ql,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),Gc=ea($h),Vh=I({},_i,{newState:0,oldState:0}),Uh=ea(Vh),Hh=[9,13,27,32],yo=ui&&"CompositionEvent"in window,Zc=null;ui&&"documentMode"in document&&(Zc=document.documentMode);var Zf=ui&&"TextEvent"in window&&!Zc,Xc=ui&&(!yo||Zc&&8<Zc&&11>=Zc),Wc=" ",up=!1;function Zu(o,h){switch(o){case"keyup":return Hh.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xf(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var _o=!1;function hp(o,h){switch(o){case"compositionend":return Xf(h);case"keypress":return h.which!==32?null:(up=!0,Wc);case"textInput":return o=h.data,o===Wc&&up?null:o;default:return null}}function fp(o,h){if(_o)return o==="compositionend"||!yo&&Zu(o,h)?(o=Yn(),Hr=wr=mo=null,_o=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return Xc&&h.locale!=="ko"?null:h.data;default:return null}}var sg={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Wf(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h==="input"?!!sg[o.type]:h==="textarea"}function Yc(o,h,m,x){ji?gi?gi.push(x):gi=[x]:ji=x,h=Cu(h,"onChange"),0<h.length&&(m=new Hc("onChange","change",null,m,x),o.push({event:m,listeners:h}))}var Kc=null,Qc=null;function dp(o){wc(o,0)}function Jc(o){var h=pn(o);if(aa(h))return o}function Ss(o,h){if(o==="change")return h}var Yf=!1;if(ui){var qh;if(ui){var cl="oninput"in document;if(!cl){var Kf=document.createElement("div");Kf.setAttribute("oninput","return;"),cl=typeof Kf.oninput=="function"}qh=cl}else qh=!1;Yf=qh&&(!document.documentMode||9<document.documentMode)}function Xu(){Kc&&(Kc.detachEvent("onpropertychange",pp),Qc=Kc=null)}function pp(o){if(o.propertyName==="value"&&Jc(Qc)){var h=[];Yc(h,Qc,o,ol(o)),Br(dp,h)}}function lg(o,h,m){o==="focusin"?(Xu(),Kc=h,Qc=m,Kc.attachEvent("onpropertychange",pp)):o==="focusout"&&Xu()}function Qf(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return Jc(Qc)}function mp(o,h){if(o==="click")return Jc(h)}function gp(o,h){if(o==="input"||o==="change")return Jc(h)}function Jf(o,h){return o===h&&(o!==0||1/o===1/h)||o!==o&&h!==h}var Fa=typeof Object.is=="function"?Object.is:Jf;function Kn(o,h){if(Fa(o,h))return!0;if(typeof o!="object"||o===null||typeof h!="object"||h===null)return!1;var m=Object.keys(o),x=Object.keys(h);if(m.length!==x.length)return!1;for(x=0;x<m.length;x++){var A=m[x];if(!Vt.call(h,A)||!Fa(o[A],h[A]))return!1}return!0}function Ko(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function Gh(o,h){var m=Ko(o);o=0;for(var x;m;){if(m.nodeType===3){if(x=o+m.textContent.length,o<=h&&x>=h)return{node:m,offset:h-o};o=x}e:{for(;m;){if(m.nextSibling){m=m.nextSibling;break e}m=m.parentNode}m=void 0}m=Ko(m)}}function Zh(o,h){return o&&h?o===h?!0:o&&o.nodeType===3?!1:h&&h.nodeType===3?Zh(o,h.parentNode):"contains"in o?o.contains(h):o.compareDocumentPosition?!!(o.compareDocumentPosition(h)&16):!1:!1}function Xh(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var h=ja(o.document);h instanceof o.HTMLIFrameElement;){try{var m=typeof h.contentWindow.location.href=="string"}catch{m=!1}if(m)o=h.contentWindow;else break;h=ja(o.document)}return h}function Wh(o){var h=o&&o.nodeName&&o.nodeName.toLowerCase();return h&&(h==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||h==="textarea"||o.contentEditable==="true")}var ed=ui&&"documentMode"in document&&11>=document.documentMode,vo=null,Wu=null,Yu=null,td=!1;function yp(o,h,m){var x=m.window===m?m.document:m.nodeType===9?m:m.ownerDocument;td||vo==null||vo!==ja(x)||(x=vo,"selectionStart"in x&&Wh(x)?x={start:x.selectionStart,end:x.selectionEnd}:(x=(x.ownerDocument&&x.ownerDocument.defaultView||window).getSelection(),x={anchorNode:x.anchorNode,anchorOffset:x.anchorOffset,focusNode:x.focusNode,focusOffset:x.focusOffset}),Yu&&Kn(Yu,x)||(Yu=x,x=Cu(Wu,"onSelect"),0<x.length&&(h=new Hc("onSelect","select",null,h,m),o.push({event:h,listeners:x}),h.target=vo)))}function Ql(o,h){var m={};return m[o.toLowerCase()]=h.toLowerCase(),m["Webkit"+o]="webkit"+h,m["Moz"+o]="moz"+h,m}var Jl={animationend:Ql("Animation","AnimationEnd"),animationiteration:Ql("Animation","AnimationIteration"),animationstart:Ql("Animation","AnimationStart"),transitionrun:Ql("Transition","TransitionRun"),transitionstart:Ql("Transition","TransitionStart"),transitioncancel:Ql("Transition","TransitionCancel"),transitionend:Ql("Transition","TransitionEnd")},nd={},rd={};ui&&(rd=document.createElement("div").style,"AnimationEvent"in window||(delete Jl.animationend.animation,delete Jl.animationiteration.animation,delete Jl.animationstart.animation),"TransitionEvent"in window||delete Jl.transitionend.transition);function Qo(o){if(nd[o])return nd[o];if(!Jl[o])return o;var h=Jl[o],m;for(m in h)if(h.hasOwnProperty(m)&&m in rd)return nd[o]=h[m];return o}var Ku=Qo("animationend"),Qu=Qo("animationiteration"),Yh=Qo("animationstart"),ec=Qo("transitionrun"),Kh=Qo("transitionstart"),eu=Qo("transitioncancel"),Ya=Qo("transitionend"),id=new Map,Qh="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Qh.push("scrollEnd");function Ka(o,h){id.set(o,h),Wn(h,[o])}var ul=new WeakMap;function Pa(o,h){if(typeof o=="object"&&o!==null){var m=ul.get(o);return m!==void 0?m:(h={value:o,source:h,stack:bs(h)},ul.set(o,h),h)}return{value:o,source:h,stack:bs(h)}}var Ra=[],Jo=0,tu=0;function tc(){for(var o=Jo,h=tu=Jo=0;h<o;){var m=Ra[h];Ra[h++]=null;var x=Ra[h];Ra[h++]=null;var A=Ra[h];Ra[h++]=null;var z=Ra[h];if(Ra[h++]=null,x!==null&&A!==null){var K=x.pending;K===null?A.next=A:(A.next=K.next,K.next=A),x.pending=A}z!==0&&Ju(m,A,z)}}function Cs(o,h,m,x){Ra[Jo++]=o,Ra[Jo++]=h,Ra[Jo++]=m,Ra[Jo++]=x,tu|=x,o.lanes|=x,o=o.alternate,o!==null&&(o.lanes|=x)}function hl(o,h,m,x){return Cs(o,h,m,x),qn(o)}function nc(o,h){return Cs(o,null,null,h),qn(o)}function Ju(o,h,m){o.lanes|=m;var x=o.alternate;x!==null&&(x.lanes|=m);for(var A=!1,z=o.return;z!==null;)z.childLanes|=m,x=z.alternate,x!==null&&(x.childLanes|=m),z.tag===22&&(o=z.stateNode,o===null||o._visibility&1||(A=!0)),o=z,z=z.return;return o.tag===3?(z=o.stateNode,A&&h!==null&&(A=31-Gn(m),o=z.hiddenUpdates,x=o[A],x===null?o[A]=[h]:x.push(h),h.lane=m|536870912),z):null}function qn(o){if(50<xd)throw xd=0,Vp=null,Error(a(185));for(var h=o.return;h!==null;)o=h,h=o.return;return o.tag===3?o.stateNode:null}var Ts={};function Jh(o,h,m,x){this.tag=o,this.key=m,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=x,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Oa(o,h,m,x){return new Jh(o,h,m,x)}function rc(o){return o=o.prototype,!(!o||!o.isReactComponent)}function Es(o,h){var m=o.alternate;return m===null?(m=Oa(o.tag,h,o.key,o.mode),m.elementType=o.elementType,m.type=o.type,m.stateNode=o.stateNode,m.alternate=o,o.alternate=m):(m.pendingProps=h,m.type=o.type,m.flags=0,m.subtreeFlags=0,m.deletions=null),m.flags=o.flags&65011712,m.childLanes=o.childLanes,m.lanes=o.lanes,m.child=o.child,m.memoizedProps=o.memoizedProps,m.memoizedState=o.memoizedState,m.updateQueue=o.updateQueue,h=o.dependencies,m.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},m.sibling=o.sibling,m.index=o.index,m.ref=o.ref,m.refCleanup=o.refCleanup,m}function _p(o,h){o.flags&=65011714;var m=o.alternate;return m===null?(o.childLanes=0,o.lanes=h,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=m.childLanes,o.lanes=m.lanes,o.child=m.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=m.memoizedProps,o.memoizedState=m.memoizedState,o.updateQueue=m.updateQueue,o.type=m.type,h=m.dependencies,o.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),o}function eh(o,h,m,x,A,z){var K=0;if(x=o,typeof o=="function")rc(o)&&(K=1);else if(typeof o=="string")K=D(o,m,At.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case Le:return o=Oa(31,m,h,A),o.elementType=Le,o.lanes=z,o;case X:return ic(m.children,A,z,h);case J:K=8,A|=24;break;case G:return o=Oa(12,m,h,A|2),o.elementType=G,o.lanes=z,o;case ae:return o=Oa(13,m,h,A),o.elementType=ae,o.lanes=z,o;case ve:return o=Oa(19,m,h,A),o.elementType=ve,o.lanes=z,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case le:case pe:K=10;break e;case oe:K=9;break e;case he:K=11;break e;case Se:K=14;break e;case ke:K=16,x=null;break e}K=29,m=Error(a(130,o===null?"null":typeof o,"")),x=null}return h=Oa(K,m,h,A),h.elementType=o,h.type=x,h.lanes=z,h}function ic(o,h,m,x){return o=Oa(7,o,x,h),o.lanes=m,o}function nu(o,h,m){return o=Oa(6,o,null,h),o.lanes=m,o}function ac(o,h,m){return h=Oa(4,o.children!==null?o.children:[],o.key,h),h.lanes=m,h.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},h}var Ms=[],fl=0,oc=null,ru=0,la=[],ca=0,Ro=null,Oo=1,Qa="";function es(o,h){Ms[fl++]=ru,Ms[fl++]=oc,oc=o,ru=h}function ad(o,h,m){la[ca++]=Oo,la[ca++]=Qa,la[ca++]=Ro,Ro=o;var x=Oo;o=Qa;var A=32-Gn(x)-1;x&=~(1<<A),m+=1;var z=32-Gn(h)+A;if(30<z){var K=A-A%5;z=(x&(1<<K)-1).toString(32),x>>=K,A-=K,Oo=1<<32-Gn(h)+A|m<<A|x,Qa=z+o}else Oo=1<<z|m<<A|x,Qa=o}function iu(o){o.return!==null&&(es(o,1),ad(o,1,0))}function th(o){for(;o===oc;)oc=Ms[--fl],Ms[fl]=null,ru=Ms[--fl],Ms[fl]=null;for(;o===Ro;)Ro=la[--ca],la[ca]=null,Qa=la[--ca],la[ca]=null,Oo=la[--ca],la[ca]=null}var ua=null,hi=null,hr=!1,ts=null,Io=!1,sc=Error(a(519));function Or(o){var h=Error(a(418,""));throw Va(Pa(h,o)),sc}function As(o){var h=o.stateNode,m=o.type,x=o.memoizedProps;switch(h[Xt]=o,h[It]=x,m){case"dialog":ar("cancel",h),ar("close",h);break;case"iframe":case"object":case"embed":ar("load",h);break;case"video":case"audio":for(m=0;m<Ed.length;m++)ar(Ed[m],h);break;case"source":ar("error",h);break;case"img":case"image":case"link":ar("error",h),ar("load",h);break;case"details":ar("toggle",h);break;case"input":ar("invalid",h),oa(h,x.value,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name,!0),ho(h);break;case"select":ar("invalid",h);break;case"textarea":ar("invalid",h),Uc(h,x.value,x.defaultValue,x.children),ho(h)}m=x.children,typeof m!="string"&&typeof m!="number"&&typeof m!="bigint"||h.textContent===""+m||x.suppressHydrationWarning===!0||Hg(h.textContent,m)?(x.popover!=null&&(ar("beforetoggle",h),ar("toggle",h)),x.onScroll!=null&&ar("scroll",h),x.onScrollEnd!=null&&ar("scrollend",h),x.onClick!=null&&(h.onclick=Pd),h=!0):h=!1,h||Or(o)}function $a(o){for(ua=o.return;ua;)switch(ua.tag){case 5:case 13:Io=!1;return;case 27:case 3:Io=!0;return;default:ua=ua.return}}function lc(o){if(o!==ua)return!1;if(!hr)return $a(o),hr=!0,!1;var h=o.tag,m;if((m=h!==3&&h!==27)&&((m=h===5)&&(m=o.type,m=!(m!=="form"&&m!=="button")||rm(o.type,o.memoizedProps)),m=!m),m&&hi&&Or(o),$a(o),h===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(a(317));e:{for(o=o.nextSibling,h=0;o;){if(o.nodeType===8)if(m=o.data,m==="/$"){if(h===0){hi=Ha(o.nextSibling);break e}h--}else m!=="$"&&m!=="$!"&&m!=="$?"||h++;o=o.nextSibling}hi=null}}else h===27?(h=hi,Sc(o.type)?(o=Ki,Ki=null,hi=o):hi=h):hi=ua?Ha(o.stateNode.nextSibling):null;return!0}function Ps(){hi=ua=null,hr=!1}function ef(){var o=ts;return o!==null&&(oo===null?oo=o:oo.push.apply(oo,o),ts=null),o}function Va(o){ts===null?ts=[o]:ts.push(o)}var nh=tt(null),ko=null,zo=null;function Rs(o,h,m){Pt(nh,h._currentValue),h._currentValue=m}function ns(o){o._currentValue=nh.current,_t(nh)}function tf(o,h,m){for(;o!==null;){var x=o.alternate;if((o.childLanes&h)!==h?(o.childLanes|=h,x!==null&&(x.childLanes|=h)):x!==null&&(x.childLanes&h)!==h&&(x.childLanes|=h),o===m)break;o=o.return}}function dl(o,h,m,x){var A=o.child;for(A!==null&&(A.return=o);A!==null;){var z=A.dependencies;if(z!==null){var K=A.child;z=z.firstContext;e:for(;z!==null;){var se=z;z=A;for(var Be=0;Be<h.length;Be++)if(se.context===h[Be]){z.lanes|=m,se=z.alternate,se!==null&&(se.lanes|=m),tf(z.return,m,o),x||(K=null);break e}z=se.next}}else if(A.tag===18){if(K=A.return,K===null)throw Error(a(341));K.lanes|=m,z=K.alternate,z!==null&&(z.lanes|=m),tf(K,m,o),K=null}else K=A.child;if(K!==null)K.return=A;else for(K=A;K!==null;){if(K===o){K=null;break}if(A=K.sibling,A!==null){A.return=K.return,K=A;break}K=K.return}A=K}}function rs(o,h,m,x){o=null;for(var A=h,z=!1;A!==null;){if(!z){if((A.flags&524288)!==0)z=!0;else if((A.flags&262144)!==0)break}if(A.tag===10){var K=A.alternate;if(K===null)throw Error(a(387));if(K=K.memoizedProps,K!==null){var se=A.type;Fa(A.pendingProps.value,K.value)||(o!==null?o.push(se):o=[se])}}else if(A===Xe.current){if(K=A.alternate,K===null)throw Error(a(387));K.memoizedState.memoizedState!==A.memoizedState.memoizedState&&(o!==null?o.push(Te):o=[Te])}A=A.return}o!==null&&dl(h,o,m,x),h.flags|=262144}function vi(o){for(o=o.firstContext;o!==null;){if(!Fa(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function bo(o){ko=o,zo=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function Xi(o){return od(ko,o)}function rh(o,h){return ko===null&&bo(o),od(o,h)}function od(o,h){var m=h._currentValue;if(h={context:h,memoizedValue:m,next:null},zo===null){if(o===null)throw Error(a(308));zo=h,o.dependencies={lanes:0,firstContext:h},o.flags|=524288}else zo=zo.next=h;return m}var au=typeof AbortController<"u"?AbortController:function(){var o=[],h=this.signal={aborted:!1,addEventListener:function(m,x){o.push(x)}};this.abort=function(){h.aborted=!0,o.forEach(function(m){return m()})}},sd=e.unstable_scheduleCallback,nf=e.unstable_NormalPriority,Li={$$typeof:pe,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function pl(){return{controller:new au,data:new Map,refCount:0}}function ou(o){o.refCount--,o.refCount===0&&sd(nf,function(){o.controller.abort()})}var Bi=null,Ja=0,Do=0,ha=null;function su(o,h){if(Bi===null){var m=Bi=[];Ja=0,Do=Kp(),ha={status:"pending",value:void 0,then:function(x){m.push(x)}}}return Ja++,h.then(ih,ih),h}function ih(){if(--Ja===0&&Bi!==null){ha!==null&&(ha.status="fulfilled");var o=Bi;Bi=null,Do=0,ha=null;for(var h=0;h<o.length;h++)(0,o[h])()}}function cg(o,h){var m=[],x={status:"pending",value:null,reason:null,then:function(A){m.push(A)}};return o.then(function(){x.status="fulfilled",x.value=h;for(var A=0;A<m.length;A++)(0,m[A])(h)},function(A){for(x.status="rejected",x.reason=A,A=0;A<m.length;A++)(0,m[A])(void 0)}),x}var rf=xe.S;xe.S=function(o,h){typeof h=="object"&&h!==null&&typeof h.then=="function"&&su(o,h),rf!==null&&rf(o,h)};var is=tt(null);function ah(){var o=is.current;return o!==null?o:kr.pooledCache}function Os(o,h){h===null?Pt(is,is.current):Pt(is,h.pool)}function Lo(){var o=ah();return o===null?null:{parent:Li._currentValue,pool:o}}var rn=Error(a(460)),oh=Error(a(474)),cc=Error(a(542)),af={then:function(){}};function uc(o){return o=o.status,o==="fulfilled"||o==="rejected"}function ml(){}function of(o,h,m){switch(m=o[m],m===void 0?o.push(h):m!==h&&(h.then(ml,ml),h=m),h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,vp(o),o;default:if(typeof h.status=="string")h.then(ml,ml);else{if(o=kr,o!==null&&100<o.shellSuspendCounter)throw Error(a(482));o=h,o.status="pending",o.then(function(x){if(h.status==="pending"){var A=h;A.status="fulfilled",A.value=x}},function(x){if(h.status==="pending"){var A=h;A.status="rejected",A.reason=x}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw o=h.reason,vp(o),o}throw Vn=h,rn}}var Vn=null;function sh(){if(Vn===null)throw Error(a(459));var o=Vn;return Vn=null,o}function vp(o){if(o===rn||o===cc)throw Error(a(483))}var as=!1;function sf(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function lf(o,h){o=o.updateQueue,h.updateQueue===o&&(h.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function os(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Bo(o,h,m){var x=o.updateQueue;if(x===null)return null;if(x=x.shared,(jr&2)!==0){var A=x.pending;return A===null?h.next=h:(h.next=A.next,A.next=h),x.pending=h,h=qn(o),Ju(o,null,m),h}return Cs(o,x,h,m),qn(o)}function Is(o,h,m){if(h=h.updateQueue,h!==null&&(h=h.shared,(m&4194048)!==0)){var x=h.lanes;x&=o.pendingLanes,m|=x,h.lanes=m,Pe(o,m)}}function ld(o,h){var m=o.updateQueue,x=o.alternate;if(x!==null&&(x=x.updateQueue,m===x)){var A=null,z=null;if(m=m.firstBaseUpdate,m!==null){do{var K={lane:m.lane,tag:m.tag,payload:m.payload,callback:null,next:null};z===null?A=z=K:z=z.next=K,m=m.next}while(m!==null);z===null?A=z=h:z=z.next=h}else A=z=h;m={baseState:x.baseState,firstBaseUpdate:A,lastBaseUpdate:z,shared:x.shared,callbacks:x.callbacks},o.updateQueue=m;return}o=m.lastBaseUpdate,o===null?m.firstBaseUpdate=h:o.next=h,m.lastBaseUpdate=h}var lu=!1;function lh(){if(lu){var o=ha;if(o!==null)throw o}}function ch(o,h,m,x){lu=!1;var A=o.updateQueue;as=!1;var z=A.firstBaseUpdate,K=A.lastBaseUpdate,se=A.shared.pending;if(se!==null){A.shared.pending=null;var Be=se,lt=Be.next;Be.next=null,K===null?z=lt:K.next=lt,K=Be;var zt=o.alternate;zt!==null&&(zt=zt.updateQueue,se=zt.lastBaseUpdate,se!==K&&(se===null?zt.firstBaseUpdate=lt:se.next=lt,zt.lastBaseUpdate=Be))}if(z!==null){var Bt=A.baseState;K=0,zt=lt=Be=null,se=z;do{var yt=se.lane&-536870913,bt=yt!==se.lane;if(bt?(yr&yt)===yt:(x&yt)===yt){yt!==0&&yt===Do&&(lu=!0),zt!==null&&(zt=zt.next={lane:0,tag:se.tag,payload:se.payload,callback:null,next:null});e:{var Nn=o,In=se;yt=h;var Zr=m;switch(In.tag){case 1:if(Nn=In.payload,typeof Nn=="function"){Bt=Nn.call(Zr,Bt,yt);break e}Bt=Nn;break e;case 3:Nn.flags=Nn.flags&-65537|128;case 0:if(Nn=In.payload,yt=typeof Nn=="function"?Nn.call(Zr,Bt,yt):Nn,yt==null)break e;Bt=I({},Bt,yt);break e;case 2:as=!0}}yt=se.callback,yt!==null&&(o.flags|=64,bt&&(o.flags|=8192),bt=A.callbacks,bt===null?A.callbacks=[yt]:bt.push(yt))}else bt={lane:yt,tag:se.tag,payload:se.payload,callback:se.callback,next:null},zt===null?(lt=zt=bt,Be=Bt):zt=zt.next=bt,K|=yt;if(se=se.next,se===null){if(se=A.shared.pending,se===null)break;bt=se,se=bt.next,bt.next=null,A.lastBaseUpdate=bt,A.shared.pending=null}}while(!0);zt===null&&(Be=Bt),A.baseState=Be,A.firstBaseUpdate=lt,A.lastBaseUpdate=zt,z===null&&(A.shared.lanes=0),_c|=K,o.lanes=K,o.memoizedState=Bt}}function ss(o,h){if(typeof o!="function")throw Error(a(191,o));o.call(h)}function Nr(o,h){var m=o.callbacks;if(m!==null)for(o.callbacks=null,o=0;o<m.length;o++)ss(m[o],h)}var ls=tt(null),cu=tt(0);function cd(o,h){o=Cl,Pt(cu,o),Pt(ls,h),Cl=o|h.baseLanes}function cf(){Pt(cu,Cl),Pt(ls,ls.current)}function uf(){Cl=cu.current,_t(ls),_t(cu)}var gl=0,An=null,Sr=null,nn=null,xn=!1,cs=!1,ks=!1,uu=0,ii=0,yl=null,xo=0;function bi(){throw Error(a(321))}function zs(o,h){if(h===null)return!1;for(var m=0;m<h.length&&m<o.length;m++)if(!Fa(o[m],h[m]))return!1;return!0}function Kr(o,h,m,x,A,z){return gl=z,An=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,xe.H=o===null||o.memoizedState===null?dh:ud,ks=!1,z=m(x,A),ks=!1,cs&&(z=hc(h,m,x,A)),Qr(o),z}function Qr(o){xe.H=Ar;var h=Sr!==null&&Sr.next!==null;if(gl=0,nn=Sr=An=null,xn=!1,ii=0,yl=null,h)throw Error(a(300));o===null||ta||(o=o.dependencies,o!==null&&vi(o)&&(ta=!0))}function hc(o,h,m,x){An=o;var A=0;do{if(cs&&(yl=null),ii=0,cs=!1,25<=A)throw Error(a(301));if(A+=1,nn=Sr=null,o.updateQueue!=null){var z=o.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}xe.H=bp,z=h(m,x)}while(cs);return z}function uh(){var o=xe.H,h=o.useState()[0];return h=typeof h.then=="function"?b(h):h,o=o.useState()[0],(Sr!==null?Sr.memoizedState:null)!==o&&(An.flags|=1024),h}function fc(){var o=uu!==0;return uu=0,o}function Ds(o,h,m){h.updateQueue=o.updateQueue,h.flags&=-2053,o.lanes&=~m}function hh(o){if(xn){for(o=o.memoizedState;o!==null;){var h=o.queue;h!==null&&(h.pending=null),o=o.next}xn=!1}gl=0,nn=Sr=An=null,cs=!1,ii=uu=0,yl=null}function fa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return nn===null?An.memoizedState=nn=o:nn=nn.next=o,nn}function Jr(){if(Sr===null){var o=An.alternate;o=o!==null?o.memoizedState:null}else o=Sr.next;var h=nn===null?An.memoizedState:nn.next;if(h!==null)nn=h,Sr=o;else{if(o===null)throw An.alternate===null?Error(a(467)):Error(a(310));Sr=o,o={memoizedState:Sr.memoizedState,baseState:Sr.baseState,baseQueue:Sr.baseQueue,queue:Sr.queue,next:null},nn===null?An.memoizedState=nn=o:nn=nn.next=o}return nn}function fh(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function b(o){var h=ii;return ii+=1,yl===null&&(yl=[]),o=of(yl,o,h),h=An,(nn===null?h.memoizedState:nn.next)===null&&(h=h.alternate,xe.H=h===null||h.memoizedState===null?dh:ud),o}function n(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return b(o);if(o.$$typeof===pe)return Xi(o)}throw Error(a(438,String(o)))}function s(o){var h=null,m=An.updateQueue;if(m!==null&&(h=m.memoCache),h==null){var x=An.alternate;x!==null&&(x=x.updateQueue,x!==null&&(x=x.memoCache,x!=null&&(h={data:x.data.map(function(A){return A.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),m===null&&(m=fh(),An.updateQueue=m),m.memoCache=h,m=h.data[h.index],m===void 0)for(m=h.data[h.index]=Array(o),x=0;x<o;x++)m[x]=Re;return h.index++,m}function p(o,h){return typeof h=="function"?h(o):h}function y(o){var h=Jr();return w(h,Sr,o)}function w(o,h,m){var x=o.queue;if(x===null)throw Error(a(311));x.lastRenderedReducer=m;var A=o.baseQueue,z=x.pending;if(z!==null){if(A!==null){var K=A.next;A.next=z.next,z.next=K}h.baseQueue=A=z,x.pending=null}if(z=o.baseState,A===null)o.memoizedState=z;else{h=A.next;var se=K=null,Be=null,lt=h,zt=!1;do{var Bt=lt.lane&-536870913;if(Bt!==lt.lane?(yr&Bt)===Bt:(gl&Bt)===Bt){var yt=lt.revertLane;if(yt===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null}),Bt===Do&&(zt=!0);else if((gl&yt)===yt){lt=lt.next,yt===Do&&(zt=!0);continue}else Bt={lane:0,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Be===null?(se=Be=Bt,K=z):Be=Be.next=Bt,An.lanes|=yt,_c|=yt;Bt=lt.action,ks&&m(z,Bt),z=lt.hasEagerState?lt.eagerState:m(z,Bt)}else yt={lane:Bt,revertLane:lt.revertLane,action:lt.action,hasEagerState:lt.hasEagerState,eagerState:lt.eagerState,next:null},Be===null?(se=Be=yt,K=z):Be=Be.next=yt,An.lanes|=Bt,_c|=Bt;lt=lt.next}while(lt!==null&&lt!==h);if(Be===null?K=z:Be.next=se,!Fa(z,o.memoizedState)&&(ta=!0,zt&&(m=ha,m!==null)))throw m;o.memoizedState=z,o.baseState=K,o.baseQueue=Be,x.lastRenderedState=z}return A===null&&(x.lanes=0),[o.memoizedState,x.dispatch]}function T(o){var h=Jr(),m=h.queue;if(m===null)throw Error(a(311));m.lastRenderedReducer=o;var x=m.dispatch,A=m.pending,z=h.memoizedState;if(A!==null){m.pending=null;var K=A=A.next;do z=o(z,K.action),K=K.next;while(K!==A);Fa(z,h.memoizedState)||(ta=!0),h.memoizedState=z,h.baseQueue===null&&(h.baseState=z),m.lastRenderedState=z}return[z,x]}function R(o,h,m){var x=An,A=Jr(),z=hr;if(z){if(m===void 0)throw Error(a(407));m=m()}else m=h();var K=!Fa((Sr||A).memoizedState,m);K&&(A.memoizedState=m,ta=!0),A=A.queue;var se=F.bind(null,x,A,o);if(Dt(2048,8,se,[o]),A.getSnapshot!==h||K||nn!==null&&nn.memoizedState.tag&1){if(x.flags|=2048,dt(9,vt(),L.bind(null,x,A,m,h),null),kr===null)throw Error(a(349));z||(gl&124)!==0||k(x,h,m)}return m}function k(o,h,m){o.flags|=16384,o={getSnapshot:h,value:m},h=An.updateQueue,h===null?(h=fh(),An.updateQueue=h,h.stores=[o]):(m=h.stores,m===null?h.stores=[o]:m.push(o))}function L(o,h,m,x){h.value=m,h.getSnapshot=x,q(h)&&H(o)}function F(o,h,m){return m(function(){q(h)&&H(o)})}function q(o){var h=o.getSnapshot;o=o.value;try{var m=h();return!Fa(o,m)}catch{return!0}}function H(o){var h=nc(o,2);h!==null&&Vo(h,o,2)}function ee(o){var h=fa();if(typeof o=="function"){var m=o;if(o=m(),ks){sr(!0);try{m()}finally{sr(!1)}}}return h.memoizedState=h.baseState=o,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:o},h}function ne(o,h,m,x){return o.baseState=m,w(o,Sr,typeof x=="function"?x:p)}function ye(o,h,m,x,A){if(fi(o))throw Error(a(485));if(o=h.action,o!==null){var z={payload:A,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(K){z.listeners.push(K)}};xe.T!==null?m(!0):z.isTransition=!1,x(z),m=h.pending,m===null?(z.next=h.pending=z,ge(h,z)):(z.next=m.next,h.pending=m.next=z)}}function ge(o,h){var m=h.action,x=h.payload,A=o.state;if(h.isTransition){var z=xe.T,K={};xe.T=K;try{var se=m(A,x),Be=xe.S;Be!==null&&Be(K,se),_e(o,h,se)}catch(lt){De(o,h,lt)}finally{xe.T=z}}else try{z=m(A,x),_e(o,h,z)}catch(lt){De(o,h,lt)}}function _e(o,h,m){m!==null&&typeof m=="object"&&typeof m.then=="function"?m.then(function(x){Ee(o,h,x)},function(x){return De(o,h,x)}):Ee(o,h,m)}function Ee(o,h,m){h.status="fulfilled",h.value=m,ze(h),o.state=m,h=o.pending,h!==null&&(m=h.next,m===h?o.pending=null:(m=m.next,h.next=m,ge(o,m)))}function De(o,h,m){var x=o.pending;if(o.pending=null,x!==null){x=x.next;do h.status="rejected",h.reason=m,ze(h),h=h.next;while(h!==x)}o.action=null}function ze(o){o=o.listeners;for(var h=0;h<o.length;h++)(0,o[h])()}function je(o,h){return h}function Ue(o,h){if(hr){var m=kr.formState;if(m!==null){e:{var x=An;if(hr){if(hi){t:{for(var A=hi,z=Io;A.nodeType!==8;){if(!z){A=null;break t}if(A=Ha(A.nextSibling),A===null){A=null;break t}}z=A.data,A=z==="F!"||z==="F"?A:null}if(A){hi=Ha(A.nextSibling),x=A.data==="F!";break e}}Or(x)}x=!1}x&&(h=m[0])}}return m=fa(),m.memoizedState=m.baseState=h,x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:je,lastRenderedState:h},m.queue=x,m=js.bind(null,An,x),x.dispatch=m,x=ee(!1),z=hs.bind(null,An,!1,x.queue),x=fa(),A={state:h,dispatch:null,action:o,pending:null},x.queue=A,m=ye.bind(null,An,A,z,m),A.dispatch=m,x.memoizedState=o,[h,m,!1]}function Fe(o){var h=Jr();return it(h,Sr,o)}function it(o,h,m){if(h=w(o,h,je)[0],o=y(p)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var x=b(h)}catch(K){throw K===rn?cc:K}else x=h;h=Jr();var A=h.queue,z=A.dispatch;return m!==h.memoizedState&&(An.flags|=2048,dt(9,vt(),Tt.bind(null,A,m),null)),[x,z,o]}function Tt(o,h){o.action=h}function gt(o){var h=Jr(),m=Sr;if(m!==null)return it(h,m,o);Jr(),h=h.memoizedState,m=Jr();var x=m.queue.dispatch;return m.memoizedState=o,[h,x,!1]}function dt(o,h,m,x){return o={tag:o,create:m,deps:x,inst:h,next:null},h=An.updateQueue,h===null&&(h=fh(),An.updateQueue=h),m=h.lastEffect,m===null?h.lastEffect=o.next=o:(x=m.next,m.next=o,o.next=x,h.lastEffect=o),o}function vt(){return{destroy:void 0,resource:void 0}}function Jt(){return Jr().memoizedState}function Yt(o,h,m,x){var A=fa();x=x===void 0?null:x,An.flags|=o,A.memoizedState=dt(1|h,vt(),m,x)}function Dt(o,h,m,x){var A=Jr();x=x===void 0?null:x;var z=A.memoizedState.inst;Sr!==null&&x!==null&&zs(x,Sr.memoizedState.deps)?A.memoizedState=dt(h,z,m,x):(An.flags|=o,A.memoizedState=dt(1|h,z,m,x))}function un(o,h){Yt(8390656,8,o,h)}function $n(o,h){Dt(2048,8,o,h)}function Qn(o,h){return Dt(4,2,o,h)}function ei(o,h){return Dt(4,4,o,h)}function Mr(o,h){if(typeof h=="function"){o=o();var m=h(o);return function(){typeof m=="function"?m():h(null)}}if(h!=null)return o=o(),h.current=o,function(){h.current=null}}function ti(o,h,m){m=m!=null?m.concat([o]):null,Dt(4,4,Mr.bind(null,h,o),m)}function qr(){}function Ir(o,h){var m=Jr();h=h===void 0?null:h;var x=m.memoizedState;return h!==null&&zs(h,x[1])?x[0]:(m.memoizedState=[o,h],o)}function fr(o,h){var m=Jr();h=h===void 0?null:h;var x=m.memoizedState;if(h!==null&&zs(h,x[1]))return x[0];if(x=o(),ks){sr(!0);try{o()}finally{sr(!1)}}return m.memoizedState=[x,h],x}function Ai(o,h,m){return m===void 0||(gl&1073741824)!==0?o.memoizedState=h:(o.memoizedState=m,o=Up(),An.lanes|=o,_c|=o,m)}function $i(o,h,m,x){return Fa(m,h)?m:ls.current!==null?(o=Ai(o,m,x),Fa(o,h)||(ta=!0),o):(gl&42)===0?(ta=!0,o.memoizedState=m):(o=Up(),An.lanes|=o,_c|=o,h)}function Wi(o,h,m,x,A){var z=et.p;et.p=z!==0&&8>z?z:8;var K=xe.T,se={};xe.T=se,hs(o,!1,h,m);try{var Be=A(),lt=xe.S;if(lt!==null&&lt(se,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var zt=cg(Be,x);to(o,h,zt,so(o))}else to(o,h,x,so(o))}catch(Bt){to(o,h,{then:function(){},status:"rejected",reason:Bt},so())}finally{et.p=z,xe.T=K}}function mr(){}function us(o,h,m,x){if(o.tag!==5)throw Error(a(476));var A=No(o).queue;Wi(o,A,h,Qe,m===null?mr:function(){return Ls(o),m(x)})}function No(o){var h=o.memoizedState;if(h!==null)return h;h={memoizedState:Qe,baseState:Qe,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:Qe},next:null};var m={};return h.next={memoizedState:m,baseState:m,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:p,lastRenderedState:m},next:null},o.memoizedState=h,o=o.alternate,o!==null&&(o.memoizedState=h),h}function Ls(o){var h=No(o).next.queue;to(o,h,{},so())}function Bs(){return Xi(Te)}function hu(){return Jr().memoizedState}function Ns(){return Jr().memoizedState}function dc(o){for(var h=o.return;h!==null;){switch(h.tag){case 24:case 3:var m=so();o=os(m);var x=Bo(h,o,m);x!==null&&(Vo(x,h,m),Is(x,h,m)),h={cache:pl()},o.payload=h;return}h=h.return}}function eo(o,h,m){var x=so();m={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null},fi(o)?Pi(h,m):(m=hl(o,h,m,x),m!==null&&(Vo(m,o,x),da(m,h,x)))}function js(o,h,m){var x=so();to(o,h,m,x)}function to(o,h,m,x){var A={lane:x,revertLane:0,action:m,hasEagerState:!1,eagerState:null,next:null};if(fi(o))Pi(h,A);else{var z=o.alternate;if(o.lanes===0&&(z===null||z.lanes===0)&&(z=h.lastRenderedReducer,z!==null))try{var K=h.lastRenderedState,se=z(K,m);if(A.hasEagerState=!0,A.eagerState=se,Fa(se,K))return Cs(o,h,A,0),kr===null&&tc(),!1}catch{}finally{}if(m=hl(o,h,A,x),m!==null)return Vo(m,o,x),da(m,h,x),!0}return!1}function hs(o,h,m,x){if(x={lane:2,revertLane:Kp(),action:x,hasEagerState:!1,eagerState:null,next:null},fi(o)){if(h)throw Error(a(479))}else h=hl(o,m,x,2),h!==null&&Vo(h,o,2)}function fi(o){var h=o.alternate;return o===An||h!==null&&h===An}function Pi(o,h){cs=xn=!0;var m=o.pending;m===null?h.next=h:(h.next=m.next,m.next=h),o.pending=h}function da(o,h,m){if((m&4194048)!==0){var x=h.lanes;x&=o.pendingLanes,m|=x,h.lanes=m,Pe(o,m)}}var Ar={readContext:Xi,use:n,useCallback:bi,useContext:bi,useEffect:bi,useImperativeHandle:bi,useLayoutEffect:bi,useInsertionEffect:bi,useMemo:bi,useReducer:bi,useRef:bi,useState:bi,useDebugValue:bi,useDeferredValue:bi,useTransition:bi,useSyncExternalStore:bi,useId:bi,useHostTransitionStatus:bi,useFormState:bi,useActionState:bi,useOptimistic:bi,useMemoCache:bi,useCacheRefresh:bi},dh={readContext:Xi,use:n,useCallback:function(o,h){return fa().memoizedState=[o,h===void 0?null:h],o},useContext:Xi,useEffect:un,useImperativeHandle:function(o,h,m){m=m!=null?m.concat([o]):null,Yt(4194308,4,Mr.bind(null,h,o),m)},useLayoutEffect:function(o,h){return Yt(4194308,4,o,h)},useInsertionEffect:function(o,h){Yt(4,2,o,h)},useMemo:function(o,h){var m=fa();h=h===void 0?null:h;var x=o();if(ks){sr(!0);try{o()}finally{sr(!1)}}return m.memoizedState=[x,h],x},useReducer:function(o,h,m){var x=fa();if(m!==void 0){var A=m(h);if(ks){sr(!0);try{m(h)}finally{sr(!1)}}}else A=h;return x.memoizedState=x.baseState=A,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:A},x.queue=o,o=o.dispatch=eo.bind(null,An,o),[x.memoizedState,o]},useRef:function(o){var h=fa();return o={current:o},h.memoizedState=o},useState:function(o){o=ee(o);var h=o.queue,m=js.bind(null,An,h);return h.dispatch=m,[o.memoizedState,m]},useDebugValue:qr,useDeferredValue:function(o,h){var m=fa();return Ai(m,o,h)},useTransition:function(){var o=ee(!1);return o=Wi.bind(null,An,o.queue,!0,!1),fa().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,h,m){var x=An,A=fa();if(hr){if(m===void 0)throw Error(a(407));m=m()}else{if(m=h(),kr===null)throw Error(a(349));(yr&124)!==0||k(x,h,m)}A.memoizedState=m;var z={value:m,getSnapshot:h};return A.queue=z,un(F.bind(null,x,z,o),[o]),x.flags|=2048,dt(9,vt(),L.bind(null,x,z,m,h),null),m},useId:function(){var o=fa(),h=kr.identifierPrefix;if(hr){var m=Qa,x=Oo;m=(x&~(1<<32-Gn(x)-1)).toString(32)+m,h=""+h+"R"+m,m=uu++,0<m&&(h+="H"+m.toString(32)),h+=""}else m=xo++,h=""+h+"r"+m.toString(32)+"";return o.memoizedState=h},useHostTransitionStatus:Bs,useFormState:Ue,useActionState:Ue,useOptimistic:function(o){var h=fa();h.memoizedState=h.baseState=o;var m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=m,h=hs.bind(null,An,!0,m),m.dispatch=h,[o,h]},useMemoCache:s,useCacheRefresh:function(){return fa().memoizedState=dc.bind(null,An)}},ud={readContext:Xi,use:n,useCallback:Ir,useContext:Xi,useEffect:$n,useImperativeHandle:ti,useInsertionEffect:Qn,useLayoutEffect:ei,useMemo:fr,useReducer:y,useRef:Jt,useState:function(){return y(p)},useDebugValue:qr,useDeferredValue:function(o,h){var m=Jr();return $i(m,Sr.memoizedState,o,h)},useTransition:function(){var o=y(p)[0],h=Jr().memoizedState;return[typeof o=="boolean"?o:b(o),h]},useSyncExternalStore:R,useId:hu,useHostTransitionStatus:Bs,useFormState:Fe,useActionState:Fe,useOptimistic:function(o,h){var m=Jr();return ne(m,Sr,o,h)},useMemoCache:s,useCacheRefresh:Ns},bp={readContext:Xi,use:n,useCallback:Ir,useContext:Xi,useEffect:$n,useImperativeHandle:ti,useInsertionEffect:Qn,useLayoutEffect:ei,useMemo:fr,useReducer:T,useRef:Jt,useState:function(){return T(p)},useDebugValue:qr,useDeferredValue:function(o,h){var m=Jr();return Sr===null?Ai(m,o,h):$i(m,Sr.memoizedState,o,h)},useTransition:function(){var o=T(p)[0],h=Jr().memoizedState;return[typeof o=="boolean"?o:b(o),h]},useSyncExternalStore:R,useId:hu,useHostTransitionStatus:Bs,useFormState:gt,useActionState:gt,useOptimistic:function(o,h){var m=Jr();return Sr!==null?ne(m,Sr,o,h):(m.baseState=o,[o,m.queue.dispatch])},useMemoCache:s,useCacheRefresh:Ns},fu=null,pc=0;function _l(o){var h=pc;return pc+=1,fu===null&&(fu=[]),of(fu,o,h)}function pa(o,h){h=h.props.ref,o.ref=h!==void 0?h:null}function no(o,h){throw h.$$typeof===B?Error(a(525)):(o=Object.prototype.toString.call(h),Error(a(31,o==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":o)))}function ro(o){var h=o._init;return h(o._payload)}function fs(o){function h(nt,Ze){if(o){var st=nt.deletions;st===null?(nt.deletions=[Ze],nt.flags|=16):st.push(Ze)}}function m(nt,Ze){if(!o)return null;for(;Ze!==null;)h(nt,Ze),Ze=Ze.sibling;return null}function x(nt){for(var Ze=new Map;nt!==null;)nt.key!==null?Ze.set(nt.key,nt):Ze.set(nt.index,nt),nt=nt.sibling;return Ze}function A(nt,Ze){return nt=Es(nt,Ze),nt.index=0,nt.sibling=null,nt}function z(nt,Ze,st){return nt.index=st,o?(st=nt.alternate,st!==null?(st=st.index,st<Ze?(nt.flags|=67108866,Ze):st):(nt.flags|=67108866,Ze)):(nt.flags|=1048576,Ze)}function K(nt){return o&&nt.alternate===null&&(nt.flags|=67108866),nt}function se(nt,Ze,st,Ft){return Ze===null||Ze.tag!==6?(Ze=nu(st,nt.mode,Ft),Ze.return=nt,Ze):(Ze=A(Ze,st),Ze.return=nt,Ze)}function Be(nt,Ze,st,Ft){var vn=st.type;return vn===X?zt(nt,Ze,st.props.children,Ft,st.key):Ze!==null&&(Ze.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&ro(vn)===Ze.type)?(Ze=A(Ze,st.props),pa(Ze,st),Ze.return=nt,Ze):(Ze=eh(st.type,st.key,st.props,null,nt.mode,Ft),pa(Ze,st),Ze.return=nt,Ze)}function lt(nt,Ze,st,Ft){return Ze===null||Ze.tag!==4||Ze.stateNode.containerInfo!==st.containerInfo||Ze.stateNode.implementation!==st.implementation?(Ze=ac(st,nt.mode,Ft),Ze.return=nt,Ze):(Ze=A(Ze,st.children||[]),Ze.return=nt,Ze)}function zt(nt,Ze,st,Ft,vn){return Ze===null||Ze.tag!==7?(Ze=ic(st,nt.mode,Ft,vn),Ze.return=nt,Ze):(Ze=A(Ze,st),Ze.return=nt,Ze)}function Bt(nt,Ze,st){if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ze=nu(""+Ze,nt.mode,st),Ze.return=nt,Ze;if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case j:return st=eh(Ze.type,Ze.key,Ze.props,null,nt.mode,st),pa(st,Ze),st.return=nt,st;case $:return Ze=ac(Ze,nt.mode,st),Ze.return=nt,Ze;case ke:var Ft=Ze._init;return Ze=Ft(Ze._payload),Bt(nt,Ze,st)}if(pt(Ze)||Ae(Ze))return Ze=ic(Ze,nt.mode,st,null),Ze.return=nt,Ze;if(typeof Ze.then=="function")return Bt(nt,_l(Ze),st);if(Ze.$$typeof===pe)return Bt(nt,rh(nt,Ze),st);no(nt,Ze)}return null}function yt(nt,Ze,st,Ft){var vn=Ze!==null?Ze.key:null;if(typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint")return vn!==null?null:se(nt,Ze,""+st,Ft);if(typeof st=="object"&&st!==null){switch(st.$$typeof){case j:return st.key===vn?Be(nt,Ze,st,Ft):null;case $:return st.key===vn?lt(nt,Ze,st,Ft):null;case ke:return vn=st._init,st=vn(st._payload),yt(nt,Ze,st,Ft)}if(pt(st)||Ae(st))return vn!==null?null:zt(nt,Ze,st,Ft,null);if(typeof st.then=="function")return yt(nt,Ze,_l(st),Ft);if(st.$$typeof===pe)return yt(nt,Ze,rh(nt,st),Ft);no(nt,st)}return null}function bt(nt,Ze,st,Ft,vn){if(typeof Ft=="string"&&Ft!==""||typeof Ft=="number"||typeof Ft=="bigint")return nt=nt.get(st)||null,se(Ze,nt,""+Ft,vn);if(typeof Ft=="object"&&Ft!==null){switch(Ft.$$typeof){case j:return nt=nt.get(Ft.key===null?st:Ft.key)||null,Be(Ze,nt,Ft,vn);case $:return nt=nt.get(Ft.key===null?st:Ft.key)||null,lt(Ze,nt,Ft,vn);case ke:var jn=Ft._init;return Ft=jn(Ft._payload),bt(nt,Ze,st,Ft,vn)}if(pt(Ft)||Ae(Ft))return nt=nt.get(st)||null,zt(Ze,nt,Ft,vn,null);if(typeof Ft.then=="function")return bt(nt,Ze,st,_l(Ft),vn);if(Ft.$$typeof===pe)return bt(nt,Ze,st,rh(Ze,Ft),vn);no(Ze,Ft)}return null}function Nn(nt,Ze,st,Ft){for(var vn=null,jn=null,Tn=Ze,kn=Ze=0,va=null;Tn!==null&&kn<st.length;kn++){Tn.index>kn?(va=Tn,Tn=null):va=Tn.sibling;var Er=yt(nt,Tn,st[kn],Ft);if(Er===null){Tn===null&&(Tn=va);break}o&&Tn&&Er.alternate===null&&h(nt,Tn),Ze=z(Er,Ze,kn),jn===null?vn=Er:jn.sibling=Er,jn=Er,Tn=va}if(kn===st.length)return m(nt,Tn),hr&&es(nt,kn),vn;if(Tn===null){for(;kn<st.length;kn++)Tn=Bt(nt,st[kn],Ft),Tn!==null&&(Ze=z(Tn,Ze,kn),jn===null?vn=Tn:jn.sibling=Tn,jn=Tn);return hr&&es(nt,kn),vn}for(Tn=x(Tn);kn<st.length;kn++)va=bt(Tn,nt,kn,st[kn],Ft),va!==null&&(o&&va.alternate!==null&&Tn.delete(va.key===null?kn:va.key),Ze=z(va,Ze,kn),jn===null?vn=va:jn.sibling=va,jn=va);return o&&Tn.forEach(function(Eu){return h(nt,Eu)}),hr&&es(nt,kn),vn}function In(nt,Ze,st,Ft){if(st==null)throw Error(a(151));for(var vn=null,jn=null,Tn=Ze,kn=Ze=0,va=null,Er=st.next();Tn!==null&&!Er.done;kn++,Er=st.next()){Tn.index>kn?(va=Tn,Tn=null):va=Tn.sibling;var Eu=yt(nt,Tn,Er.value,Ft);if(Eu===null){Tn===null&&(Tn=va);break}o&&Tn&&Eu.alternate===null&&h(nt,Tn),Ze=z(Eu,Ze,kn),jn===null?vn=Eu:jn.sibling=Eu,jn=Eu,Tn=va}if(Er.done)return m(nt,Tn),hr&&es(nt,kn),vn;if(Tn===null){for(;!Er.done;kn++,Er=st.next())Er=Bt(nt,Er.value,Ft),Er!==null&&(Ze=z(Er,Ze,kn),jn===null?vn=Er:jn.sibling=Er,jn=Er);return hr&&es(nt,kn),vn}for(Tn=x(Tn);!Er.done;kn++,Er=st.next())Er=bt(Tn,nt,kn,Er.value,Ft),Er!==null&&(o&&Er.alternate!==null&&Tn.delete(Er.key===null?kn:Er.key),Ze=z(Er,Ze,kn),jn===null?vn=Er:jn.sibling=Er,jn=Er);return o&&Tn.forEach(function(La){return h(nt,La)}),hr&&es(nt,kn),vn}function Zr(nt,Ze,st,Ft){if(typeof st=="object"&&st!==null&&st.type===X&&st.key===null&&(st=st.props.children),typeof st=="object"&&st!==null){switch(st.$$typeof){case j:e:{for(var vn=st.key;Ze!==null;){if(Ze.key===vn){if(vn=st.type,vn===X){if(Ze.tag===7){m(nt,Ze.sibling),Ft=A(Ze,st.props.children),Ft.return=nt,nt=Ft;break e}}else if(Ze.elementType===vn||typeof vn=="object"&&vn!==null&&vn.$$typeof===ke&&ro(vn)===Ze.type){m(nt,Ze.sibling),Ft=A(Ze,st.props),pa(Ft,st),Ft.return=nt,nt=Ft;break e}m(nt,Ze);break}else h(nt,Ze);Ze=Ze.sibling}st.type===X?(Ft=ic(st.props.children,nt.mode,Ft,st.key),Ft.return=nt,nt=Ft):(Ft=eh(st.type,st.key,st.props,null,nt.mode,Ft),pa(Ft,st),Ft.return=nt,nt=Ft)}return K(nt);case $:e:{for(vn=st.key;Ze!==null;){if(Ze.key===vn)if(Ze.tag===4&&Ze.stateNode.containerInfo===st.containerInfo&&Ze.stateNode.implementation===st.implementation){m(nt,Ze.sibling),Ft=A(Ze,st.children||[]),Ft.return=nt,nt=Ft;break e}else{m(nt,Ze);break}else h(nt,Ze);Ze=Ze.sibling}Ft=ac(st,nt.mode,Ft),Ft.return=nt,nt=Ft}return K(nt);case ke:return vn=st._init,st=vn(st._payload),Zr(nt,Ze,st,Ft)}if(pt(st))return Nn(nt,Ze,st,Ft);if(Ae(st)){if(vn=Ae(st),typeof vn!="function")throw Error(a(150));return st=vn.call(st),In(nt,Ze,st,Ft)}if(typeof st.then=="function")return Zr(nt,Ze,_l(st),Ft);if(st.$$typeof===pe)return Zr(nt,Ze,rh(nt,st),Ft);no(nt,st)}return typeof st=="string"&&st!==""||typeof st=="number"||typeof st=="bigint"?(st=""+st,Ze!==null&&Ze.tag===6?(m(nt,Ze.sibling),Ft=A(Ze,st),Ft.return=nt,nt=Ft):(m(nt,Ze),Ft=nu(st,nt.mode,Ft),Ft.return=nt,nt=Ft),K(nt)):m(nt,Ze)}return function(nt,Ze,st,Ft){try{pc=0;var vn=Zr(nt,Ze,st,Ft);return fu=null,vn}catch(Tn){if(Tn===rn||Tn===cc)throw Tn;var jn=Oa(29,Tn,null,nt.mode);return jn.lanes=Ft,jn.return=nt,jn}finally{}}}var Fs=fs(!0),$s=fs(!1),Ua=tt(null),Vs=null;function vl(o){var h=o.alternate;Pt(Yi,Yi.current&1),Pt(Ua,o),Vs===null&&(h===null||ls.current!==null||h.memoizedState!==null)&&(Vs=o)}function ug(o){if(o.tag===22){if(Pt(Yi,Yi.current),Pt(Ua,o),Vs===null){var h=o.alternate;h!==null&&h.memoizedState!==null&&(Vs=o)}}else wo()}function wo(){Pt(Yi,Yi.current),Pt(Ua,Ua.current)}function io(o){_t(Ua),Vs===o&&(Vs=null),_t(Yi)}var Yi=tt(0);function xp(o){for(var h=o;h!==null;){if(h.tag===13){var m=h.memoizedState;if(m!==null&&(m=m.dehydrated,m===null||m.data==="$?"||Xg(m)))return h}else if(h.tag===19&&h.memoizedProps.revealOrder!==void 0){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}function hd(o,h,m,x){h=o.memoizedState,m=m(x,h),m=m==null?h:I({},h,m),o.memoizedState=m,o.lanes===0&&(o.updateQueue.baseState=m)}var wp={enqueueSetState:function(o,h,m){o=o._reactInternals;var x=so(),A=os(x);A.payload=h,m!=null&&(A.callback=m),h=Bo(o,A,x),h!==null&&(Vo(h,o,x),Is(h,o,x))},enqueueReplaceState:function(o,h,m){o=o._reactInternals;var x=so(),A=os(x);A.tag=1,A.payload=h,m!=null&&(A.callback=m),h=Bo(o,A,x),h!==null&&(Vo(h,o,x),Is(h,o,x))},enqueueForceUpdate:function(o,h){o=o._reactInternals;var m=so(),x=os(m);x.tag=2,h!=null&&(x.callback=h),h=Bo(o,x,m),h!==null&&(Vo(h,o,m),Is(h,o,m))}};function a_(o,h,m,x,A,z,K){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(x,z,K):h.prototype&&h.prototype.isPureReactComponent?!Kn(m,x)||!Kn(A,z):!0}function hg(o,h,m,x){o=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(m,x),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(m,x),h.state!==o&&wp.enqueueReplaceState(h,h.state,null)}function ph(o,h){var m=h;if("ref"in h){m={};for(var x in h)x!=="ref"&&(m[x]=h[x])}if(o=o.defaultProps){m===h&&(m=I({},m));for(var A in o)m[A]===void 0&&(m[A]=o[A])}return m}var hf=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)};function o_(o){hf(o)}function Sp(o){console.error(o)}function fg(o){hf(o)}function fd(o,h){try{var m=o.onUncaughtError;m(h.value,{componentStack:h.stack})}catch(x){setTimeout(function(){throw x})}}function du(o,h,m){try{var x=o.onCaughtError;x(m.value,{componentStack:m.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(A){setTimeout(function(){throw A})}}function dg(o,h,m){return m=os(m),m.tag=3,m.payload={element:null},m.callback=function(){fd(o,h)},m}function ff(o){return o=os(o),o.tag=3,o}function dd(o,h,m,x){var A=m.type.getDerivedStateFromError;if(typeof A=="function"){var z=x.value;o.payload=function(){return A(z)},o.callback=function(){du(h,m,x)}}var K=m.stateNode;K!==null&&typeof K.componentDidCatch=="function"&&(o.callback=function(){du(h,m,x),typeof A!="function"&&(bu===null?bu=new Set([this]):bu.add(this));var se=x.stack;this.componentDidCatch(x.value,{componentStack:se!==null?se:""})})}function Cp(o,h,m,x,A){if(m.flags|=32768,x!==null&&typeof x=="object"&&typeof x.then=="function"){if(h=m.alternate,h!==null&&rs(h,m,A,!0),m=Ua.current,m!==null){switch(m.tag){case 13:return Vs===null?wu():m.alternate===null&&Si===0&&(Si=3),m.flags&=-257,m.flags|=65536,m.lanes=A,x===af?m.flags|=16384:(h=m.updateQueue,h===null?m.updateQueue=new Set([x]):h.add(x),Xp(o,x,A)),!1;case 22:return m.flags|=65536,x===af?m.flags|=16384:(h=m.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([x])},m.updateQueue=h):(m=h.retryQueue,m===null?h.retryQueue=new Set([x]):m.add(x)),Xp(o,x,A)),!1}throw Error(a(435,m.tag))}return Xp(o,x,A),wu(),!1}if(hr)return h=Ua.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=A,x!==sc&&(o=Error(a(422),{cause:x}),Va(Pa(o,m)))):(x!==sc&&(h=Error(a(423),{cause:x}),Va(Pa(h,m))),o=o.current.alternate,o.flags|=65536,A&=-A,o.lanes|=A,x=Pa(x,m),A=dg(o.stateNode,x,A),ld(o,A),Si!==4&&(Si=2)),!1;var z=Error(a(520),{cause:x});if(z=Pa(z,m),vd===null?vd=[z]:vd.push(z),Si!==4&&(Si=2),h===null)return!0;x=Pa(x,m),m=h;do{switch(m.tag){case 3:return m.flags|=65536,o=A&-A,m.lanes|=o,o=dg(m.stateNode,x,o),ld(m,o),!1;case 1:if(h=m.type,z=m.stateNode,(m.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(bu===null||!bu.has(z))))return m.flags|=65536,A&=-A,m.lanes|=A,A=ff(A),dd(A,o,m,x),ld(m,A),!1}m=m.return}while(m!==null);return!1}var pg=Error(a(461)),ta=!1;function Ia(o,h,m,x){h.child=o===null?$s(h,null,m,x):Fs(h,o.child,m,x)}function s_(o,h,m,x,A){m=m.render;var z=h.ref;if("ref"in x){var K={};for(var se in x)se!=="ref"&&(K[se]=x[se])}else K=x;return bo(h),x=Kr(o,h,m,K,z,A),se=fc(),o!==null&&!ta?(Ds(o,h,A),bl(o,h,A)):(hr&&se&&iu(h),h.flags|=1,Ia(o,h,x,A),h.child)}function mg(o,h,m,x,A){if(o===null){var z=m.type;return typeof z=="function"&&!rc(z)&&z.defaultProps===void 0&&m.compare===null?(h.tag=15,h.type=z,gg(o,h,z,x,A)):(o=eh(m.type,null,x,h,h.mode,A),o.ref=h.ref,o.return=h,h.child=o)}if(z=o.child,!mc(o,A)){var K=z.memoizedProps;if(m=m.compare,m=m!==null?m:Kn,m(K,x)&&o.ref===h.ref)return bl(o,h,A)}return h.flags|=1,o=Es(z,x),o.ref=h.ref,o.return=h,h.child=o}function gg(o,h,m,x,A){if(o!==null){var z=o.memoizedProps;if(Kn(z,x)&&o.ref===h.ref)if(ta=!1,h.pendingProps=x=z,mc(o,A))(o.flags&131072)!==0&&(ta=!0);else return h.lanes=o.lanes,bl(o,h,A)}return Tp(o,h,m,x,A)}function yg(o,h,m){var x=h.pendingProps,A=x.children,z=o!==null?o.memoizedState:null;if(x.mode==="hidden"){if((h.flags&128)!==0){if(x=z!==null?z.baseLanes|m:m,o!==null){for(A=h.child=o.child,z=0;A!==null;)z=z|A.lanes|A.childLanes,A=A.sibling;h.childLanes=z&~x}else h.childLanes=0,h.child=null;return l_(o,h,x,m)}if((m&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},o!==null&&Os(h,z!==null?z.cachePool:null),z!==null?cd(h,z):cf(),ug(h);else return h.lanes=h.childLanes=536870912,l_(o,h,z!==null?z.baseLanes|m:m,m)}else z!==null?(Os(h,z.cachePool),cd(h,z),wo(),h.memoizedState=null):(o!==null&&Os(h,null),cf(),wo());return Ia(o,h,A,m),h.child}function l_(o,h,m,x){var A=ah();return A=A===null?null:{parent:Li._currentValue,pool:A},h.memoizedState={baseLanes:m,cachePool:A},o!==null&&Os(h,null),cf(),ug(h),o!==null&&rs(o,h,x,!0),null}function df(o,h){var m=h.ref;if(m===null)o!==null&&o.ref!==null&&(h.flags|=4194816);else{if(typeof m!="function"&&typeof m!="object")throw Error(a(284));(o===null||o.ref!==m)&&(h.flags|=4194816)}}function Tp(o,h,m,x,A){return bo(h),m=Kr(o,h,m,x,void 0,A),x=fc(),o!==null&&!ta?(Ds(o,h,A),bl(o,h,A)):(hr&&x&&iu(h),h.flags|=1,Ia(o,h,m,A),h.child)}function Ep(o,h,m,x,A,z){return bo(h),h.updateQueue=null,m=hc(h,x,m,A),Qr(o),x=fc(),o!==null&&!ta?(Ds(o,h,z),bl(o,h,z)):(hr&&x&&iu(h),h.flags|=1,Ia(o,h,m,z),h.child)}function pf(o,h,m,x,A){if(bo(h),h.stateNode===null){var z=Ts,K=m.contextType;typeof K=="object"&&K!==null&&(z=Xi(K)),z=new m(x,z),h.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=wp,h.stateNode=z,z._reactInternals=h,z=h.stateNode,z.props=x,z.state=h.memoizedState,z.refs={},sf(h),K=m.contextType,z.context=typeof K=="object"&&K!==null?Xi(K):Ts,z.state=h.memoizedState,K=m.getDerivedStateFromProps,typeof K=="function"&&(hd(h,m,K,x),z.state=h.memoizedState),typeof m.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(K=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),K!==z.state&&wp.enqueueReplaceState(z,z.state,null),ch(h,x,z,A),lh(),z.state=h.memoizedState),typeof z.componentDidMount=="function"&&(h.flags|=4194308),x=!0}else if(o===null){z=h.stateNode;var se=h.memoizedProps,Be=ph(m,se);z.props=Be;var lt=z.context,zt=m.contextType;K=Ts,typeof zt=="object"&&zt!==null&&(K=Xi(zt));var Bt=m.getDerivedStateFromProps;zt=typeof Bt=="function"||typeof z.getSnapshotBeforeUpdate=="function",se=h.pendingProps!==se,zt||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(se||lt!==K)&&hg(h,z,x,K),as=!1;var yt=h.memoizedState;z.state=yt,ch(h,x,z,A),lh(),lt=h.memoizedState,se||yt!==lt||as?(typeof Bt=="function"&&(hd(h,m,Bt,x),lt=h.memoizedState),(Be=as||a_(h,m,Be,x,yt,lt,K))?(zt||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(h.flags|=4194308)):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=x,h.memoizedState=lt),z.props=x,z.state=lt,z.context=K,x=Be):(typeof z.componentDidMount=="function"&&(h.flags|=4194308),x=!1)}else{z=h.stateNode,lf(o,h),K=h.memoizedProps,zt=ph(m,K),z.props=zt,Bt=h.pendingProps,yt=z.context,lt=m.contextType,Be=Ts,typeof lt=="object"&&lt!==null&&(Be=Xi(lt)),se=m.getDerivedStateFromProps,(lt=typeof se=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(K!==Bt||yt!==Be)&&hg(h,z,x,Be),as=!1,yt=h.memoizedState,z.state=yt,ch(h,x,z,A),lh();var bt=h.memoizedState;K!==Bt||yt!==bt||as||o!==null&&o.dependencies!==null&&vi(o.dependencies)?(typeof se=="function"&&(hd(h,m,se,x),bt=h.memoizedState),(zt=as||a_(h,m,zt,x,yt,bt,Be)||o!==null&&o.dependencies!==null&&vi(o.dependencies))?(lt||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(x,bt,Be),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(x,bt,Be)),typeof z.componentDidUpdate=="function"&&(h.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof z.componentDidUpdate!="function"||K===o.memoizedProps&&yt===o.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&yt===o.memoizedState||(h.flags|=1024),h.memoizedProps=x,h.memoizedState=bt),z.props=x,z.state=bt,z.context=Be,x=zt):(typeof z.componentDidUpdate!="function"||K===o.memoizedProps&&yt===o.memoizedState||(h.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||K===o.memoizedProps&&yt===o.memoizedState||(h.flags|=1024),x=!1)}return z=x,df(o,h),x=(h.flags&128)!==0,z||x?(z=h.stateNode,m=x&&typeof m.getDerivedStateFromError!="function"?null:z.render(),h.flags|=1,o!==null&&x?(h.child=Fs(h,o.child,null,A),h.child=Fs(h,null,m,A)):Ia(o,h,m,A),h.memoizedState=z.state,o=h.child):o=bl(o,h,A),o}function So(o,h,m,x){return Ps(),h.flags|=256,Ia(o,h,m,x),h.child}var Mp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function pd(o){return{baseLanes:o,cachePool:Lo()}}function _g(o,h,m){return o=o!==null?o.childLanes&~m:0,h&&(o|=ps),o}function vg(o,h,m){var x=h.pendingProps,A=!1,z=(h.flags&128)!==0,K;if((K=z)||(K=o!==null&&o.memoizedState===null?!1:(Yi.current&2)!==0),K&&(A=!0,h.flags&=-129),K=(h.flags&32)!==0,h.flags&=-33,o===null){if(hr){if(A?vl(h):wo(),hr){var se=hi,Be;if(Be=se){e:{for(Be=se,se=Io;Be.nodeType!==8;){if(!se){se=null;break e}if(Be=Ha(Be.nextSibling),Be===null){se=null;break e}}se=Be}se!==null?(h.memoizedState={dehydrated:se,treeContext:Ro!==null?{id:Oo,overflow:Qa}:null,retryLane:536870912,hydrationErrors:null},Be=Oa(18,null,null,0),Be.stateNode=se,Be.return=h,h.child=Be,ua=h,hi=null,Be=!0):Be=!1}Be||Or(h)}if(se=h.memoizedState,se!==null&&(se=se.dehydrated,se!==null))return Xg(se)?h.lanes=32:h.lanes=536870912,null;io(h)}return se=x.children,x=x.fallback,A?(wo(),A=h.mode,se=Ap({mode:"hidden",children:se},A),x=ic(x,A,m,null),se.return=h,x.return=h,se.sibling=x,h.child=se,A=h.child,A.memoizedState=pd(m),A.childLanes=_g(o,K,m),h.memoizedState=Mp,x):(vl(h),bg(h,se))}if(Be=o.memoizedState,Be!==null&&(se=Be.dehydrated,se!==null)){if(z)h.flags&256?(vl(h),h.flags&=-257,h=xg(o,h,m)):h.memoizedState!==null?(wo(),h.child=o.child,h.flags|=128,h=null):(wo(),A=x.fallback,se=h.mode,x=Ap({mode:"visible",children:x.children},se),A=ic(A,se,m,null),A.flags|=2,x.return=h,A.return=h,x.sibling=A,h.child=x,Fs(h,o.child,null,m),x=h.child,x.memoizedState=pd(m),x.childLanes=_g(o,K,m),h.memoizedState=Mp,h=A);else if(vl(h),Xg(se)){if(K=se.nextSibling&&se.nextSibling.dataset,K)var lt=K.dgst;K=lt,x=Error(a(419)),x.stack="",x.digest=K,Va({value:x,source:null,stack:null}),h=xg(o,h,m)}else if(ta||rs(o,h,m,!1),K=(m&o.childLanes)!==0,ta||K){if(K=kr,K!==null&&(x=m&-m,x=(x&42)!==0?1:Me(x),x=(x&(K.suspendedLanes|m))!==0?0:x,x!==0&&x!==Be.retryLane))throw Be.retryLane=x,nc(o,x),Vo(K,o,x),pg;se.data==="$?"||wu(),h=xg(o,h,m)}else se.data==="$?"?(h.flags|=192,h.child=o.child,h=null):(o=Be.treeContext,hi=Ha(se.nextSibling),ua=h,hr=!0,ts=null,Io=!1,o!==null&&(la[ca++]=Oo,la[ca++]=Qa,la[ca++]=Ro,Oo=o.id,Qa=o.overflow,Ro=h),h=bg(h,x.children),h.flags|=4096);return h}return A?(wo(),A=x.fallback,se=h.mode,Be=o.child,lt=Be.sibling,x=Es(Be,{mode:"hidden",children:x.children}),x.subtreeFlags=Be.subtreeFlags&65011712,lt!==null?A=Es(lt,A):(A=ic(A,se,m,null),A.flags|=2),A.return=h,x.return=h,x.sibling=A,h.child=x,x=A,A=h.child,se=o.child.memoizedState,se===null?se=pd(m):(Be=se.cachePool,Be!==null?(lt=Li._currentValue,Be=Be.parent!==lt?{parent:lt,pool:lt}:Be):Be=Lo(),se={baseLanes:se.baseLanes|m,cachePool:Be}),A.memoizedState=se,A.childLanes=_g(o,K,m),h.memoizedState=Mp,x):(vl(h),m=o.child,o=m.sibling,m=Es(m,{mode:"visible",children:x.children}),m.return=h,m.sibling=null,o!==null&&(K=h.deletions,K===null?(h.deletions=[o],h.flags|=16):K.push(o)),h.child=m,h.memoizedState=null,m)}function bg(o,h){return h=Ap({mode:"visible",children:h},o.mode),h.return=o,o.child=h}function Ap(o,h){return o=Oa(22,o,null,h),o.lanes=0,o.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},o}function xg(o,h,m){return Fs(h,o.child,null,m),o=bg(h,h.pendingProps.children),o.flags|=2,h.memoizedState=null,o}function c_(o,h,m){o.lanes|=h;var x=o.alternate;x!==null&&(x.lanes|=h),tf(o.return,h,m)}function md(o,h,m,x,A){var z=o.memoizedState;z===null?o.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:x,tail:m,tailMode:A}:(z.isBackwards=h,z.rendering=null,z.renderingStartTime=0,z.last=x,z.tail=m,z.tailMode=A)}function Pp(o,h,m){var x=h.pendingProps,A=x.revealOrder,z=x.tail;if(Ia(o,h,x.children,m),x=Yi.current,(x&2)!==0)x=x&1|2,h.flags|=128;else{if(o!==null&&(o.flags&128)!==0)e:for(o=h.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&c_(o,m,h);else if(o.tag===19)c_(o,m,h);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===h)break e;for(;o.sibling===null;){if(o.return===null||o.return===h)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}x&=1}switch(Pt(Yi,x),A){case"forwards":for(m=h.child,A=null;m!==null;)o=m.alternate,o!==null&&xp(o)===null&&(A=m),m=m.sibling;m=A,m===null?(A=h.child,h.child=null):(A=m.sibling,m.sibling=null),md(h,!1,A,m,z);break;case"backwards":for(m=null,A=h.child,h.child=null;A!==null;){if(o=A.alternate,o!==null&&xp(o)===null){h.child=A;break}o=A.sibling,A.sibling=m,m=A,A=o}md(h,!0,m,null,z);break;case"together":md(h,!1,null,null,void 0);break;default:h.memoizedState=null}return h.child}function bl(o,h,m){if(o!==null&&(h.dependencies=o.dependencies),_c|=h.lanes,(m&h.childLanes)===0)if(o!==null){if(rs(o,h,m,!1),(m&h.childLanes)===0)return null}else return null;if(o!==null&&h.child!==o.child)throw Error(a(153));if(h.child!==null){for(o=h.child,m=Es(o,o.pendingProps),h.child=m,m.return=h;o.sibling!==null;)o=o.sibling,m=m.sibling=Es(o,o.pendingProps),m.return=h;m.sibling=null}return h.child}function mc(o,h){return(o.lanes&h)!==0?!0:(o=o.dependencies,!!(o!==null&&vi(o)))}function gd(o,h,m){switch(h.tag){case 3:mt(h,h.stateNode.containerInfo),Rs(h,Li,o.memoizedState.cache),Ps();break;case 27:case 5:Ke(h);break;case 4:mt(h,h.stateNode.containerInfo);break;case 10:Rs(h,h.type,h.memoizedProps.value);break;case 13:var x=h.memoizedState;if(x!==null)return x.dehydrated!==null?(vl(h),h.flags|=128,null):(m&h.child.childLanes)!==0?vg(o,h,m):(vl(h),o=bl(o,h,m),o!==null?o.sibling:null);vl(h);break;case 19:var A=(o.flags&128)!==0;if(x=(m&h.childLanes)!==0,x||(rs(o,h,m,!1),x=(m&h.childLanes)!==0),A){if(x)return Pp(o,h,m);h.flags|=128}if(A=h.memoizedState,A!==null&&(A.rendering=null,A.tail=null,A.lastEffect=null),Pt(Yi,Yi.current),x)break;return null;case 22:case 23:return h.lanes=0,yg(o,h,m);case 24:Rs(h,Li,o.memoizedState.cache)}return bl(o,h,m)}function u_(o,h,m){if(o!==null)if(o.memoizedProps!==h.pendingProps)ta=!0;else{if(!mc(o,m)&&(h.flags&128)===0)return ta=!1,gd(o,h,m);ta=(o.flags&131072)!==0}else ta=!1,hr&&(h.flags&1048576)!==0&&ad(h,ru,h.index);switch(h.lanes=0,h.tag){case 16:e:{o=h.pendingProps;var x=h.elementType,A=x._init;if(x=A(x._payload),h.type=x,typeof x=="function")rc(x)?(o=ph(x,o),h.tag=1,h=pf(null,h,x,o,m)):(h.tag=0,h=Tp(null,h,x,o,m));else{if(x!=null){if(A=x.$$typeof,A===he){h.tag=11,h=s_(null,h,x,o,m);break e}else if(A===Se){h.tag=14,h=mg(null,h,x,o,m);break e}}throw h=We(x)||x,Error(a(306,h,""))}}return h;case 0:return Tp(o,h,h.type,h.pendingProps,m);case 1:return x=h.type,A=ph(x,h.pendingProps),pf(o,h,x,A,m);case 3:e:{if(mt(h,h.stateNode.containerInfo),o===null)throw Error(a(387));x=h.pendingProps;var z=h.memoizedState;A=z.element,lf(o,h),ch(h,x,null,m);var K=h.memoizedState;if(x=K.cache,Rs(h,Li,x),x!==z.cache&&dl(h,[Li],m,!0),lh(),x=K.element,z.isDehydrated)if(z={element:x,isDehydrated:!1,cache:K.cache},h.updateQueue.baseState=z,h.memoizedState=z,h.flags&256){h=So(o,h,x,m);break e}else if(x!==A){A=Pa(Error(a(424)),h),Va(A),h=So(o,h,x,m);break e}else{switch(o=h.stateNode.containerInfo,o.nodeType){case 9:o=o.body;break;default:o=o.nodeName==="HTML"?o.ownerDocument.body:o}for(hi=Ha(o.firstChild),ua=h,hr=!0,ts=null,Io=!0,m=$s(h,null,x,m),h.child=m;m;)m.flags=m.flags&-3|4096,m=m.sibling}else{if(Ps(),x===A){h=bl(o,h,m);break e}Ia(o,h,x,m)}h=h.child}return h;case 26:return df(o,h),o===null?(m=zf(h.type,null,h.pendingProps,null))?h.memoizedState=m:hr||(m=h.type,o=h.pendingProps,x=Gs(qt.current).createElement(m),x[Xt]=h,x[It]=o,_a(x,m,o),tn(x),h.stateNode=x):h.memoizedState=zf(h.type,o.memoizedProps,h.pendingProps,o.memoizedState),null;case 27:return Ke(h),o===null&&hr&&(x=h.stateNode=sm(h.type,h.pendingProps,qt.current),ua=h,Io=!0,A=hi,Sc(h.type)?(Ki=A,hi=Ha(x.firstChild)):hi=A),Ia(o,h,h.pendingProps.children,m),df(o,h),o===null&&(h.flags|=4194304),h.child;case 5:return o===null&&hr&&((A=x=hi)&&(x=om(x,h.type,h.pendingProps,Io),x!==null?(h.stateNode=x,ua=h,hi=Ha(x.firstChild),Io=!1,A=!0):A=!1),A||Or(h)),Ke(h),A=h.type,z=h.pendingProps,K=o!==null?o.memoizedProps:null,x=z.children,rm(A,z)?x=null:K!==null&&rm(A,K)&&(h.flags|=32),h.memoizedState!==null&&(A=Kr(o,h,uh,null,null,m),Te._currentValue=A),df(o,h),Ia(o,h,x,m),h.child;case 6:return o===null&&hr&&((o=m=hi)&&(m=ub(m,h.pendingProps,Io),m!==null?(h.stateNode=m,ua=h,hi=null,o=!0):o=!1),o||Or(h)),null;case 13:return vg(o,h,m);case 4:return mt(h,h.stateNode.containerInfo),x=h.pendingProps,o===null?h.child=Fs(h,null,x,m):Ia(o,h,x,m),h.child;case 11:return s_(o,h,h.type,h.pendingProps,m);case 7:return Ia(o,h,h.pendingProps,m),h.child;case 8:return Ia(o,h,h.pendingProps.children,m),h.child;case 12:return Ia(o,h,h.pendingProps.children,m),h.child;case 10:return x=h.pendingProps,Rs(h,h.type,x.value),Ia(o,h,x.children,m),h.child;case 9:return A=h.type._context,x=h.pendingProps.children,bo(h),A=Xi(A),x=x(A),h.flags|=1,Ia(o,h,x,m),h.child;case 14:return mg(o,h,h.type,h.pendingProps,m);case 15:return gg(o,h,h.type,h.pendingProps,m);case 19:return Pp(o,h,m);case 31:return x=h.pendingProps,m=h.mode,x={mode:x.mode,children:x.children},o===null?(m=Ap(x,m),m.ref=h.ref,h.child=m,m.return=h,h=m):(m=Es(o.child,x),m.ref=h.ref,h.child=m,m.return=h,h=m),h;case 22:return yg(o,h,m);case 24:return bo(h),x=Xi(Li),o===null?(A=ah(),A===null&&(A=kr,z=pl(),A.pooledCache=z,z.refCount++,z!==null&&(A.pooledCacheLanes|=m),A=z),h.memoizedState={parent:x,cache:A},sf(h),Rs(h,Li,A)):((o.lanes&m)!==0&&(lf(o,h),ch(h,null,null,m),lh()),A=o.memoizedState,z=h.memoizedState,A.parent!==x?(A={parent:x,cache:x},h.memoizedState=A,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=A),Rs(h,Li,x)):(x=z.cache,Rs(h,Li,x),x!==A.cache&&dl(h,[Li],m,!0))),Ia(o,h,h.pendingProps.children,m),h.child;case 29:throw h.pendingProps}throw Error(a(156,h.tag))}function gc(o){o.flags|=4}function h_(o,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!N(h)){if(h=Ua.current,h!==null&&((yr&4194048)===yr?Vs!==null:(yr&62914560)!==yr&&(yr&536870912)===0||h!==Vs))throw Vn=af,oh;o.flags|=8192}}function Rp(o,h){h!==null&&(o.flags|=4),o.flags&16384&&(h=o.tag!==22?Ne():536870912,o.lanes|=h,vc|=h)}function yd(o,h){if(!hr)switch(o.tailMode){case"hidden":h=o.tail;for(var m=null;h!==null;)h.alternate!==null&&(m=h),h=h.sibling;m===null?o.tail=null:m.sibling=null;break;case"collapsed":m=o.tail;for(var x=null;m!==null;)m.alternate!==null&&(x=m),m=m.sibling;x===null?h||o.tail===null?o.tail=null:o.tail.sibling=null:x.sibling=null}}function Ri(o){var h=o.alternate!==null&&o.alternate.child===o.child,m=0,x=0;if(h)for(var A=o.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags&65011712,x|=A.flags&65011712,A.return=o,A=A.sibling;else for(A=o.child;A!==null;)m|=A.lanes|A.childLanes,x|=A.subtreeFlags,x|=A.flags,A.return=o,A=A.sibling;return o.subtreeFlags|=x,o.childLanes=m,h}function tb(o,h,m){var x=h.pendingProps;switch(th(h),h.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ri(h),null;case 1:return Ri(h),null;case 3:return m=h.stateNode,x=null,o!==null&&(x=o.memoizedState.cache),h.memoizedState.cache!==x&&(h.flags|=2048),ns(Li),ft(),m.pendingContext&&(m.context=m.pendingContext,m.pendingContext=null),(o===null||o.child===null)&&(lc(h)?gc(h):o===null||o.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,ef())),Ri(h),null;case 26:return m=h.memoizedState,o===null?(gc(h),m!==null?(Ri(h),h_(h,m)):(Ri(h),h.flags&=-16777217)):m?m!==o.memoizedState?(gc(h),Ri(h),h_(h,m)):(Ri(h),h.flags&=-16777217):(o.memoizedProps!==x&&gc(h),Ri(h),h.flags&=-16777217),null;case 27:Je(h),m=qt.current;var A=h.type;if(o!==null&&h.stateNode!=null)o.memoizedProps!==x&&gc(h);else{if(!x){if(h.stateNode===null)throw Error(a(166));return Ri(h),null}o=At.current,lc(h)?As(h):(o=sm(A,x,m),h.stateNode=o,gc(h))}return Ri(h),null;case 5:if(Je(h),m=h.type,o!==null&&h.stateNode!=null)o.memoizedProps!==x&&gc(h);else{if(!x){if(h.stateNode===null)throw Error(a(166));return Ri(h),null}if(o=At.current,lc(h))As(h);else{switch(A=Gs(qt.current),o){case 1:o=A.createElementNS("http://www.w3.org/2000/svg",m);break;case 2:o=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;default:switch(m){case"svg":o=A.createElementNS("http://www.w3.org/2000/svg",m);break;case"math":o=A.createElementNS("http://www.w3.org/1998/Math/MathML",m);break;case"script":o=A.createElement("div"),o.innerHTML="<script><\/script>",o=o.removeChild(o.firstChild);break;case"select":o=typeof x.is=="string"?A.createElement("select",{is:x.is}):A.createElement("select"),x.multiple?o.multiple=!0:x.size&&(o.size=x.size);break;default:o=typeof x.is=="string"?A.createElement(m,{is:x.is}):A.createElement(m)}}o[Xt]=h,o[It]=x;e:for(A=h.child;A!==null;){if(A.tag===5||A.tag===6)o.appendChild(A.stateNode);else if(A.tag!==4&&A.tag!==27&&A.child!==null){A.child.return=A,A=A.child;continue}if(A===h)break e;for(;A.sibling===null;){if(A.return===null||A.return===h)break e;A=A.return}A.sibling.return=A.return,A=A.sibling}h.stateNode=o;e:switch(_a(o,m,x),m){case"button":case"input":case"select":case"textarea":o=!!x.autoFocus;break e;case"img":o=!0;break e;default:o=!1}o&&gc(h)}}return Ri(h),h.flags&=-16777217,null;case 6:if(o&&h.stateNode!=null)o.memoizedProps!==x&&gc(h);else{if(typeof x!="string"&&h.stateNode===null)throw Error(a(166));if(o=qt.current,lc(h)){if(o=h.stateNode,m=h.memoizedProps,x=null,A=ua,A!==null)switch(A.tag){case 27:case 5:x=A.memoizedProps}o[Xt]=h,o=!!(o.nodeValue===m||x!==null&&x.suppressHydrationWarning===!0||Hg(o.nodeValue,m)),o||Or(h)}else o=Gs(o).createTextNode(x),o[Xt]=h,h.stateNode=o}return Ri(h),null;case 13:if(x=h.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(A=lc(h),x!==null&&x.dehydrated!==null){if(o===null){if(!A)throw Error(a(318));if(A=h.memoizedState,A=A!==null?A.dehydrated:null,!A)throw Error(a(317));A[Xt]=h}else Ps(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;Ri(h),A=!1}else A=ef(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=A),A=!0;if(!A)return h.flags&256?(io(h),h):(io(h),null)}if(io(h),(h.flags&128)!==0)return h.lanes=m,h;if(m=x!==null,o=o!==null&&o.memoizedState!==null,m){x=h.child,A=null,x.alternate!==null&&x.alternate.memoizedState!==null&&x.alternate.memoizedState.cachePool!==null&&(A=x.alternate.memoizedState.cachePool.pool);var z=null;x.memoizedState!==null&&x.memoizedState.cachePool!==null&&(z=x.memoizedState.cachePool.pool),z!==A&&(x.flags|=2048)}return m!==o&&m&&(h.child.flags|=8192),Rp(h,h.updateQueue),Ri(h),null;case 4:return ft(),o===null&&Jp(h.stateNode.containerInfo),Ri(h),null;case 10:return ns(h.type),Ri(h),null;case 19:if(_t(Yi),A=h.memoizedState,A===null)return Ri(h),null;if(x=(h.flags&128)!==0,z=A.rendering,z===null)if(x)yd(A,!1);else{if(Si!==0||o!==null&&(o.flags&128)!==0)for(o=h.child;o!==null;){if(z=xp(o),z!==null){for(h.flags|=128,yd(A,!1),o=z.updateQueue,h.updateQueue=o,Rp(h,o),h.subtreeFlags=0,o=m,m=h.child;m!==null;)_p(m,o),m=m.sibling;return Pt(Yi,Yi.current&1|2),h.child}o=o.sibling}A.tail!==null&&Qt()>jp&&(h.flags|=128,x=!0,yd(A,!1),h.lanes=4194304)}else{if(!x)if(o=xp(z),o!==null){if(h.flags|=128,x=!0,o=o.updateQueue,h.updateQueue=o,Rp(h,o),yd(A,!0),A.tail===null&&A.tailMode==="hidden"&&!z.alternate&&!hr)return Ri(h),null}else 2*Qt()-A.renderingStartTime>jp&&m!==536870912&&(h.flags|=128,x=!0,yd(A,!1),h.lanes=4194304);A.isBackwards?(z.sibling=h.child,h.child=z):(o=A.last,o!==null?o.sibling=z:h.child=z,A.last=z)}return A.tail!==null?(h=A.tail,A.rendering=h,A.tail=h.sibling,A.renderingStartTime=Qt(),h.sibling=null,o=Yi.current,Pt(Yi,x?o&1|2:o&1),h):(Ri(h),null);case 22:case 23:return io(h),uf(),x=h.memoizedState!==null,o!==null?o.memoizedState!==null!==x&&(h.flags|=8192):x&&(h.flags|=8192),x?(m&536870912)!==0&&(h.flags&128)===0&&(Ri(h),h.subtreeFlags&6&&(h.flags|=8192)):Ri(h),m=h.updateQueue,m!==null&&Rp(h,m.retryQueue),m=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),x=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(x=h.memoizedState.cachePool.pool),x!==m&&(h.flags|=2048),o!==null&&_t(is),null;case 24:return m=null,o!==null&&(m=o.memoizedState.cache),h.memoizedState.cache!==m&&(h.flags|=2048),ns(Li),Ri(h),null;case 25:return null;case 30:return null}throw Error(a(156,h.tag))}function wg(o,h){switch(th(h),h.tag){case 1:return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 3:return ns(Li),ft(),o=h.flags,(o&65536)!==0&&(o&128)===0?(h.flags=o&-65537|128,h):null;case 26:case 27:case 5:return Je(h),null;case 13:if(io(h),o=h.memoizedState,o!==null&&o.dehydrated!==null){if(h.alternate===null)throw Error(a(340));Ps()}return o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 19:return _t(Yi),null;case 4:return ft(),null;case 10:return ns(h.type),null;case 22:case 23:return io(h),uf(),o!==null&&_t(is),o=h.flags,o&65536?(h.flags=o&-65537|128,h):null;case 24:return ns(Li),null;case 25:return null;default:return null}}function f_(o,h){switch(th(h),h.tag){case 3:ns(Li),ft();break;case 26:case 27:case 5:Je(h);break;case 4:ft();break;case 13:io(h);break;case 19:_t(Yi);break;case 10:ns(h.type);break;case 22:case 23:io(h),uf(),o!==null&&_t(is);break;case 24:ns(Li)}}function mf(o,h){try{var m=h.updateQueue,x=m!==null?m.lastEffect:null;if(x!==null){var A=x.next;m=A;do{if((m.tag&o)===o){x=void 0;var z=m.create,K=m.inst;x=z(),K.destroy=x}m=m.next}while(m!==A)}}catch(se){ni(h,h.return,se)}}function ds(o,h,m){try{var x=h.updateQueue,A=x!==null?x.lastEffect:null;if(A!==null){var z=A.next;x=z;do{if((x.tag&o)===o){var K=x.inst,se=K.destroy;if(se!==void 0){K.destroy=void 0,A=h;var Be=m,lt=se;try{lt()}catch(zt){ni(A,Be,zt)}}}x=x.next}while(x!==z)}}catch(zt){ni(h,h.return,zt)}}function d_(o){var h=o.updateQueue;if(h!==null){var m=o.stateNode;try{Nr(h,m)}catch(x){ni(o,o.return,x)}}}function xi(o,h,m){m.props=ph(o.type,o.memoizedProps),m.state=o.memoizedState;try{m.componentWillUnmount()}catch(x){ni(o,h,x)}}function xl(o,h){try{var m=o.ref;if(m!==null){switch(o.tag){case 26:case 27:case 5:var x=o.stateNode;break;case 30:x=o.stateNode;break;default:x=o.stateNode}typeof m=="function"?o.refCleanup=m(x):m.current=x}}catch(A){ni(o,h,A)}}function Us(o,h){var m=o.ref,x=o.refCleanup;if(m!==null)if(typeof x=="function")try{x()}catch(A){ni(o,h,A)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof m=="function")try{m(null)}catch(A){ni(o,h,A)}else m.current=null}function _d(o){var h=o.type,m=o.memoizedProps,x=o.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":m.autoFocus&&x.focus();break e;case"img":m.src?x.src=m.src:m.srcSet&&(x.srcset=m.srcSet)}}catch(A){ni(o,o.return,A)}}function gf(o,h,m){try{var x=o.stateNode;O_(x,o.type,m,h),x[It]=h}catch(A){ni(o,o.return,A)}}function yf(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Sc(o.type)||o.tag===4}function Op(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||yf(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Sc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function Ip(o,h,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,h?(m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m).insertBefore(o,h):(h=m.nodeType===9?m.body:m.nodeName==="HTML"?m.ownerDocument.body:m,h.appendChild(o),m=m._reactRootContainer,m!=null||h.onclick!==null||(h.onclick=Pd));else if(x!==4&&(x===27&&Sc(o.type)&&(m=o.stateNode,h=null),o=o.child,o!==null))for(Ip(o,h,m),o=o.sibling;o!==null;)Ip(o,h,m),o=o.sibling}function pu(o,h,m){var x=o.tag;if(x===5||x===6)o=o.stateNode,h?m.insertBefore(o,h):m.appendChild(o);else if(x!==4&&(x===27&&Sc(o.type)&&(m=o.stateNode),o=o.child,o!==null))for(pu(o,h,m),o=o.sibling;o!==null;)pu(o,h,m),o=o.sibling}function kp(o){var h=o.stateNode,m=o.memoizedProps;try{for(var x=o.type,A=h.attributes;A.length;)h.removeAttributeNode(A[0]);_a(h,x,m),h[Xt]=o,h[It]=m}catch(z){ni(o,o.return,z)}}var Co=!1,wi=!1,mu=!1,_f=typeof WeakSet=="function"?WeakSet:Set,ma=null;function p_(o,h){if(o=o.containerInfo,qg=Ut,o=Xh(o),Wh(o)){if("selectionStart"in o)var m={start:o.selectionStart,end:o.selectionEnd};else e:{m=(m=o.ownerDocument)&&m.defaultView||window;var x=m.getSelection&&m.getSelection();if(x&&x.rangeCount!==0){m=x.anchorNode;var A=x.anchorOffset,z=x.focusNode;x=x.focusOffset;try{m.nodeType,z.nodeType}catch{m=null;break e}var K=0,se=-1,Be=-1,lt=0,zt=0,Bt=o,yt=null;t:for(;;){for(var bt;Bt!==m||A!==0&&Bt.nodeType!==3||(se=K+A),Bt!==z||x!==0&&Bt.nodeType!==3||(Be=K+x),Bt.nodeType===3&&(K+=Bt.nodeValue.length),(bt=Bt.firstChild)!==null;)yt=Bt,Bt=bt;for(;;){if(Bt===o)break t;if(yt===m&&++lt===A&&(se=K),yt===z&&++zt===x&&(Be=K),(bt=Bt.nextSibling)!==null)break;Bt=yt,yt=Bt.parentNode}Bt=bt}m=se===-1||Be===-1?null:{start:se,end:Be}}else m=null}m=m||{start:0,end:0}}else m=null;for(nm={focusedElem:o,selectionRange:m},Ut=!1,ma=h;ma!==null;)if(h=ma,o=h.child,(h.subtreeFlags&1024)!==0&&o!==null)o.return=h,ma=o;else for(;ma!==null;){switch(h=ma,z=h.alternate,o=h.flags,h.tag){case 0:break;case 11:case 15:break;case 1:if((o&1024)!==0&&z!==null){o=void 0,m=h,A=z.memoizedProps,z=z.memoizedState,x=m.stateNode;try{var Nn=ph(m.type,A,m.elementType===m.type);o=x.getSnapshotBeforeUpdate(Nn,z),x.__reactInternalSnapshotBeforeUpdate=o}catch(In){ni(m,m.return,In)}}break;case 3:if((o&1024)!==0){if(o=h.stateNode.containerInfo,m=o.nodeType,m===9)If(o);else if(m===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":If(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(a(163))}if(o=h.sibling,o!==null){o.return=h.return,ma=o;break}ma=h.return}}function gu(o,h,m){var x=m.flags;switch(m.tag){case 0:case 11:case 15:wl(o,m),x&4&&mf(5,m);break;case 1:if(wl(o,m),x&4)if(o=m.stateNode,h===null)try{o.componentDidMount()}catch(K){ni(m,m.return,K)}else{var A=ph(m.type,h.memoizedProps);h=h.memoizedState;try{o.componentDidUpdate(A,h,o.__reactInternalSnapshotBeforeUpdate)}catch(K){ni(m,m.return,K)}}x&64&&d_(m),x&512&&xl(m,m.return);break;case 3:if(wl(o,m),x&64&&(o=m.updateQueue,o!==null)){if(h=null,m.child!==null)switch(m.child.tag){case 27:case 5:h=m.child.stateNode;break;case 1:h=m.child.stateNode}try{Nr(o,h)}catch(K){ni(m,m.return,K)}}break;case 27:h===null&&x&4&&kp(m);case 26:case 5:wl(o,m),h===null&&x&4&&_d(m),x&512&&xl(m,m.return);break;case 12:wl(o,m);break;case 13:wl(o,m),x&4&&Cg(o,m),x&64&&(o=m.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(m=Tl.bind(null,m),hb(o,m))));break;case 22:if(x=m.memoizedState!==null||Co,!x){h=h!==null&&h.memoizedState!==null||wi,A=Co;var z=wi;Co=x,(wi=h)&&!z?Sl(o,m,(m.subtreeFlags&8772)!==0):wl(o,m),Co=A,wi=z}break;case 30:break;default:wl(o,m)}}function m_(o){var h=o.alternate;h!==null&&(o.alternate=null,m_(h)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(h=o.stateNode,h!==null&&Ht(h)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var di=null,ga=!1;function Hs(o,h,m){for(m=m.child;m!==null;)Sg(o,h,m),m=m.sibling}function Sg(o,h,m){if(dr&&typeof dr.onCommitFiberUnmount=="function")try{dr.onCommitFiberUnmount(or,m)}catch{}switch(m.tag){case 26:wi||Us(m,h),Hs(o,h,m),m.memoizedState?m.memoizedState.count--:m.stateNode&&(m=m.stateNode,m.parentNode.removeChild(m));break;case 27:wi||Us(m,h);var x=di,A=ga;Sc(m.type)&&(di=m.stateNode,ga=!1),Hs(o,h,m),kf(m.stateNode),di=x,ga=A;break;case 5:wi||Us(m,h);case 6:if(x=di,A=ga,di=null,Hs(o,h,m),di=x,ga=A,di!==null)if(ga)try{(di.nodeType===9?di.body:di.nodeName==="HTML"?di.ownerDocument.body:di).removeChild(m.stateNode)}catch(z){ni(m,h,z)}else try{di.removeChild(m.stateNode)}catch(z){ni(m,h,z)}break;case 18:di!==null&&(ga?(o=di,Rd(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,m.stateNode),si(o)):Rd(di,m.stateNode));break;case 4:x=di,A=ga,di=m.stateNode.containerInfo,ga=!0,Hs(o,h,m),di=x,ga=A;break;case 0:case 11:case 14:case 15:wi||ds(2,m,h),wi||ds(4,m,h),Hs(o,h,m);break;case 1:wi||(Us(m,h),x=m.stateNode,typeof x.componentWillUnmount=="function"&&xi(m,h,x)),Hs(o,h,m);break;case 21:Hs(o,h,m);break;case 22:wi=(x=wi)||m.memoizedState!==null,Hs(o,h,m),wi=x;break;default:Hs(o,h,m)}}function Cg(o,h){if(h.memoizedState===null&&(o=h.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{si(o)}catch(m){ni(h,h.return,m)}}function nb(o){switch(o.tag){case 13:case 19:var h=o.stateNode;return h===null&&(h=o.stateNode=new _f),h;case 22:return o=o.stateNode,h=o._retryCache,h===null&&(h=o._retryCache=new _f),h;default:throw Error(a(435,o.tag))}}function Tg(o,h){var m=nb(o);h.forEach(function(x){var A=Su.bind(null,o,x);m.has(x)||(m.add(x),x.then(A,A))})}function jo(o,h){var m=h.deletions;if(m!==null)for(var x=0;x<m.length;x++){var A=m[x],z=o,K=h,se=K;e:for(;se!==null;){switch(se.tag){case 27:if(Sc(se.type)){di=se.stateNode,ga=!1;break e}break;case 5:di=se.stateNode,ga=!1;break e;case 3:case 4:di=se.stateNode.containerInfo,ga=!0;break e}se=se.return}if(di===null)throw Error(a(160));Sg(z,K,A),di=null,ga=!1,z=A.alternate,z!==null&&(z.return=null),A.return=null}if(h.subtreeFlags&13878)for(h=h.child;h!==null;)g_(h,o),h=h.sibling}var qs=null;function g_(o,h){var m=o.alternate,x=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:jo(h,o),ao(o),x&4&&(ds(3,o,o.return),mf(3,o),ds(5,o,o.return));break;case 1:jo(h,o),ao(o),x&512&&(wi||m===null||Us(m,m.return)),x&64&&Co&&(o=o.updateQueue,o!==null&&(x=o.callbacks,x!==null&&(m=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=m===null?x:m.concat(x))));break;case 26:var A=qs;if(jo(h,o),ao(o),x&512&&(wi||m===null||Us(m,m.return)),x&4){var z=m!==null?m.memoizedState:null;if(x=o.memoizedState,m===null)if(x===null)if(o.stateNode===null){e:{x=o.type,m=o.memoizedProps,A=A.ownerDocument||A;t:switch(x){case"title":z=A.getElementsByTagName("title")[0],(!z||z[at]||z[Xt]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=A.createElement(x),A.head.insertBefore(z,A.querySelector("head > title"))),_a(z,x,m),z[Xt]=o,tn(z),x=z;break e;case"link":var K=M("link","href",A).get(x+(m.href||""));if(K){for(var se=0;se<K.length;se++)if(z=K[se],z.getAttribute("href")===(m.href==null||m.href===""?null:m.href)&&z.getAttribute("rel")===(m.rel==null?null:m.rel)&&z.getAttribute("title")===(m.title==null?null:m.title)&&z.getAttribute("crossorigin")===(m.crossOrigin==null?null:m.crossOrigin)){K.splice(se,1);break t}}z=A.createElement(x),_a(z,x,m),A.head.appendChild(z);break;case"meta":if(K=M("meta","content",A).get(x+(m.content||""))){for(se=0;se<K.length;se++)if(z=K[se],z.getAttribute("content")===(m.content==null?null:""+m.content)&&z.getAttribute("name")===(m.name==null?null:m.name)&&z.getAttribute("property")===(m.property==null?null:m.property)&&z.getAttribute("http-equiv")===(m.httpEquiv==null?null:m.httpEquiv)&&z.getAttribute("charset")===(m.charSet==null?null:m.charSet)){K.splice(se,1);break t}}z=A.createElement(x),_a(z,x,m),A.head.appendChild(z);break;default:throw Error(a(468,x))}z[Xt]=o,tn(z),x=z}o.stateNode=x}else O(A,o.type,o.stateNode);else o.stateNode=l(A,x,o.memoizedProps);else z!==x?(z===null?m.stateNode!==null&&(m=m.stateNode,m.parentNode.removeChild(m)):z.count--,x===null?O(A,o.type,o.stateNode):l(A,x,o.memoizedProps)):x===null&&o.stateNode!==null&&gf(o,o.memoizedProps,m.memoizedProps)}break;case 27:jo(h,o),ao(o),x&512&&(wi||m===null||Us(m,m.return)),m!==null&&x&4&&gf(o,o.memoizedProps,m.memoizedProps);break;case 5:if(jo(h,o),ao(o),x&512&&(wi||m===null||Us(m,m.return)),o.flags&32){A=o.stateNode;try{il(A,"")}catch(bt){ni(o,o.return,bt)}}x&4&&o.stateNode!=null&&(A=o.memoizedProps,gf(o,A,m!==null?m.memoizedProps:A)),x&1024&&(mu=!0);break;case 6:if(jo(h,o),ao(o),x&4){if(o.stateNode===null)throw Error(a(162));x=o.memoizedProps,m=o.stateNode;try{m.nodeValue=x}catch(bt){ni(o,o.return,bt)}}break;case 3:if(C=null,A=qs,qs=cm(h.containerInfo),jo(h,o),qs=A,ao(o),x&4&&m!==null&&m.memoizedState.isDehydrated)try{si(h.containerInfo)}catch(bt){ni(o,o.return,bt)}mu&&(mu=!1,Eg(o));break;case 4:x=qs,qs=cm(o.stateNode.containerInfo),jo(h,o),ao(o),qs=x;break;case 12:jo(h,o),ao(o);break;case 13:jo(h,o),ao(o),o.child.flags&8192&&o.memoizedState!==null!=(m!==null&&m.memoizedState!==null)&&(Og=Qt()),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Tg(o,x)));break;case 22:A=o.memoizedState!==null;var Be=m!==null&&m.memoizedState!==null,lt=Co,zt=wi;if(Co=lt||A,wi=zt||Be,jo(h,o),wi=zt,Co=lt,ao(o),x&8192)e:for(h=o.stateNode,h._visibility=A?h._visibility&-2:h._visibility|1,A&&(m===null||Be||Co||wi||yu(o)),m=null,h=o;;){if(h.tag===5||h.tag===26){if(m===null){Be=m=h;try{if(z=Be.stateNode,A)K=z.style,typeof K.setProperty=="function"?K.setProperty("display","none","important"):K.display="none";else{se=Be.stateNode;var Bt=Be.memoizedProps.style,yt=Bt!=null&&Bt.hasOwnProperty("display")?Bt.display:null;se.style.display=yt==null||typeof yt=="boolean"?"":(""+yt).trim()}}catch(bt){ni(Be,Be.return,bt)}}}else if(h.tag===6){if(m===null){Be=h;try{Be.stateNode.nodeValue=A?"":Be.memoizedProps}catch(bt){ni(Be,Be.return,bt)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===o)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===o)break e;for(;h.sibling===null;){if(h.return===null||h.return===o)break e;m===h&&(m=null),h=h.return}m===h&&(m=null),h.sibling.return=h.return,h=h.sibling}x&4&&(x=o.updateQueue,x!==null&&(m=x.retryQueue,m!==null&&(x.retryQueue=null,Tg(o,m))));break;case 19:jo(h,o),ao(o),x&4&&(x=o.updateQueue,x!==null&&(o.updateQueue=null,Tg(o,x)));break;case 30:break;case 21:break;default:jo(h,o),ao(o)}}function ao(o){var h=o.flags;if(h&2){try{for(var m,x=o.return;x!==null;){if(yf(x)){m=x;break}x=x.return}if(m==null)throw Error(a(160));switch(m.tag){case 27:var A=m.stateNode,z=Op(o);pu(o,z,A);break;case 5:var K=m.stateNode;m.flags&32&&(il(K,""),m.flags&=-33);var se=Op(o);pu(o,se,K);break;case 3:case 4:var Be=m.stateNode.containerInfo,lt=Op(o);Ip(o,lt,Be);break;default:throw Error(a(161))}}catch(zt){ni(o,o.return,zt)}o.flags&=-3}h&4096&&(o.flags&=-4097)}function Eg(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var h=o;Eg(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),o=o.sibling}}function wl(o,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)gu(o,h.alternate,h),h=h.sibling}function yu(o){for(o=o.child;o!==null;){var h=o;switch(h.tag){case 0:case 11:case 14:case 15:ds(4,h,h.return),yu(h);break;case 1:Us(h,h.return);var m=h.stateNode;typeof m.componentWillUnmount=="function"&&xi(h,h.return,m),yu(h);break;case 27:kf(h.stateNode);case 26:case 5:Us(h,h.return),yu(h);break;case 22:h.memoizedState===null&&yu(h);break;case 30:yu(h);break;default:yu(h)}o=o.sibling}}function Sl(o,h,m){for(m=m&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var x=h.alternate,A=o,z=h,K=z.flags;switch(z.tag){case 0:case 11:case 15:Sl(A,z,m),mf(4,z);break;case 1:if(Sl(A,z,m),x=z,A=x.stateNode,typeof A.componentDidMount=="function")try{A.componentDidMount()}catch(lt){ni(x,x.return,lt)}if(x=z,A=x.updateQueue,A!==null){var se=x.stateNode;try{var Be=A.shared.hiddenCallbacks;if(Be!==null)for(A.shared.hiddenCallbacks=null,A=0;A<Be.length;A++)ss(Be[A],se)}catch(lt){ni(x,x.return,lt)}}m&&K&64&&d_(z),xl(z,z.return);break;case 27:kp(z);case 26:case 5:Sl(A,z,m),m&&x===null&&K&4&&_d(z),xl(z,z.return);break;case 12:Sl(A,z,m);break;case 13:Sl(A,z,m),m&&K&4&&Cg(A,z);break;case 22:z.memoizedState===null&&Sl(A,z,m),xl(z,z.return);break;case 30:break;default:Sl(A,z,m)}h=h.sibling}}function zp(o,h){var m=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(m=o.memoizedState.cachePool.pool),o=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(o=h.memoizedState.cachePool.pool),o!==m&&(o!=null&&o.refCount++,m!=null&&ou(m))}function Dp(o,h){o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&ou(o))}function Fo(o,h,m,x){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)Mg(o,h,m,x),h=h.sibling}function Mg(o,h,m,x){var A=h.flags;switch(h.tag){case 0:case 11:case 15:Fo(o,h,m,x),A&2048&&mf(9,h);break;case 1:Fo(o,h,m,x);break;case 3:Fo(o,h,m,x),A&2048&&(o=null,h.alternate!==null&&(o=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==o&&(h.refCount++,o!=null&&ou(o)));break;case 12:if(A&2048){Fo(o,h,m,x),o=h.stateNode;try{var z=h.memoizedProps,K=z.id,se=z.onPostCommit;typeof se=="function"&&se(K,h.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Be){ni(h,h.return,Be)}}else Fo(o,h,m,x);break;case 13:Fo(o,h,m,x);break;case 23:break;case 22:z=h.stateNode,K=h.alternate,h.memoizedState!==null?z._visibility&2?Fo(o,h,m,x):vf(o,h):z._visibility&2?Fo(o,h,m,x):(z._visibility|=2,mh(o,h,m,x,(h.subtreeFlags&10256)!==0)),A&2048&&zp(K,h);break;case 24:Fo(o,h,m,x),A&2048&&Dp(h.alternate,h);break;default:Fo(o,h,m,x)}}function mh(o,h,m,x,A){for(A=A&&(h.subtreeFlags&10256)!==0,h=h.child;h!==null;){var z=o,K=h,se=m,Be=x,lt=K.flags;switch(K.tag){case 0:case 11:case 15:mh(z,K,se,Be,A),mf(8,K);break;case 23:break;case 22:var zt=K.stateNode;K.memoizedState!==null?zt._visibility&2?mh(z,K,se,Be,A):vf(z,K):(zt._visibility|=2,mh(z,K,se,Be,A)),A&&lt&2048&&zp(K.alternate,K);break;case 24:mh(z,K,se,Be,A),A&&lt&2048&&Dp(K.alternate,K);break;default:mh(z,K,se,Be,A)}h=h.sibling}}function vf(o,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var m=o,x=h,A=x.flags;switch(x.tag){case 22:vf(m,x),A&2048&&zp(x.alternate,x);break;case 24:vf(m,x),A&2048&&Dp(x.alternate,x);break;default:vf(m,x)}h=h.sibling}}var yc=8192;function bf(o){if(o.subtreeFlags&yc)for(o=o.child;o!==null;)Lp(o),o=o.sibling}function Lp(o){switch(o.tag){case 26:bf(o),o.flags&yc&&o.memoizedState!==null&&Y(qs,o.memoizedState,o.memoizedProps);break;case 5:bf(o);break;case 3:case 4:var h=qs;qs=cm(o.stateNode.containerInfo),bf(o),qs=h;break;case 22:o.memoizedState===null&&(h=o.alternate,h!==null&&h.memoizedState!==null?(h=yc,yc=16777216,bf(o),yc=h):bf(o));break;default:bf(o)}}function xf(o){var h=o.alternate;if(h!==null&&(o=h.child,o!==null)){h.child=null;do h=o.sibling,o.sibling=null,o=h;while(o!==null)}}function gh(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var x=h[m];ma=x,Ag(x,o)}xf(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)y_(o),o=o.sibling}function y_(o){switch(o.tag){case 0:case 11:case 15:gh(o),o.flags&2048&&ds(9,o,o.return);break;case 3:gh(o);break;case 12:gh(o);break;case 22:var h=o.stateNode;o.memoizedState!==null&&h._visibility&2&&(o.return===null||o.return.tag!==13)?(h._visibility&=-3,Bp(o)):gh(o);break;default:gh(o)}}function Bp(o){var h=o.deletions;if((o.flags&16)!==0){if(h!==null)for(var m=0;m<h.length;m++){var x=h[m];ma=x,Ag(x,o)}xf(o)}for(o=o.child;o!==null;){switch(h=o,h.tag){case 0:case 11:case 15:ds(8,h,h.return),Bp(h);break;case 22:m=h.stateNode,m._visibility&2&&(m._visibility&=-3,Bp(h));break;default:Bp(h)}o=o.sibling}}function Ag(o,h){for(;ma!==null;){var m=ma;switch(m.tag){case 0:case 11:case 15:ds(8,m,h);break;case 23:case 22:if(m.memoizedState!==null&&m.memoizedState.cachePool!==null){var x=m.memoizedState.cachePool.pool;x!=null&&x.refCount++}break;case 24:ou(m.memoizedState.cache)}if(x=m.child,x!==null)x.return=m,ma=x;else e:for(m=o;ma!==null;){x=ma;var A=x.sibling,z=x.return;if(m_(x),x===m){ma=null;break e}if(A!==null){A.return=z,ma=A;break e}ma=z}}}var __={getCacheForType:function(o){var h=Xi(Li),m=h.data.get(o);return m===void 0&&(m=o(),h.data.set(o,m)),m}},rb=typeof WeakMap=="function"?WeakMap:Map,jr=0,kr=null,ir=null,yr=0,Fr=0,$o=null,_u=!1,wf=!1,Pg=!1,Cl=0,Si=0,_c=0,vu=0,Np=0,ps=0,vc=0,vd=null,oo=null,Rg=!1,Og=0,jp=1/0,bd=null,bu=null,ka=0,ms=null,yh=null,xu=0,Fp=0,Oi=null,$p=null,xd=0,Vp=null;function so(){if((jr&2)!==0&&yr!==0)return yr&-yr;if(xe.T!==null){var o=Do;return o!==0?o:Kp()}return xt()}function Up(){ps===0&&(ps=(yr&536870912)===0||hr?Ce():536870912);var o=Ua.current;return o!==null&&(o.flags|=32),ps}function Vo(o,h,m){(o===kr&&(Fr===2||Fr===9)||o.cancelPendingCommit!==null)&&(_h(o,0),bc(o,yr,ps,!1)),rt(o,m),((jr&2)===0||o!==kr)&&(o===kr&&((jr&2)===0&&(vu|=m),Si===4&&bc(o,yr,ps,!1)),gs(o))}function v_(o,h,m){if((jr&6)!==0)throw Error(a(327));var x=!m&&(h&124)===0&&(h&o.expiredLanes)===0||ie(o,h),A=x?ab(o,h):Cf(o,h,!0),z=x;do{if(A===0){wf&&!x&&bc(o,h,0,!1);break}else{if(m=o.current.alternate,z&&!ib(m)){A=Cf(o,h,!1),z=!1;continue}if(A===2){if(z=h,o.errorRecoveryDisabledLanes&z)var K=0;else K=o.pendingLanes&-536870913,K=K!==0?K:K&536870912?536870912:0;if(K!==0){h=K;e:{var se=o;A=vd;var Be=se.current.memoizedState.isDehydrated;if(Be&&(_h(se,K).flags|=256),K=Cf(se,K,!1),K!==2){if(Pg&&!Be){se.errorRecoveryDisabledLanes|=z,vu|=z,A=4;break e}z=oo,oo=A,z!==null&&(oo===null?oo=z:oo.push.apply(oo,z))}A=K}if(z=!1,A!==2)continue}}if(A===1){_h(o,0),bc(o,h,0,!0);break}e:{switch(x=o,z=A,z){case 0:case 1:throw Error(a(345));case 4:if((h&4194048)!==h)break;case 6:bc(x,h,ps,!_u);break e;case 2:oo=null;break;case 3:case 5:break;default:throw Error(a(329))}if((h&62914560)===h&&(A=Og+300-Qt(),10<A)){if(bc(x,h,ps,!_u),te(x,0,!0)!==0)break e;x.timeoutHandle=I_(b_.bind(null,x,m,oo,bd,Rg,h,ps,vu,vc,_u,z,2,-0,0),A);break e}b_(x,m,oo,bd,Rg,h,ps,vu,vc,_u,z,0,-0,0)}}break}while(!0);gs(o)}function b_(o,h,m,x,A,z,K,se,Be,lt,zt,Bt,yt,bt){if(o.timeoutHandle=-1,Bt=h.subtreeFlags,(Bt&8192||(Bt&16785408)===16785408)&&(V={stylesheets:null,count:0,unsuspend:Z},Lp(h),Bt=Q(),Bt!==null)){o.cancelPendingCommit=Bt(qp.bind(null,o,h,z,m,x,A,K,se,Be,zt,1,yt,bt)),bc(o,z,K,!lt);return}qp(o,h,z,m,x,A,K,se,Be)}function ib(o){for(var h=o;;){var m=h.tag;if((m===0||m===11||m===15)&&h.flags&16384&&(m=h.updateQueue,m!==null&&(m=m.stores,m!==null)))for(var x=0;x<m.length;x++){var A=m[x],z=A.getSnapshot;A=A.value;try{if(!Fa(z(),A))return!1}catch{return!1}}if(m=h.child,h.subtreeFlags&16384&&m!==null)m.return=h,h=m;else{if(h===o)break;for(;h.sibling===null;){if(h.return===null||h.return===o)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function bc(o,h,m,x){h&=~Np,h&=~vu,o.suspendedLanes|=h,o.pingedLanes&=~h,x&&(o.warmLanes|=h),x=o.expirationTimes;for(var A=h;0<A;){var z=31-Gn(A),K=1<<z;x[z]=-1,A&=~K}m!==0&&Ie(o,m,h)}function ya(){return(jr&6)===0?(xh(0),!1):!0}function wd(){if(ir!==null){if(Fr===0)var o=ir.return;else o=ir,zo=ko=null,hh(o),fu=null,pc=0,o=ir;for(;o!==null;)f_(o.alternate,o),o=o.return;ir=null}}function _h(o,h){var m=o.timeoutHandle;m!==-1&&(o.timeoutHandle=-1,k_(m)),m=o.cancelPendingCommit,m!==null&&(o.cancelPendingCommit=null,m()),wd(),kr=o,ir=m=Es(o.current,null),yr=h,Fr=0,$o=null,_u=!1,wf=ie(o,h),Pg=!1,vc=ps=Np=vu=_c=Si=0,oo=vd=null,Rg=!1,(h&8)!==0&&(h|=h&32);var x=o.entangledLanes;if(x!==0)for(o=o.entanglements,x&=h;0<x;){var A=31-Gn(x),z=1<<A;h|=o[A],x&=~z}return Cl=h,tc(),m}function xc(o,h){An=null,xe.H=Ar,h===rn||h===cc?(h=sh(),Fr=3):h===oh?(h=sh(),Fr=4):Fr=h===pg?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,$o=h,ir===null&&(Si=1,fd(o,Pa(h,o.current)))}function Sd(){var o=xe.H;return xe.H=Ar,o===null?Ar:o}function Sf(){var o=xe.A;return xe.A=__,o}function wu(){Si=4,_u||(yr&4194048)!==yr&&Ua.current!==null||(wf=!0),(_c&134217727)===0&&(vu&134217727)===0||kr===null||bc(kr,yr,ps,!1)}function Cf(o,h,m){var x=jr;jr|=2;var A=Sd(),z=Sf();(kr!==o||yr!==h)&&(bd=null,_h(o,h)),h=!1;var K=Si;e:do try{if(Fr!==0&&ir!==null){var se=ir,Be=$o;switch(Fr){case 8:wd(),K=6;break e;case 3:case 2:case 9:case 6:Ua.current===null&&(h=!0);var lt=Fr;if(Fr=0,$o=null,Tf(o,se,Be,lt),m&&wf){K=0;break e}break;default:lt=Fr,Fr=0,$o=null,Tf(o,se,Be,lt)}}Hp(),K=Si;break}catch(zt){xc(o,zt)}while(!0);return h&&o.shellSuspendCounter++,zo=ko=null,jr=x,xe.H=A,xe.A=z,ir===null&&(kr=null,yr=0,tc()),K}function Hp(){for(;ir!==null;)Ig(ir)}function ab(o,h){var m=jr;jr|=2;var x=Sd(),A=Sf();kr!==o||yr!==h?(bd=null,jp=Qt()+500,_h(o,h)):wf=ie(o,h);e:do try{if(Fr!==0&&ir!==null){h=ir;var z=$o;t:switch(Fr){case 1:Fr=0,$o=null,Tf(o,h,z,1);break;case 2:case 9:if(uc(z)){Fr=0,$o=null,kg(h);break}h=function(){Fr!==2&&Fr!==9||kr!==o||(Fr=7),gs(o)},z.then(h,h);break e;case 3:Fr=7;break e;case 4:Fr=5;break e;case 7:uc(z)?(Fr=0,$o=null,kg(h)):(Fr=0,$o=null,Tf(o,h,z,7));break;case 5:var K=null;switch(ir.tag){case 26:K=ir.memoizedState;case 5:case 27:var se=ir;if(!K||N(K)){Fr=0,$o=null;var Be=se.sibling;if(Be!==null)ir=Be;else{var lt=se.return;lt!==null?(ir=lt,Cd(lt)):ir=null}break t}}Fr=0,$o=null,Tf(o,h,z,5);break;case 6:Fr=0,$o=null,Tf(o,h,z,6);break;case 8:wd(),Si=6;break e;default:throw Error(a(462))}}ob();break}catch(zt){xc(o,zt)}while(!0);return zo=ko=null,xe.H=x,xe.A=A,jr=m,ir!==null?0:(kr=null,yr=0,tc(),Si)}function ob(){for(;ir!==null&&!Gt();)Ig(ir)}function Ig(o){var h=u_(o.alternate,o,Cl);o.memoizedProps=o.pendingProps,h===null?Cd(o):ir=h}function kg(o){var h=o,m=h.alternate;switch(h.tag){case 15:case 0:h=Ep(m,h,h.pendingProps,h.type,void 0,yr);break;case 11:h=Ep(m,h,h.pendingProps,h.type.render,h.ref,yr);break;case 5:hh(h);default:f_(m,h),h=ir=_p(h,Cl),h=u_(m,h,Cl)}o.memoizedProps=o.pendingProps,h===null?Cd(o):ir=h}function Tf(o,h,m,x){zo=ko=null,hh(h),fu=null,pc=0;var A=h.return;try{if(Cp(o,A,h,m,yr)){Si=1,fd(o,Pa(m,o.current)),ir=null;return}}catch(z){if(A!==null)throw ir=A,z;Si=1,fd(o,Pa(m,o.current)),ir=null;return}h.flags&32768?(hr||x===1?o=!0:wf||(yr&536870912)!==0?o=!1:(_u=o=!0,(x===2||x===9||x===3||x===6)&&(x=Ua.current,x!==null&&x.tag===13&&(x.flags|=16384))),zg(h,o)):Cd(h)}function Cd(o){var h=o;do{if((h.flags&32768)!==0){zg(h,_u);return}o=h.return;var m=tb(h.alternate,h,Cl);if(m!==null){ir=m;return}if(h=h.sibling,h!==null){ir=h;return}ir=h=o}while(h!==null);Si===0&&(Si=5)}function zg(o,h){do{var m=wg(o.alternate,o);if(m!==null){m.flags&=32767,ir=m;return}if(m=o.return,m!==null&&(m.flags|=32768,m.subtreeFlags=0,m.deletions=null),!h&&(o=o.sibling,o!==null)){ir=o;return}ir=o=m}while(o!==null);Si=6,ir=null}function qp(o,h,m,x,A,z,K,se,Be){o.cancelPendingCommit=null;do Zp();while(ka!==0);if((jr&6)!==0)throw Error(a(327));if(h!==null){if(h===o.current)throw Error(a(177));if(z=h.lanes|h.childLanes,z|=tu,Ve(o,m,z,K,se,Be),o===kr&&(ir=kr=null,yr=0),yh=h,ms=o,xu=m,Fp=z,Oi=A,$p=x,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,E_(gn,function(){return S_(),null})):(o.callbackNode=null,o.callbackPriority=0),x=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||x){x=xe.T,xe.T=null,A=et.p,et.p=2,K=jr,jr|=4;try{p_(o,h,m)}finally{jr=K,et.p=A,xe.T=x}}ka=1,Gp(),x_(),Dg()}}function Gp(){if(ka===1){ka=0;var o=ms,h=yh,m=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||m){m=xe.T,xe.T=null;var x=et.p;et.p=2;var A=jr;jr|=4;try{g_(h,o);var z=nm,K=Xh(o.containerInfo),se=z.focusedElem,Be=z.selectionRange;if(K!==se&&se&&se.ownerDocument&&Zh(se.ownerDocument.documentElement,se)){if(Be!==null&&Wh(se)){var lt=Be.start,zt=Be.end;if(zt===void 0&&(zt=lt),"selectionStart"in se)se.selectionStart=lt,se.selectionEnd=Math.min(zt,se.value.length);else{var Bt=se.ownerDocument||document,yt=Bt&&Bt.defaultView||window;if(yt.getSelection){var bt=yt.getSelection(),Nn=se.textContent.length,In=Math.min(Be.start,Nn),Zr=Be.end===void 0?In:Math.min(Be.end,Nn);!bt.extend&&In>Zr&&(K=Zr,Zr=In,In=K);var nt=Gh(se,In),Ze=Gh(se,Zr);if(nt&&Ze&&(bt.rangeCount!==1||bt.anchorNode!==nt.node||bt.anchorOffset!==nt.offset||bt.focusNode!==Ze.node||bt.focusOffset!==Ze.offset)){var st=Bt.createRange();st.setStart(nt.node,nt.offset),bt.removeAllRanges(),In>Zr?(bt.addRange(st),bt.extend(Ze.node,Ze.offset)):(st.setEnd(Ze.node,Ze.offset),bt.addRange(st))}}}}for(Bt=[],bt=se;bt=bt.parentNode;)bt.nodeType===1&&Bt.push({element:bt,left:bt.scrollLeft,top:bt.scrollTop});for(typeof se.focus=="function"&&se.focus(),se=0;se<Bt.length;se++){var Ft=Bt[se];Ft.element.scrollLeft=Ft.left,Ft.element.scrollTop=Ft.top}}Ut=!!qg,nm=qg=null}finally{jr=A,et.p=x,xe.T=m}}o.current=h,ka=2}}function x_(){if(ka===2){ka=0;var o=ms,h=yh,m=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||m){m=xe.T,xe.T=null;var x=et.p;et.p=2;var A=jr;jr|=4;try{gu(o,h.alternate,h)}finally{jr=A,et.p=x,xe.T=m}}ka=3}}function Dg(){if(ka===4||ka===3){ka=0,kt();var o=ms,h=yh,m=xu,x=$p;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?ka=5:(ka=0,yh=ms=null,w_(o,o.pendingLanes));var A=o.pendingLanes;if(A===0&&(bu=null),Ye(m),h=h.stateNode,dr&&typeof dr.onCommitFiberRoot=="function")try{dr.onCommitFiberRoot(or,h,void 0,(h.current.flags&128)===128)}catch{}if(x!==null){h=xe.T,A=et.p,et.p=2,xe.T=null;try{for(var z=o.onRecoverableError,K=0;K<x.length;K++){var se=x[K];z(se.value,{componentStack:se.stack})}}finally{xe.T=h,et.p=A}}(xu&3)!==0&&Zp(),gs(o),A=o.pendingLanes,(m&4194090)!==0&&(A&42)!==0?o===Vp?xd++:(xd=0,Vp=o):xd=0,xh(0)}}function w_(o,h){(o.pooledCacheLanes&=h)===0&&(h=o.pooledCache,h!=null&&(o.pooledCache=null,ou(h)))}function Zp(o){return Gp(),x_(),Dg(),S_()}function S_(){if(ka!==5)return!1;var o=ms,h=Fp;Fp=0;var m=Ye(xu),x=xe.T,A=et.p;try{et.p=32>m?32:m,xe.T=null,m=Oi,Oi=null;var z=ms,K=xu;if(ka=0,yh=ms=null,xu=0,(jr&6)!==0)throw Error(a(331));var se=jr;if(jr|=4,y_(z.current),Mg(z,z.current,K,m),jr=se,xh(0,!1),dr&&typeof dr.onPostCommitFiberRoot=="function")try{dr.onPostCommitFiberRoot(or,z)}catch{}return!0}finally{et.p=A,xe.T=x,w_(o,h)}}function C_(o,h,m){h=Pa(m,h),h=dg(o.stateNode,h,2),o=Bo(o,h,2),o!==null&&(rt(o,2),gs(o))}function ni(o,h,m){if(o.tag===3)C_(o,o,m);else for(;h!==null;){if(h.tag===3){C_(h,o,m);break}else if(h.tag===1){var x=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof x.componentDidCatch=="function"&&(bu===null||!bu.has(x))){o=Pa(m,o),m=ff(2),x=Bo(h,m,2),x!==null&&(dd(m,x,h,o),rt(x,2),gs(x));break}}h=h.return}}function Xp(o,h,m){var x=o.pingCache;if(x===null){x=o.pingCache=new rb;var A=new Set;x.set(h,A)}else A=x.get(h),A===void 0&&(A=new Set,x.set(h,A));A.has(m)||(Pg=!0,A.add(m),o=T_.bind(null,o,h,m),h.then(o,o))}function T_(o,h,m){var x=o.pingCache;x!==null&&x.delete(h),o.pingedLanes|=o.suspendedLanes&m,o.warmLanes&=~m,kr===o&&(yr&m)===m&&(Si===4||Si===3&&(yr&62914560)===yr&&300>Qt()-Og?(jr&2)===0&&_h(o,0):Np|=m,vc===yr&&(vc=0)),gs(o)}function Ef(o,h){h===0&&(h=Ne()),o=nc(o,h),o!==null&&(rt(o,h),gs(o))}function Tl(o){var h=o.memoizedState,m=0;h!==null&&(m=h.retryLane),Ef(o,m)}function Su(o,h){var m=0;switch(o.tag){case 13:var x=o.stateNode,A=o.memoizedState;A!==null&&(m=A.retryLane);break;case 19:x=o.stateNode;break;case 22:x=o.stateNode._retryCache;break;default:throw Error(a(314))}x!==null&&x.delete(h),Ef(o,m)}function E_(o,h){return $t(o,h)}var Mf=null,Af=null,Lg=!1,vh=!1,Td=!1,bh=0;function gs(o){o!==Af&&o.next===null&&(Af===null?Mf=Af=o:Af=Af.next=o),vh=!0,Lg||(Lg=!0,Yp())}function xh(o,h){if(!Td&&vh){Td=!0;do for(var m=!1,x=Mf;x!==null;){if(o!==0){var A=x.pendingLanes;if(A===0)var z=0;else{var K=x.suspendedLanes,se=x.pingedLanes;z=(1<<31-Gn(42|o)+1)-1,z&=A&~(K&~se),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(m=!0,jg(x,z))}else z=yr,z=te(x,x===kr?z:0,x.cancelPendingCommit!==null||x.timeoutHandle!==-1),(z&3)===0||ie(x,z)||(m=!0,jg(x,z));x=x.next}while(m);Td=!1}}function Pf(){Bg()}function Bg(){vh=Lg=!1;var o=0;bh!==0&&(cb()&&(o=bh),bh=0);for(var h=Qt(),m=null,x=Mf;x!==null;){var A=x.next,z=Ng(x,h);z===0?(x.next=null,m===null?Mf=A:m.next=A,A===null&&(Af=m)):(m=x,(o!==0||(z&3)!==0)&&(vh=!0)),x=A}xh(o)}function Ng(o,h){for(var m=o.suspendedLanes,x=o.pingedLanes,A=o.expirationTimes,z=o.pendingLanes&-62914561;0<z;){var K=31-Gn(z),se=1<<K,Be=A[K];Be===-1?((se&m)===0||(se&x)!==0)&&(A[K]=de(se,h)):Be<=h&&(o.expiredLanes|=se),z&=~se}if(h=kr,m=yr,m=te(o,o===h?m:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x=o.callbackNode,m===0||o===h&&(Fr===2||Fr===9)||o.cancelPendingCommit!==null)return x!==null&&x!==null&&Kt(x),o.callbackNode=null,o.callbackPriority=0;if((m&3)===0||ie(o,m)){if(h=m&-m,h===o.callbackPriority)return h;switch(x!==null&&Kt(x),Ye(m)){case 2:case 8:m=bn;break;case 32:m=gn;break;case 268435456:m=Ln;break;default:m=gn}return x=Wp.bind(null,o),m=$t(m,x),o.callbackPriority=h,o.callbackNode=m,h}return x!==null&&x!==null&&Kt(x),o.callbackPriority=2,o.callbackNode=null,2}function Wp(o,h){if(ka!==0&&ka!==5)return o.callbackNode=null,o.callbackPriority=0,null;var m=o.callbackNode;if(Zp()&&o.callbackNode!==m)return null;var x=yr;return x=te(o,o===kr?x:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),x===0?null:(v_(o,x,h),Ng(o,Qt()),o.callbackNode!=null&&o.callbackNode===m?Wp.bind(null,o):null)}function jg(o,h){if(Zp())return null;v_(o,h,!0)}function Yp(){z_(function(){(jr&6)!==0?$t(Sn,Pf):Bg()})}function Kp(){return bh===0&&(bh=Ce()),bh}function M_(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:al(""+o)}function A_(o,h){var m=h.ownerDocument.createElement("input");return m.name=h.name,m.value=h.value,o.id&&m.setAttribute("form",o.id),h.parentNode.insertBefore(m,h),o=new FormData(o),m.parentNode.removeChild(m),o}function P_(o,h,m,x,A){if(h==="submit"&&m&&m.stateNode===A){var z=M_((A[It]||null).action),K=x.submitter;K&&(h=(h=K[It]||null)?M_(h.formAction):K.getAttribute("formAction"),h!==null&&(z=h,K=null));var se=new Hc("action","action",null,x,A);o.push({event:se,listeners:[{instance:null,listener:function(){if(x.defaultPrevented){if(bh!==0){var Be=K?A_(A,K):new FormData(A);us(m,{pending:!0,data:Be,method:A.method,action:z},null,Be)}}else typeof z=="function"&&(se.preventDefault(),Be=K?A_(A,K):new FormData(A),us(m,{pending:!0,data:Be,method:A.method,action:z},z,Be))},currentTarget:A}]})}}for(var Fg=0;Fg<Qh.length;Fg++){var $g=Qh[Fg],sb=$g.toLowerCase(),lb=$g[0].toUpperCase()+$g.slice(1);Ka(sb,"on"+lb)}Ka(Ku,"onAnimationEnd"),Ka(Qu,"onAnimationIteration"),Ka(Yh,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(ec,"onTransitionRun"),Ka(Kh,"onTransitionStart"),Ka(eu,"onTransitionCancel"),Ka(Ya,"onTransitionEnd"),Xn("onMouseEnter",["mouseout","mouseover"]),Xn("onMouseLeave",["mouseout","mouseover"]),Xn("onPointerEnter",["pointerout","pointerover"]),Xn("onPointerLeave",["pointerout","pointerover"]),Wn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Wn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Wn("onBeforeInput",["compositionend","keypress","textInput","paste"]),Wn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Wn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ed="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Vg=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ed));function wc(o,h){h=(h&4)!==0;for(var m=0;m<o.length;m++){var x=o[m],A=x.event;x=x.listeners;e:{var z=void 0;if(h)for(var K=x.length-1;0<=K;K--){var se=x[K],Be=se.instance,lt=se.currentTarget;if(se=se.listener,Be!==z&&A.isPropagationStopped())break e;z=se,A.currentTarget=lt;try{z(A)}catch(zt){hf(zt)}A.currentTarget=null,z=Be}else for(K=0;K<x.length;K++){if(se=x[K],Be=se.instance,lt=se.currentTarget,se=se.listener,Be!==z&&A.isPropagationStopped())break e;z=se,A.currentTarget=lt;try{z(A)}catch(zt){hf(zt)}A.currentTarget=null,z=Be}}}}function ar(o,h){var m=h[dn];m===void 0&&(m=h[dn]=new Set);var x=o+"__bubble";m.has(x)||(Ug(h,o,2,!1),m.add(x))}function Qp(o,h,m){var x=0;h&&(x|=4),Ug(m,o,x,h)}var Md="_reactListening"+Math.random().toString(36).slice(2);function Jp(o){if(!o[Md]){o[Md]=!0,xr.forEach(function(m){m!=="selectionchange"&&(Vg.has(m)||Qp(m,!1,o),Qp(m,!0,o))});var h=o.nodeType===9?o:o.ownerDocument;h===null||h[Md]||(h[Md]=!0,Qp("selectionchange",!1,h))}}function Ug(o,h,m,x){switch(hn(h)){case 2:var A=jt;break;case 8:A=Zt;break;default:A=Et}m=A.bind(null,h,m,o),A=void 0,!Aa||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(A=!0),x?A!==void 0?o.addEventListener(h,m,{capture:!0,passive:A}):o.addEventListener(h,m,!0):A!==void 0?o.addEventListener(h,m,{passive:A}):o.addEventListener(h,m,!1)}function Ad(o,h,m,x,A){var z=x;if((h&1)===0&&(h&2)===0&&x!==null)e:for(;;){if(x===null)return;var K=x.tag;if(K===3||K===4){var se=x.stateNode.containerInfo;if(se===A)break;if(K===4)for(K=x.return;K!==null;){var Be=K.tag;if((Be===3||Be===4)&&K.stateNode.containerInfo===A)return;K=K.return}for(;se!==null;){if(K=an(se),K===null)return;if(Be=K.tag,Be===5||Be===6||Be===26||Be===27){x=z=K;continue e}se=se.parentNode}}x=x.return}Br(function(){var lt=z,zt=ol(m),Bt=[];e:{var yt=id.get(o);if(yt!==void 0){var bt=Hc,Nn=o;switch(o){case"keypress":if(Rn(m)===0)break e;case"keydown":case"keyup":bt=Kl;break;case"focusin":Nn="focus",bt=Xl;break;case"focusout":Nn="blur",bt=Xl;break;case"beforeblur":case"afterblur":bt=Xl;break;case"click":if(m.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":bt=qc;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":bt=Gi;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":bt=ig;break;case Ku:case Qu:case Yh:bt=Zi;break;case Ya:bt=og;break;case"scroll":case"scrollend":bt=qu;break;case"wheel":bt=Gc;break;case"copy":case"cut":case"paste":bt=jh;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":bt=cp;break;case"toggle":case"beforetoggle":bt=Uh}var In=(h&4)!==0,Zr=!In&&(o==="scroll"||o==="scrollend"),nt=In?yt!==null?yt+"Capture":null:yt;In=[];for(var Ze=lt,st;Ze!==null;){var Ft=Ze;if(st=Ft.stateNode,Ft=Ft.tag,Ft!==5&&Ft!==26&&Ft!==27||st===null||nt===null||(Ft=Wo(Ze,nt),Ft!=null&&In.push(Rf(Ze,Ft,st))),Zr)break;Ze=Ze.return}0<In.length&&(yt=new bt(yt,Nn,null,m,zt),Bt.push({event:yt,listeners:In}))}}if((h&7)===0){e:{if(yt=o==="mouseover"||o==="pointerover",bt=o==="mouseout"||o==="pointerout",yt&&m!==$l&&(Nn=m.relatedTarget||m.fromElement)&&(an(Nn)||Nn[qe]))break e;if((bt||yt)&&(yt=zt.window===zt?zt:(yt=zt.ownerDocument)?yt.defaultView||yt.parentWindow:window,bt?(Nn=m.relatedTarget||m.toElement,bt=lt,Nn=Nn?an(Nn):null,Nn!==null&&(Zr=v(Nn),In=Nn.tag,Nn!==Zr||In!==5&&In!==27&&In!==6)&&(Nn=null)):(bt=null,Nn=lt),bt!==Nn)){if(In=qc,Ft="onMouseLeave",nt="onMouseEnter",Ze="mouse",(o==="pointerout"||o==="pointerover")&&(In=cp,Ft="onPointerLeave",nt="onPointerEnter",Ze="pointer"),Zr=bt==null?yt:pn(bt),st=Nn==null?yt:pn(Nn),yt=new In(Ft,Ze+"leave",bt,m,zt),yt.target=Zr,yt.relatedTarget=st,Ft=null,an(zt)===lt&&(In=new In(nt,Ze+"enter",Nn,m,zt),In.target=st,In.relatedTarget=Zr,Ft=In),Zr=Ft,bt&&Nn)t:{for(In=bt,nt=Nn,Ze=0,st=In;st;st=wh(st))Ze++;for(st=0,Ft=nt;Ft;Ft=wh(Ft))st++;for(;0<Ze-st;)In=wh(In),Ze--;for(;0<st-Ze;)nt=wh(nt),st--;for(;Ze--;){if(In===nt||nt!==null&&In===nt.alternate)break t;In=wh(In),nt=wh(nt)}In=null}else In=null;bt!==null&&em(Bt,yt,bt,In,!1),Nn!==null&&Zr!==null&&em(Bt,Zr,Nn,In,!0)}}e:{if(yt=lt?pn(lt):window,bt=yt.nodeName&&yt.nodeName.toLowerCase(),bt==="select"||bt==="input"&&yt.type==="file")var vn=Ss;else if(Wf(yt))if(Yf)vn=gp;else{vn=Qf;var jn=lg}else bt=yt.nodeName,!bt||bt.toLowerCase()!=="input"||yt.type!=="checkbox"&&yt.type!=="radio"?lt&&Ji(lt.elementType)&&(vn=Ss):vn=mp;if(vn&&(vn=vn(o,lt))){Yc(Bt,vn,m,zt);break e}jn&&jn(o,yt,lt),o==="focusout"&&lt&&yt.type==="number"&&lt.memoizedProps.value!=null&&po(yt,"number",yt.value)}switch(jn=lt?pn(lt):window,o){case"focusin":(Wf(jn)||jn.contentEditable==="true")&&(vo=jn,Wu=lt,Yu=null);break;case"focusout":Yu=Wu=vo=null;break;case"mousedown":td=!0;break;case"contextmenu":case"mouseup":case"dragend":td=!1,yp(Bt,m,zt);break;case"selectionchange":if(ed)break;case"keydown":case"keyup":yp(Bt,m,zt)}var Tn;if(yo)e:{switch(o){case"compositionstart":var kn="onCompositionStart";break e;case"compositionend":kn="onCompositionEnd";break e;case"compositionupdate":kn="onCompositionUpdate";break e}kn=void 0}else _o?Zu(o,m)&&(kn="onCompositionEnd"):o==="keydown"&&m.keyCode===229&&(kn="onCompositionStart");kn&&(Xc&&m.locale!=="ko"&&(_o||kn!=="onCompositionStart"?kn==="onCompositionEnd"&&_o&&(Tn=Yn()):(mo=zt,wr="value"in mo?mo.value:mo.textContent,_o=!0)),jn=Cu(lt,kn),0<jn.length&&(kn=new lp(kn,o,null,m,zt),Bt.push({event:kn,listeners:jn}),Tn?kn.data=Tn:(Tn=Xf(m),Tn!==null&&(kn.data=Tn)))),(Tn=Zf?hp(o,m):fp(o,m))&&(kn=Cu(lt,"onBeforeInput"),0<kn.length&&(jn=new lp("onBeforeInput","beforeinput",null,m,zt),Bt.push({event:jn,listeners:kn}),jn.data=Tn)),P_(Bt,o,lt,m,zt)}wc(Bt,h)})}function Rf(o,h,m){return{instance:o,listener:h,currentTarget:m}}function Cu(o,h){for(var m=h+"Capture",x=[];o!==null;){var A=o,z=A.stateNode;if(A=A.tag,A!==5&&A!==26&&A!==27||z===null||(A=Wo(o,m),A!=null&&x.unshift(Rf(o,A,z)),A=Wo(o,h),A!=null&&x.push(Rf(o,A,z))),o.tag===3)return x;o=o.return}return[]}function wh(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function em(o,h,m,x,A){for(var z=h._reactName,K=[];m!==null&&m!==x;){var se=m,Be=se.alternate,lt=se.stateNode;if(se=se.tag,Be!==null&&Be===x)break;se!==5&&se!==26&&se!==27||lt===null||(Be=lt,A?(lt=Wo(m,z),lt!=null&&K.unshift(Rf(m,lt,Be))):A||(lt=Wo(m,z),lt!=null&&K.push(Rf(m,lt,Be)))),m=m.return}K.length!==0&&o.push({event:h,listeners:K})}var R_=/\r\n?/g,Uo=/\u0000|\uFFFD/g;function Sh(o){return(typeof o=="string"?o:""+o).replace(R_,`
`).replace(Uo,"")}function Hg(o,h){return h=Sh(h),Sh(o)===h}function Pd(){}function $r(o,h,m,x,A,z){switch(m){case"children":typeof x=="string"?h==="body"||h==="textarea"&&x===""||il(o,x):(typeof x=="number"||typeof x=="bigint")&&h!=="body"&&il(o,""+x);break;case"className":Rr(o,"class",x);break;case"tabIndex":Rr(o,"tabindex",x);break;case"dir":case"role":case"viewBox":case"width":case"height":Rr(o,m,x);break;case"style":jl(o,x,z);break;case"data":if(h!=="object"){Rr(o,"data",x);break}case"src":case"href":if(x===""&&(h!=="a"||m!=="href")){o.removeAttribute(m);break}if(x==null||typeof x=="function"||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=al(""+x),o.setAttribute(m,x);break;case"action":case"formAction":if(typeof x=="function"){o.setAttribute(m,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(m==="formAction"?(h!=="input"&&$r(o,h,"name",A.name,A,null),$r(o,h,"formEncType",A.formEncType,A,null),$r(o,h,"formMethod",A.formMethod,A,null),$r(o,h,"formTarget",A.formTarget,A,null)):($r(o,h,"encType",A.encType,A,null),$r(o,h,"method",A.method,A,null),$r(o,h,"target",A.target,A,null)));if(x==null||typeof x=="symbol"||typeof x=="boolean"){o.removeAttribute(m);break}x=al(""+x),o.setAttribute(m,x);break;case"onClick":x!=null&&(o.onclick=Pd);break;case"onScroll":x!=null&&ar("scroll",o);break;case"onScrollEnd":x!=null&&ar("scrollend",o);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(a(61));if(m=x.__html,m!=null){if(A.children!=null)throw Error(a(60));o.innerHTML=m}}break;case"multiple":o.multiple=x&&typeof x!="function"&&typeof x!="symbol";break;case"muted":o.muted=x&&typeof x!="function"&&typeof x!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(x==null||typeof x=="function"||typeof x=="boolean"||typeof x=="symbol"){o.removeAttribute("xlink:href");break}m=al(""+x),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",m);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""+x):o.removeAttribute(m);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":x&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,""):o.removeAttribute(m);break;case"capture":case"download":x===!0?o.setAttribute(m,""):x!==!1&&x!=null&&typeof x!="function"&&typeof x!="symbol"?o.setAttribute(m,x):o.removeAttribute(m);break;case"cols":case"rows":case"size":case"span":x!=null&&typeof x!="function"&&typeof x!="symbol"&&!isNaN(x)&&1<=x?o.setAttribute(m,x):o.removeAttribute(m);break;case"rowSpan":case"start":x==null||typeof x=="function"||typeof x=="symbol"||isNaN(x)?o.removeAttribute(m):o.setAttribute(m,x);break;case"popover":ar("beforetoggle",o),ar("toggle",o),Dn(o,"popover",x);break;case"xlinkActuate":Yr(o,"http://www.w3.org/1999/xlink","xlink:actuate",x);break;case"xlinkArcrole":Yr(o,"http://www.w3.org/1999/xlink","xlink:arcrole",x);break;case"xlinkRole":Yr(o,"http://www.w3.org/1999/xlink","xlink:role",x);break;case"xlinkShow":Yr(o,"http://www.w3.org/1999/xlink","xlink:show",x);break;case"xlinkTitle":Yr(o,"http://www.w3.org/1999/xlink","xlink:title",x);break;case"xlinkType":Yr(o,"http://www.w3.org/1999/xlink","xlink:type",x);break;case"xmlBase":Yr(o,"http://www.w3.org/XML/1998/namespace","xml:base",x);break;case"xmlLang":Yr(o,"http://www.w3.org/XML/1998/namespace","xml:lang",x);break;case"xmlSpace":Yr(o,"http://www.w3.org/XML/1998/namespace","xml:space",x);break;case"is":Dn(o,"is",x);break;case"innerText":case"textContent":break;default:(!(2<m.length)||m[0]!=="o"&&m[0]!=="O"||m[1]!=="n"&&m[1]!=="N")&&(m=Fl.get(m)||m,Dn(o,m,x))}}function tm(o,h,m,x,A,z){switch(m){case"style":jl(o,x,z);break;case"dangerouslySetInnerHTML":if(x!=null){if(typeof x!="object"||!("__html"in x))throw Error(a(61));if(m=x.__html,m!=null){if(A.children!=null)throw Error(a(60));o.innerHTML=m}}break;case"children":typeof x=="string"?il(o,x):(typeof x=="number"||typeof x=="bigint")&&il(o,""+x);break;case"onScroll":x!=null&&ar("scroll",o);break;case"onScrollEnd":x!=null&&ar("scrollend",o);break;case"onClick":x!=null&&(o.onclick=Pd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!mi.hasOwnProperty(m))e:{if(m[0]==="o"&&m[1]==="n"&&(A=m.endsWith("Capture"),h=m.slice(2,A?m.length-7:void 0),z=o[It]||null,z=z!=null?z[m]:null,typeof z=="function"&&o.removeEventListener(h,z,A),typeof x=="function")){typeof z!="function"&&z!==null&&(m in o?o[m]=null:o.hasAttribute(m)&&o.removeAttribute(m)),o.addEventListener(h,x,A);break e}m in o?o[m]=x:x===!0?o.setAttribute(m,""):Dn(o,m,x)}}}function _a(o,h,m){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":ar("error",o),ar("load",o);var x=!1,A=!1,z;for(z in m)if(m.hasOwnProperty(z)){var K=m[z];if(K!=null)switch(z){case"src":x=!0;break;case"srcSet":A=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:$r(o,h,z,K,m,null)}}A&&$r(o,h,"srcSet",m.srcSet,m,null),x&&$r(o,h,"src",m.src,m,null);return;case"input":ar("invalid",o);var se=z=K=A=null,Be=null,lt=null;for(x in m)if(m.hasOwnProperty(x)){var zt=m[x];if(zt!=null)switch(x){case"name":A=zt;break;case"type":K=zt;break;case"checked":Be=zt;break;case"defaultChecked":lt=zt;break;case"value":z=zt;break;case"defaultValue":se=zt;break;case"children":case"dangerouslySetInnerHTML":if(zt!=null)throw Error(a(137,h));break;default:$r(o,h,x,zt,m,null)}}oa(o,z,se,Be,lt,K,A,!1),ho(o);return;case"select":ar("invalid",o),x=K=z=null;for(A in m)if(m.hasOwnProperty(A)&&(se=m[A],se!=null))switch(A){case"value":z=se;break;case"defaultValue":K=se;break;case"multiple":x=se;default:$r(o,h,A,se,m,null)}h=z,m=K,o.multiple=!!x,h!=null?Po(o,!!x,h,!1):m!=null&&Po(o,!!x,m,!0);return;case"textarea":ar("invalid",o),z=A=x=null;for(K in m)if(m.hasOwnProperty(K)&&(se=m[K],se!=null))switch(K){case"value":x=se;break;case"defaultValue":A=se;break;case"children":z=se;break;case"dangerouslySetInnerHTML":if(se!=null)throw Error(a(91));break;default:$r(o,h,K,se,m,null)}Uc(o,x,A,z),ho(o);return;case"option":for(Be in m)if(m.hasOwnProperty(Be)&&(x=m[Be],x!=null))switch(Be){case"selected":o.selected=x&&typeof x!="function"&&typeof x!="symbol";break;default:$r(o,h,Be,x,m,null)}return;case"dialog":ar("beforetoggle",o),ar("toggle",o),ar("cancel",o),ar("close",o);break;case"iframe":case"object":ar("load",o);break;case"video":case"audio":for(x=0;x<Ed.length;x++)ar(Ed[x],o);break;case"image":ar("error",o),ar("load",o);break;case"details":ar("toggle",o);break;case"embed":case"source":case"link":ar("error",o),ar("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(lt in m)if(m.hasOwnProperty(lt)&&(x=m[lt],x!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":throw Error(a(137,h));default:$r(o,h,lt,x,m,null)}return;default:if(Ji(h)){for(zt in m)m.hasOwnProperty(zt)&&(x=m[zt],x!==void 0&&tm(o,h,zt,x,m,void 0));return}}for(se in m)m.hasOwnProperty(se)&&(x=m[se],x!=null&&$r(o,h,se,x,m,null))}function O_(o,h,m,x){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var A=null,z=null,K=null,se=null,Be=null,lt=null,zt=null;for(bt in m){var Bt=m[bt];if(m.hasOwnProperty(bt)&&Bt!=null)switch(bt){case"checked":break;case"value":break;case"defaultValue":Be=Bt;default:x.hasOwnProperty(bt)||$r(o,h,bt,null,x,Bt)}}for(var yt in x){var bt=x[yt];if(Bt=m[yt],x.hasOwnProperty(yt)&&(bt!=null||Bt!=null))switch(yt){case"type":z=bt;break;case"name":A=bt;break;case"checked":lt=bt;break;case"defaultChecked":zt=bt;break;case"value":K=bt;break;case"defaultValue":se=bt;break;case"children":case"dangerouslySetInnerHTML":if(bt!=null)throw Error(a(137,h));break;default:bt!==Bt&&$r(o,h,yt,bt,x,Bt)}}Xo(o,K,se,Be,lt,zt,z,A);return;case"select":bt=K=se=yt=null;for(z in m)if(Be=m[z],m.hasOwnProperty(z)&&Be!=null)switch(z){case"value":break;case"multiple":bt=Be;default:x.hasOwnProperty(z)||$r(o,h,z,null,x,Be)}for(A in x)if(z=x[A],Be=m[A],x.hasOwnProperty(A)&&(z!=null||Be!=null))switch(A){case"value":yt=z;break;case"defaultValue":se=z;break;case"multiple":K=z;default:z!==Be&&$r(o,h,A,z,x,Be)}h=se,m=K,x=bt,yt!=null?Po(o,!!m,yt,!1):!!x!=!!m&&(h!=null?Po(o,!!m,h,!0):Po(o,!!m,m?[]:"",!1));return;case"textarea":bt=yt=null;for(se in m)if(A=m[se],m.hasOwnProperty(se)&&A!=null&&!x.hasOwnProperty(se))switch(se){case"value":break;case"children":break;default:$r(o,h,se,null,x,A)}for(K in x)if(A=x[K],z=m[K],x.hasOwnProperty(K)&&(A!=null||z!=null))switch(K){case"value":yt=A;break;case"defaultValue":bt=A;break;case"children":break;case"dangerouslySetInnerHTML":if(A!=null)throw Error(a(91));break;default:A!==z&&$r(o,h,K,A,x,z)}xs(o,yt,bt);return;case"option":for(var Nn in m)if(yt=m[Nn],m.hasOwnProperty(Nn)&&yt!=null&&!x.hasOwnProperty(Nn))switch(Nn){case"selected":o.selected=!1;break;default:$r(o,h,Nn,null,x,yt)}for(Be in x)if(yt=x[Be],bt=m[Be],x.hasOwnProperty(Be)&&yt!==bt&&(yt!=null||bt!=null))switch(Be){case"selected":o.selected=yt&&typeof yt!="function"&&typeof yt!="symbol";break;default:$r(o,h,Be,yt,x,bt)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var In in m)yt=m[In],m.hasOwnProperty(In)&&yt!=null&&!x.hasOwnProperty(In)&&$r(o,h,In,null,x,yt);for(lt in x)if(yt=x[lt],bt=m[lt],x.hasOwnProperty(lt)&&yt!==bt&&(yt!=null||bt!=null))switch(lt){case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(a(137,h));break;default:$r(o,h,lt,yt,x,bt)}return;default:if(Ji(h)){for(var Zr in m)yt=m[Zr],m.hasOwnProperty(Zr)&&yt!==void 0&&!x.hasOwnProperty(Zr)&&tm(o,h,Zr,void 0,x,yt);for(zt in x)yt=x[zt],bt=m[zt],!x.hasOwnProperty(zt)||yt===bt||yt===void 0&&bt===void 0||tm(o,h,zt,yt,x,bt);return}}for(var nt in m)yt=m[nt],m.hasOwnProperty(nt)&&yt!=null&&!x.hasOwnProperty(nt)&&$r(o,h,nt,null,x,yt);for(Bt in x)yt=x[Bt],bt=m[Bt],!x.hasOwnProperty(Bt)||yt===bt||yt==null&&bt==null||$r(o,h,Bt,yt,x,bt)}var qg=null,nm=null;function Gs(o){return o.nodeType===9?o:o.ownerDocument}function Gg(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Zg(o,h){if(o===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&h==="foreignObject"?0:o}function rm(o,h){return o==="textarea"||o==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var im=null;function cb(){var o=window.event;return o&&o.type==="popstate"?o===im?!1:(im=o,!0):(im=null,!1)}var I_=typeof setTimeout=="function"?setTimeout:void 0,k_=typeof clearTimeout=="function"?clearTimeout:void 0,Of=typeof Promise=="function"?Promise:void 0,z_=typeof queueMicrotask=="function"?queueMicrotask:typeof Of<"u"?function(o){return Of.resolve(null).then(o).catch(am)}:I_;function am(o){setTimeout(function(){throw o})}function Sc(o){return o==="head"}function Rd(o,h){var m=h,x=0,A=0;do{var z=m.nextSibling;if(o.removeChild(m),z&&z.nodeType===8)if(m=z.data,m==="/$"){if(0<x&&8>x){m=x;var K=o.ownerDocument;if(m&1&&kf(K.documentElement),m&2&&kf(K.body),m&4)for(m=K.head,kf(m),K=m.firstChild;K;){var se=K.nextSibling,Be=K.nodeName;K[at]||Be==="SCRIPT"||Be==="STYLE"||Be==="LINK"&&K.rel.toLowerCase()==="stylesheet"||m.removeChild(K),K=se}}if(A===0){o.removeChild(z),si(h);return}A--}else m==="$"||m==="$?"||m==="$!"?A++:x=m.charCodeAt(0)-48;else x=0;m=z}while(m);si(h)}function If(o){var h=o.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var m=h;switch(h=h.nextSibling,m.nodeName){case"HTML":case"HEAD":case"BODY":If(m),Ht(m);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(m.rel.toLowerCase()==="stylesheet")continue}o.removeChild(m)}}function om(o,h,m,x){for(;o.nodeType===1;){var A=m;if(o.nodeName.toLowerCase()!==h.toLowerCase()){if(!x&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(x){if(!o[at])switch(h){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(z=o.getAttribute("rel"),z==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(z!==A.rel||o.getAttribute("href")!==(A.href==null||A.href===""?null:A.href)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin)||o.getAttribute("title")!==(A.title==null?null:A.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(z=o.getAttribute("src"),(z!==(A.src==null?null:A.src)||o.getAttribute("type")!==(A.type==null?null:A.type)||o.getAttribute("crossorigin")!==(A.crossOrigin==null?null:A.crossOrigin))&&z&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(h==="input"&&o.type==="hidden"){var z=A.name==null?null:""+A.name;if(A.type==="hidden"&&o.getAttribute("name")===z)return o}else return o;if(o=Ha(o.nextSibling),o===null)break}return null}function ub(o,h,m){if(h==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!m||(o=Ha(o.nextSibling),o===null))return null;return o}function Xg(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState==="complete"}function hb(o,h){var m=o.ownerDocument;if(o.data!=="$?"||m.readyState==="complete")h();else{var x=function(){h(),m.removeEventListener("DOMContentLoaded",x)};m.addEventListener("DOMContentLoaded",x),o._reactRetry=x}}function Ha(o){for(;o!=null;o=o.nextSibling){var h=o.nodeType;if(h===1||h===3)break;if(h===8){if(h=o.data,h==="$"||h==="$!"||h==="$?"||h==="F!"||h==="F")break;if(h==="/$")return null}}return o}var Ki=null;function Cc(o){o=o.previousSibling;for(var h=0;o;){if(o.nodeType===8){var m=o.data;if(m==="$"||m==="$!"||m==="$?"){if(h===0)return o;h--}else m==="/$"&&h++}o=o.previousSibling}return null}function sm(o,h,m){switch(h=Gs(m),o){case"html":if(o=h.documentElement,!o)throw Error(a(452));return o;case"head":if(o=h.head,!o)throw Error(a(453));return o;case"body":if(o=h.body,!o)throw Error(a(454));return o;default:throw Error(a(451))}}function kf(o){for(var h=o.attributes;h.length;)o.removeAttributeNode(h[0]);Ht(o)}var Ho=new Map,lm=new Set;function cm(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var El=et.d;et.d={f:D_,r:fb,D:Wg,C:L_,L:Od,m:Yg,X:Kg,S:B_,M:hm};function D_(){var o=El.f(),h=ya();return o||h}function fb(o){var h=Cn(o);h!==null&&h.tag===5&&h.type==="form"?Ls(h):El.r(o)}var Ch=typeof document>"u"?null:document;function um(o,h,m){var x=Ch;if(x&&typeof h=="string"&&h){var A=ri(h);A='link[rel="'+o+'"][href="'+A+'"]',typeof m=="string"&&(A+='[crossorigin="'+m+'"]'),lm.has(A)||(lm.add(A),o={rel:o,crossOrigin:m,href:h},x.querySelector(A)===null&&(h=x.createElement("link"),_a(h,"link",o),tn(h),x.head.appendChild(h)))}}function Wg(o){El.D(o),um("dns-prefetch",o,null)}function L_(o,h){El.C(o,h),um("preconnect",o,h)}function Od(o,h,m){El.L(o,h,m);var x=Ch;if(x&&o&&h){var A='link[rel="preload"][as="'+ri(h)+'"]';h==="image"&&m&&m.imageSrcSet?(A+='[imagesrcset="'+ri(m.imageSrcSet)+'"]',typeof m.imageSizes=="string"&&(A+='[imagesizes="'+ri(m.imageSizes)+'"]')):A+='[href="'+ri(o)+'"]';var z=A;switch(h){case"style":z=Tu(o);break;case"script":z=c(o)}Ho.has(z)||(o=I({rel:"preload",href:h==="image"&&m&&m.imageSrcSet?void 0:o,as:h},m),Ho.set(z,o),x.querySelector(A)!==null||h==="style"&&x.querySelector(Th(z))||h==="script"&&x.querySelector(r(z))||(h=x.createElement("link"),_a(h,"link",o),tn(h),x.head.appendChild(h)))}}function Yg(o,h){El.m(o,h);var m=Ch;if(m&&o){var x=h&&typeof h.as=="string"?h.as:"script",A='link[rel="modulepreload"][as="'+ri(x)+'"][href="'+ri(o)+'"]',z=A;switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=c(o)}if(!Ho.has(z)&&(o=I({rel:"modulepreload",href:o},h),Ho.set(z,o),m.querySelector(A)===null)){switch(x){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(m.querySelector(r(z)))return}x=m.createElement("link"),_a(x,"link",o),tn(x),m.head.appendChild(x)}}}function B_(o,h,m){El.S(o,h,m);var x=Ch;if(x&&o){var A=Bn(x).hoistableStyles,z=Tu(o);h=h||"default";var K=A.get(z);if(!K){var se={loading:0,preload:null};if(K=x.querySelector(Th(z)))se.loading=5;else{o=I({rel:"stylesheet",href:o,"data-precedence":h},m),(m=Ho.get(z))&&_(o,m);var Be=K=x.createElement("link");tn(Be),_a(Be,"link",o),Be._p=new Promise(function(lt,zt){Be.onload=lt,Be.onerror=zt}),Be.addEventListener("load",function(){se.loading|=1}),Be.addEventListener("error",function(){se.loading|=2}),se.loading|=4,d(K,h,x)}K={type:"stylesheet",instance:K,count:1,state:se},A.set(z,K)}}}function Kg(o,h){El.X(o,h);var m=Ch;if(m&&o){var x=Bn(m).hoistableScripts,A=c(o),z=x.get(A);z||(z=m.querySelector(r(A)),z||(o=I({src:o,async:!0},h),(h=Ho.get(A))&&S(o,h),z=m.createElement("script"),tn(z),_a(z,"link",o),m.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},x.set(A,z))}}function hm(o,h){El.M(o,h);var m=Ch;if(m&&o){var x=Bn(m).hoistableScripts,A=c(o),z=x.get(A);z||(z=m.querySelector(r(A)),z||(o=I({src:o,async:!0,type:"module"},h),(h=Ho.get(A))&&S(o,h),z=m.createElement("script"),tn(z),_a(z,"link",o),m.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},x.set(A,z))}}function zf(o,h,m,x){var A=(A=qt.current)?cm(A):null;if(!A)throw Error(a(446));switch(o){case"meta":case"title":return null;case"style":return typeof m.precedence=="string"&&typeof m.href=="string"?(h=Tu(m.href),m=Bn(A).hoistableStyles,x=m.get(h),x||(x={type:"style",instance:null,count:0,state:null},m.set(h,x)),x):{type:"void",instance:null,count:0,state:null};case"link":if(m.rel==="stylesheet"&&typeof m.href=="string"&&typeof m.precedence=="string"){o=Tu(m.href);var z=Bn(A).hoistableStyles,K=z.get(o);if(K||(A=A.ownerDocument||A,K={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(o,K),(z=A.querySelector(Th(o)))&&!z._p&&(K.instance=z,K.state.loading=5),Ho.has(o)||(m={rel:"preload",as:"style",href:m.href,crossOrigin:m.crossOrigin,integrity:m.integrity,media:m.media,hrefLang:m.hrefLang,referrerPolicy:m.referrerPolicy},Ho.set(o,m),z||db(A,o,m,K.state))),h&&x===null)throw Error(a(528,""));return K}if(h&&x!==null)throw Error(a(529,""));return null;case"script":return h=m.async,m=m.src,typeof m=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=c(m),m=Bn(A).hoistableScripts,x=m.get(h),x||(x={type:"script",instance:null,count:0,state:null},m.set(h,x)),x):{type:"void",instance:null,count:0,state:null};default:throw Error(a(444,o))}}function Tu(o){return'href="'+ri(o)+'"'}function Th(o){return'link[rel="stylesheet"]['+o+"]"}function fm(o){return I({},o,{"data-precedence":o.precedence,precedence:null})}function db(o,h,m,x){o.querySelector('link[rel="preload"][as="style"]['+h+"]")?x.loading=1:(h=o.createElement("link"),x.preload=h,h.addEventListener("load",function(){return x.loading|=1}),h.addEventListener("error",function(){return x.loading|=2}),_a(h,"link",m),tn(h),o.head.appendChild(h))}function c(o){return'[src="'+ri(o)+'"]'}function r(o){return"script[async]"+o}function l(o,h,m){if(h.count++,h.instance===null)switch(h.type){case"style":var x=o.querySelector('style[data-href~="'+ri(m.href)+'"]');if(x)return h.instance=x,tn(x),x;var A=I({},m,{"data-href":m.href,"data-precedence":m.precedence,href:null,precedence:null});return x=(o.ownerDocument||o).createElement("style"),tn(x),_a(x,"style",A),d(x,m.precedence,o),h.instance=x;case"stylesheet":A=Tu(m.href);var z=o.querySelector(Th(A));if(z)return h.state.loading|=4,h.instance=z,tn(z),z;x=fm(m),(A=Ho.get(A))&&_(x,A),z=(o.ownerDocument||o).createElement("link"),tn(z);var K=z;return K._p=new Promise(function(se,Be){K.onload=se,K.onerror=Be}),_a(z,"link",x),h.state.loading|=4,d(z,m.precedence,o),h.instance=z;case"script":return z=c(m.src),(A=o.querySelector(r(z)))?(h.instance=A,tn(A),A):(x=m,(A=Ho.get(z))&&(x=I({},m),S(x,A)),o=o.ownerDocument||o,A=o.createElement("script"),tn(A),_a(A,"link",x),o.head.appendChild(A),h.instance=A);case"void":return null;default:throw Error(a(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(x=h.instance,h.state.loading|=4,d(x,m.precedence,o));return h.instance}function d(o,h,m){for(var x=m.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),A=x.length?x[x.length-1]:null,z=A,K=0;K<x.length;K++){var se=x[K];if(se.dataset.precedence===h)z=se;else if(z!==A)break}z?z.parentNode.insertBefore(o,z.nextSibling):(h=m.nodeType===9?m.head:m,h.insertBefore(o,h.firstChild))}function _(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.title==null&&(o.title=h.title)}function S(o,h){o.crossOrigin==null&&(o.crossOrigin=h.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=h.referrerPolicy),o.integrity==null&&(o.integrity=h.integrity)}var C=null;function M(o,h,m){if(C===null){var x=new Map,A=C=new Map;A.set(m,x)}else A=C,x=A.get(m),x||(x=new Map,A.set(m,x));if(x.has(o))return x;for(x.set(o,null),m=m.getElementsByTagName(o),A=0;A<m.length;A++){var z=m[A];if(!(z[at]||z[Xt]||o==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var K=z.getAttribute(h)||"";K=o+K;var se=x.get(K);se?se.push(z):x.set(K,[z])}}return x}function O(o,h,m){o=o.ownerDocument||o,o.head.insertBefore(m,h==="title"?o.querySelector("head > title"):null)}function D(o,h,m){if(m===1||h.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return o=h.disabled,typeof h.precedence=="string"&&o==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function N(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}var V=null;function Z(){}function Y(o,h,m){if(V===null)throw Error(a(475));var x=V;if(h.type==="stylesheet"&&(typeof m.media!="string"||matchMedia(m.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var A=Tu(m.href),z=o.querySelector(Th(A));if(z){o=z._p,o!==null&&typeof o=="object"&&typeof o.then=="function"&&(x.count++,x=re.bind(x),o.then(x,x)),h.state.loading|=4,h.instance=z,tn(z);return}z=o.ownerDocument||o,m=fm(m),(A=Ho.get(A))&&_(m,A),z=z.createElement("link"),tn(z);var K=z;K._p=new Promise(function(se,Be){K.onload=se,K.onerror=Be}),_a(z,"link",m),h.instance=z}x.stylesheets===null&&(x.stylesheets=new Map),x.stylesheets.set(h,o),(o=h.state.preload)&&(h.state.loading&3)===0&&(x.count++,h=re.bind(x),o.addEventListener("load",h),o.addEventListener("error",h))}}function Q(){if(V===null)throw Error(a(475));var o=V;return o.stylesheets&&o.count===0&&be(o,o.stylesheets),0<o.count?function(h){var m=setTimeout(function(){if(o.stylesheets&&be(o,o.stylesheets),o.unsuspend){var x=o.unsuspend;o.unsuspend=null,x()}},6e4);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(m)}}:null}function re(){if(this.count--,this.count===0){if(this.stylesheets)be(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var fe=null;function be(o,h){o.stylesheets=null,o.unsuspend!==null&&(o.count++,fe=new Map,h.forEach($e,o),fe=null,re.call(o))}function $e(o,h){if(!(h.state.loading&4)){var m=fe.get(o);if(m)var x=m.get(null);else{m=new Map,fe.set(o,m);for(var A=o.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<A.length;z++){var K=A[z];(K.nodeName==="LINK"||K.getAttribute("media")!=="not all")&&(m.set(K.dataset.precedence,K),x=K)}x&&m.set(null,x)}A=h.instance,K=A.getAttribute("data-precedence"),z=m.get(K)||x,z===x&&m.set(null,A),m.set(K,A),this.count++,x=re.bind(this),A.addEventListener("load",x),A.addEventListener("error",x),z?z.parentNode.insertBefore(A,z.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(A,o.firstChild)),h.state.loading|=4}}var Te={$$typeof:pe,Provider:null,Consumer:null,_currentValue:Qe,_currentValue2:Qe,_threadCount:0};function W(o,h,m,x,A,z,K,se){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ce(0),this.hiddenUpdates=ce(null),this.identifierPrefix=x,this.onUncaughtError=A,this.onCaughtError=z,this.onRecoverableError=K,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=se,this.incompleteTransitions=new Map}function ue(o,h,m,x,A,z,K,se,Be,lt,zt,Bt){return o=new W(o,h,m,K,se,Be,lt,Bt),h=1,z===!0&&(h|=24),z=Oa(3,null,null,h),o.current=z,z.stateNode=o,h=pl(),h.refCount++,o.pooledCache=h,h.refCount++,z.memoizedState={element:x,isDehydrated:m,cache:h},sf(z),o}function Oe(o){return o?(o=Ts,o):Ts}function ot(o,h,m,x,A,z){A=Oe(A),x.context===null?x.context=A:x.pendingContext=A,x=os(h),x.payload={element:m},z=z===void 0?null:z,z!==null&&(x.callback=z),m=Bo(o,x,h),m!==null&&(Vo(m,o,h),Is(m,o,h))}function Lt(o,h){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var m=o.retryLane;o.retryLane=m!==0&&m<h?m:h}}function ht(o,h){Lt(o,h),(o=o.alternate)&&Lt(o,h)}function wt(o){if(o.tag===13){var h=nc(o,67108864);h!==null&&Vo(h,o,67108864),ht(o,67108864)}}var Ut=!0;function jt(o,h,m,x){var A=xe.T;xe.T=null;var z=et.p;try{et.p=2,Et(o,h,m,x)}finally{et.p=z,xe.T=A}}function Zt(o,h,m,x){var A=xe.T;xe.T=null;var z=et.p;try{et.p=8,Et(o,h,m,x)}finally{et.p=z,xe.T=A}}function Et(o,h,m,x){if(Ut){var A=on(x);if(A===null)Ad(o,h,x,_n,m),Vi(o,x);else if(ra(A,o,h,m,x))x.stopPropagation();else if(Vi(o,x),h&4&&-1<oi.indexOf(o)){for(;A!==null;){var z=Cn(A);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var K=Ge(z.pendingLanes);if(K!==0){var se=z;for(se.pendingLanes|=2,se.entangledLanes|=2;K;){var Be=1<<31-Gn(K);se.entanglements[1]|=Be,K&=~Be}gs(z),(jr&6)===0&&(jp=Qt()+500,xh(0))}}break;case 13:se=nc(z,2),se!==null&&Vo(se,z,2),ya(),ht(z,2)}if(z=on(x),z===null&&Ad(o,h,x,_n,m),z===A)break;A=z}A!==null&&x.stopPropagation()}else Ad(o,h,x,null,m)}}function on(o){return o=ol(o),yn(o)}var _n=null;function yn(o){if(_n=null,o=an(o),o!==null){var h=v(o);if(h===null)o=null;else{var m=h.tag;if(m===13){if(o=g(h),o!==null)return o;o=null}else if(m===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;o=null}else h!==o&&(o=null)}}return _n=o,null}function hn(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ln()){case Sn:return 2;case bn:return 8;case gn:case En:return 32;case Ln:return 268435456;default:return 32}default:return 32}}var Zn=!1,Tr=null,Gr=null,pi=null,za=new Map,na=new Map,ai=[],oi="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Vi(o,h){switch(o){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Gr=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":za.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":na.delete(h.pointerId)}}function Ii(o,h,m,x,A,z){return o===null||o.nativeEvent!==z?(o={blockedOn:h,domEventName:m,eventSystemFlags:x,nativeEvent:z,targetContainers:[A]},h!==null&&(h=Cn(h),h!==null&&wt(h)),o):(o.eventSystemFlags|=x,h=o.targetContainers,A!==null&&h.indexOf(A)===-1&&h.push(A),o)}function ra(o,h,m,x,A){switch(h){case"focusin":return Tr=Ii(Tr,o,h,m,x,A),!0;case"dragenter":return Gr=Ii(Gr,o,h,m,x,A),!0;case"mouseover":return pi=Ii(pi,o,h,m,x,A),!0;case"pointerover":var z=A.pointerId;return za.set(z,Ii(za.get(z)||null,o,h,m,x,A)),!0;case"gotpointercapture":return z=A.pointerId,na.set(z,Ii(na.get(z)||null,o,h,m,x,A)),!0}return!1}function Da(o){var h=an(o.target);if(h!==null){var m=v(h);if(m!==null){if(h=m.tag,h===13){if(h=g(m),h!==null){o.blockedOn=h,Mt(o.priority,function(){if(m.tag===13){var x=so();x=Me(x);var A=nc(m,x);A!==null&&Vo(A,m,x),ht(m,x)}});return}}else if(h===3&&m.stateNode.current.memoizedState.isDehydrated){o.blockedOn=m.tag===3?m.stateNode.containerInfo:null;return}}}o.blockedOn=null}function qa(o){if(o.blockedOn!==null)return!1;for(var h=o.targetContainers;0<h.length;){var m=on(o.nativeEvent);if(m===null){m=o.nativeEvent;var x=new m.constructor(m.type,m);$l=x,m.target.dispatchEvent(x),$l=null}else return h=Cn(m),h!==null&&wt(h),o.blockedOn=m,!1;h.shift()}return!0}function Ui(o,h,m){qa(o)&&m.delete(h)}function lo(){Zn=!1,Tr!==null&&qa(Tr)&&(Tr=null),Gr!==null&&qa(Gr)&&(Gr=null),pi!==null&&qa(pi)&&(pi=null),za.forEach(Ui),na.forEach(Ui)}function Ci(o,h){o.blockedOn===h&&(o.blockedOn=null,Zn||(Zn=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,lo)))}var ki=null;function Hi(o){ki!==o&&(ki=o,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ki===o&&(ki=null);for(var h=0;h<o.length;h+=3){var m=o[h],x=o[h+1],A=o[h+2];if(typeof x!="function"){if(yn(x||m)===null)continue;break}var z=Cn(m);z!==null&&(o.splice(h,3),h-=3,us(z,{pending:!0,data:A,method:m.method,action:x},x,A))}}))}function si(o){function h(Be){return Ci(Be,o)}Tr!==null&&Ci(Tr,o),Gr!==null&&Ci(Gr,o),pi!==null&&Ci(pi,o),za.forEach(h),na.forEach(h);for(var m=0;m<ai.length;m++){var x=ai[m];x.blockedOn===o&&(x.blockedOn=null)}for(;0<ai.length&&(m=ai[0],m.blockedOn===null);)Da(m),m.blockedOn===null&&ai.shift();if(m=(o.ownerDocument||o).$$reactFormReplay,m!=null)for(x=0;x<m.length;x+=3){var A=m[x],z=m[x+1],K=A[It]||null;if(typeof z=="function")K||Hi(m);else if(K){var se=null;if(z&&z.hasAttribute("formAction")){if(A=z,K=z[It]||null)se=K.formAction;else if(yn(A)!==null)continue}else se=K.action;typeof se=="function"?m[x+1]=se:(m.splice(x,3),x-=3),Hi(m)}}}function zr(o){this._internalRoot=o}To.prototype.render=zr.prototype.render=function(o){var h=this._internalRoot;if(h===null)throw Error(a(409));var m=h.current,x=so();ot(m,x,o,h,null,null)},To.prototype.unmount=zr.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var h=o.containerInfo;ot(o.current,2,null,o,null,null),ya(),h[qe]=null}};function To(o){this._internalRoot=o}To.prototype.unstable_scheduleHydration=function(o){if(o){var h=xt();o={blockedOn:null,target:o,priority:h};for(var m=0;m<ai.length&&h!==0&&h<ai[m].priority;m++);ai.splice(m,0,o),m===0&&Da(o)}};var Eh=t.version;if(Eh!=="19.1.0")throw Error(a(527,Eh,"19.1.0"));et.findDOMNode=function(o){var h=o._reactInternals;if(h===void 0)throw typeof o.render=="function"?Error(a(188)):(o=Object.keys(o).join(","),Error(a(268,o)));return o=E(h),o=o!==null?P(o):null,o=o===null?null:o.stateNode,o};var Zs={bundleType:0,version:"19.1.0",rendererPackageName:"react-dom",currentDispatcherRef:xe,reconcilerVersion:"19.1.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dm.isDisabled&&dm.supportsFiber)try{or=dm.inject(Zs),dr=dm}catch{}}return Jg.createRoot=function(o,h){if(!f(o))throw Error(a(299));var m=!1,x="",A=o_,z=Sp,K=fg,se=null;return h!=null&&(h.unstable_strictMode===!0&&(m=!0),h.identifierPrefix!==void 0&&(x=h.identifierPrefix),h.onUncaughtError!==void 0&&(A=h.onUncaughtError),h.onCaughtError!==void 0&&(z=h.onCaughtError),h.onRecoverableError!==void 0&&(K=h.onRecoverableError),h.unstable_transitionCallbacks!==void 0&&(se=h.unstable_transitionCallbacks)),h=ue(o,1,!1,null,null,m,x,A,z,K,se,null),o[qe]=h.current,Jp(o),new zr(h)},Jg.hydrateRoot=function(o,h,m){if(!f(o))throw Error(a(299));var x=!1,A="",z=o_,K=Sp,se=fg,Be=null,lt=null;return m!=null&&(m.unstable_strictMode===!0&&(x=!0),m.identifierPrefix!==void 0&&(A=m.identifierPrefix),m.onUncaughtError!==void 0&&(z=m.onUncaughtError),m.onCaughtError!==void 0&&(K=m.onCaughtError),m.onRecoverableError!==void 0&&(se=m.onRecoverableError),m.unstable_transitionCallbacks!==void 0&&(Be=m.unstable_transitionCallbacks),m.formState!==void 0&&(lt=m.formState)),h=ue(o,1,!0,h,m??null,x,A,z,K,se,Be,lt),h.context=Oe(null),m=h.current,x=so(),x=Me(x),A=os(x),A.callback=null,Bo(m,A,x),m=x,h.current.lanes=m,rt(h,m),gs(h),o[qe]=h.current,Jp(o),new To(h)},Jg.version="19.1.0",Jg}var uS;function WP(){if(uS)return gb.exports;uS=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),gb.exports=XP(),gb.exports}var YP=WP();const hS={zh:{"app.title":"AGM","road.info":"","road.id":"ID","road.name":"",coords:"","plan.path":"","flight.id":"ID",destination:"",origin:"","current.conflicts":"","no.conflicts":"",resolved:"","view.details":"",solutions:"",processing:"...","legend.title":"","legend.active":" (Active)","legend.planning":" (Planning)",taxi:"",time:"",start:"","time.to":"",takeoff:"",remaining:"","path.delta":"","time.delta":"",flights:"",node:"",target:"","simulate.apply":"","apply.solution":"","lang.zh":"","lang.en":"English","lang.switch":""},en:{"app.title":"AGM","road.info":"Road Info","road.id":"Road ID","road.name":"Road Name",coords:"Coordinates","plan.path":"Planned Path","flight.id":"Flight ID",destination:"Destination",origin:"Origin","current.conflicts":"Current Conflicts","no.conflicts":"No Conflicts",resolved:"Resolved","view.details":"View Details & Solutions",solutions:"Solutions",processing:"Processing...","legend.title":"Aircraft Types","legend.active":"Active Aircraft","legend.planning":"Planning Aircraft",taxi:"Taxi",time:"Time",start:"Start","time.to":"Time to",takeoff:"Takeoff",remaining:"Remaining","path.delta":"Path Delta","time.delta":"Time Delta",flights:"Flights",node:"Node",target:"Target","simulate.apply":"Simulate Apply","apply.solution":"Apply Solution","lang.zh":"","lang.en":"English","lang.switch":"Language"}},bT=U.createContext({lang:"en",setLang:()=>{},t:e=>e}),KP=({children:e})=>{const[t,i]=U.useState(()=>localStorage.getItem("app_lang")||"zh");U.useEffect(()=>{localStorage.setItem("app_lang",t)},[t]);const a=U.useCallback((f,v)=>{let u=(hS[t]||hS.zh)[f]||f;return v&&typeof v=="object"&&Object.keys(v).forEach(E=>{u=u.replace(new RegExp(`\\{${E}\\}`,"g"),String(v[E]))}),u},[t]);return Ct.jsx(bT.Provider,{value:{lang:t,setLang:i,t:a},children:e})},U1=()=>U.useContext(bT);var sv={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.5.0/LICENSE.txt
 */var QP=sv.exports,fS;function JP(){return fS||(fS=1,function(e,t){(function(i,a){e.exports=a()})(QP,function(){var i={},a={};function f(g,u,E){if(a[g]=E,g==="index"){var P="var sharedModule = {}; ("+a.shared+")(sharedModule); ("+a.worker+")(sharedModule);",I={};return a.shared(I),a.index(i,I),typeof window<"u"&&i.setWorkerUrl(window.URL.createObjectURL(new Blob([P],{type:"text/javascript"}))),i}}f("shared",["exports"],function(g){function u(c,r,l,d){return new(l||(l=Promise))(function(_,S){function C(D){try{O(d.next(D))}catch(N){S(N)}}function M(D){try{O(d.throw(D))}catch(N){S(N)}}function O(D){var N;D.done?_(D.value):(N=D.value,N instanceof l?N:new l(function(V){V(N)})).then(C,M)}O((d=d.apply(c,r||[])).next())})}function E(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var P,I;function B(){if(I)return P;function c(r,l){this.x=r,this.y=l}return I=1,P=c,c.prototype={clone:function(){return new c(this.x,this.y)},add:function(r){return this.clone()._add(r)},sub:function(r){return this.clone()._sub(r)},multByPoint:function(r){return this.clone()._multByPoint(r)},divByPoint:function(r){return this.clone()._divByPoint(r)},mult:function(r){return this.clone()._mult(r)},div:function(r){return this.clone()._div(r)},rotate:function(r){return this.clone()._rotate(r)},rotateAround:function(r,l){return this.clone()._rotateAround(r,l)},matMult:function(r){return this.clone()._matMult(r)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(r){return this.x===r.x&&this.y===r.y},dist:function(r){return Math.sqrt(this.distSqr(r))},distSqr:function(r){var l=r.x-this.x,d=r.y-this.y;return l*l+d*d},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(r){return Math.atan2(this.y-r.y,this.x-r.x)},angleWith:function(r){return this.angleWithSep(r.x,r.y)},angleWithSep:function(r,l){return Math.atan2(this.x*l-this.y*r,this.x*r+this.y*l)},_matMult:function(r){var l=r[2]*this.x+r[3]*this.y;return this.x=r[0]*this.x+r[1]*this.y,this.y=l,this},_add:function(r){return this.x+=r.x,this.y+=r.y,this},_sub:function(r){return this.x-=r.x,this.y-=r.y,this},_mult:function(r){return this.x*=r,this.y*=r,this},_div:function(r){return this.x/=r,this.y/=r,this},_multByPoint:function(r){return this.x*=r.x,this.y*=r.y,this},_divByPoint:function(r){return this.x/=r.x,this.y/=r.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var r=this.y;return this.y=this.x,this.x=-r,this},_rotate:function(r){var l=Math.cos(r),d=Math.sin(r),_=d*this.x+l*this.y;return this.x=l*this.x-d*this.y,this.y=_,this},_rotateAround:function(r,l){var d=Math.cos(r),_=Math.sin(r),S=l.y+_*(this.x-l.x)+d*(this.y-l.y);return this.x=l.x+d*(this.x-l.x)-_*(this.y-l.y),this.y=S,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},c.convert=function(r){return r instanceof c?r:Array.isArray(r)?new c(r[0],r[1]):r},P}typeof SuppressedError=="function"&&SuppressedError;var j,$,X=E(B()),J=function(){if($)return j;function c(r,l,d,_){this.cx=3*r,this.bx=3*(d-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(_-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=l,this.p2x=d,this.p2y=_}return $=1,j=c,c.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,l){if(l===void 0&&(l=1e-6),r<0)return 0;if(r>1)return 1;for(var d=r,_=0;_<8;_++){var S=this.sampleCurveX(d)-r;if(Math.abs(S)<l)return d;var C=this.sampleCurveDerivativeX(d);if(Math.abs(C)<1e-6)break;d-=S/C}var M=0,O=1;for(d=r,_=0;_<20&&(S=this.sampleCurveX(d),!(Math.abs(S-r)<l));_++)r>S?M=d:O=d,d=.5*(O-M)+M;return d},solve:function(r,l){return this.sampleCurveY(this.solveCurveX(r,l))}},j}(),G=E(J);let le,oe;function pe(){return le==null&&(le=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),le}function he(){if(oe==null&&(oe=!1,pe())){const r=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(r){for(let d=0;d<5*5;d++){const _=4*d;r.fillStyle=`rgb(${_},${_+1},${_+2})`,r.fillRect(d%5,Math.floor(d/5),1,1)}const l=r.getImageData(0,0,5,5).data;for(let d=0;d<5*5*4;d++)if(d%4!=3&&l[d]!==d){oe=!0;break}}}return oe||!1}var ae=1e-6,ve=typeof Float32Array<"u"?Float32Array:Array;function Se(){var c=new ve(9);return ve!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function ke(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function Le(){var c=new ve(3);return ve!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function Re(c){return Math.hypot(c[0],c[1],c[2])}function me(c,r,l){var d=new ve(3);return d[0]=c,d[1]=r,d[2]=l,d}Math.hypot||(Math.hypot=function(){for(var c=0,r=arguments.length;r--;)c+=arguments[r]*arguments[r];return Math.sqrt(c)});var Ae,He=Re;function We(c,r,l){var d=r[0],_=r[1],S=r[2],C=r[3];return c[0]=l[0]*d+l[4]*_+l[8]*S+l[12]*C,c[1]=l[1]*d+l[5]*_+l[9]*S+l[13]*C,c[2]=l[2]*d+l[6]*_+l[10]*S+l[14]*C,c[3]=l[3]*d+l[7]*_+l[11]*S+l[15]*C,c}function pt(){var c=new ve(4);return ve!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function xe(){var c=new ve(2);return ve!=Float32Array&&(c[0]=0,c[1]=0),c}function et(c,r){var l=new ve(2);return l[0]=c,l[1]=r,l}Le(),Ae=new ve(4),ve!=Float32Array&&(Ae[0]=0,Ae[1]=0,Ae[2]=0,Ae[3]=0),Le(),me(1,0,0),me(0,1,0),pt(),pt(),Se(),xe();const Qe=8192;function Rt(c,r,l){return r*(Qe/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function we(c,r){return(c%r+r)%r}function tt(c,r,l){return c*(1-l)+r*l}function _t(c){if(c<=0)return 0;if(c>=1)return 1;const r=c*c,l=r*c;return 4*(c<.5?l:3*(c-r)+l-.75)}function Pt(c,r,l,d){const _=new G(c,r,l,d);return S=>_.solve(S)}const At=Pt(.25,.1,.25,1);function St(c,r,l){return Math.min(l,Math.max(r,c))}function qt(c,r,l){const d=l-r,_=((c-r)%d+d)%d+r;return _===r?l:_}function Xe(c,...r){for(const l of r)for(const d in l)c[d]=l[d];return c}let mt=1;function ft(c,r,l){const d={};for(const _ in c)d[_]=r.call(this,c[_],_,c);return d}function Ke(c,r,l){const d={};for(const _ in c)r.call(this,c[_],_,c)&&(d[_]=c[_]);return d}function Je(c){return Array.isArray(c)?c.map(Je):typeof c=="object"&&c?ft(c,Je):c}const Vt={};function $t(c){Vt[c]||(typeof console<"u"&&console.warn(c),Vt[c]=!0)}function Kt(c,r,l){return(l.y-c.y)*(r.x-c.x)>(r.y-c.y)*(l.x-c.x)}function Gt(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let kt=null;function Qt(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const ln="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function Sn(c,r,l,d,_){return u(this,void 0,void 0,function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(c,{timestamp:0});try{const C=S==null?void 0:S.format;if(!C||!C.startsWith("BGR")&&!C.startsWith("RGB"))throw new Error(`Unrecognized format ${C}`);const M=C.startsWith("BGR"),O=new Uint8ClampedArray(d*_*4);if(yield S.copyTo(O,function(D,N,V,Z,Y){const Q=4*Math.max(1,0),re=(Math.max(0,V)-V)*Z*4+Q,fe=4*Z,be=Math.max(0,N),$e=Math.max(0,V);return{rect:{x:be,y:$e,width:Math.min(D.width,N+Z)-be,height:Math.min(D.height,V+Y)-$e},layout:[{offset:re,stride:fe}]}}(c,r,l,d,_)),M)for(let D=0;D<O.length;D+=4){const N=O[D];O[D]=O[D+2],O[D+2]=N}return O}finally{S.close()}})}let bn,gn;function En(c,r,l,d){return c.addEventListener(r,l,d),{unsubscribe:()=>{c.removeEventListener(r,l,d)}}}function Ln(c){return c*Math.PI/180}function Pn(c){return c/Math.PI*180}const Hn={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},or={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},dr="AbortError";function sr(){return new Error(dr)}const Gn={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function pr(c){return Gn.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const Jn="global-dispatcher";class br extends Error{constructor(r,l,d,_){super(`AJAXError: ${l} (${r}): ${d}`),this.status=r,this.statusText=l,this.url=d,this.body=_}}const gr=()=>Gt(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,Lr=function(c,r){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const d=pr(c.url);if(d)return d(c,r);if(Gt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:Jn},r)}if(!(/^file:/.test(l=c.url)||/^file:/.test(gr())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return function(d,_){return u(this,void 0,void 0,function*(){const S=new Request(d.url,{method:d.method||"GET",body:d.body,credentials:d.credentials,headers:d.headers,cache:d.cache,referrer:gr(),signal:_.signal});let C,M;d.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{C=yield fetch(S)}catch(D){throw new br(0,D.message,d.url,new Blob)}if(!C.ok){const D=yield C.blob();throw new br(C.status,C.statusText,d.url,D)}M=d.type==="arrayBuffer"||d.type==="image"?C.arrayBuffer():d.type==="json"?C.json():C.text();const O=yield M;if(_.signal.aborted)throw sr();return{data:O,cacheControl:C.headers.get("Cache-Control"),expires:C.headers.get("Expires")}})}(c,r);if(Gt(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:Jn},r)}var l;return function(d,_){return new Promise((S,C)=>{var M;const O=new XMLHttpRequest;O.open(d.method||"GET",d.url,!0),d.type!=="arrayBuffer"&&d.type!=="image"||(O.responseType="arraybuffer");for(const D in d.headers)O.setRequestHeader(D,d.headers[D]);d.type==="json"&&(O.responseType="text",!((M=d.headers)===null||M===void 0)&&M.Accept||O.setRequestHeader("Accept","application/json")),O.withCredentials=d.credentials==="include",O.onerror=()=>{C(new Error(O.statusText))},O.onload=()=>{if(!_.signal.aborted)if((O.status>=200&&O.status<300||O.status===0)&&O.response!==null){let D=O.response;if(d.type==="json")try{D=JSON.parse(O.response)}catch(N){return void C(N)}S({data:D,cacheControl:O.getResponseHeader("Cache-Control"),expires:O.getResponseHeader("Expires")})}else{const D=new Blob([O.response],{type:O.getResponseHeader("Content-Type")});C(new br(O.status,O.statusText,d.url,D))}},_.signal.addEventListener("abort",()=>{O.abort(),C(sr())}),O.send(d.body)})}(c,r)};function Ge(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const r=new URL(c),l=window.location;return r.protocol===l.protocol&&r.host===l.host}function te(c,r,l){l[c]&&l[c].indexOf(r)!==-1||(l[c]=l[c]||[],l[c].push(r))}function ie(c,r,l){if(l&&l[c]){const d=l[c].indexOf(r);d!==-1&&l[c].splice(d,1)}}class de{constructor(r,l={}){Xe(this,l),this.type=r}}class Ce extends de{constructor(r,l={}){super("error",Xe({error:r},l))}}class Ne{on(r,l){return this._listeners=this._listeners||{},te(r,l,this._listeners),{unsubscribe:()=>{this.off(r,l)}}}off(r,l){return ie(r,l,this._listeners),ie(r,l,this._oneTimeListeners),this}once(r,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},te(r,l,this._oneTimeListeners),this):new Promise(d=>this.once(r,d))}fire(r,l){typeof r=="string"&&(r=new de(r,l||{}));const d=r.type;if(this.listens(d)){r.target=this;const _=this._listeners&&this._listeners[d]?this._listeners[d].slice():[];for(const M of _)M.call(this,r);const S=this._oneTimeListeners&&this._oneTimeListeners[d]?this._oneTimeListeners[d].slice():[];for(const M of S)ie(d,M,this._oneTimeListeners),M.call(this,r);const C=this._eventedParent;C&&(Xe(r,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),C.fire(r))}else r instanceof Ce&&console.error(r.error);return this}listens(r){return this._listeners&&this._listeners[r]&&this._listeners[r].length>0||this._oneTimeListeners&&this._oneTimeListeners[r]&&this._oneTimeListeners[r].length>0||this._eventedParent&&this._eventedParent.listens(r)}setEventedParent(r,l){return this._eventedParent=r,this._eventedParentData=l,this}}var ce={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};const rt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function Ve(c,r){const l={};for(const d in c)d!=="ref"&&(l[d]=c[d]);return rt.forEach(d=>{d in r&&(l[d]=r[d])}),l}function Ie(c,r){if(Array.isArray(c)){if(!Array.isArray(r)||c.length!==r.length)return!1;for(let l=0;l<c.length;l++)if(!Ie(c[l],r[l]))return!1;return!0}if(typeof c=="object"&&c!==null&&r!==null){if(typeof r!="object"||Object.keys(c).length!==Object.keys(r).length)return!1;for(const l in c)if(!Ie(c[l],r[l]))return!1;return!0}return c===r}function Pe(c,r){c.push(r)}function Me(c,r,l){Pe(l,{command:"addSource",args:[c,r[c]]})}function Ye(c,r,l){Pe(r,{command:"removeSource",args:[c]}),l[c]=!0}function xt(c,r,l,d){Ye(c,l,d),Me(c,r,l)}function Mt(c,r,l){let d;for(d in c[l])if(Object.prototype.hasOwnProperty.call(c[l],d)&&d!=="data"&&!Ie(c[l][d],r[l][d]))return!1;for(d in r[l])if(Object.prototype.hasOwnProperty.call(r[l],d)&&d!=="data"&&!Ie(c[l][d],r[l][d]))return!1;return!0}function Ot(c,r,l,d,_,S){c=c||{},r=r||{};for(const C in c)Object.prototype.hasOwnProperty.call(c,C)&&(Ie(c[C],r[C])||l.push({command:S,args:[d,C,r[C],_]}));for(const C in r)Object.prototype.hasOwnProperty.call(r,C)&&!Object.prototype.hasOwnProperty.call(c,C)&&(Ie(c[C],r[C])||l.push({command:S,args:[d,C,r[C],_]}))}function Xt(c){return c.id}function It(c,r){return c[r.id]=r,c}class qe{constructor(r,l,d,_){this.message=(r?`${r}: `:"")+d,_&&(this.identifier=_),l!=null&&l.__line__&&(this.line=l.__line__)}}function dn(c,...r){for(const l of r)for(const d in l)c[d]=l[d];return c}class cn extends Error{constructor(r,l){super(l),this.message=l,this.key=r}}class en{constructor(r,l=[]){this.parent=r,this.bindings={};for(const[d,_]of l)this.bindings[d]=_}concat(r){return new en(this,r)}get(r){if(this.bindings[r])return this.bindings[r];if(this.parent)return this.parent.get(r);throw new Error(`${r} not found in scope.`)}has(r){return!!this.bindings[r]||!!this.parent&&this.parent.has(r)}}const Wt={kind:"null"},at={kind:"number"},Ht={kind:"string"},an={kind:"boolean"},Cn={kind:"color"},pn={kind:"projectionDefinition"},Bn={kind:"object"},tn={kind:"value"},xr={kind:"collator"},mi={kind:"formatted"},Wn={kind:"padding"},Xn={kind:"colorArray"},rr={kind:"numberArray"},lr={kind:"resolvedImage"},On={kind:"variableAnchorOffsetCollection"};function cr(c,r){return{kind:"array",itemType:c,N:r}}function Dn(c){if(c.kind==="array"){const r=Dn(c.itemType);return typeof c.N=="number"?`array<${r}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${r}>`}return c.kind}const Rr=[Wt,at,Ht,an,Cn,pn,mi,Bn,cr(tn),Wn,rr,Xn,lr,On];function Yr(c,r){if(r.kind==="error")return null;if(c.kind==="array"){if(r.kind==="array"&&(r.N===0&&r.itemType.kind==="value"||!Yr(c.itemType,r.itemType))&&(typeof c.N!="number"||c.N===r.N))return null}else{if(c.kind===r.kind)return null;if(c.kind==="value"){for(const l of Rr)if(!Yr(l,r))return null}}return`Expected ${Dn(c)} but found ${Dn(r)} instead.`}function Na(c,r){return r.some(l=>l.kind===c.kind)}function Di(c,r){return r.some(l=>l==="null"?c===null:l==="array"?Array.isArray(c):l==="object"?c&&!Array.isArray(c)&&typeof c=="object":l===typeof c)}function ci(c,r){return c.kind==="array"&&r.kind==="array"?c.itemType.kind===r.itemType.kind&&typeof c.N=="number":c.kind===r.kind}const Ca=.96422,Ta=.82521,Vc=4/29,bs=6/29,Ea=3*bs*bs,Bh=bs*bs*bs,op=Math.PI/180,ho=180/Math.PI;function aa(c){return(c%=360)<0&&(c+=360),c}function ja([c,r,l,d]){let _,S;const C=ri((.2225045*(c=fo(c))+.7168786*(r=fo(r))+.0606169*(l=fo(l)))/1);c===r&&r===l?_=S=C:(_=ri((.4360747*c+.3850649*r+.1430804*l)/Ca),S=ri((.0139322*c+.0971045*r+.7141733*l)/Ta));const M=116*C-16;return[M<0?0:M,500*(_-C),200*(C-S),d]}function fo(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function ri(c){return c>Bh?Math.pow(c,1/3):c/Ea+Vc}function Xo([c,r,l,d]){let _=(c+16)/116,S=isNaN(r)?_:_+r/500,C=isNaN(l)?_:_-l/200;return _=1*po(_),S=Ca*po(S),C=Ta*po(C),[oa(3.1338561*S-1.6168667*_-.4906146*C),oa(-.9787684*S+1.9161415*_+.033454*C),oa(.0719453*S-.2289914*_+1.4052427*C),d]}function oa(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function po(c){return c>bs?c*c*c:Ea*(c-Vc)}const Po=Object.hasOwn||function(c,r){return Object.prototype.hasOwnProperty.call(c,r)};function xs(c,r){return Po(c,r)?c[r]:void 0}function Uc(c){return parseInt(c.padEnd(2,c),16)/255}function il(c,r){return Ma(r?c/100:c,0,1)}function Ma(c,r,l){return Math.min(Math.max(r,c),l)}function tr(c){return!c.some(Number.isNaN)}const jl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function Ji(c,r,l){return c+l*(r-c)}function Fl(c,r,l){return c.map((d,_)=>Ji(d,r[_],l))}class er{constructor(r,l,d,_=1,S=!0){this.r=r,this.g=l,this.b=d,this.a=_,S||(this.r*=_,this.g*=_,this.b*=_,_||this.overwriteGetter("rgb",[r,l,d,_]))}static parse(r){if(r instanceof er)return r;if(typeof r!="string")return;const l=function(d){if((d=d.toLowerCase().trim())==="transparent")return[0,0,0,0];const _=xs(jl,d);if(_){const[C,M,O]=_;return[C/255,M/255,O/255,1]}if(d.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(d)){const C=d.length<6?1:2;let M=1;return[Uc(d.slice(M,M+=C)),Uc(d.slice(M,M+=C)),Uc(d.slice(M,M+=C)),Uc(d.slice(M,M+C)||"ff")]}if(d.startsWith("rgb")){const C=d.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(C){const[M,O,D,N,V,Z,Y,Q,re,fe,be,$e]=C,Te=[N||" ",Y||" ",fe].join("");if(Te==="  "||Te==="  /"||Te===",,"||Te===",,,"){const W=[D,Z,re].join(""),ue=W==="%%%"?100:W===""?255:0;if(ue){const Oe=[Ma(+O/ue,0,1),Ma(+V/ue,0,1),Ma(+Q/ue,0,1),be?il(+be,$e):1];if(tr(Oe))return Oe}}return}}const S=d.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[C,M,O,D,N,V,Z,Y,Q]=S,re=[O||" ",N||" ",Z].join("");if(re==="  "||re==="  /"||re===",,"||re===",,,"){const fe=[+M,Ma(+D,0,100),Ma(+V,0,100),Y?il(+Y,Q):1];if(tr(fe))return function([be,$e,Te,W]){function ue(Oe){const ot=(Oe+be/30)%12,Lt=$e*Math.min(Te,1-Te);return Te-Lt*Math.max(-1,Math.min(ot-3,9-ot,1))}return be=aa(be),$e/=100,Te/=100,[ue(0),ue(8),ue(4),W]}(fe)}}}(r);return l?new er(...l,!1):void 0}get rgb(){const{r,g:l,b:d,a:_}=this,S=_||1/0;return this.overwriteGetter("rgb",[r/S,l/S,d/S,_])}get hcl(){return this.overwriteGetter("hcl",function(r){const[l,d,_,S]=ja(r),C=Math.sqrt(d*d+_*_);return[Math.round(1e4*C)?aa(Math.atan2(_,d)*ho):NaN,C,l,S]}(this.rgb))}get lab(){return this.overwriteGetter("lab",ja(this.rgb))}overwriteGetter(r,l){return Object.defineProperty(this,r,{value:l}),l}toString(){const[r,l,d,_]=this.rgb;return`rgba(${[r,l,d].map(S=>Math.round(255*S)).join(",")},${_})`}static interpolate(r,l,d,_="rgb"){switch(_){case"rgb":{const[S,C,M,O]=Fl(r.rgb,l.rgb,d);return new er(S,C,M,O,!1)}case"hcl":{const[S,C,M,O]=r.hcl,[D,N,V,Z]=l.hcl;let Y,Q;if(isNaN(S)||isNaN(D))isNaN(S)?isNaN(D)?Y=NaN:(Y=D,M!==1&&M!==0||(Q=N)):(Y=S,V!==1&&V!==0||(Q=C));else{let Te=D-S;D>S&&Te>180?Te-=360:D<S&&S-D>180&&(Te+=360),Y=S+d*Te}const[re,fe,be,$e]=function([Te,W,ue,Oe]){return Te=isNaN(Te)?0:Te*op,Xo([ue,Math.cos(Te)*W,Math.sin(Te)*W,Oe])}([Y,Q??Ji(C,N,d),Ji(M,V,d),Ji(O,Z,d)]);return new er(re,fe,be,$e,!1)}case"lab":{const[S,C,M,O]=Xo(Fl(r.lab,l.lab,d));return new er(S,C,M,O,!1)}}}}er.black=new er(0,0,0,1),er.white=new er(1,1,1,1),er.transparent=new er(0,0,0,0),er.red=new er(1,0,0,1);class al{constructor(r,l,d){this.sensitivity=r?l?"variant":"case":l?"accent":"base",this.locale=d,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(r,l){return this.collator.compare(r,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const $l=["bottom","center","top"];class ol{constructor(r,l,d,_,S,C){this.text=r,this.image=l,this.scale=d,this.fontStack=_,this.textColor=S,this.verticalAlign=C}}class ji{constructor(r){this.sections=r}static fromString(r){return new ji([new ol(r,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(r=>r.text.length!==0||r.image&&r.image.name.length!==0)}static factory(r){return r instanceof ji?r:ji.fromString(r)}toString(){return this.sections.length===0?"":this.sections.map(r=>r.text).join("")}}class gi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof gi)return r;if(typeof r=="number")return new gi([r,r,r,r]);if(Array.isArray(r)&&!(r.length<1||r.length>4)){for(const l of r)if(typeof l!="number")return;switch(r.length){case 1:r=[r[0],r[0],r[0],r[0]];break;case 2:r=[r[0],r[1],r[0],r[1]];break;case 3:r=[r[0],r[1],r[2],r[1]]}return new gi(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,l,d){return new gi(Fl(r.values,l.values,d))}}class yi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof yi)return r;if(typeof r=="number")return new yi([r]);if(Array.isArray(r)){for(const l of r)if(typeof l!="number")return;return new yi(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,l,d){return new yi(Fl(r.values,l.values,d))}}class Fi{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof Fi)return r;if(typeof r=="string"){const d=er.parse(r);return d?new Fi([d]):void 0}if(!Array.isArray(r))return;const l=[];for(const d of r){if(typeof d!="string")return;const _=er.parse(d);if(!_)return;l.push(_)}return new Fi(l)}toString(){return JSON.stringify(this.values)}static interpolate(r,l,d,_="rgb"){const S=[];if(r.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${r.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let C=0;C<r.values.length;C++)S.push(er.interpolate(r.values[C],l.values[C],d,_));return new Fi(S)}}class Br extends Error{constructor(r){super(r),this.name="RuntimeError"}toJSON(){return this.message}}const Wo=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class ui{constructor(r){this.values=r.slice()}static parse(r){if(r instanceof ui)return r;if(Array.isArray(r)&&!(r.length<1)&&r.length%2==0){for(let l=0;l<r.length;l+=2){const d=r[l],_=r[l+1];if(typeof d!="string"||!Wo.has(d)||!Array.isArray(_)||_.length!==2||typeof _[0]!="number"||typeof _[1]!="number")return}return new ui(r)}}toString(){return JSON.stringify(this.values)}static interpolate(r,l,d){const _=r.values,S=l.values;if(_.length!==S.length)throw new Br(`Cannot interpolate values of different length. from: ${r.toString()}, to: ${l.toString()}`);const C=[];for(let M=0;M<_.length;M+=2){if(_[M]!==S[M])throw new Br(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${_[M]}, to[${M}]: ${S[M]}`);C.push(_[M]);const[O,D]=_[M+1],[N,V]=S[M+1];C.push([Ji(O,N,d),Ji(D,V,d)])}return new ui(C)}}class Aa{constructor(r){this.name=r.name,this.available=r.available}toString(){return this.name}static fromString(r){return r?new Aa({name:r,available:!1}):null}}class qi{constructor(r,l,d){this.from=r,this.to=l,this.transition=d}static interpolate(r,l,d){return new qi(r,l,d)}static parse(r){return r instanceof qi?r:Array.isArray(r)&&r.length===3&&typeof r[0]=="string"&&typeof r[1]=="string"&&typeof r[2]=="number"?new qi(r[0],r[1],r[2]):typeof r=="object"&&typeof r.from=="string"&&typeof r.to=="string"&&typeof r.transition=="number"?new qi(r.from,r.to,r.transition):typeof r=="string"?new qi(r,r,1):void 0}}function mo(c,r,l,d){return typeof c=="number"&&c>=0&&c<=255&&typeof r=="number"&&r>=0&&r<=255&&typeof l=="number"&&l>=0&&l<=255?d===void 0||typeof d=="number"&&d>=0&&d<=1?null:`Invalid rgba value [${[c,r,l,d].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof d=="number"?[c,r,l,d]:[c,r,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function wr(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof qi||c instanceof er||c instanceof al||c instanceof ji||c instanceof gi||c instanceof yi||c instanceof Fi||c instanceof ui||c instanceof Aa)return!0;if(Array.isArray(c)){for(const r of c)if(!wr(r))return!1;return!0}if(typeof c=="object"){for(const r in c)if(!wr(c[r]))return!1;return!0}return!1}function Hr(c){if(c===null)return Wt;if(typeof c=="string")return Ht;if(typeof c=="boolean")return an;if(typeof c=="number")return at;if(c instanceof er)return Cn;if(c instanceof qi)return pn;if(c instanceof al)return xr;if(c instanceof ji)return mi;if(c instanceof gi)return Wn;if(c instanceof yi)return rr;if(c instanceof Fi)return Xn;if(c instanceof ui)return On;if(c instanceof Aa)return lr;if(Array.isArray(c)){const r=c.length;let l;for(const d of c){const _=Hr(d);if(l){if(l===_)continue;l=tn;break}l=_}return cr(l||tn,r)}return Bn}function Yn(c){const r=typeof c;return c===null?"":r==="string"||r==="number"||r==="boolean"?String(c):c instanceof er||c instanceof qi||c instanceof ji||c instanceof gi||c instanceof yi||c instanceof Fi||c instanceof ui||c instanceof Aa?c.toString():JSON.stringify(c)}class Rn{constructor(r,l){this.type=r,this.value=l}static parse(r,l){if(r.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${r.length-1} instead.`);if(!wr(r[1]))return l.error("invalid value");const d=r[1];let _=Hr(d);const S=l.expectedType;return _.kind!=="array"||_.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(_=S),new Rn(_,d)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const ws={string:Ht,number:at,boolean:an,object:Bn};class Fn{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let d,_=1;const S=r[0];if(S==="array"){let M,O;if(r.length>2){const D=r[1];if(typeof D!="string"||!(D in ws)||D==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);M=ws[D],_++}else M=tn;if(r.length>3){if(r[2]!==null&&(typeof r[2]!="number"||r[2]<0||r[2]!==Math.floor(r[2])))return l.error('The length argument to "array" must be a positive integer literal',2);O=r[2],_++}d=cr(M,O)}else{if(!ws[S])throw new Error(`Types doesn't contain name = ${S}`);d=ws[S]}const C=[];for(;_<r.length;_++){const M=l.parse(r[_],_,tn);if(!M)return null;C.push(M)}return new Fn(d,C)}evaluate(r){for(let l=0;l<this.args.length;l++){const d=this.args[l].evaluate(r);if(!Yr(this.type,Hr(d)))return d;if(l===this.args.length-1)throw new Br(`Expected value to be of type ${Dn(this.type)}, but found ${Dn(Hr(d))} instead.`)}throw new Error}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const ea={"to-boolean":an,"to-color":Cn,"to-number":at,"to-string":Ht};class _i{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[0];if(!ea[d])throw new Error(`Can't parse ${d} as it is not part of the known types`);if((d==="to-boolean"||d==="to-string")&&r.length!==2)return l.error("Expected one argument.");const _=ea[d],S=[];for(let C=1;C<r.length;C++){const M=l.parse(r[C],C,tn);if(!M)return null;S.push(M)}return new _i(_,S)}evaluate(r){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(r);case"color":{let l,d;for(const _ of this.args){if(l=_.evaluate(r),d=null,l instanceof er)return l;if(typeof l=="string"){const S=r.parseColor(l);if(S)return S}else if(Array.isArray(l)&&(d=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:mo(l[0],l[1],l[2],l[3]),!d))return new er(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Br(d||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const d of this.args){l=d.evaluate(r);const _=gi.parse(l);if(_)return _}throw new Br(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const d of this.args){l=d.evaluate(r);const _=yi.parse(l);if(_)return _}throw new Br(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const d of this.args){l=d.evaluate(r);const _=Fi.parse(l);if(_)return _}throw new Br(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const d of this.args){l=d.evaluate(r);const _=ui.parse(l);if(_)return _}throw new Br(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const d of this.args){if(l=d.evaluate(r),l===null)return 0;const _=Number(l);if(!isNaN(_))return _}throw new Br(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return ji.fromString(Yn(this.args[0].evaluate(r)));case"resolvedImage":return Aa.fromString(Yn(this.args[0].evaluate(r)));case"projectionDefinition":return this.args[0].evaluate(r);default:return Yn(this.args[0].evaluate(r))}}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}const Hc=["Unknown","Point","LineString","Polygon"];class Vl{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Hc[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(r){let l=this._parseColorCache.get(r);return l||(l=er.parse(r),this._parseColorCache.set(r,l)),l}}class qu{constructor(r,l,d=[],_,S=new en,C=[]){this.registry=r,this.path=d,this.key=d.map(M=>`[${M}]`).join(""),this.scope=S,this.errors=C,this.expectedType=_,this._isConstant=l}parse(r,l,d,_,S={}){return l?this.concat(l,d,_)._parse(r,S):this._parse(r,S)}_parse(r,l){function d(_,S,C){return C==="assert"?new Fn(S,[_]):C==="coerce"?new _i(S,[_]):_}if(r!==null&&typeof r!="string"&&typeof r!="boolean"&&typeof r!="number"||(r=["literal",r]),Array.isArray(r)){if(r.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=r[0];if(typeof _!="string")return this.error(`Expression name must be a string, but found ${typeof _} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[_];if(S){let C=S.parse(r,this);if(!C)return null;if(this.expectedType){const M=this.expectedType,O=C.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||O.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(O.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(O.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(O.kind)||M.kind==="colorArray"&&["value","string","array"].includes(O.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(O.kind))C=d(C,M,l.typeAnnotation||"coerce");else if(this.checkSubtype(M,O))return null}else C=d(C,M,l.typeAnnotation||"assert")}if(!(C instanceof Rn)&&C.type.kind!=="resolvedImage"&&this._isConstant(C)){const M=new Vl;try{C=new Rn(C.type,C.evaluate(M))}catch(O){return this.error(O.message),null}}return C}return this.error(`Unknown expression "${_}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(r===void 0?"'undefined' value invalid. Use null instead.":typeof r=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof r} instead.`)}concat(r,l,d){const _=typeof r=="number"?this.path.concat(r):this.path,S=d?this.scope.concat(d):this.scope;return new qu(this.registry,this._isConstant,_,l||null,S,this.errors)}error(r,...l){const d=`${this.key}${l.map(_=>`[${_}]`).join("")}`;this.errors.push(new cn(d,r))}checkSubtype(r,l){const d=Yr(r,l);return d&&this.error(d),d}}class sl{constructor(r,l){this.type=l.type,this.bindings=[].concat(r),this.result=l}evaluate(r){return this.result.evaluate(r)}eachChild(r){for(const l of this.bindings)r(l[1]);r(this.result)}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found ${r.length-1} instead.`);const d=[];for(let S=1;S<r.length-1;S+=2){const C=r[S];if(typeof C!="string")return l.error(`Expected string, but found ${typeof C} instead.`,S);if(/[^a-zA-Z0-9_]/.test(C))return l.error("Variable names must contain only alphanumeric characters or '_'.",S);const M=l.parse(r[S+1],S+1);if(!M)return null;d.push([C,M])}const _=l.parse(r[r.length-1],r.length-1,l.expectedType,d);return _?new sl(d,_):null}outputDefined(){return this.result.outputDefined()}}class Ul{constructor(r,l){this.type=l.type,this.name=r,this.boundExpression=l}static parse(r,l){if(r.length!==2||typeof r[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const d=r[1];return l.scope.has(d)?new Ul(d,l.scope.get(d)):l.error(`Unknown variable "${d}". Make sure "${d}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(r){return this.boundExpression.evaluate(r)}eachChild(){}outputDefined(){return!1}}class Hl{constructor(r,l,d){this.type=r,this.index=l,this.input=d}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,at),_=l.parse(r[2],2,cr(l.expectedType||tn));return d&&_?new Hl(_.type.itemType,d,_):null}evaluate(r){const l=this.index.evaluate(r),d=this.input.evaluate(r);if(l<0)throw new Br(`Array index out of bounds: ${l} < 0.`);if(l>=d.length)throw new Br(`Array index out of bounds: ${l} > ${d.length-1}.`);if(l!==Math.floor(l))throw new Br(`Array index must be an integer, but found ${l} instead.`);return d[l]}eachChild(r){r(this.index),r(this.input)}outputDefined(){return!1}}class ql{constructor(r,l){this.type=an,this.needle=r,this.haystack=l}static parse(r,l){if(r.length!==3)return l.error(`Expected 2 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,tn),_=l.parse(r[2],2,tn);return d&&_?Na(d.type,[an,Ht,at,Wt,tn])?new ql(d,_):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(d.type)} instead`):null}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!d)return!1;if(!Di(l,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(Hr(l))} instead.`);if(!Di(d,["string","array"]))throw new Br(`Expected second argument to be of type array or string, but found ${Dn(Hr(d))} instead.`);return d.indexOf(l)>=0}eachChild(r){r(this.needle),r(this.haystack)}outputDefined(){return!0}}class qc{constructor(r,l,d){this.type=at,this.needle=r,this.haystack=l,this.fromIndex=d}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,tn),_=l.parse(r[2],2,tn);if(!d||!_)return null;if(!Na(d.type,[an,Ht,at,Wt,tn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(d.type)} instead`);if(r.length===4){const S=l.parse(r[3],3,at);return S?new qc(d,_,S):null}return new qc(d,_)}evaluate(r){const l=this.needle.evaluate(r),d=this.haystack.evaluate(r);if(!Di(l,["boolean","string","number","null"]))throw new Br(`Expected first argument to be of type boolean, string, number or null, but found ${Dn(Hr(l))} instead.`);let _;if(this.fromIndex&&(_=this.fromIndex.evaluate(r)),Di(d,["string"])){const S=d.indexOf(l,_);return S===-1?-1:[...d.slice(0,S)].length}if(Di(d,["array"]))return d.indexOf(l,_);throw new Br(`Expected second argument to be of type array or string, but found ${Dn(Hr(d))} instead.`)}eachChild(r){r(this.needle),r(this.haystack),this.fromIndex&&r(this.fromIndex)}outputDefined(){return!1}}class Gl{constructor(r,l,d,_,S,C){this.inputType=r,this.type=l,this.input=d,this.cases=_,this.outputs=S,this.otherwise=C}static parse(r,l){if(r.length<5)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if(r.length%2!=1)return l.error("Expected an even number of arguments.");let d,_;l.expectedType&&l.expectedType.kind!=="value"&&(_=l.expectedType);const S={},C=[];for(let D=2;D<r.length-1;D+=2){let N=r[D];const V=r[D+1];Array.isArray(N)||(N=[N]);const Z=l.concat(D);if(N.length===0)return Z.error("Expected at least one branch label.");for(const Q of N){if(typeof Q!="number"&&typeof Q!="string")return Z.error("Branch labels must be numbers or strings.");if(typeof Q=="number"&&Math.abs(Q)>Number.MAX_SAFE_INTEGER)return Z.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof Q=="number"&&Math.floor(Q)!==Q)return Z.error("Numeric branch labels must be integer values.");if(d){if(Z.checkSubtype(d,Hr(Q)))return null}else d=Hr(Q);if(S[String(Q)]!==void 0)return Z.error("Branch labels must be unique.");S[String(Q)]=C.length}const Y=l.parse(V,D,_);if(!Y)return null;_=_||Y.type,C.push(Y)}const M=l.parse(r[1],1,tn);if(!M)return null;const O=l.parse(r[r.length-1],r.length-1,_);return O?M.type.kind!=="value"&&l.concat(1).checkSubtype(d,M.type)?null:new Gl(d,_,M,S,C,O):null}evaluate(r){const l=this.input.evaluate(r);return(Hr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(r)}eachChild(r){r(this.input),this.outputs.forEach(r),r(this.otherwise)}outputDefined(){return this.outputs.every(r=>r.outputDefined())&&this.otherwise.outputDefined()}}class Gi{constructor(r,l,d){this.type=r,this.branches=l,this.otherwise=d}static parse(r,l){if(r.length<4)return l.error(`Expected at least 3 arguments, but found only ${r.length-1}.`);if(r.length%2!=0)return l.error("Expected an odd number of arguments.");let d;l.expectedType&&l.expectedType.kind!=="value"&&(d=l.expectedType);const _=[];for(let C=1;C<r.length-1;C+=2){const M=l.parse(r[C],C,an);if(!M)return null;const O=l.parse(r[C+1],C+1,d);if(!O)return null;_.push([M,O]),d=d||O.type}const S=l.parse(r[r.length-1],r.length-1,d);if(!S)return null;if(!d)throw new Error("Can't infer output type");return new Gi(d,_,S)}evaluate(r){for(const[l,d]of this.branches)if(l.evaluate(r))return d.evaluate(r);return this.otherwise.evaluate(r)}eachChild(r){for(const[l,d]of this.branches)r(l),r(d);r(this.otherwise)}outputDefined(){return this.branches.every(([r,l])=>l.outputDefined())&&this.otherwise.outputDefined()}}class Zl{constructor(r,l,d,_){this.type=r,this.input=l,this.beginIndex=d,this.endIndex=_}static parse(r,l){if(r.length<=2||r.length>=5)return l.error(`Expected 3 or 4 arguments, but found ${r.length-1} instead.`);const d=l.parse(r[1],1,tn),_=l.parse(r[2],2,at);if(!d||!_)return null;if(!Na(d.type,[cr(tn),Ht,tn]))return l.error(`Expected first argument to be of type array or string, but found ${Dn(d.type)} instead`);if(r.length===4){const S=l.parse(r[3],3,at);return S?new Zl(d.type,d,_,S):null}return new Zl(d.type,d,_)}evaluate(r){const l=this.input.evaluate(r),d=this.beginIndex.evaluate(r);let _;if(this.endIndex&&(_=this.endIndex.evaluate(r)),Di(l,["string"]))return[...l].slice(d,_).join("");if(Di(l,["array"]))return l.slice(d,_);throw new Br(`Expected first argument to be of type array or string, but found ${Dn(Hr(l))} instead.`)}eachChild(r){r(this.input),r(this.beginIndex),this.endIndex&&r(this.endIndex)}outputDefined(){return!1}}function Xl(c,r){const l=c.length-1;let d,_,S=0,C=l,M=0;for(;S<=C;)if(M=Math.floor((S+C)/2),d=c[M],_=c[M+1],d<=r){if(M===l||r<_)return M;S=M+1}else{if(!(d>r))throw new Br("Input is not a number.");C=M-1}return 0}class ll{constructor(r,l,d){this.type=r,this.input=l,this.labels=[],this.outputs=[];for(const[_,S]of d)this.labels.push(_),this.outputs.push(S)}static parse(r,l){if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");const d=l.parse(r[1],1,at);if(!d)return null;const _=[];let S=null;l.expectedType&&l.expectedType.kind!=="value"&&(S=l.expectedType);for(let C=1;C<r.length;C+=2){const M=C===1?-1/0:r[C],O=r[C+1],D=C,N=C+1;if(typeof M!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',D);if(_.length&&_[_.length-1][0]>=M)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',D);const V=l.parse(O,N,S);if(!V)return null;S=S||V.type,_.push([M,V])}return new ll(S,d,_)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const _=this.input.evaluate(r);if(_<=l[0])return d[0].evaluate(r);const S=l.length;return _>=l[S-1]?d[S-1].evaluate(r):d[Xl(l,_)].evaluate(r)}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Zi(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Nh,jh,sp=function(){if(jh)return Nh;function c(r,l,d,_){this.cx=3*r,this.bx=3*(d-r)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(_-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=r,this.p1y=l,this.p2x=d,this.p2y=_}return jh=1,Nh=c,c.prototype={sampleCurveX:function(r){return((this.ax*r+this.bx)*r+this.cx)*r},sampleCurveY:function(r){return((this.ay*r+this.by)*r+this.cy)*r},sampleCurveDerivativeX:function(r){return(3*this.ax*r+2*this.bx)*r+this.cx},solveCurveX:function(r,l){if(l===void 0&&(l=1e-6),r<0)return 0;if(r>1)return 1;for(var d=r,_=0;_<8;_++){var S=this.sampleCurveX(d)-r;if(Math.abs(S)<l)return d;var C=this.sampleCurveDerivativeX(d);if(Math.abs(C)<1e-6)break;d-=S/C}var M=0,O=1;for(d=r,_=0;_<20&&(S=this.sampleCurveX(d),!(Math.abs(S-r)<l));_++)r>S?M=d:O=d,d=.5*(O-M)+M;return d},solve:function(r,l){return this.sampleCurveY(this.solveCurveX(r,l))}},Nh}(),lp=Zi(sp);class sa{constructor(r,l,d,_,S){this.type=r,this.operator=l,this.interpolation=d,this.input=_,this.labels=[],this.outputs=[];for(const[C,M]of S)this.labels.push(C),this.outputs.push(M)}static interpolationFactor(r,l,d,_){let S=0;if(r.name==="exponential")S=Gu(l,r.base,d,_);else if(r.name==="linear")S=Gu(l,1,d,_);else if(r.name==="cubic-bezier"){const C=r.controlPoints;S=new lp(C[0],C[1],C[2],C[3]).solve(Gu(l,1,d,_))}return S}static parse(r,l){let[d,_,S,...C]=r;if(!Array.isArray(_)||_.length===0)return l.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const D=_[1];if(typeof D!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:D}}else{if(_[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const D=_.slice(1);if(D.length!==4||D.some(N=>typeof N!="number"||N<0||N>1))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:D}}}if(r.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${r.length-1}.`);if((r.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(S=l.parse(S,2,at),!S)return null;const M=[];let O=null;d!=="interpolate-hcl"&&d!=="interpolate-lab"||l.expectedType==Xn?l.expectedType&&l.expectedType.kind!=="value"&&(O=l.expectedType):O=Cn;for(let D=0;D<C.length;D+=2){const N=C[D],V=C[D+1],Z=D+3,Y=D+4;if(typeof N!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(M.length&&M[M.length-1][0]>=N)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Z);const Q=l.parse(V,Y,O);if(!Q)return null;O=O||Q.type,M.push([N,Q])}return ci(O,at)||ci(O,pn)||ci(O,Cn)||ci(O,Wn)||ci(O,rr)||ci(O,Xn)||ci(O,On)||ci(O,cr(at))?new sa(O,d,_,S,M):l.error(`Type ${Dn(O)} is not interpolatable.`)}evaluate(r){const l=this.labels,d=this.outputs;if(l.length===1)return d[0].evaluate(r);const _=this.input.evaluate(r);if(_<=l[0])return d[0].evaluate(r);const S=l.length;if(_>=l[S-1])return d[S-1].evaluate(r);const C=Xl(l,_),M=sa.interpolationFactor(this.interpolation,_,l[C],l[C+1]),O=d[C].evaluate(r),D=d[C+1].evaluate(r);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return Ji(O,D,M);case"color":return er.interpolate(O,D,M);case"padding":return gi.interpolate(O,D,M);case"colorArray":return Fi.interpolate(O,D,M);case"numberArray":return yi.interpolate(O,D,M);case"variableAnchorOffsetCollection":return ui.interpolate(O,D,M);case"array":return Fl(O,D,M);case"projectionDefinition":return qi.interpolate(O,D,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return er.interpolate(O,D,M,"hcl");case"colorArray":return Fi.interpolate(O,D,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return er.interpolate(O,D,M,"lab");case"colorArray":return Fi.interpolate(O,D,M,"lab")}}}eachChild(r){r(this.input);for(const l of this.outputs)r(l)}outputDefined(){return this.outputs.every(r=>r.outputDefined())}}function Gu(c,r,l,d){const _=d-l,S=c-l;return _===0?0:r===1?S/_:(Math.pow(r,S)-1)/(Math.pow(r,_)-1)}const Yo={color:er.interpolate,number:Ji,padding:gi.interpolate,numberArray:yi.interpolate,colorArray:Fi.interpolate,variableAnchorOffsetCollection:ui.interpolate,array:Fl};class Wl{constructor(r,l){this.type=r,this.args=l}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");let d=null;const _=l.expectedType;_&&_.kind!=="value"&&(d=_);const S=[];for(const M of r.slice(1)){const O=l.parse(M,1+S.length,d,void 0,{typeAnnotation:"omit"});if(!O)return null;d=d||O.type,S.push(O)}if(!d)throw new Error("No output type");const C=_&&S.some(M=>Yr(_,M.type));return new Wl(C?tn:d,S)}evaluate(r){let l,d=null,_=0;for(const S of this.args)if(_++,d=S.evaluate(r),d&&d instanceof Aa&&!d.available&&(l||(l=d.name),d=null,_===this.args.length&&(d=l)),d!==null)break;return d}eachChild(r){this.args.forEach(r)}outputDefined(){return this.args.every(r=>r.outputDefined())}}function Yl(c,r){return c==="=="||c==="!="?r.kind==="boolean"||r.kind==="string"||r.kind==="number"||r.kind==="null"||r.kind==="value":r.kind==="string"||r.kind==="number"||r.kind==="value"}function go(c,r,l,d){return d.compare(r,l)===0}function Kl(c,r,l){const d=c!=="=="&&c!=="!=";return class xT{constructor(S,C,M){this.type=an,this.lhs=S,this.rhs=C,this.collator=M,this.hasUntypedArgument=S.type.kind==="value"||C.type.kind==="value"}static parse(S,C){if(S.length!==3&&S.length!==4)return C.error("Expected two or three arguments.");const M=S[0];let O=C.parse(S[1],1,tn);if(!O)return null;if(!Yl(M,O.type))return C.concat(1).error(`"${M}" comparisons are not supported for type '${Dn(O.type)}'.`);let D=C.parse(S[2],2,tn);if(!D)return null;if(!Yl(M,D.type))return C.concat(2).error(`"${M}" comparisons are not supported for type '${Dn(D.type)}'.`);if(O.type.kind!==D.type.kind&&O.type.kind!=="value"&&D.type.kind!=="value")return C.error(`Cannot compare types '${Dn(O.type)}' and '${Dn(D.type)}'.`);d&&(O.type.kind==="value"&&D.type.kind!=="value"?O=new Fn(D.type,[O]):O.type.kind!=="value"&&D.type.kind==="value"&&(D=new Fn(O.type,[D])));let N=null;if(S.length===4){if(O.type.kind!=="string"&&D.type.kind!=="string"&&O.type.kind!=="value"&&D.type.kind!=="value")return C.error("Cannot use collator to compare non-string types.");if(N=C.parse(S[3],3,xr),!N)return null}return new xT(O,D,N)}evaluate(S){const C=this.lhs.evaluate(S),M=this.rhs.evaluate(S);if(d&&this.hasUntypedArgument){const O=Hr(C),D=Hr(M);if(O.kind!==D.kind||O.kind!=="string"&&O.kind!=="number")throw new Br(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${O.kind}, ${D.kind}) instead.`)}if(this.collator&&!d&&this.hasUntypedArgument){const O=Hr(C),D=Hr(M);if(O.kind!=="string"||D.kind!=="string")return r(S,C,M)}return this.collator?l(S,C,M,this.collator.evaluate(S)):r(S,C,M)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Fh=Kl("==",function(c,r,l){return r===l},go),cp=Kl("!=",function(c,r,l){return r!==l},function(c,r,l,d){return!go(0,r,l,d)}),Gf=Kl("<",function(c,r,l){return r<l},function(c,r,l,d){return d.compare(r,l)<0}),ig=Kl(">",function(c,r,l){return r>l},function(c,r,l,d){return d.compare(r,l)>0}),ag=Kl("<=",function(c,r,l){return r<=l},function(c,r,l,d){return d.compare(r,l)<=0}),og=Kl(">=",function(c,r,l){return r>=l},function(c,r,l,d){return d.compare(r,l)>=0});class $h{constructor(r,l,d){this.type=xr,this.locale=d,this.caseSensitive=r,this.diacriticSensitive=l}static parse(r,l){if(r.length!==2)return l.error("Expected one argument.");const d=r[1];if(typeof d!="object"||Array.isArray(d))return l.error("Collator options argument must be an object.");const _=l.parse(d["case-sensitive"]!==void 0&&d["case-sensitive"],1,an);if(!_)return null;const S=l.parse(d["diacritic-sensitive"]!==void 0&&d["diacritic-sensitive"],1,an);if(!S)return null;let C=null;return d.locale&&(C=l.parse(d.locale,1,Ht),!C)?null:new $h(_,S,C)}evaluate(r){return new al(this.caseSensitive.evaluate(r),this.diacriticSensitive.evaluate(r),this.locale?this.locale.evaluate(r):null)}eachChild(r){r(this.caseSensitive),r(this.diacriticSensitive),this.locale&&r(this.locale)}outputDefined(){return!1}}class Gc{constructor(r,l,d,_,S){this.type=Ht,this.number=r,this.locale=l,this.currency=d,this.minFractionDigits=_,this.maxFractionDigits=S}static parse(r,l){if(r.length!==3)return l.error("Expected two arguments.");const d=l.parse(r[1],1,at);if(!d)return null;const _=r[2];if(typeof _!="object"||Array.isArray(_))return l.error("NumberFormat options argument must be an object.");let S=null;if(_.locale&&(S=l.parse(_.locale,1,Ht),!S))return null;let C=null;if(_.currency&&(C=l.parse(_.currency,1,Ht),!C))return null;let M=null;if(_["min-fraction-digits"]&&(M=l.parse(_["min-fraction-digits"],1,at),!M))return null;let O=null;return _["max-fraction-digits"]&&(O=l.parse(_["max-fraction-digits"],1,at),!O)?null:new Gc(d,S,C,M,O)}evaluate(r){return new Intl.NumberFormat(this.locale?this.locale.evaluate(r):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(r):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(r):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(r):void 0}).format(this.number.evaluate(r))}eachChild(r){r(this.number),this.locale&&r(this.locale),this.currency&&r(this.currency),this.minFractionDigits&&r(this.minFractionDigits),this.maxFractionDigits&&r(this.maxFractionDigits)}outputDefined(){return!1}}class Vh{constructor(r){this.type=mi,this.sections=r}static parse(r,l){if(r.length<2)return l.error("Expected at least one argument.");const d=r[1];if(!Array.isArray(d)&&typeof d=="object")return l.error("First argument must be an image or text section.");const _=[];let S=!1;for(let C=1;C<=r.length-1;++C){const M=r[C];if(S&&typeof M=="object"&&!Array.isArray(M)){S=!1;let O=null;if(M["font-scale"]&&(O=l.parse(M["font-scale"],1,at),!O))return null;let D=null;if(M["text-font"]&&(D=l.parse(M["text-font"],1,cr(Ht)),!D))return null;let N=null;if(M["text-color"]&&(N=l.parse(M["text-color"],1,Cn),!N))return null;let V=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!$l.includes(M["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(V=l.parse(M["vertical-align"],1,Ht),!V)return null}const Z=_[_.length-1];Z.scale=O,Z.font=D,Z.textColor=N,Z.verticalAlign=V}else{const O=l.parse(r[C],1,tn);if(!O)return null;const D=O.type.kind;if(D!=="string"&&D!=="value"&&D!=="null"&&D!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,_.push({content:O,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Vh(_)}evaluate(r){return new ji(this.sections.map(l=>{const d=l.content.evaluate(r);return Hr(d)===lr?new ol("",d,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(r):null):new ol(Yn(d),null,l.scale?l.scale.evaluate(r):null,l.font?l.font.evaluate(r).join(","):null,l.textColor?l.textColor.evaluate(r):null,l.verticalAlign?l.verticalAlign.evaluate(r):null)}))}eachChild(r){for(const l of this.sections)r(l.content),l.scale&&r(l.scale),l.font&&r(l.font),l.textColor&&r(l.textColor),l.verticalAlign&&r(l.verticalAlign)}outputDefined(){return!1}}class Uh{constructor(r){this.type=lr,this.input=r}static parse(r,l){if(r.length!==2)return l.error("Expected two arguments.");const d=l.parse(r[1],1,Ht);return d?new Uh(d):l.error("No image name provided.")}evaluate(r){const l=this.input.evaluate(r),d=Aa.fromString(l);return d&&r.availableImages&&(d.available=r.availableImages.indexOf(l)>-1),d}eachChild(r){r(this.input)}outputDefined(){return!1}}class Hh{constructor(r){this.type=at,this.input=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=l.parse(r[1],1);return d?d.type.kind!=="array"&&d.type.kind!=="string"&&d.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${Dn(d.type)} instead.`):new Hh(d):null}evaluate(r){const l=this.input.evaluate(r);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Br(`Expected value to be of type string or array, but found ${Dn(Hr(l))} instead.`)}eachChild(r){r(this.input)}outputDefined(){return!1}}const yo=8192;function Zc(c,r){const l=(180+c[0])/360,d=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,_=Math.pow(2,r.z);return[Math.round(l*_*yo),Math.round(d*_*yo)]}function Zf(c,r){const l=Math.pow(2,r.z);return[(_=(c[0]/yo+r.x)/l,360*_-180),(d=(c[1]/yo+r.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*d)*Math.PI/180))-90)];var d,_}function Xc(c,r){c[0]=Math.min(c[0],r[0]),c[1]=Math.min(c[1],r[1]),c[2]=Math.max(c[2],r[0]),c[3]=Math.max(c[3],r[1])}function Wc(c,r){return!(c[0]<=r[0]||c[2]>=r[2]||c[1]<=r[1]||c[3]>=r[3])}function up(c,r,l){const d=c[0]-r[0],_=c[1]-r[1],S=c[0]-l[0],C=c[1]-l[1];return d*C-S*_==0&&d*S<=0&&_*C<=0}function Zu(c,r,l,d){return(_=[d[0]-l[0],d[1]-l[1]])[0]*(S=[r[0]-c[0],r[1]-c[1]])[1]-_[1]*S[0]!=0&&!(!Wf(c,r,l,d)||!Wf(l,d,c,r));var _,S}function Xf(c,r,l){for(const d of l)for(let _=0;_<d.length-1;++_)if(Zu(c,r,d[_],d[_+1]))return!0;return!1}function _o(c,r,l=!1){let d=!1;for(const M of r)for(let O=0;O<M.length-1;O++){if(up(c,M[O],M[O+1]))return l;(S=M[O])[1]>(_=c)[1]!=(C=M[O+1])[1]>_[1]&&_[0]<(C[0]-S[0])*(_[1]-S[1])/(C[1]-S[1])+S[0]&&(d=!d)}var _,S,C;return d}function hp(c,r){for(const l of r)if(_o(c,l))return!0;return!1}function fp(c,r){for(const l of c)if(!_o(l,r))return!1;for(let l=0;l<c.length-1;++l)if(Xf(c[l],c[l+1],r))return!1;return!0}function sg(c,r){for(const l of r)if(fp(c,l))return!0;return!1}function Wf(c,r,l,d){const _=d[0]-l[0],S=d[1]-l[1],C=(c[0]-l[0])*S-_*(c[1]-l[1]),M=(r[0]-l[0])*S-_*(r[1]-l[1]);return C>0&&M<0||C<0&&M>0}function Yc(c,r,l){const d=[];for(let _=0;_<c.length;_++){const S=[];for(let C=0;C<c[_].length;C++){const M=Zc(c[_][C],l);Xc(r,M),S.push(M)}d.push(S)}return d}function Kc(c,r,l){const d=[];for(let _=0;_<c.length;_++){const S=Yc(c[_],r,l);d.push(S)}return d}function Qc(c,r,l,d){if(c[0]<l[0]||c[0]>l[2]){const _=.5*d;let S=c[0]-l[0]>_?-d:l[0]-c[0]>_?d:0;S===0&&(S=c[0]-l[2]>_?-d:l[2]-c[0]>_?d:0),c[0]+=S}Xc(r,c)}function dp(c,r,l,d){const _=Math.pow(2,d.z)*yo,S=[d.x*yo,d.y*yo],C=[];for(const M of c)for(const O of M){const D=[O.x+S[0],O.y+S[1]];Qc(D,r,l,_),C.push(D)}return C}function Jc(c,r,l,d){const _=Math.pow(2,d.z)*yo,S=[d.x*yo,d.y*yo],C=[];for(const O of c){const D=[];for(const N of O){const V=[N.x+S[0],N.y+S[1]];Xc(r,V),D.push(V)}C.push(D)}if(r[2]-r[0]<=_/2){(M=r)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const O of C)for(const D of O)Qc(D,r,l,_)}var M;return C}class Ss{constructor(r,l){this.type=an,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${r.length-1} instead.`);if(wr(r[1])){const d=r[1];if(d.type==="FeatureCollection"){const _=[];for(const S of d.features){const{type:C,coordinates:M}=S.geometry;C==="Polygon"&&_.push(M),C==="MultiPolygon"&&_.push(...M)}if(_.length)return new Ss(d,{type:"MultiPolygon",coordinates:_})}else if(d.type==="Feature"){const _=d.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Ss(d,d.geometry)}else if(d.type==="Polygon"||d.type==="MultiPolygon")return new Ss(d,d)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,d){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=l.canonicalID();if(d.type==="Polygon"){const M=Yc(d.coordinates,S,C),O=dp(l.geometry(),_,S,C);if(!Wc(_,S))return!1;for(const D of O)if(!_o(D,M))return!1}if(d.type==="MultiPolygon"){const M=Kc(d.coordinates,S,C),O=dp(l.geometry(),_,S,C);if(!Wc(_,S))return!1;for(const D of O)if(!hp(D,M))return!1}return!0}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,d){const _=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],C=l.canonicalID();if(d.type==="Polygon"){const M=Yc(d.coordinates,S,C),O=Jc(l.geometry(),_,S,C);if(!Wc(_,S))return!1;for(const D of O)if(!fp(D,M))return!1}if(d.type==="MultiPolygon"){const M=Kc(d.coordinates,S,C),O=Jc(l.geometry(),_,S,C);if(!Wc(_,S))return!1;for(const D of O)if(!sg(D,M))return!1}return!0}(r,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Yf=class{constructor(c=[],r=(l,d)=>l<d?-1:l>d?1:0){if(this.data=c,this.length=this.data.length,this.compare=r,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],r=this.data.pop();return--this.length>0&&(this.data[0]=r,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:r,compare:l}=this,d=r[c];for(;c>0;){const _=c-1>>1,S=r[_];if(l(d,S)>=0)break;r[c]=S,c=_}r[c]=d}_down(c){const{data:r,compare:l}=this,d=this.length>>1,_=r[c];for(;c<d;){let S=1+(c<<1);const C=S+1;if(C<this.length&&l(r[C],r[S])<0&&(S=C),l(r[S],_)>=0)break;r[c]=r[S],c=S}r[c]=_}};function qh(c,r,l=0,d=c.length-1,_=Kf){for(;d>l;){if(d-l>600){const O=d-l+1,D=r-l+1,N=Math.log(O),V=.5*Math.exp(2*N/3),Z=.5*Math.sqrt(N*V*(O-V)/O)*(D-O/2<0?-1:1);qh(c,r,Math.max(l,Math.floor(r-D*V/O+Z)),Math.min(d,Math.floor(r+(O-D)*V/O+Z)),_)}const S=c[r];let C=l,M=d;for(cl(c,l,r),_(c[d],S)>0&&cl(c,l,d);C<M;){for(cl(c,C,M),C++,M--;_(c[C],S)<0;)C++;for(;_(c[M],S)>0;)M--}_(c[l],S)===0?cl(c,l,M):(M++,cl(c,M,d)),M<=r&&(l=M+1),r<=M&&(d=M-1)}}function cl(c,r,l){const d=c[r];c[r]=c[l],c[l]=d}function Kf(c,r){return c<r?-1:c>r?1:0}function Xu(c,r){if(c.length<=1)return[c];const l=[];let d,_;for(const S of c){const C=lg(S);C!==0&&(S.area=Math.abs(C),_===void 0&&(_=C<0),_===C<0?(d&&l.push(d),d=[S]):d.push(S))}if(d&&l.push(d),r>1)for(let S=0;S<l.length;S++)l[S].length<=r||(qh(l[S],r,1,l[S].length-1,pp),l[S]=l[S].slice(0,r));return l}function pp(c,r){return r.area-c.area}function lg(c){let r=0;for(let l,d,_=0,S=c.length,C=S-1;_<S;C=_++)l=c[_],d=c[C],r+=(d.x-l.x)*(l.y+d.y);return r}const Qf=1/298.257223563,mp=Qf*(2-Qf),gp=Math.PI/180;class Jf{constructor(r){const l=6378.137*gp*1e3,d=Math.cos(r*gp),_=1/(1-mp*(1-d*d)),S=Math.sqrt(_);this.kx=l*S*d,this.ky=l*S*_*(1-mp)}distance(r,l){const d=this.wrap(r[0]-l[0])*this.kx,_=(r[1]-l[1])*this.ky;return Math.sqrt(d*d+_*_)}pointOnLine(r,l){let d,_,S,C,M=1/0;for(let O=0;O<r.length-1;O++){let D=r[O][0],N=r[O][1],V=this.wrap(r[O+1][0]-D)*this.kx,Z=(r[O+1][1]-N)*this.ky,Y=0;V===0&&Z===0||(Y=(this.wrap(l[0]-D)*this.kx*V+(l[1]-N)*this.ky*Z)/(V*V+Z*Z),Y>1?(D=r[O+1][0],N=r[O+1][1]):Y>0&&(D+=V/this.kx*Y,N+=Z/this.ky*Y)),V=this.wrap(l[0]-D)*this.kx,Z=(l[1]-N)*this.ky;const Q=V*V+Z*Z;Q<M&&(M=Q,d=D,_=N,S=O,C=Y)}return{point:[d,_],index:S,t:Math.max(0,Math.min(1,C))}}wrap(r){for(;r<-180;)r+=360;for(;r>180;)r-=360;return r}}function Fa(c,r){return r[0]-c[0]}function Kn(c){return c[1]-c[0]+1}function Ko(c,r){return c[1]>=c[0]&&c[1]<r}function Gh(c,r){if(c[0]>c[1])return[null,null];const l=Kn(c);if(r){if(l===2)return[c,null];const _=Math.floor(l/2);return[[c[0],c[0]+_],[c[0]+_,c[1]]]}if(l===1)return[c,null];const d=Math.floor(l/2)-1;return[[c[0],c[0]+d],[c[0]+d+1,c[1]]]}function Zh(c,r){if(!Ko(r,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let d=r[0];d<=r[1];++d)Xc(l,c[d]);return l}function Xh(c){const r=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const d of l)Xc(r,d);return r}function Wh(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function ed(c,r,l){if(!Wh(c)||!Wh(r))return NaN;let d=0,_=0;return c[2]<r[0]&&(d=r[0]-c[2]),c[0]>r[2]&&(d=c[0]-r[2]),c[1]>r[3]&&(_=c[1]-r[3]),c[3]<r[1]&&(_=r[1]-c[3]),l.distance([0,0],[d,_])}function vo(c,r,l){const d=l.pointOnLine(r,c);return l.distance(c,d.point)}function Wu(c,r,l,d,_){const S=Math.min(vo(c,[l,d],_),vo(r,[l,d],_)),C=Math.min(vo(l,[c,r],_),vo(d,[c,r],_));return Math.min(S,C)}function Yu(c,r,l,d,_){if(!Ko(r,c.length)||!Ko(d,l.length))return 1/0;let S=1/0;for(let C=r[0];C<r[1];++C){const M=c[C],O=c[C+1];for(let D=d[0];D<d[1];++D){const N=l[D],V=l[D+1];if(Zu(M,O,N,V))return 0;S=Math.min(S,Wu(M,O,N,V,_))}}return S}function td(c,r,l,d,_){if(!Ko(r,c.length)||!Ko(d,l.length))return NaN;let S=1/0;for(let C=r[0];C<=r[1];++C)for(let M=d[0];M<=d[1];++M)if(S=Math.min(S,_.distance(c[C],l[M])),S===0)return S;return S}function yp(c,r,l){if(_o(c,r,!0))return 0;let d=1/0;for(const _ of r){const S=_[0],C=_[_.length-1];if(S!==C&&(d=Math.min(d,vo(c,[C,S],l)),d===0))return d;const M=l.pointOnLine(_,c);if(d=Math.min(d,l.distance(c,M.point)),d===0)return d}return d}function Ql(c,r,l,d){if(!Ko(r,c.length))return NaN;for(let S=r[0];S<=r[1];++S)if(_o(c[S],l,!0))return 0;let _=1/0;for(let S=r[0];S<r[1];++S){const C=c[S],M=c[S+1];for(const O of l)for(let D=0,N=O.length,V=N-1;D<N;V=D++){const Z=O[V],Y=O[D];if(Zu(C,M,Z,Y))return 0;_=Math.min(_,Wu(C,M,Z,Y,d))}}return _}function Jl(c,r){for(const l of c)for(const d of l)if(_o(d,r,!0))return!0;return!1}function nd(c,r,l,d=1/0){const _=Xh(c),S=Xh(r);if(d!==1/0&&ed(_,S,l)>=d)return d;if(Wc(_,S)){if(Jl(c,r))return 0}else if(Jl(r,c))return 0;let C=1/0;for(const M of c)for(let O=0,D=M.length,N=D-1;O<D;N=O++){const V=M[N],Z=M[O];for(const Y of r)for(let Q=0,re=Y.length,fe=re-1;Q<re;fe=Q++){const be=Y[fe],$e=Y[Q];if(Zu(V,Z,be,$e))return 0;C=Math.min(C,Wu(V,Z,be,$e,l))}}return C}function rd(c,r,l,d,_,S){if(!S)return;const C=ed(Zh(d,S),_,l);C<r&&c.push([C,S,[0,0]])}function Qo(c,r,l,d,_,S,C){if(!S||!C)return;const M=ed(Zh(d,S),Zh(_,C),l);M<r&&c.push([M,S,C])}function Ku(c,r,l,d,_=1/0){let S=Math.min(d.distance(c[0],l[0][0]),_);if(S===0)return S;const C=new Yf([[0,[0,c.length-1],[0,0]]],Fa),M=Xh(l);for(;C.length>0;){const O=C.pop();if(O[0]>=S)continue;const D=O[1],N=r?50:100;if(Kn(D)<=N){if(!Ko(D,c.length))return NaN;if(r){const V=Ql(c,D,l,d);if(isNaN(V)||V===0)return V;S=Math.min(S,V)}else for(let V=D[0];V<=D[1];++V){const Z=yp(c[V],l,d);if(S=Math.min(S,Z),S===0)return 0}}else{const V=Gh(D,r);rd(C,S,d,c,M,V[0]),rd(C,S,d,c,M,V[1])}}return S}function Qu(c,r,l,d,_,S=1/0){let C=Math.min(S,_.distance(c[0],l[0]));if(C===0)return C;const M=new Yf([[0,[0,c.length-1],[0,l.length-1]]],Fa);for(;M.length>0;){const O=M.pop();if(O[0]>=C)continue;const D=O[1],N=O[2],V=r?50:100,Z=d?50:100;if(Kn(D)<=V&&Kn(N)<=Z){if(!Ko(D,c.length)&&Ko(N,l.length))return NaN;let Y;if(r&&d)Y=Yu(c,D,l,N,_),C=Math.min(C,Y);else if(r&&!d){const Q=c.slice(D[0],D[1]+1);for(let re=N[0];re<=N[1];++re)if(Y=vo(l[re],Q,_),C=Math.min(C,Y),C===0)return C}else if(!r&&d){const Q=l.slice(N[0],N[1]+1);for(let re=D[0];re<=D[1];++re)if(Y=vo(c[re],Q,_),C=Math.min(C,Y),C===0)return C}else Y=td(c,D,l,N,_),C=Math.min(C,Y)}else{const Y=Gh(D,r),Q=Gh(N,d);Qo(M,C,_,c,l,Y[0],Q[0]),Qo(M,C,_,c,l,Y[0],Q[1]),Qo(M,C,_,c,l,Y[1],Q[0]),Qo(M,C,_,c,l,Y[1],Q[1])}}return C}function Yh(c){return c.type==="MultiPolygon"?c.coordinates.map(r=>({type:"Polygon",coordinates:r})):c.type==="MultiLineString"?c.coordinates.map(r=>({type:"LineString",coordinates:r})):c.type==="MultiPoint"?c.coordinates.map(r=>({type:"Point",coordinates:r})):[c]}class ec{constructor(r,l){this.type=at,this.geojson=r,this.geometries=l}static parse(r,l){if(r.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${r.length-1} instead.`);if(wr(r[1])){const d=r[1];if(d.type==="FeatureCollection")return new ec(d,d.features.map(_=>Yh(_.geometry)).flat());if(d.type==="Feature")return new ec(d,Yh(d.geometry));if("type"in d&&"coordinates"in d)return new ec(d,Yh(d))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(r){if(r.geometry()!=null&&r.canonicalID()!=null){if(r.geometryType()==="Point")return function(l,d){const _=l.geometry(),S=_.flat().map(O=>Zf([O.x,O.y],l.canonical));if(_.length===0)return NaN;const C=new Jf(S[0][1]);let M=1/0;for(const O of d){switch(O.type){case"Point":M=Math.min(M,Qu(S,!1,[O.coordinates],!1,C,M));break;case"LineString":M=Math.min(M,Qu(S,!1,O.coordinates,!0,C,M));break;case"Polygon":M=Math.min(M,Ku(S,!1,O.coordinates,C,M))}if(M===0)return M}return M}(r,this.geometries);if(r.geometryType()==="LineString")return function(l,d){const _=l.geometry(),S=_.flat().map(O=>Zf([O.x,O.y],l.canonical));if(_.length===0)return NaN;const C=new Jf(S[0][1]);let M=1/0;for(const O of d){switch(O.type){case"Point":M=Math.min(M,Qu(S,!0,[O.coordinates],!1,C,M));break;case"LineString":M=Math.min(M,Qu(S,!0,O.coordinates,!0,C,M));break;case"Polygon":M=Math.min(M,Ku(S,!0,O.coordinates,C,M))}if(M===0)return M}return M}(r,this.geometries);if(r.geometryType()==="Polygon")return function(l,d){const _=l.geometry();if(_.length===0||_[0].length===0)return NaN;const S=Xu(_,0).map(O=>O.map(D=>D.map(N=>Zf([N.x,N.y],l.canonical)))),C=new Jf(S[0][0][0][1]);let M=1/0;for(const O of d)for(const D of S){switch(O.type){case"Point":M=Math.min(M,Ku([O.coordinates],!1,D,C,M));break;case"LineString":M=Math.min(M,Ku(O.coordinates,!0,D,C,M));break;case"Polygon":M=Math.min(M,nd(D,O.coordinates,C,M))}if(M===0)return M}return M}(r,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class Kh{constructor(r){this.type=tn,this.key=r}static parse(r,l){if(r.length!==2)return l.error(`Expected 1 argument, but found ${r.length-1} instead.`);const d=r[1];return d==null?l.error("Global state property must be defined."):typeof d!="string"?l.error(`Global state property must be string, but found ${typeof r[1]} instead.`):new Kh(d)}evaluate(r){var l;const d=(l=r.globals)===null||l===void 0?void 0:l.globalState;return d&&Object.keys(d).length!==0?xs(d,this.key):null}eachChild(){}outputDefined(){return!1}}const eu={"==":Fh,"!=":cp,">":ig,"<":Gf,">=":og,"<=":ag,array:Fn,at:Hl,boolean:Fn,case:Gi,coalesce:Wl,collator:$h,format:Vh,image:Uh,in:ql,"index-of":qc,interpolate:sa,"interpolate-hcl":sa,"interpolate-lab":sa,length:Hh,let:sl,literal:Rn,match:Gl,number:Fn,"number-format":Gc,object:Fn,slice:Zl,step:ll,string:Fn,"to-boolean":_i,"to-color":_i,"to-number":_i,"to-string":_i,var:Ul,within:Ss,distance:ec,"global-state":Kh};class Ya{constructor(r,l,d,_){this.name=r,this.type=l,this._evaluate=d,this.args=_}evaluate(r){return this._evaluate(r,this.args)}eachChild(r){this.args.forEach(r)}outputDefined(){return!1}static parse(r,l){const d=r[0],_=Ya.definitions[d];if(!_)return l.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(_)?_[0]:_.type,C=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,M=C.filter(([D])=>!Array.isArray(D)||D.length===r.length-1);let O=null;for(const[D,N]of M){O=new qu(l.registry,Pa,l.path,null,l.scope);const V=[];let Z=!1;for(let Y=1;Y<r.length;Y++){const Q=r[Y],re=Array.isArray(D)?D[Y-1]:D.type,fe=O.parse(Q,1+V.length,re);if(!fe){Z=!0;break}V.push(fe)}if(!Z)if(Array.isArray(D)&&D.length!==V.length)O.error(`Expected ${D.length} arguments, but found ${V.length} instead.`);else{for(let Y=0;Y<V.length;Y++){const Q=Array.isArray(D)?D[Y]:D.type,re=V[Y];O.concat(Y+1).checkSubtype(Q,re.type)}if(O.errors.length===0)return new Ya(d,S,N,V)}}if(M.length===1)l.errors.push(...O.errors);else{const D=(M.length?M:C).map(([V])=>{return Z=V,Array.isArray(Z)?`(${Z.map(Dn).join(", ")})`:`(${Dn(Z.type)}...)`;var Z}).join(" | "),N=[];for(let V=1;V<r.length;V++){const Z=l.parse(r[V],1+N.length);if(!Z)return null;N.push(Dn(Z.type))}l.error(`Expected arguments of type ${D}, but found (${N.join(", ")}) instead.`)}return null}static register(r,l){Ya.definitions=l;for(const d in l)r[d]=Ya}}function id(c,[r,l,d,_]){r=r.evaluate(c),l=l.evaluate(c),d=d.evaluate(c);const S=_?_.evaluate(c):1,C=mo(r,l,d,S);if(C)throw new Br(C);return new er(r/255,l/255,d/255,S,!1)}function Qh(c,r){return c in r}function Ka(c,r){const l=r[c];return l===void 0?null:l}function ul(c){return{type:c}}function Pa(c){if(c instanceof Ul)return Pa(c.boundExpression);if(c instanceof Ya&&c.name==="error"||c instanceof $h||c instanceof Ss||c instanceof ec||c instanceof Kh)return!1;const r=c instanceof _i||c instanceof Fn;let l=!0;return c.eachChild(d=>{l=r?l&&Pa(d):l&&d instanceof Rn}),!!l&&Ra(c)&&tu(c,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])}function Ra(c){if(c instanceof Ya&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Ss||c instanceof ec)return!1;let r=!0;return c.eachChild(l=>{r&&!Ra(l)&&(r=!1)}),r}function Jo(c){if(c instanceof Ya&&c.name==="feature-state")return!1;let r=!0;return c.eachChild(l=>{r&&!Jo(l)&&(r=!1)}),r}function tu(c,r){if(c instanceof Ya&&r.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild(d=>{l&&!tu(d,r)&&(l=!1)}),l}function tc(c){return{result:"success",value:c}}function Cs(c){return{result:"error",value:c}}function hl(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function nc(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Ju(c){return!!c.expression&&c.expression.interpolated}function qn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Ts(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&Hr(c)===Bn}function Jh(c){return c}function Oa(c,r){const l=c.stops&&typeof c.stops[0][0]=="object",d=l||!(l||c.property!==void 0),_=c.type||(Ju(r)?"exponential":"interval"),S=function(N){switch(N.type){case"color":return er.parse;case"padding":return gi.parse;case"numberArray":return yi.parse;case"colorArray":return Fi.parse;default:return null}}(r);if(S&&((c=dn({},c)).stops&&(c.stops=c.stops.map(N=>[N[0],S(N[1])])),c.default=S(c.default?c.default:r.default)),c.colorSpace&&(C=c.colorSpace)!=="rgb"&&C!=="hcl"&&C!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var C;const M=function(N){switch(N){case"exponential":return eh;case"interval":return _p;case"categorical":return Es;case"identity":return ic;default:throw new Error(`Unknown function type "${N}"`)}}(_);let O,D;if(_==="categorical"){O=Object.create(null);for(const N of c.stops)O[N[0]]=N[1];D=typeof c.stops[0][0]}if(l){const N={},V=[];for(let Q=0;Q<c.stops.length;Q++){const re=c.stops[Q],fe=re[0].zoom;N[fe]===void 0&&(N[fe]={zoom:fe,type:c.type,property:c.property,default:c.default,stops:[]},V.push(fe)),N[fe].stops.push([re[0].value,re[1]])}const Z=[];for(const Q of V)Z.push([N[Q].zoom,Oa(N[Q],r)]);const Y={name:"linear"};return{kind:"composite",interpolationType:Y,interpolationFactor:sa.interpolationFactor.bind(void 0,Y),zoomStops:Z.map(Q=>Q[0]),evaluate:({zoom:Q},re)=>eh({stops:Z,base:c.base},r,Q).evaluate(Q,re)}}if(d){const N=_==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:N,interpolationFactor:sa.interpolationFactor.bind(void 0,N),zoomStops:c.stops.map(V=>V[0]),evaluate:({zoom:V})=>M(c,r,V,O,D)}}return{kind:"source",evaluate(N,V){const Z=V&&V.properties?V.properties[c.property]:void 0;return Z===void 0?rc(c.default,r.default):M(c,r,Z,O,D)}}}function rc(c,r,l){return c!==void 0?c:r!==void 0?r:l!==void 0?l:void 0}function Es(c,r,l,d,_){return rc(typeof l===_?d[l]:void 0,c.default,r.default)}function _p(c,r,l){if(qn(l)!=="number")return rc(c.default,r.default);const d=c.stops.length;if(d===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[d-1][0])return c.stops[d-1][1];const _=Xl(c.stops.map(S=>S[0]),l);return c.stops[_][1]}function eh(c,r,l){const d=c.base!==void 0?c.base:1;if(qn(l)!=="number")return rc(c.default,r.default);const _=c.stops.length;if(_===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[_-1][0])return c.stops[_-1][1];const S=Xl(c.stops.map(N=>N[0]),l),C=function(N,V,Z,Y){const Q=Y-Z,re=N-Z;return Q===0?0:V===1?re/Q:(Math.pow(V,re)-1)/(Math.pow(V,Q)-1)}(l,d,c.stops[S][0],c.stops[S+1][0]),M=c.stops[S][1],O=c.stops[S+1][1],D=Yo[r.type]||Jh;return typeof M.evaluate=="function"?{evaluate(...N){const V=M.evaluate.apply(void 0,N),Z=O.evaluate.apply(void 0,N);if(V!==void 0&&Z!==void 0)return D(V,Z,C,c.colorSpace)}}:D(M,O,C,c.colorSpace)}function ic(c,r,l){switch(r.type){case"color":l=er.parse(l);break;case"formatted":l=ji.fromString(l.toString());break;case"resolvedImage":l=Aa.fromString(l.toString());break;case"padding":l=gi.parse(l);break;case"colorArray":l=Fi.parse(l);break;case"numberArray":l=yi.parse(l);break;default:qn(l)===r.type||r.type==="enum"&&r.values[l]||(l=void 0)}return rc(l,c.default,r.default)}Ya.register(eu,{error:[{kind:"error"},[Ht],(c,[r])=>{throw new Br(r.evaluate(c))}],typeof:[Ht,[tn],(c,[r])=>Dn(Hr(r.evaluate(c)))],"to-rgba":[cr(at,4),[Cn],(c,[r])=>{const[l,d,_,S]=r.evaluate(c).rgb;return[255*l,255*d,255*_,S]}],rgb:[Cn,[at,at,at],id],rgba:[Cn,[at,at,at,at],id],has:{type:an,overloads:[[[Ht],(c,[r])=>Qh(r.evaluate(c),c.properties())],[[Ht,Bn],(c,[r,l])=>Qh(r.evaluate(c),l.evaluate(c))]]},get:{type:tn,overloads:[[[Ht],(c,[r])=>Ka(r.evaluate(c),c.properties())],[[Ht,Bn],(c,[r,l])=>Ka(r.evaluate(c),l.evaluate(c))]]},"feature-state":[tn,[Ht],(c,[r])=>Ka(r.evaluate(c),c.featureState||{})],properties:[Bn,[],c=>c.properties()],"geometry-type":[Ht,[],c=>c.geometryType()],id:[tn,[],c=>c.id()],zoom:[at,[],c=>c.globals.zoom],"heatmap-density":[at,[],c=>c.globals.heatmapDensity||0],"line-progress":[at,[],c=>c.globals.lineProgress||0],accumulated:[tn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[at,ul(at),(c,r)=>{let l=0;for(const d of r)l+=d.evaluate(c);return l}],"*":[at,ul(at),(c,r)=>{let l=1;for(const d of r)l*=d.evaluate(c);return l}],"-":{type:at,overloads:[[[at,at],(c,[r,l])=>r.evaluate(c)-l.evaluate(c)],[[at],(c,[r])=>-r.evaluate(c)]]},"/":[at,[at,at],(c,[r,l])=>r.evaluate(c)/l.evaluate(c)],"%":[at,[at,at],(c,[r,l])=>r.evaluate(c)%l.evaluate(c)],ln2:[at,[],()=>Math.LN2],pi:[at,[],()=>Math.PI],e:[at,[],()=>Math.E],"^":[at,[at,at],(c,[r,l])=>Math.pow(r.evaluate(c),l.evaluate(c))],sqrt:[at,[at],(c,[r])=>Math.sqrt(r.evaluate(c))],log10:[at,[at],(c,[r])=>Math.log(r.evaluate(c))/Math.LN10],ln:[at,[at],(c,[r])=>Math.log(r.evaluate(c))],log2:[at,[at],(c,[r])=>Math.log(r.evaluate(c))/Math.LN2],sin:[at,[at],(c,[r])=>Math.sin(r.evaluate(c))],cos:[at,[at],(c,[r])=>Math.cos(r.evaluate(c))],tan:[at,[at],(c,[r])=>Math.tan(r.evaluate(c))],asin:[at,[at],(c,[r])=>Math.asin(r.evaluate(c))],acos:[at,[at],(c,[r])=>Math.acos(r.evaluate(c))],atan:[at,[at],(c,[r])=>Math.atan(r.evaluate(c))],min:[at,ul(at),(c,r)=>Math.min(...r.map(l=>l.evaluate(c)))],max:[at,ul(at),(c,r)=>Math.max(...r.map(l=>l.evaluate(c)))],abs:[at,[at],(c,[r])=>Math.abs(r.evaluate(c))],round:[at,[at],(c,[r])=>{const l=r.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[at,[at],(c,[r])=>Math.floor(r.evaluate(c))],ceil:[at,[at],(c,[r])=>Math.ceil(r.evaluate(c))],"filter-==":[an,[Ht,tn],(c,[r,l])=>c.properties()[r.value]===l.value],"filter-id-==":[an,[tn],(c,[r])=>c.id()===r.value],"filter-type-==":[an,[Ht],(c,[r])=>c.geometryType()===r.value],"filter-<":[an,[Ht,tn],(c,[r,l])=>{const d=c.properties()[r.value],_=l.value;return typeof d==typeof _&&d<_}],"filter-id-<":[an,[tn],(c,[r])=>{const l=c.id(),d=r.value;return typeof l==typeof d&&l<d}],"filter->":[an,[Ht,tn],(c,[r,l])=>{const d=c.properties()[r.value],_=l.value;return typeof d==typeof _&&d>_}],"filter-id->":[an,[tn],(c,[r])=>{const l=c.id(),d=r.value;return typeof l==typeof d&&l>d}],"filter-<=":[an,[Ht,tn],(c,[r,l])=>{const d=c.properties()[r.value],_=l.value;return typeof d==typeof _&&d<=_}],"filter-id-<=":[an,[tn],(c,[r])=>{const l=c.id(),d=r.value;return typeof l==typeof d&&l<=d}],"filter->=":[an,[Ht,tn],(c,[r,l])=>{const d=c.properties()[r.value],_=l.value;return typeof d==typeof _&&d>=_}],"filter-id->=":[an,[tn],(c,[r])=>{const l=c.id(),d=r.value;return typeof l==typeof d&&l>=d}],"filter-has":[an,[tn],(c,[r])=>r.value in c.properties()],"filter-has-id":[an,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[an,[cr(Ht)],(c,[r])=>r.value.indexOf(c.geometryType())>=0],"filter-id-in":[an,[cr(tn)],(c,[r])=>r.value.indexOf(c.id())>=0],"filter-in-small":[an,[Ht,cr(tn)],(c,[r,l])=>l.value.indexOf(c.properties()[r.value])>=0],"filter-in-large":[an,[Ht,cr(tn)],(c,[r,l])=>function(d,_,S,C){for(;S<=C;){const M=S+C>>1;if(_[M]===d)return!0;_[M]>d?C=M-1:S=M+1}return!1}(c.properties()[r.value],l.value,0,l.value.length-1)],all:{type:an,overloads:[[[an,an],(c,[r,l])=>r.evaluate(c)&&l.evaluate(c)],[ul(an),(c,r)=>{for(const l of r)if(!l.evaluate(c))return!1;return!0}]]},any:{type:an,overloads:[[[an,an],(c,[r,l])=>r.evaluate(c)||l.evaluate(c)],[ul(an),(c,r)=>{for(const l of r)if(l.evaluate(c))return!0;return!1}]]},"!":[an,[an],(c,[r])=>!r.evaluate(c)],"is-supported-script":[an,[Ht],(c,[r])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(r.evaluate(c))}],upcase:[Ht,[Ht],(c,[r])=>r.evaluate(c).toUpperCase()],downcase:[Ht,[Ht],(c,[r])=>r.evaluate(c).toLowerCase()],concat:[Ht,ul(tn),(c,r)=>r.map(l=>Yn(l.evaluate(c))).join("")],"resolved-locale":[Ht,[xr],(c,[r])=>r.evaluate(c).resolvedLocale()]});class nu{constructor(r,l){this.expression=r,this._warningHistory={},this._evaluator=new Vl,this._defaultValue=l?function(d){if(d.type==="color"&&Ts(d.default))return new er(0,0,0,0);switch(d.type){case"color":return er.parse(d.default)||null;case"padding":return gi.parse(d.default)||null;case"numberArray":return yi.parse(d.default)||null;case"colorArray":return Fi.parse(d.default)||null;case"variableAnchorOffsetCollection":return ui.parse(d.default)||null;case"projectionDefinition":return qi.parse(d.default)||null;default:return d.default===void 0?null:d.default}}(l):null,this._enumValues=l&&l.type==="enum"?l.values:null}evaluateWithoutErrorHandling(r,l,d,_,S,C){return this._evaluator.globals=r,this._evaluator.feature=l,this._evaluator.featureState=d,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C,this.expression.evaluate(this._evaluator)}evaluate(r,l,d,_,S,C){this._evaluator.globals=r,this._evaluator.feature=l||null,this._evaluator.featureState=d||null,this._evaluator.canonical=_,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=C||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Br(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function ac(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in eu}function Ms(c,r){const l=new qu(eu,Pa,[],r?function(_){const S={color:Cn,string:Ht,number:at,enum:Ht,boolean:an,formatted:mi,padding:Wn,numberArray:rr,colorArray:Xn,projectionDefinition:pn,resolvedImage:lr,variableAnchorOffsetCollection:On};return _.type==="array"?cr(S[_.value]||tn,_.length):S[_.type]}(r):void 0),d=l.parse(c,void 0,void 0,void 0,r&&r.type==="string"?{typeAnnotation:"coerce"}:void 0);return d?tc(new nu(d,r)):Cs(l.errors)}class fl{constructor(r,l){this.kind=r,this._styleExpression=l,this.isStateDependent=r!=="constant"&&!Jo(l.expression)}evaluateWithoutErrorHandling(r,l,d,_,S,C){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,_,S,C)}evaluate(r,l,d,_,S,C){return this._styleExpression.evaluate(r,l,d,_,S,C)}}class oc{constructor(r,l,d,_){this.kind=r,this.zoomStops=d,this._styleExpression=l,this.isStateDependent=r!=="camera"&&!Jo(l.expression),this.interpolationType=_}evaluateWithoutErrorHandling(r,l,d,_,S,C){return this._styleExpression.evaluateWithoutErrorHandling(r,l,d,_,S,C)}evaluate(r,l,d,_,S,C){return this._styleExpression.evaluate(r,l,d,_,S,C)}interpolationFactor(r,l,d){return this.interpolationType?sa.interpolationFactor(this.interpolationType,r,l,d):0}}function ru(c,r){const l=Ms(c,r);if(l.result==="error")return l;const d=l.value.expression,_=Ra(d);if(!_&&!hl(r))return Cs([new cn("","data expressions not supported")]);const S=tu(d,["zoom"]);if(!S&&!nc(r))return Cs([new cn("","zoom expressions not supported")]);const C=ca(d);return C||S?C instanceof cn?Cs([C]):C instanceof sa&&!Ju(r)?Cs([new cn("",'"interpolate" expressions cannot be used with this property')]):tc(C?new oc(_?"camera":"composite",l.value,C.labels,C instanceof sa?C.interpolation:void 0):new fl(_?"constant":"source",l.value)):Cs([new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class la{constructor(r,l){this._parameters=r,this._specification=l,dn(this,Oa(this._parameters,this._specification))}static deserialize(r){return new la(r._parameters,r._specification)}static serialize(r){return{_parameters:r._parameters,_specification:r._specification}}}function ca(c){let r=null;if(c instanceof sl)r=ca(c.result);else if(c instanceof Wl){for(const l of c.args)if(r=ca(l),r)break}else(c instanceof ll||c instanceof sa)&&c.input instanceof Ya&&c.input.name==="zoom"&&(r=c);return r instanceof cn||c.eachChild(l=>{const d=ca(l);d instanceof cn?r=d:!r&&d?r=new cn("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):r&&d&&r!==d&&(r=new cn("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),r}function Ro(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const r of c.slice(1))if(!Ro(r)&&typeof r!="boolean")return!1;return!0;default:return!0}}const Oo={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function Qa(c){if(c==null)return{filter:()=>!0,needGeometry:!1};Ro(c)||(c=iu(c));const r=Ms(c,Oo);if(r.result==="error")throw new Error(r.value.map(l=>`${l.key}: ${l.message}`).join(", "));return{filter:(l,d,_)=>r.value.evaluate(l,d,{},_),needGeometry:ad(c)}}function es(c,r){return c<r?-1:c>r?1:0}function ad(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let r=1;r<c.length;r++)if(ad(c[r]))return!0;return!1}function iu(c){if(!c)return!0;const r=c[0];return c.length<=1?r!=="any":r==="=="?th(c[1],c[2],"=="):r==="!="?hr(th(c[1],c[2],"==")):r==="<"||r===">"||r==="<="||r===">="?th(c[1],c[2],r):r==="any"?(l=c.slice(1),["any"].concat(l.map(iu))):r==="all"?["all"].concat(c.slice(1).map(iu)):r==="none"?["all"].concat(c.slice(1).map(iu).map(hr)):r==="in"?ua(c[1],c.slice(2)):r==="!in"?hr(ua(c[1],c.slice(2))):r==="has"?hi(c[1]):r!=="!has"||hr(hi(c[1]));var l}function th(c,r,l){switch(c){case"$type":return[`filter-type-${l}`,r];case"$id":return[`filter-id-${l}`,r];default:return[`filter-${l}`,c,r]}}function ua(c,r){if(r.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",r]];case"$id":return["filter-id-in",["literal",r]];default:return r.length>200&&!r.some(l=>typeof l!=typeof r[0])?["filter-in-large",c,["literal",r.sort(es)]]:["filter-in-small",c,["literal",r]]}}function hi(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function hr(c){return["!",c]}function ts(c){const r=typeof c;if(r==="number"||r==="boolean"||r==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let _="[";for(const S of c)_+=`${ts(S)},`;return`${_}]`}const l=Object.keys(c).sort();let d="{";for(let _=0;_<l.length;_++)d+=`${JSON.stringify(l[_])}:${ts(c[l[_]])},`;return`${d}}`}function Io(c){let r="";for(const l of rt)r+=`/${ts(c[l])}`;return r}function sc(c){const r=c.value;return r?[new qe(c.key,r,"constants have been deprecated as of v8")]:[]}function Or(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function As(c){if(Array.isArray(c))return c.map(As);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const r={};for(const l in c)r[l]=As(c[l]);return r}return Or(c)}function $a(c){const r=c.key,l=c.value,d=c.valueSpec||{},_=c.objectElementValidators||{},S=c.style,C=c.styleSpec,M=c.validateSpec;let O=[];const D=qn(l);if(D!=="object")return[new qe(r,l,`object expected, ${D} found`)];for(const N in l){const V=N.split(".")[0],Z=xs(d,V)||d["*"];let Y;if(xs(_,V))Y=_[V];else if(xs(d,V))Y=M;else if(_["*"])Y=_["*"];else{if(!d["*"]){O.push(new qe(r,l[N],`unknown property "${N}"`));continue}Y=M}O=O.concat(Y({key:(r&&`${r}.`)+N,value:l[N],valueSpec:Z,style:S,styleSpec:C,object:l,objectKey:N,validateSpec:M},l))}for(const N in d)_[N]||d[N].required&&d[N].default===void 0&&l[N]===void 0&&O.push(new qe(r,l,`missing required property "${N}"`));return O}function lc(c){const r=c.value,l=c.valueSpec,d=c.style,_=c.styleSpec,S=c.key,C=c.arrayElementValidator||c.validateSpec;if(qn(r)!=="array")return[new qe(S,r,`array expected, ${qn(r)} found`)];if(l.length&&r.length!==l.length)return[new qe(S,r,`array length ${l.length} expected, length ${r.length} found`)];if(l["min-length"]&&r.length<l["min-length"])return[new qe(S,r,`array length at least ${l["min-length"]} expected, length ${r.length} found`)];let M={type:l.value,values:l.values};_.$version<7&&(M.function=l.function),qn(l.value)==="object"&&(M=l.value);let O=[];for(let D=0;D<r.length;D++)O=O.concat(C({array:r,arrayIndex:D,value:r[D],valueSpec:M,validateSpec:c.validateSpec,style:d,styleSpec:_,key:`${S}[${D}]`}));return O}function Ps(c){const r=c.key,l=c.value,d=c.valueSpec;let _=qn(l);return _==="number"&&l!=l&&(_="NaN"),_!=="number"?[new qe(r,l,`number expected, ${_} found`)]:"minimum"in d&&l<d.minimum?[new qe(r,l,`${l} is less than the minimum value ${d.minimum}`)]:"maximum"in d&&l>d.maximum?[new qe(r,l,`${l} is greater than the maximum value ${d.maximum}`)]:[]}function ef(c){const r=c.valueSpec,l=Or(c.value.type);let d,_,S,C={};const M=l!=="categorical"&&c.value.property===void 0,O=!M,D=qn(c.value.stops)==="array"&&qn(c.value.stops[0])==="array"&&qn(c.value.stops[0][0])==="object",N=$a({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(Y){if(l==="identity")return[new qe(Y.key,Y.value,'identity function may not have a "stops" property')];let Q=[];const re=Y.value;return Q=Q.concat(lc({key:Y.key,value:re,valueSpec:Y.valueSpec,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,arrayElementValidator:V})),qn(re)==="array"&&re.length===0&&Q.push(new qe(Y.key,re,"array must have at least one stop")),Q},default:function(Y){return Y.validateSpec({key:Y.key,value:Y.value,valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec})}}});return l==="identity"&&M&&N.push(new qe(c.key,c.value,'missing required property "property"')),l==="identity"||c.value.stops||N.push(new qe(c.key,c.value,'missing required property "stops"')),l==="exponential"&&c.valueSpec.expression&&!Ju(c.valueSpec)&&N.push(new qe(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(O&&!hl(c.valueSpec)?N.push(new qe(c.key,c.value,"property functions not supported")):M&&!nc(c.valueSpec)&&N.push(new qe(c.key,c.value,"zoom functions not supported"))),l!=="categorical"&&!D||c.value.property!==void 0||N.push(new qe(c.key,c.value,'"property" property is required')),N;function V(Y){let Q=[];const re=Y.value,fe=Y.key;if(qn(re)!=="array")return[new qe(fe,re,`array expected, ${qn(re)} found`)];if(re.length!==2)return[new qe(fe,re,`array length 2 expected, length ${re.length} found`)];if(D){if(qn(re[0])!=="object")return[new qe(fe,re,`object expected, ${qn(re[0])} found`)];if(re[0].zoom===void 0)return[new qe(fe,re,"object stop key must have zoom")];if(re[0].value===void 0)return[new qe(fe,re,"object stop key must have value")];if(S&&S>Or(re[0].zoom))return[new qe(fe,re[0].zoom,"stop zoom values must appear in ascending order")];Or(re[0].zoom)!==S&&(S=Or(re[0].zoom),_=void 0,C={}),Q=Q.concat($a({key:`${fe}[0]`,value:re[0],valueSpec:{zoom:{}},validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec,objectElementValidators:{zoom:Ps,value:Z}}))}else Q=Q.concat(Z({key:`${fe}[0]`,value:re[0],validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec},re));return ac(As(re[1]))?Q.concat([new qe(`${fe}[1]`,re[1],"expressions are not allowed in function stops.")]):Q.concat(Y.validateSpec({key:`${fe}[1]`,value:re[1],valueSpec:r,validateSpec:Y.validateSpec,style:Y.style,styleSpec:Y.styleSpec}))}function Z(Y,Q){const re=qn(Y.value),fe=Or(Y.value),be=Y.value!==null?Y.value:Q;if(d){if(re!==d)return[new qe(Y.key,be,`${re} stop domain type must match previous stop domain type ${d}`)]}else d=re;if(re!=="number"&&re!=="string"&&re!=="boolean")return[new qe(Y.key,be,"stop domain value must be a number, string, or boolean")];if(re!=="number"&&l!=="categorical"){let $e=`number expected, ${re} found`;return hl(r)&&l===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(Y.key,be,$e)]}return l!=="categorical"||re!=="number"||isFinite(fe)&&Math.floor(fe)===fe?l!=="categorical"&&re==="number"&&_!==void 0&&fe<_?[new qe(Y.key,be,"stop domain values must appear in ascending order")]:(_=fe,l==="categorical"&&fe in C?[new qe(Y.key,be,"stop domain values must be unique")]:(C[fe]=!0,[])):[new qe(Y.key,be,`integer expected, found ${fe}`)]}}function Va(c){const r=(c.expressionContext==="property"?ru:Ms)(As(c.value),c.valueSpec);if(r.result==="error")return r.value.map(d=>new qe(`${c.key}${d.key}`,c.value,d.message));const l=r.value.expression||r.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!l.outputDefined())return[new qe(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!Jo(l))return[new qe(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!Jo(l))return[new qe(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!tu(l,["zoom","feature-state"]))return[new qe(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!Ra(l))return[new qe(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function nh(c){const r=c.key,l=c.value,d=qn(l);return d!=="string"?[new qe(r,l,`color expected, ${d} found`)]:er.parse(String(l))?[]:[new qe(r,l,`color expected, "${l}" found`)]}function ko(c){const r=c.key,l=c.value,d=c.valueSpec,_=[];return Array.isArray(d.values)?d.values.indexOf(Or(l))===-1&&_.push(new qe(r,l,`expected one of [${d.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(d.values).indexOf(Or(l))===-1&&_.push(new qe(r,l,`expected one of [${Object.keys(d.values).join(", ")}], ${JSON.stringify(l)} found`)),_}function zo(c){return Ro(As(c.value))?Va(dn({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):Rs(c)}function Rs(c){const r=c.value,l=c.key;if(qn(r)!=="array")return[new qe(l,r,`array expected, ${qn(r)} found`)];const d=c.styleSpec;let _,S=[];if(r.length<1)return[new qe(l,r,"filter array must have at least 1 element")];switch(S=S.concat(ko({key:`${l}[0]`,value:r[0],valueSpec:d.filter_operator,style:c.style,styleSpec:c.styleSpec})),Or(r[0])){case"<":case"<=":case">":case">=":r.length>=2&&Or(r[1])==="$type"&&S.push(new qe(l,r,`"$type" cannot be use with operator "${r[0]}"`));case"==":case"!=":r.length!==3&&S.push(new qe(l,r,`filter array for operator "${r[0]}" must have 3 elements`));case"in":case"!in":r.length>=2&&(_=qn(r[1]),_!=="string"&&S.push(new qe(`${l}[1]`,r[1],`string expected, ${_} found`)));for(let C=2;C<r.length;C++)_=qn(r[C]),Or(r[1])==="$type"?S=S.concat(ko({key:`${l}[${C}]`,value:r[C],valueSpec:d.geometry_type,style:c.style,styleSpec:c.styleSpec})):_!=="string"&&_!=="number"&&_!=="boolean"&&S.push(new qe(`${l}[${C}]`,r[C],`string, number, or boolean expected, ${_} found`));break;case"any":case"all":case"none":for(let C=1;C<r.length;C++)S=S.concat(Rs({key:`${l}[${C}]`,value:r[C],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":_=qn(r[1]),r.length!==2?S.push(new qe(l,r,`filter array for "${r[0]}" operator must have 2 elements`)):_!=="string"&&S.push(new qe(`${l}[1]`,r[1],`string expected, ${_} found`))}return S}function ns(c,r){const l=c.key,d=c.validateSpec,_=c.style,S=c.styleSpec,C=c.value,M=c.objectKey,O=S[`${r}_${c.layerType}`];if(!O)return[];const D=M.match(/^(.*)-transition$/);if(r==="paint"&&D&&O[D[1]]&&O[D[1]].transition)return d({key:l,value:C,valueSpec:S.transition,style:_,styleSpec:S});const N=c.valueSpec||O[M];if(!N)return[new qe(l,C,`unknown property "${M}"`)];let V;if(qn(C)==="string"&&hl(N)&&!N.tokens&&(V=/^{([^}]+)}$/.exec(C)))return[new qe(l,C,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(V[1])} }\`.`)];const Z=[];return c.layerType==="symbol"&&(M==="text-field"&&_&&!_.glyphs&&Z.push(new qe(l,C,'use of "text-field" requires a style "glyphs" property')),M==="text-font"&&Ts(As(C))&&Or(C.type)==="identity"&&Z.push(new qe(l,C,'"text-font" does not support identity functions'))),Z.concat(d({key:c.key,value:C,valueSpec:N,style:_,styleSpec:S,expressionContext:"property",propertyType:r,propertyKey:M}))}function tf(c){return ns(c,"paint")}function dl(c){return ns(c,"layout")}function rs(c){let r=[];const l=c.value,d=c.key,_=c.style,S=c.styleSpec;if(qn(l)!=="object")return[new qe(d,l,`object expected, ${qn(l)} found`)];l.type||l.ref||r.push(new qe(d,l,'either "type" or "ref" is required'));let C=Or(l.type);const M=Or(l.ref);if(l.id){const O=Or(l.id);for(let D=0;D<c.arrayIndex;D++){const N=_.layers[D];Or(N.id)===O&&r.push(new qe(d,l.id,`duplicate layer id "${l.id}", previously used at line ${N.id.__line__}`))}}if("ref"in l){let O;["type","source","source-layer","filter","layout"].forEach(D=>{D in l&&r.push(new qe(d,l[D],`"${D}" is prohibited for ref layers`))}),_.layers.forEach(D=>{Or(D.id)===M&&(O=D)}),O?O.ref?r.push(new qe(d,l.ref,"ref cannot reference another ref layer")):C=Or(O.type):r.push(new qe(d,l.ref,`ref layer "${M}" not found`))}else if(C!=="background")if(l.source){const O=_.sources&&_.sources[l.source],D=O&&Or(O.type);O?D==="vector"&&C==="raster"?r.push(new qe(d,l.source,`layer "${l.id}" requires a raster source`)):D!=="raster-dem"&&C==="hillshade"?r.push(new qe(d,l.source,`layer "${l.id}" requires a raster-dem source`)):D==="raster"&&C!=="raster"?r.push(new qe(d,l.source,`layer "${l.id}" requires a vector source`)):D!=="vector"||l["source-layer"]?D==="raster-dem"&&C!=="hillshade"?r.push(new qe(d,l.source,"raster-dem source can only be used with layer type 'hillshade'.")):C!=="line"||!l.paint||!l.paint["line-gradient"]||D==="geojson"&&O.lineMetrics||r.push(new qe(d,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):r.push(new qe(d,l,`layer "${l.id}" must specify a "source-layer"`)):r.push(new qe(d,l.source,`source "${l.source}" not found`))}else r.push(new qe(d,l,'missing required property "source"'));return r=r.concat($a({key:d,value:l,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${d}.type`,value:l.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:zo,layout:O=>$a({layer:l,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":D=>dl(dn({layerType:C},D))}}),paint:O=>$a({layer:l,key:O.key,value:O.value,style:O.style,styleSpec:O.styleSpec,validateSpec:O.validateSpec,objectElementValidators:{"*":D=>tf(dn({layerType:C},D))}})}})),r}function vi(c){const r=c.value,l=c.key,d=qn(r);return d!=="string"?[new qe(l,r,`string expected, ${d} found`)]:[]}const bo={promoteId:function({key:c,value:r}){if(qn(r)==="string")return vi({key:c,value:r});{const l=[];for(const d in r)l.push(...vi({key:`${c}.${d}`,value:r[d]}));return l}}};function Xi(c){const r=c.value,l=c.key,d=c.styleSpec,_=c.style,S=c.validateSpec;if(!r.type)return[new qe(l,r,'"type" is required')];const C=Or(r.type);let M;switch(C){case"vector":case"raster":return M=$a({key:l,value:r,valueSpec:d[`source_${C.replace("-","_")}`],style:c.style,styleSpec:d,objectElementValidators:bo,validateSpec:S}),M;case"raster-dem":return M=function(O){var D;const N=(D=O.sourceName)!==null&&D!==void 0?D:"",V=O.value,Z=O.styleSpec,Y=Z.source_raster_dem,Q=O.style;let re=[];const fe=qn(V);if(V===void 0)return re;if(fe!=="object")return re.push(new qe("source_raster_dem",V,`object expected, ${fe} found`)),re;const be=Or(V.encoding)==="custom",$e=["redFactor","greenFactor","blueFactor","baseShift"],Te=O.value.encoding?`"${O.value.encoding}"`:"Default";for(const W in V)!be&&$e.includes(W)?re.push(new qe(W,V[W],`In "${N}": "${W}" is only valid when "encoding" is set to "custom". ${Te} encoding found`)):Y[W]?re=re.concat(O.validateSpec({key:W,value:V[W],valueSpec:Y[W],validateSpec:O.validateSpec,style:Q,styleSpec:Z})):re.push(new qe(W,V[W],`unknown property "${W}"`));return re}({sourceName:l,value:r,style:c.style,styleSpec:d,validateSpec:S}),M;case"geojson":if(M=$a({key:l,value:r,valueSpec:d.source_geojson,style:_,styleSpec:d,validateSpec:S,objectElementValidators:bo}),r.cluster)for(const O in r.clusterProperties){const[D,N]=r.clusterProperties[O],V=typeof D=="string"?[D,["accumulated"],["get",O]]:D;M.push(...Va({key:`${l}.${O}.map`,value:N,expressionContext:"cluster-map"})),M.push(...Va({key:`${l}.${O}.reduce`,value:V,expressionContext:"cluster-reduce"}))}return M;case"video":return $a({key:l,value:r,valueSpec:d.source_video,style:_,validateSpec:S,styleSpec:d});case"image":return $a({key:l,value:r,valueSpec:d.source_image,style:_,validateSpec:S,styleSpec:d});case"canvas":return[new qe(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ko({key:`${l}.type`,value:r.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function rh(c){const r=c.value,l=c.styleSpec,d=l.light,_=c.style;let S=[];const C=qn(r);if(r===void 0)return S;if(C!=="object")return S=S.concat([new qe("light",r,`object expected, ${C} found`)]),S;for(const M in r){const O=M.match(/^(.*)-transition$/);S=S.concat(O&&d[O[1]]&&d[O[1]].transition?c.validateSpec({key:M,value:r[M],valueSpec:l.transition,validateSpec:c.validateSpec,style:_,styleSpec:l}):d[M]?c.validateSpec({key:M,value:r[M],valueSpec:d[M],validateSpec:c.validateSpec,style:_,styleSpec:l}):[new qe(M,r[M],`unknown property "${M}"`)])}return S}function od(c){const r=c.value,l=c.styleSpec,d=l.sky,_=c.style,S=qn(r);if(r===void 0)return[];if(S!=="object")return[new qe("sky",r,`object expected, ${S} found`)];let C=[];for(const M in r)C=C.concat(d[M]?c.validateSpec({key:M,value:r[M],valueSpec:d[M],style:_,styleSpec:l}):[new qe(M,r[M],`unknown property "${M}"`)]);return C}function au(c){const r=c.value,l=c.styleSpec,d=l.terrain,_=c.style;let S=[];const C=qn(r);if(r===void 0)return S;if(C!=="object")return S=S.concat([new qe("terrain",r,`object expected, ${C} found`)]),S;for(const M in r)S=S.concat(d[M]?c.validateSpec({key:M,value:r[M],valueSpec:d[M],validateSpec:c.validateSpec,style:_,styleSpec:l}):[new qe(M,r[M],`unknown property "${M}"`)]);return S}function sd(c){let r=[];const l=c.value,d=c.key;if(Array.isArray(l)){const _=[],S=[];for(const C in l)l[C].id&&_.includes(l[C].id)&&r.push(new qe(d,l,`all the sprites' ids must be unique, but ${l[C].id} is duplicated`)),_.push(l[C].id),l[C].url&&S.includes(l[C].url)&&r.push(new qe(d,l,`all the sprites' URLs must be unique, but ${l[C].url} is duplicated`)),S.push(l[C].url),r=r.concat($a({key:`${d}[${C}]`,value:l[C],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return r}return vi({key:d,value:l})}function nf(c){return r=c.value,r&&r.constructor===Object?[]:[new qe(c.key,c.value,`object expected, ${qn(c.value)} found`)];var r}const Li={"*":()=>[],array:lc,boolean:function(c){const r=c.value,l=c.key,d=qn(r);return d!=="boolean"?[new qe(l,r,`boolean expected, ${d} found`)]:[]},number:Ps,color:nh,constants:sc,enum:ko,filter:zo,function:ef,layer:rs,object:$a,source:Xi,light:rh,sky:od,terrain:au,projection:function(c){const r=c.value,l=c.styleSpec,d=l.projection,_=c.style,S=qn(r);if(r===void 0)return[];if(S!=="object")return[new qe("projection",r,`object expected, ${S} found`)];let C=[];for(const M in r)C=C.concat(d[M]?c.validateSpec({key:M,value:r[M],valueSpec:d[M],style:_,styleSpec:l}):[new qe(M,r[M],`unknown property "${M}"`)]);return C},projectionDefinition:function(c){const r=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const d=qn(l);return d!=="array"||function(_){return Array.isArray(_)&&_.length===3&&typeof _[0]=="string"&&typeof _[1]=="string"&&typeof _[2]=="number"}(l)||function(_){return!!["interpolate","step","literal"].includes(_[0])}(l)?["array","string"].includes(d)?[]:[new qe(r,l,`projection expected, invalid type "${d}" found`)]:[new qe(r,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:vi,formatted:function(c){return vi(c).length===0?[]:Va(c)},resolvedImage:function(c){return vi(c).length===0?[]:Va(c)},padding:function(c){const r=c.key,l=c.value;if(qn(l)==="array"){if(l.length<1||l.length>4)return[new qe(r,l,`padding requires 1 to 4 values; ${l.length} values found`)];const d={type:"number"};let _=[];for(let S=0;S<l.length;S++)_=_.concat(c.validateSpec({key:`${r}[${S}]`,value:l[S],validateSpec:c.validateSpec,valueSpec:d}));return _}return Ps({key:r,value:l,valueSpec:{}})},numberArray:function(c){const r=c.key,l=c.value;if(qn(l)==="array"){const d={type:"number"};if(l.length<1)return[new qe(r,l,"array length at least 1 expected, length 0 found")];let _=[];for(let S=0;S<l.length;S++)_=_.concat(c.validateSpec({key:`${r}[${S}]`,value:l[S],validateSpec:c.validateSpec,valueSpec:d}));return _}return Ps({key:r,value:l,valueSpec:{}})},colorArray:function(c){const r=c.key,l=c.value;if(qn(l)==="array"){if(l.length<1)return[new qe(r,l,"array length at least 1 expected, length 0 found")];let d=[];for(let _=0;_<l.length;_++)d=d.concat(nh({key:`${r}[${_}]`,value:l[_]}));return d}return nh({key:r,value:l})},variableAnchorOffsetCollection:function(c){const r=c.key,l=c.value,d=qn(l),_=c.styleSpec;if(d!=="array"||l.length<1||l.length%2!=0)return[new qe(r,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let C=0;C<l.length;C+=2)S=S.concat(ko({key:`${r}[${C}]`,value:l[C],valueSpec:_.layout_symbol["text-anchor"]})),S=S.concat(lc({key:`${r}[${C+1}]`,value:l[C+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:_}));return S},sprite:sd,state:nf};function pl(c){const r=c.value,l=c.valueSpec,d=c.styleSpec;return c.validateSpec=pl,l.expression&&Ts(Or(r))?ef(c):l.expression&&ac(As(r))?Va(c):l.type&&Li[l.type]?Li[l.type](c):$a(dn({},c,{valueSpec:l.type?d[l.type]:l}))}function ou(c){const r=c.value,l=c.key,d=vi(c);return d.length||(r.indexOf("{fontstack}")===-1&&d.push(new qe(l,r,'"glyphs" url must include a "{fontstack}" token')),r.indexOf("{range}")===-1&&d.push(new qe(l,r,'"glyphs" url must include a "{range}" token'))),d}function Bi(c,r=ce){let l=[];return l=l.concat(pl({key:"",value:c,valueSpec:r.$root,styleSpec:r,style:c,validateSpec:pl,objectElementValidators:{glyphs:ou,"*":()=>[]}})),c.constants&&(l=l.concat(sc({key:"constants",value:c.constants}))),Do(l)}function Ja(c){return function(r){return c({...r,validateSpec:pl})}}function Do(c){return[].concat(c).sort((r,l)=>r.line-l.line)}function ha(c){return function(...r){return Do(c.apply(this,r))}}Bi.source=ha(Ja(Xi)),Bi.sprite=ha(Ja(sd)),Bi.glyphs=ha(Ja(ou)),Bi.light=ha(Ja(rh)),Bi.sky=ha(Ja(od)),Bi.terrain=ha(Ja(au)),Bi.state=ha(Ja(nf)),Bi.layer=ha(Ja(rs)),Bi.filter=ha(Ja(zo)),Bi.paintProperty=ha(Ja(tf)),Bi.layoutProperty=ha(Ja(dl));const su=Bi,ih=su.light,cg=su.sky,rf=su.paintProperty,is=su.layoutProperty;function ah(c,r){let l=!1;if(r&&r.length)for(const d of r)c.fire(new Ce(new Error(d.message))),l=!0;return l}class Os{constructor(r,l,d){const _=this.cells=[];if(r instanceof ArrayBuffer){this.arrayBuffer=r;const C=new Int32Array(this.arrayBuffer);r=C[0],this.d=(l=C[1])+2*(d=C[2]);for(let O=0;O<this.d*this.d;O++){const D=C[3+O],N=C[3+O+1];_.push(D===N?null:C.subarray(D,N))}const M=C[3+_.length+1];this.keys=C.subarray(C[3+_.length],M),this.bboxes=C.subarray(M),this.insert=this._insertReadonly}else{this.d=l+2*d;for(let C=0;C<this.d*this.d;C++)_.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=r,this.padding=d,this.scale=l/r,this.uid=0;const S=d/l*r;this.min=-S,this.max=r+S}insert(r,l,d,_,S){this._forEachCell(l,d,_,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(r),this.bboxes.push(l),this.bboxes.push(d),this.bboxes.push(_),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(r,l,d,_,S,C){this.cells[S].push(C)}query(r,l,d,_,S){const C=this.min,M=this.max;if(r<=C&&l<=C&&M<=d&&M<=_&&!S)return Array.prototype.slice.call(this.keys);{const O=[];return this._forEachCell(r,l,d,_,this._queryCell,O,{},S),O}}_queryCell(r,l,d,_,S,C,M,O){const D=this.cells[S];if(D!==null){const N=this.keys,V=this.bboxes;for(let Z=0;Z<D.length;Z++){const Y=D[Z];if(M[Y]===void 0){const Q=4*Y;(O?O(V[Q+0],V[Q+1],V[Q+2],V[Q+3]):r<=V[Q+2]&&l<=V[Q+3]&&d>=V[Q+0]&&_>=V[Q+1])?(M[Y]=!0,C.push(N[Y])):M[Y]=!1}}}}_forEachCell(r,l,d,_,S,C,M,O){const D=this._convertToCellCoord(r),N=this._convertToCellCoord(l),V=this._convertToCellCoord(d),Z=this._convertToCellCoord(_);for(let Y=D;Y<=V;Y++)for(let Q=N;Q<=Z;Q++){const re=this.d*Q+Y;if((!O||O(this._convertFromCellCoord(Y),this._convertFromCellCoord(Q),this._convertFromCellCoord(Y+1),this._convertFromCellCoord(Q+1)))&&S.call(this,r,l,d,_,re,C,M,O))return}}_convertFromCellCoord(r){return(r-this.padding)/this.scale}_convertToCellCoord(r){return Math.max(0,Math.min(this.d-1,Math.floor(r*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const r=this.cells,l=3+this.cells.length+1+1;let d=0;for(let C=0;C<this.cells.length;C++)d+=this.cells[C].length;const _=new Int32Array(l+d+this.keys.length+this.bboxes.length);_[0]=this.extent,_[1]=this.n,_[2]=this.padding;let S=l;for(let C=0;C<r.length;C++){const M=r[C];_[3+C]=S,_.set(M,S),S+=M.length}return _[3+r.length]=S,_.set(this.keys,S),S+=this.keys.length,_[3+r.length+1]=S,_.set(this.bboxes,S),S+=this.bboxes.length,_.buffer}static serialize(r,l){const d=r.toArrayBuffer();return l&&l.push(d),{buffer:d}}static deserialize(r){return new Os(r.buffer)}}const Lo={};function rn(c,r,l={}){if(Lo[c])throw new Error(`${c} is already registered.`);Object.defineProperty(r,"_classRegistryKey",{value:c,writeable:!1}),Lo[c]={klass:r,omit:l.omit||[],shallow:l.shallow||[]}}rn("Object",Object),rn("TransferableGridIndex",Os),rn("Color",er),rn("Error",Error),rn("AJAXError",br),rn("ResolvedImage",Aa),rn("StylePropertyFunction",la),rn("StyleExpression",nu,{omit:["_evaluator"]}),rn("ZoomDependentExpression",oc),rn("ZoomConstantExpression",fl),rn("CompoundExpression",Ya,{omit:["_evaluate"]});for(const c in eu)eu[c]._classRegistryKey||rn(`Expression_${c}`,eu[c]);function oh(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function cc(c){return c.$name||c.constructor._classRegistryKey}function af(c){return!function(r){if(r===null||typeof r!="object")return!1;const l=cc(r);return!(!l||l==="Object")}(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||oh(c)||Qt(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function uc(c,r){if(af(c))return(oh(c)||Qt(c))&&r&&r.push(c),ArrayBuffer.isView(c)&&r&&r.push(c.buffer),c instanceof ImageData&&r&&r.push(c.data.buffer),c;if(Array.isArray(c)){const S=[];for(const C of c)S.push(uc(C,r));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const l=cc(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!Lo[l])throw new Error(`${l} is not registered.`);const{klass:d}=Lo[l],_=d.serialize?d.serialize(c,r):{};if(d.serialize){if(r&&_===r[r.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in c){if(!c.hasOwnProperty(S)||Lo[l].omit.indexOf(S)>=0)continue;const C=c[S];_[S]=Lo[l].shallow.indexOf(S)>=0?C:uc(C,r)}c instanceof Error&&(_.message=c.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(_.$name=l),_}function ml(c){if(af(c))return c;if(Array.isArray(c))return c.map(ml);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const r=cc(c)||"Object";if(!Lo[r])throw new Error(`can't deserialize unregistered class ${r}`);const{klass:l}=Lo[r];if(!l)throw new Error(`can't deserialize unregistered class ${r}`);if(l.deserialize)return l.deserialize(c);const d=Object.create(l.prototype);for(const _ of Object.keys(c)){if(_==="$name")continue;const S=c[_];d[_]=Lo[r].shallow.indexOf(_)>=0?S:ml(S)}return d}class of{constructor(){this.first=!0}update(r,l){const d=Math.floor(r);return this.first?(this.first=!1,this.lastIntegerZoom=d,this.lastIntegerZoomTime=0,this.lastZoom=r,this.lastFloorZoom=d,!0):(this.lastFloorZoom>d?(this.lastIntegerZoom=d+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<d&&(this.lastIntegerZoom=d,this.lastIntegerZoomTime=l),r!==this.lastZoom&&(this.lastZoom=r,this.lastFloorZoom=d,!0))}}const Vn={"Latin-1 Supplement":c=>c>=128&&c<=255,"Hangul Jamo":c=>c>=4352&&c<=4607,Khmer:c=>c>=6016&&c<=6143,"General Punctuation":c=>c>=8192&&c<=8303,"Letterlike Symbols":c=>c>=8448&&c<=8527,"Number Forms":c=>c>=8528&&c<=8591,"Miscellaneous Technical":c=>c>=8960&&c<=9215,"Control Pictures":c=>c>=9216&&c<=9279,"Optical Character Recognition":c=>c>=9280&&c<=9311,"Enclosed Alphanumerics":c=>c>=9312&&c<=9471,"Geometric Shapes":c=>c>=9632&&c<=9727,"Miscellaneous Symbols":c=>c>=9728&&c<=9983,"Miscellaneous Symbols and Arrows":c=>c>=11008&&c<=11263,"Ideographic Description Characters":c=>c>=12272&&c<=12287,"CJK Symbols and Punctuation":c=>c>=12288&&c<=12351,Hiragana:c=>c>=12352&&c<=12447,Katakana:c=>c>=12448&&c<=12543,Kanbun:c=>c>=12688&&c<=12703,"CJK Strokes":c=>c>=12736&&c<=12783,"Enclosed CJK Letters and Months":c=>c>=12800&&c<=13055,"CJK Compatibility":c=>c>=13056&&c<=13311,"Yijing Hexagram Symbols":c=>c>=19904&&c<=19967,"CJK Unified Ideographs":c=>c>=19968&&c<=40959,"Hangul Syllables":c=>c>=44032&&c<=55215,"Private Use Area":c=>c>=57344&&c<=63743,"Vertical Forms":c=>c>=65040&&c<=65055,"CJK Compatibility Forms":c=>c>=65072&&c<=65103,"Small Form Variants":c=>c>=65104&&c<=65135,"Halfwidth and Fullwidth Forms":c=>c>=65280&&c<=65519};function sh(c){for(const r of c)if(Bo(r.charCodeAt(0)))return!0;return!1}function vp(c){for(const r of c)if(!lf(r.charCodeAt(0)))return!1;return!0}function as(c){const r=c.map(l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}}).filter(l=>l);return new RegExp(r.join("|"),"u")}const sf=as(["Arab","Dupl","Mong","Ougr","Syrc"]);function lf(c){return!sf.test(String.fromCodePoint(c))}const os=as(["Bopo","Hani","Hira","Kana","Kits","Nshu","Tang","Yiii"]);function Bo(c){return!(c!==746&&c!==747&&(c<4352||!(Vn["CJK Compatibility Forms"](c)&&!(c>=65097&&c<=65103)||Vn["CJK Compatibility"](c)||Vn["CJK Strokes"](c)||!(!Vn["CJK Symbols and Punctuation"](c)||c>=12296&&c<=12305||c>=12308&&c<=12319||c===12336)||Vn["Enclosed CJK Letters and Months"](c)||Vn["Ideographic Description Characters"](c)||Vn.Kanbun(c)||Vn.Katakana(c)&&c!==12540||!(!Vn["Halfwidth and Fullwidth Forms"](c)||c===65288||c===65289||c===65293||c>=65306&&c<=65310||c===65339||c===65341||c===65343||c>=65371&&c<=65503||c===65507||c>=65512&&c<=65519)||!(!Vn["Small Form Variants"](c)||c>=65112&&c<=65118||c>=65123&&c<=65126)||Vn["Vertical Forms"](c)||Vn["Yijing Hexagram Symbols"](c)||new RegExp("\\p{sc=Cans}","u").test(String.fromCodePoint(c))||new RegExp("\\p{sc=Hang}","u").test(String.fromCodePoint(c))||os.test(String.fromCodePoint(c)))))}function Is(c){return!(Bo(c)||function(r){return!!(Vn["Latin-1 Supplement"](r)&&(r===167||r===169||r===174||r===177||r===188||r===189||r===190||r===215||r===247)||Vn["General Punctuation"](r)&&(r===8214||r===8224||r===8225||r===8240||r===8241||r===8251||r===8252||r===8258||r===8263||r===8264||r===8265||r===8273)||Vn["Letterlike Symbols"](r)||Vn["Number Forms"](r)||Vn["Miscellaneous Technical"](r)&&(r>=8960&&r<=8967||r>=8972&&r<=8991||r>=8996&&r<=9e3||r===9003||r>=9085&&r<=9114||r>=9150&&r<=9165||r===9167||r>=9169&&r<=9179||r>=9186&&r<=9215)||Vn["Control Pictures"](r)&&r!==9251||Vn["Optical Character Recognition"](r)||Vn["Enclosed Alphanumerics"](r)||Vn["Geometric Shapes"](r)||Vn["Miscellaneous Symbols"](r)&&!(r>=9754&&r<=9759)||Vn["Miscellaneous Symbols and Arrows"](r)&&(r>=11026&&r<=11055||r>=11088&&r<=11097||r>=11192&&r<=11243)||Vn["CJK Symbols and Punctuation"](r)||Vn.Katakana(r)||Vn["Private Use Area"](r)||Vn["CJK Compatibility Forms"](r)||Vn["Small Form Variants"](r)||Vn["Halfwidth and Fullwidth Forms"](r)||r===8734||r===8756||r===8757||r>=9984&&r<=10087||r>=10102&&r<=10131||r===65532||r===65533)}(c))}const ld=as(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function lu(c){return ld.test(String.fromCodePoint(c))}function lh(c,r){return!(!r&&lu(c)||c>=2304&&c<=3583||c>=3840&&c<=4255||Vn.Khmer(c))}function ch(c){for(const r of c)if(lu(r.charCodeAt(0)))return!0;return!1}const ss=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(ss.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,r){return u(this,void 0,void 0,function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const l=c.pluginURL,d=new Promise(S=>{this.loadScriptResolve=S});r(l);const _=new Promise(S=>setTimeout(()=>S(),this.TIMEOUT));if(yield Promise.race([d,_]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:l};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)})}};class Nr{constructor(r,l){this.zoom=r,l?(this.now=l.now,this.fadeDuration=l.fadeDuration,this.zoomHistory=l.zoomHistory,this.transition=l.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new of,this.transition={})}isSupportedScript(r){return function(l,d){for(const _ of l)if(!lh(_.charCodeAt(0),d))return!1;return!0}(r,ss.getRTLTextPluginStatus()==="loaded")}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const r=this.zoom,l=r-Math.floor(r),d=this.crossFadingFactor();return r>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*d}:{fromScale:.5,toScale:1,t:1-(1-d)*l}}}class ls{constructor(r,l){this.property=r,this.value=l,this.expression=function(d,_){if(Ts(d))return new la(d,_);if(ac(d)){const S=ru(d,_);if(S.result==="error")throw new Error(S.value.map(C=>`${C.key}: ${C.message}`).join(", "));return S.value}{let S=d;return _.type==="color"&&typeof d=="string"?S=er.parse(d):_.type!=="padding"||typeof d!="number"&&!Array.isArray(d)?_.type!=="numberArray"||typeof d!="number"&&!Array.isArray(d)?_.type!=="colorArray"||typeof d!="string"&&!Array.isArray(d)?_.type==="variableAnchorOffsetCollection"&&Array.isArray(d)?S=ui.parse(d):_.type==="projectionDefinition"&&typeof d=="string"&&(S=qi.parse(d)):S=Fi.parse(d):S=yi.parse(d):S=gi.parse(d),{kind:"constant",evaluate:()=>S}}}(l===void 0?r.specification.default:l,r.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(r,l,d){return this.property.possiblyEvaluate(this,r,l,d)}}class cu{constructor(r){this.property=r,this.value=new ls(r,void 0)}transitioned(r,l){return new cf(this.property,this.value,l,Xe({},r.transition,this.transition),r.now)}untransitioned(){return new cf(this.property,this.value,null,{},0)}}class cd{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitionablePropertyValues)}getValue(r){return Je(this._values[r].value.value)}setValue(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new cu(this._values[r].property)),this._values[r].value=new ls(this._values[r].property,l===null?void 0:Je(l))}getTransition(r){return Je(this._values[r].transition)}setTransition(r,l){Object.prototype.hasOwnProperty.call(this._values,r)||(this._values[r]=new cu(this._values[r].property)),this._values[r].transition=Je(l)||void 0}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d);const _=this.getTransition(l);_!==void 0&&(r[`${l}-transition`]=_)}return r}transitioned(r,l){const d=new uf(this._properties);for(const _ of Object.keys(this._values))d._values[_]=this._values[_].transitioned(r,l._values[_]);return d}untransitioned(){const r=new uf(this._properties);for(const l of Object.keys(this._values))r._values[l]=this._values[l].untransitioned();return r}}class cf{constructor(r,l,d,_,S){this.property=r,this.value=l,this.begin=S+_.delay||0,this.end=this.begin+_.duration||0,r.specification.transition&&(_.delay||_.duration)&&(this.prior=d)}possiblyEvaluate(r,l,d){const _=r.now||0,S=this.value.possiblyEvaluate(r,l,d),C=this.prior;if(C){if(_>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(_<this.begin)return C.possiblyEvaluate(r,l,d);{const M=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(C.possiblyEvaluate(r,l,d),S,_t(M))}}return S}}class uf{constructor(r){this._properties=r,this._values=Object.create(r.defaultTransitioningPropertyValues)}possiblyEvaluate(r,l,d){const _=new Sr(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(r,l,d);return _}hasTransition(){for(const r of Object.keys(this._values))if(this._values[r].prior)return!0;return!1}}class gl{constructor(r){this._properties=r,this._values=Object.create(r.defaultPropertyValues)}hasValue(r){return this._values[r].value!==void 0}getValue(r){return Je(this._values[r].value)}setValue(r,l){this._values[r]=new ls(this._values[r].property,l===null?void 0:Je(l))}serialize(){const r={};for(const l of Object.keys(this._values)){const d=this.getValue(l);d!==void 0&&(r[l]=d)}return r}possiblyEvaluate(r,l,d){const _=new Sr(this._properties);for(const S of Object.keys(this._values))_._values[S]=this._values[S].possiblyEvaluate(r,l,d);return _}}class An{constructor(r,l,d){this.property=r,this.value=l,this.parameters=d}isConstant(){return this.value.kind==="constant"}constantOr(r){return this.value.kind==="constant"?this.value.value:r}evaluate(r,l,d,_){return this.property.evaluate(this.value,this.parameters,r,l,d,_)}}class Sr{constructor(r){this._properties=r,this._values=Object.create(r.defaultPossiblyEvaluatedValues)}get(r){return this._values[r]}}class nn{constructor(r){this.specification=r}possiblyEvaluate(r,l){if(r.isDataDriven())throw new Error("Value should not be data driven");return r.expression.evaluate(l)}interpolate(r,l,d){const _=Yo[this.specification.type];return _?_(r,l,d):r}}class xn{constructor(r,l){this.specification=r,this.overrides=l}possiblyEvaluate(r,l,d,_){return new An(this,r.expression.kind==="constant"||r.expression.kind==="camera"?{kind:"constant",value:r.expression.evaluate(l,null,{},d,_)}:r.expression,l)}interpolate(r,l,d){if(r.value.kind!=="constant"||l.value.kind!=="constant")return r;if(r.value.value===void 0||l.value.value===void 0)return new An(this,{kind:"constant",value:void 0},r.parameters);const _=Yo[this.specification.type];if(_){const S=_(r.value.value,l.value.value,d);return new An(this,{kind:"constant",value:S},r.parameters)}return r}evaluate(r,l,d,_,S,C){return r.kind==="constant"?r.value:r.evaluate(l,d,_,S,C)}}class cs extends xn{possiblyEvaluate(r,l,d,_){if(r.value===void 0)return new An(this,{kind:"constant",value:void 0},l);if(r.expression.kind==="constant"){const S=r.expression.evaluate(l,null,{},d,_),C=r.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,M=this._calculate(C,C,C,l);return new An(this,{kind:"constant",value:M},l)}if(r.expression.kind==="camera"){const S=this._calculate(r.expression.evaluate({zoom:l.zoom-1}),r.expression.evaluate({zoom:l.zoom}),r.expression.evaluate({zoom:l.zoom+1}),l);return new An(this,{kind:"constant",value:S},l)}return new An(this,r.expression,l)}evaluate(r,l,d,_,S,C){if(r.kind==="source"){const M=r.evaluate(l,d,_,S,C);return this._calculate(M,M,M,l)}return r.kind==="composite"?this._calculate(r.evaluate({zoom:Math.floor(l.zoom)-1},d,_),r.evaluate({zoom:Math.floor(l.zoom)},d,_),r.evaluate({zoom:Math.floor(l.zoom)+1},d,_),l):r.value}_calculate(r,l,d,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class ks{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,_){if(r.value!==void 0){if(r.expression.kind==="constant"){const S=r.expression.evaluate(l,null,{},d,_);return this._calculate(S,S,S,l)}return this._calculate(r.expression.evaluate(new Nr(Math.floor(l.zoom-1),l)),r.expression.evaluate(new Nr(Math.floor(l.zoom),l)),r.expression.evaluate(new Nr(Math.floor(l.zoom+1),l)),l)}}_calculate(r,l,d,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:r,to:l}:{from:d,to:l}}interpolate(r){return r}}class uu{constructor(r){this.specification=r}possiblyEvaluate(r,l,d,_){return!!r.expression.evaluate(l,null,{},d,_)}interpolate(){return!1}}class ii{constructor(r){this.properties=r,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in r){const d=r[l];d.specification.overridable&&this.overridableProperties.push(l);const _=this.defaultPropertyValues[l]=new ls(d,void 0),S=this.defaultTransitionablePropertyValues[l]=new cu(d);this.defaultTransitioningPropertyValues[l]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=_.possiblyEvaluate({})}}}rn("DataDrivenProperty",xn),rn("DataConstantProperty",nn),rn("CrossFadedDataDrivenProperty",cs),rn("CrossFadedProperty",ks),rn("ColorRampProperty",uu);const yl="-transition";class xo extends Ne{constructor(r,l){if(super(),this.id=r.id,this.type=r.type,this._featureFilter={filter:()=>!0,needGeometry:!1},r.type!=="custom"&&(this.metadata=r.metadata,this.minzoom=r.minzoom,this.maxzoom=r.maxzoom,r.type!=="background"&&(this.source=r.source,this.sourceLayer=r["source-layer"],this.filter=r.filter),l.layout&&(this._unevaluatedLayout=new gl(l.layout)),l.paint)){this._transitionablePaint=new cd(l.paint);for(const d in r.paint)this.setPaintProperty(d,r.paint[d],{validate:!1});for(const d in r.layout)this.setLayoutProperty(d,r.layout[d],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Sr(l.paint)}}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(r){return r==="visibility"?this.visibility:this._unevaluatedLayout.getValue(r)}setLayoutProperty(r,l,d={}){l!=null&&this._validate(is,`layers.${this.id}.layout.${r}`,r,l,d)||(r!=="visibility"?this._unevaluatedLayout.setValue(r,l):this.visibility=l)}getPaintProperty(r){return r.endsWith(yl)?this._transitionablePaint.getTransition(r.slice(0,-11)):this._transitionablePaint.getValue(r)}setPaintProperty(r,l,d={}){if(l!=null&&this._validate(rf,`layers.${this.id}.paint.${r}`,r,l,d))return!1;if(r.endsWith(yl))return this._transitionablePaint.setTransition(r.slice(0,-11),l||void 0),!1;{const _=this._transitionablePaint._values[r],S=_.property.specification["property-type"]==="cross-faded-data-driven",C=_.value.isDataDriven(),M=_.value;this._transitionablePaint.setValue(r,l),this._handleSpecialPaintPropertyUpdate(r);const O=this._transitionablePaint._values[r].value;return O.isDataDriven()||C||S||this._handleOverridablePaintPropertyUpdate(r,M,O)}}_handleSpecialPaintPropertyUpdate(r){}_handleOverridablePaintPropertyUpdate(r,l,d){return!1}isHidden(r){return!!(this.minzoom&&r<this.minzoom)||!!(this.maxzoom&&r>=this.maxzoom)||this.visibility==="none"}updateTransitions(r){this._transitioningPaint=this._transitionablePaint.transitioned(r,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(r,l){r.getCrossfadeParameters&&(this._crossfadeParameters=r.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(r,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(r,void 0,l)}serialize(){const r={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(r.layout=r.layout||{},r.layout.visibility=this.visibility),Ke(r,(l,d)=>!(l===void 0||d==="layout"&&!Object.keys(l).length||d==="paint"&&!Object.keys(l).length))}_validate(r,l,d,_,S={}){return(!S||S.validate!==!1)&&ah(this,r.call(su,{key:l,layerType:this.type,objectKey:d,value:_,styleSpec:ce,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const r in this.paint._values){const l=this.paint.get(r);if(l instanceof An&&hl(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}const bi={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class zs{constructor(r,l){this._structArray=r,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class Kr{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(r,l){return r._trim(),l&&(r.isTransferred=!0,l.push(r.arrayBuffer)),{length:r.length,arrayBuffer:r.arrayBuffer}}static deserialize(r){const l=Object.create(this.prototype);return l.arrayBuffer=r.arrayBuffer,l.length=r.length,l.capacity=r.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(r){this.reserve(r),this.length=r}reserve(r){if(r>this.capacity){this.capacity=Math.max(r,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Qr(c,r=1){let l=0,d=0;return{members:c.map(_=>{const S=bi[_.type].BYTES_PER_ELEMENT,C=l=hc(l,Math.max(r,S)),M=_.components||1;return d=Math.max(d,S),l+=S*M,{name:_.name,type:_.type,components:M,offset:C}}),size:hc(l,Math.max(d,r)),alignment:r}}function hc(c,r){return Math.ceil(c/r)*r}class uh extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const _=2*r;return this.int16[_+0]=l,this.int16[_+1]=d,r}}uh.prototype.bytesPerElement=4,rn("StructArrayLayout2i4",uh);class fc extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d)}emplace(r,l,d,_){const S=3*r;return this.int16[S+0]=l,this.int16[S+1]=d,this.int16[S+2]=_,r}}fc.prototype.bytesPerElement=6,rn("StructArrayLayout3i6",fc);class Ds extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,_)}emplace(r,l,d,_,S){const C=4*r;return this.int16[C+0]=l,this.int16[C+1]=d,this.int16[C+2]=_,this.int16[C+3]=S,r}}Ds.prototype.bytesPerElement=8,rn("StructArrayLayout4i8",Ds);class hh extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,l,d,_,S,C)}emplace(r,l,d,_,S,C,M){const O=6*r;return this.int16[O+0]=l,this.int16[O+1]=d,this.int16[O+2]=_,this.int16[O+3]=S,this.int16[O+4]=C,this.int16[O+5]=M,r}}hh.prototype.bytesPerElement=12,rn("StructArrayLayout2i4i12",hh);class fa extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,l,d,_,S,C)}emplace(r,l,d,_,S,C,M){const O=4*r,D=8*r;return this.int16[O+0]=l,this.int16[O+1]=d,this.uint8[D+4]=_,this.uint8[D+5]=S,this.uint8[D+6]=C,this.uint8[D+7]=M,r}}fa.prototype.bytesPerElement=8,rn("StructArrayLayout2i4ub8",fa);class Jr extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const _=2*r;return this.float32[_+0]=l,this.float32[_+1]=d,r}}Jr.prototype.bytesPerElement=8,rn("StructArrayLayout2f8",Jr);class fh extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C,M,O,D,N){const V=this.length;return this.resize(V+1),this.emplace(V,r,l,d,_,S,C,M,O,D,N)}emplace(r,l,d,_,S,C,M,O,D,N,V){const Z=10*r;return this.uint16[Z+0]=l,this.uint16[Z+1]=d,this.uint16[Z+2]=_,this.uint16[Z+3]=S,this.uint16[Z+4]=C,this.uint16[Z+5]=M,this.uint16[Z+6]=O,this.uint16[Z+7]=D,this.uint16[Z+8]=N,this.uint16[Z+9]=V,r}}fh.prototype.bytesPerElement=20,rn("StructArrayLayout10ui20",fh);class b extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C,M,O,D,N,V,Z){const Y=this.length;return this.resize(Y+1),this.emplace(Y,r,l,d,_,S,C,M,O,D,N,V,Z)}emplace(r,l,d,_,S,C,M,O,D,N,V,Z,Y){const Q=12*r;return this.int16[Q+0]=l,this.int16[Q+1]=d,this.int16[Q+2]=_,this.int16[Q+3]=S,this.uint16[Q+4]=C,this.uint16[Q+5]=M,this.uint16[Q+6]=O,this.uint16[Q+7]=D,this.int16[Q+8]=N,this.int16[Q+9]=V,this.int16[Q+10]=Z,this.int16[Q+11]=Y,r}}b.prototype.bytesPerElement=24,rn("StructArrayLayout4i4ui4i24",b);class n extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d)}emplace(r,l,d,_){const S=3*r;return this.float32[S+0]=l,this.float32[S+1]=d,this.float32[S+2]=_,r}}n.prototype.bytesPerElement=12,rn("StructArrayLayout3f12",n);class s extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint32[1*r+0]=l,r}}s.prototype.bytesPerElement=4,rn("StructArrayLayout1ul4",s);class p extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C,M,O,D){const N=this.length;return this.resize(N+1),this.emplace(N,r,l,d,_,S,C,M,O,D)}emplace(r,l,d,_,S,C,M,O,D,N){const V=10*r,Z=5*r;return this.int16[V+0]=l,this.int16[V+1]=d,this.int16[V+2]=_,this.int16[V+3]=S,this.int16[V+4]=C,this.int16[V+5]=M,this.uint32[Z+3]=O,this.uint16[V+8]=D,this.uint16[V+9]=N,r}}p.prototype.bytesPerElement=20,rn("StructArrayLayout6i1ul2ui20",p);class y extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,l,d,_,S,C)}emplace(r,l,d,_,S,C,M){const O=6*r;return this.int16[O+0]=l,this.int16[O+1]=d,this.int16[O+2]=_,this.int16[O+3]=S,this.int16[O+4]=C,this.int16[O+5]=M,r}}y.prototype.bytesPerElement=12,rn("StructArrayLayout2i2i2i12",y);class w extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S){const C=this.length;return this.resize(C+1),this.emplace(C,r,l,d,_,S)}emplace(r,l,d,_,S,C){const M=4*r,O=8*r;return this.float32[M+0]=l,this.float32[M+1]=d,this.float32[M+2]=_,this.int16[O+6]=S,this.int16[O+7]=C,r}}w.prototype.bytesPerElement=16,rn("StructArrayLayout2f1f2i16",w);class T extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C){const M=this.length;return this.resize(M+1),this.emplace(M,r,l,d,_,S,C)}emplace(r,l,d,_,S,C,M){const O=16*r,D=4*r,N=8*r;return this.uint8[O+0]=l,this.uint8[O+1]=d,this.float32[D+1]=_,this.float32[D+2]=S,this.int16[N+6]=C,this.int16[N+7]=M,r}}T.prototype.bytesPerElement=16,rn("StructArrayLayout2ub2f2i16",T);class R extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d)}emplace(r,l,d,_){const S=3*r;return this.uint16[S+0]=l,this.uint16[S+1]=d,this.uint16[S+2]=_,r}}R.prototype.bytesPerElement=6,rn("StructArrayLayout3ui6",R);class k extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be){const $e=this.length;return this.resize($e+1),this.emplace($e,r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be)}emplace(r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be,$e){const Te=24*r,W=12*r,ue=48*r;return this.int16[Te+0]=l,this.int16[Te+1]=d,this.uint16[Te+2]=_,this.uint16[Te+3]=S,this.uint32[W+2]=C,this.uint32[W+3]=M,this.uint32[W+4]=O,this.uint16[Te+10]=D,this.uint16[Te+11]=N,this.uint16[Te+12]=V,this.float32[W+7]=Z,this.float32[W+8]=Y,this.uint8[ue+36]=Q,this.uint8[ue+37]=re,this.uint8[ue+38]=fe,this.uint32[W+10]=be,this.int16[Te+22]=$e,r}}k.prototype.bytesPerElement=48,rn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",k);class L extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be,$e,Te,W,ue,Oe,ot,Lt,ht,wt,Ut,jt){const Zt=this.length;return this.resize(Zt+1),this.emplace(Zt,r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be,$e,Te,W,ue,Oe,ot,Lt,ht,wt,Ut,jt)}emplace(r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be,$e,Te,W,ue,Oe,ot,Lt,ht,wt,Ut,jt,Zt){const Et=32*r,on=16*r;return this.int16[Et+0]=l,this.int16[Et+1]=d,this.int16[Et+2]=_,this.int16[Et+3]=S,this.int16[Et+4]=C,this.int16[Et+5]=M,this.int16[Et+6]=O,this.int16[Et+7]=D,this.uint16[Et+8]=N,this.uint16[Et+9]=V,this.uint16[Et+10]=Z,this.uint16[Et+11]=Y,this.uint16[Et+12]=Q,this.uint16[Et+13]=re,this.uint16[Et+14]=fe,this.uint16[Et+15]=be,this.uint16[Et+16]=$e,this.uint16[Et+17]=Te,this.uint16[Et+18]=W,this.uint16[Et+19]=ue,this.uint16[Et+20]=Oe,this.uint16[Et+21]=ot,this.uint16[Et+22]=Lt,this.uint32[on+12]=ht,this.float32[on+13]=wt,this.float32[on+14]=Ut,this.uint16[Et+30]=jt,this.uint16[Et+31]=Zt,r}}L.prototype.bytesPerElement=64,rn("StructArrayLayout8i15ui1ul2f2ui64",L);class F extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.float32[1*r+0]=l,r}}F.prototype.bytesPerElement=4,rn("StructArrayLayout1f4",F);class q extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d)}emplace(r,l,d,_){const S=3*r;return this.uint16[6*r+0]=l,this.float32[S+1]=d,this.float32[S+2]=_,r}}q.prototype.bytesPerElement=12,rn("StructArrayLayout1ui2f12",q);class H extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l,d){const _=this.length;return this.resize(_+1),this.emplace(_,r,l,d)}emplace(r,l,d,_){const S=4*r;return this.uint32[2*r+0]=l,this.uint16[S+2]=d,this.uint16[S+3]=_,r}}H.prototype.bytesPerElement=8,rn("StructArrayLayout1ul2ui8",H);class ee extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r,l){const d=this.length;return this.resize(d+1),this.emplace(d,r,l)}emplace(r,l,d){const _=2*r;return this.uint16[_+0]=l,this.uint16[_+1]=d,r}}ee.prototype.bytesPerElement=4,rn("StructArrayLayout2ui4",ee);class ne extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(r){const l=this.length;return this.resize(l+1),this.emplace(l,r)}emplace(r,l){return this.uint16[1*r+0]=l,r}}ne.prototype.bytesPerElement=2,rn("StructArrayLayout1ui2",ne);class ye extends Kr{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(r,l,d,_){const S=this.length;return this.resize(S+1),this.emplace(S,r,l,d,_)}emplace(r,l,d,_,S){const C=4*r;return this.float32[C+0]=l,this.float32[C+1]=d,this.float32[C+2]=_,this.float32[C+3]=S,r}}ye.prototype.bytesPerElement=16,rn("StructArrayLayout4f16",ye);class ge extends zs{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new X(this.anchorPointX,this.anchorPointY)}}ge.prototype.size=20;class _e extends p{get(r){return new ge(this,r)}}rn("CollisionBoxArray",_e);class Ee extends zs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(r){this._structArray.uint8[this._pos1+37]=r}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(r){this._structArray.uint8[this._pos1+38]=r}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(r){this._structArray.uint32[this._pos4+10]=r}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}Ee.prototype.size=48;class De extends k{get(r){return new Ee(this,r)}}rn("PlacedSymbolArray",De);class ze extends zs{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(r){this._structArray.uint32[this._pos4+12]=r}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}ze.prototype.size=64;class je extends L{get(r){return new ze(this,r)}}rn("SymbolInstanceArray",je);class Ue extends F{getoffsetX(r){return this.float32[1*r+0]}}rn("GlyphOffsetArray",Ue);class Fe extends fc{getx(r){return this.int16[3*r+0]}gety(r){return this.int16[3*r+1]}gettileUnitDistanceFromAnchor(r){return this.int16[3*r+2]}}rn("SymbolLineVertexArray",Fe);class it extends zs{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}it.prototype.size=12;class Tt extends q{get(r){return new it(this,r)}}rn("TextAnchorOffsetArray",Tt);class gt extends zs{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}gt.prototype.size=8;class dt extends H{get(r){return new gt(this,r)}}rn("FeatureIndexArray",dt);class vt extends uh{}class Jt extends uh{}class Yt extends uh{}class Dt extends hh{}class un extends fa{}class $n extends Jr{}class Qn extends fh{}class ei extends b{}class Mr extends n{}class ti extends s{}class qr extends y{}class Ir extends T{}class fr extends R{}class Ai extends ee{}const $i=Qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:Wi}=$i;class mr{constructor(r=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=r}prepareSegment(r,l,d,_){const S=this.segments[this.segments.length-1];return r>mr.MAX_VERTEX_ARRAY_LENGTH&&$t(`Max vertices per segment is ${mr.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${r}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${mr.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+r>mr.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==_?this.createNewSegment(l,d,_):S}createNewSegment(r,l,d){const _={vertexOffset:r.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return d!==void 0&&(_.sortKey=d),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(_),_}getOrCreateLatestSegment(r,l,d){return this.prepareSegment(0,r,l,d)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const r of this.segments)for(const l in r.vaos)r.vaos[l].destroy()}static simpleSegment(r,l,d,_){return new mr([{vertexOffset:r,primitiveOffset:l,vertexLength:d,primitiveLength:_,vaos:{},sortKey:0}])}}function us(c,r){return 256*(c=St(Math.floor(c),0,255))+St(Math.floor(r),0,255)}mr.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,rn("SegmentVector",mr);const No=Qr([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]);var Ls,Bs,hu,Ns={exports:{}},dc={exports:{}},eo={exports:{}},js=function(){if(hu)return Ns.exports;hu=1;var c=(Ls||(Ls=1,dc.exports=function(l,d){var _,S,C,M,O,D,N,V;for(S=l.length-(_=3&l.length),C=d,O=3432918353,D=461845907,V=0;V<S;)N=255&l.charCodeAt(V)|(255&l.charCodeAt(++V))<<8|(255&l.charCodeAt(++V))<<16|(255&l.charCodeAt(++V))<<24,++V,C=27492+(65535&(M=5*(65535&(C=(C^=N=(65535&(N=(N=(65535&N)*O+(((N>>>16)*O&65535)<<16)&4294967295)<<15|N>>>17))*D+(((N>>>16)*D&65535)<<16)&4294967295)<<13|C>>>19))+((5*(C>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(N=0,_){case 3:N^=(255&l.charCodeAt(V+2))<<16;case 2:N^=(255&l.charCodeAt(V+1))<<8;case 1:C^=N=(65535&(N=(N=(65535&(N^=255&l.charCodeAt(V)))*O+(((N>>>16)*O&65535)<<16)&4294967295)<<15|N>>>17))*D+(((N>>>16)*D&65535)<<16)&4294967295}return C^=l.length,C=2246822507*(65535&(C^=C>>>16))+((2246822507*(C>>>16)&65535)<<16)&4294967295,C=3266489909*(65535&(C^=C>>>13))+((3266489909*(C>>>16)&65535)<<16)&4294967295,(C^=C>>>16)>>>0}),dc.exports),r=(Bs||(Bs=1,eo.exports=function(l,d){for(var _,S=l.length,C=d^S,M=0;S>=4;)_=1540483477*(65535&(_=255&l.charCodeAt(M)|(255&l.charCodeAt(++M))<<8|(255&l.charCodeAt(++M))<<16|(255&l.charCodeAt(++M))<<24))+((1540483477*(_>>>16)&65535)<<16),C=1540483477*(65535&C)+((1540483477*(C>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),S-=4,++M;switch(S){case 3:C^=(255&l.charCodeAt(M+2))<<16;case 2:C^=(255&l.charCodeAt(M+1))<<8;case 1:C=1540483477*(65535&(C^=255&l.charCodeAt(M)))+((1540483477*(C>>>16)&65535)<<16)}return C=1540483477*(65535&(C^=C>>>13))+((1540483477*(C>>>16)&65535)<<16),(C^=C>>>15)>>>0}),eo.exports);return Ns.exports=c,Ns.exports.murmur3=c,Ns.exports.murmur2=r,Ns.exports}(),to=E(js);class hs{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(r,l,d,_){this.ids.push(fi(r)),this.positions.push(l,d,_)}getPositions(r){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=fi(r);let d=0,_=this.ids.length-1;for(;d<_;){const C=d+_>>1;this.ids[C]>=l?_=C:d=C+1}const S=[];for(;this.ids[d]===l;)S.push({index:this.positions[3*d],start:this.positions[3*d+1],end:this.positions[3*d+2]}),d++;return S}static serialize(r,l){const d=new Float64Array(r.ids),_=new Uint32Array(r.positions);return Pi(d,_,0,d.length-1),l&&l.push(d.buffer,_.buffer),{ids:d,positions:_}}static deserialize(r){const l=new hs;return l.ids=r.ids,l.positions=r.positions,l.indexed=!0,l}}function fi(c){const r=+c;return!isNaN(r)&&r<=Number.MAX_SAFE_INTEGER?r:to(String(c))}function Pi(c,r,l,d){for(;l<d;){const _=c[l+d>>1];let S=l-1,C=d+1;for(;;){do S++;while(c[S]<_);do C--;while(c[C]>_);if(S>=C)break;da(c,S,C),da(r,3*S,3*C),da(r,3*S+1,3*C+1),da(r,3*S+2,3*C+2)}C-l<d-C?(Pi(c,r,l,C),l=C+1):(Pi(c,r,C+1,d),d=C)}}function da(c,r,l){const d=c[r];c[r]=c[l],c[l]=d}rn("FeaturePositionMap",hs);class Ar{constructor(r,l){this.gl=r.gl,this.location=l}}class dh extends Ar{constructor(r,l){super(r,l),this.current=0}set(r){this.current!==r&&(this.current=r,this.gl.uniform1f(this.location,r))}}class ud extends Ar{constructor(r,l){super(r,l),this.current=[0,0,0,0]}set(r){r[0]===this.current[0]&&r[1]===this.current[1]&&r[2]===this.current[2]&&r[3]===this.current[3]||(this.current=r,this.gl.uniform4f(this.location,r[0],r[1],r[2],r[3]))}}class bp extends Ar{constructor(r,l){super(r,l),this.current=er.transparent}set(r){r.r===this.current.r&&r.g===this.current.g&&r.b===this.current.b&&r.a===this.current.a||(this.current=r,this.gl.uniform4f(this.location,r.r,r.g,r.b,r.a))}}const fu=new Float32Array(16);function pc(c){return[us(255*c.r,255*c.g),us(255*c.b,255*c.a)]}class _l{constructor(r,l,d){this.value=r,this.uniformNames=l.map(_=>`u_${_}`),this.type=d}setUniform(r,l,d){r.set(d.constantOr(this.value))}getBinding(r,l,d){return this.type==="color"?new bp(r,l):new dh(r,l)}}class pa{constructor(r,l){this.uniformNames=l.map(d=>`u_${d}`),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(r,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=r.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=r.tlbr}setUniform(r,l,d,_){const S=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;S&&r.set(S)}getBinding(r,l,d){return d.substr(0,9)==="u_pattern"?new ud(r,l):new dh(r,l)}}class no{constructor(r,l,d,_){this.expression=r,this.type=d,this.maxValue=0,this.paintVertexAttributes=l.map(S=>({name:`a_${S}`,type:"Float32",components:d==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(r,l,d,_,S){const C=this.paintVertexArray.length,M=this.expression.evaluate(new Nr(0),l,{},_,[],S);this.paintVertexArray.resize(r),this._setPaintValue(C,r,M)}updatePaintArray(r,l,d,_){const S=this.expression.evaluate({zoom:0},d,_);this._setPaintValue(r,l,S)}_setPaintValue(r,l,d){if(this.type==="color"){const _=pc(d);for(let S=r;S<l;S++)this.paintVertexArray.emplace(S,_[0],_[1])}else{for(let _=r;_<l;_++)this.paintVertexArray.emplace(_,d);this.maxValue=Math.max(this.maxValue,Math.abs(d))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ro{constructor(r,l,d,_,S,C){this.expression=r,this.uniformNames=l.map(M=>`u_${M}_t`),this.type=d,this.useIntegerZoom=_,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=l.map(M=>({name:`a_${M}`,type:"Float32",components:d==="color"?4:2,offset:0})),this.paintVertexArray=new C}populatePaintArray(r,l,d,_,S){const C=this.expression.evaluate(new Nr(this.zoom),l,{},_,[],S),M=this.expression.evaluate(new Nr(this.zoom+1),l,{},_,[],S),O=this.paintVertexArray.length;this.paintVertexArray.resize(r),this._setPaintValue(O,r,C,M)}updatePaintArray(r,l,d,_){const S=this.expression.evaluate({zoom:this.zoom},d,_),C=this.expression.evaluate({zoom:this.zoom+1},d,_);this._setPaintValue(r,l,S,C)}_setPaintValue(r,l,d,_){if(this.type==="color"){const S=pc(d),C=pc(_);for(let M=r;M<l;M++)this.paintVertexArray.emplace(M,S[0],S[1],C[0],C[1])}else{for(let S=r;S<l;S++)this.paintVertexArray.emplace(S,d,_);this.maxValue=Math.max(this.maxValue,Math.abs(d),Math.abs(_))}}upload(r){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=r.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(r,l){const d=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,_=St(this.expression.interpolationFactor(d,this.zoom,this.zoom+1),0,1);r.set(_)}getBinding(r,l,d){return new dh(r,l)}}class fs{constructor(r,l,d,_,S,C){this.expression=r,this.type=l,this.useIntegerZoom=d,this.zoom=_,this.layerId=C,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(r,l,d){const _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(r),this.zoomOutPaintVertexArray.resize(r),this._setPaintValues(_,r,l.patterns&&l.patterns[this.layerId],d)}updatePaintArray(r,l,d,_,S){this._setPaintValues(r,l,d.patterns&&d.patterns[this.layerId],S)}_setPaintValues(r,l,d,_){if(!_||!d)return;const{min:S,mid:C,max:M}=d,O=_[S],D=_[C],N=_[M];if(O&&D&&N)for(let V=r;V<l;V++)this.zoomInPaintVertexArray.emplace(V,D.tl[0],D.tl[1],D.br[0],D.br[1],O.tl[0],O.tl[1],O.br[0],O.br[1],D.pixelRatio,O.pixelRatio),this.zoomOutPaintVertexArray.emplace(V,D.tl[0],D.tl[1],D.br[0],D.br[1],N.tl[0],N.tl[1],N.br[0],N.br[1],D.pixelRatio,N.pixelRatio)}upload(r){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=r.createVertexBuffer(this.zoomInPaintVertexArray,No.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=r.createVertexBuffer(this.zoomOutPaintVertexArray,No.members,this.expression.isStateDependent))}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class Fs{constructor(r,l,d){this.binders={},this._buffers=[];const _=[];for(const S in r.paint._values){if(!d(S))continue;const C=r.paint.get(S);if(!(C instanceof An&&hl(C.property.specification)))continue;const M=Ua(S,r.type),O=C.value,D=C.property.specification.type,N=C.property.useIntegerZoom,V=C.property.specification["property-type"],Z=V==="cross-faded"||V==="cross-faded-data-driven";if(O.kind==="constant")this.binders[S]=Z?new pa(O.value,M):new _l(O.value,M,D),_.push(`/u_${S}`);else if(O.kind==="source"||Z){const Y=Vs(S,D,"source");this.binders[S]=Z?new fs(O,D,N,l,Y,r.id):new no(O,M,D,Y),_.push(`/a_${S}`)}else{const Y=Vs(S,D,"composite");this.binders[S]=new ro(O,M,D,N,l,Y),_.push(`/z_${S}`)}}this.cacheKey=_.sort().join("")}getMaxValue(r){const l=this.binders[r];return l instanceof no||l instanceof ro?l.maxValue:0}populatePaintArrays(r,l,d,_,S){for(const C in this.binders){const M=this.binders[C];(M instanceof no||M instanceof ro||M instanceof fs)&&M.populatePaintArray(r,l,d,_,S)}}setConstantPatternPositions(r,l){for(const d in this.binders){const _=this.binders[d];_ instanceof pa&&_.setConstantPatternPositions(r,l)}}updatePaintArrays(r,l,d,_,S){let C=!1;for(const M in r){const O=l.getPositions(M);for(const D of O){const N=d.feature(D.index);for(const V in this.binders){const Z=this.binders[V];if((Z instanceof no||Z instanceof ro||Z instanceof fs)&&Z.expression.isStateDependent===!0){const Y=_.paint.get(V);Z.expression=Y.value,Z.updatePaintArray(D.start,D.end,N,r[M],S),C=!0}}}}return C}defines(){const r=[];for(const l in this.binders){const d=this.binders[l];(d instanceof _l||d instanceof pa)&&r.push(...d.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return r}getBinderAttributes(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof no||d instanceof ro)for(let _=0;_<d.paintVertexAttributes.length;_++)r.push(d.paintVertexAttributes[_].name);else if(d instanceof fs)for(let _=0;_<No.members.length;_++)r.push(No.members[_].name)}return r}getBinderUniforms(){const r=[];for(const l in this.binders){const d=this.binders[l];if(d instanceof _l||d instanceof pa||d instanceof ro)for(const _ of d.uniformNames)r.push(_)}return r}getPaintVertexBuffers(){return this._buffers}getUniforms(r,l){const d=[];for(const _ in this.binders){const S=this.binders[_];if(S instanceof _l||S instanceof pa||S instanceof ro){for(const C of S.uniformNames)if(l[C]){const M=S.getBinding(r,l[C],C);d.push({name:C,property:_,binding:M})}}}return d}setUniforms(r,l,d,_){for(const{name:S,property:C,binding:M}of l)this.binders[C].setUniform(M,_,d.get(C),S)}updatePaintBuffers(r){this._buffers=[];for(const l in this.binders){const d=this.binders[l];if(r&&d instanceof fs){const _=r.fromScale===2?d.zoomInPaintVertexBuffer:d.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(d instanceof no||d instanceof ro)&&d.paintVertexBuffer&&this._buffers.push(d.paintVertexBuffer)}}upload(r){for(const l in this.binders){const d=this.binders[l];(d instanceof no||d instanceof ro||d instanceof fs)&&d.upload(r)}this.updatePaintBuffers()}destroy(){for(const r in this.binders){const l=this.binders[r];(l instanceof no||l instanceof ro||l instanceof fs)&&l.destroy()}}}class $s{constructor(r,l,d=()=>!0){this.programConfigurations={};for(const _ of r)this.programConfigurations[_.id]=new Fs(_,l,d);this.needsUpload=!1,this._featureMap=new hs,this._bufferOffset=0}populatePaintArrays(r,l,d,_,S,C){for(const M in this.programConfigurations)this.programConfigurations[M].populatePaintArrays(r,l,_,S,C);l.id!==void 0&&this._featureMap.add(l.id,d,this._bufferOffset,r),this._bufferOffset=r,this.needsUpload=!0}updatePaintArrays(r,l,d,_){for(const S of d)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(r,this._featureMap,l,S,_)||this.needsUpload}get(r){return this.programConfigurations[r]}upload(r){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(r);this.needsUpload=!1}}destroy(){for(const r in this.programConfigurations)this.programConfigurations[r].destroy()}}function Ua(c,r){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${r}-`,"").replace(/-/g,"_")]}function Vs(c,r,l){const d={color:{source:Jr,composite:ye},number:{source:F,composite:Jr}},_=function(S){return{"line-pattern":{source:Qn,composite:Qn},"fill-pattern":{source:Qn,composite:Qn},"fill-extrusion-pattern":{source:Qn,composite:Qn}}[S]}(c);return _&&_[l]||d[r][l]}rn("ConstantBinder",_l),rn("CrossFadedConstantBinder",pa),rn("SourceExpressionBinder",no),rn("CrossFadedCompositeBinder",fs),rn("CompositeExpressionBinder",ro),rn("ProgramConfiguration",Fs,{omit:["_buffers"]}),rn("ProgramConfigurationSet",$s);const vl=Math.pow(2,14)-1,ug=-vl-1;function wo(c){const r=Qe/c.extent,l=c.loadGeometry();for(let d=0;d<l.length;d++){const _=l[d];for(let S=0;S<_.length;S++){const C=_[S],M=Math.round(C.x*r),O=Math.round(C.y*r);C.x=St(M,ug,vl),C.y=St(O,ug,vl),(M<C.x||M>C.x+1||O<C.y||O>C.y+1)&&$t("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function io(c,r){return{type:c.type,id:c.id,properties:c.properties,geometry:r?wo(c):[]}}const Yi=-32768;function xp(c,r,l,d,_){c.emplaceBack(Yi+8*r+d,Yi+8*l+_)}class hd{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Jt,this.indexArray=new fr,this.segments=new mr,this.programConfigurations=new $s(r.layers,r.zoom),this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){const _=this.layers[0],S=[];let C=null,M=!1,O=_.type==="heatmap";if(_.type==="circle"){const N=_;C=N.layout.get("circle-sort-key"),M=!C.isConstant(),O=O||N.paint.get("circle-pitch-alignment")==="map"}const D=O?l.subdivisionGranularity.circle:1;for(const{feature:N,id:V,index:Z,sourceLayerIndex:Y}of r){const Q=this.layers[0]._featureFilter.needGeometry,re=io(N,Q);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),re,d))continue;const fe=M?C.evaluate(re,{},d):void 0,be={id:V,properties:N.properties,type:N.type,sourceLayerIndex:Y,index:Z,geometry:Q?re.geometry:wo(N),patterns:{},sortKey:fe};S.push(be)}M&&S.sort((N,V)=>N.sortKey-V.sortKey);for(const N of S){const{geometry:V,index:Z,sourceLayerIndex:Y}=N,Q=r[Z].feature;this.addFeature(N,V,Z,d,D),l.featureIndex.insert(Q,V,Z,Y,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Wi),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(r,l,d,_,S=1){let C;switch(S){case 1:C=[0,7];break;case 3:C=[0,2,5,7];break;case 5:C=[0,1,3,4,6,7];break;case 7:C=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const M=C.length;for(const O of l)for(const D of O){const N=D.x,V=D.y;if(N<0||N>=Qe||V<0||V>=Qe)continue;const Z=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,r.sortKey),Y=Z.vertexLength;for(let Q=0;Q<M;Q++)for(let re=0;re<M;re++)xp(this.layoutVertexArray,N,V,C[re],C[Q]);for(let Q=0;Q<M-1;Q++)for(let re=0;re<M-1;re++){const fe=Y+Q*M+re,be=Y+(Q+1)*M+re;this.indexArray.emplaceBack(fe,be+1,fe+1),this.indexArray.emplaceBack(fe,be,be+1)}Z.vertexLength+=M*M,Z.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,{},_)}}function wp(c,r){for(let l=0;l<c.length;l++)if(du(r,c[l]))return!0;for(let l=0;l<r.length;l++)if(du(c,r[l]))return!0;return!!hf(c,r)}function a_(c,r,l){return!!du(c,r)||!!Sp(r,c,l)}function hg(c,r){if(c.length===1)return fd(r,c[0]);for(let l=0;l<r.length;l++){const d=r[l];for(let _=0;_<d.length;_++)if(du(c,d[_]))return!0}for(let l=0;l<c.length;l++)if(fd(r,c[l]))return!0;for(let l=0;l<r.length;l++)if(hf(c,r[l]))return!0;return!1}function ph(c,r,l){if(c.length>1){if(hf(c,r))return!0;for(let d=0;d<r.length;d++)if(Sp(r[d],c,l))return!0}for(let d=0;d<c.length;d++)if(Sp(c[d],r,l))return!0;return!1}function hf(c,r){if(c.length===0||r.length===0)return!1;for(let l=0;l<c.length-1;l++){const d=c[l],_=c[l+1];for(let S=0;S<r.length-1;S++)if(o_(d,_,r[S],r[S+1]))return!0}return!1}function o_(c,r,l,d){return Kt(c,l,d)!==Kt(r,l,d)&&Kt(c,r,l)!==Kt(c,r,d)}function Sp(c,r,l){const d=l*l;if(r.length===1)return c.distSqr(r[0])<d;for(let _=1;_<r.length;_++)if(fg(c,r[_-1],r[_])<d)return!0;return!1}function fg(c,r,l){const d=r.distSqr(l);if(d===0)return c.distSqr(r);const _=((c.x-r.x)*(l.x-r.x)+(c.y-r.y)*(l.y-r.y))/d;return c.distSqr(_<0?r:_>1?l:l.sub(r)._mult(_)._add(r))}function fd(c,r){for(let l=0;l<c.length;l++)if(du(c[l],r))return!0;return!1}function du(c,r){let l=!1;for(let d=0,_=c.length-1;d<c.length;_=d++){const S=c[d],C=c[_];S.y>r.y!=C.y>r.y&&r.x<(C.x-S.x)*(r.y-S.y)/(C.y-S.y)+S.x&&(l=!l)}return l}function dg(c,r,l){const d=l[0],_=l[2];if(c.x<d.x&&r.x<d.x||c.x>_.x&&r.x>_.x||c.y<d.y&&r.y<d.y||c.y>_.y&&r.y>_.y)return!1;const S=Kt(c,r,l[0]);return S!==Kt(c,r,l[1])||S!==Kt(c,r,l[2])||S!==Kt(c,r,l[3])}function ff(c,r,l){const d=r.paint.get(c).value;return d.kind==="constant"?d.value:l.programConfigurations.get(r.id).getMaxValue(c)}function dd(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Cp(c,r,l,d,_){if(!r[0]&&!r[1])return c;const S=X.convert(r)._mult(_);l==="viewport"&&S._rotate(-d);const C=[];for(let M=0;M<c.length;M++)C.push(c[M].sub(S));return C}let pg,ta;rn("CircleBucket",hd,{omit:["layers"]});var Ia={get paint(){return ta=ta||new ii({"circle-radius":new xn(ce.paint_circle["circle-radius"]),"circle-color":new xn(ce.paint_circle["circle-color"]),"circle-blur":new xn(ce.paint_circle["circle-blur"]),"circle-opacity":new xn(ce.paint_circle["circle-opacity"]),"circle-translate":new nn(ce.paint_circle["circle-translate"]),"circle-translate-anchor":new nn(ce.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new nn(ce.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new nn(ce.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new xn(ce.paint_circle["circle-stroke-width"]),"circle-stroke-color":new xn(ce.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new xn(ce.paint_circle["circle-stroke-opacity"])})},get layout(){return pg=pg||new ii({"circle-sort-key":new xn(ce.layout_circle["circle-sort-key"])})}};class s_ extends xo{constructor(r){super(r,Ia)}createBucket(r){return new hd(r)}queryRadius(r){const l=r;return ff("circle-radius",this,l)+ff("circle-stroke-width",this,l)+dd(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:r,feature:l,featureState:d,geometry:_,transform:S,pixelsToTileUnits:C,unwrappedTileID:M,getElevation:O}){const D=Cp(r,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,C),N=this.paint.get("circle-radius").evaluate(l,d)+this.paint.get("circle-stroke-width").evaluate(l,d),V=this.paint.get("circle-pitch-alignment")==="map",Z=V?D:function(Q,re,fe,be){return Q.map($e=>mg($e,re,fe,be))}(D,S,M,O),Y=V?N*C:N;for(const Q of _)for(const re of Q){const fe=V?re:mg(re,S,M,O);let be=Y;const $e=S.projectTileCoordinates(re.x,re.y,M,O).signedDistanceFromCamera;if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?be*=$e/S.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(be*=S.cameraToCenterDistance/$e),a_(Z,fe,be))return!0}return!1}}function mg(c,r,l,d){const _=r.projectTileCoordinates(c.x,c.y,l,d).point;return new X((.5*_.x+.5)*r.width,(.5*-_.y+.5)*r.height)}class gg extends hd{}let yg;rn("HeatmapBucket",gg,{omit:["layers"]});var l_={get paint(){return yg=yg||new ii({"heatmap-radius":new xn(ce.paint_heatmap["heatmap-radius"]),"heatmap-weight":new xn(ce.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new nn(ce.paint_heatmap["heatmap-intensity"]),"heatmap-color":new uu(ce.paint_heatmap["heatmap-color"]),"heatmap-opacity":new nn(ce.paint_heatmap["heatmap-opacity"])})}};function df(c,{width:r,height:l},d,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==r*l*d)throw new RangeError(`mismatched image size. expected: ${_.length} but got: ${r*l*d}`)}else _=new Uint8Array(r*l*d);return c.width=r,c.height=l,c.data=_,c}function Tp(c,{width:r,height:l},d){if(r===c.width&&l===c.height)return;const _=df({},{width:r,height:l},d);Ep(c,_,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,r),height:Math.min(c.height,l)},d),c.width=r,c.height=l,c.data=_.data}function Ep(c,r,l,d,_,S){if(_.width===0||_.height===0)return r;if(_.width>c.width||_.height>c.height||l.x>c.width-_.width||l.y>c.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>r.width||_.height>r.height||d.x>r.width-_.width||d.y>r.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const C=c.data,M=r.data;if(C===M)throw new Error("srcData equals dstData, so image is already copied");for(let O=0;O<_.height;O++){const D=((l.y+O)*c.width+l.x)*S,N=((d.y+O)*r.width+d.x)*S;for(let V=0;V<_.width*S;V++)M[N+V]=C[D+V]}return r}class pf{constructor(r,l){df(this,r,1,l)}resize(r){Tp(this,r,1)}clone(){return new pf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,_,S){Ep(r,l,d,_,S,1)}}class So{constructor(r,l){df(this,r,4,l)}resize(r){Tp(this,r,4)}replace(r,l){l?this.data.set(r):this.data=r instanceof Uint8ClampedArray?new Uint8Array(r.buffer):r}clone(){return new So({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(r,l,d,_,S){Ep(r,l,d,_,S,4)}}function Mp(c){const r={},l=c.resolution||256,d=c.clips?c.clips.length:1,_=c.image||new So({width:l,height:d});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const S=(C,M,O)=>{r[c.evaluationKey]=O;const D=c.expression.evaluate(r);_.data[C+M+0]=Math.floor(255*D.r/D.a),_.data[C+M+1]=Math.floor(255*D.g/D.a),_.data[C+M+2]=Math.floor(255*D.b/D.a),_.data[C+M+3]=Math.floor(255*D.a)};if(c.clips)for(let C=0,M=0;C<d;++C,M+=4*l)for(let O=0,D=0;O<l;O++,D+=4){const N=O/(l-1),{start:V,end:Z}=c.clips[C];S(M,D,V*(1-N)+Z*N)}else for(let C=0,M=0;C<l;C++,M+=4)S(0,M,C/(l-1));return _}rn("AlphaImage",pf),rn("RGBAImage",So);const pd="big-fb";class _g extends xo{createBucket(r){return new gg(r)}constructor(r){super(r,l_),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(r){r==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Mp({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(pd)&&this.heatmapFbos.delete(pd)}queryRadius(){return 0}queryIntersectsFeature(){return!1}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}}let vg;var bg={get paint(){return vg=vg||new ii({"hillshade-illumination-direction":new nn(ce.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new nn(ce.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new nn(ce.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new nn(ce.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new nn(ce.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new nn(ce.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new nn(ce.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new nn(ce.paint_hillshade["hillshade-method"])})}};class Ap extends xo{constructor(r){super(r,bg),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let r=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,d=this.paint.get("hillshade-highlight-color").values,_=this.paint.get("hillshade-shadow-color").values;const S=Math.max(r.length,l.length,d.length,_.length);r=r.concat(Array(S-r.length).fill(r.at(-1))),l=l.concat(Array(S-l.length).fill(l.at(-1))),d=d.concat(Array(S-d.length).fill(d.at(-1))),_=_.concat(Array(S-_.length).fill(_.at(-1)));const C=l.map(Ln);return{directionRadians:r.map(Ln),altitudeRadians:C,shadowColor:_,highlightColor:d}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}}const xg=Qr([{name:"a_pos",components:2,type:"Int16"}],4),{members:c_}=xg;function md(c,r,l){const d=l.patternDependencies;let _=!1;for(const S of r){const C=S.paint.get(`${c}-pattern`);C.isConstant()||(_=!0);const M=C.constantOr(null);M&&(_=!0,d[M.to]=!0,d[M.from]=!0)}return _}function Pp(c,r,l,d,_){const S=_.patternDependencies;for(const C of r){const M=C.paint.get(`${c}-pattern`).value;if(M.kind!=="constant"){let O=M.evaluate({zoom:d-1},l,{},_.availableImages),D=M.evaluate({zoom:d},l,{},_.availableImages),N=M.evaluate({zoom:d+1},l,{},_.availableImages);O=O&&O.name?O.name:O,D=D&&D.name?D.name:D,N=N&&N.name?N.name:N,S[O]=!0,S[D]=!0,S[N]=!0,l.patterns[C.id]={min:O,mid:D,max:N}}}return l}function bl(c,r,l,d,_){let S;if(_===function(C,M,O,D){let N=0;for(let V=M,Z=O-D;V<O;V+=D)N+=(C[Z]-C[V])*(C[V+1]+C[Z+1]),Z=V;return N}(c,r,l,d)>0)for(let C=r;C<l;C+=d)S=Ip(C/d|0,c[C],c[C+1],S);else for(let C=l-d;C>=r;C-=d)S=Ip(C/d|0,c[C],c[C+1],S);return S&&xl(S,S.next)&&(pu(S),S=S.next),S}function mc(c,r){if(!c)return c;r||(r=c);let l,d=c;do if(l=!1,d.steiner||!xl(d,d.next)&&xi(d.prev,d,d.next)!==0)d=d.next;else{if(pu(d),d=r=d.prev,d===d.next)break;l=!0}while(l||d!==r);return r}function gd(c,r,l,d,_,S,C){if(!c)return;!C&&S&&function(O,D,N,V){let Z=O;do Z.z===0&&(Z.z=wg(Z.x,Z.y,D,N,V)),Z.prevZ=Z.prev,Z.nextZ=Z.next,Z=Z.next;while(Z!==O);Z.prevZ.nextZ=null,Z.prevZ=null,function(Y){let Q,re=1;do{let fe,be=Y;Y=null;let $e=null;for(Q=0;be;){Q++;let Te=be,W=0;for(let Oe=0;Oe<re&&(W++,Te=Te.nextZ,Te);Oe++);let ue=re;for(;W>0||ue>0&&Te;)W!==0&&(ue===0||!Te||be.z<=Te.z)?(fe=be,be=be.nextZ,W--):(fe=Te,Te=Te.nextZ,ue--),$e?$e.nextZ=fe:Y=fe,fe.prevZ=$e,$e=fe;be=Te}$e.nextZ=null,re*=2}while(Q>1)}(Z)}(c,d,_,S);let M=c;for(;c.prev!==c.next;){const O=c.prev,D=c.next;if(S?gc(c,d,_,S):u_(c))r.push(O.i,c.i,D.i),pu(c),c=D.next,M=D.next;else if((c=D)===M){C?C===1?gd(c=h_(mc(c),r),r,l,d,_,S,2):C===2&&Rp(c,r,l,d,_,S):gd(mc(c),r,l,d,_,S,1);break}}}function u_(c){const r=c.prev,l=c,d=c.next;if(xi(r,l,d)>=0)return!1;const _=r.x,S=l.x,C=d.x,M=r.y,O=l.y,D=d.y,N=Math.min(_,S,C),V=Math.min(M,O,D),Z=Math.max(_,S,C),Y=Math.max(M,O,D);let Q=d.next;for(;Q!==r;){if(Q.x>=N&&Q.x<=Z&&Q.y>=V&&Q.y<=Y&&ds(_,M,S,O,C,D,Q.x,Q.y)&&xi(Q.prev,Q,Q.next)>=0)return!1;Q=Q.next}return!0}function gc(c,r,l,d){const _=c.prev,S=c,C=c.next;if(xi(_,S,C)>=0)return!1;const M=_.x,O=S.x,D=C.x,N=_.y,V=S.y,Z=C.y,Y=Math.min(M,O,D),Q=Math.min(N,V,Z),re=Math.max(M,O,D),fe=Math.max(N,V,Z),be=wg(Y,Q,r,l,d),$e=wg(re,fe,r,l,d);let Te=c.prevZ,W=c.nextZ;for(;Te&&Te.z>=be&&W&&W.z<=$e;){if(Te.x>=Y&&Te.x<=re&&Te.y>=Q&&Te.y<=fe&&Te!==_&&Te!==C&&ds(M,N,O,V,D,Z,Te.x,Te.y)&&xi(Te.prev,Te,Te.next)>=0||(Te=Te.prevZ,W.x>=Y&&W.x<=re&&W.y>=Q&&W.y<=fe&&W!==_&&W!==C&&ds(M,N,O,V,D,Z,W.x,W.y)&&xi(W.prev,W,W.next)>=0))return!1;W=W.nextZ}for(;Te&&Te.z>=be;){if(Te.x>=Y&&Te.x<=re&&Te.y>=Q&&Te.y<=fe&&Te!==_&&Te!==C&&ds(M,N,O,V,D,Z,Te.x,Te.y)&&xi(Te.prev,Te,Te.next)>=0)return!1;Te=Te.prevZ}for(;W&&W.z<=$e;){if(W.x>=Y&&W.x<=re&&W.y>=Q&&W.y<=fe&&W!==_&&W!==C&&ds(M,N,O,V,D,Z,W.x,W.y)&&xi(W.prev,W,W.next)>=0)return!1;W=W.nextZ}return!0}function h_(c,r){let l=c;do{const d=l.prev,_=l.next.next;!xl(d,_)&&Us(d,l,l.next,_)&&yf(d,_)&&yf(_,d)&&(r.push(d.i,l.i,_.i),pu(l),pu(l.next),l=c=_),l=l.next}while(l!==c);return mc(l)}function Rp(c,r,l,d,_,S){let C=c;do{let M=C.next.next;for(;M!==C.prev;){if(C.i!==M.i&&d_(C,M)){let O=Op(C,M);return C=mc(C,C.next),O=mc(O,O.next),gd(C,r,l,d,_,S,0),void gd(O,r,l,d,_,S,0)}M=M.next}C=C.next}while(C!==c)}function yd(c,r){let l=c.x-r.x;return l===0&&(l=c.y-r.y,l===0)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(r.next.y-r.y)/(r.next.x-r.x)),l}function Ri(c,r){const l=function(_,S){let C=S;const M=_.x,O=_.y;let D,N=-1/0;if(xl(_,C))return C;do{if(xl(_,C.next))return C.next;if(O<=C.y&&O>=C.next.y&&C.next.y!==C.y){const re=C.x+(O-C.y)*(C.next.x-C.x)/(C.next.y-C.y);if(re<=M&&re>N&&(N=re,D=C.x<C.next.x?C:C.next,re===M))return D}C=C.next}while(C!==S);if(!D)return null;const V=D,Z=D.x,Y=D.y;let Q=1/0;C=D;do{if(M>=C.x&&C.x>=Z&&M!==C.x&&mf(O<Y?M:N,O,Z,Y,O<Y?N:M,O,C.x,C.y)){const re=Math.abs(O-C.y)/(M-C.x);yf(C,_)&&(re<Q||re===Q&&(C.x>D.x||C.x===D.x&&tb(D,C)))&&(D=C,Q=re)}C=C.next}while(C!==V);return D}(c,r);if(!l)return r;const d=Op(l,c);return mc(d,d.next),mc(l,l.next)}function tb(c,r){return xi(c.prev,c,r.prev)<0&&xi(r.next,c,c.next)<0}function wg(c,r,l,d,_){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*_|0)|c<<8))|c<<4))|c<<2))|c<<1))|(r=1431655765&((r=858993459&((r=252645135&((r=16711935&((r=(r-d)*_|0)|r<<8))|r<<4))|r<<2))|r<<1))<<1}function f_(c){let r=c,l=c;do(r.x<l.x||r.x===l.x&&r.y<l.y)&&(l=r),r=r.next;while(r!==c);return l}function mf(c,r,l,d,_,S,C,M){return(_-C)*(r-M)>=(c-C)*(S-M)&&(c-C)*(d-M)>=(l-C)*(r-M)&&(l-C)*(S-M)>=(_-C)*(d-M)}function ds(c,r,l,d,_,S,C,M){return!(c===C&&r===M)&&mf(c,r,l,d,_,S,C,M)}function d_(c,r){return c.next.i!==r.i&&c.prev.i!==r.i&&!function(l,d){let _=l;do{if(_.i!==l.i&&_.next.i!==l.i&&_.i!==d.i&&_.next.i!==d.i&&Us(_,_.next,l,d))return!0;_=_.next}while(_!==l);return!1}(c,r)&&(yf(c,r)&&yf(r,c)&&function(l,d){let _=l,S=!1;const C=(l.x+d.x)/2,M=(l.y+d.y)/2;do _.y>M!=_.next.y>M&&_.next.y!==_.y&&C<(_.next.x-_.x)*(M-_.y)/(_.next.y-_.y)+_.x&&(S=!S),_=_.next;while(_!==l);return S}(c,r)&&(xi(c.prev,c,r.prev)||xi(c,r.prev,r))||xl(c,r)&&xi(c.prev,c,c.next)>0&&xi(r.prev,r,r.next)>0)}function xi(c,r,l){return(r.y-c.y)*(l.x-r.x)-(r.x-c.x)*(l.y-r.y)}function xl(c,r){return c.x===r.x&&c.y===r.y}function Us(c,r,l,d){const _=gf(xi(c,r,l)),S=gf(xi(c,r,d)),C=gf(xi(l,d,c)),M=gf(xi(l,d,r));return _!==S&&C!==M||!(_!==0||!_d(c,l,r))||!(S!==0||!_d(c,d,r))||!(C!==0||!_d(l,c,d))||!(M!==0||!_d(l,r,d))}function _d(c,r,l){return r.x<=Math.max(c.x,l.x)&&r.x>=Math.min(c.x,l.x)&&r.y<=Math.max(c.y,l.y)&&r.y>=Math.min(c.y,l.y)}function gf(c){return c>0?1:c<0?-1:0}function yf(c,r){return xi(c.prev,c,c.next)<0?xi(c,r,c.next)>=0&&xi(c,c.prev,r)>=0:xi(c,r,c.prev)<0||xi(c,c.next,r)<0}function Op(c,r){const l=kp(c.i,c.x,c.y),d=kp(r.i,r.x,r.y),_=c.next,S=r.prev;return c.next=r,r.prev=c,l.next=_,_.prev=l,d.next=l,l.prev=d,S.next=d,d.prev=S,d}function Ip(c,r,l,d){const _=kp(c,r,l);return d?(_.next=d.next,_.prev=d,d.next.prev=_,d.next=_):(_.prev=_,_.next=_),_}function pu(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function kp(c,r,l){return{i:c,x:r,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class Co{constructor(r,l){if(l>r)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=r,this._minGranularity=l}getGranularityForZoomLevel(r){return Math.max(Math.floor(this._baseZoomGranularity/(1<<r)),this._minGranularity,1)}}class wi{constructor(r){this.fill=r.fill,this.line=r.line,this.tile=r.tile,this.stencil=r.stencil,this.circle=r.circle}}wi.noSubdivision=new wi({fill:new Co(0,0),line:new Co(0,0),tile:new Co(0,0),stencil:new Co(0,0),circle:1}),rn("SubdivisionGranularityExpression",Co),rn("SubdivisionGranularitySetting",wi);const mu=-32768,_f=32767;class ma{constructor(r,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=r,this._granularityCellSize=Qe/r,this._canonical=l}_getKey(r,l){return(r+=32768)<<16|(l+=32768)<<0}_vertexToIndex(r,l){if(r<-32768||l<-32768||r>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const d=0|Math.round(r),_=0|Math.round(l),S=this._getKey(d,_);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const C=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,C),this._vertexBuffer.push(d,_),C}_subdivideTrianglesScanline(r){if(this._granularity<2)return function(_,S){const C=[];for(let M=0;M<S.length;M+=3){const O=S[M],D=S[M+1],N=S[M+2],V=_[2*O],Z=_[2*O+1];(_[2*D]-V)*(_[2*N+1]-Z)-(_[2*D+1]-Z)*(_[2*N]-V)>0?(C.push(O),C.push(N),C.push(D)):(C.push(O),C.push(D),C.push(N))}return C}(this._vertexBuffer,r);const l=[],d=r.length;for(let _=0;_<d;_+=3){const S=[r[_+0],r[_+1],r[_+2]],C=[this._vertexBuffer[2*r[_+0]+0],this._vertexBuffer[2*r[_+0]+1],this._vertexBuffer[2*r[_+1]+0],this._vertexBuffer[2*r[_+1]+1],this._vertexBuffer[2*r[_+2]+0],this._vertexBuffer[2*r[_+2]+1]];let M=1/0,O=1/0,D=-1/0,N=-1/0;for(let re=0;re<3;re++){const fe=C[2*re],be=C[2*re+1];M=Math.min(M,fe),D=Math.max(D,fe),O=Math.min(O,be),N=Math.max(N,be)}if(M===D||O===N)continue;const V=Math.floor(M/this._granularityCellSize),Z=Math.ceil(D/this._granularityCellSize),Y=Math.floor(O/this._granularityCellSize),Q=Math.ceil(N/this._granularityCellSize);if(V!==Z||Y!==Q)for(let re=Y;re<Q;re++){const fe=this._scanlineGenerateVertexRingForCellRow(re,C,S);m_(this._vertexBuffer,fe,l)}else l.push(...S)}return l}_scanlineGenerateVertexRingForCellRow(r,l,d){const _=r*this._granularityCellSize,S=_+this._granularityCellSize,C=[];for(let M=0;M<3;M++){const O=l[2*M],D=l[2*M+1],N=l[2*(M+1)%6],V=l[(2*(M+1)+1)%6],Z=l[2*(M+2)%6],Y=l[(2*(M+2)+1)%6],Q=N-O,re=V-D,fe=Q===0,be=re===0,$e=(_-D)/re,Te=(S-D)/re,W=Math.min($e,Te),ue=Math.max($e,Te);if(!be&&(W>=1||ue<=0)||be&&(D<_||D>S)){V>=_&&V<=S&&C.push(d[(M+1)%3]);continue}!be&&W>0&&C.push(this._vertexToIndex(O+Q*W,D+re*W));const Oe=O+Q*Math.max(W,0),ot=O+Q*Math.min(ue,1);fe||this._generateIntraEdgeVertices(C,O,D,N,V,Oe,ot),!be&&ue<1&&C.push(this._vertexToIndex(O+Q*ue,D+re*ue)),(be||V>=_&&V<=S)&&C.push(d[(M+1)%3]),!be&&(V<=_||V>=S)&&this._generateInterEdgeVertices(C,O,D,N,V,Z,Y,ot,_,S)}return C}_generateIntraEdgeVertices(r,l,d,_,S,C,M){const O=_-l,D=S-d,N=D===0,V=N?Math.min(l,_):Math.min(C,M),Z=N?Math.max(l,_):Math.max(C,M),Y=Math.floor(V/this._granularityCellSize)+1,Q=Math.ceil(Z/this._granularityCellSize)-1;if(N?l<_:C<M)for(let re=Y;re<=Q;re++){const fe=re*this._granularityCellSize;r.push(this._vertexToIndex(fe,d+D*(fe-l)/O))}else for(let re=Q;re>=Y;re--){const fe=re*this._granularityCellSize;r.push(this._vertexToIndex(fe,d+D*(fe-l)/O))}}_generateInterEdgeVertices(r,l,d,_,S,C,M,O,D,N){const V=S-d,Z=C-_,Y=M-S,Q=(D-S)/Y,re=(N-S)/Y,fe=Math.min(Q,re),be=Math.max(Q,re),$e=_+Z*fe;let Te=Math.floor(Math.min($e,O)/this._granularityCellSize)+1,W=Math.ceil(Math.max($e,O)/this._granularityCellSize)-1,ue=O<$e;const Oe=Y===0;if(Oe&&(M===D||M===N))return;if(Oe||fe>=1||be<=0){const Lt=d-M,ht=C+(l-C)*Math.min((D-M)/Lt,(N-M)/Lt);Te=Math.floor(Math.min(ht,O)/this._granularityCellSize)+1,W=Math.ceil(Math.max(ht,O)/this._granularityCellSize)-1,ue=O<ht}const ot=V>0?N:D;if(ue)for(let Lt=Te;Lt<=W;Lt++)r.push(this._vertexToIndex(Lt*this._granularityCellSize,ot));else for(let Lt=W;Lt>=Te;Lt--)r.push(this._vertexToIndex(Lt*this._granularityCellSize,ot))}_generateOutline(r){const l=[];for(const d of r){const _=gu(d,this._granularity,!0),S=this._pointArrayToIndices(_),C=[];for(let M=1;M<S.length;M++)C.push(S[M-1]),C.push(S[M]);l.push(C)}return l}_handlePoles(r){let l=!1,d=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(d=!0)),(l||d)&&this._fillPoles(r,l,d)}_ensureNoPoleVertices(){const r=this._vertexBuffer;for(let l=0;l<r.length;l+=2){const d=r[l+1];d===mu&&(r[l+1]=-32767),d===_f&&(r[l+1]=32766)}}_generatePoleQuad(r,l,d,_,S,C){_>S!=(C===mu)?(r.push(l),r.push(d),r.push(this._vertexToIndex(_,C)),r.push(d),r.push(this._vertexToIndex(S,C)),r.push(this._vertexToIndex(_,C))):(r.push(d),r.push(l),r.push(this._vertexToIndex(_,C)),r.push(this._vertexToIndex(S,C)),r.push(d),r.push(this._vertexToIndex(_,C)))}_fillPoles(r,l,d){const _=this._vertexBuffer,S=Qe,C=r.length;for(let M=2;M<C;M+=3){const O=r[M-2],D=r[M-1],N=r[M],V=_[2*O],Z=_[2*O+1],Y=_[2*D],Q=_[2*D+1],re=_[2*N],fe=_[2*N+1];l&&(Z===0&&Q===0&&this._generatePoleQuad(r,O,D,V,Y,mu),Q===0&&fe===0&&this._generatePoleQuad(r,D,N,Y,re,mu),fe===0&&Z===0&&this._generatePoleQuad(r,N,O,re,V,mu)),d&&(Z===S&&Q===S&&this._generatePoleQuad(r,O,D,V,Y,_f),Q===S&&fe===S&&this._generatePoleQuad(r,D,N,Y,re,_f),fe===S&&Z===S&&this._generatePoleQuad(r,N,O,re,V,_f))}}_initializeVertices(r){for(let l=0;l<r.length;l+=2)this._vertexToIndex(r[l],r[l+1])}subdividePolygonInternal(r,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:d,holeIndices:_}=function(M){const O=[],D=[];for(const N of M)if(N.length!==0){N!==M[0]&&O.push(D.length/2);for(let V=0;V<N.length;V++)D.push(N[V].x),D.push(N[V].y)}return{flattened:D,holeIndices:O}}(r);let S;this._initializeVertices(d);try{const M=function(D,N,V=2){const Z=N&&N.length,Y=Z?N[0]*V:D.length;let Q=bl(D,0,Y,V,!0);const re=[];if(!Q||Q.next===Q.prev)return re;let fe,be,$e;if(Z&&(Q=function(Te,W,ue,Oe){const ot=[];for(let Lt=0,ht=W.length;Lt<ht;Lt++){const wt=bl(Te,W[Lt]*Oe,Lt<ht-1?W[Lt+1]*Oe:Te.length,Oe,!1);wt===wt.next&&(wt.steiner=!0),ot.push(f_(wt))}ot.sort(yd);for(let Lt=0;Lt<ot.length;Lt++)ue=Ri(ot[Lt],ue);return ue}(D,N,Q,V)),D.length>80*V){fe=1/0,be=1/0;let Te=-1/0,W=-1/0;for(let ue=V;ue<Y;ue+=V){const Oe=D[ue],ot=D[ue+1];Oe<fe&&(fe=Oe),ot<be&&(be=ot),Oe>Te&&(Te=Oe),ot>W&&(W=ot)}$e=Math.max(Te-fe,W-be),$e=$e!==0?32767/$e:0}return gd(Q,re,V,fe,be,$e,0),re}(d,_),O=this._convertIndices(d,M);S=this._subdivideTrianglesScanline(O)}catch(M){console.error(M)}let C=[];return l&&(C=this._generateOutline(r)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:C}}_convertIndices(r,l){const d=[];for(let _=0;_<l.length;_++)d.push(this._vertexToIndex(r[2*l[_]],r[2*l[_]+1]));return d}_pointArrayToIndices(r){const l=[];for(let d=0;d<r.length;d++){const _=r[d];l.push(this._vertexToIndex(_.x,_.y))}return l}}function p_(c,r,l,d=!0){return new ma(l,r).subdividePolygonInternal(c,d)}function gu(c,r,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const d=c[0],_=c[c.length-1],S=l&&(d.x!==_.x||d.y!==_.y);if(r<2)return S?[...c,c[0]]:[...c];const C=Math.floor(Qe/r),M=[];M.push(new X(c[0].x,c[0].y));const O=c.length,D=S?O:O-1;for(let N=0;N<D;N++){const V=c[N],Z=N<O-1?c[N+1]:c[0],Y=V.x,Q=V.y,re=Z.x,fe=Z.y,be=Y!==re,$e=Q!==fe;if(!be&&!$e)continue;const Te=re-Y,W=fe-Q,ue=Math.abs(Te),Oe=Math.abs(W);let ot=Y,Lt=Q;for(;;){const wt=Te>0?(Math.floor(ot/C)+1)*C:(Math.ceil(ot/C)-1)*C,Ut=W>0?(Math.floor(Lt/C)+1)*C:(Math.ceil(Lt/C)-1)*C,jt=Math.abs(ot-wt),Zt=Math.abs(Lt-Ut),Et=Math.abs(ot-re),on=Math.abs(Lt-fe),_n=be?jt/ue:Number.POSITIVE_INFINITY,yn=$e?Zt/Oe:Number.POSITIVE_INFINITY;if((Et<=jt||!be)&&(on<=Zt||!$e))break;if(_n<yn&&be||!$e){ot=wt,Lt+=W*_n;const hn=new X(ot,Math.round(Lt));M[M.length-1].x===hn.x&&M[M.length-1].y===hn.y||M.push(hn)}else{ot+=Te*yn,Lt=Ut;const hn=new X(Math.round(ot),Lt);M[M.length-1].x===hn.x&&M[M.length-1].y===hn.y||M.push(hn)}}const ht=new X(re,fe);M[M.length-1].x===ht.x&&M[M.length-1].y===ht.y||M.push(ht)}return M}function m_(c,r,l){if(r.length===0)throw new Error("Subdivision vertex ring is empty.");let d=0,_=c[2*r[0]];for(let O=1;O<r.length;O++){const D=c[2*r[O]];D<_&&(_=D,d=O)}const S=r.length;let C=d,M=(C+1)%S;for(;;){const O=C-1>=0?C-1:S-1,D=(M+1)%S,N=c[2*r[O]],V=c[2*r[D]],Z=c[2*r[C]],Y=c[2*r[C]+1],Q=c[2*r[M]+1];let re=!1;if(N<V)re=!0;else if(N>V)re=!1;else{const fe=Q-Y,be=-(c[2*r[M]]-Z),$e=Y<Q?1:-1;((N-Z)*fe+(c[2*r[O]+1]-Y)*be)*$e>((V-Z)*fe+(c[2*r[D]+1]-Y)*be)*$e&&(re=!0)}if(re){const fe=r[O],be=r[C],$e=r[M];fe!==be&&fe!==$e&&be!==$e&&l.push($e,be,fe),C--,C<0&&(C=S-1)}else{const fe=r[D],be=r[C],$e=r[M];fe!==be&&fe!==$e&&be!==$e&&l.push($e,be,fe),M++,M>=S&&(M=0)}if(O===D)break}}function di(c,r,l,d,_,S,C,M,O){const D=_.length/2,N=C&&M&&O;if(D<mr.MAX_VERTEX_ARRAY_LENGTH){const V=r.prepareSegment(D,l,d),Z=V.vertexLength;for(let re=0;re<S.length;re+=3)d.emplaceBack(Z+S[re],Z+S[re+1],Z+S[re+2]);let Y,Q;V.vertexLength+=D,V.primitiveLength+=S.length/3,N&&(Q=C.prepareSegment(D,l,M),Y=Q.vertexLength,Q.vertexLength+=D);for(let re=0;re<_.length;re+=2)c(_[re],_[re+1]);if(N)for(let re=0;re<O.length;re++){const fe=O[re];for(let be=1;be<fe.length;be+=2)M.emplaceBack(Y+fe[be-1],Y+fe[be]);Q.primitiveLength+=fe.length/2}}else(function(V,Z,Y,Q,re,fe){const be=[];for(let Oe=0;Oe<Q.length/2;Oe++)be.push(-1);const $e={count:0};let Te=0,W=V.getOrCreateLatestSegment(Z,Y),ue=W.vertexLength;for(let Oe=2;Oe<re.length;Oe+=3){const ot=re[Oe-2],Lt=re[Oe-1],ht=re[Oe];let wt=be[ot]<Te,Ut=be[Lt]<Te,jt=be[ht]<Te;W.vertexLength+((wt?1:0)+(Ut?1:0)+(jt?1:0))>mr.MAX_VERTEX_ARRAY_LENGTH&&(W=V.createNewSegment(Z,Y),Te=$e.count,wt=!0,Ut=!0,jt=!0,ue=0);const Zt=ga(be,Q,fe,$e,ot,wt,W),Et=ga(be,Q,fe,$e,Lt,Ut,W),on=ga(be,Q,fe,$e,ht,jt,W);Y.emplaceBack(ue+Zt-Te,ue+Et-Te,ue+on-Te),W.primitiveLength++}})(r,l,d,_,S,c),N&&function(V,Z,Y,Q,re,fe){const be=[];for(let Oe=0;Oe<Q.length/2;Oe++)be.push(-1);const $e={count:0};let Te=0,W=V.getOrCreateLatestSegment(Z,Y),ue=W.vertexLength;for(let Oe=0;Oe<re.length;Oe++){const ot=re[Oe];for(let Lt=1;Lt<re[Oe].length;Lt+=2){const ht=ot[Lt-1],wt=ot[Lt];let Ut=be[ht]<Te,jt=be[wt]<Te;W.vertexLength+((Ut?1:0)+(jt?1:0))>mr.MAX_VERTEX_ARRAY_LENGTH&&(W=V.createNewSegment(Z,Y),Te=$e.count,Ut=!0,jt=!0,ue=0);const Zt=ga(be,Q,fe,$e,ht,Ut,W),Et=ga(be,Q,fe,$e,wt,jt,W);Y.emplaceBack(ue+Zt-Te,ue+Et-Te),W.primitiveLength++}}}(C,l,M,_,O,c),r.forceNewSegmentOnNextPrepare(),C==null||C.forceNewSegmentOnNextPrepare()}function ga(c,r,l,d,_,S,C){if(S){const M=d.count;return l(r[2*_],r[2*_+1]),c[_]=d.count,d.count++,C.vertexLength++,M}return c[_]}class Hs{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Yt,this.indexArray=new fr,this.indexArray2=new Ai,this.programConfigurations=new $s(r.layers,r.zoom),this.segments=new mr,this.segments2=new mr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=md("fill",this.layers,l);const _=this.layers[0].layout.get("fill-sort-key"),S=!_.isConstant(),C=[];for(const{feature:M,id:O,index:D,sourceLayerIndex:N}of r){const V=this.layers[0]._featureFilter.needGeometry,Z=io(M,V);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),Z,d))continue;const Y=S?_.evaluate(Z,{},d,l.availableImages):void 0,Q={id:O,properties:M.properties,type:M.type,sourceLayerIndex:N,index:D,geometry:V?Z.geometry:wo(M),patterns:{},sortKey:Y};C.push(Q)}S&&C.sort((M,O)=>M.sortKey-O.sortKey);for(const M of C){const{geometry:O,index:D,sourceLayerIndex:N}=M;if(this.hasPattern){const V=Pp("fill",this.layers,M,this.zoom,l);this.patternFeatures.push(V)}else this.addFeature(M,O,D,d,{},l.subdivisionGranularity);l.featureIndex.insert(r[D].feature,O,D,N,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,l,d,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,c_),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.indexBuffer2=r.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(r,l,d,_,S,C){for(const M of Xu(l,500)){const O=p_(M,_,C.fill.getGranularityForZoomLevel(_.z)),D=this.layoutVertexArray;di((N,V)=>{D.emplaceBack(N,V)},this.segments,this.layoutVertexArray,this.indexArray,O.verticesFlattened,O.indicesTriangles,this.segments2,this.indexArray2,O.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,S,_)}}let Sg,Cg;rn("FillBucket",Hs,{omit:["layers","patternFeatures"]});var nb={get paint(){return Cg=Cg||new ii({"fill-antialias":new nn(ce.paint_fill["fill-antialias"]),"fill-opacity":new xn(ce.paint_fill["fill-opacity"]),"fill-color":new xn(ce.paint_fill["fill-color"]),"fill-outline-color":new xn(ce.paint_fill["fill-outline-color"]),"fill-translate":new nn(ce.paint_fill["fill-translate"]),"fill-translate-anchor":new nn(ce.paint_fill["fill-translate-anchor"]),"fill-pattern":new cs(ce.paint_fill["fill-pattern"])})},get layout(){return Sg=Sg||new ii({"fill-sort-key":new xn(ce.layout_fill["fill-sort-key"])})}};class Tg extends xo{constructor(r){super(r,nb)}recalculate(r,l){super.recalculate(r,l);const d=this.paint._values["fill-outline-color"];d.value.kind==="constant"&&d.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(r){return new Hs(r)}queryRadius(){return dd(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:r,geometry:l,transform:d,pixelsToTileUnits:_}){return hg(Cp(r,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-d.bearingInRadians,_),l)}isTileClipped(){return!0}}const jo=Qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),qs=Qr([{name:"a_centroid",components:2,type:"Int16"}],4),{members:g_}=jo;var ao,Eg,wl,yu,Sl,zp,Dp,Fo={};function Mg(){if(Eg)return ao;Eg=1;var c=B();function r(_,S,C,M,O){this.properties={},this.extent=C,this.type=0,this._pbf=_,this._geometry=-1,this._keys=M,this._values=O,_.readFields(l,this,S)}function l(_,S,C){_==1?S.id=C.readVarint():_==2?function(M,O){for(var D=M.readVarint()+M.pos;M.pos<D;){var N=O._keys[M.readVarint()],V=O._values[M.readVarint()];O.properties[N]=V}}(C,S):_==3?S.type=C.readVarint():_==4&&(S._geometry=C.pos)}function d(_){for(var S,C,M=0,O=0,D=_.length,N=D-1;O<D;N=O++)M+=((C=_[N]).x-(S=_[O]).x)*(S.y+C.y);return M}return ao=r,r.types=["Unknown","Point","LineString","Polygon"],r.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var S,C=_.readVarint()+_.pos,M=1,O=0,D=0,N=0,V=[];_.pos<C;){if(O<=0){var Z=_.readVarint();M=7&Z,O=Z>>3}if(O--,M===1||M===2)D+=_.readSVarint(),N+=_.readSVarint(),M===1&&(S&&V.push(S),S=[]),S.push(new c(D,N));else{if(M!==7)throw new Error("unknown command "+M);S&&S.push(S[0].clone())}}return S&&V.push(S),V},r.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var S=_.readVarint()+_.pos,C=1,M=0,O=0,D=0,N=1/0,V=-1/0,Z=1/0,Y=-1/0;_.pos<S;){if(M<=0){var Q=_.readVarint();C=7&Q,M=Q>>3}if(M--,C===1||C===2)(O+=_.readSVarint())<N&&(N=O),O>V&&(V=O),(D+=_.readSVarint())<Z&&(Z=D),D>Y&&(Y=D);else if(C!==7)throw new Error("unknown command "+C)}return[N,Z,V,Y]},r.prototype.toGeoJSON=function(_,S,C){var M,O,D=this.extent*Math.pow(2,C),N=this.extent*_,V=this.extent*S,Z=this.loadGeometry(),Y=r.types[this.type];function Q(be){for(var $e=0;$e<be.length;$e++){var Te=be[$e];be[$e]=[360*(Te.x+N)/D-180,360/Math.PI*Math.atan(Math.exp((180-360*(Te.y+V)/D)*Math.PI/180))-90]}}switch(this.type){case 1:var re=[];for(M=0;M<Z.length;M++)re[M]=Z[M][0];Q(Z=re);break;case 2:for(M=0;M<Z.length;M++)Q(Z[M]);break;case 3:for(Z=function(be){var $e=be.length;if($e<=1)return[be];for(var Te,W,ue=[],Oe=0;Oe<$e;Oe++){var ot=d(be[Oe]);ot!==0&&(W===void 0&&(W=ot<0),W===ot<0?(Te&&ue.push(Te),Te=[be[Oe]]):Te.push(be[Oe]))}return Te&&ue.push(Te),ue}(Z),M=0;M<Z.length;M++)for(O=0;O<Z[M].length;O++)Q(Z[M][O])}Z.length===1?Z=Z[0]:Y="Multi"+Y;var fe={type:"Feature",geometry:{type:Y,coordinates:Z},properties:this.properties};return"id"in this&&(fe.id=this.id),fe},ao}function mh(){if(yu)return wl;yu=1;var c=Mg();function r(d,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=d,this._keys=[],this._values=[],this._features=[],d.readFields(l,this,_),this.length=this._features.length}function l(d,_,S){d===15?_.version=S.readVarint():d===1?_.name=S.readString():d===5?_.extent=S.readVarint():d===2?_._features.push(S.pos):d===3?_._keys.push(S.readString()):d===4&&_._values.push(function(C){for(var M=null,O=C.readVarint()+C.pos;C.pos<O;){var D=C.readVarint()>>3;M=D===1?C.readString():D===2?C.readFloat():D===3?C.readDouble():D===4?C.readVarint64():D===5?C.readVarint():D===6?C.readSVarint():D===7?C.readBoolean():null}return M}(S))}return wl=r,r.prototype.feature=function(d){if(d<0||d>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[d];var _=this._pbf.readVarint()+this._pbf.pos;return new c(this._pbf,_,this.extent,this._keys,this._values)},wl}function vf(){return Dp||(Dp=1,Fo.VectorTile=function(){if(zp)return Sl;zp=1;var c=mh();function r(l,d,_){if(l===3){var S=new c(_,_.readVarint()+_.pos);S.length&&(d[S.name]=S)}}return Sl=function(l,d){this.layers=l.readFields(r,{},d)},Sl}(),Fo.VectorTileFeature=Mg(),Fo.VectorTileLayer=mh()),Fo}var yc=E(vf());const bf=yc.VectorTileFeature.types,Lp=Math.pow(2,13);function xf(c,r,l,d,_,S,C,M){c.emplaceBack(r,l,2*Math.floor(d*Lp)+C,_*Lp*2,S*Lp*2,Math.round(M))}class gh{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.layoutVertexArray=new Dt,this.centroidVertexArray=new vt,this.indexArray=new fr,this.programConfigurations=new $s(r.layers,r.zoom),this.segments=new mr,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.features=[],this.hasPattern=md("fill-extrusion",this.layers,l);for(const{feature:_,id:S,index:C,sourceLayerIndex:M}of r){const O=this.layers[0]._featureFilter.needGeometry,D=io(_,O);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),D,d))continue;const N={id:S,sourceLayerIndex:M,index:C,geometry:O?D.geometry:wo(_),properties:_.properties,type:_.type,patterns:{}};this.hasPattern?this.features.push(Pp("fill-extrusion",this.layers,N,this.zoom,l)):this.addFeature(N,N.geometry,C,d,{},l.subdivisionGranularity),l.featureIndex.insert(_,N.geometry,C,M,this.index,!0)}}addFeatures(r,l,d){for(const _ of this.features){const{geometry:S}=_;this.addFeature(_,S,_.index,l,d,r.subdivisionGranularity)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,g_),this.centroidVertexBuffer=r.createVertexBuffer(this.centroidVertexArray,qs.members,!0),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(r,l,d,_,S,C){for(const M of Xu(l,500)){const O={x:0,y:0,sampleCount:0},D=this.layoutVertexArray.length;this.processPolygon(O,_,r,M,C);const N=this.layoutVertexArray.length-D,V=Math.floor(O.x/O.sampleCount),Z=Math.floor(O.y/O.sampleCount);for(let Y=0;Y<N;Y++)this.centroidVertexArray.emplaceBack(V,Z)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,S,_)}processPolygon(r,l,d,_,S){if(_.length<1||Ag(_[0]))return;for(const V of _)V.length!==0&&y_(r,V);const C={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=S.fill.getGranularityForZoomLevel(l.z),O=bf[d.type]==="Polygon";for(const V of _){if(V.length===0||Ag(V))continue;const Z=gu(V,M,O);this._generateSideFaces(Z,C)}if(!O)return;const D=p_(_,l,M,!1),N=this.layoutVertexArray;di((V,Z)=>{xf(N,V,Z,0,0,1,1,0)},this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles)}_generateSideFaces(r,l){let d=0;for(let _=1;_<r.length;_++){const S=r[_],C=r[_-1];if(Bp(S,C))continue;l.segment.vertexLength+4>mr.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=S.sub(C)._perp()._unit(),O=C.dist(S);d+O>32768&&(d=0),xf(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,0,d),xf(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,1,d),d+=O,xf(this.layoutVertexArray,C.x,C.y,M.x,M.y,0,0,d),xf(this.layoutVertexArray,C.x,C.y,M.x,M.y,0,1,d);const D=l.segment.vertexLength;this.indexArray.emplaceBack(D,D+2,D+1),this.indexArray.emplaceBack(D+1,D+2,D+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function y_(c,r){for(let l=0;l<r.length;l++){const d=r[l];l===r.length-1&&r[0].x===d.x&&r[0].y===d.y||(c.x+=d.x,c.y+=d.y,c.sampleCount++)}}function Bp(c,r){return c.x===r.x&&(c.x<0||c.x>Qe)||c.y===r.y&&(c.y<0||c.y>Qe)}function Ag(c){return c.every(r=>r.x<0)||c.every(r=>r.x>Qe)||c.every(r=>r.y<0)||c.every(r=>r.y>Qe)}let __;rn("FillExtrusionBucket",gh,{omit:["layers","features"]});var rb={get paint(){return __=__||new ii({"fill-extrusion-opacity":new nn(ce["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new xn(ce["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new nn(ce["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new nn(ce["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new cs(ce["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new xn(ce["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new xn(ce["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new nn(ce["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class jr extends xo{constructor(r){super(r,rb)}createBucket(r){return new gh(r)}queryRadius(){return dd(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:r,feature:l,featureState:d,geometry:_,transform:S,pixelsToTileUnits:C,pixelPosMatrix:M}){const O=Cp(r,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,C),D=this.paint.get("fill-extrusion-height").evaluate(l,d),N=this.paint.get("fill-extrusion-base").evaluate(l,d),V=function(Y,Q,re){const fe=[];for(const be of Y){const $e=[be.x,be.y,0,1];We($e,$e,Q),fe.push(new X($e[0]/$e[3],$e[1]/$e[3]))}return fe}(O,M),Z=function(Y,Q,re,fe){const be=[],$e=[],Te=fe[8]*Q,W=fe[9]*Q,ue=fe[10]*Q,Oe=fe[11]*Q,ot=fe[8]*re,Lt=fe[9]*re,ht=fe[10]*re,wt=fe[11]*re;for(const Ut of Y){const jt=[],Zt=[];for(const Et of Ut){const on=Et.x,_n=Et.y,yn=fe[0]*on+fe[4]*_n+fe[12],hn=fe[1]*on+fe[5]*_n+fe[13],Zn=fe[2]*on+fe[6]*_n+fe[14],Tr=fe[3]*on+fe[7]*_n+fe[15],Gr=Zn+ue,pi=Tr+Oe,za=yn+ot,na=hn+Lt,ai=Zn+ht,oi=Tr+wt,Vi=new X((yn+Te)/pi,(hn+W)/pi);Vi.z=Gr/pi,jt.push(Vi);const Ii=new X(za/oi,na/oi);Ii.z=ai/oi,Zt.push(Ii)}be.push(jt),$e.push(Zt)}return[be,$e]}(_,N,D,M);return function(Y,Q,re){let fe=1/0;hg(re,Q)&&(fe=ir(re,Q[0]));for(let be=0;be<Q.length;be++){const $e=Q[be],Te=Y[be];for(let W=0;W<$e.length-1;W++){const ue=$e[W],Oe=[ue,$e[W+1],Te[W+1],Te[W],ue];wp(re,Oe)&&(fe=Math.min(fe,ir(re,Oe)))}}return fe!==1/0&&fe}(Z[0],Z[1],V)}}function kr(c,r){return c.x*r.x+c.y*r.y}function ir(c,r){if(c.length===1){let l=0;const d=r[l++];let _;for(;!_||d.equals(_);)if(_=r[l++],!_)return 1/0;for(;l<r.length;l++){const S=r[l],C=c[0],M=_.sub(d),O=S.sub(d),D=C.sub(d),N=kr(M,M),V=kr(M,O),Z=kr(O,O),Y=kr(D,M),Q=kr(D,O),re=N*Z-V*V,fe=(Z*Y-V*Q)/re,be=(N*Q-V*Y)/re,$e=d.z*(1-fe-be)+_.z*fe+S.z*be;if(isFinite($e))return $e}return 1/0}{let l=1/0;for(const d of r)l=Math.min(l,d.z);return l}}const yr=Qr([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:Fr}=yr,$o=Qr([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:_u}=$o,wf=yc.VectorTileFeature.types,Pg=Math.cos(Math.PI/180*37.5),Cl=Math.pow(2,14)/.5;class Si{constructor(r){this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(l=>l.id),this.index=r.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(l=>{this.gradients[l.id]={}}),this.layoutVertexArray=new un,this.layoutVertexArray2=new $n,this.indexArray=new fr,this.programConfigurations=new $s(r.layers,r.zoom),this.segments=new mr,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(l=>l.isStateDependent()).map(l=>l.id)}populate(r,l,d){this.hasPattern=md("line",this.layers,l);const _=this.layers[0].layout.get("line-sort-key"),S=!_.isConstant(),C=[];for(const{feature:M,id:O,index:D,sourceLayerIndex:N}of r){const V=this.layers[0]._featureFilter.needGeometry,Z=io(M,V);if(!this.layers[0]._featureFilter.filter(new Nr(this.zoom),Z,d))continue;const Y=S?_.evaluate(Z,{},d):void 0,Q={id:O,properties:M.properties,type:M.type,sourceLayerIndex:N,index:D,geometry:V?Z.geometry:wo(M),patterns:{},sortKey:Y};C.push(Q)}S&&C.sort((M,O)=>M.sortKey-O.sortKey);for(const M of C){const{geometry:O,index:D,sourceLayerIndex:N}=M;if(this.hasPattern){const V=Pp("line",this.layers,M,this.zoom,l);this.patternFeatures.push(V)}else this.addFeature(M,O,D,d,{},l.subdivisionGranularity);l.featureIndex.insert(r[D].feature,O,D,N,this.index)}}update(r,l,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(r,l,this.stateDependentLayers,d)}addFeatures(r,l,d){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,l,d,r.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(r){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=r.createVertexBuffer(this.layoutVertexArray2,_u)),this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Fr),this.indexBuffer=r.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(r),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(r){if(r.properties&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(r.properties,"mapbox_clip_end"))return{start:+r.properties.mapbox_clip_start,end:+r.properties.mapbox_clip_end}}addFeature(r,l,d,_,S,C){const M=this.layers[0].layout,O=M.get("line-join").evaluate(r,{}),D=M.get("line-cap"),N=M.get("line-miter-limit"),V=M.get("line-round-limit");this.lineClips=this.lineFeatureClips(r);for(const Z of l)this.addLine(Z,r,O,D,N,V,_,C);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,r,d,S,_)}addLine(r,l,d,_,S,C,M,O){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,r=gu(r,M?O.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Te=0;Te<r.length-1;Te++)this.totalDistance+=r[Te].dist(r[Te+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const D=wf[l.type]==="Polygon";let N=r.length;for(;N>=2&&r[N-1].equals(r[N-2]);)N--;let V=0;for(;V<N-1&&r[V].equals(r[V+1]);)V++;if(N<(D?3:2))return;d==="bevel"&&(S=1.05);const Z=this.overscaling<=16?15*Qe/(512*this.overscaling):0,Y=this.segments.prepareSegment(10*N,this.layoutVertexArray,this.indexArray);let Q,re,fe,be,$e;this.e1=this.e2=-1,D&&(Q=r[N-2],$e=r[V].sub(Q)._unit()._perp());for(let Te=V;Te<N;Te++){if(fe=Te===N-1?D?r[V+1]:void 0:r[Te+1],fe&&r[Te].equals(fe))continue;$e&&(be=$e),Q&&(re=Q),Q=r[Te],$e=fe?fe.sub(Q)._unit()._perp():be,be=be||$e;let W=be.add($e);W.x===0&&W.y===0||W._unit();const ue=be.x*$e.x+be.y*$e.y,Oe=W.x*$e.x+W.y*$e.y,ot=Oe!==0?1/Oe:1/0,Lt=2*Math.sqrt(2-2*Oe),ht=Oe<Pg&&re&&fe,wt=be.x*$e.y-be.y*$e.x>0;if(ht&&Te>V){const Zt=Q.dist(re);if(Zt>2*Z){const Et=Q.sub(Q.sub(re)._mult(Z/Zt)._round());this.updateDistance(re,Et),this.addCurrentVertex(Et,be,0,0,Y),re=Et}}const Ut=re&&fe;let jt=Ut?d:D?"butt":_;if(Ut&&jt==="round"&&(ot<C?jt="miter":ot<=2&&(jt="fakeround")),jt==="miter"&&ot>S&&(jt="bevel"),jt==="bevel"&&(ot>2&&(jt="flipbevel"),ot<S&&(jt="miter")),re&&this.updateDistance(re,Q),jt==="miter")W._mult(ot),this.addCurrentVertex(Q,W,0,0,Y);else if(jt==="flipbevel"){if(ot>100)W=$e.mult(-1);else{const Zt=ot*be.add($e).mag()/be.sub($e).mag();W._perp()._mult(Zt*(wt?-1:1))}this.addCurrentVertex(Q,W,0,0,Y),this.addCurrentVertex(Q,W.mult(-1),0,0,Y)}else if(jt==="bevel"||jt==="fakeround"){const Zt=-Math.sqrt(ot*ot-1),Et=wt?Zt:0,on=wt?0:Zt;if(re&&this.addCurrentVertex(Q,be,Et,on,Y),jt==="fakeround"){const _n=Math.round(180*Lt/Math.PI/20);for(let yn=1;yn<_n;yn++){let hn=yn/_n;if(hn!==.5){const Tr=hn-.5;hn+=hn*Tr*(hn-1)*((1.0904+ue*(ue*(3.55645-1.43519*ue)-3.2452))*Tr*Tr+(.848013+ue*(.215638*ue-1.06021)))}const Zn=$e.sub(be)._mult(hn)._add(be)._unit()._mult(wt?-1:1);this.addHalfVertex(Q,Zn.x,Zn.y,!1,wt,0,Y)}}fe&&this.addCurrentVertex(Q,$e,-Et,-on,Y)}else if(jt==="butt")this.addCurrentVertex(Q,W,0,0,Y);else if(jt==="square"){const Zt=re?1:-1;this.addCurrentVertex(Q,W,Zt,Zt,Y)}else jt==="round"&&(re&&(this.addCurrentVertex(Q,be,0,0,Y),this.addCurrentVertex(Q,be,1,1,Y,!0)),fe&&(this.addCurrentVertex(Q,$e,-1,-1,Y,!0),this.addCurrentVertex(Q,$e,0,0,Y)));if(ht&&Te<N-1){const Zt=Q.dist(fe);if(Zt>2*Z){const Et=Q.add(fe.sub(Q)._mult(Z/Zt)._round());this.updateDistance(Q,Et),this.addCurrentVertex(Et,$e,0,0,Y),Q=Et}}}}addCurrentVertex(r,l,d,_,S,C=!1){const M=l.y*_-l.x,O=-l.y-l.x*_;this.addHalfVertex(r,l.x+l.y*d,l.y-l.x*d,C,!1,d,S),this.addHalfVertex(r,M,O,C,!0,-_,S),this.distance>Cl/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(r,l,d,_,S,C))}addHalfVertex({x:r,y:l},d,_,S,C,M,O){const D=.5*(this.lineClips?this.scaledDistance*(Cl-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((r<<1)+(S?1:0),(l<<1)+(C?1:0),Math.round(63*d)+128,Math.round(63*_)+128,1+(M===0?0:M<0?-1:1)|(63&D)<<2,D>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const N=O.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,N,this.e2),O.primitiveLength++),C?this.e2=N:this.e1=N}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(r,l){this.distance+=r.dist(l),this.updateScaledDistance()}}let _c,vu;rn("LineBucket",Si,{omit:["layers","patternFeatures"]});var Np={get paint(){return vu=vu||new ii({"line-opacity":new xn(ce.paint_line["line-opacity"]),"line-color":new xn(ce.paint_line["line-color"]),"line-translate":new nn(ce.paint_line["line-translate"]),"line-translate-anchor":new nn(ce.paint_line["line-translate-anchor"]),"line-width":new xn(ce.paint_line["line-width"]),"line-gap-width":new xn(ce.paint_line["line-gap-width"]),"line-offset":new xn(ce.paint_line["line-offset"]),"line-blur":new xn(ce.paint_line["line-blur"]),"line-dasharray":new ks(ce.paint_line["line-dasharray"]),"line-pattern":new cs(ce.paint_line["line-pattern"]),"line-gradient":new uu(ce.paint_line["line-gradient"])})},get layout(){return _c=_c||new ii({"line-cap":new nn(ce.layout_line["line-cap"]),"line-join":new xn(ce.layout_line["line-join"]),"line-miter-limit":new nn(ce.layout_line["line-miter-limit"]),"line-round-limit":new nn(ce.layout_line["line-round-limit"]),"line-sort-key":new xn(ce.layout_line["line-sort-key"])})}};class ps extends xn{possiblyEvaluate(r,l){return l=new Nr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(r,l)}evaluate(r,l,d,_){return l=Xe({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(r,l,d,_)}}let vc;class vd extends xo{constructor(r){super(r,Np),this.gradientVersion=0,vc||(vc=new ps(Np.paint.properties["line-width"].specification),vc.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(r){if(r==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!function(d){return d._styleExpression!==void 0}(l)&&l._styleExpression.expression instanceof ll,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(r,l){super.recalculate(r,l),this.paint._values["line-floorwidth"]=vc.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,r)}createBucket(r){return new Si(r)}queryRadius(r){const l=r,d=oo(ff("line-width",this,l),ff("line-gap-width",this,l)),_=ff("line-offset",this,l);return d/2+Math.abs(_)+dd(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:r,feature:l,featureState:d,geometry:_,transform:S,pixelsToTileUnits:C}){const M=Cp(r,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,C),O=C/2*oo(this.paint.get("line-width").evaluate(l,d),this.paint.get("line-gap-width").evaluate(l,d)),D=this.paint.get("line-offset").evaluate(l,d);return D&&(_=function(N,V){const Z=[];for(let Y=0;Y<N.length;Y++){const Q=N[Y],re=[];for(let fe=0;fe<Q.length;fe++){const be=Q[fe-1],$e=Q[fe],Te=Q[fe+1],W=fe===0?new X(0,0):$e.sub(be)._unit()._perp(),ue=fe===Q.length-1?new X(0,0):Te.sub($e)._unit()._perp(),Oe=W._add(ue)._unit(),ot=Oe.x*ue.x+Oe.y*ue.y;ot!==0&&Oe._mult(1/ot),re.push(Oe._mult(V)._add($e))}Z.push(re)}return Z}(_,D*C)),function(N,V,Z){for(let Y=0;Y<V.length;Y++){const Q=V[Y];if(N.length>=3){for(let re=0;re<Q.length;re++)if(du(N,Q[re]))return!0}if(ph(N,Q,Z))return!0}return!1}(M,_,O)}isTileClipped(){return!0}}function oo(c,r){return r>0?r+2*c:c}const Rg=Qr([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),Og=Qr([{name:"a_projected_pos",components:3,type:"Float32"}],4);Qr([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const jp=Qr([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Qr([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const bd=Qr([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),bu=Qr([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function ka(c,r,l){return c.sections.forEach(d=>{d.text=function(_,S,C){const M=S.layout.get("text-transform").evaluate(C,{});return M==="uppercase"?_=_.toLocaleUpperCase():M==="lowercase"&&(_=_.toLocaleLowerCase()),ss.applyArabicShaping&&(_=ss.applyArabicShaping(_)),_}(d.text,r,l)}),c}Qr([{name:"triangle",components:3,type:"Uint16"}]),Qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Qr([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Qr([{type:"Float32",name:"offsetX"}]),Qr([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Qr([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);const ms={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""};var yh,xu,Fp,Oi=24,$p={};function xd(){return yh||(yh=1,$p.read=function(c,r,l,d,_){var S,C,M=8*_-d-1,O=(1<<M)-1,D=O>>1,N=-7,V=l?_-1:0,Z=l?-1:1,Y=c[r+V];for(V+=Z,S=Y&(1<<-N)-1,Y>>=-N,N+=M;N>0;S=256*S+c[r+V],V+=Z,N-=8);for(C=S&(1<<-N)-1,S>>=-N,N+=d;N>0;C=256*C+c[r+V],V+=Z,N-=8);if(S===0)S=1-D;else{if(S===O)return C?NaN:1/0*(Y?-1:1);C+=Math.pow(2,d),S-=D}return(Y?-1:1)*C*Math.pow(2,S-d)},$p.write=function(c,r,l,d,_,S){var C,M,O,D=8*S-_-1,N=(1<<D)-1,V=N>>1,Z=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,Y=d?0:S-1,Q=d?1:-1,re=r<0||r===0&&1/r<0?1:0;for(r=Math.abs(r),isNaN(r)||r===1/0?(M=isNaN(r)?1:0,C=N):(C=Math.floor(Math.log(r)/Math.LN2),r*(O=Math.pow(2,-C))<1&&(C--,O*=2),(r+=C+V>=1?Z/O:Z*Math.pow(2,1-V))*O>=2&&(C++,O/=2),C+V>=N?(M=0,C=N):C+V>=1?(M=(r*O-1)*Math.pow(2,_),C+=V):(M=r*Math.pow(2,V-1)*Math.pow(2,_),C=0));_>=8;c[l+Y]=255&M,Y+=Q,M/=256,_-=8);for(C=C<<_|M,D+=_;D>0;c[l+Y]=255&C,Y+=Q,C/=256,D-=8);c[l+Y-Q]|=128*re}),$p}function Vp(){if(Fp)return xu;Fp=1,xu=r;var c=xd();function r(W){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(W)?W:new Uint8Array(W||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var l=4294967296,d=1/l,_=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");function S(W){return W.type===r.Bytes?W.readVarint()+W.pos:W.pos+1}function C(W,ue,Oe){return Oe?4294967296*ue+(W>>>0):4294967296*(ue>>>0)+(W>>>0)}function M(W,ue,Oe){var ot=ue<=16383?1:ue<=2097151?2:ue<=268435455?3:Math.floor(Math.log(ue)/(7*Math.LN2));Oe.realloc(ot);for(var Lt=Oe.pos-1;Lt>=W;Lt--)Oe.buf[Lt+ot]=Oe.buf[Lt]}function O(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeVarint(W[Oe])}function D(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeSVarint(W[Oe])}function N(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeFloat(W[Oe])}function V(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeDouble(W[Oe])}function Z(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeBoolean(W[Oe])}function Y(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeFixed32(W[Oe])}function Q(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeSFixed32(W[Oe])}function re(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeFixed64(W[Oe])}function fe(W,ue){for(var Oe=0;Oe<W.length;Oe++)ue.writeSFixed64(W[Oe])}function be(W,ue){return(W[ue]|W[ue+1]<<8|W[ue+2]<<16)+16777216*W[ue+3]}function $e(W,ue,Oe){W[Oe]=ue,W[Oe+1]=ue>>>8,W[Oe+2]=ue>>>16,W[Oe+3]=ue>>>24}function Te(W,ue){return(W[ue]|W[ue+1]<<8|W[ue+2]<<16)+(W[ue+3]<<24)}return r.prototype={destroy:function(){this.buf=null},readFields:function(W,ue,Oe){for(Oe=Oe||this.length;this.pos<Oe;){var ot=this.readVarint(),Lt=ot>>3,ht=this.pos;this.type=7&ot,W(Lt,ue,this),this.pos===ht&&this.skip(ot)}return ue},readMessage:function(W,ue){return this.readFields(W,ue,this.readVarint()+this.pos)},readFixed32:function(){var W=be(this.buf,this.pos);return this.pos+=4,W},readSFixed32:function(){var W=Te(this.buf,this.pos);return this.pos+=4,W},readFixed64:function(){var W=be(this.buf,this.pos)+be(this.buf,this.pos+4)*l;return this.pos+=8,W},readSFixed64:function(){var W=be(this.buf,this.pos)+Te(this.buf,this.pos+4)*l;return this.pos+=8,W},readFloat:function(){var W=c.read(this.buf,this.pos,!0,23,4);return this.pos+=4,W},readDouble:function(){var W=c.read(this.buf,this.pos,!0,52,8);return this.pos+=8,W},readVarint:function(W){var ue,Oe,ot=this.buf;return ue=127&(Oe=ot[this.pos++]),Oe<128?ue:(ue|=(127&(Oe=ot[this.pos++]))<<7,Oe<128?ue:(ue|=(127&(Oe=ot[this.pos++]))<<14,Oe<128?ue:(ue|=(127&(Oe=ot[this.pos++]))<<21,Oe<128?ue:function(Lt,ht,wt){var Ut,jt,Zt=wt.buf;if(Ut=(112&(jt=Zt[wt.pos++]))>>4,jt<128||(Ut|=(127&(jt=Zt[wt.pos++]))<<3,jt<128)||(Ut|=(127&(jt=Zt[wt.pos++]))<<10,jt<128)||(Ut|=(127&(jt=Zt[wt.pos++]))<<17,jt<128)||(Ut|=(127&(jt=Zt[wt.pos++]))<<24,jt<128)||(Ut|=(1&(jt=Zt[wt.pos++]))<<31,jt<128))return C(Lt,Ut,ht);throw new Error("Expected varint not more than 10 bytes")}(ue|=(15&(Oe=ot[this.pos]))<<28,W,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var W=this.readVarint();return W%2==1?(W+1)/-2:W/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var W=this.readVarint()+this.pos,ue=this.pos;return this.pos=W,W-ue>=12&&_?function(Oe,ot,Lt){return _.decode(Oe.subarray(ot,Lt))}(this.buf,ue,W):function(Oe,ot,Lt){for(var ht="",wt=ot;wt<Lt;){var Ut,jt,Zt,Et=Oe[wt],on=null,_n=Et>239?4:Et>223?3:Et>191?2:1;if(wt+_n>Lt)break;_n===1?Et<128&&(on=Et):_n===2?(192&(Ut=Oe[wt+1]))==128&&(on=(31&Et)<<6|63&Ut)<=127&&(on=null):_n===3?(jt=Oe[wt+2],(192&(Ut=Oe[wt+1]))==128&&(192&jt)==128&&((on=(15&Et)<<12|(63&Ut)<<6|63&jt)<=2047||on>=55296&&on<=57343)&&(on=null)):_n===4&&(jt=Oe[wt+2],Zt=Oe[wt+3],(192&(Ut=Oe[wt+1]))==128&&(192&jt)==128&&(192&Zt)==128&&((on=(15&Et)<<18|(63&Ut)<<12|(63&jt)<<6|63&Zt)<=65535||on>=1114112)&&(on=null)),on===null?(on=65533,_n=1):on>65535&&(on-=65536,ht+=String.fromCharCode(on>>>10&1023|55296),on=56320|1023&on),ht+=String.fromCharCode(on),wt+=_n}return ht}(this.buf,ue,W)},readBytes:function(){var W=this.readVarint()+this.pos,ue=this.buf.subarray(this.pos,W);return this.pos=W,ue},readPackedVarint:function(W,ue){if(this.type!==r.Bytes)return W.push(this.readVarint(ue));var Oe=S(this);for(W=W||[];this.pos<Oe;)W.push(this.readVarint(ue));return W},readPackedSVarint:function(W){if(this.type!==r.Bytes)return W.push(this.readSVarint());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readSVarint());return W},readPackedBoolean:function(W){if(this.type!==r.Bytes)return W.push(this.readBoolean());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readBoolean());return W},readPackedFloat:function(W){if(this.type!==r.Bytes)return W.push(this.readFloat());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readFloat());return W},readPackedDouble:function(W){if(this.type!==r.Bytes)return W.push(this.readDouble());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readDouble());return W},readPackedFixed32:function(W){if(this.type!==r.Bytes)return W.push(this.readFixed32());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readFixed32());return W},readPackedSFixed32:function(W){if(this.type!==r.Bytes)return W.push(this.readSFixed32());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readSFixed32());return W},readPackedFixed64:function(W){if(this.type!==r.Bytes)return W.push(this.readFixed64());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readFixed64());return W},readPackedSFixed64:function(W){if(this.type!==r.Bytes)return W.push(this.readSFixed64());var ue=S(this);for(W=W||[];this.pos<ue;)W.push(this.readSFixed64());return W},skip:function(W){var ue=7&W;if(ue===r.Varint)for(;this.buf[this.pos++]>127;);else if(ue===r.Bytes)this.pos=this.readVarint()+this.pos;else if(ue===r.Fixed32)this.pos+=4;else{if(ue!==r.Fixed64)throw new Error("Unimplemented type: "+ue);this.pos+=8}},writeTag:function(W,ue){this.writeVarint(W<<3|ue)},realloc:function(W){for(var ue=this.length||16;ue<this.pos+W;)ue*=2;if(ue!==this.length){var Oe=new Uint8Array(ue);Oe.set(this.buf),this.buf=Oe,this.length=ue}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(W){this.realloc(4),$e(this.buf,W,this.pos),this.pos+=4},writeSFixed32:function(W){this.realloc(4),$e(this.buf,W,this.pos),this.pos+=4},writeFixed64:function(W){this.realloc(8),$e(this.buf,-1&W,this.pos),$e(this.buf,Math.floor(W*d),this.pos+4),this.pos+=8},writeSFixed64:function(W){this.realloc(8),$e(this.buf,-1&W,this.pos),$e(this.buf,Math.floor(W*d),this.pos+4),this.pos+=8},writeVarint:function(W){(W=+W||0)>268435455||W<0?function(ue,Oe){var ot,Lt;if(ue>=0?(ot=ue%4294967296|0,Lt=ue/4294967296|0):(Lt=~(-ue/4294967296),4294967295^(ot=~(-ue%4294967296))?ot=ot+1|0:(ot=0,Lt=Lt+1|0)),ue>=18446744073709552e3||ue<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Oe.realloc(10),function(ht,wt,Ut){Ut.buf[Ut.pos++]=127&ht|128,ht>>>=7,Ut.buf[Ut.pos++]=127&ht|128,ht>>>=7,Ut.buf[Ut.pos++]=127&ht|128,ht>>>=7,Ut.buf[Ut.pos++]=127&ht|128,Ut.buf[Ut.pos]=127&(ht>>>=7)}(ot,0,Oe),function(ht,wt){var Ut=(7&ht)<<4;wt.buf[wt.pos++]|=Ut|((ht>>>=3)?128:0),ht&&(wt.buf[wt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(wt.buf[wt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(wt.buf[wt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(wt.buf[wt.pos++]=127&ht|((ht>>>=7)?128:0),ht&&(wt.buf[wt.pos++]=127&ht)))))}(Lt,Oe)}(W,this):(this.realloc(4),this.buf[this.pos++]=127&W|(W>127?128:0),W<=127||(this.buf[this.pos++]=127&(W>>>=7)|(W>127?128:0),W<=127||(this.buf[this.pos++]=127&(W>>>=7)|(W>127?128:0),W<=127||(this.buf[this.pos++]=W>>>7&127))))},writeSVarint:function(W){this.writeVarint(W<0?2*-W-1:2*W)},writeBoolean:function(W){this.writeVarint(!!W)},writeString:function(W){W=String(W),this.realloc(4*W.length),this.pos++;var ue=this.pos;this.pos=function(ot,Lt,ht){for(var wt,Ut,jt=0;jt<Lt.length;jt++){if((wt=Lt.charCodeAt(jt))>55295&&wt<57344){if(!Ut){wt>56319||jt+1===Lt.length?(ot[ht++]=239,ot[ht++]=191,ot[ht++]=189):Ut=wt;continue}if(wt<56320){ot[ht++]=239,ot[ht++]=191,ot[ht++]=189,Ut=wt;continue}wt=Ut-55296<<10|wt-56320|65536,Ut=null}else Ut&&(ot[ht++]=239,ot[ht++]=191,ot[ht++]=189,Ut=null);wt<128?ot[ht++]=wt:(wt<2048?ot[ht++]=wt>>6|192:(wt<65536?ot[ht++]=wt>>12|224:(ot[ht++]=wt>>18|240,ot[ht++]=wt>>12&63|128),ot[ht++]=wt>>6&63|128),ot[ht++]=63&wt|128)}return ht}(this.buf,W,this.pos);var Oe=this.pos-ue;Oe>=128&&M(ue,Oe,this),this.pos=ue-1,this.writeVarint(Oe),this.pos+=Oe},writeFloat:function(W){this.realloc(4),c.write(this.buf,W,this.pos,!0,23,4),this.pos+=4},writeDouble:function(W){this.realloc(8),c.write(this.buf,W,this.pos,!0,52,8),this.pos+=8},writeBytes:function(W){var ue=W.length;this.writeVarint(ue),this.realloc(ue);for(var Oe=0;Oe<ue;Oe++)this.buf[this.pos++]=W[Oe]},writeRawMessage:function(W,ue){this.pos++;var Oe=this.pos;W(ue,this);var ot=this.pos-Oe;ot>=128&&M(Oe,ot,this),this.pos=Oe-1,this.writeVarint(ot),this.pos+=ot},writeMessage:function(W,ue,Oe){this.writeTag(W,r.Bytes),this.writeRawMessage(ue,Oe)},writePackedVarint:function(W,ue){ue.length&&this.writeMessage(W,O,ue)},writePackedSVarint:function(W,ue){ue.length&&this.writeMessage(W,D,ue)},writePackedBoolean:function(W,ue){ue.length&&this.writeMessage(W,Z,ue)},writePackedFloat:function(W,ue){ue.length&&this.writeMessage(W,N,ue)},writePackedDouble:function(W,ue){ue.length&&this.writeMessage(W,V,ue)},writePackedFixed32:function(W,ue){ue.length&&this.writeMessage(W,Y,ue)},writePackedSFixed32:function(W,ue){ue.length&&this.writeMessage(W,Q,ue)},writePackedFixed64:function(W,ue){ue.length&&this.writeMessage(W,re,ue)},writePackedSFixed64:function(W,ue){ue.length&&this.writeMessage(W,fe,ue)},writeBytesField:function(W,ue){this.writeTag(W,r.Bytes),this.writeBytes(ue)},writeFixed32Field:function(W,ue){this.writeTag(W,r.Fixed32),this.writeFixed32(ue)},writeSFixed32Field:function(W,ue){this.writeTag(W,r.Fixed32),this.writeSFixed32(ue)},writeFixed64Field:function(W,ue){this.writeTag(W,r.Fixed64),this.writeFixed64(ue)},writeSFixed64Field:function(W,ue){this.writeTag(W,r.Fixed64),this.writeSFixed64(ue)},writeVarintField:function(W,ue){this.writeTag(W,r.Varint),this.writeVarint(ue)},writeSVarintField:function(W,ue){this.writeTag(W,r.Varint),this.writeSVarint(ue)},writeStringField:function(W,ue){this.writeTag(W,r.Bytes),this.writeString(ue)},writeFloatField:function(W,ue){this.writeTag(W,r.Fixed32),this.writeFloat(ue)},writeDoubleField:function(W,ue){this.writeTag(W,r.Fixed64),this.writeDouble(ue)},writeBooleanField:function(W,ue){this.writeVarintField(W,!!ue)}},xu}var so=E(Vp());const Up=3;function Vo(c,r,l){c===1&&l.readMessage(v_,r)}function v_(c,r,l){if(c===3){const{id:d,bitmap:_,width:S,height:C,left:M,top:O,advance:D}=l.readMessage(b_,{});r.push({id:d,bitmap:new pf({width:S+2*Up,height:C+2*Up},_),metrics:{width:S,height:C,left:M,top:O,advance:D}})}}function b_(c,r,l){c===1?r.id=l.readVarint():c===2?r.bitmap=l.readBytes():c===3?r.width=l.readVarint():c===4?r.height=l.readVarint():c===5?r.left=l.readSVarint():c===6?r.top=l.readSVarint():c===7&&(r.advance=l.readVarint())}const ib=Up;function bc(c){let r=0,l=0;for(const C of c)r+=C.w*C.h,l=Math.max(l,C.w);c.sort((C,M)=>M.h-C.h);const d=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(r/.95)),l),h:1/0}];let _=0,S=0;for(const C of c)for(let M=d.length-1;M>=0;M--){const O=d[M];if(!(C.w>O.w||C.h>O.h)){if(C.x=O.x,C.y=O.y,S=Math.max(S,C.y+C.h),_=Math.max(_,C.x+C.w),C.w===O.w&&C.h===O.h){const D=d.pop();M<d.length&&(d[M]=D)}else C.h===O.h?(O.x+=C.w,O.w-=C.w):C.w===O.w?(O.y+=C.h,O.h-=C.h):(d.push({x:O.x+C.w,y:O.y,w:O.w-C.w,h:C.h}),O.y+=C.h,O.h-=C.h);break}}return{w:_,h:S,fill:r/(_*S)||0}}const ya=1;class wd{constructor(r,{pixelRatio:l,version:d,stretchX:_,stretchY:S,content:C,textFitWidth:M,textFitHeight:O}){this.paddedRect=r,this.pixelRatio=l,this.stretchX=_,this.stretchY=S,this.content=C,this.version=d,this.textFitWidth=M,this.textFitHeight=O}get tl(){return[this.paddedRect.x+ya,this.paddedRect.y+ya]}get br(){return[this.paddedRect.x+this.paddedRect.w-ya,this.paddedRect.y+this.paddedRect.h-ya]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2*ya)/this.pixelRatio,(this.paddedRect.h-2*ya)/this.pixelRatio]}}class _h{constructor(r,l){const d={},_={};this.haveRenderCallbacks=[];const S=[];this.addImages(r,d,S),this.addImages(l,_,S);const{w:C,h:M}=bc(S),O=new So({width:C||1,height:M||1});for(const D in r){const N=r[D],V=d[D].paddedRect;So.copy(N.data,O,{x:0,y:0},{x:V.x+ya,y:V.y+ya},N.data)}for(const D in l){const N=l[D],V=_[D].paddedRect,Z=V.x+ya,Y=V.y+ya,Q=N.data.width,re=N.data.height;So.copy(N.data,O,{x:0,y:0},{x:Z,y:Y},N.data),So.copy(N.data,O,{x:0,y:re-1},{x:Z,y:Y-1},{width:Q,height:1}),So.copy(N.data,O,{x:0,y:0},{x:Z,y:Y+re},{width:Q,height:1}),So.copy(N.data,O,{x:Q-1,y:0},{x:Z-1,y:Y},{width:1,height:re}),So.copy(N.data,O,{x:0,y:0},{x:Z+Q,y:Y},{width:1,height:re})}this.image=O,this.iconPositions=d,this.patternPositions=_}addImages(r,l,d){for(const _ in r){const S=r[_],C={x:0,y:0,w:S.data.width+2*ya,h:S.data.height+2*ya};d.push(C),l[_]=new wd(C,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(_)}}patchUpdatedImages(r,l){r.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const d in r.updatedImages)this.patchUpdatedImage(this.iconPositions[d],r.getImage(d),l),this.patchUpdatedImage(this.patternPositions[d],r.getImage(d),l)}patchUpdatedImage(r,l,d){if(!r||!l||r.version===l.version)return;r.version=l.version;const[_,S]=r.tl;d.update(l.data,void 0,{x:_,y:S})}}var xc;rn("ImagePosition",wd),rn("ImageAtlas",_h),g.al=void 0,(xc=g.al||(g.al={}))[xc.none=0]="none",xc[xc.horizontal=1]="horizontal",xc[xc.vertical=2]="vertical",xc[xc.horizontalOnly=3]="horizontalOnly";const Sd=-17;class Sf{constructor(){this.scale=1,this.fontStack="",this.imageName=null,this.verticalAlign="bottom"}static forText(r,l,d){const _=new Sf;return _.scale=r||1,_.fontStack=l,_.verticalAlign=d||"bottom",_}static forImage(r,l){const d=new Sf;return d.imageName=r,d.verticalAlign=l||"bottom",d}}class wu{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(r,l){const d=new wu;for(let _=0;_<r.sections.length;_++){const S=r.sections[_];S.image?d.addImageSection(S):d.addTextSection(S,l)}return d}length(){return this.text.length}getSection(r){return this.sections[this.sectionIndex[r]]}getSectionIndex(r){return this.sectionIndex[r]}getCharCode(r){return this.text.charCodeAt(r)}verticalizePunctuation(){this.text=function(r){let l="";for(let d=0;d<r.length;d++){const _=r.charCodeAt(d+1)||null,S=r.charCodeAt(d-1)||null;l+=_&&Is(_)&&!ms[r[d+1]]||S&&Is(S)&&!ms[r[d-1]]||!ms[r[d]]?r[d]:ms[r[d]]}return l}(this.text)}trim(){let r=0;for(let d=0;d<this.text.length&&Hp[this.text.charCodeAt(d)];d++)r++;let l=this.text.length;for(let d=this.text.length-1;d>=0&&d>=r&&Hp[this.text.charCodeAt(d)];d--)l--;this.text=this.text.substring(r,l),this.sectionIndex=this.sectionIndex.slice(r,l)}substring(r,l){const d=new wu;return d.text=this.text.substring(r,l),d.sectionIndex=this.sectionIndex.slice(r,l),d.sections=this.sections,d}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((r,l)=>Math.max(r,this.sections[l].scale),0)}getMaxImageSize(r){let l=0,d=0;for(let _=0;_<this.length();_++){const S=this.getSection(_);if(S.imageName){const C=r[S.imageName];if(!C)continue;const M=C.displaySize;l=Math.max(l,M[0]),d=Math.max(d,M[1])}}return{maxImageWidth:l,maxImageHeight:d}}addTextSection(r,l){this.text+=r.text,this.sections.push(Sf.forText(r.scale,r.fontStack||l,r.verticalAlign));const d=this.sections.length-1;for(let _=0;_<r.text.length;++_)this.sectionIndex.push(d)}addImageSection(r){const l=r.image?r.image.name:"";if(l.length===0)return void $t("Can't add FormattedSection with an empty image.");const d=this.getNextImageSectionCharCode();d?(this.text+=String.fromCharCode(d),this.sections.push(Sf.forImage(l,r.verticalAlign)),this.sectionIndex.push(this.sections.length-1)):$t("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function Cf(c,r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q){const re=wu.fromFeature(c,_);let fe;V===g.al.vertical&&re.verticalizePunctuation();const{processBidirectionalText:be,processStyledBidirectionalText:$e}=ss;if(be&&re.sections.length===1){fe=[];const ue=be(re.toString(),qp(re,D,S,r,d,Y));for(const Oe of ue){const ot=new wu;ot.text=Oe,ot.sections=re.sections;for(let Lt=0;Lt<Oe.length;Lt++)ot.sectionIndex.push(0);fe.push(ot)}}else if($e){fe=[];const ue=$e(re.text,re.sectionIndex,qp(re,D,S,r,d,Y));for(const Oe of ue){const ot=new wu;ot.text=Oe[0],ot.sectionIndex=Oe[1],ot.sections=re.sections,fe.push(ot)}}else fe=function(ue,Oe){const ot=[],Lt=ue.text;let ht=0;for(const wt of Oe)ot.push(ue.substring(ht,wt)),ht=wt;return ht<Lt.length&&ot.push(ue.substring(ht,Lt.length)),ot}(re,qp(re,D,S,r,d,Y));const Te=[],W={positionedLines:Te,text:re.toString(),top:N[1],bottom:N[1],left:N[0],right:N[0],writingMode:V,iconsInText:!1,verticalizable:!1};return function(ue,Oe,ot,Lt,ht,wt,Ut,jt,Zt,Et,on,_n){let yn=0,hn=0,Zn=0,Tr=0;const Gr=jt==="right"?1:jt==="left"?0:.5,pi=Oi/_n;let za=0;for(const oi of ht){oi.trim();const Vi=oi.getMaxScale(),Ii={positionedGlyphs:[],lineOffset:0};ue.positionedLines[za]=Ii;const ra=Ii.positionedGlyphs;let Da=0;if(!oi.length()){hn+=wt,++za;continue}const qa=x_(Lt,oi,pi);for(let lo=0;lo<oi.length();lo++){const Ci=oi.getSection(lo),ki=oi.getSectionIndex(lo),Hi=oi.getCharCode(lo),si=w_(Zt,on,Hi);let zr;if(Ci.imageName){if(ue.iconsInText=!0,Ci.scale=Ci.scale*pi,zr=S_(Ci,si,Vi,qa,Lt),!zr)continue;Da=Math.max(Da,zr.imageOffset)}else if(zr=Zp(Ci,Hi,si,qa,Oe,ot),!zr)continue;const{rect:To,metrics:Eh,baselineOffset:Zs}=zr;ra.push({glyph:Hi,imageName:Ci.imageName,x:yn,y:hn+Zs+Sd,vertical:si,scale:Ci.scale,fontStack:Ci.fontStack,sectionIndex:ki,metrics:Eh,rect:To}),si?(ue.verticalizable=!0,yn+=(Ci.imageName?Eh.advance:Oi)*Ci.scale+Et):yn+=Eh.advance*Ci.scale+Et}ra.length!==0&&(Zn=Math.max(yn-Et,Zn),C_(ra,0,ra.length-1,Gr)),yn=0,Ii.lineOffset=Math.max(Da,(Vi-1)*Oi);const Ui=wt*Vi+Da;hn+=Ui,Tr=Math.max(Ui,Tr),++za}const{horizontalAlign:na,verticalAlign:ai}=Gp(Ut);(function(oi,Vi,Ii,ra,Da,qa,Ui,lo,Ci){const ki=(Vi-Ii)*Da;let Hi=0;Hi=qa!==Ui?-lo*ra-Sd:-ra*Ci*Ui+.5*Ui;for(const si of oi)for(const zr of si.positionedGlyphs)zr.x+=ki,zr.y+=Hi})(ue.positionedLines,Gr,na,ai,Zn,Tr,wt,hn,ht.length),ue.top+=-ai*hn,ue.bottom=ue.top+hn,ue.left+=-na*Zn,ue.right=ue.left+Zn}(W,r,l,d,fe,C,M,O,V,D,Z,Q),!function(ue){for(const Oe of ue)if(Oe.positionedGlyphs.length!==0)return!1;return!0}(Te)&&W}const Hp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},ab={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},ob={40:!0};function Ig(c,r,l,d,_,S){if(r.imageName){const C=d[r.imageName];return C?C.displaySize[0]*r.scale*Oi/S+_:0}{const C=l[r.fontStack],M=C&&C[c];return M?M.metrics.advance*r.scale+_:0}}function kg(c,r,l,d){const _=Math.pow(c-r,2);return d?c<r?_/2:2*_:_+Math.abs(l)*l}function Tf(c,r,l){let d=0;return c===10&&(d-=1e4),l&&(d+=150),c!==40&&c!==65288||(d+=50),r!==41&&r!==65289||(d+=50),d}function Cd(c,r,l,d,_,S){let C=null,M=kg(r,l,_,S);for(const O of d){const D=kg(r-O.x,l,_,S)+O.badness;D<=M&&(C=O,M=D)}return{index:c,x:r,priorBreak:C,badness:M}}function zg(c){return c?zg(c.priorBreak).concat(c.index):[]}function qp(c,r,l,d,_,S){if(!c)return[];const C=[],M=function(V,Z,Y,Q,re,fe){let be=0;for(let $e=0;$e<V.length();$e++){const Te=V.getSection($e);be+=Ig(V.getCharCode($e),Te,Q,re,Z,fe)}return be/Math.max(1,Math.ceil(be/Y))}(c,r,l,d,_,S),O=c.text.indexOf("")>=0;let D=0;for(let V=0;V<c.length();V++){const Z=c.getSection(V),Y=c.getCharCode(V);if(Hp[Y]||(D+=Ig(Y,Z,d,_,r,S)),V<c.length()-1){const Q=!((N=Y)<11904)&&(!!Vn["CJK Compatibility Forms"](N)||!!Vn["CJK Compatibility"](N)||!!Vn["CJK Strokes"](N)||!!Vn["CJK Symbols and Punctuation"](N)||!!Vn["Enclosed CJK Letters and Months"](N)||!!Vn["Halfwidth and Fullwidth Forms"](N)||!!Vn["Ideographic Description Characters"](N)||!!Vn["Vertical Forms"](N)||os.test(String.fromCodePoint(N)));(ab[Y]||Q||Z.imageName||V!==c.length()-2&&ob[c.getCharCode(V+1)])&&C.push(Cd(V+1,D,M,C,Tf(Y,c.getCharCode(V+1),Q&&O),!1))}}var N;return zg(Cd(c.length(),D,M,C,0,!0))}function Gp(c){let r=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":r=1;break;case"left":case"top-left":case"bottom-left":r=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:r,verticalAlign:l}}function x_(c,r,l){const d=r.getMaxScale()*Oi,{maxImageWidth:_,maxImageHeight:S}=r.getMaxImageSize(c),C=Math.max(d,S*l);return{verticalLineContentWidth:Math.max(d,_*l),horizontalLineContentHeight:C}}function Dg(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function w_(c,r,l){return!(c===g.al.horizontal||!r&&!Bo(l)||r&&(Hp[l]||(d=l,new RegExp("\\p{sc=Arab}","u").test(String.fromCodePoint(d)))));var d}function Zp(c,r,l,d,_,S){const C=S[c.fontStack],M=function(D,N,V,Z){if(D&&D.rect)return D;const Y=N[V.fontStack],Q=Y&&Y[Z];return Q?{rect:null,metrics:Q.metrics}:null}(C&&C[r],_,c,r);if(M===null)return null;let O;if(l)O=d.verticalLineContentWidth-c.scale*Oi;else{const D=Dg(c.verticalAlign);O=(d.horizontalLineContentHeight-c.scale*Oi)*D}return{rect:M.rect,metrics:M.metrics,baselineOffset:O}}function S_(c,r,l,d,_){const S=_[c.imageName];if(!S)return null;const C=S.paddedRect,M=S.displaySize,O={width:M[0],height:M[1],left:ya,top:-3,advance:r?M[1]:M[0]};let D;if(r)D=d.verticalLineContentWidth-M[1]*c.scale;else{const N=Dg(c.verticalAlign);D=(d.horizontalLineContentHeight-M[1]*c.scale)*N}return{rect:C,metrics:O,baselineOffset:D,imageOffset:(r?M[0]:M[1])*c.scale-Oi*l}}function C_(c,r,l,d){if(d===0)return;const _=c[l],S=(c[l].x+_.metrics.advance*_.scale)*d;for(let C=r;C<=l;C++)c[C].x-=S}function ni(c,r,l){const{horizontalAlign:d,verticalAlign:_}=Gp(l),S=r[0]-c.displaySize[0]*d,C=r[1]-c.displaySize[1]*_;return{image:c,top:C,bottom:C+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function Xp(c){var r,l;let d=c.left,_=c.top,S=c.right-d,C=c.bottom-_;const M=(r=c.image.textFitWidth)!==null&&r!==void 0?r:"stretchOrShrink",O=(l=c.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",D=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(O==="proportional"){if(M==="stretchOnly"&&S/C<D||M==="proportional"){const N=Math.ceil(C*D);d*=N/S,S=N}}else if(M==="proportional"&&O==="stretchOnly"&&D!==0&&S/C>D){const N=Math.ceil(S/D);_*=N/C,C=N}return{x1:d,y1:_,x2:d+S,y2:_+C}}function T_(c,r,l,d,_,S){const C=c.image;let M;if(C.content){const fe=C.content,be=C.pixelRatio||1;M=[fe[0]/be,fe[1]/be,C.displaySize[0]-fe[2]/be,C.displaySize[1]-fe[3]/be]}const O=r.left*S,D=r.right*S;let N,V,Z,Y;l==="width"||l==="both"?(Y=_[0]+O-d[3],V=_[0]+D+d[1]):(Y=_[0]+(O+D-C.displaySize[0])/2,V=Y+C.displaySize[0]);const Q=r.top*S,re=r.bottom*S;return l==="height"||l==="both"?(N=_[1]+Q-d[0],Z=_[1]+re+d[2]):(N=_[1]+(Q+re-C.displaySize[1])/2,Z=N+C.displaySize[1]),{image:C,top:N,right:V,bottom:Z,left:Y,collisionPadding:M}}const Ef=255,Tl=128,Su=Ef*Tl;function E_(c,r){const{expression:l}=r;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Nr(c+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:d,interpolationType:_}=l;let S=0;for(;S<d.length&&d[S]<=c;)S++;S=Math.max(0,S-1);let C=S;for(;C<d.length&&d[C]<c+1;)C++;C=Math.min(d.length-1,C);const M=d[S],O=d[C];return l.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:O,interpolationType:_}:{kind:"camera",minZoom:M,maxZoom:O,minSize:l.evaluate(new Nr(M)),maxSize:l.evaluate(new Nr(O)),interpolationType:_}}}function Mf(c,r,l){let d="never";const _=c.get(r);return _?d=_:c.get(l)&&(d="always"),d}const Af=yc.VectorTileFeature.types,Lg=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function vh(c,r,l,d,_,S,C,M,O,D,N,V,Z){const Y=M?Math.min(Su,Math.round(M[0])):0,Q=M?Math.min(Su,Math.round(M[1])):0;c.emplaceBack(r,l,Math.round(32*d),Math.round(32*_),S,C,(Y<<1)+(O?1:0),Q,16*D,16*N,256*V,256*Z)}function Td(c,r,l){c.emplaceBack(r.x,r.y,l),c.emplaceBack(r.x,r.y,l),c.emplaceBack(r.x,r.y,l),c.emplaceBack(r.x,r.y,l)}function bh(c){for(const r of c.sections)if(ch(r.text))return!0;return!1}class gs{constructor(r){this.layoutVertexArray=new ei,this.indexArray=new fr,this.programConfigurations=r,this.segments=new mr,this.dynamicLayoutVertexArray=new Mr,this.opacityVertexArray=new ti,this.hasVisibleVertices=!1,this.placedSymbolArray=new De}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(r,l,d,_){this.isEmpty()||(d&&(this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,Rg.members),this.indexBuffer=r.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=r.createVertexBuffer(this.dynamicLayoutVertexArray,Og.members,!0),this.opacityVertexBuffer=r.createVertexBuffer(this.opacityVertexArray,Lg,!0),this.opacityVertexBuffer.itemSize=1),(d||_)&&this.programConfigurations.upload(r))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}rn("SymbolBuffers",gs);class xh{constructor(r,l,d){this.layoutVertexArray=new r,this.layoutAttributes=l,this.indexArray=new d,this.segments=new mr,this.collisionVertexArray=new Ir}upload(r){this.layoutVertexBuffer=r.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=r.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=r.createVertexBuffer(this.collisionVertexArray,jp.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}rn("CollisionBuffers",xh);class Pf{constructor(r){this.collisionBoxArray=r.collisionBoxArray,this.zoom=r.zoom,this.overscaling=r.overscaling,this.layers=r.layers,this.layerIds=this.layers.map(C=>C.id),this.index=r.index,this.pixelRatio=r.pixelRatio,this.sourceLayerIndex=r.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=E_(this.zoom,l["text-size"]),this.iconSizeData=E_(this.zoom,l["icon-size"]);const d=this.layers[0].layout,_=d.get("symbol-sort-key"),S=d.get("symbol-z-order");this.canOverlap=Mf(d,"text-overlap","text-allow-overlap")!=="never"||Mf(d,"icon-overlap","icon-allow-overlap")!=="never"||d.get("text-ignore-placement")||d.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!_.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,d.get("symbol-placement")==="point"&&(this.writingModes=d.get("text-writing-mode").map(C=>g.al[C])),this.stateDependentLayerIds=this.layers.filter(C=>C.isStateDependent()).map(C=>C.id),this.sourceID=r.sourceID}createArrays(){this.text=new gs(new $s(this.layers,this.zoom,r=>/^text/.test(r))),this.icon=new gs(new $s(this.layers,this.zoom,r=>/^icon/.test(r))),this.glyphOffsetArray=new Ue,this.lineVertexArray=new Fe,this.symbolInstances=new je,this.textAnchorOffsets=new Tt}calculateGlyphDependencies(r,l,d,_,S){for(let C=0;C<r.length;C++)if(l[r.charCodeAt(C)]=!0,(d||_)&&S){const M=ms[r.charAt(C)];M&&(l[M.charCodeAt(0)]=!0)}}populate(r,l,d){const _=this.layers[0],S=_.layout,C=S.get("text-font"),M=S.get("text-field"),O=S.get("icon-image"),D=(M.value.kind!=="constant"||M.value.value instanceof ji&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(C.value.kind!=="constant"||C.value.value.length>0),N=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,V=S.get("symbol-sort-key");if(this.features=[],!D&&!N)return;const Z=l.iconDependencies,Y=l.glyphDependencies,Q=l.availableImages,re=new Nr(this.zoom);for(const{feature:fe,id:be,index:$e,sourceLayerIndex:Te}of r){const W=_._featureFilter.needGeometry,ue=io(fe,W);if(!_._featureFilter.filter(re,ue,d))continue;let Oe,ot;if(W||(ue.geometry=wo(fe)),D){const ht=_.getValueAndResolveTokens("text-field",ue,d,Q),wt=ji.factory(ht),Ut=this.hasRTLText=this.hasRTLText||bh(wt);(!Ut||ss.getRTLTextPluginStatus()==="unavailable"||Ut&&ss.isParsed())&&(Oe=ka(wt,_,ue))}if(N){const ht=_.getValueAndResolveTokens("icon-image",ue,d,Q);ot=ht instanceof Aa?ht:Aa.fromString(ht)}if(!Oe&&!ot)continue;const Lt=this.sortFeaturesByKey?V.evaluate(ue,{},d):void 0;if(this.features.push({id:be,text:Oe,icon:ot,index:$e,sourceLayerIndex:Te,geometry:ue.geometry,properties:fe.properties,type:Af[fe.type],sortKey:Lt}),ot&&(Z[ot.name]=!0),Oe){const ht=C.evaluate(ue,{},d).join(","),wt=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(g.al.vertical)>=0;for(const Ut of Oe.sections)if(Ut.image)Z[Ut.image.name]=!0;else{const jt=sh(Oe.toString()),Zt=Ut.fontStack||ht,Et=Y[Zt]=Y[Zt]||{};this.calculateGlyphDependencies(Ut.text,Et,wt,this.allowVerticalPlacement,jt)}}}S.get("symbol-placement")==="line"&&(this.features=function(fe){const be={},$e={},Te=[];let W=0;function ue(ht){Te.push(fe[ht]),W++}function Oe(ht,wt,Ut){const jt=$e[ht];return delete $e[ht],$e[wt]=jt,Te[jt].geometry[0].pop(),Te[jt].geometry[0]=Te[jt].geometry[0].concat(Ut[0]),jt}function ot(ht,wt,Ut){const jt=be[wt];return delete be[wt],be[ht]=jt,Te[jt].geometry[0].shift(),Te[jt].geometry[0]=Ut[0].concat(Te[jt].geometry[0]),jt}function Lt(ht,wt,Ut){const jt=Ut?wt[0][wt[0].length-1]:wt[0][0];return`${ht}:${jt.x}:${jt.y}`}for(let ht=0;ht<fe.length;ht++){const wt=fe[ht],Ut=wt.geometry,jt=wt.text?wt.text.toString():null;if(!jt){ue(ht);continue}const Zt=Lt(jt,Ut),Et=Lt(jt,Ut,!0);if(Zt in $e&&Et in be&&$e[Zt]!==be[Et]){const on=ot(Zt,Et,Ut),_n=Oe(Zt,Et,Te[on].geometry);delete be[Zt],delete $e[Et],$e[Lt(jt,Te[_n].geometry,!0)]=_n,Te[on].geometry=null}else Zt in $e?Oe(Zt,Et,Ut):Et in be?ot(Zt,Et,Ut):(ue(ht),be[Zt]=W-1,$e[Et]=W-1)}return Te.filter(ht=>ht.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((fe,be)=>fe.sortKey-be.sortKey)}update(r,l,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(r,l,this.layers,d),this.icon.programConfigurations.updatePaintArrays(r,l,this.layers,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(r){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(r),this.iconCollisionBox.upload(r)),this.text.upload(r,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(r,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(r,l){const d=this.lineVertexArray.length;if(r.segment!==void 0){let _=r.dist(l[r.segment+1]),S=r.dist(l[r.segment]);const C={};for(let M=r.segment+1;M<l.length;M++)C[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:_},M<l.length-1&&(_+=l[M+1].dist(l[M]));for(let M=r.segment||0;M>=0;M--)C[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:S},M>0&&(S+=l[M-1].dist(l[M]));for(let M=0;M<l.length;M++){const O=C[M];this.lineVertexArray.emplaceBack(O.x,O.y,O.tileUnitDistanceFromAnchor)}}return{lineStartIndex:d,lineLength:this.lineVertexArray.length-d}}addSymbols(r,l,d,_,S,C,M,O,D,N,V,Z){const Y=r.indexArray,Q=r.layoutVertexArray,re=r.segments.prepareSegment(4*l.length,Q,Y,this.canOverlap?C.sortKey:void 0),fe=this.glyphOffsetArray.length,be=re.vertexLength,$e=this.allowVerticalPlacement&&M===g.al.vertical?Math.PI/2:0,Te=C.text&&C.text.sections;for(let W=0;W<l.length;W++){const{tl:ue,tr:Oe,bl:ot,br:Lt,tex:ht,pixelOffsetTL:wt,pixelOffsetBR:Ut,minFontScaleX:jt,minFontScaleY:Zt,glyphOffset:Et,isSDF:on,sectionIndex:_n}=l[W],yn=re.vertexLength,hn=Et[1];vh(Q,O.x,O.y,ue.x,hn+ue.y,ht.x,ht.y,d,on,wt.x,wt.y,jt,Zt),vh(Q,O.x,O.y,Oe.x,hn+Oe.y,ht.x+ht.w,ht.y,d,on,Ut.x,wt.y,jt,Zt),vh(Q,O.x,O.y,ot.x,hn+ot.y,ht.x,ht.y+ht.h,d,on,wt.x,Ut.y,jt,Zt),vh(Q,O.x,O.y,Lt.x,hn+Lt.y,ht.x+ht.w,ht.y+ht.h,d,on,Ut.x,Ut.y,jt,Zt),Td(r.dynamicLayoutVertexArray,O,$e),Y.emplaceBack(yn,yn+2,yn+1),Y.emplaceBack(yn+1,yn+2,yn+3),re.vertexLength+=4,re.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Et[0]),W!==l.length-1&&_n===l[W+1].sectionIndex||r.programConfigurations.populatePaintArrays(Q.length,C,C.index,{},Z,Te&&Te[_n])}r.placedSymbolArray.emplaceBack(O.x,O.y,fe,this.glyphOffsetArray.length-fe,be,D,N,O.segment,d?d[0]:0,d?d[1]:0,_[0],_[1],M,0,!1,0,V)}_addCollisionDebugVertex(r,l,d,_,S,C){return l.emplaceBack(0,0),r.emplaceBack(d.x,d.y,_,S,Math.round(C.x),Math.round(C.y))}addCollisionDebugVertices(r,l,d,_,S,C,M){const O=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),D=O.vertexLength,N=S.layoutVertexArray,V=S.collisionVertexArray,Z=M.anchorX,Y=M.anchorY;this._addCollisionDebugVertex(N,V,C,Z,Y,new X(r,l)),this._addCollisionDebugVertex(N,V,C,Z,Y,new X(d,l)),this._addCollisionDebugVertex(N,V,C,Z,Y,new X(d,_)),this._addCollisionDebugVertex(N,V,C,Z,Y,new X(r,_)),O.vertexLength+=4;const Q=S.indexArray;Q.emplaceBack(D,D+1),Q.emplaceBack(D+1,D+2),Q.emplaceBack(D+2,D+3),Q.emplaceBack(D+3,D),O.primitiveLength+=4}addDebugCollisionBoxes(r,l,d,_){for(let S=r;S<l;S++){const C=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(C.x1,C.y1,C.x2,C.y2,_?this.textCollisionBox:this.iconCollisionBox,C.anchorPoint,d)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new xh(qr,bd.members,Ai),this.iconCollisionBox=new xh(qr,bd.members,Ai);for(let r=0;r<this.symbolInstances.length;r++){const l=this.symbolInstances.get(r);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(r,l,d,_,S,C,M,O,D){const N={};for(let V=l;V<d;V++){const Z=r.get(V);N.textBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.textFeatureIndex=Z.featureIndex;break}for(let V=_;V<S;V++){const Z=r.get(V);N.verticalTextBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.verticalTextFeatureIndex=Z.featureIndex;break}for(let V=C;V<M;V++){const Z=r.get(V);N.iconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.iconFeatureIndex=Z.featureIndex;break}for(let V=O;V<D;V++){const Z=r.get(V);N.verticalIconBox={x1:Z.x1,y1:Z.y1,x2:Z.x2,y2:Z.y2,anchorPointX:Z.anchorPointX,anchorPointY:Z.anchorPointY},N.verticalIconFeatureIndex=Z.featureIndex;break}return N}deserializeCollisionBoxes(r){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const d=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(r,d.textBoxStartIndex,d.textBoxEndIndex,d.verticalTextBoxStartIndex,d.verticalTextBoxEndIndex,d.iconBoxStartIndex,d.iconBoxEndIndex,d.verticalIconBoxStartIndex,d.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(r,l){const d=r.placedSymbolArray.get(l),_=d.vertexStartIndex+4*d.numGlyphs;for(let S=d.vertexStartIndex;S<_;S+=4)r.indexArray.emplaceBack(S,S+2,S+1),r.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(r){if(this.sortedAngle===r&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(r),d=Math.cos(r),_=[],S=[],C=[];for(let M=0;M<this.symbolInstances.length;++M){C.push(M);const O=this.symbolInstances.get(M);_.push(0|Math.round(l*O.anchorX+d*O.anchorY)),S.push(O.featureIndex)}return C.sort((M,O)=>_[M]-_[O]||S[O]-S[M]),C}addToSortKeyRanges(r,l){const d=this.sortKeyRanges[this.sortKeyRanges.length-1];d&&d.sortKey===l?d.symbolInstanceEnd=r+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:r,symbolInstanceEnd:r+1})}sortFeatures(r){if(this.sortFeaturesByY&&this.sortedAngle!==r&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(r),this.sortedAngle=r,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const d=this.symbolInstances.get(l);this.featureSortOrder.push(d.featureIndex),[d.rightJustifiedTextSymbolIndex,d.centerJustifiedTextSymbolIndex,d.leftJustifiedTextSymbolIndex].forEach((_,S,C)=>{_>=0&&C.indexOf(_)===S&&this.addIndicesForPlacedSymbol(this.text,_)}),d.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,d.verticalPlacedTextSymbolIndex),d.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.placedIconSymbolIndex),d.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,d.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let Bg,Ng;rn("SymbolBucket",Pf,{omit:["layers","collisionBoxArray","features","compareText"]}),Pf.MAX_GLYPHS=65535,Pf.addDynamicAttributes=Td;var Wp={get paint(){return Ng=Ng||new ii({"icon-opacity":new xn(ce.paint_symbol["icon-opacity"]),"icon-color":new xn(ce.paint_symbol["icon-color"]),"icon-halo-color":new xn(ce.paint_symbol["icon-halo-color"]),"icon-halo-width":new xn(ce.paint_symbol["icon-halo-width"]),"icon-halo-blur":new xn(ce.paint_symbol["icon-halo-blur"]),"icon-translate":new nn(ce.paint_symbol["icon-translate"]),"icon-translate-anchor":new nn(ce.paint_symbol["icon-translate-anchor"]),"text-opacity":new xn(ce.paint_symbol["text-opacity"]),"text-color":new xn(ce.paint_symbol["text-color"],{runtimeType:Cn,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new xn(ce.paint_symbol["text-halo-color"]),"text-halo-width":new xn(ce.paint_symbol["text-halo-width"]),"text-halo-blur":new xn(ce.paint_symbol["text-halo-blur"]),"text-translate":new nn(ce.paint_symbol["text-translate"]),"text-translate-anchor":new nn(ce.paint_symbol["text-translate-anchor"])})},get layout(){return Bg=Bg||new ii({"symbol-placement":new nn(ce.layout_symbol["symbol-placement"]),"symbol-spacing":new nn(ce.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new nn(ce.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new xn(ce.layout_symbol["symbol-sort-key"]),"symbol-z-order":new nn(ce.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new nn(ce.layout_symbol["icon-allow-overlap"]),"icon-overlap":new nn(ce.layout_symbol["icon-overlap"]),"icon-ignore-placement":new nn(ce.layout_symbol["icon-ignore-placement"]),"icon-optional":new nn(ce.layout_symbol["icon-optional"]),"icon-rotation-alignment":new nn(ce.layout_symbol["icon-rotation-alignment"]),"icon-size":new xn(ce.layout_symbol["icon-size"]),"icon-text-fit":new nn(ce.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new nn(ce.layout_symbol["icon-text-fit-padding"]),"icon-image":new xn(ce.layout_symbol["icon-image"]),"icon-rotate":new xn(ce.layout_symbol["icon-rotate"]),"icon-padding":new xn(ce.layout_symbol["icon-padding"]),"icon-keep-upright":new nn(ce.layout_symbol["icon-keep-upright"]),"icon-offset":new xn(ce.layout_symbol["icon-offset"]),"icon-anchor":new xn(ce.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new nn(ce.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new nn(ce.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new nn(ce.layout_symbol["text-rotation-alignment"]),"text-field":new xn(ce.layout_symbol["text-field"]),"text-font":new xn(ce.layout_symbol["text-font"]),"text-size":new xn(ce.layout_symbol["text-size"]),"text-max-width":new xn(ce.layout_symbol["text-max-width"]),"text-line-height":new nn(ce.layout_symbol["text-line-height"]),"text-letter-spacing":new xn(ce.layout_symbol["text-letter-spacing"]),"text-justify":new xn(ce.layout_symbol["text-justify"]),"text-radial-offset":new xn(ce.layout_symbol["text-radial-offset"]),"text-variable-anchor":new nn(ce.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new xn(ce.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new xn(ce.layout_symbol["text-anchor"]),"text-max-angle":new nn(ce.layout_symbol["text-max-angle"]),"text-writing-mode":new nn(ce.layout_symbol["text-writing-mode"]),"text-rotate":new xn(ce.layout_symbol["text-rotate"]),"text-padding":new nn(ce.layout_symbol["text-padding"]),"text-keep-upright":new nn(ce.layout_symbol["text-keep-upright"]),"text-transform":new xn(ce.layout_symbol["text-transform"]),"text-offset":new xn(ce.layout_symbol["text-offset"]),"text-allow-overlap":new nn(ce.layout_symbol["text-allow-overlap"]),"text-overlap":new nn(ce.layout_symbol["text-overlap"]),"text-ignore-placement":new nn(ce.layout_symbol["text-ignore-placement"]),"text-optional":new nn(ce.layout_symbol["text-optional"])})}};class jg{constructor(r){if(r.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=r.property.overrides?r.property.overrides.runtimeType:Wt,this.defaultValue=r}evaluate(r){if(r.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(r.formattedSection))return l.getOverride(r.formattedSection)}return r.feature&&r.featureState?this.defaultValue.evaluate(r.feature,r.featureState):this.defaultValue.property.specification.default}eachChild(r){this.defaultValue.isConstant()||r(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}rn("FormatSectionOverride",jg,{omit:["defaultValue"]});class Yp extends xo{constructor(r){super(r,Wp)}recalculate(r,l){if(super.recalculate(r,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const d=this.layout.get("text-writing-mode");if(d){const _=[];for(const S of d)_.indexOf(S)<0&&_.push(S);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(r,l,d,_){const S=this.layout.get(r).evaluate(l,{},d,_),C=this._unevaluatedLayout._values[r];return C.isDataDriven()||ac(C.value)||!S?S:function(M,O){return O.replace(/{([^{}]+)}/g,(D,N)=>M&&N in M?String(M[N]):"")}(l.properties,S)}createBucket(r){return new Pf(r)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const r of Wp.paint.overridableProperties){if(!Yp.hasPaintOverride(this.layout,r))continue;const l=this.paint.get(r),d=new jg(l),_=new nu(d,l.property.specification);let S=null;S=l.value.kind==="constant"||l.value.kind==="source"?new fl("source",_):new oc("composite",_,l.value.zoomStops),this.paint._values[r]=new An(l.property,S,l.parameters)}}_handleOverridablePaintPropertyUpdate(r,l,d){return!(!this.layout||l.isDataDriven()||d.isDataDriven())&&Yp.hasPaintOverride(this.layout,r)}static hasPaintOverride(r,l){const d=r.get("text-field"),_=Wp.paint.properties[l];let S=!1;const C=M=>{for(const O of M)if(_.overrides&&_.overrides.hasOverride(O))return void(S=!0)};if(d.value.kind==="constant"&&d.value.value instanceof ji)C(d.value.value.sections);else if(d.value.kind==="source"){const M=D=>{S||(D instanceof Rn&&Hr(D.value)===mi?C(D.value.sections):D instanceof Vh?C(D.sections):D.eachChild(M))},O=d.value;O._styleExpression&&M(O._styleExpression.expression)}return S}}let Kp;var M_={get paint(){return Kp=Kp||new ii({"background-color":new nn(ce.paint_background["background-color"]),"background-pattern":new ks(ce.paint_background["background-pattern"]),"background-opacity":new nn(ce.paint_background["background-opacity"])})}};class A_ extends xo{constructor(r){super(r,M_)}}let P_;var Fg={get paint(){return P_=P_||new ii({"raster-opacity":new nn(ce.paint_raster["raster-opacity"]),"raster-hue-rotate":new nn(ce.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new nn(ce.paint_raster["raster-brightness-min"]),"raster-brightness-max":new nn(ce.paint_raster["raster-brightness-max"]),"raster-saturation":new nn(ce.paint_raster["raster-saturation"]),"raster-contrast":new nn(ce.paint_raster["raster-contrast"]),"raster-resampling":new nn(ce.paint_raster["raster-resampling"]),"raster-fade-duration":new nn(ce.paint_raster["raster-fade-duration"])})}};class $g extends xo{constructor(r){super(r,Fg)}}class sb extends xo{constructor(r){super(r,{}),this.onAdd=l=>{this.implementation.onAdd&&this.implementation.onAdd(l,l.painter.context.gl)},this.onRemove=l=>{this.implementation.onRemove&&this.implementation.onRemove(l,l.painter.context.gl)},this.implementation=r}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class lb{constructor(r){this._methodToThrottle=r,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._methodToThrottle()},0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const Ed={once:!0},Vg=63710088e-1;class wc{constructor(r,l){if(isNaN(r)||isNaN(l))throw new Error(`Invalid LngLat object: (${r}, ${l})`);if(this.lng=+r,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new wc(qt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(r){const l=Math.PI/180,d=this.lat*l,_=r.lat*l,S=Math.sin(d)*Math.sin(_)+Math.cos(d)*Math.cos(_)*Math.cos((r.lng-this.lng)*l);return Vg*Math.acos(Math.min(S,1))}static convert(r){if(r instanceof wc)return r;if(Array.isArray(r)&&(r.length===2||r.length===3))return new wc(Number(r[0]),Number(r[1]));if(!Array.isArray(r)&&typeof r=="object"&&r!==null)return new wc(Number("lng"in r?r.lng:r.lon),Number(r.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const ar=2*Math.PI*Vg;function Qp(c){return ar*Math.cos(c*Math.PI/180)}function Md(c){return(180+c)/360}function Jp(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function Ug(c,r){return c/Qp(r)}function Ad(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function Rf(c,r){return c*Qp(Ad(r))}class Cu{constructor(r,l,d=0){this.x=+r,this.y=+l,this.z=+d}static fromLngLat(r,l=0){const d=wc.convert(r);return new Cu(Md(d.lng),Jp(d.lat),Ug(l,d.lat))}toLngLat(){return new wc(360*this.x-180,Ad(this.y))}toAltitude(){return Rf(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/ar*(r=Ad(this.y),1/Math.cos(r*Math.PI/180));var r}}function wh(c,r,l){var d=2*Math.PI*6378137/256/Math.pow(2,l);return[c*d-2*Math.PI*6378137/2,r*d-2*Math.PI*6378137/2]}class em{constructor(r,l,d){if(!function(_,S,C){return!(_<0||_>25||C<0||C>=Math.pow(2,_)||S<0||S>=Math.pow(2,_))}(r,l,d))throw new Error(`x=${l}, y=${d}, z=${r} outside of bounds. 0<=x<${Math.pow(2,r)}, 0<=y<${Math.pow(2,r)} 0<=z<=25 `);this.z=r,this.x=l,this.y=d,this.key=Sh(0,r,r,l,d)}equals(r){return this.z===r.z&&this.x===r.x&&this.y===r.y}url(r,l,d){const _=(C=this.y,M=this.z,O=wh(256*(S=this.x),256*(C=Math.pow(2,M)-C-1),M),D=wh(256*(S+1),256*(C+1),M),O[0]+","+O[1]+","+D[0]+","+D[1]);var S,C,M,O,D;const N=function(V,Z,Y){let Q,re="";for(let fe=V;fe>0;fe--)Q=1<<fe-1,re+=(Z&Q?1:0)+(Y&Q?2:0);return re}(this.z,this.x,this.y);return r[(this.x+this.y)%r.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(d==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,N).replace(/{bbox-epsg-3857}/g,_)}isChildOf(r){const l=this.z-r.z;return l>0&&r.x===this.x>>l&&r.y===this.y>>l}getTilePoint(r){const l=Math.pow(2,this.z);return new X((r.x*l-this.x)*Qe,(r.y*l-this.y)*Qe)}toString(){return`${this.z}/${this.x}/${this.y}`}}class R_{constructor(r,l){this.wrap=r,this.canonical=l,this.key=Sh(r,l.z,l.z,l.x,l.y)}}class Uo{constructor(r,l,d,_,S){if(this.terrainRttPosMatrix32f=null,r<d)throw new Error(`overscaledZ should be >= z; overscaledZ = ${r}; z = ${d}`);this.overscaledZ=r,this.wrap=l,this.canonical=new em(d,+_,+S),this.key=Sh(l,r,d,_,S)}clone(){return new Uo(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(r){return this.overscaledZ===r.overscaledZ&&this.wrap===r.wrap&&this.canonical.equals(r.canonical)}scaledTo(r){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-r;return r>this.canonical.z?new Uo(r,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Uo(r,this.wrap,r,this.canonical.x>>l,this.canonical.y>>l)}calculateScaledKey(r,l){if(r>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${r}; overscaledZ = ${this.overscaledZ}`);const d=this.canonical.z-r;return r>this.canonical.z?Sh(this.wrap*+l,r,this.canonical.z,this.canonical.x,this.canonical.y):Sh(this.wrap*+l,r,r,this.canonical.x>>d,this.canonical.y>>d)}isChildOf(r){if(r.wrap!==this.wrap)return!1;const l=this.canonical.z-r.canonical.z;return r.overscaledZ===0||r.overscaledZ<this.overscaledZ&&r.canonical.x===this.canonical.x>>l&&r.canonical.y===this.canonical.y>>l}children(r){if(this.overscaledZ>=r)return[new Uo(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,d=2*this.canonical.x,_=2*this.canonical.y;return[new Uo(l,this.wrap,l,d,_),new Uo(l,this.wrap,l,d+1,_),new Uo(l,this.wrap,l,d,_+1),new Uo(l,this.wrap,l,d+1,_+1)]}isLessThan(r){return this.wrap<r.wrap||!(this.wrap>r.wrap)&&(this.overscaledZ<r.overscaledZ||!(this.overscaledZ>r.overscaledZ)&&(this.canonical.x<r.canonical.x||!(this.canonical.x>r.canonical.x)&&this.canonical.y<r.canonical.y))}wrapped(){return new Uo(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(r){return new Uo(this.overscaledZ,r,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new R_(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(r){return this.canonical.getTilePoint(new Cu(r.x-this.wrap,r.y))}}function Sh(c,r,l,d,_){(c*=2)<0&&(c=-1*c-1);const S=1<<l;return(S*S*c+S*_+d).toString(36)+l.toString(36)+r.toString(36)}rn("CanonicalTileID",em),rn("OverscaledTileID",Uo,{omit:["terrainRttPosMatrix32f"]});class Hg{constructor(r,l,d,_=1,S=1,C=1,M=0){if(this.uid=r,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(d&&!["mapbox","terrarium","custom"].includes(d))return void $t(`"${d}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const O=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),d){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=_,this.greenFactor=S,this.blueFactor=C,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let D=0;D<O;D++)this.data[this._idx(-1,D)]=this.data[this._idx(0,D)],this.data[this._idx(O,D)]=this.data[this._idx(O-1,D)],this.data[this._idx(D,-1)]=this.data[this._idx(D,0)],this.data[this._idx(D,O)]=this.data[this._idx(D,O-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(O,-1)]=this.data[this._idx(O-1,0)],this.data[this._idx(-1,O)]=this.data[this._idx(0,O-1)],this.data[this._idx(O,O)]=this.data[this._idx(O-1,O-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let D=0;D<O;D++)for(let N=0;N<O;N++){const V=this.get(D,N);V>this.max&&(this.max=V),V<this.min&&(this.min=V)}}get(r,l){const d=new Uint8Array(this.data.buffer),_=4*this._idx(r,l);return this.unpack(d[_],d[_+1],d[_+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(r,l){if(r<-1||r>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(l+1)*this.stride+(r+1)}unpack(r,l,d){return r*this.redFactor+l*this.greenFactor+d*this.blueFactor-this.baseShift}getPixels(){return new So({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(r,l,d){if(this.dim!==r.dim)throw new Error("dem dimension mismatch");let _=l*this.dim,S=l*this.dim+this.dim,C=d*this.dim,M=d*this.dim+this.dim;switch(l){case-1:_=S-1;break;case 1:S=_+1}switch(d){case-1:C=M-1;break;case 1:M=C+1}const O=-l*this.dim,D=-d*this.dim;for(let N=C;N<M;N++)for(let V=_;V<S;V++)this.data[this._idx(V,N)]=r.data[this._idx(V+O,N+D)]}}rn("DEMData",Hg);class Pd{constructor(r){this._stringToNumber={},this._numberToString=[];for(let l=0;l<r.length;l++){const d=r[l];this._stringToNumber[d]=l,this._numberToString[l]=d}}encode(r){return this._stringToNumber[r]}decode(r){if(r>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${r} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[r]}}class $r{constructor(r,l,d,_,S){this.type="Feature",this._vectorTileFeature=r,r._z=l,r._x=d,r._y=_,this.properties=r.properties,this.id=S}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry}set geometry(r){this._geometry=r}toJSON(){const r={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&(r[l]=this[l]);return r}}class tm{constructor(r,l){this.tileID=r,this.x=r.canonical.x,this.y=r.canonical.y,this.z=r.canonical.z,this.grid=new Os(Qe,16,0),this.grid3D=new Os(Qe,16,0),this.featureIndexArray=new dt,this.promoteId=l}insert(r,l,d,_,S,C){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(d,_,S);const O=C?this.grid3D:this.grid;for(let D=0;D<l.length;D++){const N=l[D],V=[1/0,1/0,-1/0,-1/0];for(let Z=0;Z<N.length;Z++){const Y=N[Z];V[0]=Math.min(V[0],Y.x),V[1]=Math.min(V[1],Y.y),V[2]=Math.max(V[2],Y.x),V[3]=Math.max(V[3],Y.y)}V[0]<Qe&&V[1]<Qe&&V[2]>=0&&V[3]>=0&&O.insert(M,V[0],V[1],V[2],V[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=new yc.VectorTile(new so(this.rawTileData)).layers,this.sourceLayerCoder=new Pd(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers}query(r,l,d,_){this.loadVTLayers();const S=r.params,C=Qe/r.tileSize/r.scale,M=Qa(S.filter),O=r.queryGeometry,D=r.queryPadding*C,N=O_(O),V=this.grid.query(N.minX-D,N.minY-D,N.maxX+D,N.maxY+D),Z=O_(r.cameraQueryGeometry),Y=this.grid3D.query(Z.minX-D,Z.minY-D,Z.maxX+D,Z.maxY+D,(fe,be,$e,Te)=>function(W,ue,Oe,ot,Lt){for(const wt of W)if(ue<=wt.x&&Oe<=wt.y&&ot>=wt.x&&Lt>=wt.y)return!0;const ht=[new X(ue,Oe),new X(ue,Lt),new X(ot,Lt),new X(ot,Oe)];if(W.length>2){for(const wt of ht)if(du(W,wt))return!0}for(let wt=0;wt<W.length-1;wt++)if(dg(W[wt],W[wt+1],ht))return!0;return!1}(r.cameraQueryGeometry,fe-D,be-D,$e+D,Te+D));for(const fe of Y)V.push(fe);V.sort(qg);const Q={};let re;for(let fe=0;fe<V.length;fe++){const be=V[fe];if(be===re)continue;re=be;const $e=this.featureIndexArray.get(be);let Te=null;this.loadMatchingFeature(Q,$e.bucketIndex,$e.sourceLayerIndex,$e.featureIndex,M,S.layers,S.availableImages,l,d,_,(W,ue,Oe)=>(Te||(Te=wo(W)),ue.queryIntersectsFeature({queryGeometry:O,feature:W,featureState:Oe,geometry:Te,zoom:this.z,transform:r.transform,pixelsToTileUnits:C,pixelPosMatrix:r.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:r.getElevation})))}return Q}loadMatchingFeature(r,l,d,_,S,C,M,O,D,N,V){const Z=this.bucketLayerIDs[l];if(C&&!Z.some(fe=>C.has(fe)))return;const Y=this.sourceLayerCoder.decode(d),Q=this.vtLayers[Y].feature(_);if(S.needGeometry){const fe=io(Q,!0);if(!S.filter(new Nr(this.tileID.overscaledZ),fe,this.tileID.canonical))return}else if(!S.filter(new Nr(this.tileID.overscaledZ),Q))return;const re=this.getId(Q,Y);for(let fe=0;fe<Z.length;fe++){const be=Z[fe];if(C&&!C.has(be))continue;const $e=O[be];if(!$e)continue;let Te={};re&&N&&(Te=N.getState($e.sourceLayer||"_geojsonTileLayer",re));const W=Xe({},D[be]);W.paint=_a(W.paint,$e.paint,Q,Te,M),W.layout=_a(W.layout,$e.layout,Q,Te,M);const ue=!V||V(Q,$e,Te);if(!ue)continue;const Oe=new $r(Q,this.z,this.x,this.y,re);Oe.layer=W;let ot=r[be];ot===void 0&&(ot=r[be]=[]),ot.push({featureIndex:_,feature:Oe,intersectionZ:ue})}}lookupSymbolFeatures(r,l,d,_,S,C,M,O){const D={};this.loadVTLayers();const N=Qa(S);for(const V of r)this.loadMatchingFeature(D,d,_,V,N,C,M,O,l);return D}hasLayer(r){for(const l of this.bucketLayerIDs)for(const d of l)if(r===d)return!0;return!1}getId(r,l){var d;let _=r.id;return this.promoteId&&(_=r.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof _=="boolean"&&(_=Number(_)),_===void 0&&(!((d=r.properties)===null||d===void 0)&&d.cluster)&&this.promoteId&&(_=Number(r.properties.cluster_id))),_}}function _a(c,r,l,d,_){return ft(c,(S,C)=>{const M=r instanceof Sr?r.get(C):null;return M&&M.evaluate?M.evaluate(l,d,_):M})}function O_(c){let r=1/0,l=1/0,d=-1/0,_=-1/0;for(const S of c)r=Math.min(r,S.x),l=Math.min(l,S.y),d=Math.max(d,S.x),_=Math.max(_,S.y);return{minX:r,minY:l,maxX:d,maxY:_}}function qg(c,r){return r-c}function nm(c,r,l,d,_){const S=[];for(let C=0;C<c.length;C++){const M=c[C];let O;for(let D=0;D<M.length-1;D++){let N=M[D],V=M[D+1];N.x<r&&V.x<r||(N.x<r?N=new X(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x<r&&(V=new X(r,N.y+(r-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y<l&&V.y<l||(N.y<l?N=new X(N.x+(l-N.y)/(V.y-N.y)*(V.x-N.x),l)._round():V.y<l&&(V=new X(N.x+(l-N.y)/(V.y-N.y)*(V.x-N.x),l)._round()),N.x>=d&&V.x>=d||(N.x>=d?N=new X(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round():V.x>=d&&(V=new X(d,N.y+(d-N.x)/(V.x-N.x)*(V.y-N.y))._round()),N.y>=_&&V.y>=_||(N.y>=_?N=new X(N.x+(_-N.y)/(V.y-N.y)*(V.x-N.x),_)._round():V.y>=_&&(V=new X(N.x+(_-N.y)/(V.y-N.y)*(V.x-N.x),_)._round()),O&&N.equals(O[O.length-1])||(O=[N],S.push(O)),O.push(V)))))}}return S}rn("FeatureIndex",tm,{omit:["rawTileData","sourceLayerCoder"]});class Gs extends X{constructor(r,l,d,_){super(r,l),this.angle=d,_!==void 0&&(this.segment=_)}clone(){return new Gs(this.x,this.y,this.angle,this.segment)}}function Gg(c,r,l,d,_){if(r.segment===void 0||l===0)return!0;let S=r,C=r.segment+1,M=0;for(;M>-l/2;){if(C--,C<0)return!1;M-=c[C].dist(S),S=c[C]}M+=c[C].dist(c[C+1]),C++;const O=[];let D=0;for(;M<l/2;){const N=c[C],V=c[C+1];if(!V)return!1;let Z=c[C-1].angleTo(N)-N.angleTo(V);for(Z=Math.abs((Z+3*Math.PI)%(2*Math.PI)-Math.PI),O.push({distance:M,angleDelta:Z}),D+=Z;M-O[0].distance>d;)D-=O.shift().angleDelta;if(D>_)return!1;C++,M+=N.dist(V)}return!0}function Zg(c){let r=0;for(let l=0;l<c.length-1;l++)r+=c[l].dist(c[l+1]);return r}function rm(c,r,l){return c?.6*r*l:0}function im(c,r){return Math.max(c?c.right-c.left:0,r?r.right-r.left:0)}function cb(c,r,l,d,_,S){const C=rm(l,_,S),M=im(l,d)*S;let O=0;const D=Zg(c)/2;for(let N=0;N<c.length-1;N++){const V=c[N],Z=c[N+1],Y=V.dist(Z);if(O+Y>D){const Q=(D-O)/Y,re=Yo.number(V.x,Z.x,Q),fe=Yo.number(V.y,Z.y,Q),be=new Gs(re,fe,Z.angleTo(V),N);return be._round(),!C||Gg(c,be,M,C,r)?be:void 0}O+=Y}}function I_(c,r,l,d,_,S,C,M,O){const D=rm(d,S,C),N=im(d,_),V=N*C,Z=c[0].x===0||c[0].x===O||c[0].y===0||c[0].y===O;return r-V<r/4&&(r=V+r/4),k_(c,Z?r/2*M%r:(N/2+2*S)*C*M%r,r,D,l,V,Z,!1,O)}function k_(c,r,l,d,_,S,C,M,O){const D=S/2,N=Zg(c);let V=0,Z=r-l,Y=[];for(let Q=0;Q<c.length-1;Q++){const re=c[Q],fe=c[Q+1],be=re.dist(fe),$e=fe.angleTo(re);for(;Z+l<V+be;){Z+=l;const Te=(Z-V)/be,W=Yo.number(re.x,fe.x,Te),ue=Yo.number(re.y,fe.y,Te);if(W>=0&&W<O&&ue>=0&&ue<O&&Z-D>=0&&Z+D<=N){const Oe=new Gs(W,ue,$e,Q);Oe._round(),d&&!Gg(c,Oe,S,d,_)||Y.push(Oe)}}V+=be}return M||Y.length||C||(Y=k_(c,V/2,l,d,_,S,C,!0,O)),Y}rn("Anchor",Gs);const Of=ya;function z_(c,r,l,d){const _=[],S=c.image,C=S.pixelRatio,M=S.paddedRect.w-2*Of,O=S.paddedRect.h-2*Of;let D={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const N=S.stretchX||[[0,M]],V=S.stretchY||[[0,O]],Z=(Et,on)=>Et+on[1]-on[0],Y=N.reduce(Z,0),Q=V.reduce(Z,0),re=M-Y,fe=O-Q;let be=0,$e=Y,Te=0,W=Q,ue=0,Oe=re,ot=0,Lt=fe;if(S.content&&d){const Et=S.content,on=Et[2]-Et[0],_n=Et[3]-Et[1];(S.textFitWidth||S.textFitHeight)&&(D=Xp(c)),be=am(N,0,Et[0]),Te=am(V,0,Et[1]),$e=am(N,Et[0],Et[2]),W=am(V,Et[1],Et[3]),ue=Et[0]-be,ot=Et[1]-Te,Oe=on-$e,Lt=_n-W}const ht=D.x1,wt=D.y1,Ut=D.x2-ht,jt=D.y2-wt,Zt=(Et,on,_n,yn)=>{const hn=Rd(Et.stretch-be,$e,Ut,ht),Zn=If(Et.fixed-ue,Oe,Et.stretch,Y),Tr=Rd(on.stretch-Te,W,jt,wt),Gr=If(on.fixed-ot,Lt,on.stretch,Q),pi=Rd(_n.stretch-be,$e,Ut,ht),za=If(_n.fixed-ue,Oe,_n.stretch,Y),na=Rd(yn.stretch-Te,W,jt,wt),ai=If(yn.fixed-ot,Lt,yn.stretch,Q),oi=new X(hn,Tr),Vi=new X(pi,Tr),Ii=new X(pi,na),ra=new X(hn,na),Da=new X(Zn/C,Gr/C),qa=new X(za/C,ai/C),Ui=r*Math.PI/180;if(Ui){const ki=Math.sin(Ui),Hi=Math.cos(Ui),si=[Hi,-ki,ki,Hi];oi._matMult(si),Vi._matMult(si),ra._matMult(si),Ii._matMult(si)}const lo=Et.stretch+Et.fixed,Ci=on.stretch+on.fixed;return{tl:oi,tr:Vi,bl:ra,br:Ii,tex:{x:S.paddedRect.x+Of+lo,y:S.paddedRect.y+Of+Ci,w:_n.stretch+_n.fixed-lo,h:yn.stretch+yn.fixed-Ci},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Da,pixelOffsetBR:qa,minFontScaleX:Oe/C/Ut,minFontScaleY:Lt/C/jt,isSDF:l}};if(d&&(S.stretchX||S.stretchY)){const Et=Sc(N,re,Y),on=Sc(V,fe,Q);for(let _n=0;_n<Et.length-1;_n++){const yn=Et[_n],hn=Et[_n+1];for(let Zn=0;Zn<on.length-1;Zn++)_.push(Zt(yn,on[Zn],hn,on[Zn+1]))}}else _.push(Zt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:O+1}));return _}function am(c,r,l){let d=0;for(const _ of c)d+=Math.max(r,Math.min(l,_[1]))-Math.max(r,Math.min(l,_[0]));return d}function Sc(c,r,l){const d=[{fixed:-1,stretch:0}];for(const[_,S]of c){const C=d[d.length-1];d.push({fixed:_-C.stretch,stretch:C.stretch}),d.push({fixed:_-C.stretch,stretch:C.stretch+(S-_)})}return d.push({fixed:r+Of,stretch:l}),d}function Rd(c,r,l,d){return c/r*l+d}function If(c,r,l,d){return c-r*l/d}class om{constructor(r,l,d,_,S,C,M,O,D,N){var V;if(this.boxStartIndex=r.length,D){let Z=C.top,Y=C.bottom;const Q=C.collisionPadding;Q&&(Z-=Q[1],Y+=Q[3]);let re=Y-Z;re>0&&(re=Math.max(10,re),this.circleDiameter=re)}else{const Z=!((V=C.image)===null||V===void 0)&&V.content&&(C.image.textFitWidth||C.image.textFitHeight)?Xp(C):{x1:C.left,y1:C.top,x2:C.right,y2:C.bottom};Z.y1=Z.y1*M-O[0],Z.y2=Z.y2*M+O[2],Z.x1=Z.x1*M-O[3],Z.x2=Z.x2*M+O[1];const Y=C.collisionPadding;if(Y&&(Z.x1-=Y[0]*M,Z.y1-=Y[1]*M,Z.x2+=Y[2]*M,Z.y2+=Y[3]*M),N){const Q=new X(Z.x1,Z.y1),re=new X(Z.x2,Z.y1),fe=new X(Z.x1,Z.y2),be=new X(Z.x2,Z.y2),$e=N*Math.PI/180;Q._rotate($e),re._rotate($e),fe._rotate($e),be._rotate($e),Z.x1=Math.min(Q.x,re.x,fe.x,be.x),Z.x2=Math.max(Q.x,re.x,fe.x,be.x),Z.y1=Math.min(Q.y,re.y,fe.y,be.y),Z.y2=Math.max(Q.y,re.y,fe.y,be.y)}r.emplaceBack(l.x,l.y,Z.x1,Z.y1,Z.x2,Z.y2,d,_,S)}this.boxEndIndex=r.length}}class ub{constructor(r=[],l=(d,_)=>d<_?-1:d>_?1:0){if(this.data=r,this.length=this.data.length,this.compare=l,this.length>0)for(let d=(this.length>>1)-1;d>=0;d--)this._down(d)}push(r){this.data.push(r),this._up(this.length++)}pop(){if(this.length===0)return;const r=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),r}peek(){return this.data[0]}_up(r){const{data:l,compare:d}=this,_=l[r];for(;r>0;){const S=r-1>>1,C=l[S];if(d(_,C)>=0)break;l[r]=C,r=S}l[r]=_}_down(r){const{data:l,compare:d}=this,_=this.length>>1,S=l[r];for(;r<_;){let C=1+(r<<1);const M=C+1;if(M<this.length&&d(l[M],l[C])<0&&(C=M),d(l[C],S)>=0)break;l[r]=l[C],r=C}l[r]=S}}function Xg(c,r=1,l=!1){let d=1/0,_=1/0,S=-1/0,C=-1/0;const M=c[0];for(let Y=0;Y<M.length;Y++){const Q=M[Y];(!Y||Q.x<d)&&(d=Q.x),(!Y||Q.y<_)&&(_=Q.y),(!Y||Q.x>S)&&(S=Q.x),(!Y||Q.y>C)&&(C=Q.y)}const O=Math.min(S-d,C-_);let D=O/2;const N=new ub([],hb);if(O===0)return new X(d,_);for(let Y=d;Y<S;Y+=O)for(let Q=_;Q<C;Q+=O)N.push(new Ha(Y+D,Q+D,D,c));let V=function(Y){let Q=0,re=0,fe=0;const be=Y[0];for(let $e=0,Te=be.length,W=Te-1;$e<Te;W=$e++){const ue=be[$e],Oe=be[W],ot=ue.x*Oe.y-Oe.x*ue.y;re+=(ue.x+Oe.x)*ot,fe+=(ue.y+Oe.y)*ot,Q+=3*ot}return new Ha(re/Q,fe/Q,0,Y)}(c),Z=N.length;for(;N.length;){const Y=N.pop();(Y.d>V.d||!V.d)&&(V=Y,l&&console.log("found best %d after %d probes",Math.round(1e4*Y.d)/1e4,Z)),Y.max-V.d<=r||(D=Y.h/2,N.push(new Ha(Y.p.x-D,Y.p.y-D,D,c)),N.push(new Ha(Y.p.x+D,Y.p.y-D,D,c)),N.push(new Ha(Y.p.x-D,Y.p.y+D,D,c)),N.push(new Ha(Y.p.x+D,Y.p.y+D,D,c)),Z+=4)}return l&&(console.log(`num probes: ${Z}`),console.log(`best distance: ${V.d}`)),V.p}function hb(c,r){return r.max-c.max}function Ha(c,r,l,d){this.p=new X(c,r),this.h=l,this.d=function(_,S){let C=!1,M=1/0;for(let O=0;O<S.length;O++){const D=S[O];for(let N=0,V=D.length,Z=V-1;N<V;Z=N++){const Y=D[N],Q=D[Z];Y.y>_.y!=Q.y>_.y&&_.x<(Q.x-Y.x)*(_.y-Y.y)/(Q.y-Y.y)+Y.x&&(C=!C),M=Math.min(M,fg(_,Y,Q))}}return(C?1:-1)*Math.sqrt(M)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}var Ki;g.aB=void 0,(Ki=g.aB||(g.aB={}))[Ki.center=1]="center",Ki[Ki.left=2]="left",Ki[Ki.right=3]="right",Ki[Ki.top=4]="top",Ki[Ki.bottom=5]="bottom",Ki[Ki["top-left"]=6]="top-left",Ki[Ki["top-right"]=7]="top-right",Ki[Ki["bottom-left"]=8]="bottom-left",Ki[Ki["bottom-right"]=9]="bottom-right";const Cc=7,sm=Number.POSITIVE_INFINITY;function kf(c,r){return r[1]!==sm?function(l,d,_){let S=0,C=0;switch(d=Math.abs(d),_=Math.abs(_),l){case"top-right":case"top-left":case"top":C=_-Cc;break;case"bottom-right":case"bottom-left":case"bottom":C=-_+Cc}switch(l){case"top-right":case"bottom-right":case"right":S=-d;break;case"top-left":case"bottom-left":case"left":S=d}return[S,C]}(c,r[0],r[1]):function(l,d){let _=0,S=0;d<0&&(d=0);const C=d/Math.SQRT2;switch(l){case"top-right":case"top-left":S=C-Cc;break;case"bottom-right":case"bottom-left":S=-C+Cc;break;case"bottom":S=-d+Cc;break;case"top":S=d-Cc}switch(l){case"top-right":case"bottom-right":_=-C;break;case"top-left":case"bottom-left":_=C;break;case"left":_=d;break;case"right":_=-d}return[_,S]}(c,r[0])}function Ho(c,r,l){var d;const _=c.layout,S=(d=_.get("text-variable-anchor-offset"))===null||d===void 0?void 0:d.evaluate(r,{},l);if(S){const M=S.values,O=[];for(let D=0;D<M.length;D+=2){const N=O[D]=M[D],V=M[D+1].map(Z=>Z*Oi);N.startsWith("top")?V[1]-=Cc:N.startsWith("bottom")&&(V[1]+=Cc),O[D+1]=V}return new ui(O)}const C=_.get("text-variable-anchor");if(C){let M;M=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[_.get("text-radial-offset").evaluate(r,{},l)*Oi,sm]:_.get("text-offset").evaluate(r,{},l).map(D=>D*Oi);const O=[];for(const D of C)O.push(D,kf(D,M));return new ui(O)}return null}function lm(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cm(c,r,l,d,_,S,C,M,O,D,N,V){let Z=S.textMaxSize.evaluate(r,{});Z===void 0&&(Z=C);const Y=c.layers[0].layout,Q=Y.get("icon-offset").evaluate(r,{},N),re=D_(l.horizontal),fe=C/24,be=c.tilePixelRatio*fe,$e=c.tilePixelRatio*Z/24,Te=c.tilePixelRatio*M,W=c.tilePixelRatio*Y.get("symbol-spacing"),ue=Y.get("text-padding")*c.tilePixelRatio,Oe=function(_n,yn,hn,Zn=1){const Tr=_n.get("icon-padding").evaluate(yn,{},hn),Gr=Tr&&Tr.values;return[Gr[0]*Zn,Gr[1]*Zn,Gr[2]*Zn,Gr[3]*Zn]}(Y,r,N,c.tilePixelRatio),ot=Y.get("text-max-angle")/180*Math.PI,Lt=Y.get("text-rotation-alignment")!=="viewport"&&Y.get("symbol-placement")!=="point",ht=Y.get("icon-rotation-alignment")==="map"&&Y.get("symbol-placement")!=="point",wt=Y.get("symbol-placement"),Ut=W/2,jt=Y.get("icon-text-fit");let Zt;d&&jt!=="none"&&(c.allowVerticalPlacement&&l.vertical&&(Zt=T_(d,l.vertical,jt,Y.get("icon-text-fit-padding"),Q,fe)),re&&(d=T_(d,re,jt,Y.get("icon-text-fit-padding"),Q,fe)));const Et=N?V.line.getGranularityForZoomLevel(N.z):1,on=(_n,yn)=>{yn.x<0||yn.x>=Qe||yn.y<0||yn.y>=Qe||function(hn,Zn,Tr,Gr,pi,za,na,ai,oi,Vi,Ii,ra,Da,qa,Ui,lo,Ci,ki,Hi,si,zr,To,Eh,Zs,dm){const o=hn.addToLineVertexArray(Zn,Tr);let h,m,x,A,z=0,K=0,se=0,Be=0,lt=-1,zt=-1;const Bt={};let yt=to("");if(hn.allowVerticalPlacement&&Gr.vertical){const La=ai.layout.get("text-rotate").evaluate(zr,{},Zs)+90;x=new om(oi,Zn,Vi,Ii,ra,Gr.vertical,Da,qa,Ui,La),na&&(A=new om(oi,Zn,Vi,Ii,ra,na,Ci,ki,Ui,La))}if(pi){const La=ai.layout.get("icon-rotate").evaluate(zr,{}),Xs=ai.layout.get("icon-text-fit")!=="none",Id=z_(pi,La,Eh,Xs),Tc=na?z_(na,La,Eh,Xs):void 0;m=new om(oi,Zn,Vi,Ii,ra,pi,Ci,ki,!1,La),z=4*Id.length;const kd=hn.iconSizeData;let Mu=null;kd.kind==="source"?(Mu=[Tl*ai.layout.get("icon-size").evaluate(zr,{})],Mu[0]>Su&&$t(`${hn.layerIds[0]}: Value for "icon-size" is >= ${Ef}. Reduce your "icon-size".`)):kd.kind==="composite"&&(Mu=[Tl*To.compositeIconSizes[0].evaluate(zr,{},Zs),Tl*To.compositeIconSizes[1].evaluate(zr,{},Zs)],(Mu[0]>Su||Mu[1]>Su)&&$t(`${hn.layerIds[0]}: Value for "icon-size" is >= ${Ef}. Reduce your "icon-size".`)),hn.addSymbols(hn.icon,Id,Mu,si,Hi,zr,g.al.none,Zn,o.lineStartIndex,o.lineLength,-1,Zs),lt=hn.icon.placedSymbolArray.length-1,Tc&&(K=4*Tc.length,hn.addSymbols(hn.icon,Tc,Mu,si,Hi,zr,g.al.vertical,Zn,o.lineStartIndex,o.lineLength,-1,Zs),zt=hn.icon.placedSymbolArray.length-1)}const bt=Object.keys(Gr.horizontal);for(const La of bt){const Xs=Gr.horizontal[La];if(!h){yt=to(Xs.text);const Tc=ai.layout.get("text-rotate").evaluate(zr,{},Zs);h=new om(oi,Zn,Vi,Ii,ra,Xs,Da,qa,Ui,Tc)}const Id=Xs.positionedLines.length===1;if(se+=El(hn,Zn,Xs,za,ai,Ui,zr,lo,o,Gr.vertical?g.al.horizontal:g.al.horizontalOnly,Id?bt:[La],Bt,lt,To,Zs),Id)break}Gr.vertical&&(Be+=El(hn,Zn,Gr.vertical,za,ai,Ui,zr,lo,o,g.al.vertical,["vertical"],Bt,zt,To,Zs));const Nn=h?h.boxStartIndex:hn.collisionBoxArray.length,In=h?h.boxEndIndex:hn.collisionBoxArray.length,Zr=x?x.boxStartIndex:hn.collisionBoxArray.length,nt=x?x.boxEndIndex:hn.collisionBoxArray.length,Ze=m?m.boxStartIndex:hn.collisionBoxArray.length,st=m?m.boxEndIndex:hn.collisionBoxArray.length,Ft=A?A.boxStartIndex:hn.collisionBoxArray.length,vn=A?A.boxEndIndex:hn.collisionBoxArray.length;let jn=-1;const Tn=(La,Xs)=>La&&La.circleDiameter?Math.max(La.circleDiameter,Xs):Xs;jn=Tn(h,jn),jn=Tn(x,jn),jn=Tn(m,jn),jn=Tn(A,jn);const kn=jn>-1?1:0;kn&&(jn*=dm/Oi),hn.glyphOffsetArray.length>=Pf.MAX_GLYPHS&&$t("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),zr.sortKey!==void 0&&hn.addToSortKeyRanges(hn.symbolInstances.length,zr.sortKey);const va=Ho(ai,zr,Zs),[Er,Eu]=function(La,Xs){const Id=La.length,Tc=Xs==null?void 0:Xs.values;if((Tc==null?void 0:Tc.length)>0)for(let kd=0;kd<Tc.length;kd+=2){const Mu=Tc[kd+1];La.emplaceBack(g.aB[Tc[kd]],Mu[0],Mu[1])}return[Id,La.length]}(hn.textAnchorOffsets,va);hn.symbolInstances.emplaceBack(Zn.x,Zn.y,Bt.right>=0?Bt.right:-1,Bt.center>=0?Bt.center:-1,Bt.left>=0?Bt.left:-1,Bt.vertical||-1,lt,zt,yt,Nn,In,Zr,nt,Ze,st,Ft,vn,Vi,se,Be,z,K,kn,0,Da,jn,Er,Eu)}(c,yn,_n,l,d,_,Zt,c.layers[0],c.collisionBoxArray,r.index,r.sourceLayerIndex,c.index,be,[ue,ue,ue,ue],Lt,O,Te,Oe,ht,Q,r,S,D,N,C)};if(wt==="line")for(const _n of nm(r.geometry,0,0,Qe,Qe)){const yn=gu(_n,Et),hn=I_(yn,W,ot,l.vertical||re,d,24,$e,c.overscaling,Qe);for(const Zn of hn)re&&fb(c,re.text,Ut,Zn)||on(yn,Zn)}else if(wt==="line-center"){for(const _n of r.geometry)if(_n.length>1){const yn=gu(_n,Et),hn=cb(yn,ot,l.vertical||re,d,24,$e);hn&&on(yn,hn)}}else if(r.type==="Polygon")for(const _n of Xu(r.geometry,0)){const yn=Xg(_n,16);on(gu(_n[0],Et,!0),new Gs(yn.x,yn.y,0))}else if(r.type==="LineString")for(const _n of r.geometry){const yn=gu(_n,Et);on(yn,new Gs(yn[0].x,yn[0].y,0))}else if(r.type==="Point")for(const _n of r.geometry)for(const yn of _n)on([yn],new Gs(yn.x,yn.y,0))}function El(c,r,l,d,_,S,C,M,O,D,N,V,Z,Y,Q){const re=function($e,Te,W,ue,Oe,ot,Lt,ht){const wt=ue.layout.get("text-rotate").evaluate(ot,{})*Math.PI/180,Ut=[];for(const jt of Te.positionedLines)for(const Zt of jt.positionedGlyphs){if(!Zt.rect)continue;const Et=Zt.rect||{};let on=ib+1,_n=!0,yn=1,hn=0;const Zn=(Oe||ht)&&Zt.vertical,Tr=Zt.metrics.advance*Zt.scale/2;if(ht&&Te.verticalizable&&(hn=jt.lineOffset/2-(Zt.imageName?-(Oi-Zt.metrics.width*Zt.scale)/2:(Zt.scale-1)*Oi)),Zt.imageName){const ki=Lt[Zt.imageName];_n=ki.sdf,yn=ki.pixelRatio,on=ya/yn}const Gr=Oe?[Zt.x+Tr,Zt.y]:[0,0];let pi=Oe?[0,0]:[Zt.x+Tr+W[0],Zt.y+W[1]-hn],za=[0,0];Zn&&(za=pi,pi=[0,0]);const na=Zt.metrics.isDoubleResolution?2:1,ai=(Zt.metrics.left-on)*Zt.scale-Tr+pi[0],oi=(-Zt.metrics.top-on)*Zt.scale+pi[1],Vi=ai+Et.w/na*Zt.scale/yn,Ii=oi+Et.h/na*Zt.scale/yn,ra=new X(ai,oi),Da=new X(Vi,oi),qa=new X(ai,Ii),Ui=new X(Vi,Ii);if(Zn){const ki=new X(-Tr,Tr-Sd),Hi=-Math.PI/2,si=Oi/2-Tr,zr=new X(5-Sd-si,-(Zt.imageName?si:0)),To=new X(...za);ra._rotateAround(Hi,ki)._add(zr)._add(To),Da._rotateAround(Hi,ki)._add(zr)._add(To),qa._rotateAround(Hi,ki)._add(zr)._add(To),Ui._rotateAround(Hi,ki)._add(zr)._add(To)}if(wt){const ki=Math.sin(wt),Hi=Math.cos(wt),si=[Hi,-ki,ki,Hi];ra._matMult(si),Da._matMult(si),qa._matMult(si),Ui._matMult(si)}const lo=new X(0,0),Ci=new X(0,0);Ut.push({tl:ra,tr:Da,bl:qa,br:Ui,tex:Et,writingMode:Te.writingMode,glyphOffset:Gr,sectionIndex:Zt.sectionIndex,isSDF:_n,pixelOffsetTL:lo,pixelOffsetBR:Ci,minFontScaleX:0,minFontScaleY:0})}return Ut}(0,l,M,_,S,C,d,c.allowVerticalPlacement),fe=c.textSizeData;let be=null;fe.kind==="source"?(be=[Tl*_.layout.get("text-size").evaluate(C,{})],be[0]>Su&&$t(`${c.layerIds[0]}: Value for "text-size" is >= ${Ef}. Reduce your "text-size".`)):fe.kind==="composite"&&(be=[Tl*Y.compositeTextSizes[0].evaluate(C,{},Q),Tl*Y.compositeTextSizes[1].evaluate(C,{},Q)],(be[0]>Su||be[1]>Su)&&$t(`${c.layerIds[0]}: Value for "text-size" is >= ${Ef}. Reduce your "text-size".`)),c.addSymbols(c.text,re,be,M,S,C,D,r,O.lineStartIndex,O.lineLength,Z,Q);for(const $e of N)V[$e]=c.text.placedSymbolArray.length-1;return 4*re.length}function D_(c){for(const r in c)return c[r];return null}function fb(c,r,l,d){const _=c.compareText;if(r in _){const S=_[r];for(let C=S.length-1;C>=0;C--)if(d.dist(S[C])<l)return!0}else _[r]=[];return _[r].push(d),!1}const Ch=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class um{static from(r){if(!(r instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,d]=new Uint8Array(r,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=d>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const S=Ch[15&d];if(!S)throw new Error("Unrecognized array type.");const[C]=new Uint16Array(r,2,1),[M]=new Uint32Array(r,4,1);return new um(M,C,S,r)}constructor(r,l=64,d=Float64Array,_){if(isNaN(r)||r<0)throw new Error(`Unpexpected numItems value: ${r}.`);this.numItems=+r,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=d,this.IndexArrayType=r<65536?Uint16Array:Uint32Array;const S=Ch.indexOf(this.ArrayType),C=2*r*this.ArrayType.BYTES_PER_ELEMENT,M=r*this.IndexArrayType.BYTES_PER_ELEMENT,O=(8-M%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${d}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+M+O,2*r),this._pos=2*r,this._finished=!0):(this.data=new ArrayBuffer(8+C+M+O),this.ids=new this.IndexArrayType(this.data,8,r),this.coords=new this.ArrayType(this.data,8+M+O,2*r),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=r)}add(r,l){const d=this._pos>>1;return this.ids[d]=d,this.coords[this._pos++]=r,this.coords[this._pos++]=l,d}finish(){const r=this._pos>>1;if(r!==this.numItems)throw new Error(`Added ${r} items when expected ${this.numItems}.`);return Wg(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(r,l,d,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:C,nodeSize:M}=this,O=[0,S.length-1,0],D=[];for(;O.length;){const N=O.pop()||0,V=O.pop()||0,Z=O.pop()||0;if(V-Z<=M){for(let fe=Z;fe<=V;fe++){const be=C[2*fe],$e=C[2*fe+1];be>=r&&be<=d&&$e>=l&&$e<=_&&D.push(S[fe])}continue}const Y=Z+V>>1,Q=C[2*Y],re=C[2*Y+1];Q>=r&&Q<=d&&re>=l&&re<=_&&D.push(S[Y]),(N===0?r<=Q:l<=re)&&(O.push(Z),O.push(Y-1),O.push(1-N)),(N===0?d>=Q:_>=re)&&(O.push(Y+1),O.push(V),O.push(1-N))}return D}within(r,l,d){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:S,nodeSize:C}=this,M=[0,_.length-1,0],O=[],D=d*d;for(;M.length;){const N=M.pop()||0,V=M.pop()||0,Z=M.pop()||0;if(V-Z<=C){for(let fe=Z;fe<=V;fe++)B_(S[2*fe],S[2*fe+1],r,l)<=D&&O.push(_[fe]);continue}const Y=Z+V>>1,Q=S[2*Y],re=S[2*Y+1];B_(Q,re,r,l)<=D&&O.push(_[Y]),(N===0?r-d<=Q:l-d<=re)&&(M.push(Z),M.push(Y-1),M.push(1-N)),(N===0?r+d>=Q:l+d>=re)&&(M.push(Y+1),M.push(V),M.push(1-N))}return O}}function Wg(c,r,l,d,_,S){if(_-d<=l)return;const C=d+_>>1;L_(c,r,C,d,_,S),Wg(c,r,l,d,C-1,1-S),Wg(c,r,l,C+1,_,1-S)}function L_(c,r,l,d,_,S){for(;_>d;){if(_-d>600){const D=_-d+1,N=l-d+1,V=Math.log(D),Z=.5*Math.exp(2*V/3),Y=.5*Math.sqrt(V*Z*(D-Z)/D)*(N-D/2<0?-1:1);L_(c,r,l,Math.max(d,Math.floor(l-N*Z/D+Y)),Math.min(_,Math.floor(l+(D-N)*Z/D+Y)),S)}const C=r[2*l+S];let M=d,O=_;for(Od(c,r,d,l),r[2*_+S]>C&&Od(c,r,d,_);M<O;){for(Od(c,r,M,O),M++,O--;r[2*M+S]<C;)M++;for(;r[2*O+S]>C;)O--}r[2*d+S]===C?Od(c,r,d,O):(O++,Od(c,r,O,_)),O<=l&&(d=O+1),l<=O&&(_=O-1)}}function Od(c,r,l,d){Yg(c,l,d),Yg(r,2*l,2*d),Yg(r,2*l+1,2*d+1)}function Yg(c,r,l){const d=c[r];c[r]=c[l],c[l]=d}function B_(c,r,l,d){const _=c-l,S=r-d;return _*_+S*S}var Kg;g.co=void 0,(Kg=g.co||(g.co={})).create="create",Kg.load="load",Kg.fullLoad="fullLoad";let hm=null,zf=[];const Tu=1e3/60,Th="loadTime",fm="fullLoadTime",db={mark(c){performance.mark(c)},frame(c){const r=c;hm!=null&&zf.push(r-hm),hm=r},clearMetrics(){hm=null,zf=[],performance.clearMeasures(Th),performance.clearMeasures(fm);for(const c in g.co)performance.clearMarks(g.co[c])},getPerformanceMetrics(){performance.measure(Th,g.co.create,g.co.load),performance.measure(fm,g.co.create,g.co.fullLoad);const c=performance.getEntriesByName(Th)[0].duration,r=performance.getEntriesByName(fm)[0].duration,l=zf.length,d=1/(zf.reduce((S,C)=>S+C,0)/l/1e3),_=zf.filter(S=>S>Tu).reduce((S,C)=>S+(C-Tu)/Tu,0);return{loadTime:c,fullLoadTime:r,fps:d,percentDroppedFrames:_/(l+_)*100,totalFrames:l}}};g.$=Cu,g.A=ve,g.B=Yo,g.C=Nr,g.D=nn,g.E=Ne,g.F=cg,g.G=function(c){if(kt==null){const r=c.navigator?c.navigator.userAgent:null;kt=!!c.safari||!(!r||!(/\b(iPad|iPhone|iPod)\b/.test(r)||r.match("Safari")&&!r.match("Chrome")))}return kt},g.H=class{constructor(c,r){this.target=c,this.mapId=r,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new lb(()=>this.process()),this.subscription=En(this.target,"message",l=>this.receive(l),!1),this.globalScope=Gt(self)?c:window}registerMessageHandler(c,r){this.messageHandlers[c]=r}sendAsync(c,r){return new Promise((l,d)=>{const _=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=r?En(r.signal,"abort",()=>{S==null||S.unsubscribe(),delete this.resolveRejects[_];const O={id:_,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(O)},Ed):null;this.resolveRejects[_]={resolve:O=>{S==null||S.unsubscribe(),l(O)},reject:O=>{S==null||S.unsubscribe(),d(O)}};const C=[],M=Object.assign(Object.assign({},c),{id:_,sourceMapId:this.mapId,origin:location.origin,data:uc(c.data,C)});this.target.postMessage(M,{transfer:C})})}receive(c){const r=c.data,l=r.id;if(!(r.origin!=="file://"&&location.origin!=="file://"&&r.origin!=="resource://android"&&location.origin!=="resource://android"&&r.origin!==location.origin||r.targetMapId&&this.mapId!==r.targetMapId)){if(r.type==="<cancel>"){delete this.tasks[l];const d=this.abortControllers[l];return delete this.abortControllers[l],void(d&&d.abort())}if(Gt(self)||r.mustQueue)return this.tasks[l]=r,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,r)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),r=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),r&&this.processTask(c,r)}processTask(c,r){return u(this,void 0,void 0,function*(){if(r.type==="<response>"){const _=this.resolveRejects[c];return delete this.resolveRejects[c],_?void(r.error?_.reject(ml(r.error)):_.resolve(ml(r.data))):void 0}if(!this.messageHandlers[r.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${r.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=ml(r.data),d=new AbortController;this.abortControllers[c]=d;try{const _=yield this.messageHandlers[r.type](r.sourceMapId,l,d);this.completeTask(c,null,_)}catch(_){this.completeTask(c,_)}})}completeTask(c,r,l){const d=[];delete this.abortControllers[c];const _={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:r?uc(r):null,data:uc(l,d)};this.target.postMessage(_,{transfer:d})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},g.I=wd,g.J=Jn,g.K=function(){var c=new ve(16);return ve!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},g.L=function(c,r,l){var d,_,S,C,M,O,D,N,V,Z,Y,Q,re=l[0],fe=l[1],be=l[2];return r===c?(c[12]=r[0]*re+r[4]*fe+r[8]*be+r[12],c[13]=r[1]*re+r[5]*fe+r[9]*be+r[13],c[14]=r[2]*re+r[6]*fe+r[10]*be+r[14],c[15]=r[3]*re+r[7]*fe+r[11]*be+r[15]):(_=r[1],S=r[2],C=r[3],M=r[4],O=r[5],D=r[6],N=r[7],V=r[8],Z=r[9],Y=r[10],Q=r[11],c[0]=d=r[0],c[1]=_,c[2]=S,c[3]=C,c[4]=M,c[5]=O,c[6]=D,c[7]=N,c[8]=V,c[9]=Z,c[10]=Y,c[11]=Q,c[12]=d*re+M*fe+V*be+r[12],c[13]=_*re+O*fe+Z*be+r[13],c[14]=S*re+D*fe+Y*be+r[14],c[15]=C*re+N*fe+Q*be+r[15]),c},g.M=function(c,r,l){var d=l[0],_=l[1],S=l[2];return c[0]=r[0]*d,c[1]=r[1]*d,c[2]=r[2]*d,c[3]=r[3]*d,c[4]=r[4]*_,c[5]=r[5]*_,c[6]=r[6]*_,c[7]=r[7]*_,c[8]=r[8]*S,c[9]=r[9]*S,c[10]=r[10]*S,c[11]=r[11]*S,c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15],c},g.N=function(c,r,l){var d=r[0],_=r[1],S=r[2],C=r[3],M=r[4],O=r[5],D=r[6],N=r[7],V=r[8],Z=r[9],Y=r[10],Q=r[11],re=r[12],fe=r[13],be=r[14],$e=r[15],Te=l[0],W=l[1],ue=l[2],Oe=l[3];return c[0]=Te*d+W*M+ue*V+Oe*re,c[1]=Te*_+W*O+ue*Z+Oe*fe,c[2]=Te*S+W*D+ue*Y+Oe*be,c[3]=Te*C+W*N+ue*Q+Oe*$e,c[4]=(Te=l[4])*d+(W=l[5])*M+(ue=l[6])*V+(Oe=l[7])*re,c[5]=Te*_+W*O+ue*Z+Oe*fe,c[6]=Te*S+W*D+ue*Y+Oe*be,c[7]=Te*C+W*N+ue*Q+Oe*$e,c[8]=(Te=l[8])*d+(W=l[9])*M+(ue=l[10])*V+(Oe=l[11])*re,c[9]=Te*_+W*O+ue*Z+Oe*fe,c[10]=Te*S+W*D+ue*Y+Oe*be,c[11]=Te*C+W*N+ue*Q+Oe*$e,c[12]=(Te=l[12])*d+(W=l[13])*M+(ue=l[14])*V+(Oe=l[15])*re,c[13]=Te*_+W*O+ue*Z+Oe*fe,c[14]=Te*S+W*D+ue*Y+Oe*be,c[15]=Te*C+W*N+ue*Q+Oe*$e,c},g.O=function(c,r){const l={};for(let d=0;d<r.length;d++){const _=r[d];_ in c&&(l[_]=c[_])}return l},g.P=X,g.Q=wc,g.R=So,g.S=Jp,g.T=cd,g.U=Md,g.V=pe,g.W=he,g.X=Sn,g.Y=Uo,g.Z=Qe,g._=u,g.a=Gn,g.a$=function(c,r,l){var d=Math.sin(l),_=Math.cos(l),S=r[4],C=r[5],M=r[6],O=r[7],D=r[8],N=r[9],V=r[10],Z=r[11];return r!==c&&(c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c[4]=S*_+D*d,c[5]=C*_+N*d,c[6]=M*_+V*d,c[7]=O*_+Z*d,c[8]=D*_-S*d,c[9]=N*_-C*d,c[10]=V*_-M*d,c[11]=Z*_-O*d,c},g.a0=25,g.a1=em,g.a2=c=>{const r=window.document.createElement("video");return r.muted=!0,new Promise(l=>{r.onloadstart=()=>{l(r)};for(const d of c){const _=window.document.createElement("source");Ge(d)||(r.crossOrigin="Anonymous"),_.src=d,r.appendChild(_)}})},g.a3=qe,g.a4=function(){return mt++},g.a5=_e,g.a6=Pf,g.a7=Qa,g.a8=io,g.a9=$r,g.aA=function(c,r,l,d,_=!1){if(!l[0]&&!l[1])return[0,0];const S=_?d==="map"?-c.bearingInRadians:0:d==="viewport"?c.bearingInRadians:0;if(S){const C=Math.sin(S),M=Math.cos(S);l=[l[0]*M-l[1]*C,l[0]*C+l[1]*M]}return[_?l[0]:Rt(r,l[0],c.zoom),_?l[1]:Rt(r,l[1],c.zoom)]},g.aC=Mf,g.aD=lm,g.aE=Gp,g.aF=um,g.aG=Qr,g.aH=wi,g.aI=vt,g.aJ=mr,g.aK=fr,g.aL=qt,g.aM=Pn,g.aN=Rf,g.aO=function(c,r,l){return c[0]=r[0]*l,c[1]=r[1]*l,c[2]=r[2]*l,c},g.aP=function(c,r,l){return c[0]=r[0]+l[0],c[1]=r[1]+l[1],c[2]=r[2]+l[2],c},g.aQ=function(c){var r=new ve(3);return r[0]=c[0],r[1]=c[1],r[2]=c[2],r},g.aR=function(c,r,l){return c[0]=r[0]*l[0],c[1]=r[1]*l[1],c[2]=r[2]*l[2],c[3]=r[3]*l[3],c},g.aS=function(c,r,l){return c[0]=r[0]-l[0],c[1]=r[1]-l[1],c[2]=r[2]-l[2],c},g.aT=function(c,r){var l=r[0],d=r[1],_=r[2],S=l*l+d*d+_*_;return S>0&&(S=1/Math.sqrt(S)),c[0]=r[0]*S,c[1]=r[1]*S,c[2]=r[2]*S,c},g.aU=function(c,r,l){var d=r[0],_=r[1],S=r[2],C=l[0],M=l[1],O=l[2];return c[0]=_*O-S*M,c[1]=S*C-d*O,c[2]=d*M-_*C,c},g.aV=function(c,r){return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]},g.aW=R_,g.aX=Sh,g.aY=function(c,r,l,d,_){var S,C=1/Math.tan(r/2);return c[0]=C/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=C,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,_!=null&&_!==1/0?(c[10]=(_+d)*(S=1/(d-_)),c[14]=2*_*d*S):(c[10]=-1,c[14]=-2*d),c},g.aZ=function(c){var r=new ve(16);return r[0]=c[0],r[1]=c[1],r[2]=c[2],r[3]=c[3],r[4]=c[4],r[5]=c[5],r[6]=c[6],r[7]=c[7],r[8]=c[8],r[9]=c[9],r[10]=c[10],r[11]=c[11],r[12]=c[12],r[13]=c[13],r[14]=c[14],r[15]=c[15],r},g.a_=function(c,r,l){var d=Math.sin(l),_=Math.cos(l),S=r[0],C=r[1],M=r[2],O=r[3],D=r[4],N=r[5],V=r[6],Z=r[7];return r!==c&&(c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c[0]=S*_+D*d,c[1]=C*_+N*d,c[2]=M*_+V*d,c[3]=O*_+Z*d,c[4]=D*_-S*d,c[5]=N*_-C*d,c[6]=V*_-M*d,c[7]=Z*_-O*d,c},g.aa=function(c){const r={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(l,d,_,S)=>{const C=_||S;return r[d]=!C||C.toLowerCase(),""}),r["max-age"]){const l=parseInt(r["max-age"],10);isNaN(l)?delete r["max-age"]:r["max-age"]=l}return r},g.ab=Ln,g.ac=function(c){return Math.pow(2,c)},g.ad=ke,g.ae=St,g.af=85.051129,g.ag=Ug,g.ah=function(c){return Math.log(c)/Math.LN2},g.ai=function(c){var r=c[0],l=c[1];return r*r+l*l},g.aj=function(c,r){const l=[];for(const d in c)d in r||l.push(d);return l},g.ak=function(c,r){let l=0,d=0;if(c.kind==="constant")d=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:_,minZoom:S,maxZoom:C}=c,M=_?St(sa.interpolationFactor(_,r,S,C),0,1):0;c.kind==="camera"?d=Yo.number(c.minSize,c.maxSize,M):l=M}return{uSizeT:l,uSize:d}},g.am=function(c,{uSize:r,uSizeT:l},{lowerSize:d,upperSize:_}){return c.kind==="source"?d/Tl:c.kind==="composite"?Yo.number(d/Tl,_/Tl,l):r},g.an=function(c,r){var l=r[0],d=r[1],_=r[2],S=r[3],C=r[4],M=r[5],O=r[6],D=r[7],N=r[8],V=r[9],Z=r[10],Y=r[11],Q=r[12],re=r[13],fe=r[14],be=r[15],$e=l*M-d*C,Te=l*O-_*C,W=l*D-S*C,ue=d*O-_*M,Oe=d*D-S*M,ot=_*D-S*O,Lt=N*re-V*Q,ht=N*fe-Z*Q,wt=N*be-Y*Q,Ut=V*fe-Z*re,jt=V*be-Y*re,Zt=Z*be-Y*fe,Et=$e*Zt-Te*jt+W*Ut+ue*wt-Oe*ht+ot*Lt;return Et?(c[0]=(M*Zt-O*jt+D*Ut)*(Et=1/Et),c[1]=(_*jt-d*Zt-S*Ut)*Et,c[2]=(re*ot-fe*Oe+be*ue)*Et,c[3]=(Z*Oe-V*ot-Y*ue)*Et,c[4]=(O*wt-C*Zt-D*ht)*Et,c[5]=(l*Zt-_*wt+S*ht)*Et,c[6]=(fe*W-Q*ot-be*Te)*Et,c[7]=(N*ot-Z*W+Y*Te)*Et,c[8]=(C*jt-M*wt+D*Lt)*Et,c[9]=(d*wt-l*jt-S*Lt)*Et,c[10]=(Q*Oe-re*W+be*$e)*Et,c[11]=(V*W-N*Oe-Y*$e)*Et,c[12]=(M*ht-C*Ut-O*Lt)*Et,c[13]=(l*Ut-d*ht+_*Lt)*Et,c[14]=(re*Te-Q*ue-fe*$e)*Et,c[15]=(N*ue-V*Te+Z*$e)*Et,c):null},g.ao=xe,g.ap=function(c){return Math.hypot(c[0],c[1])},g.aq=function(c){return c[0]=0,c[1]=0,c},g.ar=function(c,r,l){return c[0]=r[0]*l,c[1]=r[1]*l,c},g.as=Td,g.at=We,g.au=function(c,r,l,d){const _=r.y-c.y,S=r.x-c.x,C=d.y-l.y,M=d.x-l.x,O=C*S-M*_;if(O===0)return null;const D=(M*(c.y-l.y)-C*(c.x-l.x))/O;return new X(c.x+D*S,c.y+D*_)},g.av=nm,g.aw=wp,g.ax=function(c){let r=1/0,l=1/0,d=-1/0,_=-1/0;for(const S of c)r=Math.min(r,S.x),l=Math.min(l,S.y),d=Math.max(d,S.x),_=Math.max(_,S.y);return[r,l,d,_]},g.ay=Oi,g.az=Rt,g.b=Qt,g.b$=class extends ne{},g.b0=function(){const c=new Float32Array(16);return ke(c),c},g.b1=function(){const c=new Float64Array(16);return ke(c),c},g.b2=function(){return new Float64Array(16)},g.b3=function(c,r,l){const d=new Float64Array(4);return function(_,S,C,M){var O=.5*Math.PI/180;S*=O,C*=O,M*=O;var D=Math.sin(S),N=Math.cos(S),V=Math.sin(C),Z=Math.cos(C),Y=Math.sin(M),Q=Math.cos(M);_[0]=D*Z*Q-N*V*Y,_[1]=N*V*Q+D*Z*Y,_[2]=N*Z*Y-D*V*Q,_[3]=N*Z*Q+D*V*Y}(d,c,r-90,l),d},g.b4=function(c,r,l,d){var _,S,C,M,O,D=r[0],N=r[1],V=r[2],Z=r[3],Y=l[0],Q=l[1],re=l[2],fe=l[3];return(S=D*Y+N*Q+V*re+Z*fe)<0&&(S=-S,Y=-Y,Q=-Q,re=-re,fe=-fe),1-S>ae?(_=Math.acos(S),C=Math.sin(_),M=Math.sin((1-d)*_)/C,O=Math.sin(d*_)/C):(M=1-d,O=d),c[0]=M*D+O*Y,c[1]=M*N+O*Q,c[2]=M*V+O*re,c[3]=M*Z+O*fe,c},g.b5=function(c){const r=new Float64Array(9);var l,d,_,S,C,M,O,D,N,V,Z,Y,Q,re,fe,be,$e,Te;V=(_=(d=c)[0])*(O=_+_),Z=(S=d[1])*O,Q=(C=d[2])*O,re=C*(D=S+S),be=(M=d[3])*O,$e=M*D,Te=M*(N=C+C),(l=r)[0]=1-(Y=S*D)-(fe=C*N),l[3]=Z-Te,l[6]=Q+$e,l[1]=Z+Te,l[4]=1-V-fe,l[7]=re-be,l[2]=Q-$e,l[5]=re+be,l[8]=1-V-Y;const W=Pn(-Math.asin(St(r[2],-1,1)));let ue,Oe;return Math.hypot(r[5],r[8])<.001?(ue=0,Oe=-Pn(Math.atan2(r[3],r[4]))):(ue=Pn(r[5]===0&&r[8]===0?0:Math.atan2(r[5],r[8])),Oe=Pn(r[1]===0&&r[0]===0?0:Math.atan2(r[1],r[0]))),{roll:ue,pitch:W+90,bearing:Oe}},g.b6=function(c,r){return c.roll==r.roll&&c.pitch==r.pitch&&c.bearing==r.bearing},g.b7=er,g.b8=dh,g.b9=mu,g.bA=function(c){if(c.type==="custom")return new sb(c);switch(c.type){case"background":return new A_(c);case"circle":return new s_(c);case"fill":return new Tg(c);case"fill-extrusion":return new jr(c);case"heatmap":return new _g(c);case"hillshade":return new Ap(c);case"line":return new vd(c);case"raster":return new $g(c);case"symbol":return new Yp(c)}},g.bB=Je,g.bC=function(c,r){if(!c)return[{command:"setStyle",args:[r]}];let l=[];try{if(!Ie(c.version,r.version))return[{command:"setStyle",args:[r]}];Ie(c.center,r.center)||l.push({command:"setCenter",args:[r.center]}),Ie(c.state,r.state)||l.push({command:"setGlobalState",args:[r.state]}),Ie(c.centerAltitude,r.centerAltitude)||l.push({command:"setCenterAltitude",args:[r.centerAltitude]}),Ie(c.zoom,r.zoom)||l.push({command:"setZoom",args:[r.zoom]}),Ie(c.bearing,r.bearing)||l.push({command:"setBearing",args:[r.bearing]}),Ie(c.pitch,r.pitch)||l.push({command:"setPitch",args:[r.pitch]}),Ie(c.roll,r.roll)||l.push({command:"setRoll",args:[r.roll]}),Ie(c.sprite,r.sprite)||l.push({command:"setSprite",args:[r.sprite]}),Ie(c.glyphs,r.glyphs)||l.push({command:"setGlyphs",args:[r.glyphs]}),Ie(c.transition,r.transition)||l.push({command:"setTransition",args:[r.transition]}),Ie(c.light,r.light)||l.push({command:"setLight",args:[r.light]}),Ie(c.terrain,r.terrain)||l.push({command:"setTerrain",args:[r.terrain]}),Ie(c.sky,r.sky)||l.push({command:"setSky",args:[r.sky]}),Ie(c.projection,r.projection)||l.push({command:"setProjection",args:[r.projection]});const d={},_=[];(function(C,M,O,D){let N;for(N in M=M||{},C=C||{})Object.prototype.hasOwnProperty.call(C,N)&&(Object.prototype.hasOwnProperty.call(M,N)||Ye(N,O,D));for(N in M)Object.prototype.hasOwnProperty.call(M,N)&&(Object.prototype.hasOwnProperty.call(C,N)?Ie(C[N],M[N])||(C[N].type==="geojson"&&M[N].type==="geojson"&&Mt(C,M,N)?Pe(O,{command:"setGeoJSONSourceData",args:[N,M[N].data]}):xt(N,M,O,D)):Me(N,M,O))})(c.sources,r.sources,_,d);const S=[];c.layers&&c.layers.forEach(C=>{"source"in C&&d[C.source]?l.push({command:"removeLayer",args:[C.id]}):S.push(C)}),l=l.concat(_),function(C,M,O){M=M||[];const D=(C=C||[]).map(Xt),N=M.map(Xt),V=C.reduce(It,{}),Z=M.reduce(It,{}),Y=D.slice(),Q=Object.create(null);let re,fe,be,$e,Te;for(let W=0,ue=0;W<D.length;W++)re=D[W],Object.prototype.hasOwnProperty.call(Z,re)?ue++:(Pe(O,{command:"removeLayer",args:[re]}),Y.splice(Y.indexOf(re,ue),1));for(let W=0,ue=0;W<N.length;W++)re=N[N.length-1-W],Y[Y.length-1-W]!==re&&(Object.prototype.hasOwnProperty.call(V,re)?(Pe(O,{command:"removeLayer",args:[re]}),Y.splice(Y.lastIndexOf(re,Y.length-ue),1)):ue++,$e=Y[Y.length-W],Pe(O,{command:"addLayer",args:[Z[re],$e]}),Y.splice(Y.length-W,0,re),Q[re]=!0);for(let W=0;W<N.length;W++)if(re=N[W],fe=V[re],be=Z[re],!Q[re]&&!Ie(fe,be))if(Ie(fe.source,be.source)&&Ie(fe["source-layer"],be["source-layer"])&&Ie(fe.type,be.type)){for(Te in Ot(fe.layout,be.layout,O,re,null,"setLayoutProperty"),Ot(fe.paint,be.paint,O,re,null,"setPaintProperty"),Ie(fe.filter,be.filter)||Pe(O,{command:"setFilter",args:[re,be.filter]}),Ie(fe.minzoom,be.minzoom)&&Ie(fe.maxzoom,be.maxzoom)||Pe(O,{command:"setLayerZoomRange",args:[re,be.minzoom,be.maxzoom]}),fe)Object.prototype.hasOwnProperty.call(fe,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?Ot(fe[Te],be[Te],O,re,Te.slice(6),"setPaintProperty"):Ie(fe[Te],be[Te])||Pe(O,{command:"setLayerProperty",args:[re,Te,be[Te]]}));for(Te in be)Object.prototype.hasOwnProperty.call(be,Te)&&!Object.prototype.hasOwnProperty.call(fe,Te)&&Te!=="layout"&&Te!=="paint"&&Te!=="filter"&&Te!=="metadata"&&Te!=="minzoom"&&Te!=="maxzoom"&&(Te.indexOf("paint.")===0?Ot(fe[Te],be[Te],O,re,Te.slice(6),"setPaintProperty"):Ie(fe[Te],be[Te])||Pe(O,{command:"setLayerProperty",args:[re,Te,be[Te]]}))}else Pe(O,{command:"removeLayer",args:[re]}),$e=Y[Y.lastIndexOf(re)+1],Pe(O,{command:"addLayer",args:[be,$e]})}(S,r.layers,l)}catch(d){console.warn("Unable to compute style diff:",d),l=[{command:"setStyle",args:[r]}]}return l},g.bD=function(c){const r=[],l=c.id;return l===void 0&&r.push({message:`layers.${l}: missing required property "id"`}),c.render===void 0&&r.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&r.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),r},g.bE=function c(r,l){if(Array.isArray(r)){if(!Array.isArray(l)||r.length!==l.length)return!1;for(let d=0;d<r.length;d++)if(!c(r[d],l[d]))return!1;return!0}if(typeof r=="object"&&r!==null&&l!==null){if(typeof l!="object"||Object.keys(r).length!==Object.keys(l).length)return!1;for(const d in r)if(!c(r[d],l[d]))return!1;return!0}return r===l},g.bF=ft,g.bG=Ke,g.bH=class extends Ar{constructor(c,r){super(c,r),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},g.bI=bp,g.bJ=class extends Ar{constructor(c,r){super(c,r),this.current=fu}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let r=1;r<16;r++)if(c[r]!==this.current[r]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},g.bK=ud,g.bL=class extends Ar{constructor(c,r){super(c,r),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},g.bM=class extends Ar{constructor(c,r){super(c,r),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},g.bN=Se,g.bO=function(c,r){var l=Math.sin(r),d=Math.cos(r);return c[0]=d,c[1]=l,c[2]=0,c[3]=-l,c[4]=d,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},g.bP=function(c,r,l){var d=r[0],_=r[1],S=r[2];return c[0]=d*l[0]+_*l[3]+S*l[6],c[1]=d*l[1]+_*l[4]+S*l[7],c[2]=d*l[2]+_*l[5]+S*l[8],c},g.bQ=function(c,r,l,d,_,S,C){var M=1/(r-l),O=1/(d-_),D=1/(S-C);return c[0]=-2*M,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*O,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*D,c[11]=0,c[12]=(r+l)*M,c[13]=(_+d)*O,c[14]=(C+S)*D,c[15]=1,c},g.bR=class extends Ar{constructor(c,r){super(c,r),this.current=new Array}set(c){if(c!=this.current){this.current=c;const r=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)r[4*l]=c[l].r,r[4*l+1]=c[l].g,r[4*l+2]=c[l].b,r[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,r)}}},g.bS=class extends Ar{constructor(c,r){super(c,r),this.current=new Array}set(c){if(c!=this.current){this.current=c;const r=new Float32Array(c);this.gl.uniform1fv(this.location,r)}}},g.bT=class extends w{},g.bU=bu,g.bV=class extends R{},g.bW=pd,g.bX=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},g.bY=Mp,g.bZ=function(c,r,l){var d=r[0],_=r[1],S=r[2],C=l[3]*d+l[7]*_+l[11]*S+l[15];return c[0]=(l[0]*d+l[4]*_+l[8]*S+l[12])/(C=C||1),c[1]=(l[1]*d+l[5]*_+l[9]*S+l[13])/C,c[2]=(l[2]*d+l[6]*_+l[10]*S+l[14])/C,c},g.b_=class extends Ds{},g.ba=_f,g.bb=Co,g.bc=tt,g.bd=_t,g.be=qi,g.bf=function(c,r,l,d,_){return tt(d,_,St((c-r)/(l-r),0,1))},g.bg=we,g.bh=function(){return new Float64Array(3)},g.bi=function(c,r,l,d){return c[0]=r[0]+l[0]*d,c[1]=r[1]+l[1]*d,c[2]=r[2]+l[2]*d,c},g.bj=He,g.bk=function(){return new Float64Array(4)},g.bl=function(c,r,l,d){var _=[],S=[];return _[0]=r[0]-l[0],_[1]=r[1]-l[1],_[2]=r[2]-l[2],S[0]=_[0]*Math.cos(d)-_[1]*Math.sin(d),S[1]=_[0]*Math.sin(d)+_[1]*Math.cos(d),S[2]=_[2],c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},g.bm=function(c,r,l,d){var _=[],S=[];return _[0]=r[0]-l[0],_[1]=r[1]-l[1],_[2]=r[2]-l[2],S[0]=_[0],S[1]=_[1]*Math.cos(d)-_[2]*Math.sin(d),S[2]=_[1]*Math.sin(d)+_[2]*Math.cos(d),c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},g.bn=function(c,r,l,d){var _=[],S=[];return _[0]=r[0]-l[0],_[1]=r[1]-l[1],_[2]=r[2]-l[2],S[0]=_[2]*Math.sin(d)+_[0]*Math.cos(d),S[1]=_[1],S[2]=_[2]*Math.cos(d)-_[0]*Math.sin(d),c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},g.bo=Re,g.bp=function(c,r,l){var d=Math.sin(l),_=Math.cos(l),S=r[0],C=r[1],M=r[2],O=r[3],D=r[8],N=r[9],V=r[10],Z=r[11];return r!==c&&(c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15]),c[0]=S*_-D*d,c[1]=C*_-N*d,c[2]=M*_-V*d,c[3]=O*_-Z*d,c[8]=S*d+D*_,c[9]=C*d+N*_,c[10]=M*d+V*_,c[11]=O*d+Z*_,c},g.bq=function(c,r){const l=we(c,360),d=we(r,360),_=d-l,S=d>l?_-360:_+360;return Math.abs(_)<Math.abs(S)?_:S},g.br=function(c){return c[0]=0,c[1]=0,c[2]=0,c},g.bs=function(c,r,l,d){const _=Math.sqrt(c*c+r*r),S=Math.sqrt(l*l+d*d);c/=_,r/=_,l/=S,d/=S;const C=Math.acos(c*l+r*d);return-r*l+c*d>0?C:-C},g.bt=function(c,r){return c[0]*r[0]+c[1]*r[1]+c[2]*r[2]+c[3]},g.bu=Vg,g.bv=function(c,r){const l=we(c,2*Math.PI),d=we(r,2*Math.PI);return Math.min(Math.abs(l-d),Math.abs(l-d+2*Math.PI),Math.abs(l-d-2*Math.PI))},g.bw=function(){const c={},r=ce.$version;for(const l in ce.$root){const d=ce.$root[l];if(d.required){let _=null;_=l==="version"?r:d.type==="array"?[]:{},_!=null&&(c[l]=_)}}return c},g.bx=of,g.by=gr,g.bz=function(c){c=c.slice();const r=Object.create(null);for(let l=0;l<c.length;l++)r[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=Ve(c[l],r[c[l].ref]));return c},g.c=sr,g.c0=function(c,r){return c[0]===r[0]&&c[1]===r[1]&&c[2]===r[2]&&c[3]===r[3]&&c[4]===r[4]&&c[5]===r[5]&&c[6]===r[6]&&c[7]===r[7]&&c[8]===r[8]&&c[9]===r[9]&&c[10]===r[10]&&c[11]===r[11]&&c[12]===r[12]&&c[13]===r[13]&&c[14]===r[14]&&c[15]===r[15]},g.c1=function(c,r){var l=c[0],d=c[1],_=c[2],S=c[3],C=c[4],M=c[5],O=c[6],D=c[7],N=c[8],V=c[9],Z=c[10],Y=c[11],Q=c[12],re=c[13],fe=c[14],be=c[15],$e=r[0],Te=r[1],W=r[2],ue=r[3],Oe=r[4],ot=r[5],Lt=r[6],ht=r[7],wt=r[8],Ut=r[9],jt=r[10],Zt=r[11],Et=r[12],on=r[13],_n=r[14],yn=r[15];return Math.abs(l-$e)<=ae*Math.max(1,Math.abs(l),Math.abs($e))&&Math.abs(d-Te)<=ae*Math.max(1,Math.abs(d),Math.abs(Te))&&Math.abs(_-W)<=ae*Math.max(1,Math.abs(_),Math.abs(W))&&Math.abs(S-ue)<=ae*Math.max(1,Math.abs(S),Math.abs(ue))&&Math.abs(C-Oe)<=ae*Math.max(1,Math.abs(C),Math.abs(Oe))&&Math.abs(M-ot)<=ae*Math.max(1,Math.abs(M),Math.abs(ot))&&Math.abs(O-Lt)<=ae*Math.max(1,Math.abs(O),Math.abs(Lt))&&Math.abs(D-ht)<=ae*Math.max(1,Math.abs(D),Math.abs(ht))&&Math.abs(N-wt)<=ae*Math.max(1,Math.abs(N),Math.abs(wt))&&Math.abs(V-Ut)<=ae*Math.max(1,Math.abs(V),Math.abs(Ut))&&Math.abs(Z-jt)<=ae*Math.max(1,Math.abs(Z),Math.abs(jt))&&Math.abs(Y-Zt)<=ae*Math.max(1,Math.abs(Y),Math.abs(Zt))&&Math.abs(Q-Et)<=ae*Math.max(1,Math.abs(Q),Math.abs(Et))&&Math.abs(re-on)<=ae*Math.max(1,Math.abs(re),Math.abs(on))&&Math.abs(fe-_n)<=ae*Math.max(1,Math.abs(fe),Math.abs(_n))&&Math.abs(be-yn)<=ae*Math.max(1,Math.abs(be),Math.abs(yn))},g.c2=function(c,r){return c[0]=r[0],c[1]=r[1],c[2]=r[2],c[3]=r[3],c[4]=r[4],c[5]=r[5],c[6]=r[6],c[7]=r[7],c[8]=r[8],c[9]=r[9],c[10]=r[10],c[11]=r[11],c[12]=r[12],c[13]=r[13],c[14]=r[14],c[15]=r[15],c},g.c3=c=>c.type==="symbol",g.c4=c=>c.type==="circle",g.c5=c=>c.type==="heatmap",g.c6=c=>c.type==="line",g.c7=c=>c.type==="fill",g.c8=c=>c.type==="fill-extrusion",g.c9=c=>c.type==="hillshade",g.cA=Hs,g.cB=gh,g.cC=yc,g.cD=so,g.cE=class{constructor(c){this._marks={start:[c.url,"start"].join("#"),end:[c.url,"end"].join("#"),measure:c.url.toString()},performance.mark(this._marks.start)}finish(){performance.mark(this._marks.end);let c=performance.getEntriesByName(this._marks.measure);return c.length===0&&(performance.measure(this._marks.measure,this._marks.start,this._marks.end),c=performance.getEntriesByName(this._marks.measure),performance.clearMarks(this._marks.start),performance.clearMarks(this._marks.end),performance.clearMeasures(this._marks.measure)),c}},g.cF=function(c,r,l,d,_){return u(this,void 0,void 0,function*(){if(he())try{return yield Sn(c,r,l,d,_)}catch{}return function(S,C,M,O,D){const N=S.width,V=S.height;bn&&gn||(bn=new OffscreenCanvas(N,V),gn=bn.getContext("2d",{willReadFrequently:!0})),bn.width=N,bn.height=V,gn.drawImage(S,0,0,N,V);const Z=gn.getImageData(C,M,O,D);return gn.clearRect(0,0,N,V),Z.data}(c,r,l,d,_)})},g.cG=Hg,g.cH=E,g.cI=B,g.cJ=vf,g.cK=Vp,g.cL=Ms,g.cM=ss,g.ca=c=>c.type==="raster",g.cb=c=>c.type==="background",g.cc=c=>c.type==="custom",g.cd=Pt,g.ce=function(c,r,l){const d=et(r.x-l.x,r.y-l.y),_=et(c.x-l.x,c.y-l.y);var S,C;return Pn(Math.atan2(d[0]*_[1]-d[1]*_[0],(S=d)[0]*(C=_)[0]+S[1]*C[1]))},g.cf=At,g.cg=function(c,r){return or[r]&&(c instanceof MouseEvent||c instanceof WheelEvent)},g.ch=function(c,r){return Hn[r]&&"touches"in c},g.ci=function(c){return Hn[c]||or[c]},g.cj=function(c,r,l){var d=r[0],_=r[1];return c[0]=l[0]*d+l[4]*_+l[12],c[1]=l[1]*d+l[5]*_+l[13],c},g.ck=function(c,r){const{x:l,y:d}=Cu.fromLngLat(r);return!(c<0||c>25||d<0||d>=1||l<0||l>=1)},g.cl=function(c,r){return c[0]=r[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=r[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=r[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},g.cm=class extends fc{},g.cn=db,g.cp=function(c){return c.message===dr},g.cq=br,g.cr=function(c,r){Gn.REGISTERED_PROTOCOLS[c]=r},g.cs=function(c){delete Gn.REGISTERED_PROTOCOLS[c]},g.ct=function(c,r){const l={};for(let _=0;_<c.length;_++){const S=r&&r[c[_].id]||Io(c[_]);r&&(r[c[_].id]=S);let C=l[S];C||(C=l[S]=[]),C.push(c[_])}const d=[];for(const _ in l)d.push(l[_]);return d},g.cu=rn,g.cv=Pd,g.cw=tm,g.cx=_h,g.cy=function(c){c.bucket.createArrays(),c.bucket.tilePixelRatio=Qe/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const r=c.bucket.layers[0],l=r.layout,d=r._unevaluatedLayout._values,_={layoutIconSize:d["icon-size"].possiblyEvaluate(new Nr(c.bucket.zoom+1),c.canonical),layoutTextSize:d["text-size"].possiblyEvaluate(new Nr(c.bucket.zoom+1),c.canonical),textMaxSize:d["text-size"].possiblyEvaluate(new Nr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:D,maxZoom:N}=c.bucket.textSizeData;_.compositeTextSizes=[d["text-size"].possiblyEvaluate(new Nr(D),c.canonical),d["text-size"].possiblyEvaluate(new Nr(N),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:D,maxZoom:N}=c.bucket.iconSizeData;_.compositeIconSizes=[d["icon-size"].possiblyEvaluate(new Nr(D),c.canonical),d["icon-size"].possiblyEvaluate(new Nr(N),c.canonical)]}const S=l.get("text-line-height")*Oi,C=l.get("text-rotation-alignment")!=="viewport"&&l.get("symbol-placement")!=="point",M=l.get("text-keep-upright"),O=l.get("text-size");for(const D of c.bucket.features){const N=l.get("text-font").evaluate(D,{},c.canonical).join(","),V=O.evaluate(D,{},c.canonical),Z=_.layoutTextSize.evaluate(D,{},c.canonical),Y=_.layoutIconSize.evaluate(D,{},c.canonical),Q={horizontal:{},vertical:void 0},re=D.text;let fe,be=[0,0];if(re){const W=re.toString(),ue=l.get("text-letter-spacing").evaluate(D,{},c.canonical)*Oi,Oe=vp(W)?ue:0,ot=l.get("text-anchor").evaluate(D,{},c.canonical),Lt=Ho(r,D,c.canonical);if(!Lt){const jt=l.get("text-radial-offset").evaluate(D,{},c.canonical);be=jt?kf(ot,[jt*Oi,sm]):l.get("text-offset").evaluate(D,{},c.canonical).map(Zt=>Zt*Oi)}let ht=C?"center":l.get("text-justify").evaluate(D,{},c.canonical);const wt=l.get("symbol-placement")==="point"?l.get("text-max-width").evaluate(D,{},c.canonical)*Oi:1/0,Ut=()=>{c.bucket.allowVerticalPlacement&&sh(W)&&(Q.vertical=Cf(re,c.glyphMap,c.glyphPositions,c.imagePositions,N,wt,S,ot,"left",Oe,be,g.al.vertical,!0,Z,V))};if(!C&&Lt){const jt=new Set;if(ht==="auto")for(let Et=0;Et<Lt.values.length;Et+=2)jt.add(lm(Lt.values[Et]));else jt.add(ht);let Zt=!1;for(const Et of jt)if(!Q.horizontal[Et])if(Zt)Q.horizontal[Et]=Q.horizontal[0];else{const on=Cf(re,c.glyphMap,c.glyphPositions,c.imagePositions,N,wt,S,"center",Et,Oe,be,g.al.horizontal,!1,Z,V);on&&(Q.horizontal[Et]=on,Zt=on.positionedLines.length===1)}Ut()}else{ht==="auto"&&(ht=lm(ot));const jt=Cf(re,c.glyphMap,c.glyphPositions,c.imagePositions,N,wt,S,ot,ht,Oe,be,g.al.horizontal,!1,Z,V);jt&&(Q.horizontal[ht]=jt),Ut(),sh(W)&&C&&M&&(Q.vertical=Cf(re,c.glyphMap,c.glyphPositions,c.imagePositions,N,wt,S,ot,ht,Oe,be,g.al.vertical,!1,Z,V))}}let $e=!1;if(D.icon&&D.icon.name){const W=c.imageMap[D.icon.name];W&&(fe=ni(c.imagePositions[D.icon.name],l.get("icon-offset").evaluate(D,{},c.canonical),l.get("icon-anchor").evaluate(D,{},c.canonical)),$e=!!W.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=$e:c.bucket.sdfIcons!==$e&&$t("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(W.pixelRatio!==c.bucket.pixelRatio||l.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const Te=D_(Q.horizontal)||Q.vertical;c.bucket.iconsInText=!!Te&&Te.iconsInText,(Te||fe)&&cm(c.bucket,D,Q,fe,c.imageMap,_,Z,Y,be,$e,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},g.cz=Si,g.d=Ge,g.e=Xe,g.f=c=>u(void 0,void 0,void 0,function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const r=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(r)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}}),g.g=pr,g.h=c=>new Promise((r,l)=>{const d=new Image;d.onload=()=>{r(d),URL.revokeObjectURL(d.src),d.onload=null,window.requestAnimationFrame(()=>{d.src=ln})},d.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const _=new Blob([new Uint8Array(c)],{type:"image/png"});d.src=c.byteLength?URL.createObjectURL(_):ln}),g.i=Gt,g.j=(c,r)=>Lr(Xe(c,{type:"json"}),r),g.k=Ce,g.l=de,g.m=Lr,g.n=(c,r)=>Lr(Xe(c,{type:"arrayBuffer"}),r),g.o=function(c){return new so(c).readFields(Vo,[])},g.p=bc,g.q=pf,g.r=ii,g.s=En,g.t=ih,g.u=Vn,g.v=ce,g.w=$t,g.x=ah,g.y=su,g.z=function([c,r,l]){return r+=90,r*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(r)*Math.sin(l),y:c*Math.sin(r)*Math.sin(l),z:c*Math.cos(l)}}}),f("worker",["./shared"],function(g){class u{constructor(te){this.keyCache={},te&&this.replace(te)}replace(te){this._layerConfigs={},this._layers={},this.update(te,[])}update(te,ie){for(const Ce of te){this._layerConfigs[Ce.id]=Ce;const Ne=this._layers[Ce.id]=g.bA(Ce);Ne._featureFilter=g.a7(Ne.filter),this.keyCache[Ce.id]&&delete this.keyCache[Ce.id]}for(const Ce of ie)delete this.keyCache[Ce],delete this._layerConfigs[Ce],delete this._layers[Ce];this.familiesBySource={};const de=g.ct(Object.values(this._layerConfigs),this.keyCache);for(const Ce of de){const Ne=Ce.map(Me=>this._layers[Me.id]),ce=Ne[0];if(ce.visibility==="none")continue;const rt=ce.source||"";let Ve=this.familiesBySource[rt];Ve||(Ve=this.familiesBySource[rt]={});const Ie=ce.sourceLayer||"_geojsonTileLayer";let Pe=Ve[Ie];Pe||(Pe=Ve[Ie]=[]),Pe.push(Ne)}}}class E{constructor(te){const ie={},de=[];for(const rt in te){const Ve=te[rt],Ie=ie[rt]={};for(const Pe in Ve){const Me=Ve[+Pe];if(!Me||Me.bitmap.width===0||Me.bitmap.height===0)continue;const Ye={x:0,y:0,w:Me.bitmap.width+2,h:Me.bitmap.height+2};de.push(Ye),Ie[Pe]={rect:Ye,metrics:Me.metrics}}}const{w:Ce,h:Ne}=g.p(de),ce=new g.q({width:Ce||1,height:Ne||1});for(const rt in te){const Ve=te[rt];for(const Ie in Ve){const Pe=Ve[+Ie];if(!Pe||Pe.bitmap.width===0||Pe.bitmap.height===0)continue;const Me=ie[rt][Ie].rect;g.q.copy(Pe.bitmap,ce,{x:0,y:0},{x:Me.x+1,y:Me.y+1},Pe.bitmap)}}this.image=ce,this.positions=ie}}g.cu("GlyphAtlas",E);class P{constructor(te){this.tileID=new g.Y(te.tileID.overscaledZ,te.tileID.wrap,te.tileID.canonical.z,te.tileID.canonical.x,te.tileID.canonical.y),this.uid=te.uid,this.zoom=te.zoom,this.pixelRatio=te.pixelRatio,this.tileSize=te.tileSize,this.source=te.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=te.showCollisionBoxes,this.collectResourceTiming=!!te.collectResourceTiming,this.returnDependencies=!!te.returnDependencies,this.promoteId=te.promoteId,this.inFlightDependencies=[]}parse(te,ie,de,Ce,Ne){return g._(this,void 0,void 0,function*(){this.status="parsing",this.data=te,this.collisionBoxArray=new g.a5;const ce=new g.cv(Object.keys(te.layers).sort()),rt=new g.cw(this.tileID,this.promoteId);rt.bucketLayerIDs=[];const Ve={},Ie={featureIndex:rt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:de,subdivisionGranularity:Ne},Pe=ie.familiesBySource[this.source];for(const Wt in Pe){const at=te.layers[Wt];if(!at)continue;at.version===1&&g.w(`Vector tile source "${this.source}" layer "${Wt}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ht=ce.encode(Wt),an=[];for(let Cn=0;Cn<at.length;Cn++){const pn=at.feature(Cn),Bn=rt.getId(pn,Wt);an.push({feature:pn,id:Bn,index:Cn,sourceLayerIndex:Ht})}for(const Cn of Pe[Wt]){const pn=Cn[0];pn.source!==this.source&&g.w(`layer.source = ${pn.source} does not equal this.source = ${this.source}`),pn.minzoom&&this.zoom<Math.floor(pn.minzoom)||pn.maxzoom&&this.zoom>=pn.maxzoom||pn.visibility!=="none"&&(I(Cn,this.zoom,de),(Ve[pn.id]=pn.createBucket({index:rt.bucketLayerIDs.length,layers:Cn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ht,sourceID:this.source})).populate(an,Ie,this.tileID.canonical),rt.bucketLayerIDs.push(Cn.map(Bn=>Bn.id)))}}const Me=g.bF(Ie.glyphDependencies,Wt=>Object.keys(Wt).map(Number));this.inFlightDependencies.forEach(Wt=>Wt==null?void 0:Wt.abort()),this.inFlightDependencies=[];let Ye=Promise.resolve({});if(Object.keys(Me).length){const Wt=new AbortController;this.inFlightDependencies.push(Wt),Ye=Ce.sendAsync({type:"GG",data:{stacks:Me,source:this.source,tileID:this.tileID,type:"glyphs"}},Wt)}const xt=Object.keys(Ie.iconDependencies);let Mt=Promise.resolve({});if(xt.length){const Wt=new AbortController;this.inFlightDependencies.push(Wt),Mt=Ce.sendAsync({type:"GI",data:{icons:xt,source:this.source,tileID:this.tileID,type:"icons"}},Wt)}const Ot=Object.keys(Ie.patternDependencies);let Xt=Promise.resolve({});if(Ot.length){const Wt=new AbortController;this.inFlightDependencies.push(Wt),Xt=Ce.sendAsync({type:"GI",data:{icons:Ot,source:this.source,tileID:this.tileID,type:"patterns"}},Wt)}const[It,qe,dn]=yield Promise.all([Ye,Mt,Xt]),cn=new E(It),en=new g.cx(qe,dn);for(const Wt in Ve){const at=Ve[Wt];at instanceof g.a6?(I(at.layers,this.zoom,de),g.cy({bucket:at,glyphMap:It,glyphPositions:cn.positions,imageMap:qe,imagePositions:en.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:Ie.subdivisionGranularity})):at.hasPattern&&(at instanceof g.cz||at instanceof g.cA||at instanceof g.cB)&&(I(at.layers,this.zoom,de),at.addFeatures(Ie,this.tileID.canonical,en.patternPositions))}return this.status="done",{buckets:Object.values(Ve).filter(Wt=>!Wt.isEmpty()),featureIndex:rt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:cn.image,imageAtlas:en,glyphMap:this.returnDependencies?It:null,iconMap:this.returnDependencies?qe:null,glyphPositions:this.returnDependencies?cn.positions:null}})}}function I(Ge,te,ie){const de=new g.C(te);for(const Ce of Ge)Ce.recalculate(de,ie)}class B{constructor(te,ie,de){this.actor=te,this.layerIndex=ie,this.availableImages=de,this.fetching={},this.loading={},this.loaded={}}loadVectorTile(te,ie){return g._(this,void 0,void 0,function*(){const de=yield g.n(te.request,ie);try{return{vectorTile:new g.cC.VectorTile(new g.cD(de.data)),rawData:de.data,cacheControl:de.cacheControl,expires:de.expires}}catch(Ce){const Ne=new Uint8Array(de.data);let ce=`Unable to parse the tile at ${te.request.url}, `;throw ce+=Ne[0]===31&&Ne[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Ce.message}`,new Error(ce)}})}loadTile(te){return g._(this,void 0,void 0,function*(){const ie=te.uid,de=!!(te&&te.request&&te.request.collectResourceTiming)&&new g.cE(te.request),Ce=new P(te);this.loading[ie]=Ce;const Ne=new AbortController;Ce.abort=Ne;try{const ce=yield this.loadVectorTile(te,Ne);if(delete this.loading[ie],!ce)return null;const rt=ce.rawData,Ve={};ce.expires&&(Ve.expires=ce.expires),ce.cacheControl&&(Ve.cacheControl=ce.cacheControl);const Ie={};if(de){const Me=de.finish();Me&&(Ie.resourceTiming=JSON.parse(JSON.stringify(Me)))}Ce.vectorTile=ce.vectorTile;const Pe=Ce.parse(ce.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity);this.loaded[ie]=Ce,this.fetching[ie]={rawTileData:rt,cacheControl:Ve,resourceTiming:Ie};try{const Me=yield Pe;return g.e({rawTileData:rt.slice(0)},Me,Ve,Ie)}finally{delete this.fetching[ie]}}catch(ce){throw delete this.loading[ie],Ce.status="done",this.loaded[ie]=Ce,ce}})}reloadTile(te){return g._(this,void 0,void 0,function*(){const ie=te.uid;if(!this.loaded||!this.loaded[ie])throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");const de=this.loaded[ie];if(de.showCollisionBoxes=te.showCollisionBoxes,de.status==="parsing"){const Ce=yield de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity);let Ne;if(this.fetching[ie]){const{rawTileData:ce,cacheControl:rt,resourceTiming:Ve}=this.fetching[ie];delete this.fetching[ie],Ne=g.e({rawTileData:ce.slice(0)},Ce,rt,Ve)}else Ne=Ce;return Ne}if(de.status==="done"&&de.vectorTile)return de.parse(de.vectorTile,this.layerIndex,this.availableImages,this.actor,te.subdivisionGranularity)})}abortTile(te){return g._(this,void 0,void 0,function*(){const ie=this.loading,de=te.uid;ie&&ie[de]&&ie[de].abort&&(ie[de].abort.abort(),delete ie[de])})}removeTile(te){return g._(this,void 0,void 0,function*(){this.loaded&&this.loaded[te.uid]&&delete this.loaded[te.uid]})}}class j{constructor(){this.loaded={}}loadTile(te){return g._(this,void 0,void 0,function*(){const{uid:ie,encoding:de,rawImageData:Ce,redFactor:Ne,greenFactor:ce,blueFactor:rt,baseShift:Ve}=te,Ie=Ce.width+2,Pe=Ce.height+2,Me=g.b(Ce)?new g.R({width:Ie,height:Pe},yield g.cF(Ce,-1,-1,Ie,Pe)):Ce,Ye=new g.cG(ie,Me,de,Ne,ce,rt,Ve);return this.loaded=this.loaded||{},this.loaded[ie]=Ye,Ye})}removeTile(te){const ie=this.loaded,de=te.uid;ie&&ie[de]&&delete ie[de]}}var $,X,J=function(){if(X)return $;function Ge(ie,de){if(ie.length!==0){te(ie[0],de);for(var Ce=1;Ce<ie.length;Ce++)te(ie[Ce],!de)}}function te(ie,de){for(var Ce=0,Ne=0,ce=0,rt=ie.length,Ve=rt-1;ce<rt;Ve=ce++){var Ie=(ie[ce][0]-ie[Ve][0])*(ie[Ve][1]+ie[ce][1]),Pe=Ce+Ie;Ne+=Math.abs(Ce)>=Math.abs(Ie)?Ce-Pe+Ie:Ie-Pe+Ce,Ce=Pe}Ce+Ne>=0!=!!de&&ie.reverse()}return X=1,$=function ie(de,Ce){var Ne,ce=de&&de.type;if(ce==="FeatureCollection")for(Ne=0;Ne<de.features.length;Ne++)ie(de.features[Ne],Ce);else if(ce==="GeometryCollection")for(Ne=0;Ne<de.geometries.length;Ne++)ie(de.geometries[Ne],Ce);else if(ce==="Feature")ie(de.geometry,Ce);else if(ce==="Polygon")Ge(de.coordinates,Ce);else if(ce==="MultiPolygon")for(Ne=0;Ne<de.coordinates.length;Ne++)Ge(de.coordinates[Ne],Ce);return de}}(),G=g.cH(J);const le=g.cC.VectorTileFeature.prototype.toGeoJSON;class oe{constructor(te){this._feature=te,this.extent=g.Z,this.type=te.type,this.properties=te.tags,"id"in te&&!isNaN(te.id)&&(this.id=parseInt(te.id,10))}loadGeometry(){if(this._feature.type===1){const te=[];for(const ie of this._feature.geometry)te.push([new g.P(ie[0],ie[1])]);return te}{const te=[];for(const ie of this._feature.geometry){const de=[];for(const Ce of ie)de.push(new g.P(Ce[0],Ce[1]));te.push(de)}return te}}toGeoJSON(te,ie,de){return le.call(this,te,ie,de)}}class pe{constructor(te){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=g.Z,this.length=te.length,this._features=te}feature(te){return new oe(this._features[te])}}var he,ae,ve,Se={exports:{}},ke=function(){if(ve)return Se.exports;ve=1;var Ge=g.cK(),te=function(){if(ae)return he;ae=1;var Pe=g.cI(),Me=g.cJ().VectorTileFeature;function Ye(Mt,Ot){this.options=Ot||{},this.features=Mt,this.length=Mt.length}function xt(Mt,Ot){this.id=typeof Mt.id=="number"?Mt.id:void 0,this.type=Mt.type,this.rawGeometry=Mt.type===1?[Mt.geometry]:Mt.geometry,this.properties=Mt.tags,this.extent=Ot||4096}return he=Ye,Ye.prototype.feature=function(Mt){return new xt(this.features[Mt],this.options.extent)},xt.prototype.loadGeometry=function(){var Mt=this.rawGeometry;this.geometry=[];for(var Ot=0;Ot<Mt.length;Ot++){for(var Xt=Mt[Ot],It=[],qe=0;qe<Xt.length;qe++)It.push(new Pe(Xt[qe][0],Xt[qe][1]));this.geometry.push(It)}return this.geometry},xt.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Mt=this.geometry,Ot=1/0,Xt=-1/0,It=1/0,qe=-1/0,dn=0;dn<Mt.length;dn++)for(var cn=Mt[dn],en=0;en<cn.length;en++){var Wt=cn[en];Ot=Math.min(Ot,Wt.x),Xt=Math.max(Xt,Wt.x),It=Math.min(It,Wt.y),qe=Math.max(qe,Wt.y)}return[Ot,It,Xt,qe]},xt.prototype.toGeoJSON=Me.prototype.toGeoJSON,he}();function ie(Pe){var Me=new Ge;return function(Ye,xt){for(var Mt in Ye.layers)xt.writeMessage(3,de,Ye.layers[Mt])}(Pe,Me),Me.finish()}function de(Pe,Me){var Ye;Me.writeVarintField(15,Pe.version||1),Me.writeStringField(1,Pe.name||""),Me.writeVarintField(5,Pe.extent||4096);var xt={keys:[],values:[],keycache:{},valuecache:{}};for(Ye=0;Ye<Pe.length;Ye++)xt.feature=Pe.feature(Ye),Me.writeMessage(2,Ce,xt);var Mt=xt.keys;for(Ye=0;Ye<Mt.length;Ye++)Me.writeStringField(3,Mt[Ye]);var Ot=xt.values;for(Ye=0;Ye<Ot.length;Ye++)Me.writeMessage(4,Ie,Ot[Ye])}function Ce(Pe,Me){var Ye=Pe.feature;Ye.id!==void 0&&Me.writeVarintField(1,Ye.id),Me.writeMessage(2,Ne,Pe),Me.writeVarintField(3,Ye.type),Me.writeMessage(4,Ve,Ye)}function Ne(Pe,Me){var Ye=Pe.feature,xt=Pe.keys,Mt=Pe.values,Ot=Pe.keycache,Xt=Pe.valuecache;for(var It in Ye.properties){var qe=Ye.properties[It],dn=Ot[It];if(qe!==null){dn===void 0&&(xt.push(It),Ot[It]=dn=xt.length-1),Me.writeVarint(dn);var cn=typeof qe;cn!=="string"&&cn!=="boolean"&&cn!=="number"&&(qe=JSON.stringify(qe));var en=cn+":"+qe,Wt=Xt[en];Wt===void 0&&(Mt.push(qe),Xt[en]=Wt=Mt.length-1),Me.writeVarint(Wt)}}}function ce(Pe,Me){return(Me<<3)+(7&Pe)}function rt(Pe){return Pe<<1^Pe>>31}function Ve(Pe,Me){for(var Ye=Pe.loadGeometry(),xt=Pe.type,Mt=0,Ot=0,Xt=Ye.length,It=0;It<Xt;It++){var qe=Ye[It],dn=1;xt===1&&(dn=qe.length),Me.writeVarint(ce(1,dn));for(var cn=xt===3?qe.length-1:qe.length,en=0;en<cn;en++){en===1&&xt!==1&&Me.writeVarint(ce(2,cn-1));var Wt=qe[en].x-Mt,at=qe[en].y-Ot;Me.writeVarint(rt(Wt)),Me.writeVarint(rt(at)),Mt+=Wt,Ot+=at}xt===3&&Me.writeVarint(ce(7,1))}}function Ie(Pe,Me){var Ye=typeof Pe;Ye==="string"?Me.writeStringField(1,Pe):Ye==="boolean"?Me.writeBooleanField(7,Pe):Ye==="number"&&(Pe%1!=0?Me.writeDoubleField(3,Pe):Pe<0?Me.writeSVarintField(6,Pe):Me.writeVarintField(5,Pe))}return Se.exports=ie,Se.exports.fromVectorTileJs=ie,Se.exports.fromGeojsonVt=function(Pe,Me){Me=Me||{};var Ye={};for(var xt in Pe)Ye[xt]=new te(Pe[xt].features,Me),Ye[xt].name=xt,Ye[xt].version=Me.version,Ye[xt].extent=Me.extent;return ie({layers:Ye})},Se.exports.GeoJSONWrapper=te,Se.exports}(),Le=g.cH(ke);const Re={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Ge=>Ge},me=Math.fround||(Ae=new Float32Array(1),Ge=>(Ae[0]=+Ge,Ae[0]));var Ae;const He=3,We=5,pt=6;class xe{constructor(te){this.options=Object.assign(Object.create(Re),te),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(te){const{log:ie,minZoom:de,maxZoom:Ce}=this.options;ie&&console.time("total time");const Ne=`prepare ${te.length} points`;ie&&console.time(Ne),this.points=te;const ce=[];for(let Ve=0;Ve<te.length;Ve++){const Ie=te[Ve];if(!Ie.geometry)continue;const[Pe,Me]=Ie.geometry.coordinates,Ye=me(Rt(Pe)),xt=me(we(Me));ce.push(Ye,xt,1/0,Ve,-1,1),this.options.reduce&&ce.push(0)}let rt=this.trees[Ce+1]=this._createTree(ce);ie&&console.timeEnd(Ne);for(let Ve=Ce;Ve>=de;Ve--){const Ie=+Date.now();rt=this.trees[Ve]=this._createTree(this._cluster(rt,Ve)),ie&&console.log("z%d: %d clusters in %dms",Ve,rt.numItems,+Date.now()-Ie)}return ie&&console.timeEnd("total time"),this}getClusters(te,ie){let de=((te[0]+180)%360+360)%360-180;const Ce=Math.max(-90,Math.min(90,te[1]));let Ne=te[2]===180?180:((te[2]+180)%360+360)%360-180;const ce=Math.max(-90,Math.min(90,te[3]));if(te[2]-te[0]>=360)de=-180,Ne=180;else if(de>Ne){const Me=this.getClusters([de,Ce,180,ce],ie),Ye=this.getClusters([-180,Ce,Ne,ce],ie);return Me.concat(Ye)}const rt=this.trees[this._limitZoom(ie)],Ve=rt.range(Rt(de),we(ce),Rt(Ne),we(Ce)),Ie=rt.data,Pe=[];for(const Me of Ve){const Ye=this.stride*Me;Pe.push(Ie[Ye+We]>1?et(Ie,Ye,this.clusterProps):this.points[Ie[Ye+He]])}return Pe}getChildren(te){const ie=this._getOriginId(te),de=this._getOriginZoom(te),Ce="No cluster with the specified id.",Ne=this.trees[de];if(!Ne)throw new Error(Ce);const ce=Ne.data;if(ie*this.stride>=ce.length)throw new Error(Ce);const rt=this.options.radius/(this.options.extent*Math.pow(2,de-1)),Ve=Ne.within(ce[ie*this.stride],ce[ie*this.stride+1],rt),Ie=[];for(const Pe of Ve){const Me=Pe*this.stride;ce[Me+4]===te&&Ie.push(ce[Me+We]>1?et(ce,Me,this.clusterProps):this.points[ce[Me+He]])}if(Ie.length===0)throw new Error(Ce);return Ie}getLeaves(te,ie,de){const Ce=[];return this._appendLeaves(Ce,te,ie=ie||10,de=de||0,0),Ce}getTile(te,ie,de){const Ce=this.trees[this._limitZoom(te)],Ne=Math.pow(2,te),{extent:ce,radius:rt}=this.options,Ve=rt/ce,Ie=(de-Ve)/Ne,Pe=(de+1+Ve)/Ne,Me={features:[]};return this._addTileFeatures(Ce.range((ie-Ve)/Ne,Ie,(ie+1+Ve)/Ne,Pe),Ce.data,ie,de,Ne,Me),ie===0&&this._addTileFeatures(Ce.range(1-Ve/Ne,Ie,1,Pe),Ce.data,Ne,de,Ne,Me),ie===Ne-1&&this._addTileFeatures(Ce.range(0,Ie,Ve/Ne,Pe),Ce.data,-1,de,Ne,Me),Me.features.length?Me:null}getClusterExpansionZoom(te){let ie=this._getOriginZoom(te)-1;for(;ie<=this.options.maxZoom;){const de=this.getChildren(te);if(ie++,de.length!==1)break;te=de[0].properties.cluster_id}return ie}_appendLeaves(te,ie,de,Ce,Ne){const ce=this.getChildren(ie);for(const rt of ce){const Ve=rt.properties;if(Ve&&Ve.cluster?Ne+Ve.point_count<=Ce?Ne+=Ve.point_count:Ne=this._appendLeaves(te,Ve.cluster_id,de,Ce,Ne):Ne<Ce?Ne++:te.push(rt),te.length===de)break}return Ne}_createTree(te){const ie=new g.aF(te.length/this.stride|0,this.options.nodeSize,Float32Array);for(let de=0;de<te.length;de+=this.stride)ie.add(te[de],te[de+1]);return ie.finish(),ie.data=te,ie}_addTileFeatures(te,ie,de,Ce,Ne,ce){for(const rt of te){const Ve=rt*this.stride,Ie=ie[Ve+We]>1;let Pe,Me,Ye;if(Ie)Pe=Qe(ie,Ve,this.clusterProps),Me=ie[Ve],Ye=ie[Ve+1];else{const Ot=this.points[ie[Ve+He]];Pe=Ot.properties;const[Xt,It]=Ot.geometry.coordinates;Me=Rt(Xt),Ye=we(It)}const xt={type:1,geometry:[[Math.round(this.options.extent*(Me*Ne-de)),Math.round(this.options.extent*(Ye*Ne-Ce))]],tags:Pe};let Mt;Mt=Ie||this.options.generateId?ie[Ve+He]:this.points[ie[Ve+He]].id,Mt!==void 0&&(xt.id=Mt),ce.features.push(xt)}}_limitZoom(te){return Math.max(this.options.minZoom,Math.min(Math.floor(+te),this.options.maxZoom+1))}_cluster(te,ie){const{radius:de,extent:Ce,reduce:Ne,minPoints:ce}=this.options,rt=de/(Ce*Math.pow(2,ie)),Ve=te.data,Ie=[],Pe=this.stride;for(let Me=0;Me<Ve.length;Me+=Pe){if(Ve[Me+2]<=ie)continue;Ve[Me+2]=ie;const Ye=Ve[Me],xt=Ve[Me+1],Mt=te.within(Ve[Me],Ve[Me+1],rt),Ot=Ve[Me+We];let Xt=Ot;for(const It of Mt){const qe=It*Pe;Ve[qe+2]>ie&&(Xt+=Ve[qe+We])}if(Xt>Ot&&Xt>=ce){let It,qe=Ye*Ot,dn=xt*Ot,cn=-1;const en=((Me/Pe|0)<<5)+(ie+1)+this.points.length;for(const Wt of Mt){const at=Wt*Pe;if(Ve[at+2]<=ie)continue;Ve[at+2]=ie;const Ht=Ve[at+We];qe+=Ve[at]*Ht,dn+=Ve[at+1]*Ht,Ve[at+4]=en,Ne&&(It||(It=this._map(Ve,Me,!0),cn=this.clusterProps.length,this.clusterProps.push(It)),Ne(It,this._map(Ve,at)))}Ve[Me+4]=en,Ie.push(qe/Xt,dn/Xt,1/0,en,-1,Xt),Ne&&Ie.push(cn)}else{for(let It=0;It<Pe;It++)Ie.push(Ve[Me+It]);if(Xt>1)for(const It of Mt){const qe=It*Pe;if(!(Ve[qe+2]<=ie)){Ve[qe+2]=ie;for(let dn=0;dn<Pe;dn++)Ie.push(Ve[qe+dn])}}}}return Ie}_getOriginId(te){return te-this.points.length>>5}_getOriginZoom(te){return(te-this.points.length)%32}_map(te,ie,de){if(te[ie+We]>1){const ce=this.clusterProps[te[ie+pt]];return de?Object.assign({},ce):ce}const Ce=this.points[te[ie+He]].properties,Ne=this.options.map(Ce);return de&&Ne===Ce?Object.assign({},Ne):Ne}}function et(Ge,te,ie){return{type:"Feature",id:Ge[te+He],properties:Qe(Ge,te,ie),geometry:{type:"Point",coordinates:[(de=Ge[te],360*(de-.5)),tt(Ge[te+1])]}};var de}function Qe(Ge,te,ie){const de=Ge[te+We],Ce=de>=1e4?`${Math.round(de/1e3)}k`:de>=1e3?Math.round(de/100)/10+"k":de,Ne=Ge[te+pt],ce=Ne===-1?{}:Object.assign({},ie[Ne]);return Object.assign(ce,{cluster:!0,cluster_id:Ge[te+He],point_count:de,point_count_abbreviated:Ce})}function Rt(Ge){return Ge/360+.5}function we(Ge){const te=Math.sin(Ge*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function tt(Ge){const te=(180-360*Ge)*Math.PI/180;return 360*Math.atan(Math.exp(te))/Math.PI-90}function _t(Ge,te,ie,de){let Ce=de;const Ne=te+(ie-te>>1);let ce,rt=ie-te;const Ve=Ge[te],Ie=Ge[te+1],Pe=Ge[ie],Me=Ge[ie+1];for(let Ye=te+3;Ye<ie;Ye+=3){const xt=Pt(Ge[Ye],Ge[Ye+1],Ve,Ie,Pe,Me);if(xt>Ce)ce=Ye,Ce=xt;else if(xt===Ce){const Mt=Math.abs(Ye-Ne);Mt<rt&&(ce=Ye,rt=Mt)}}Ce>de&&(ce-te>3&&_t(Ge,te,ce,de),Ge[ce+2]=Ce,ie-ce>3&&_t(Ge,ce,ie,de))}function Pt(Ge,te,ie,de,Ce,Ne){let ce=Ce-ie,rt=Ne-de;if(ce!==0||rt!==0){const Ve=((Ge-ie)*ce+(te-de)*rt)/(ce*ce+rt*rt);Ve>1?(ie=Ce,de=Ne):Ve>0&&(ie+=ce*Ve,de+=rt*Ve)}return ce=Ge-ie,rt=te-de,ce*ce+rt*rt}function At(Ge,te,ie,de){const Ce={id:Ge??null,type:te,geometry:ie,tags:de,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(te==="Point"||te==="MultiPoint"||te==="LineString")St(Ce,ie);else if(te==="Polygon")St(Ce,ie[0]);else if(te==="MultiLineString")for(const Ne of ie)St(Ce,Ne);else if(te==="MultiPolygon")for(const Ne of ie)St(Ce,Ne[0]);return Ce}function St(Ge,te){for(let ie=0;ie<te.length;ie+=3)Ge.minX=Math.min(Ge.minX,te[ie]),Ge.minY=Math.min(Ge.minY,te[ie+1]),Ge.maxX=Math.max(Ge.maxX,te[ie]),Ge.maxY=Math.max(Ge.maxY,te[ie+1])}function qt(Ge,te,ie,de){if(!te.geometry)return;const Ce=te.geometry.coordinates;if(Ce&&Ce.length===0)return;const Ne=te.geometry.type,ce=Math.pow(ie.tolerance/((1<<ie.maxZoom)*ie.extent),2);let rt=[],Ve=te.id;if(ie.promoteId?Ve=te.properties[ie.promoteId]:ie.generateId&&(Ve=de||0),Ne==="Point")Xe(Ce,rt);else if(Ne==="MultiPoint")for(const Ie of Ce)Xe(Ie,rt);else if(Ne==="LineString")mt(Ce,rt,ce,!1);else if(Ne==="MultiLineString"){if(ie.lineMetrics){for(const Ie of Ce)rt=[],mt(Ie,rt,ce,!1),Ge.push(At(Ve,"LineString",rt,te.properties));return}ft(Ce,rt,ce,!1)}else if(Ne==="Polygon")ft(Ce,rt,ce,!0);else{if(Ne!=="MultiPolygon"){if(Ne==="GeometryCollection"){for(const Ie of te.geometry.geometries)qt(Ge,{id:Ve,geometry:Ie,properties:te.properties},ie,de);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Ie of Ce){const Pe=[];ft(Ie,Pe,ce,!0),rt.push(Pe)}}Ge.push(At(Ve,Ne,rt,te.properties))}function Xe(Ge,te){te.push(Ke(Ge[0]),Je(Ge[1]),0)}function mt(Ge,te,ie,de){let Ce,Ne,ce=0;for(let Ve=0;Ve<Ge.length;Ve++){const Ie=Ke(Ge[Ve][0]),Pe=Je(Ge[Ve][1]);te.push(Ie,Pe,0),Ve>0&&(ce+=de?(Ce*Pe-Ie*Ne)/2:Math.sqrt(Math.pow(Ie-Ce,2)+Math.pow(Pe-Ne,2))),Ce=Ie,Ne=Pe}const rt=te.length-3;te[2]=1,_t(te,0,rt,ie),te[rt+2]=1,te.size=Math.abs(ce),te.start=0,te.end=te.size}function ft(Ge,te,ie,de){for(let Ce=0;Ce<Ge.length;Ce++){const Ne=[];mt(Ge[Ce],Ne,ie,de),te.push(Ne)}}function Ke(Ge){return Ge/360+.5}function Je(Ge){const te=Math.sin(Ge*Math.PI/180),ie=.5-.25*Math.log((1+te)/(1-te))/Math.PI;return ie<0?0:ie>1?1:ie}function Vt(Ge,te,ie,de,Ce,Ne,ce,rt){if(de/=te,Ne>=(ie/=te)&&ce<de)return Ge;if(ce<ie||Ne>=de)return null;const Ve=[];for(const Ie of Ge){const Pe=Ie.geometry;let Me=Ie.type;const Ye=Ce===0?Ie.minX:Ie.minY,xt=Ce===0?Ie.maxX:Ie.maxY;if(Ye>=ie&&xt<de){Ve.push(Ie);continue}if(xt<ie||Ye>=de)continue;let Mt=[];if(Me==="Point"||Me==="MultiPoint")$t(Pe,Mt,ie,de,Ce);else if(Me==="LineString")Kt(Pe,Mt,ie,de,Ce,!1,rt.lineMetrics);else if(Me==="MultiLineString")kt(Pe,Mt,ie,de,Ce,!1);else if(Me==="Polygon")kt(Pe,Mt,ie,de,Ce,!0);else if(Me==="MultiPolygon")for(const Ot of Pe){const Xt=[];kt(Ot,Xt,ie,de,Ce,!0),Xt.length&&Mt.push(Xt)}if(Mt.length){if(rt.lineMetrics&&Me==="LineString"){for(const Ot of Mt)Ve.push(At(Ie.id,Me,Ot,Ie.tags));continue}Me!=="LineString"&&Me!=="MultiLineString"||(Mt.length===1?(Me="LineString",Mt=Mt[0]):Me="MultiLineString"),Me!=="Point"&&Me!=="MultiPoint"||(Me=Mt.length===3?"Point":"MultiPoint"),Ve.push(At(Ie.id,Me,Mt,Ie.tags))}}return Ve.length?Ve:null}function $t(Ge,te,ie,de,Ce){for(let Ne=0;Ne<Ge.length;Ne+=3){const ce=Ge[Ne+Ce];ce>=ie&&ce<=de&&Qt(te,Ge[Ne],Ge[Ne+1],Ge[Ne+2])}}function Kt(Ge,te,ie,de,Ce,Ne,ce){let rt=Gt(Ge);const Ve=Ce===0?ln:Sn;let Ie,Pe,Me=Ge.start;for(let Xt=0;Xt<Ge.length-3;Xt+=3){const It=Ge[Xt],qe=Ge[Xt+1],dn=Ge[Xt+2],cn=Ge[Xt+3],en=Ge[Xt+4],Wt=Ce===0?It:qe,at=Ce===0?cn:en;let Ht=!1;ce&&(Ie=Math.sqrt(Math.pow(It-cn,2)+Math.pow(qe-en,2))),Wt<ie?at>ie&&(Pe=Ve(rt,It,qe,cn,en,ie),ce&&(rt.start=Me+Ie*Pe)):Wt>de?at<de&&(Pe=Ve(rt,It,qe,cn,en,de),ce&&(rt.start=Me+Ie*Pe)):Qt(rt,It,qe,dn),at<ie&&Wt>=ie&&(Pe=Ve(rt,It,qe,cn,en,ie),Ht=!0),at>de&&Wt<=de&&(Pe=Ve(rt,It,qe,cn,en,de),Ht=!0),!Ne&&Ht&&(ce&&(rt.end=Me+Ie*Pe),te.push(rt),rt=Gt(Ge)),ce&&(Me+=Ie)}let Ye=Ge.length-3;const xt=Ge[Ye],Mt=Ge[Ye+1],Ot=Ce===0?xt:Mt;Ot>=ie&&Ot<=de&&Qt(rt,xt,Mt,Ge[Ye+2]),Ye=rt.length-3,Ne&&Ye>=3&&(rt[Ye]!==rt[0]||rt[Ye+1]!==rt[1])&&Qt(rt,rt[0],rt[1],rt[2]),rt.length&&te.push(rt)}function Gt(Ge){const te=[];return te.size=Ge.size,te.start=Ge.start,te.end=Ge.end,te}function kt(Ge,te,ie,de,Ce,Ne){for(const ce of Ge)Kt(ce,te,ie,de,Ce,Ne,!1)}function Qt(Ge,te,ie,de){Ge.push(te,ie,de)}function ln(Ge,te,ie,de,Ce,Ne){const ce=(Ne-te)/(de-te);return Qt(Ge,Ne,ie+(Ce-ie)*ce,1),ce}function Sn(Ge,te,ie,de,Ce,Ne){const ce=(Ne-ie)/(Ce-ie);return Qt(Ge,te+(de-te)*ce,Ne,1),ce}function bn(Ge,te){const ie=[];for(let de=0;de<Ge.length;de++){const Ce=Ge[de],Ne=Ce.type;let ce;if(Ne==="Point"||Ne==="MultiPoint"||Ne==="LineString")ce=gn(Ce.geometry,te);else if(Ne==="MultiLineString"||Ne==="Polygon"){ce=[];for(const rt of Ce.geometry)ce.push(gn(rt,te))}else if(Ne==="MultiPolygon"){ce=[];for(const rt of Ce.geometry){const Ve=[];for(const Ie of rt)Ve.push(gn(Ie,te));ce.push(Ve)}}ie.push(At(Ce.id,Ne,ce,Ce.tags))}return ie}function gn(Ge,te){const ie=[];ie.size=Ge.size,Ge.start!==void 0&&(ie.start=Ge.start,ie.end=Ge.end);for(let de=0;de<Ge.length;de+=3)ie.push(Ge[de]+te,Ge[de+1],Ge[de+2]);return ie}function En(Ge,te){if(Ge.transformed)return Ge;const ie=1<<Ge.z,de=Ge.x,Ce=Ge.y;for(const Ne of Ge.features){const ce=Ne.geometry,rt=Ne.type;if(Ne.geometry=[],rt===1)for(let Ve=0;Ve<ce.length;Ve+=2)Ne.geometry.push(Ln(ce[Ve],ce[Ve+1],te,ie,de,Ce));else for(let Ve=0;Ve<ce.length;Ve++){const Ie=[];for(let Pe=0;Pe<ce[Ve].length;Pe+=2)Ie.push(Ln(ce[Ve][Pe],ce[Ve][Pe+1],te,ie,de,Ce));Ne.geometry.push(Ie)}}return Ge.transformed=!0,Ge}function Ln(Ge,te,ie,de,Ce,Ne){return[Math.round(ie*(Ge*de-Ce)),Math.round(ie*(te*de-Ne))]}function Pn(Ge,te,ie,de,Ce){const Ne=te===Ce.maxZoom?0:Ce.tolerance/((1<<te)*Ce.extent),ce={features:[],numPoints:0,numSimplified:0,numFeatures:Ge.length,source:null,x:ie,y:de,z:te,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const rt of Ge)Hn(ce,rt,Ne,Ce);return ce}function Hn(Ge,te,ie,de){const Ce=te.geometry,Ne=te.type,ce=[];if(Ge.minX=Math.min(Ge.minX,te.minX),Ge.minY=Math.min(Ge.minY,te.minY),Ge.maxX=Math.max(Ge.maxX,te.maxX),Ge.maxY=Math.max(Ge.maxY,te.maxY),Ne==="Point"||Ne==="MultiPoint")for(let rt=0;rt<Ce.length;rt+=3)ce.push(Ce[rt],Ce[rt+1]),Ge.numPoints++,Ge.numSimplified++;else if(Ne==="LineString")or(ce,Ce,Ge,ie,!1,!1);else if(Ne==="MultiLineString"||Ne==="Polygon")for(let rt=0;rt<Ce.length;rt++)or(ce,Ce[rt],Ge,ie,Ne==="Polygon",rt===0);else if(Ne==="MultiPolygon")for(let rt=0;rt<Ce.length;rt++){const Ve=Ce[rt];for(let Ie=0;Ie<Ve.length;Ie++)or(ce,Ve[Ie],Ge,ie,!0,Ie===0)}if(ce.length){let rt=te.tags||null;if(Ne==="LineString"&&de.lineMetrics){rt={};for(const Ie in te.tags)rt[Ie]=te.tags[Ie];rt.mapbox_clip_start=Ce.start/Ce.size,rt.mapbox_clip_end=Ce.end/Ce.size}const Ve={geometry:ce,type:Ne==="Polygon"||Ne==="MultiPolygon"?3:Ne==="LineString"||Ne==="MultiLineString"?2:1,tags:rt};te.id!==null&&(Ve.id=te.id),Ge.features.push(Ve)}}function or(Ge,te,ie,de,Ce,Ne){const ce=de*de;if(de>0&&te.size<(Ce?ce:de))return void(ie.numPoints+=te.length/3);const rt=[];for(let Ve=0;Ve<te.length;Ve+=3)(de===0||te[Ve+2]>ce)&&(ie.numSimplified++,rt.push(te[Ve],te[Ve+1])),ie.numPoints++;Ce&&function(Ve,Ie){let Pe=0;for(let Me=0,Ye=Ve.length,xt=Ye-2;Me<Ye;xt=Me,Me+=2)Pe+=(Ve[Me]-Ve[xt])*(Ve[Me+1]+Ve[xt+1]);if(Pe>0===Ie)for(let Me=0,Ye=Ve.length;Me<Ye/2;Me+=2){const xt=Ve[Me],Mt=Ve[Me+1];Ve[Me]=Ve[Ye-2-Me],Ve[Me+1]=Ve[Ye-1-Me],Ve[Ye-2-Me]=xt,Ve[Ye-1-Me]=Mt}}(rt,Ne),Ge.push(rt)}const dr={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class sr{constructor(te,ie){const de=(ie=this.options=function(Ne,ce){for(const rt in ce)Ne[rt]=ce[rt];return Ne}(Object.create(dr),ie)).debug;if(de&&console.time("preprocess data"),ie.maxZoom<0||ie.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ie.promoteId&&ie.generateId)throw new Error("promoteId and generateId cannot be used together.");let Ce=function(Ne,ce){const rt=[];if(Ne.type==="FeatureCollection")for(let Ve=0;Ve<Ne.features.length;Ve++)qt(rt,Ne.features[Ve],ce,Ve);else qt(rt,Ne.type==="Feature"?Ne:{geometry:Ne},ce);return rt}(te,ie);this.tiles={},this.tileCoords=[],de&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ie.indexMaxZoom,ie.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Ce=function(Ne,ce){const rt=ce.buffer/ce.extent;let Ve=Ne;const Ie=Vt(Ne,1,-1-rt,rt,0,-1,2,ce),Pe=Vt(Ne,1,1-rt,2+rt,0,-1,2,ce);return(Ie||Pe)&&(Ve=Vt(Ne,1,-rt,1+rt,0,-1,2,ce)||[],Ie&&(Ve=bn(Ie,1).concat(Ve)),Pe&&(Ve=Ve.concat(bn(Pe,-1)))),Ve}(Ce,ie),Ce.length&&this.splitTile(Ce,0,0,0),de&&(Ce.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(te,ie,de,Ce,Ne,ce,rt){const Ve=[te,ie,de,Ce],Ie=this.options,Pe=Ie.debug;for(;Ve.length;){Ce=Ve.pop(),de=Ve.pop(),ie=Ve.pop(),te=Ve.pop();const Me=1<<ie,Ye=Gn(ie,de,Ce);let xt=this.tiles[Ye];if(!xt&&(Pe>1&&console.time("creation"),xt=this.tiles[Ye]=Pn(te,ie,de,Ce,Ie),this.tileCoords.push({z:ie,x:de,y:Ce}),Pe)){Pe>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ie,de,Ce,xt.numFeatures,xt.numPoints,xt.numSimplified),console.timeEnd("creation"));const Ht=`z${ie}`;this.stats[Ht]=(this.stats[Ht]||0)+1,this.total++}if(xt.source=te,Ne==null){if(ie===Ie.indexMaxZoom||xt.numPoints<=Ie.indexMaxPoints)continue}else{if(ie===Ie.maxZoom||ie===Ne)continue;if(Ne!=null){const Ht=Ne-ie;if(de!==ce>>Ht||Ce!==rt>>Ht)continue}}if(xt.source=null,te.length===0)continue;Pe>1&&console.time("clipping");const Mt=.5*Ie.buffer/Ie.extent,Ot=.5-Mt,Xt=.5+Mt,It=1+Mt;let qe=null,dn=null,cn=null,en=null,Wt=Vt(te,Me,de-Mt,de+Xt,0,xt.minX,xt.maxX,Ie),at=Vt(te,Me,de+Ot,de+It,0,xt.minX,xt.maxX,Ie);te=null,Wt&&(qe=Vt(Wt,Me,Ce-Mt,Ce+Xt,1,xt.minY,xt.maxY,Ie),dn=Vt(Wt,Me,Ce+Ot,Ce+It,1,xt.minY,xt.maxY,Ie),Wt=null),at&&(cn=Vt(at,Me,Ce-Mt,Ce+Xt,1,xt.minY,xt.maxY,Ie),en=Vt(at,Me,Ce+Ot,Ce+It,1,xt.minY,xt.maxY,Ie),at=null),Pe>1&&console.timeEnd("clipping"),Ve.push(qe||[],ie+1,2*de,2*Ce),Ve.push(dn||[],ie+1,2*de,2*Ce+1),Ve.push(cn||[],ie+1,2*de+1,2*Ce),Ve.push(en||[],ie+1,2*de+1,2*Ce+1)}}getTile(te,ie,de){te=+te,ie=+ie,de=+de;const Ce=this.options,{extent:Ne,debug:ce}=Ce;if(te<0||te>24)return null;const rt=1<<te,Ve=Gn(te,ie=ie+rt&rt-1,de);if(this.tiles[Ve])return En(this.tiles[Ve],Ne);ce>1&&console.log("drilling down to z%d-%d-%d",te,ie,de);let Ie,Pe=te,Me=ie,Ye=de;for(;!Ie&&Pe>0;)Pe--,Me>>=1,Ye>>=1,Ie=this.tiles[Gn(Pe,Me,Ye)];return Ie&&Ie.source?(ce>1&&(console.log("found parent tile z%d-%d-%d",Pe,Me,Ye),console.time("drilling down")),this.splitTile(Ie.source,Pe,Me,Ye,te,ie,de),ce>1&&console.timeEnd("drilling down"),this.tiles[Ve]?En(this.tiles[Ve],Ne):null):null}}function Gn(Ge,te,ie){return 32*((1<<Ge)*ie+te)+Ge}function pr(Ge,te){return te?Ge.properties[te]:Ge.id}function Jn(Ge,te){if(Ge==null)return!0;if(Ge.type==="Feature")return pr(Ge,te)!=null;if(Ge.type==="FeatureCollection"){const ie=new Set;for(const de of Ge.features){const Ce=pr(de,te);if(Ce==null||ie.has(Ce))return!1;ie.add(Ce)}return!0}return!1}function br(Ge,te){const ie=new Map;if(Ge!=null)if(Ge.type==="Feature")ie.set(pr(Ge,te),Ge);else for(const de of Ge.features)ie.set(pr(de,te),de);return ie}class gr extends B{constructor(){super(...arguments),this._dataUpdateable=new Map}loadVectorTile(te,ie){return g._(this,void 0,void 0,function*(){const de=te.tileID.canonical;if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const Ce=this._geoJSONIndex.getTile(de.z,de.x,de.y);if(!Ce)return null;const Ne=new pe(Ce.features);let ce=Le(Ne);return ce.byteOffset===0&&ce.byteLength===ce.buffer.byteLength||(ce=new Uint8Array(ce)),{vectorTile:Ne,rawData:ce.buffer}})}loadData(te){return g._(this,void 0,void 0,function*(){var ie;(ie=this._pendingRequest)===null||ie===void 0||ie.abort();const de=!!(te&&te.request&&te.request.collectResourceTiming)&&new g.cE(te.request);this._pendingRequest=new AbortController;try{this._pendingData=this.loadAndProcessGeoJSON(te,this._pendingRequest),this._geoJSONIndex=te.cluster?new xe(function({superclusterOptions:ce,clusterProperties:rt}){if(!rt||!ce)return ce;const Ve={},Ie={},Pe={accumulated:null,zoom:0},Me={properties:null},Ye=Object.keys(rt);for(const xt of Ye){const[Mt,Ot]=rt[xt],Xt=g.cL(Ot),It=g.cL(typeof Mt=="string"?[Mt,["accumulated"],["get",xt]]:Mt);Ve[xt]=Xt.value,Ie[xt]=It.value}return ce.map=xt=>{Me.properties=xt;const Mt={};for(const Ot of Ye)Mt[Ot]=Ve[Ot].evaluate(Pe,Me);return Mt},ce.reduce=(xt,Mt)=>{Me.properties=Mt;for(const Ot of Ye)Pe.accumulated=xt[Ot],xt[Ot]=Ie[Ot].evaluate(Pe,Me)},ce}(te)).load((yield this._pendingData).features):(Ce=yield this._pendingData,new sr(Ce,te.geojsonVtOptions)),this.loaded={};const Ne={};if(de){const ce=de.finish();ce&&(Ne.resourceTiming={},Ne.resourceTiming[te.source]=JSON.parse(JSON.stringify(ce)))}return Ne}catch(Ne){if(delete this._pendingRequest,g.cp(Ne))return{abandoned:!0};throw Ne}var Ce})}getData(){return g._(this,void 0,void 0,function*(){return this._pendingData})}reloadTile(te){const ie=this.loaded;return ie&&ie[te.uid]?super.reloadTile(te):this.loadTile(te)}loadAndProcessGeoJSON(te,ie){return g._(this,void 0,void 0,function*(){let de=yield this.loadGeoJSON(te,ie);if(delete this._pendingRequest,typeof de!="object")throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(G(de,!0),te.filter){const Ce=g.cL(te.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Ce.result==="error")throw new Error(Ce.value.map(ce=>`${ce.key}: ${ce.message}`).join(", "));de={type:"FeatureCollection",features:de.features.filter(ce=>Ce.value.evaluate({zoom:0},ce))}}return de})}loadGeoJSON(te,ie){return g._(this,void 0,void 0,function*(){const{promoteId:de}=te;if(te.request){const Ce=yield g.j(te.request,ie);return this._dataUpdateable=Jn(Ce.data,de)?br(Ce.data,de):void 0,Ce.data}if(typeof te.data=="string")try{const Ce=JSON.parse(te.data);return this._dataUpdateable=Jn(Ce,de)?br(Ce,de):void 0,Ce}catch{throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`)}if(!te.dataDiff)throw new Error(`Input data given to '${te.source}' is not a valid GeoJSON object.`);if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${te.source}`);return function(Ce,Ne,ce){var rt,Ve,Ie,Pe;if(Ne.removeAll&&Ce.clear(),Ne.remove)for(const Me of Ne.remove)Ce.delete(Me);if(Ne.add)for(const Me of Ne.add){const Ye=pr(Me,ce);Ye!=null&&Ce.set(Ye,Me)}if(Ne.update)for(const Me of Ne.update){let Ye=Ce.get(Me.id);if(Ye==null)continue;const xt=!Me.removeAllProperties&&(((rt=Me.removeProperties)===null||rt===void 0?void 0:rt.length)>0||((Ve=Me.addOrUpdateProperties)===null||Ve===void 0?void 0:Ve.length)>0);if((Me.newGeometry||Me.removeAllProperties||xt)&&(Ye=Object.assign({},Ye),Ce.set(Me.id,Ye),xt&&(Ye.properties=Object.assign({},Ye.properties))),Me.newGeometry&&(Ye.geometry=Me.newGeometry),Me.removeAllProperties)Ye.properties={};else if(((Ie=Me.removeProperties)===null||Ie===void 0?void 0:Ie.length)>0)for(const Mt of Me.removeProperties)Object.prototype.hasOwnProperty.call(Ye.properties,Mt)&&delete Ye.properties[Mt];if(((Pe=Me.addOrUpdateProperties)===null||Pe===void 0?void 0:Pe.length)>0)for(const{key:Mt,value:Ot}of Me.addOrUpdateProperties)Ye.properties[Mt]=Ot}}(this._dataUpdateable,te.dataDiff,de),{type:"FeatureCollection",features:Array.from(this._dataUpdateable.values())}})}removeSource(te){return g._(this,void 0,void 0,function*(){this._pendingRequest&&this._pendingRequest.abort()})}getClusterExpansionZoom(te){return this._geoJSONIndex.getClusterExpansionZoom(te.clusterId)}getClusterChildren(te){return this._geoJSONIndex.getChildren(te.clusterId)}getClusterLeaves(te){return this._geoJSONIndex.getLeaves(te.clusterId,te.limit,te.offset)}}class Lr{constructor(te){this.self=te,this.actor=new g.H(te),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.self.registerWorkerSource=(ie,de)=>{if(this.externalWorkerSourceTypes[ie])throw new Error(`Worker source with name "${ie}" already registered.`);this.externalWorkerSourceTypes[ie]=de},this.self.addProtocol=g.cr,this.self.removeProtocol=g.cs,this.self.registerRTLTextPlugin=ie=>{g.cM.setMethods(ie)},this.actor.registerMessageHandler("LDT",(ie,de)=>this._getDEMWorkerSource(ie,de.source).loadTile(de)),this.actor.registerMessageHandler("RDT",(ie,de)=>g._(this,void 0,void 0,function*(){this._getDEMWorkerSource(ie,de.source).removeTile(de)})),this.actor.registerMessageHandler("GCEZ",(ie,de)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,de.type,de.source).getClusterExpansionZoom(de)})),this.actor.registerMessageHandler("GCC",(ie,de)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,de.type,de.source).getClusterChildren(de)})),this.actor.registerMessageHandler("GCL",(ie,de)=>g._(this,void 0,void 0,function*(){return this._getWorkerSource(ie,de.type,de.source).getClusterLeaves(de)})),this.actor.registerMessageHandler("LD",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).loadData(de)),this.actor.registerMessageHandler("GD",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).getData()),this.actor.registerMessageHandler("LT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).loadTile(de)),this.actor.registerMessageHandler("RT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).reloadTile(de)),this.actor.registerMessageHandler("AT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).abortTile(de)),this.actor.registerMessageHandler("RMT",(ie,de)=>this._getWorkerSource(ie,de.type,de.source).removeTile(de)),this.actor.registerMessageHandler("RS",(ie,de)=>g._(this,void 0,void 0,function*(){if(!this.workerSources[ie]||!this.workerSources[ie][de.type]||!this.workerSources[ie][de.type][de.source])return;const Ce=this.workerSources[ie][de.type][de.source];delete this.workerSources[ie][de.type][de.source],Ce.removeSource!==void 0&&Ce.removeSource(de)})),this.actor.registerMessageHandler("RM",ie=>g._(this,void 0,void 0,function*(){delete this.layerIndexes[ie],delete this.availableImages[ie],delete this.workerSources[ie],delete this.demWorkerSources[ie]})),this.actor.registerMessageHandler("SR",(ie,de)=>g._(this,void 0,void 0,function*(){this.referrer=de})),this.actor.registerMessageHandler("SRPS",(ie,de)=>this._syncRTLPluginState(ie,de)),this.actor.registerMessageHandler("IS",(ie,de)=>g._(this,void 0,void 0,function*(){this.self.importScripts(de)})),this.actor.registerMessageHandler("SI",(ie,de)=>this._setImages(ie,de)),this.actor.registerMessageHandler("UL",(ie,de)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(ie).update(de.layers,de.removedIds)})),this.actor.registerMessageHandler("SL",(ie,de)=>g._(this,void 0,void 0,function*(){this._getLayerIndex(ie).replace(de)}))}_setImages(te,ie){return g._(this,void 0,void 0,function*(){this.availableImages[te]=ie;for(const de in this.workerSources[te]){const Ce=this.workerSources[te][de];for(const Ne in Ce)Ce[Ne].availableImages=ie}})}_syncRTLPluginState(te,ie){return g._(this,void 0,void 0,function*(){return yield g.cM.syncState(ie,this.self.importScripts)})}_getAvailableImages(te){let ie=this.availableImages[te];return ie||(ie=[]),ie}_getLayerIndex(te){let ie=this.layerIndexes[te];return ie||(ie=this.layerIndexes[te]=new u),ie}_getWorkerSource(te,ie,de){if(this.workerSources[te]||(this.workerSources[te]={}),this.workerSources[te][ie]||(this.workerSources[te][ie]={}),!this.workerSources[te][ie][de]){const Ce={sendAsync:(Ne,ce)=>(Ne.targetMapId=te,this.actor.sendAsync(Ne,ce))};switch(ie){case"vector":this.workerSources[te][ie][de]=new B(Ce,this._getLayerIndex(te),this._getAvailableImages(te));break;case"geojson":this.workerSources[te][ie][de]=new gr(Ce,this._getLayerIndex(te),this._getAvailableImages(te));break;default:this.workerSources[te][ie][de]=new this.externalWorkerSourceTypes[ie](Ce,this._getLayerIndex(te),this._getAvailableImages(te))}}return this.workerSources[te][ie][de]}_getDEMWorkerSource(te,ie){return this.demWorkerSources[te]||(this.demWorkerSources[te]={}),this.demWorkerSources[te][ie]||(this.demWorkerSources[te][ie]=new j),this.demWorkerSources[te][ie]}}return g.i(self)&&(self.worker=new Lr(self)),Lr}),f("index",["exports","./shared"],function(g,u){var E="5.5.0";function P(){var b=new u.A(4);return u.A!=Float32Array&&(b[1]=0,b[2]=0),b[0]=1,b[3]=1,b}let I,B;const j={now:typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),frame(b,n,s){const p=requestAnimationFrame(w=>{y(),n(w)}),{unsubscribe:y}=u.s(b.signal,"abort",()=>{y(),cancelAnimationFrame(p),s(u.c())},!1)},frameAsync(b){return new Promise((n,s)=>{this.frame(b,n,s)})},getImageData(b,n=0){return this.getImageCanvasContext(b).getImageData(-n,-n,b.width+2*n,b.height+2*n)},getImageCanvasContext(b){const n=window.document.createElement("canvas"),s=n.getContext("2d",{willReadFrequently:!0});if(!s)throw new Error("failed to create canvas 2d context");return n.width=b.width,n.height=b.height,s.drawImage(b,0,0,b.width,b.height),s},resolveURL:b=>(I||(I=document.createElement("a")),I.href=b,I.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return!!matchMedia&&(B==null&&(B=matchMedia("(prefers-reduced-motion: reduce)")),B.matches)}};class ${static testProp(n){if(!$.docStyle)return n[0];for(let s=0;s<n.length;s++)if(n[s]in $.docStyle)return n[s];return n[0]}static create(n,s,p){const y=window.document.createElement(n);return s!==void 0&&(y.className=s),p&&p.appendChild(y),y}static createNS(n,s){return window.document.createElementNS(n,s)}static disableDrag(){$.docStyle&&$.selectProp&&($.userSelect=$.docStyle[$.selectProp],$.docStyle[$.selectProp]="none")}static enableDrag(){$.docStyle&&$.selectProp&&($.docStyle[$.selectProp]=$.userSelect)}static setTransform(n,s){n.style[$.transformProp]=s}static addEventListener(n,s,p,y={}){n.addEventListener(s,p,"passive"in y?y:y.capture)}static removeEventListener(n,s,p,y={}){n.removeEventListener(s,p,"passive"in y?y:y.capture)}static suppressClickInternal(n){n.preventDefault(),n.stopPropagation(),window.removeEventListener("click",$.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",$.suppressClickInternal,!0),window.setTimeout(()=>{window.removeEventListener("click",$.suppressClickInternal,!0)},0)}static getScale(n){const s=n.getBoundingClientRect();return{x:s.width/n.offsetWidth||1,y:s.height/n.offsetHeight||1,boundingClientRect:s}}static getPoint(n,s,p){const y=s.boundingClientRect;return new u.P((p.clientX-y.left)/s.x-n.clientLeft,(p.clientY-y.top)/s.y-n.clientTop)}static mousePos(n,s){const p=$.getScale(n);return $.getPoint(n,p,s)}static touchPos(n,s){const p=[],y=$.getScale(n);for(let w=0;w<s.length;w++)p.push($.getPoint(n,y,s[w]));return p}static mouseButton(n){return n.button}static remove(n){n.parentNode&&n.parentNode.removeChild(n)}static sanitize(n){const s=new DOMParser().parseFromString(n,"text/html").body||document.createElement("body"),p=s.querySelectorAll("script");for(const y of p)y.remove();return $.clean(s),s.innerHTML}static isPossiblyDangerous(n,s){const p=s.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(n)||!p.includes("javascript:")&&!p.includes("data:"))||!!n.startsWith("on")||void 0}static clean(n){const s=n.children;for(const p of s)$.removeAttributes(p),$.clean(p)}static removeAttributes(n){for(const{name:s,value:p}of n.attributes)$.isPossiblyDangerous(s,p)&&n.removeAttribute(s)}}$.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,$.selectProp=$.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),$.transformProp=$.testProp(["transform","WebkitTransform"]);const X={supported:!1,testSupport:function(b){!le&&G&&(oe?pe(b):J=b)}};let J,G,le=!1,oe=!1;function pe(b){const n=b.createTexture();b.bindTexture(b.TEXTURE_2D,n);try{if(b.texImage2D(b.TEXTURE_2D,0,b.RGBA,b.RGBA,b.UNSIGNED_BYTE,G),b.isContextLost())return;X.supported=!0}catch{}b.deleteTexture(n),le=!0}var he;typeof document<"u"&&(G=document.createElement("img"),G.onload=()=>{J&&pe(J),J=null,oe=!0},G.onerror=()=>{le=!0,J=null},G.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),function(b){let n,s,p,y;b.resetRequestQueue=()=>{n=[],s=0,p=0,y={}},b.addThrottleControl=k=>{const L=p++;return y[L]=k,L},b.removeThrottleControl=k=>{delete y[k],T()},b.getImage=(k,L,F=!0)=>new Promise((q,H)=>{X.supported&&(k.headers||(k.headers={}),k.headers.accept="image/webp,*/*"),u.e(k,{type:"image"}),n.push({abortController:L,requestParameters:k,supportImageRefresh:F,state:"queued",onError:ee=>{H(ee)},onSuccess:ee=>{q(ee)}}),T()});const w=k=>u._(this,void 0,void 0,function*(){k.state="running";const{requestParameters:L,supportImageRefresh:F,onError:q,onSuccess:H,abortController:ee}=k,ne=F===!1&&!u.i(self)&&!u.g(L.url)&&(!L.headers||Object.keys(L.headers).reduce((_e,Ee)=>_e&&Ee==="accept",!0));s++;const ye=ne?R(L,ee):u.m(L,ee);try{const _e=yield ye;delete k.abortController,k.state="completed",_e.data instanceof HTMLImageElement||u.b(_e.data)?H(_e):_e.data&&H({data:yield(ge=_e.data,typeof createImageBitmap=="function"?u.f(ge):u.h(ge)),cacheControl:_e.cacheControl,expires:_e.expires})}catch(_e){delete k.abortController,q(_e)}finally{s--,T()}var ge}),T=()=>{const k=(()=>{for(const L of Object.keys(y))if(y[L]())return!0;return!1})()?u.a.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:u.a.MAX_PARALLEL_IMAGE_REQUESTS;for(let L=s;L<k&&n.length>0;L++){const F=n.shift();F.abortController.signal.aborted?L--:w(F)}},R=(k,L)=>new Promise((F,q)=>{const H=new Image,ee=k.url,ne=k.credentials;ne&&ne==="include"?H.crossOrigin="use-credentials":(ne&&ne==="same-origin"||!u.d(ee))&&(H.crossOrigin="anonymous"),L.signal.addEventListener("abort",()=>{H.src="",q(u.c())}),H.fetchPriority="high",H.onload=()=>{H.onerror=H.onload=null,F({data:H})},H.onerror=()=>{H.onerror=H.onload=null,L.signal.aborted||q(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},H.src=ee})}(he||(he={})),he.resetRequestQueue();class ae{constructor(n){this._transformRequestFn=n}transformRequest(n,s){return this._transformRequestFn&&this._transformRequestFn(n,s)||{url:n}}setTransformRequest(n){this._transformRequestFn=n}}function ve(b){const n=[];if(typeof b=="string")n.push({id:"default",url:b});else if(b&&b.length>0){const s=[];for(const{id:p,url:y}of b){const w=`${p}${y}`;s.indexOf(w)===-1&&(s.push(w),n.push({id:p,url:y}))}}return n}function Se(b,n,s){try{const p=new URL(b);return p.pathname+=`${n}${s}`,p.toString()}catch{throw new Error(`Invalid sprite URL "${b}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}class ke{constructor(n,s,p,y){this.context=n,this.format=p,this.texture=n.gl.createTexture(),this.update(s,y)}update(n,s,p){const{width:y,height:w}=n,T=!(this.size&&this.size[0]===y&&this.size[1]===w||p),{context:R}=this,{gl:k}=R;if(this.useMipmap=!!(s&&s.useMipmap),k.bindTexture(k.TEXTURE_2D,this.texture),R.pixelStoreUnpackFlipY.set(!1),R.pixelStoreUnpack.set(1),R.pixelStoreUnpackPremultiplyAlpha.set(this.format===k.RGBA&&(!s||s.premultiply!==!1)),T)this.size=[y,w],n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?k.texImage2D(k.TEXTURE_2D,0,this.format,this.format,k.UNSIGNED_BYTE,n):k.texImage2D(k.TEXTURE_2D,0,this.format,y,w,0,this.format,k.UNSIGNED_BYTE,n.data);else{const{x:L,y:F}=p||{x:0,y:0};n instanceof HTMLImageElement||n instanceof HTMLCanvasElement||n instanceof HTMLVideoElement||n instanceof ImageData||u.b(n)?k.texSubImage2D(k.TEXTURE_2D,0,L,F,k.RGBA,k.UNSIGNED_BYTE,n):k.texSubImage2D(k.TEXTURE_2D,0,L,F,y,w,k.RGBA,k.UNSIGNED_BYTE,n.data)}this.useMipmap&&this.isSizePowerOfTwo()&&k.generateMipmap(k.TEXTURE_2D),R.pixelStoreUnpackFlipY.setDefault(),R.pixelStoreUnpack.setDefault(),R.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(n,s,p){const{context:y}=this,{gl:w}=y;w.bindTexture(w.TEXTURE_2D,this.texture),p!==w.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=w.LINEAR),n!==this.filter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,n),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,p||n),this.filter=n),s!==this.wrap&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,s),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}function Le(b){const{userImage:n}=b;return!!(n&&n.render&&n.render())&&(b.data.replace(new Uint8Array(n.data.buffer)),!0)}class Re extends u.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new u.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(n){if(this.loaded!==n&&(this.loaded=n,n)){for(const{ids:s,promiseResolve:p}of this.requestors)p(this._getImagesForIds(s));this.requestors=[]}}getImage(n){const s=this.images[n];if(s&&!s.data&&s.spriteData){const p=s.spriteData;s.data=new u.R({width:p.width,height:p.height},p.context.getImageData(p.x,p.y,p.width,p.height).data),s.spriteData=null}return s}addImage(n,s){if(this.images[n])throw new Error(`Image id ${n} already exist, use updateImage instead`);this._validate(n,s)&&(this.images[n]=s)}_validate(n,s){let p=!0;const y=s.data||s.spriteData;return this._validateStretch(s.stretchX,y&&y.width)||(this.fire(new u.k(new Error(`Image "${n}" has invalid "stretchX" value`))),p=!1),this._validateStretch(s.stretchY,y&&y.height)||(this.fire(new u.k(new Error(`Image "${n}" has invalid "stretchY" value`))),p=!1),this._validateContent(s.content,s)||(this.fire(new u.k(new Error(`Image "${n}" has invalid "content" value`))),p=!1),p}_validateStretch(n,s){if(!n)return!0;let p=0;for(const y of n){if(y[0]<p||y[1]<y[0]||s<y[1])return!1;p=y[1]}return!0}_validateContent(n,s){if(!n)return!0;if(n.length!==4)return!1;const p=s.spriteData,y=p&&p.width||s.data.width,w=p&&p.height||s.data.height;return!(n[0]<0||y<n[0]||n[1]<0||w<n[1]||n[2]<0||y<n[2]||n[3]<0||w<n[3]||n[2]<n[0]||n[3]<n[1])}updateImage(n,s,p=!0){const y=this.getImage(n);if(p&&(y.data.width!==s.data.width||y.data.height!==s.data.height))throw new Error(`size mismatch between old image (${y.data.width}x${y.data.height}) and new image (${s.data.width}x${s.data.height}).`);s.version=y.version+1,this.images[n]=s,this.updatedImages[n]=!0}removeImage(n){const s=this.images[n];delete this.images[n],delete this.patterns[n],s.userImage&&s.userImage.onRemove&&s.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(n){return new Promise((s,p)=>{let y=!0;if(!this.isLoaded())for(const w of n)this.images[w]||(y=!1);this.isLoaded()||y?s(this._getImagesForIds(n)):this.requestors.push({ids:n,promiseResolve:s})})}_getImagesForIds(n){const s={};for(const p of n){let y=this.getImage(p);y||(this.fire(new u.l("styleimagemissing",{id:p})),y=this.getImage(p)),y?s[p]={data:y.data.clone(),pixelRatio:y.pixelRatio,sdf:y.sdf,version:y.version,stretchX:y.stretchX,stretchY:y.stretchY,content:y.content,textFitWidth:y.textFitWidth,textFitHeight:y.textFitHeight,hasRenderCallback:!!(y.userImage&&y.userImage.render)}:u.w(`Image "${p}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return s}getPixelSize(){const{width:n,height:s}=this.atlasImage;return{width:n,height:s}}getPattern(n){const s=this.patterns[n],p=this.getImage(n);if(!p)return null;if(s&&s.position.version===p.version)return s.position;if(s)s.position.version=p.version;else{const y={w:p.data.width+2,h:p.data.height+2,x:0,y:0},w=new u.I(y,p);this.patterns[n]={bin:y,position:w}}return this._updatePatternAtlas(),this.patterns[n].position}bind(n){const s=n.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new ke(n,this.atlasImage,s.RGBA),this.atlasTexture.bind(s.LINEAR,s.CLAMP_TO_EDGE)}_updatePatternAtlas(){const n=[];for(const w in this.patterns)n.push(this.patterns[w].bin);const{w:s,h:p}=u.p(n),y=this.atlasImage;y.resize({width:s||1,height:p||1});for(const w in this.patterns){const{bin:T}=this.patterns[w],R=T.x+1,k=T.y+1,L=this.getImage(w).data,F=L.width,q=L.height;u.R.copy(L,y,{x:0,y:0},{x:R,y:k},{width:F,height:q}),u.R.copy(L,y,{x:0,y:q-1},{x:R,y:k-1},{width:F,height:1}),u.R.copy(L,y,{x:0,y:0},{x:R,y:k+q},{width:F,height:1}),u.R.copy(L,y,{x:F-1,y:0},{x:R-1,y:k},{width:1,height:q}),u.R.copy(L,y,{x:0,y:0},{x:R+F,y:k},{width:1,height:q})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(n){for(const s of n){if(this.callbackDispatchedThisFrame[s])continue;this.callbackDispatchedThisFrame[s]=!0;const p=this.getImage(s);p||u.w(`Image with ID: "${s}" was not found`),Le(p)&&this.updateImage(s,p)}}}const me=1e20;function Ae(b,n,s,p,y,w,T,R,k){for(let L=n;L<n+p;L++)He(b,s*w+L,w,y,T,R,k);for(let L=s;L<s+y;L++)He(b,L*w+n,1,p,T,R,k)}function He(b,n,s,p,y,w,T){w[0]=0,T[0]=-1e20,T[1]=me,y[0]=b[n];for(let R=1,k=0,L=0;R<p;R++){y[R]=b[n+R*s];const F=R*R;do{const q=w[k];L=(y[R]-y[q]+F-q*q)/(R-q)/2}while(L<=T[k]&&--k>-1);k++,w[k]=R,T[k]=L,T[k+1]=me}for(let R=0,k=0;R<p;R++){for(;T[k+1]<R;)k++;const L=w[k],F=R-L;b[n+R*s]=y[L]+F*F}}class We{constructor(n,s){this.requestManager=n,this.localIdeographFontFamily=s,this.entries={}}setURL(n){this.url=n}getGlyphs(n){return u._(this,void 0,void 0,function*(){const s=[];for(const w in n)for(const T of n[w])s.push(this._getAndCacheGlyphsPromise(w,T));const p=yield Promise.all(s),y={};for(const{stack:w,id:T,glyph:R}of p)y[w]||(y[w]={}),y[w][T]=R&&{id:R.id,bitmap:R.bitmap.clone(),metrics:R.metrics};return y})}_getAndCacheGlyphsPromise(n,s){return u._(this,void 0,void 0,function*(){let p=this.entries[n];p||(p=this.entries[n]={glyphs:{},requests:{},ranges:{}});let y=p.glyphs[s];if(y!==void 0)return{stack:n,id:s,glyph:y};if(y=this._tinySDF(p,n,s),y)return p.glyphs[s]=y,{stack:n,id:s,glyph:y};const w=Math.floor(s/256);if(256*w>65535)throw new Error("glyphs > 65535 not supported");if(p.ranges[w])return{stack:n,id:s,glyph:y};if(!this.url)throw new Error("glyphsUrl is not set");if(!p.requests[w]){const R=We.loadGlyphRange(n,w,this.url,this.requestManager);p.requests[w]=R}const T=yield p.requests[w];for(const R in T)this._doesCharSupportLocalGlyph(+R)||(p.glyphs[+R]=T[+R]);return p.ranges[w]=!0,{stack:n,id:s,glyph:T[s]||null}})}_doesCharSupportLocalGlyph(n){return!!this.localIdeographFontFamily&&(new RegExp("\\p{Ideo}|\\p{sc=Hang}|\\p{sc=Hira}|\\p{sc=Kana}","u").test(String.fromCodePoint(n))||u.u["CJK Unified Ideographs"](n)||u.u["Hangul Syllables"](n)||u.u.Hiragana(n)||u.u.Katakana(n)||u.u["CJK Symbols and Punctuation"](n)||u.u["Halfwidth and Fullwidth Forms"](n))}_tinySDF(n,s,p){const y=this.localIdeographFontFamily;if(!y||!this._doesCharSupportLocalGlyph(p))return;let w=n.tinySDF;if(!w){let R="400";/bold/i.test(s)?R="900":/medium/i.test(s)?R="500":/light/i.test(s)&&(R="200"),w=n.tinySDF=new We.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:R})}const T=w.draw(String.fromCharCode(p));return{id:p,bitmap:new u.q({width:T.width||60,height:T.height||60},T.data),metrics:{width:T.glyphWidth/2||24,height:T.glyphHeight/2||24,left:T.glyphLeft/2+.5||0,top:T.glyphTop/2-27.5||-8,advance:T.glyphAdvance/2||24,isDoubleResolution:!0}}}}We.loadGlyphRange=function(b,n,s,p){return u._(this,void 0,void 0,function*(){const y=256*n,w=y+255,T=p.transformRequest(s.replace("{fontstack}",b).replace("{range}",`${y}-${w}`),"Glyphs"),R=yield u.n(T,new AbortController);if(!R||!R.data)throw new Error(`Could not load glyph range. range: ${n}, ${y}-${w}`);const k={};for(const L of u.o(R.data))k[L.id]=L;return k})},We.TinySDF=class{constructor({fontSize:b=24,buffer:n=3,radius:s=8,cutoff:p=.25,fontFamily:y="sans-serif",fontWeight:w="normal",fontStyle:T="normal"}={}){this.buffer=n,this.cutoff=p,this.radius=s;const R=this.size=b+4*n,k=this._createCanvas(R),L=this.ctx=k.getContext("2d",{willReadFrequently:!0});L.font=`${T} ${w} ${b}px ${y}`,L.textBaseline="alphabetic",L.textAlign="left",L.fillStyle="black",this.gridOuter=new Float64Array(R*R),this.gridInner=new Float64Array(R*R),this.f=new Float64Array(R),this.z=new Float64Array(R+1),this.v=new Uint16Array(R)}_createCanvas(b){const n=document.createElement("canvas");return n.width=n.height=b,n}draw(b){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:p,actualBoundingBoxLeft:y,actualBoundingBoxRight:w}=this.ctx.measureText(b),T=Math.ceil(s),R=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(w-y))),k=Math.min(this.size-this.buffer,T+Math.ceil(p)),L=R+2*this.buffer,F=k+2*this.buffer,q=Math.max(L*F,0),H=new Uint8ClampedArray(q),ee={data:H,width:L,height:F,glyphWidth:R,glyphHeight:k,glyphTop:T,glyphLeft:0,glyphAdvance:n};if(R===0||k===0)return ee;const{ctx:ne,buffer:ye,gridInner:ge,gridOuter:_e}=this;ne.clearRect(ye,ye,R,k),ne.fillText(b,ye,ye+T);const Ee=ne.getImageData(ye,ye,R,k);_e.fill(me,0,q),ge.fill(0,0,q);for(let De=0;De<k;De++)for(let ze=0;ze<R;ze++){const je=Ee.data[4*(De*R+ze)+3]/255;if(je===0)continue;const Ue=(De+ye)*L+ze+ye;if(je===1)_e[Ue]=0,ge[Ue]=me;else{const Fe=.5-je;_e[Ue]=Fe>0?Fe*Fe:0,ge[Ue]=Fe<0?Fe*Fe:0}}Ae(_e,0,0,L,F,L,this.f,this.v,this.z),Ae(ge,ye,ye,R,k,L,this.f,this.v,this.z);for(let De=0;De<q;De++){const ze=Math.sqrt(_e[De])-Math.sqrt(ge[De]);H[De]=Math.round(255-255*(ze/this.radius+this.cutoff))}return ee}};class pt{constructor(){this.specification=u.v.light.position}possiblyEvaluate(n,s){return u.z(n.expression.evaluate(s))}interpolate(n,s,p){return{x:u.B.number(n.x,s.x,p),y:u.B.number(n.y,s.y,p),z:u.B.number(n.z,s.z,p)}}}let xe;class et extends u.E{constructor(n){super(),xe=xe||new u.r({anchor:new u.D(u.v.light.anchor),position:new pt,color:new u.D(u.v.light.color),intensity:new u.D(u.v.light.intensity)}),this._transitionable=new u.T(xe),this.setLight(n),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(n,s={}){if(!this._validate(u.t,n,s))for(const p in n){const y=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,p){return(!p||p.validate!==!1)&&u.x(this,n.call(u.y,{value:s,style:{glyphs:!0,sprite:!0},styleSpec:u.v}))}}const Qe=new u.r({"sky-color":new u.D(u.v.sky["sky-color"]),"horizon-color":new u.D(u.v.sky["horizon-color"]),"fog-color":new u.D(u.v.sky["fog-color"]),"fog-ground-blend":new u.D(u.v.sky["fog-ground-blend"]),"horizon-fog-blend":new u.D(u.v.sky["horizon-fog-blend"]),"sky-horizon-blend":new u.D(u.v.sky["sky-horizon-blend"]),"atmosphere-blend":new u.D(u.v.sky["atmosphere-blend"])});class Rt extends u.E{constructor(n){super(),this._transitionable=new u.T(Qe),this.setSky(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0))}setSky(n,s={}){if(!this._validate(u.F,n,s)){n||(n={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const p in n){const y=n[p];p.endsWith("-transition")?this._transitionable.setTransition(p.slice(0,-11),y):this._transitionable.setValue(p,y)}}}getSky(){return this._transitionable.serialize()}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}_validate(n,s,p={}){return(p==null?void 0:p.validate)!==!1&&u.x(this,n.call(u.y,u.e({value:s,style:{glyphs:!0,sprite:!0},styleSpec:u.v})))}calculateFogBlendOpacity(n){return n<60?0:n<70?(n-60)/10:1}}class we{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(n,s){const p=n.join(",")+String(s);return this.dashEntry[p]||(this.dashEntry[p]=this.addDash(n,s)),this.dashEntry[p]}getDashRanges(n,s,p){const y=[];let w=n.length%2==1?-n[n.length-1]*p:0,T=n[0]*p,R=!0;y.push({left:w,right:T,isDash:R,zeroLength:n[0]===0});let k=n[0];for(let L=1;L<n.length;L++){R=!R;const F=n[L];w=k*p,k+=F,T=k*p,y.push({left:w,right:T,isDash:R,zeroLength:F===0})}return y}addRoundDash(n,s,p){const y=s/2;for(let w=-p;w<=p;w++){const T=this.width*(this.nextRow+p+w);let R=0,k=n[R];for(let L=0;L<this.width;L++){L/k.right>1&&(k=n[++R]);const F=Math.abs(L-k.left),q=Math.abs(L-k.right),H=Math.min(F,q);let ee;const ne=w/p*(y+1);if(k.isDash){const ye=y-Math.abs(ne);ee=Math.sqrt(H*H+ye*ye)}else ee=y-Math.sqrt(H*H+ne*ne);this.data[T+L]=Math.max(0,Math.min(255,ee+128))}}}addRegularDash(n){for(let R=n.length-1;R>=0;--R){const k=n[R],L=n[R+1];k.zeroLength?n.splice(R,1):L&&L.isDash===k.isDash&&(L.left=k.left,n.splice(R,1))}const s=n[0],p=n[n.length-1];s.isDash===p.isDash&&(s.left=p.left-this.width,p.right=s.right+this.width);const y=this.width*this.nextRow;let w=0,T=n[w];for(let R=0;R<this.width;R++){R/T.right>1&&(T=n[++w]);const k=Math.abs(R-T.left),L=Math.abs(R-T.right),F=Math.min(k,L);this.data[y+R]=Math.max(0,Math.min(255,(T.isDash?F:-F)+128))}}addDash(n,s){const p=s?7:0,y=2*p+1;if(this.nextRow+y>this.height)return u.w("LineAtlas out of space"),null;let w=0;for(let R=0;R<n.length;R++)w+=n[R];if(w!==0){const R=this.width/w,k=this.getDashRanges(n,this.width,R);s?this.addRoundDash(k,R,p):this.addRegularDash(k)}const T={y:(this.nextRow+p+.5)/this.height,height:2*p/this.height,width:w};return this.nextRow+=y,this.dirty=!0,T}bind(n){const s=n.gl;this.texture?(s.bindTexture(s.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,s.texSubImage2D(s.TEXTURE_2D,0,0,0,this.width,this.height,s.ALPHA,s.UNSIGNED_BYTE,this.data))):(this.texture=s.createTexture(),s.bindTexture(s.TEXTURE_2D,this.texture),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_S,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_WRAP_T,s.REPEAT),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MIN_FILTER,s.LINEAR),s.texParameteri(s.TEXTURE_2D,s.TEXTURE_MAG_FILTER,s.LINEAR),s.texImage2D(s.TEXTURE_2D,0,s.ALPHA,this.width,this.height,0,s.ALPHA,s.UNSIGNED_BYTE,this.data))}}const tt="maplibre_preloaded_worker_pool";class _t{constructor(){this.active={}}acquire(n){if(!this.workers)for(this.workers=[];this.workers.length<_t.workerCount;)this.workers.push(new Worker(u.a.WORKER_URL));return this.active[n]=!0,this.workers.slice()}release(n){delete this.active[n],this.numActive()===0&&(this.workers.forEach(s=>{s.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[tt]}numActive(){return Object.keys(this.active).length}}const Pt=Math.floor(j.hardwareConcurrency/2);let At,St;function qt(){return At||(At=new _t),At}_t.workerCount=u.G(globalThis)?Math.max(Math.min(Pt,3),1):1;class Xe{constructor(n,s){this.workerPool=n,this.actors=[],this.currentActor=0,this.id=s;const p=this.workerPool.acquire(s);for(let y=0;y<p.length;y++){const w=new u.H(p[y],s);w.name=`Worker ${y}`,this.actors.push(w)}if(!this.actors.length)throw new Error("No actors found")}broadcast(n,s){const p=[];for(const y of this.actors)p.push(y.sendAsync({type:n,data:s}));return Promise.all(p)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(n=!0){this.actors.forEach(s=>{s.remove()}),this.actors=[],n&&this.workerPool.release(this.id)}registerMessageHandler(n,s){for(const p of this.actors)p.registerMessageHandler(n,s)}}function mt(){return St||(St=new Xe(qt(),u.J),St.registerMessageHandler("GR",(b,n,s)=>u.m(n,s))),St}function ft(b,n){const s=u.K();return u.L(s,s,[1,1,0]),u.M(s,s,[.5*b.width,.5*b.height,1]),b.calculatePosMatrix?u.N(s,s,b.calculatePosMatrix(n.toUnwrapped())):s}function Ke(b,n,s,p,y,w,T){var R;const k=function(H,ee,ne){if(H)for(const ye of H){const ge=ee[ye];if(ge&&ge.source===ne&&ge.type==="fill-extrusion")return!0}else for(const ye in ee){const ge=ee[ye];if(ge.source===ne&&ge.type==="fill-extrusion")return!0}return!1}((R=y==null?void 0:y.layers)!==null&&R!==void 0?R:null,n,b.id),L=w.maxPitchScaleFactor(),F=b.tilesIn(p,L,k);F.sort(Je);const q=[];for(const H of F)q.push({wrappedTileID:H.tileID.wrapped().key,queryResults:H.tile.queryRenderedFeatures(n,s,b._state,H.queryGeometry,H.cameraQueryGeometry,H.scale,y,w,L,ft(b.transform,H.tileID),T?(ee,ne)=>T(H.tileID,ee,ne):void 0)});return function(H,ee){for(const ne in H)for(const ye of H[ne])Vt(ye,ee);return H}(function(H){const ee={},ne={};for(const ye of H){const ge=ye.queryResults,_e=ye.wrappedTileID,Ee=ne[_e]=ne[_e]||{};for(const De in ge){const ze=ge[De],je=Ee[De]=Ee[De]||{},Ue=ee[De]=ee[De]||[];for(const Fe of ze)je[Fe.featureIndex]||(je[Fe.featureIndex]=!0,Ue.push(Fe))}}return ee}(q),b)}function Je(b,n){const s=b.tileID,p=n.tileID;return s.overscaledZ-p.overscaledZ||s.canonical.y-p.canonical.y||s.wrap-p.wrap||s.canonical.x-p.canonical.x}function Vt(b,n){const s=b.feature,p=n.getFeatureState(s.layer["source-layer"],s.id);s.source=s.layer.source,s.layer["source-layer"]&&(s.sourceLayer=s.layer["source-layer"]),s.state=p}function $t(b,n,s){return u._(this,void 0,void 0,function*(){let p=b;if(b.url?p=(yield u.j(n.transformRequest(b.url,"Source"),s)).data:yield j.frameAsync(s),!p)return null;const y=u.O(u.e(p,b),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in p&&p.vector_layers&&(y.vectorLayerIds=p.vector_layers.map(w=>w.id)),y})}class Kt{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):Array.isArray(n)&&(n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1])))}setNorthEast(n){return this._ne=n instanceof u.Q?new u.Q(n.lng,n.lat):u.Q.convert(n),this}setSouthWest(n){return this._sw=n instanceof u.Q?new u.Q(n.lng,n.lat):u.Q.convert(n),this}extend(n){const s=this._sw,p=this._ne;let y,w;if(n instanceof u.Q)y=n,w=n;else{if(!(n instanceof Kt))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(Kt.convert(n)):this.extend(u.Q.convert(n)):n&&("lng"in n||"lon"in n)&&"lat"in n?this.extend(u.Q.convert(n)):this;if(y=n._sw,w=n._ne,!y||!w)return this}return s||p?(s.lng=Math.min(y.lng,s.lng),s.lat=Math.min(y.lat,s.lat),p.lng=Math.max(w.lng,p.lng),p.lat=Math.max(w.lat,p.lat)):(this._sw=new u.Q(y.lng,y.lat),this._ne=new u.Q(w.lng,w.lat)),this}getCenter(){return new u.Q((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new u.Q(this.getWest(),this.getNorth())}getSouthEast(){return new u.Q(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:p}=u.Q.convert(n);let y=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(y=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&y}static convert(n){return n instanceof Kt?n:n&&new Kt(n)}static fromLngLat(n,s=0){const p=360*s/40075017,y=p/Math.cos(Math.PI/180*n.lat);return new Kt(new u.Q(n.lng-y,n.lat-p),new u.Q(n.lng+y,n.lat+p))}adjustAntiMeridian(){const n=new u.Q(this._sw.lng,this._sw.lat),s=new u.Q(this._ne.lng,this._ne.lat);return new Kt(n,n.lng>s.lng?new u.Q(s.lng+360,s.lat):s)}}class Gt{constructor(n,s,p){this.bounds=Kt.convert(this.validateBounds(n)),this.minzoom=s||0,this.maxzoom=p||24}validateBounds(n){return Array.isArray(n)&&n.length===4?[Math.max(-180,n[0]),Math.max(-90,n[1]),Math.min(180,n[2]),Math.min(90,n[3])]:[-180,-90,180,90]}contains(n){const s=Math.pow(2,n.z),p=Math.floor(u.U(this.bounds.getWest())*s),y=Math.floor(u.S(this.bounds.getNorth())*s),w=Math.ceil(u.U(this.bounds.getEast())*s),T=Math.ceil(u.S(this.bounds.getSouth())*s);return n.x>=p&&n.x<w&&n.y>=y&&n.y<T}}class kt extends u.E{constructor(n,s,p,y){if(super(),this.id=n,this.dispatcher=p,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,u.e(this,u.O(s,["url","scheme","tileSize","promoteId"])),this._options=u.e({type:"vector"},s),this._collectResourceTiming=s.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(y)}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const n=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,this.map.style.sourceCaches[this.id].clearTiles(),n&&(u.e(this,n),n.bounds&&(this.tileBounds=new Gt(n.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})))}catch(n){this._tileJSONRequest=null,this.fire(new u.k(n))}})}loaded(){return this._loaded}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}onAdd(n){this.map=n,this.load()}setSourceProperty(n){this._tileJSONRequest&&this._tileJSONRequest.abort(),n(),this.load()}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return u.e({},this._options)}loadTile(n){return u._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p={request:this.map._requestManager.transformRequest(s,"Tile"),uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,tileSize:this.tileSize*n.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};p.request.collectResourceTiming=this._collectResourceTiming;let y="RT";if(n.actor&&n.state!=="expired"){if(n.state==="loading")return new Promise((w,T)=>{n.reloadPromise={resolve:w,reject:T}})}else n.actor=this.dispatcher.getActor(),y="LT";n.abortController=new AbortController;try{const w=yield n.actor.sendAsync({type:y,data:p},n.abortController);if(delete n.abortController,n.aborted)return;this._afterTileLoadWorkerResponse(n,w)}catch(w){if(delete n.abortController,n.aborted)return;if(w&&w.status!==404)throw w;this._afterTileLoadWorkerResponse(n,null)}})}_afterTileLoadWorkerResponse(n,s){if(s&&s.resourceTiming&&(n.resourceTiming=s.resourceTiming),s&&this.map._refreshExpiredTiles&&n.setExpiryData(s),n.loadVectorData(s,this.map.painter),n.reloadPromise){const p=n.reloadPromise;n.reloadPromise=null,this.loadTile(n).then(p.resolve).catch(p.reject)}}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.actor&&(yield n.actor.sendAsync({type:"AT",data:{uid:n.uid,type:this.type,source:this.id}}))})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),n.actor&&(yield n.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}}))})}hasTransition(){return!1}}class Qt extends u.E{constructor(n,s,p,y){super(),this.id=n,this.dispatcher=p,this.setEventedParent(y),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=u.e({type:"raster"},s),u.e(this,u.O(s,["url","scheme","tileSize"]))}load(){return u._(this,arguments,void 0,function*(n=!1){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const s=yield $t(this._options,this.map._requestManager,this._tileJSONRequest);this._tileJSONRequest=null,this._loaded=!0,s&&(u.e(this,s),s.bounds&&(this.tileBounds=new Gt(s.bounds,this.minzoom,this.maxzoom)),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new u.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:n})))}catch(s){this._tileJSONRequest=null,this.fire(new u.k(s))}})}loaded(){return this._loaded}onAdd(n){this.map=n,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(n){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),n(),this.load(!0)}setTiles(n){return this.setSourceProperty(()=>{this._options.tiles=n}),this}setUrl(n){return this.setSourceProperty(()=>{this.url=n,this._options.url=n}),this}serialize(){return u.e({},this._options)}hasTile(n){return!this.tileBounds||this.tileBounds.contains(n.canonical)}loadTile(n){return u._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);n.abortController=new AbortController;try{const p=yield he.getImage(this.map._requestManager.transformRequest(s,"Tile"),n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(p&&p.data){this.map._refreshExpiredTiles&&(p.cacheControl||p.expires)&&n.setExpiryData({cacheControl:p.cacheControl,expires:p.expires});const y=this.map.painter.context,w=y.gl,T=p.data;n.texture=this.map.painter.getTileTexture(T.width),n.texture?n.texture.update(T,{useMipmap:!0}):(n.texture=new ke(y,T,w.RGBA,{useMipmap:!0}),n.texture.bind(w.LINEAR,w.CLAMP_TO_EDGE,w.LINEAR_MIPMAP_NEAREST)),n.state="loaded"}}catch(p){if(delete n.abortController,n.aborted)n.state="unloaded";else if(p)throw n.state="errored",p}})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController)})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.texture&&this.map.painter.saveTileTexture(n.texture)})}hasTransition(){return!1}}class ln extends Qt{constructor(n,s,p,y){super(n,s,p,y),this.type="raster-dem",this.maxzoom=22,this._options=u.e({type:"raster-dem"},s),this.encoding=s.encoding||"mapbox",this.redFactor=s.redFactor,this.greenFactor=s.greenFactor,this.blueFactor=s.blueFactor,this.baseShift=s.baseShift}loadTile(n){return u._(this,void 0,void 0,function*(){const s=n.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),p=this.map._requestManager.transformRequest(s,"Tile");n.neighboringTiles=this._getNeighboringTiles(n.tileID),n.abortController=new AbortController;try{const y=yield he.getImage(p,n.abortController,this.map._refreshExpiredTiles);if(delete n.abortController,n.aborted)return void(n.state="unloaded");if(y&&y.data){const w=y.data;this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&n.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const T=u.b(w)&&u.V()?w:yield this.readImageNow(w),R={type:this.type,uid:n.uid,source:this.id,rawImageData:T,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!n.actor||n.state==="expired"){n.actor=this.dispatcher.getActor();const k=yield n.actor.sendAsync({type:"LDT",data:R});n.dem=k,n.needsHillshadePrepare=!0,n.needsTerrainPrepare=!0,n.state="loaded"}}}catch(y){if(delete n.abortController,n.aborted)n.state="unloaded";else if(y)throw n.state="errored",y}})}readImageNow(n){return u._(this,void 0,void 0,function*(){if(typeof VideoFrame<"u"&&u.W()){const s=n.width+2,p=n.height+2;try{return new u.R({width:s,height:p},yield u.X(n,-1,-1,s,p))}catch{}}return j.getImageData(n,1)})}_getNeighboringTiles(n){const s=n.canonical,p=Math.pow(2,s.z),y=(s.x-1+p)%p,w=s.x===0?n.wrap-1:n.wrap,T=(s.x+1+p)%p,R=s.x+1===p?n.wrap+1:n.wrap,k={};return k[new u.Y(n.overscaledZ,w,s.z,y,s.y).key]={backfilled:!1},k[new u.Y(n.overscaledZ,R,s.z,T,s.y).key]={backfilled:!1},s.y>0&&(k[new u.Y(n.overscaledZ,w,s.z,y,s.y-1).key]={backfilled:!1},k[new u.Y(n.overscaledZ,n.wrap,s.z,s.x,s.y-1).key]={backfilled:!1},k[new u.Y(n.overscaledZ,R,s.z,T,s.y-1).key]={backfilled:!1}),s.y+1<p&&(k[new u.Y(n.overscaledZ,w,s.z,y,s.y+1).key]={backfilled:!1},k[new u.Y(n.overscaledZ,n.wrap,s.z,s.x,s.y+1).key]={backfilled:!1},k[new u.Y(n.overscaledZ,R,s.z,T,s.y+1).key]={backfilled:!1}),k}unloadTile(n){return u._(this,void 0,void 0,function*(){n.demTexture&&this.map.painter.saveTileTexture(n.demTexture),n.fbo&&(n.fbo.destroy(),delete n.fbo),n.dem&&delete n.dem,delete n.neighboringTiles,n.state="unloaded",n.actor&&(yield n.actor.sendAsync({type:"RDT",data:{type:this.type,uid:n.uid,source:this.id}}))})}}class Sn extends u.E{constructor(n,s,p,y){super(),this.id=n,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._pendingLoads=0,this.actor=p.getActor(),this.setEventedParent(y),this._data=s.data,this._options=u.e({},s),this._collectResourceTiming=s.collectResourceTiming,s.maxzoom!==void 0&&(this.maxzoom=s.maxzoom),s.type&&(this.type=s.type),s.attribution&&(this.attribution=s.attribution),this.promoteId=s.promoteId,s.clusterMaxZoom!==void 0&&this.maxzoom<=s.clusterMaxZoom&&u.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${s.clusterMaxZoom}".`),this.workerOptions=u.e({source:this.id,cluster:s.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(s.buffer!==void 0?s.buffer:128),tolerance:this._pixelsToTileUnits(s.tolerance!==void 0?s.tolerance:.375),extent:u.Z,maxZoom:this.maxzoom,lineMetrics:s.lineMetrics||!1,generateId:s.generateId||!1},superclusterOptions:{maxZoom:s.clusterMaxZoom!==void 0?s.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,s.clusterMinPoints||2),extent:u.Z,radius:this._pixelsToTileUnits(s.clusterRadius||50),log:!1,generateId:s.generateId||!1},clusterProperties:s.clusterProperties,filter:s.filter},s.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_pixelsToTileUnits(n){return n*(u.Z/this.tileSize)}load(){return u._(this,void 0,void 0,function*(){yield this._updateWorkerData()})}onAdd(n){this.map=n,this.load()}setData(n){return this._data=n,this._updateWorkerData(),this}updateData(n){return this._updateWorkerData(n),this}getData(){return u._(this,void 0,void 0,function*(){const n=u.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:n})})}getCoordinatesFromGeometry(n){return n.type==="GeometryCollection"?n.geometries.map(s=>s.coordinates).flat(1/0):n.coordinates.flat(1/0)}getBounds(){return u._(this,void 0,void 0,function*(){const n=new Kt,s=yield this.getData();let p;switch(s.type){case"FeatureCollection":p=s.features.map(y=>this.getCoordinatesFromGeometry(y.geometry)).flat(1/0);break;case"Feature":p=this.getCoordinatesFromGeometry(s.geometry);break;default:p=this.getCoordinatesFromGeometry(s)}if(p.length==0)return n;for(let y=0;y<p.length-1;y+=2)n.extend([p[y],p[y+1]]);return n})}setClusterOptions(n){return this.workerOptions.cluster=n.cluster,n&&(n.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(n.clusterRadius)),n.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=n.clusterMaxZoom)),this._updateWorkerData(),this}getClusterExpansionZoom(n){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:n,source:this.id}})}getClusterChildren(n){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:n,source:this.id}})}getClusterLeaves(n,s,p){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:n,limit:s,offset:p}})}_updateWorkerData(n){return u._(this,void 0,void 0,function*(){const s=u.e({type:this.type},this.workerOptions);n?s.dataDiff=n:typeof this._data=="string"?(s.request=this.map._requestManager.transformRequest(j.resolveURL(this._data),"Source"),s.request.collectResourceTiming=this._collectResourceTiming):s.data=JSON.stringify(this._data),this._pendingLoads++,this.fire(new u.l("dataloading",{dataType:"source"}));try{const p=yield this.actor.sendAsync({type:"LD",data:s});if(this._pendingLoads--,this._removed||p.abandoned)return void this.fire(new u.l("dataabort",{dataType:"source"}));let y=null;p.resourceTiming&&p.resourceTiming[this.id]&&(y=p.resourceTiming[this.id].slice(0));const w={dataType:"source"};this._collectResourceTiming&&y&&y.length>0&&u.e(w,{resourceTiming:y}),this.fire(new u.l("data",Object.assign(Object.assign({},w),{sourceDataType:"metadata"}))),this.fire(new u.l("data",Object.assign(Object.assign({},w),{sourceDataType:"content"})))}catch(p){if(this._pendingLoads--,this._removed)return void this.fire(new u.l("dataabort",{dataType:"source"}));this.fire(new u.k(p))}})}loaded(){return this._pendingLoads===0}loadTile(n){return u._(this,void 0,void 0,function*(){const s=n.actor?"RT":"LT";n.actor=this.actor;const p={type:this.type,uid:n.uid,tileID:n.tileID,zoom:n.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};n.abortController=new AbortController;const y=yield this.actor.sendAsync({type:s,data:p},n.abortController);delete n.abortController,n.unloadVectorData(),n.aborted||n.loadVectorData(y,this.map.painter,s==="RT")})}abortTile(n){return u._(this,void 0,void 0,function*(){n.abortController&&(n.abortController.abort(),delete n.abortController),n.aborted=!0})}unloadTile(n){return u._(this,void 0,void 0,function*(){n.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:n.uid,type:this.type,source:this.id}})})}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return u.e({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}}class bn extends u.E{constructor(n,s,p,y){super(),this.flippedWindingOrder=!1,this.id=n,this.dispatcher=p,this.coordinates=s.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(y),this.options=s}load(n){return u._(this,void 0,void 0,function*(){this._loaded=!1,this.fire(new u.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const s=yield he.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,s&&s.data&&(this.image=s.data,n&&(this.coordinates=n),this._finishLoading())}catch(s){this._request=null,this._loaded=!0,this.fire(new u.k(s))}})}loaded(){return this._loaded}updateImage(n){return n.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=n.url,this.load(n.coordinates).finally(()=>{this.texture=null}),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new u.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(n){this.map=n,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(n){this.coordinates=n;const s=n.map(u.$.fromLngLat);var p;return this.tileID=function(y){let w=1/0,T=1/0,R=-1/0,k=-1/0;for(const H of y)w=Math.min(w,H.x),T=Math.min(T,H.y),R=Math.max(R,H.x),k=Math.max(k,H.y);const L=Math.max(R-w,k-T),F=Math.max(0,Math.floor(-Math.log(L)/Math.LN2)),q=Math.pow(2,F);return new u.a1(F,Math.floor((w+R)/2*q),Math.floor((T+k)/2*q))}(s),this.terrainTileRanges=this._getOverlappingTileRanges(s),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=s.map(y=>this.tileID.getTilePoint(y)._round()),this.flippedWindingOrder=((p=this.tileCoords)[1].x-p[0].x)*(p[2].y-p[0].y)-(p[1].y-p[0].y)*(p[2].x-p[0].x)<0,this.fire(new u.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const n=this.map.painter.context,s=n.gl;this.texture||(this.texture=new ke(n,this.image,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let p=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(n){return u._(this,void 0,void 0,function*(){this.tileID&&this.tileID.equals(n.tileID.canonical)?(this.tiles[String(n.tileID.wrap)]=n,n.buckets={}):n.state="errored"})}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(n){let s=1/0,p=1/0,y=-1/0,w=-1/0;for(const R of n)s=Math.min(s,R.x),p=Math.min(p,R.y),y=Math.max(y,R.x),w=Math.max(w,R.y);const T={};for(let R=0;R<=u.a0;R++){const k=Math.pow(2,R),L=Math.floor(s*k),F=Math.floor(p*k),q=Math.floor(y*k),H=Math.floor(w*k);T[R]={minTileX:L,minTileY:F,maxTileX:q,maxTileY:H}}return T}}class gn extends bn{constructor(n,s,p,y){super(n,s,p,y),this.roundZoom=!0,this.type="video",this.options=s}load(){return u._(this,void 0,void 0,function*(){this._loaded=!1;const n=this.options;this.urls=[];for(const s of n.urls)this.urls.push(this.map._requestManager.transformRequest(s,"Source").url);try{const s=yield u.a2(this.urls);if(this._loaded=!0,!s)return;this.video=s,this.video.loop=!0,this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading()}catch(s){this.fire(new u.k(s))}})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(n){if(this.video){const s=this.video.seekable;n<s.start(0)||n>s.end(0)?this.fire(new u.k(new u.a3(`sources.${this.id}`,null,`Playback for this video can be set only between the ${s.start(0)} and ${s.end(0)}-second mark.`))):this.video.currentTime=n}}getVideo(){return this.video}onAdd(n){this.map||(this.map=n,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const n=this.map.painter.context,s=n.gl;this.texture?this.video.paused||(this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE),s.texSubImage2D(s.TEXTURE_2D,0,0,0,s.RGBA,s.UNSIGNED_BYTE,this.video)):(this.texture=new ke(n,this.video,s.RGBA),this.texture.bind(s.LINEAR,s.CLAMP_TO_EDGE));let p=!1;for(const y in this.tiles){const w=this.tiles[y];w.state!=="loaded"&&(w.state="loaded",w.texture=this.texture,p=!0)}p&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class En extends bn{constructor(n,s,p,y){super(n,s,p,y),s.coordinates?Array.isArray(s.coordinates)&&s.coordinates.length===4&&!s.coordinates.some(w=>!Array.isArray(w)||w.length!==2||w.some(T=>typeof T!="number"))||this.fire(new u.k(new u.a3(`sources.${n}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new u.k(new u.a3(`sources.${n}`,null,'missing required property "coordinates"'))),s.animate&&typeof s.animate!="boolean"&&this.fire(new u.k(new u.a3(`sources.${n}`,null,'optional "animate" property must be a boolean value'))),s.canvas?typeof s.canvas=="string"||s.canvas instanceof HTMLCanvasElement||this.fire(new u.k(new u.a3(`sources.${n}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new u.k(new u.a3(`sources.${n}`,null,'missing required property "canvas"'))),this.options=s,this.animate=s.animate===void 0||s.animate}load(){return u._(this,void 0,void 0,function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new u.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())})}getCanvas(){return this.canvas}onAdd(n){this.map=n,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let n=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,n=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,n=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const s=this.map.painter.context,p=s.gl;this.texture?(n||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new ke(s,this.canvas,p.RGBA,{premultiply:!0});let y=!1;for(const w in this.tiles){const T=this.tiles[w];T.state!=="loaded"&&(T.state="loaded",T.texture=this.texture,y=!0)}y&&this.fire(new u.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const n of[this.canvas.width,this.canvas.height])if(isNaN(n)||n<=0)return!0;return!1}}const Ln={},Pn=b=>{switch(b){case"geojson":return Sn;case"image":return bn;case"raster":return Qt;case"raster-dem":return ln;case"vector":return kt;case"video":return gn;case"canvas":return En}return Ln[b]},Hn="RTLPluginLoaded";class or extends u.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=mt()}_syncState(n){return this.status=n,this.dispatcher.broadcast("SRPS",{pluginStatus:n,pluginURL:this.url}).catch(s=>{throw this.status="error",s})}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(n){return u._(this,arguments,void 0,function*(s,p=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=j.resolveURL(s),!this.url)throw new Error(`requested url ${s} is invalid`);if(this.status==="unavailable"){if(!p)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()})}_requestImport(){return u._(this,void 0,void 0,function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new u.l(Hn))})}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let dr=null;function sr(){return dr||(dr=new or),dr}class Gn{constructor(n,s){this.timeAdded=0,this.fadeEndTime=0,this.tileID=n,this.uid=u.a4(),this.uses=0,this.tileSize=s,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttCoords={},this.expiredRequestCount=0,this.state="loading"}registerFadeDuration(n){const s=n+this.timeAdded;s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(n){this.demTexture&&n.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(n,s,p){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(y,w){const T={};if(!w)return T;for(const R of y){const k=R.layerIds.map(L=>w.getLayer(L)).filter(Boolean);if(k.length!==0){R.layers=k,R.stateDependentLayerIds&&(R.stateDependentLayers=R.stateDependentLayerIds.map(L=>k.filter(F=>F.id===L)[0]));for(const L of k)T[L.id]=R}}return T}(n.buckets,s==null?void 0:s.style),this.hasSymbolBuckets=!1;for(const y in this.buckets){const w=this.buckets[y];if(w instanceof u.a6){if(this.hasSymbolBuckets=!0,!p)break;w.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const y in this.buckets){const w=this.buckets[y];if(w instanceof u.a6&&w.hasRTLText){this.hasRTLText=!0,sr().lazyLoad();break}}this.queryPadding=0;for(const y in this.buckets){const w=this.buckets[y];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(y).queryRadius(w))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage)}else this.collisionBoxArray=new u.a5}unloadVectorData(){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(n){return this.buckets[n.id]}upload(n){for(const p in this.buckets){const y=this.buckets[p];y.uploadPending()&&y.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ke(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ke(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,p,y,w,T,R,k,L,F,q){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:y,cameraQueryGeometry:w,scale:T,tileSize:this.tileSize,pixelPosMatrix:F,transform:k,params:R,queryPadding:this.queryPadding*L,getElevation:q},n,s,p):{}}querySourceFeatures(n,s){const p=this.latestFeatureIndex;if(!p||!p.rawTileData)return;const y=p.loadVTLayers(),w=s&&s.sourceLayer?s.sourceLayer:"",T=y._geojsonTileLayer||y[w];if(!T)return;const R=u.a7(s&&s.filter),{z:k,x:L,y:F}=this.tileID.canonical,q={z:k,x:L,y:F};for(let H=0;H<T.length;H++){const ee=T.feature(H);if(R.needGeometry){const ge=u.a8(ee,!0);if(!R.filter(new u.C(this.tileID.overscaledZ),ge,this.tileID.canonical))continue}else if(!R.filter(new u.C(this.tileID.overscaledZ),ee))continue;const ne=p.getId(ee,w),ye=new u.a9(ee,k,L,F,ne);ye.tile=q,n.push(ye)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const p=u.aa(n.cacheControl);p["max-age"]&&(this.expirationTime=Date.now()+1e3*p["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const p=Date.now();let y=!1;if(this.expirationTime>p)y=!1;else if(s)if(this.expirationTime<s)y=!0;else{const w=this.expirationTime-s;w?this.expirationTime=p+Math.max(w,3e4):y=!0}else y=!0;y?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0)return;const p=this.latestFeatureIndex.loadVTLayers();for(const y in this.buckets){if(!s.style.hasLayer(y))continue;const w=this.buckets[y],T=w.layers[0].sourceLayer||"_geojsonTileLayer",R=p[T],k=n[T];if(!R||!k||Object.keys(k).length===0)continue;w.update(k,R,this.imageAtlas&&this.imageAtlas.patternPositions||{});const L=s&&s.style&&s.style.getLayer(y);L&&(this.queryPadding=Math.max(this.queryPadding,L.queryRadius(w)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<j.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=j.now()+n}setDependencies(n,s){const p={};for(const y of s)p[y]=!0;this.dependencies[n]=p}hasDependency(n,s){for(const p of n){const y=this.dependencies[p];if(y){for(const w of s)if(y[w])return!0}}return!1}}class pr{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,p){const y=n.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);const w={value:s,timeout:void 0};if(p!==void 0&&(w.timeout=setTimeout(()=>{this.remove(n,w)},p)),this.data[y].push(w),this.order.push(y),this.order.length>this.max){const T=this._getAndRemoveByKey(this.order[0]);T&&this.onRemove(T)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const p=n.wrapped().key,y=s===void 0?0:this.data[p].indexOf(s),w=this.data[p][y];return this.data[p].splice(y,1),w.timeout&&clearTimeout(w.timeout),this.data[p].length===0&&delete this.data[p],this.onRemove(w.value),this.order.splice(this.order.indexOf(p),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const p in this.data)for(const y of this.data[p])n(y.value)||s.push(y);for(const p of s)this.remove(p.value.tileID,p)}}class Jn{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,p){const y=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][y]=this.stateChanges[n][y]||{},u.e(this.stateChanges[n][y],p),this.deletedStates[n]===null){this.deletedStates[n]={};for(const w in this.state[n])w!==y&&(this.deletedStates[n][w]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][y]===null){this.deletedStates[n][y]={};for(const w in this.state[n][y])p[w]||(this.deletedStates[n][y][w]=null)}else for(const w in p)this.deletedStates[n]&&this.deletedStates[n][y]&&this.deletedStates[n][y][w]===null&&delete this.deletedStates[n][y][w]}removeFeatureState(n,s,p){if(this.deletedStates[n]===null)return;const y=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},p&&s!==void 0)this.deletedStates[n][y]!==null&&(this.deletedStates[n][y]=this.deletedStates[n][y]||{},this.deletedStates[n][y][p]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][y])for(p in this.deletedStates[n][y]={},this.stateChanges[n][y])this.deletedStates[n][y][p]=null;else this.deletedStates[n][y]=null;else this.deletedStates[n]=null}getState(n,s){const p=String(s),y=u.e({},(this.state[n]||{})[p],(this.stateChanges[n]||{})[p]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const w=this.deletedStates[n][s];if(w===null)return{};for(const T in w)delete y[T]}return y}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const p={};for(const y in this.stateChanges){this.state[y]=this.state[y]||{};const w={};for(const T in this.stateChanges[y])this.state[y][T]||(this.state[y][T]={}),u.e(this.state[y][T],this.stateChanges[y][T]),w[T]=this.state[y][T];p[y]=w}for(const y in this.deletedStates){this.state[y]=this.state[y]||{};const w={};if(this.deletedStates[y]===null)for(const T in this.state[y])w[T]={},this.state[y][T]={};else for(const T in this.deletedStates[y]){if(this.deletedStates[y][T]===null)this.state[y][T]={};else for(const R of Object.keys(this.deletedStates[y][T]))delete this.state[y][T][R];w[T]=this.state[y][T]}p[y]=p[y]||{},u.e(p[y],w)}if(this.stateChanges={},this.deletedStates={},Object.keys(p).length!==0)for(const y in n)n[y].setFeatureState(p,s)}}const br=89.25;function gr(b,n){const s=u.ae(n.lat,-85.051129,u.af);return new u.P(u.U(n.lng)*b,u.S(s)*b)}function Lr(b,n){return new u.$(n.x/b,n.y/b).toLngLat()}function Ge(b){return b.cameraToCenterDistance*Math.min(.85*Math.tan(u.ab(90-b.pitch)),Math.tan(u.ab(br-b.pitch)))}function te(b,n){const s=b.canonical,p=n/u.ac(s.z),y=s.x+Math.pow(2,s.z)*b.wrap,w=u.ad(new Float64Array(16));return u.L(w,w,[y*p,s.y*p,0]),u.M(w,w,[p/u.Z,p/u.Z,1]),w}function ie(b,n,s,p,y){const w=u.$.fromLngLat(b,n),T=y*u.ag(1,b.lat),R=T*Math.cos(u.ab(s)),k=Math.sqrt(T*T-R*R),L=k*Math.sin(u.ab(-p)),F=k*Math.cos(u.ab(-p));return new u.$(w.x+L,w.y+F,w.z+R)}function de(b,n,s){const p=n.intersectsFrustum(b);if(!s)return p;const y=n.intersectsPlane(s);return p===0||y===0?0:p===2&&y===2?2:1}function Ce(b,n,s){let p=0;const y=(s-n)/10;for(let w=0;w<10;w++)p+=y*Math.pow(Math.cos(n+(w+.5)/10*(s-n)),b);return p}function Ne(b,n){return function(s,p,y,w,T){const R=2*((b-1)/u.ah(Math.cos(u.ab(br-T))/Math.cos(u.ab(br)))-1),k=Math.acos(y/w),L=2*Ce(R-1,0,u.ab(T/2)),F=Math.min(u.ab(br),k+u.ab(T/2)),q=Ce(R-1,Math.min(F,k-u.ab(T/2)),F),H=Math.atan(p/y),ee=Math.hypot(p,y);let ne=s;return ne+=u.ah(w/ee/Math.max(.5,Math.cos(u.ab(T/2)))),ne+=R*u.ah(Math.cos(H))/2,ne-=u.ah(Math.max(1,q/L/n))/2,ne}}const ce=Ne(9.314,3);function rt(b,n){const s=(n.roundZoom?Math.round:Math.floor)(b.zoom+u.ah(b.tileSize/n.tileSize));return Math.max(0,s)}function Ve(b,n){const s=b.getCameraFrustum(),p=b.getClippingPlane(),y=b.screenPointToMercatorCoordinate(b.getCameraPoint()),w=u.$.fromLngLat(b.center,b.elevation);y.z=w.z+Math.cos(b.pitchInRadians)*b.cameraToCenterDistance/b.worldSize;const T=b.getCoveringTilesDetailsProvider(),R=T.allowVariableZoom(b,n),k=rt(b,n),L=n.minzoom||0,F=n.maxzoom!==void 0?n.maxzoom:b.maxZoom,q=Math.min(Math.max(0,k),F),H=Math.pow(2,q),ee=[H*y.x,H*y.y,0],ne=[H*w.x,H*w.y,0],ye=Math.hypot(w.x-y.x,w.y-y.y),ge=Math.abs(w.z-y.z),_e=Math.hypot(ye,ge),Ee=je=>({zoom:0,x:0,y:0,wrap:je,fullyVisible:!1}),De=[],ze=[];if(b.renderWorldCopies&&T.allowWorldCopies())for(let je=1;je<=3;je++)De.push(Ee(-je)),De.push(Ee(je));for(De.push(Ee(0));De.length>0;){const je=De.pop(),Ue=je.x,Fe=je.y;let it=je.fullyVisible;const Tt={x:Ue,y:Fe,z:je.zoom},gt=T.getTileAABB(Tt,je.wrap,b.elevation,n);if(!it){const Yt=de(s,gt,p);if(Yt===0)continue;it=Yt===2}const dt=T.distanceToTile2d(y.x,y.y,Tt,gt);let vt=k;R&&(vt=(n.calculateTileZoom||ce)(b.zoom+u.ah(b.tileSize/n.tileSize),dt,ge,_e,b.fov)),vt=(n.roundZoom?Math.round:Math.floor)(vt),vt=Math.max(0,vt);const Jt=Math.min(vt,F);if(je.wrap=T.getWrap(w,Tt,je.wrap),je.zoom>=Jt){if(je.zoom<L)continue;const Yt=q-je.zoom,Dt=ee[0]-.5-(Ue<<Yt),un=ee[1]-.5-(Fe<<Yt),$n=n.reparseOverscaled?Math.max(je.zoom,vt):je.zoom;ze.push({tileID:new u.Y(je.zoom===F?$n:je.zoom,je.wrap,je.zoom,Ue,Fe),distanceSq:u.ai([ne[0]-.5-Ue,ne[1]-.5-Fe]),tileDistanceToCamera:Math.sqrt(Dt*Dt+un*un)})}else for(let Yt=0;Yt<4;Yt++)De.push({zoom:je.zoom+1,x:(Ue<<1)+Yt%2,y:(Fe<<1)+(Yt>>1),wrap:je.wrap,fullyVisible:it})}return ze.sort((je,Ue)=>je.distanceSq-Ue.distanceSq).map(je=>je.tileID)}class Ie extends u.E{constructor(n,s,p){super(),this.id=n,this.dispatcher=p,this.on("data",y=>this._dataHandler(y)),this.on("dataloading",()=>{this._sourceErrored=!1}),this.on("error",()=>{this._sourceErrored=this._source.loaded()}),this._source=((y,w,T,R)=>{const k=new(Pn(w.type))(y,w,T,R);if(k.id!==y)throw new Error(`Expected Source id to be ${y} instead of ${k.id}`);return k})(n,s,p,this),this._tiles={},this._cache=new pr(0,y=>this._unloadTile(y)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new Jn,this._didEmitContent=!1,this._updated=!1}onAdd(n){this.map=n,this._maxTileCacheSize=n?n._maxTileCacheSize:null,this._maxTileCacheZoomLevels=n?n._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(n)}onRemove(n){this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(n)}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(n,s,p){return u._(this,void 0,void 0,function*(){try{yield this._source.loadTile(n),this._tileLoaded(n,s,p)}catch(y){n.state="errored",y.status!==404?this._source.fire(new u.k(y,{tile:n})):this.update(this.transform,this.terrain)}})}_unloadTile(n){this._source.unloadTile&&this._source.unloadTile(n)}_abortTile(n){this._source.abortTile&&this._source.abortTile(n),this._source.fire(new u.l("dataabort",{tile:n,coord:n.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const p=this._tiles[s];p.upload(n),p.prepare(this.map.style.imageManager)}}getIds(){return Object.values(this._tiles).map(n=>n.tileID).sort(Pe).map(n=>n.key)}getRenderableIds(n){const s=[];for(const p in this._tiles)this._isIdRenderable(p,n)&&s.push(this._tiles[p]);return n?s.sort((p,y)=>{const w=p.tileID,T=y.tileID,R=new u.P(w.canonical.x,w.canonical.y)._rotate(-this.transform.bearingInRadians),k=new u.P(T.canonical.x,T.canonical.y)._rotate(-this.transform.bearingInRadians);return w.overscaledZ-T.overscaledZ||k.y-R.y||k.x-R.x}).map(p=>p.tileID.key):s.map(p=>p.tileID).sort(Pe).map(p=>p.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(n){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const s in this._tiles)(n||this._tiles[s].state!=="errored")&&this._reloadTile(s,"reloading")}}_reloadTile(n,s){return u._(this,void 0,void 0,function*(){const p=this._tiles[n];p&&(p.state!=="loading"&&(p.state=s),yield this._loadTile(p,n,s))})}_tileLoaded(n,s,p){n.timeAdded=j.now(),p==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this.getSource().type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),n.aborted||this._source.fire(new u.l("data",{dataType:"source",tile:n,coord:n.tileID}))}_backfillDEM(n){const s=this.getRenderableIds();for(let y=0;y<s.length;y++){const w=s[y];if(n.neighboringTiles&&n.neighboringTiles[w]){const T=this.getTileByID(w);p(n,T),p(T,n)}}function p(y,w){y.needsHillshadePrepare=!0,y.needsTerrainPrepare=!0;let T=w.tileID.canonical.x-y.tileID.canonical.x;const R=w.tileID.canonical.y-y.tileID.canonical.y,k=Math.pow(2,y.tileID.canonical.z),L=w.tileID.key;T===0&&R===0||Math.abs(R)>1||(Math.abs(T)>1&&(Math.abs(T+k)===1?T+=k:Math.abs(T-k)===1&&(T-=k)),w.dem&&y.dem&&(y.dem.backfillBorder(w.dem,T,R),y.neighboringTiles&&y.neighboringTiles[L]&&(y.neighboringTiles[L].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,p,y){for(const w in this._tiles){let T=this._tiles[w];if(y[w]||!T.hasData()||T.tileID.overscaledZ<=s||T.tileID.overscaledZ>p)continue;let R=T.tileID;for(;T&&T.tileID.overscaledZ>s+1;){const L=T.tileID.scaledTo(T.tileID.overscaledZ-1);T=this._tiles[L.key],T&&T.hasData()&&(R=L)}let k=R;for(;k.overscaledZ>s;)if(k=k.scaledTo(k.overscaledZ-1),n[k.key]||n[k.canonical.key]){y[R.key]=R;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const p=this._loadedParentTiles[n.key];return p&&p.tileID.overscaledZ>=s?p:null}for(let p=n.overscaledZ-1;p>=s;p--){const y=n.scaledTo(p),w=this._getLoadedTile(y);if(w)return w}}findLoadedSibling(n){return this._getLoadedTile(n)}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(n.wrapped().key)}updateCacheSize(n){const s=Math.ceil(n.width/this._source.tileSize)+1,p=Math.ceil(n.height/this._source.tileSize)+1,y=Math.floor(s*p*(this._maxTileCacheZoomLevels===null?u.a.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),w=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,y):y;this._cache.setMaxSize(w)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const p={};for(const y in this._tiles){const w=this._tiles[y];w.tileID=w.tileID.unwrapTo(w.tileID.wrap+s),p[w.tileID.key]=w}this._tiles=p;for(const y in this._timers)clearTimeout(this._timers[y]),delete this._timers[y];for(const y in this._tiles)this._setTileReloadTimer(y,this._tiles[y])}}_updateCoveredAndRetainedTiles(n,s,p,y,w,T){const R={},k={},L=Object.keys(n),F=j.now();for(const q of L){const H=n[q],ee=this._tiles[q];if(!ee||ee.fadeEndTime!==0&&ee.fadeEndTime<=F)continue;const ne=this.findLoadedParent(H,s),ye=this.findLoadedSibling(H),ge=ne||ye||null;ge&&(this._addTile(ge.tileID),R[ge.tileID.key]=ge.tileID),k[q]=H}this._retainLoadedChildren(k,y,p,n);for(const q in R)n[q]||(this._coveredTiles[q]=!0,n[q]=R[q]);if(T){const q={},H={};for(const ee of w)this._tiles[ee.key].hasData()?q[ee.key]=ee:H[ee.key]=ee;for(const ee in H){const ne=H[ee].children(this._source.maxzoom);this._tiles[ne[0].key]&&this._tiles[ne[1].key]&&this._tiles[ne[2].key]&&this._tiles[ne[3].key]&&(q[ne[0].key]=n[ne[0].key]=ne[0],q[ne[1].key]=n[ne[1].key]=ne[1],q[ne[2].key]=n[ne[2].key]=ne[2],q[ne[3].key]=n[ne[3].key]=ne[3],delete H[ee])}for(const ee in H){const ne=H[ee],ye=this.findLoadedParent(ne,this._source.minzoom),ge=this.findLoadedSibling(ne),_e=ye||ge||null;if(_e){q[_e.tileID.key]=n[_e.tileID.key]=_e.tileID;for(const Ee in q)q[Ee].isChildOf(_e.tileID)&&delete q[Ee]}}for(const ee in this._tiles)q[ee]||(this._coveredTiles[ee]=!0)}}update(n,s){if(!this._sourceLoaded||this._paused)return;let p;this.transform=n,this.terrain=s,this.updateCacheSize(n),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?p=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(F=>new u.Y(F.canonical.z,F.wrap,F.canonical.z,F.canonical.x,F.canonical.y)):(p=Ve(n,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:s,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(p=p.filter(F=>this._source.hasTile(F)))):p=[];const y=rt(n,this._source),w=Math.max(y-Ie.maxOverzooming,this._source.minzoom),T=Math.max(y+Ie.maxUnderzooming,this._source.minzoom);if(this.usedForTerrain){const F={};for(const q of p)if(q.canonical.z>this._source.minzoom){const H=q.scaledTo(q.canonical.z-1);F[H.key]=H;const ee=q.scaledTo(Math.max(this._source.minzoom,Math.min(q.canonical.z,5)));F[ee.key]=ee}p=p.concat(Object.values(F))}const R=p.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,R&&this.fire(new u.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const k=this._updateRetainedTiles(p,y);Me(this._source.type)&&this._updateCoveredAndRetainedTiles(k,w,T,y,p,s);for(const F in k)this._tiles[F].clearFadeHold();const L=u.aj(this._tiles,k);for(const F of L){const q=this._tiles[F];q.hasSymbolBuckets&&!q.holdingForFade()?q.setHoldDuration(this.map._fadeDuration):q.hasSymbolBuckets&&!q.symbolFadeFinished()||this._removeTile(F)}this._updateLoadedParentTileCache(),this._updateLoadedSiblingTileCache()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(n)}_updateRetainedTiles(n,s){var p;const y={},w={},T=Math.max(s-Ie.maxOverzooming,this._source.minzoom),R=Math.max(s+Ie.maxUnderzooming,this._source.minzoom),k={};for(const L of n){const F=this._addTile(L);y[L.key]=L,F.hasData()||s<this._source.maxzoom&&(k[L.key]=L)}this._retainLoadedChildren(k,s,R,y);for(const L of n){let F=this._tiles[L.key];if(F.hasData())continue;if(s+1>this._source.maxzoom){const H=L.children(this._source.maxzoom)[0],ee=this.getTile(H);if(ee&&ee.hasData()){y[H.key]=H;continue}}else{const H=L.children(this._source.maxzoom);if(y[H[0].key]&&y[H[1].key]&&y[H[2].key]&&y[H[3].key])continue}let q=F.wasRequested();for(let H=L.overscaledZ-1;H>=T;--H){const ee=L.scaledTo(H);if(w[ee.key])break;if(w[ee.key]=!0,F=this.getTile(ee),!F&&q&&(F=this._addTile(ee)),F){const ne=F.hasData();if((ne||!(!((p=this.map)===null||p===void 0)&&p.cancelPendingTileRequestsWhileZooming)||q)&&(y[ee.key]=ee),q=F.wasRequested(),ne)break}}}return y}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let p,y=this._tiles[n].tileID;for(;y.overscaledZ>0;){if(y.key in this._loadedParentTiles){p=this._loadedParentTiles[y.key];break}s.push(y.key);const w=y.scaledTo(y.overscaledZ-1);if(p=this._getLoadedTile(w),p)break;y=w}for(const w of s)this._loadedParentTiles[w]=p}}_updateLoadedSiblingTileCache(){this._loadedSiblingTiles={};for(const n in this._tiles){const s=this._tiles[n].tileID,p=this._getLoadedTile(s);this._loadedSiblingTiles[s.key]=p}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const p=s;return s||(s=new Gn(n,this._source.tileSize*n.overscaleFactor()),this._loadTile(s,n.key,s.state)),s.uses++,this._tiles[n.key]=s,p||this._source.fire(new u.l("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const p=s.getExpiryTimeout();p&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},p))}refreshTiles(n){for(const s in this._tiles)this._isIdRenderable(s)&&n.some(p=>p.equals(this._tiles[s].tileID.canonical))&&this._reloadTile(s,"expired")}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}_dataHandler(n){const s=n.sourceDataType;n.dataType==="source"&&s==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&n.dataType==="source"&&s==="content"&&(this.reload(n.sourceDataChanged),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(n);this._cache.reset()}tilesIn(n,s,p){const y=[],w=this.transform;if(!w)return y;const T=p?w.getCameraQueryGeometry(n):n,R=n.map(ne=>w.screenPointToMercatorCoordinate(ne,this.terrain)),k=T.map(ne=>w.screenPointToMercatorCoordinate(ne,this.terrain)),L=this.getIds();let F=1/0,q=1/0,H=-1/0,ee=-1/0;for(const ne of k)F=Math.min(F,ne.x),q=Math.min(q,ne.y),H=Math.max(H,ne.x),ee=Math.max(ee,ne.y);for(let ne=0;ne<L.length;ne++){const ye=this._tiles[L[ne]];if(ye.holdingForFade())continue;const ge=w.getCoveringTilesDetailsProvider().allowWorldCopies()?ye.tileID:ye.tileID.unwrapTo(0),_e=Math.pow(2,w.zoom-ye.tileID.overscaledZ),Ee=s*ye.queryPadding*u.Z/ye.tileSize/_e,De=[ge.getTilePoint(new u.$(F,q)),ge.getTilePoint(new u.$(H,ee))];if(De[0].x-Ee<u.Z&&De[0].y-Ee<u.Z&&De[1].x+Ee>=0&&De[1].y+Ee>=0){const ze=R.map(Ue=>ge.getTilePoint(Ue)),je=k.map(Ue=>ge.getTilePoint(Ue));y.push({tile:ye,tileID:ge,queryGeometry:ze,cameraQueryGeometry:je,scale:_e})}}return y}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(p=>this._tiles[p].tileID);return this.transform&&this.transform.populateCache(s),s}hasTransition(){if(this._source.hasTransition())return!0;if(Me(this._source.type)){const n=j.now();for(const s in this._tiles)if(this._tiles[s].fadeEndTime>=n)return!0}return!1}setFeatureState(n,s,p){this._state.updateState(n=n||"_geojsonTileLayer",s,p)}removeFeatureState(n,s,p){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,p)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,p){const y=this._tiles[n];y&&y.setDependencies(s,p)}reloadTilesForDependencies(n,s){for(const p in this._tiles)this._tiles[p].hasDependency(n,s)&&this._reloadTile(p,"reloading");this._cache.filter(p=>!p.hasDependency(n,s))}}function Pe(b,n){const s=Math.abs(2*b.wrap)-+(b.wrap<0),p=Math.abs(2*n.wrap)-+(n.wrap<0);return b.overscaledZ-n.overscaledZ||p-s||n.canonical.y-b.canonical.y||n.canonical.x-b.canonical.x}function Me(b){return b==="raster"||b==="image"||b==="video"}Ie.maxOverzooming=10,Ie.maxUnderzooming=3;class Ye{constructor(n,s){this.reset(n,s)}reset(n,s){this.points=n||[],this._distances=[0];for(let p=1;p<this.points.length;p++)this._distances[p]=this._distances[p-1]+this.points[p].dist(this.points[p-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(s||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(n){if(this.points.length===1)return this.points[0];n=u.ae(n,0,1);let s=1,p=this._distances[s];const y=n*this.paddedLength+this.padding;for(;p<y&&s<this._distances.length;)p=this._distances[++s];const w=s-1,T=this._distances[w],R=p-T,k=R>0?(y-T)/R:0;return this.points[w].mult(1-k).add(this.points[s].mult(k))}}function xt(b,n){let s=!0;return b==="always"||b!=="never"&&n!=="never"||(s=!1),s}class Mt{constructor(n,s,p){const y=this.boxCells=[],w=this.circleCells=[];this.xCellCount=Math.ceil(n/p),this.yCellCount=Math.ceil(s/p);for(let T=0;T<this.xCellCount*this.yCellCount;T++)y.push([]),w.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=n,this.height=s,this.xScale=this.xCellCount/n,this.yScale=this.yCellCount/s,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(n,s,p,y,w){this._forEachCell(s,p,y,w,this._insertBoxCell,this.boxUid++),this.boxKeys.push(n),this.bboxes.push(s),this.bboxes.push(p),this.bboxes.push(y),this.bboxes.push(w)}insertCircle(n,s,p,y){this._forEachCell(s-y,p-y,s+y,p+y,this._insertCircleCell,this.circleUid++),this.circleKeys.push(n),this.circles.push(s),this.circles.push(p),this.circles.push(y)}_insertBoxCell(n,s,p,y,w,T){this.boxCells[w].push(T)}_insertCircleCell(n,s,p,y,w,T){this.circleCells[w].push(T)}_query(n,s,p,y,w,T,R){if(p<0||n>this.width||y<0||s>this.height)return[];const k=[];if(n<=0&&s<=0&&this.width<=p&&this.height<=y){if(w)return[{key:null,x1:n,y1:s,x2:p,y2:y}];for(let L=0;L<this.boxKeys.length;L++)k.push({key:this.boxKeys[L],x1:this.bboxes[4*L],y1:this.bboxes[4*L+1],x2:this.bboxes[4*L+2],y2:this.bboxes[4*L+3]});for(let L=0;L<this.circleKeys.length;L++){const F=this.circles[3*L],q=this.circles[3*L+1],H=this.circles[3*L+2];k.push({key:this.circleKeys[L],x1:F-H,y1:q-H,x2:F+H,y2:q+H})}}else this._forEachCell(n,s,p,y,this._queryCell,k,{hitTest:w,overlapMode:T,seenUids:{box:{},circle:{}}},R);return k}query(n,s,p,y){return this._query(n,s,p,y,!1,null)}hitTest(n,s,p,y,w,T){return this._query(n,s,p,y,!0,w,T).length>0}hitTestCircle(n,s,p,y,w){const T=n-p,R=n+p,k=s-p,L=s+p;if(R<0||T>this.width||L<0||k>this.height)return!1;const F=[];return this._forEachCell(T,k,R,L,this._queryCellCircle,F,{hitTest:!0,overlapMode:y,circle:{x:n,y:s,radius:p},seenUids:{box:{},circle:{}}},w),F.length>0}_queryCell(n,s,p,y,w,T,R,k){const{seenUids:L,hitTest:F,overlapMode:q}=R,H=this.boxCells[w];if(H!==null){const ne=this.bboxes;for(const ye of H)if(!L.box[ye]){L.box[ye]=!0;const ge=4*ye,_e=this.boxKeys[ye];if(n<=ne[ge+2]&&s<=ne[ge+3]&&p>=ne[ge+0]&&y>=ne[ge+1]&&(!k||k(_e))&&(!F||!xt(q,_e.overlapMode))&&(T.push({key:_e,x1:ne[ge],y1:ne[ge+1],x2:ne[ge+2],y2:ne[ge+3]}),F))return!0}}const ee=this.circleCells[w];if(ee!==null){const ne=this.circles;for(const ye of ee)if(!L.circle[ye]){L.circle[ye]=!0;const ge=3*ye,_e=this.circleKeys[ye];if(this._circleAndRectCollide(ne[ge],ne[ge+1],ne[ge+2],n,s,p,y)&&(!k||k(_e))&&(!F||!xt(q,_e.overlapMode))){const Ee=ne[ge],De=ne[ge+1],ze=ne[ge+2];if(T.push({key:_e,x1:Ee-ze,y1:De-ze,x2:Ee+ze,y2:De+ze}),F)return!0}}}return!1}_queryCellCircle(n,s,p,y,w,T,R,k){const{circle:L,seenUids:F,overlapMode:q}=R,H=this.boxCells[w];if(H!==null){const ne=this.bboxes;for(const ye of H)if(!F.box[ye]){F.box[ye]=!0;const ge=4*ye,_e=this.boxKeys[ye];if(this._circleAndRectCollide(L.x,L.y,L.radius,ne[ge+0],ne[ge+1],ne[ge+2],ne[ge+3])&&(!k||k(_e))&&!xt(q,_e.overlapMode))return T.push(!0),!0}}const ee=this.circleCells[w];if(ee!==null){const ne=this.circles;for(const ye of ee)if(!F.circle[ye]){F.circle[ye]=!0;const ge=3*ye,_e=this.circleKeys[ye];if(this._circlesCollide(ne[ge],ne[ge+1],ne[ge+2],L.x,L.y,L.radius)&&(!k||k(_e))&&!xt(q,_e.overlapMode))return T.push(!0),!0}}}_forEachCell(n,s,p,y,w,T,R,k){const L=this._convertToXCellCoord(n),F=this._convertToYCellCoord(s),q=this._convertToXCellCoord(p),H=this._convertToYCellCoord(y);for(let ee=L;ee<=q;ee++)for(let ne=F;ne<=H;ne++)if(w.call(this,n,s,p,y,this.xCellCount*ne+ee,T,R,k))return}_convertToXCellCoord(n){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(n*this.xScale)))}_convertToYCellCoord(n){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(n*this.yScale)))}_circlesCollide(n,s,p,y,w,T){const R=y-n,k=w-s,L=p+T;return L*L>R*R+k*k}_circleAndRectCollide(n,s,p,y,w,T,R){const k=(T-y)/2,L=Math.abs(n-(y+k));if(L>k+p)return!1;const F=(R-w)/2,q=Math.abs(s-(w+F));if(q>F+p)return!1;if(L<=k||q<=F)return!0;const H=L-k,ee=q-F;return H*H+ee*ee<=p*p}}function Ot(b,n,s){const p=u.K();if(!b){const{vecSouth:q,vecEast:H}=It(n),ee=P();ee[0]=H[0],ee[1]=H[1],ee[2]=q[0],ee[3]=q[1],y=ee,(F=(T=(w=ee)[0])*(L=w[3])-(k=w[2])*(R=w[1]))&&(y[0]=L*(F=1/F),y[1]=-R*F,y[2]=-k*F,y[3]=T*F),p[0]=ee[0],p[1]=ee[1],p[4]=ee[2],p[5]=ee[3]}var y,w,T,R,k,L,F;return u.M(p,p,[1/s,1/s,1]),p}function Xt(b,n,s,p){if(b){const y=u.K();if(!n){const{vecSouth:w,vecEast:T}=It(s);y[0]=T[0],y[1]=T[1],y[4]=w[0],y[5]=w[1]}return u.M(y,y,[p,p,1]),y}return s.pixelsToClipSpaceMatrix}function It(b){const n=Math.cos(b.rollInRadians),s=Math.sin(b.rollInRadians),p=Math.cos(b.pitchInRadians),y=Math.cos(b.bearingInRadians),w=Math.sin(b.bearingInRadians),T=u.ao();T[0]=-y*p*s-w*n,T[1]=-w*p*s+y*n;const R=u.ap(T);R<1e-9?u.aq(T):u.ar(T,T,1/R);const k=u.ao();k[0]=y*p*n-w*s,k[1]=w*p*n+y*s;const L=u.ap(k);return L<1e-9?u.aq(k):u.ar(k,k,1/L),{vecEast:k,vecSouth:T}}function qe(b,n,s,p){let y;p?(y=[b,n,p(b,n),1],u.at(y,y,s)):(y=[b,n,0,1],lr(y,y,s));const w=y[3];return{point:new u.P(y[0]/w,y[1]/w),signedDistanceFromCamera:w,isOccluded:!1}}function dn(b,n){return .5+b/n*.5}function cn(b,n){return b.x>=-n[0]&&b.x<=n[0]&&b.y>=-n[1]&&b.y<=n[1]}function en(b,n,s,p,y,w,T,R,k,L,F,q,H){const ee=s?b.textSizeData:b.iconSizeData,ne=u.ak(ee,n.transform.zoom),ye=[256/n.width*2+1,256/n.height*2+1],ge=s?b.text.dynamicLayoutVertexArray:b.icon.dynamicLayoutVertexArray;ge.clear();const _e=b.lineVertexArray,Ee=s?b.text.placedSymbolArray:b.icon.placedSymbolArray,De=n.transform.width/n.transform.height;let ze=!1;for(let je=0;je<Ee.length;je++){const Ue=Ee.get(je);if(Ue.hidden||Ue.writingMode===u.al.vertical&&!ze){rr(Ue.numGlyphs,ge);continue}ze=!1;const Fe=new u.P(Ue.anchorX,Ue.anchorY),it={getElevation:H,pitchedLabelPlaneMatrix:p,lineVertexArray:_e,pitchWithMap:w,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:n.transform,tileAnchorPoint:Fe,unwrappedTileID:k,width:L,height:F,translation:q},Tt=tn(Ue.anchorX,Ue.anchorY,it);if(!cn(Tt.point,ye)){rr(Ue.numGlyphs,ge);continue}const gt=dn(n.transform.cameraToCenterDistance,Tt.signedDistanceFromCamera),dt=u.am(ee,ne,Ue),vt=w?dt*n.transform.getPitchedTextCorrection(Ue.anchorX,Ue.anchorY,k)/gt:dt*gt,Jt=Ht({projectionContext:it,pitchedLabelPlaneMatrixInverse:y,symbol:Ue,fontSize:vt,flip:!1,keepUpright:T,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:De,rotateToLine:R});ze=Jt.useVertical,(Jt.notEnoughRoom||ze||Jt.needsFlipping&&Ht({projectionContext:it,pitchedLabelPlaneMatrixInverse:y,symbol:Ue,fontSize:vt,flip:!0,keepUpright:T,glyphOffsetArray:b.glyphOffsetArray,dynamicLayoutVertexArray:ge,aspectRatio:De,rotateToLine:R}).notEnoughRoom)&&rr(Ue.numGlyphs,ge)}s?b.text.dynamicLayoutVertexBuffer.updateData(ge):b.icon.dynamicLayoutVertexBuffer.updateData(ge)}function Wt(b,n,s,p,y,w,T,R){const k=w.glyphStartIndex+w.numGlyphs,L=w.lineStartIndex,F=w.lineStartIndex+w.lineLength,q=n.getoffsetX(w.glyphStartIndex),H=n.getoffsetX(k-1),ee=Wn(b*q,s,p,y,w.segment,L,F,R,T);if(!ee)return null;const ne=Wn(b*H,s,p,y,w.segment,L,F,R,T);return ne?R.projectionCache.anyProjectionOccluded?null:{first:ee,last:ne}:null}function at(b,n,s,p){return b===u.al.horizontal&&Math.abs(s.y-n.y)>Math.abs(s.x-n.x)*p?{useVertical:!0}:(b===u.al.vertical?n.y<s.y:n.x>s.x)?{needsFlipping:!0}:null}function Ht(b){const{projectionContext:n,pitchedLabelPlaneMatrixInverse:s,symbol:p,fontSize:y,flip:w,keepUpright:T,glyphOffsetArray:R,dynamicLayoutVertexArray:k,aspectRatio:L,rotateToLine:F}=b,q=y/24,H=p.lineOffsetX*q,ee=p.lineOffsetY*q;let ne;if(p.numGlyphs>1){const ye=p.glyphStartIndex+p.numGlyphs,ge=p.lineStartIndex,_e=p.lineStartIndex+p.lineLength,Ee=Wt(q,R,H,ee,w,p,F,n);if(!Ee)return{notEnoughRoom:!0};const De=Bn(Ee.first.point.x,Ee.first.point.y,n,s),ze=Bn(Ee.last.point.x,Ee.last.point.y,n,s);if(T&&!w){const je=at(p.writingMode,De,ze,L);if(je)return je}ne=[Ee.first];for(let je=p.glyphStartIndex+1;je<ye-1;je++)ne.push(Wn(q*R.getoffsetX(je),H,ee,w,p.segment,ge,_e,n,F));ne.push(Ee.last)}else{if(T&&!w){const ge=pn(n.tileAnchorPoint.x,n.tileAnchorPoint.y,n).point,_e=p.lineStartIndex+p.segment+1,Ee=new u.P(n.lineVertexArray.getx(_e),n.lineVertexArray.gety(_e)),De=pn(Ee.x,Ee.y,n),ze=De.signedDistanceFromCamera>0?De.point:an(n.tileAnchorPoint,Ee,ge,1,n),je=Bn(ge.x,ge.y,n,s),Ue=Bn(ze.x,ze.y,n,s),Fe=at(p.writingMode,je,Ue,L);if(Fe)return Fe}const ye=Wn(q*R.getoffsetX(p.glyphStartIndex),H,ee,w,p.segment,p.lineStartIndex,p.lineStartIndex+p.lineLength,n,F);if(!ye||n.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};ne=[ye]}for(const ye of ne)u.as(k,ye.point,ye.angle);return{}}function an(b,n,s,p,y){const w=b.add(b.sub(n)._unit()),T=pn(w.x,w.y,y).point,R=s.sub(T);return s.add(R._mult(p/R.mag()))}function Cn(b,n,s){const p=n.projectionCache;if(p.projections[b])return p.projections[b];const y=new u.P(n.lineVertexArray.getx(b),n.lineVertexArray.gety(b)),w=pn(y.x,y.y,n);if(w.signedDistanceFromCamera>0)return p.projections[b]=w.point,p.anyProjectionOccluded=p.anyProjectionOccluded||w.isOccluded,w.point;const T=b-s.direction;return an(s.distanceFromAnchor===0?n.tileAnchorPoint:new u.P(n.lineVertexArray.getx(T),n.lineVertexArray.gety(T)),y,s.previousVertex,s.absOffsetX-s.distanceFromAnchor+1,n)}function pn(b,n,s){const p=b+s.translation[0],y=n+s.translation[1];let w;return s.pitchWithMap?(w=qe(p,y,s.pitchedLabelPlaneMatrix,s.getElevation),w.isOccluded=!1):(w=s.transform.projectTileCoordinates(p,y,s.unwrappedTileID,s.getElevation),w.point.x=(.5*w.point.x+.5)*s.width,w.point.y=(.5*-w.point.y+.5)*s.height),w}function Bn(b,n,s,p){if(s.pitchWithMap){const y=[b,n,0,1];return u.at(y,y,p),s.transform.projectTileCoordinates(y[0]/y[3],y[1]/y[3],s.unwrappedTileID,s.getElevation).point}return{x:b/s.width*2-1,y:n/s.height*2-1}}function tn(b,n,s){return s.transform.projectTileCoordinates(b,n,s.unwrappedTileID,s.getElevation)}function xr(b,n,s){return b._unit()._perp()._mult(n*s)}function mi(b,n,s,p,y,w,T,R,k){if(R.projectionCache.offsets[b])return R.projectionCache.offsets[b];const L=s.add(n);if(b+k.direction<p||b+k.direction>=y)return R.projectionCache.offsets[b]=L,L;const F=Cn(b+k.direction,R,k),q=xr(F.sub(s),T,k.direction),H=s.add(q),ee=F.add(q);return R.projectionCache.offsets[b]=u.au(w,L,H,ee)||L,R.projectionCache.offsets[b]}function Wn(b,n,s,p,y,w,T,R,k){const L=p?b-n:b+n;let F=L>0?1:-1,q=0;p&&(F*=-1,q=Math.PI),F<0&&(q+=Math.PI);let H,ee=F>0?w+y:w+y+1;R.projectionCache.cachedAnchorPoint?H=R.projectionCache.cachedAnchorPoint:(H=pn(R.tileAnchorPoint.x,R.tileAnchorPoint.y,R).point,R.projectionCache.cachedAnchorPoint=H);let ne,ye,ge=H,_e=H,Ee=0,De=0;const ze=Math.abs(L),je=[];let Ue;for(;Ee+De<=ze;){if(ee+=F,ee<w||ee>=T)return null;Ee+=De,_e=ge,ye=ne;const Tt={absOffsetX:ze,direction:F,distanceFromAnchor:Ee,previousVertex:_e};if(ge=Cn(ee,R,Tt),s===0)je.push(_e),Ue=ge.sub(_e);else{let gt;const dt=ge.sub(_e);gt=dt.mag()===0?xr(Cn(ee+F,R,Tt).sub(ge),s,F):xr(dt,s,F),ye||(ye=_e.add(gt)),ne=mi(ee,gt,ge,w,T,ye,s,R,Tt),je.push(ye),Ue=ne.sub(ye)}De=Ue.mag()}const Fe=Ue._mult((ze-Ee)/De)._add(ye||_e),it=q+Math.atan2(ge.y-_e.y,ge.x-_e.x);return je.push(Fe),{point:Fe,angle:k?it:0,path:je}}const Xn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function rr(b,n){for(let s=0;s<b;s++){const p=n.length;n.resize(p+4),n.float32.set(Xn,3*p)}}function lr(b,n,s){const p=n[0],y=n[1];return b[0]=s[0]*p+s[4]*y+s[12],b[1]=s[1]*p+s[5]*y+s[13],b[3]=s[3]*p+s[7]*y+s[15],b}const On=100;class cr{constructor(n,s=new Mt(n.width+200,n.height+200,25),p=new Mt(n.width+200,n.height+200,25)){this.transform=n,this.grid=s,this.ignoredGrid=p,this.pitchFactor=Math.cos(n.pitch*Math.PI/180)*n.cameraToCenterDistance,this.screenRightBoundary=n.width+On,this.screenBottomBoundary=n.height+On,this.gridRightBoundary=n.width+200,this.gridBottomBoundary=n.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(n,s,p,y,w,T,R,k,L,F,q,H){const ee=this.projectAndGetPerspectiveRatio(n.anchorPointX+k[0],n.anchorPointY+k[1],w,F,H),ne=p*ee.perspectiveRatio;let ye;if(T||R)ye=this._projectCollisionBox(n,ne,y,w,T,R,k,ee,F,q,H);else{const Ue=ee.x+(q?q.x*ne:0),Fe=ee.y+(q?q.y*ne:0);ye={allPointsOccluded:!1,box:[Ue+n.x1*ne,Fe+n.y1*ne,Ue+n.x2*ne,Fe+n.y2*ne]}}const[ge,_e,Ee,De]=ye.box,ze=T?ye.allPointsOccluded:ee.isOccluded;let je=ze;return je||(je=ee.perspectiveRatio<this.perspectiveRatioCutoff),je||(je=!this.isInsideGrid(ge,_e,Ee,De)),je||s!=="always"&&this.grid.hitTest(ge,_e,Ee,De,s,L)?{box:[ge,_e,Ee,De],placeable:!1,offscreen:!1,occluded:ze}:{box:[ge,_e,Ee,De],placeable:!0,offscreen:this.isOffscreen(ge,_e,Ee,De),occluded:ze}}placeCollisionCircles(n,s,p,y,w,T,R,k,L,F,q,H,ee,ne){const ye=[],ge=new u.P(s.anchorX,s.anchorY),_e=this.getPerspectiveRatio(ge.x,ge.y,T,ne),Ee=(L?w*this.transform.getPitchedTextCorrection(s.anchorX,s.anchorY,T)/_e:w*_e)/u.ay,De={getElevation:ne,pitchedLabelPlaneMatrix:R,lineVertexArray:p,pitchWithMap:L,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:ge,unwrappedTileID:T,width:this.transform.width,height:this.transform.height,translation:ee},ze=Wt(Ee,y,s.lineOffsetX*Ee,s.lineOffsetY*Ee,!1,s,!1,De);let je=!1,Ue=!1,Fe=!0;if(ze){const it=.5*q*_e+H,Tt=new u.P(-100,-100),gt=new u.P(this.screenRightBoundary,this.screenBottomBoundary),dt=new Ye,vt=ze.first,Jt=ze.last;let Yt=[];for(let $n=vt.path.length-1;$n>=1;$n--)Yt.push(vt.path[$n]);for(let $n=1;$n<Jt.path.length;$n++)Yt.push(Jt.path[$n]);const Dt=2.5*it;if(L){const $n=this.projectPathToScreenSpace(Yt,De);Yt=$n.some(Qn=>Qn.signedDistanceFromCamera<=0)?[]:$n.map(Qn=>Qn.point)}let un=[];if(Yt.length>0){const $n=Yt[0].clone(),Qn=Yt[0].clone();for(let ei=1;ei<Yt.length;ei++)$n.x=Math.min($n.x,Yt[ei].x),$n.y=Math.min($n.y,Yt[ei].y),Qn.x=Math.max(Qn.x,Yt[ei].x),Qn.y=Math.max(Qn.y,Yt[ei].y);un=$n.x>=Tt.x&&Qn.x<=gt.x&&$n.y>=Tt.y&&Qn.y<=gt.y?[Yt]:Qn.x<Tt.x||$n.x>gt.x||Qn.y<Tt.y||$n.y>gt.y?[]:u.av([Yt],Tt.x,Tt.y,gt.x,gt.y)}for(const $n of un){dt.reset($n,.25*it);let Qn=0;Qn=dt.length<=.5*it?1:Math.ceil(dt.paddedLength/Dt)+1;for(let ei=0;ei<Qn;ei++){const Mr=ei/Math.max(Qn-1,1),ti=dt.lerp(Mr),qr=ti.x+On,Ir=ti.y+On;ye.push(qr,Ir,it,0);const fr=qr-it,Ai=Ir-it,$i=qr+it,Wi=Ir+it;if(Fe=Fe&&this.isOffscreen(fr,Ai,$i,Wi),Ue=Ue||this.isInsideGrid(fr,Ai,$i,Wi),n!=="always"&&this.grid.hitTestCircle(qr,Ir,it,n,F)&&(je=!0,!k))return{circles:[],offscreen:!1,collisionDetected:je}}}}return{circles:!k&&je||!Ue||_e<this.perspectiveRatioCutoff?[]:ye,offscreen:Fe,collisionDetected:je}}projectPathToScreenSpace(n,s){const p=function(y,w){const T=u.K();return u.an(T,w.pitchedLabelPlaneMatrix),y.map(R=>{const k=qe(R.x,R.y,T,w.getElevation),L=w.transform.projectTileCoordinates(k.point.x,k.point.y,w.unwrappedTileID,w.getElevation);return L.point.x=(.5*L.point.x+.5)*w.width,L.point.y=(.5*-L.point.y+.5)*w.height,L})}(n,s);return function(y){let w=0,T=0,R=0,k=0;for(let L=0;L<y.length;L++)y[L].isOccluded?(R=L+1,k=0):(k++,k>T&&(T=k,w=R));return y.slice(w,w+T)}(p)}queryRenderedSymbols(n){if(n.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const s=[];let p=1/0,y=1/0,w=-1/0,T=-1/0;for(const F of n){const q=new u.P(F.x+On,F.y+On);p=Math.min(p,q.x),y=Math.min(y,q.y),w=Math.max(w,q.x),T=Math.max(T,q.y),s.push(q)}const R=this.grid.query(p,y,w,T).concat(this.ignoredGrid.query(p,y,w,T)),k={},L={};for(const F of R){const q=F.key;if(k[q.bucketInstanceId]===void 0&&(k[q.bucketInstanceId]={}),k[q.bucketInstanceId][q.featureIndex])continue;const H=[new u.P(F.x1,F.y1),new u.P(F.x2,F.y1),new u.P(F.x2,F.y2),new u.P(F.x1,F.y2)];u.aw(s,H)&&(k[q.bucketInstanceId][q.featureIndex]=!0,L[q.bucketInstanceId]===void 0&&(L[q.bucketInstanceId]=[]),L[q.bucketInstanceId].push(q.featureIndex))}return L}insertCollisionBox(n,s,p,y,w,T){(p?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:w,collisionGroupID:T,overlapMode:s},n[0],n[1],n[2],n[3])}insertCollisionCircles(n,s,p,y,w,T){const R=p?this.ignoredGrid:this.grid,k={bucketInstanceId:y,featureIndex:w,collisionGroupID:T,overlapMode:s};for(let L=0;L<n.length;L+=4)R.insertCircle(k,n[L],n[L+1],n[L+2])}projectAndGetPerspectiveRatio(n,s,p,y,w){if(w){let T;y?(T=[n,s,y(n,s),1],u.at(T,T,w)):(T=[n,s,0,1],lr(T,T,w));const R=T[3];return{x:(T[0]/R+1)/2*this.transform.width+On,y:(-T[1]/R+1)/2*this.transform.height+On,perspectiveRatio:.5+this.transform.cameraToCenterDistance/R*.5,isOccluded:!1,signedDistanceFromCamera:R}}{const T=this.transform.projectTileCoordinates(n,s,p,y);return{x:(T.point.x+1)/2*this.transform.width+On,y:(1-T.point.y)/2*this.transform.height+On,perspectiveRatio:.5+this.transform.cameraToCenterDistance/T.signedDistanceFromCamera*.5,isOccluded:T.isOccluded,signedDistanceFromCamera:T.signedDistanceFromCamera}}}getPerspectiveRatio(n,s,p,y){const w=this.transform.projectTileCoordinates(n,s,p,y);return .5+this.transform.cameraToCenterDistance/w.signedDistanceFromCamera*.5}isOffscreen(n,s,p,y){return p<On||n>=this.screenRightBoundary||y<On||s>this.screenBottomBoundary}isInsideGrid(n,s,p,y){return p>=0&&n<this.gridRightBoundary&&y>=0&&s<this.gridBottomBoundary}getViewportMatrix(){const n=u.ad([]);return u.L(n,n,[-100,-100,0]),n}_projectCollisionBox(n,s,p,y,w,T,R,k,L,F,q){let H=1,ee=0,ne=0,ye=1;const ge=n.anchorPointX+R[0],_e=n.anchorPointY+R[1];if(T&&!w){const Yt=this.projectAndGetPerspectiveRatio(ge+1,_e,y,L,q),Dt=Yt.x-k.x,un=Math.atan((Yt.y-k.y)/Dt)+(Dt<0?Math.PI:0),$n=Math.sin(un),Qn=Math.cos(un);H=Qn,ee=$n,ne=-$n,ye=Qn}else if(!T&&w){const Yt=It(this.transform);H=Yt.vecEast[0],ee=Yt.vecEast[1],ne=Yt.vecSouth[0],ye=Yt.vecSouth[1]}let Ee=k.x,De=k.y,ze=s;w&&(Ee=ge,De=_e,ze=Math.pow(2,-(this.transform.zoom-p.overscaledZ)),ze*=this.transform.getPitchedTextCorrection(ge,_e,y),F||(ze*=u.ae(.5+k.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),F&&(Ee+=H*F.x*ze+ne*F.y*ze,De+=ee*F.x*ze+ye*F.y*ze);const je=n.x1*ze,Ue=n.x2*ze,Fe=(je+Ue)/2,it=n.y1*ze,Tt=n.y2*ze,gt=(it+Tt)/2,dt=[{offsetX:je,offsetY:it},{offsetX:Fe,offsetY:it},{offsetX:Ue,offsetY:it},{offsetX:Ue,offsetY:gt},{offsetX:Ue,offsetY:Tt},{offsetX:Fe,offsetY:Tt},{offsetX:je,offsetY:Tt},{offsetX:je,offsetY:gt}];let vt=[];for(const{offsetX:Yt,offsetY:Dt}of dt)vt.push(new u.P(Ee+H*Yt+ne*Dt,De+ee*Yt+ye*Dt));let Jt=!1;if(w){const Yt=vt.map(Dt=>this.projectAndGetPerspectiveRatio(Dt.x,Dt.y,y,L,q));Jt=Yt.some(Dt=>!Dt.isOccluded),vt=Yt.map(Dt=>new u.P(Dt.x,Dt.y))}else Jt=!0;return{box:u.ax(vt),allPointsOccluded:!Jt}}}class Dn{constructor(n,s,p,y){this.opacity=n?Math.max(0,Math.min(1,n.opacity+(n.placed?s:-s))):y&&p?1:0,this.placed=p}isHidden(){return this.opacity===0&&!this.placed}}class Rr{constructor(n,s,p,y,w){this.text=new Dn(n?n.text:null,s,p,w),this.icon=new Dn(n?n.icon:null,s,y,w)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yr{constructor(n,s,p){this.text=n,this.icon=s,this.skipFade=p}}class Na{constructor(n,s,p,y,w){this.bucketInstanceId=n,this.featureIndex=s,this.sourceLayerIndex=p,this.bucketIndex=y,this.tileID=w}}class Di{constructor(n){this.crossSourceCollisions=n,this.maxGroupID=0,this.collisionGroups={}}get(n){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[n]){const s=++this.maxGroupID;this.collisionGroups[n]={ID:s,predicate:p=>p.collisionGroupID===s}}return this.collisionGroups[n]}}function ci(b,n,s,p,y){const{horizontalAlign:w,verticalAlign:T}=u.aE(b);return new u.P(-(w-.5)*n+p[0]*y,-(T-.5)*s+p[1]*y)}class Ca{constructor(n,s,p,y,w){this.transform=n.clone(),this.terrain=s,this.collisionIndex=new cr(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=p,this.retainedQueryData={},this.collisionGroups=new Di(y),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=w,w&&(w.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(n){const s=this.terrain;return s?(p,y)=>s.getElevation(n,p,y):null}getBucketParts(n,s,p,y){const w=p.getBucket(s),T=p.latestFeatureIndex;if(!w||!T||s.id!==w.layerIds[0])return;const R=p.collisionBoxArray,k=w.layers[0].layout,L=w.layers[0].paint,F=Math.pow(2,this.transform.zoom-p.tileID.overscaledZ),q=p.tileSize/u.Z,H=p.tileID.toUnwrapped(),ee=k.get("text-rotation-alignment")==="map",ne=u.az(p,1,this.transform.zoom),ye=u.aA(this.collisionIndex.transform,p,L.get("text-translate"),L.get("text-translate-anchor")),ge=u.aA(this.collisionIndex.transform,p,L.get("icon-translate"),L.get("icon-translate-anchor")),_e=Ot(ee,this.transform,ne);this.retainedQueryData[w.bucketInstanceId]=new Na(w.bucketInstanceId,T,w.sourceLayerIndex,w.index,p.tileID);const Ee={bucket:w,layout:k,translationText:ye,translationIcon:ge,unwrappedTileID:H,pitchedLabelPlaneMatrix:_e,scale:F,textPixelRatio:q,holdingForFade:p.holdingForFade(),collisionBoxArray:R,partiallyEvaluatedTextSize:u.ak(w.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(w.sourceID)};if(y)for(const De of w.sortKeyRanges){const{sortKey:ze,symbolInstanceStart:je,symbolInstanceEnd:Ue}=De;n.push({sortKey:ze,symbolInstanceStart:je,symbolInstanceEnd:Ue,parameters:Ee})}else n.push({symbolInstanceStart:0,symbolInstanceEnd:w.symbolInstances.length,parameters:Ee})}attemptAnchorPlacement(n,s,p,y,w,T,R,k,L,F,q,H,ee,ne,ye,ge,_e,Ee,De,ze){const je=u.aB[n.textAnchor],Ue=[n.textOffset0,n.textOffset1],Fe=ci(je,p,y,Ue,w),it=this.collisionIndex.placeCollisionBox(s,H,k,L,F,R,T,ge,q.predicate,De,Fe,ze);if((!Ee||this.collisionIndex.placeCollisionBox(Ee,H,k,L,F,R,T,_e,q.predicate,De,Fe,ze).placeable)&&it.placeable){let Tt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID]&&this.prevPlacement.placements[ee.crossTileID].text&&(Tt=this.prevPlacement.variableOffsets[ee.crossTileID].anchor),ee.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ee.crossTileID]={textOffset:Ue,width:p,height:y,anchor:je,textBoxScale:w,prevAnchor:Tt},this.markUsedJustification(ne,je,ee,ye),ne.allowVerticalPlacement&&(this.markUsedOrientation(ne,ye,ee),this.placedOrientations[ee.crossTileID]=ye),{shift:Fe,placedGlyphBoxes:it}}}placeLayerBucketPart(n,s,p){const{bucket:y,layout:w,translationText:T,translationIcon:R,unwrappedTileID:k,pitchedLabelPlaneMatrix:L,textPixelRatio:F,holdingForFade:q,collisionBoxArray:H,partiallyEvaluatedTextSize:ee,collisionGroup:ne}=n.parameters,ye=w.get("text-optional"),ge=w.get("icon-optional"),_e=u.aC(w,"text-overlap","text-allow-overlap"),Ee=_e==="always",De=u.aC(w,"icon-overlap","icon-allow-overlap"),ze=De==="always",je=w.get("text-rotation-alignment")==="map",Ue=w.get("text-pitch-alignment")==="map",Fe=w.get("icon-text-fit")!=="none",it=w.get("symbol-z-order")==="viewport-y",Tt=Ee&&(ze||!y.hasIconData()||ge),gt=ze&&(Ee||!y.hasTextData()||ye);!y.collisionArrays&&H&&y.deserializeCollisionBoxes(H);const dt=this.retainedQueryData[y.bucketInstanceId].tileID,vt=this._getTerrainElevationFunc(dt),Jt=this.transform.getFastPathSimpleProjectionMatrix(dt),Yt=(Dt,un,$n)=>{var Qn,ei;if(s[Dt.crossTileID])return;if(q)return void(this.placements[Dt.crossTileID]=new Yr(!1,!1,!1));let Mr=!1,ti=!1,qr=!0,Ir=null,fr={box:null,placeable:!1,offscreen:null,occluded:!1},Ai={placeable:!1},$i=null,Wi=null,mr=null,us=0,No=0,Ls=0;un.textFeatureIndex?us=un.textFeatureIndex:Dt.useRuntimeCollisionCircles&&(us=Dt.featureIndex),un.verticalTextFeatureIndex&&(No=un.verticalTextFeatureIndex);const Bs=un.textBox;if(Bs){const eo=fi=>{let Pi=u.al.horizontal;if(y.allowVerticalPlacement&&!fi&&this.prevPlacement){const da=this.prevPlacement.placedOrientations[Dt.crossTileID];da&&(this.placedOrientations[Dt.crossTileID]=da,Pi=da,this.markUsedOrientation(y,Pi,Dt))}return Pi},js=(fi,Pi)=>{if(y.allowVerticalPlacement&&Dt.numVerticalGlyphVertices>0&&un.verticalTextBox){for(const da of y.writingModes)if(da===u.al.vertical?(fr=Pi(),Ai=fr):fr=fi(),fr&&fr.placeable)break}else fr=fi()},to=Dt.textAnchorOffsetStartIndex,hs=Dt.textAnchorOffsetEndIndex;if(hs===to){const fi=(Pi,da)=>{const Ar=this.collisionIndex.placeCollisionBox(Pi,_e,F,dt,k,Ue,je,T,ne.predicate,vt,void 0,Jt);return Ar&&Ar.placeable&&(this.markUsedOrientation(y,da,Dt),this.placedOrientations[Dt.crossTileID]=da),Ar};js(()=>fi(Bs,u.al.horizontal),()=>{const Pi=un.verticalTextBox;return y.allowVerticalPlacement&&Dt.numVerticalGlyphVertices>0&&Pi?fi(Pi,u.al.vertical):{box:null,offscreen:null}}),eo(fr&&fr.placeable)}else{let fi=u.aB[(ei=(Qn=this.prevPlacement)===null||Qn===void 0?void 0:Qn.variableOffsets[Dt.crossTileID])===null||ei===void 0?void 0:ei.anchor];const Pi=(Ar,dh,ud)=>{const bp=Ar.x2-Ar.x1,fu=Ar.y2-Ar.y1,pc=Dt.textBoxScale,_l=Fe&&De==="never"?dh:null;let pa=null,no=_e==="never"?1:2,ro="never";fi&&no++;for(let fs=0;fs<no;fs++){for(let Fs=to;Fs<hs;Fs++){const $s=y.textAnchorOffsets.get(Fs);if(fi&&$s.textAnchor!==fi)continue;const Ua=this.attemptAnchorPlacement($s,Ar,bp,fu,pc,je,Ue,F,dt,k,ne,ro,Dt,y,ud,T,R,_l,vt);if(Ua&&(pa=Ua.placedGlyphBoxes,pa&&pa.placeable))return Mr=!0,Ir=Ua.shift,pa}fi?fi=null:ro=_e}return p&&!pa&&(pa={box:this.collisionIndex.placeCollisionBox(Bs,"always",F,dt,k,Ue,je,T,ne.predicate,vt,void 0,Jt).box,offscreen:!1,placeable:!1,occluded:!1}),pa};js(()=>Pi(Bs,un.iconBox,u.al.horizontal),()=>{const Ar=un.verticalTextBox;return y.allowVerticalPlacement&&(!fr||!fr.placeable)&&Dt.numVerticalGlyphVertices>0&&Ar?Pi(Ar,un.verticalIconBox,u.al.vertical):{box:null,occluded:!0,offscreen:null}}),fr&&(Mr=fr.placeable,qr=fr.offscreen);const da=eo(fr&&fr.placeable);if(!Mr&&this.prevPlacement){const Ar=this.prevPlacement.variableOffsets[Dt.crossTileID];Ar&&(this.variableOffsets[Dt.crossTileID]=Ar,this.markUsedJustification(y,Ar.anchor,Dt,da))}}}if($i=fr,Mr=$i&&$i.placeable,qr=$i&&$i.offscreen,Dt.useRuntimeCollisionCircles){const eo=y.text.placedSymbolArray.get(Dt.centerJustifiedTextSymbolIndex),js=u.am(y.textSizeData,ee,eo),to=w.get("text-padding");Wi=this.collisionIndex.placeCollisionCircles(_e,eo,y.lineVertexArray,y.glyphOffsetArray,js,k,L,p,Ue,ne.predicate,Dt.collisionCircleDiameter,to,T,vt),Wi.circles.length&&Wi.collisionDetected&&!p&&u.w("Collisions detected, but collision boxes are not shown"),Mr=Ee||Wi.circles.length>0&&!Wi.collisionDetected,qr=qr&&Wi.offscreen}if(un.iconFeatureIndex&&(Ls=un.iconFeatureIndex),un.iconBox){const eo=js=>this.collisionIndex.placeCollisionBox(js,De,F,dt,k,Ue,je,R,ne.predicate,vt,Fe&&Ir?Ir:void 0,Jt);Ai&&Ai.placeable&&un.verticalIconBox?(mr=eo(un.verticalIconBox),ti=mr.placeable):(mr=eo(un.iconBox),ti=mr.placeable),qr=qr&&mr.offscreen}const hu=ye||Dt.numHorizontalGlyphVertices===0&&Dt.numVerticalGlyphVertices===0,Ns=ge||Dt.numIconVertices===0;hu||Ns?Ns?hu||(ti=ti&&Mr):Mr=ti&&Mr:ti=Mr=ti&&Mr;const dc=ti&&mr.placeable;if(Mr&&$i.placeable&&this.collisionIndex.insertCollisionBox($i.box,_e,w.get("text-ignore-placement"),y.bucketInstanceId,Ai&&Ai.placeable&&No?No:us,ne.ID),dc&&this.collisionIndex.insertCollisionBox(mr.box,De,w.get("icon-ignore-placement"),y.bucketInstanceId,Ls,ne.ID),Wi&&Mr&&this.collisionIndex.insertCollisionCircles(Wi.circles,_e,w.get("text-ignore-placement"),y.bucketInstanceId,us,ne.ID),p&&this.storeCollisionData(y.bucketInstanceId,$n,un,$i,mr,Wi),Dt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(y.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Dt.crossTileID]=new Yr((Mr||Tt)&&!($i!=null&&$i.occluded),(ti||gt)&&!(mr!=null&&mr.occluded),qr||y.justReloaded),s[Dt.crossTileID]=!0};if(it){if(n.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Dt=y.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let un=Dt.length-1;un>=0;--un){const $n=Dt[un];Yt(y.symbolInstances.get($n),y.collisionArrays[$n],$n)}}else for(let Dt=n.symbolInstanceStart;Dt<n.symbolInstanceEnd;Dt++)Yt(y.symbolInstances.get(Dt),y.collisionArrays[Dt],Dt);y.justReloaded=!1}storeCollisionData(n,s,p,y,w,T){if(p.textBox||p.iconBox){let R,k;this.collisionBoxArrays.has(n)?R=this.collisionBoxArrays.get(n):(R=new Map,this.collisionBoxArrays.set(n,R)),R.has(s)?k=R.get(s):(k={text:null,icon:null},R.set(s,k)),p.textBox&&(k.text=y.box),p.iconBox&&(k.icon=w.box)}if(T){let R=this.collisionCircleArrays[n];R===void 0&&(R=this.collisionCircleArrays[n]=[]);for(let k=0;k<T.circles.length;k+=4)R.push(T.circles[k+0]-On),R.push(T.circles[k+1]-On),R.push(T.circles[k+2]),R.push(T.collisionDetected?1:0)}}markUsedJustification(n,s,p,y){let w;w=y===u.al.vertical?p.verticalPlacedTextSymbolIndex:{left:p.leftJustifiedTextSymbolIndex,center:p.centerJustifiedTextSymbolIndex,right:p.rightJustifiedTextSymbolIndex}[u.aD(s)];const T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex,p.verticalPlacedTextSymbolIndex];for(const R of T)R>=0&&(n.text.placedSymbolArray.get(R).crossTileID=w>=0&&R!==w?0:p.crossTileID)}markUsedOrientation(n,s,p){const y=s===u.al.horizontal||s===u.al.horizontalOnly?s:0,w=s===u.al.vertical?s:0,T=[p.leftJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.rightJustifiedTextSymbolIndex];for(const R of T)n.text.placedSymbolArray.get(R).placedOrientation=y;p.verticalPlacedTextSymbolIndex&&(n.text.placedSymbolArray.get(p.verticalPlacedTextSymbolIndex).placedOrientation=w)}commit(n){this.commitTime=n,this.zoomAtLastRecencyCheck=this.transform.zoom;const s=this.prevPlacement;let p=!1;this.prevZoomAdjustment=s?s.zoomAdjustment(this.transform.zoom):0;const y=s?s.symbolFadeChange(n):1,w=s?s.opacities:{},T=s?s.variableOffsets:{},R=s?s.placedOrientations:{};for(const k in this.placements){const L=this.placements[k],F=w[k];F?(this.opacities[k]=new Rr(F,y,L.text,L.icon),p=p||L.text!==F.text.placed||L.icon!==F.icon.placed):(this.opacities[k]=new Rr(null,y,L.text,L.icon,L.skipFade),p=p||L.text||L.icon)}for(const k in w){const L=w[k];if(!this.opacities[k]){const F=new Rr(L,y,!1,!1);F.isHidden()||(this.opacities[k]=F,p=p||L.text.placed||L.icon.placed)}}for(const k in T)this.variableOffsets[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.variableOffsets[k]=T[k]);for(const k in R)this.placedOrientations[k]||!this.opacities[k]||this.opacities[k].isHidden()||(this.placedOrientations[k]=R[k]);if(s&&s.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");p?this.lastPlacementChangeTime=n:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=s?s.lastPlacementChangeTime:n)}updateLayerOpacities(n,s){const p={};for(const y of s){const w=y.getBucket(n);w&&y.latestFeatureIndex&&n.id===w.layerIds[0]&&this.updateBucketOpacities(w,y.tileID,p,y.collisionBoxArray)}}updateBucketOpacities(n,s,p,y){n.hasTextData()&&(n.text.opacityVertexArray.clear(),n.text.hasVisibleVertices=!1),n.hasIconData()&&(n.icon.opacityVertexArray.clear(),n.icon.hasVisibleVertices=!1),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexArray.clear(),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexArray.clear();const w=n.layers[0],T=w.layout,R=new Rr(null,0,!1,!1,!0),k=T.get("text-allow-overlap"),L=T.get("icon-allow-overlap"),F=w._unevaluatedLayout.hasValue("text-variable-anchor")||w._unevaluatedLayout.hasValue("text-variable-anchor-offset"),q=T.get("text-rotation-alignment")==="map",H=T.get("text-pitch-alignment")==="map",ee=T.get("icon-text-fit")!=="none",ne=new Rr(null,0,k&&(L||!n.hasIconData()||T.get("icon-optional")),L&&(k||!n.hasTextData()||T.get("text-optional")),!0);!n.collisionArrays&&y&&(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData())&&n.deserializeCollisionBoxes(y);const ye=(_e,Ee,De)=>{for(let ze=0;ze<Ee/4;ze++)_e.opacityVertexArray.emplaceBack(De);_e.hasVisibleVertices=_e.hasVisibleVertices||De!==fo},ge=this.collisionBoxArrays.get(n.bucketInstanceId);for(let _e=0;_e<n.symbolInstances.length;_e++){const Ee=n.symbolInstances.get(_e),{numHorizontalGlyphVertices:De,numVerticalGlyphVertices:ze,crossTileID:je}=Ee;let Ue=this.opacities[je];p[je]?Ue=R:Ue||(Ue=ne,this.opacities[je]=Ue),p[je]=!0;const Fe=Ee.numIconVertices>0,it=this.placedOrientations[Ee.crossTileID],Tt=it===u.al.vertical,gt=it===u.al.horizontal||it===u.al.horizontalOnly;if(De>0||ze>0){const vt=ja(Ue.text);ye(n.text,De,Tt?fo:vt),ye(n.text,ze,gt?fo:vt);const Jt=Ue.text.isHidden();[Ee.rightJustifiedTextSymbolIndex,Ee.centerJustifiedTextSymbolIndex,Ee.leftJustifiedTextSymbolIndex].forEach(un=>{un>=0&&(n.text.placedSymbolArray.get(un).hidden=Jt||Tt?1:0)}),Ee.verticalPlacedTextSymbolIndex>=0&&(n.text.placedSymbolArray.get(Ee.verticalPlacedTextSymbolIndex).hidden=Jt||gt?1:0);const Yt=this.variableOffsets[Ee.crossTileID];Yt&&this.markUsedJustification(n,Yt.anchor,Ee,it);const Dt=this.placedOrientations[Ee.crossTileID];Dt&&(this.markUsedJustification(n,"left",Ee,Dt),this.markUsedOrientation(n,Dt,Ee))}if(Fe){const vt=ja(Ue.icon),Jt=!(ee&&Ee.verticalPlacedIconSymbolIndex&&Tt);Ee.placedIconSymbolIndex>=0&&(ye(n.icon,Ee.numIconVertices,Jt?vt:fo),n.icon.placedSymbolArray.get(Ee.placedIconSymbolIndex).hidden=Ue.icon.isHidden()),Ee.verticalPlacedIconSymbolIndex>=0&&(ye(n.icon,Ee.numVerticalIconVertices,Jt?fo:vt),n.icon.placedSymbolArray.get(Ee.verticalPlacedIconSymbolIndex).hidden=Ue.icon.isHidden())}const dt=ge&&ge.has(_e)?ge.get(_e):{text:null,icon:null};if(n.hasIconCollisionBoxData()||n.hasTextCollisionBoxData()){const vt=n.collisionArrays[_e];if(vt){let Jt=new u.P(0,0);if(vt.textBox||vt.verticalTextBox){let Yt=!0;if(F){const Dt=this.variableOffsets[je];Dt?(Jt=ci(Dt.anchor,Dt.width,Dt.height,Dt.textOffset,Dt.textBoxScale),q&&Jt._rotate(H?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Yt=!1}if(vt.textBox||vt.verticalTextBox){let Dt;vt.textBox&&(Dt=Tt),vt.verticalTextBox&&(Dt=gt),Ta(n.textCollisionBox.collisionVertexArray,Ue.text.placed,!Yt||Dt,dt.text,Jt.x,Jt.y)}}if(vt.iconBox||vt.verticalIconBox){const Yt=!!(!gt&&vt.verticalIconBox);let Dt;vt.iconBox&&(Dt=Yt),vt.verticalIconBox&&(Dt=!Yt),Ta(n.iconCollisionBox.collisionVertexArray,Ue.icon.placed,Dt,dt.icon,ee?Jt.x:0,ee?Jt.y:0)}}}}if(n.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[n.bucketInstanceId]&&(this.retainedQueryData[n.bucketInstanceId].featureSortOrder=n.featureSortOrder),n.hasTextData()&&n.text.opacityVertexBuffer&&n.text.opacityVertexBuffer.updateData(n.text.opacityVertexArray),n.hasIconData()&&n.icon.opacityVertexBuffer&&n.icon.opacityVertexBuffer.updateData(n.icon.opacityVertexArray),n.hasIconCollisionBoxData()&&n.iconCollisionBox.collisionVertexBuffer&&n.iconCollisionBox.collisionVertexBuffer.updateData(n.iconCollisionBox.collisionVertexArray),n.hasTextCollisionBoxData()&&n.textCollisionBox.collisionVertexBuffer&&n.textCollisionBox.collisionVertexBuffer.updateData(n.textCollisionBox.collisionVertexArray),n.text.opacityVertexArray.length!==n.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${n.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${n.text.layoutVertexArray.length}) / 4`);if(n.icon.opacityVertexArray.length!==n.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${n.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${n.icon.layoutVertexArray.length}) / 4`);n.bucketInstanceId in this.collisionCircleArrays&&(n.collisionCircleArray=this.collisionCircleArrays[n.bucketInstanceId],delete this.collisionCircleArrays[n.bucketInstanceId])}symbolFadeChange(n){return this.fadeDuration===0?1:(n-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(n){return Math.max(0,(this.transform.zoom-n)/1.5)}hasTransitions(n){return this.stale||n-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(n,s){const p=this.zoomAtLastRecencyCheck===s?1-this.zoomAdjustment(s):1;return this.zoomAtLastRecencyCheck=s,this.commitTime+this.fadeDuration*p>n}setStale(){this.stale=!0}}function Ta(b,n,s,p,y,w){p&&p.length!==0||(p=[0,0,0,0]);const T=p[0]-On,R=p[1]-On,k=p[2]-On,L=p[3]-On;b.emplaceBack(n?1:0,s?1:0,y||0,w||0,T,R),b.emplaceBack(n?1:0,s?1:0,y||0,w||0,k,R),b.emplaceBack(n?1:0,s?1:0,y||0,w||0,k,L),b.emplaceBack(n?1:0,s?1:0,y||0,w||0,T,L)}const Vc=Math.pow(2,25),bs=Math.pow(2,24),Ea=Math.pow(2,17),Bh=Math.pow(2,16),op=Math.pow(2,9),ho=Math.pow(2,8),aa=Math.pow(2,1);function ja(b){if(b.opacity===0&&!b.placed)return 0;if(b.opacity===1&&b.placed)return 4294967295;const n=b.placed?1:0,s=Math.floor(127*b.opacity);return s*Vc+n*bs+s*Ea+n*Bh+s*op+n*ho+s*aa+n}const fo=0;class ri{constructor(n){this._sortAcrossTiles=n.layout.get("symbol-z-order")!=="viewport-y"&&!n.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(n,s,p,y,w){const T=this._bucketParts;for(;this._currentTileIndex<n.length;)if(s.getBucketParts(T,y,n[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,w())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,T.sort((R,k)=>R.sortKey-k.sortKey));this._currentPartIndex<T.length;)if(s.placeLayerBucketPart(T[this._currentPartIndex],this._seenCrossTileIDs,p),this._currentPartIndex++,w())return!0;return!1}}class Xo{constructor(n,s,p,y,w,T,R,k){this.placement=new Ca(n,s,T,R,k),this._currentPlacementIndex=p.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=w,this._done=!1}isDone(){return this._done}continuePlacement(n,s,p){const y=j.now(),w=()=>!this._forceFullPlacement&&j.now()-y>2;for(;this._currentPlacementIndex>=0;){const T=s[n[this._currentPlacementIndex]],R=this.placement.collisionIndex.transform.zoom;if(T.type==="symbol"&&(!T.minzoom||T.minzoom<=R)&&(!T.maxzoom||T.maxzoom>R)){if(this._inProgressLayer||(this._inProgressLayer=new ri(T)),this._inProgressLayer.continuePlacement(p[T.source],this.placement,this._showCollisionBoxes,T,w))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(n){return this.placement.commit(n),this.placement}}const oa=512/u.Z/2;class po{constructor(n,s,p){this.tileID=n,this.bucketInstanceId=p,this._symbolsByKey={};const y=new Map;for(let w=0;w<s.length;w++){const T=s.get(w),R=T.key,k=y.get(R);k?k.push(T):y.set(R,[T])}for(const[w,T]of y){const R={positions:T.map(k=>({x:Math.floor(k.anchorX*oa),y:Math.floor(k.anchorY*oa)})),crossTileIDs:T.map(k=>k.crossTileID)};if(R.positions.length>128){const k=new u.aF(R.positions.length,16,Uint16Array);for(const{x:L,y:F}of R.positions)k.add(L,F);k.finish(),delete R.positions,R.index=k}this._symbolsByKey[w]=R}}getScaledCoordinates(n,s){const{x:p,y,z:w}=this.tileID.canonical,{x:T,y:R,z:k}=s.canonical,L=oa/Math.pow(2,k-w),F=(R*u.Z+n.anchorY)*L,q=y*u.Z*oa;return{x:Math.floor((T*u.Z+n.anchorX)*L-p*u.Z*oa),y:Math.floor(F-q)}}findMatches(n,s,p){const y=this.tileID.canonical.z<s.canonical.z?1:Math.pow(2,this.tileID.canonical.z-s.canonical.z);for(let w=0;w<n.length;w++){const T=n.get(w);if(T.crossTileID)continue;const R=this._symbolsByKey[T.key];if(!R)continue;const k=this.getScaledCoordinates(T,s);if(R.index){const L=R.index.range(k.x-y,k.y-y,k.x+y,k.y+y).sort();for(const F of L){const q=R.crossTileIDs[F];if(!p[q]){p[q]=!0,T.crossTileID=q;break}}}else if(R.positions)for(let L=0;L<R.positions.length;L++){const F=R.positions[L],q=R.crossTileIDs[L];if(Math.abs(F.x-k.x)<=y&&Math.abs(F.y-k.y)<=y&&!p[q]){p[q]=!0,T.crossTileID=q;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map(({crossTileIDs:n})=>n)}}class Po{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class xs{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(n){const s=Math.round((n-this.lng)/360);if(s!==0)for(const p in this.indexes){const y=this.indexes[p],w={};for(const T in y){const R=y[T];R.tileID=R.tileID.unwrapTo(R.tileID.wrap+s),w[R.tileID.key]=R}this.indexes[p]=w}this.lng=n}addBucket(n,s,p){if(this.indexes[n.overscaledZ]&&this.indexes[n.overscaledZ][n.key]){if(this.indexes[n.overscaledZ][n.key].bucketInstanceId===s.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(n.overscaledZ,this.indexes[n.overscaledZ][n.key])}for(let w=0;w<s.symbolInstances.length;w++)s.symbolInstances.get(w).crossTileID=0;this.usedCrossTileIDs[n.overscaledZ]||(this.usedCrossTileIDs[n.overscaledZ]={});const y=this.usedCrossTileIDs[n.overscaledZ];for(const w in this.indexes){const T=this.indexes[w];if(Number(w)>n.overscaledZ)for(const R in T){const k=T[R];k.tileID.isChildOf(n)&&k.findMatches(s.symbolInstances,n,y)}else{const R=T[n.scaledTo(Number(w)).key];R&&R.findMatches(s.symbolInstances,n,y)}}for(let w=0;w<s.symbolInstances.length;w++){const T=s.symbolInstances.get(w);T.crossTileID||(T.crossTileID=p.generate(),y[T.crossTileID]=!0)}return this.indexes[n.overscaledZ]===void 0&&(this.indexes[n.overscaledZ]={}),this.indexes[n.overscaledZ][n.key]=new po(n,s.symbolInstances,s.bucketInstanceId),!0}removeBucketCrossTileIDs(n,s){for(const p of s.getCrossTileIDsLists())for(const y of p)delete this.usedCrossTileIDs[n][y]}removeStaleBuckets(n){let s=!1;for(const p in this.indexes){const y=this.indexes[p];for(const w in y)n[y[w].bucketInstanceId]||(this.removeBucketCrossTileIDs(p,y[w]),delete y[w],s=!0)}return s}}class Uc{constructor(){this.layerIndexes={},this.crossTileIDs=new Po,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(n,s,p){let y=this.layerIndexes[n.id];y===void 0&&(y=this.layerIndexes[n.id]=new xs);let w=!1;const T={};y.handleWrapJump(p);for(const R of s){const k=R.getBucket(n);k&&n.id===k.layerIds[0]&&(k.bucketInstanceId||(k.bucketInstanceId=++this.maxBucketInstanceId),y.addBucket(R.tileID,k,this.crossTileIDs)&&(w=!0),T[k.bucketInstanceId]=!0)}return y.removeStaleBuckets(T)&&(w=!0),w}pruneUnusedLayers(n){const s={};n.forEach(p=>{s[p]=!0});for(const p in this.layerIndexes)s[p]||delete this.layerIndexes[p]}}var il="void main() {fragColor=vec4(1.0);}";const Ma={prelude:tr(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:tr("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:tr("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:tr(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:tr(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:tr(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:tr(il,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:tr(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:tr(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:tr("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:tr("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),debug:tr("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:tr(il,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:tr(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:tr(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:tr(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:tr(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:tr(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:tr(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;switch(u_method){case BASIC:
basic_hillshade(deriv);break;case COMBINED:
combined_hillshade(deriv);break;case IGOR:
igor_hillshade(deriv);break;case MULTIDIRECTIONAL:
multidirectional_hillshade(deriv);break;case STANDARD:
default:
standard_hillshade(deriv);break;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:tr(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:tr(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:tr(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),raster:tr(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:tr(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:tr(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:tr(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:tr("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:tr("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:tr("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:tr("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:tr(`in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:tr("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function tr(b,n){const s=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,p=n.match(/in ([\w]+) ([\w]+)/g),y=b.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),w=n.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),T=w?w.concat(y):y,R={};return{fragmentSource:b=b.replace(s,(k,L,F,q,H)=>(R[H]=!0,L==="define"?`
#ifndef HAS_UNIFORM_u_${H}
in ${F} ${q} ${H};
#else
uniform ${F} ${q} u_${H};
#endif
`:`
#ifdef HAS_UNIFORM_u_${H}
    ${F} ${q} ${H} = u_${H};
#endif
`)),vertexSource:n=n.replace(s,(k,L,F,q,H)=>{const ee=q==="float"?"vec2":"vec4",ne=H.match(/color/)?"color":ee;return R[H]?L==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${F} ${ee} a_${H};
out ${F} ${q} ${H};
#else
uniform ${F} ${q} u_${H};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = a_${H};
#else
    ${F} ${q} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${H} = unpack_mix_${ne}(a_${H}, u_${H}_t);
#else
    ${F} ${q} ${H} = u_${H};
#endif
`:L==="define"?`
#ifndef HAS_UNIFORM_u_${H}
uniform lowp float u_${H}_t;
in ${F} ${ee} a_${H};
#else
uniform ${F} ${q} u_${H};
#endif
`:ne==="vec4"?`
#ifndef HAS_UNIFORM_u_${H}
    ${F} ${q} ${H} = a_${H};
#else
    ${F} ${q} ${H} = u_${H};
#endif
`:`
#ifndef HAS_UNIFORM_u_${H}
    ${F} ${q} ${H} = unpack_mix_${ne}(a_${H}, u_${H}_t);
#else
    ${F} ${q} ${H} = u_${H};
#endif
`}),staticAttributes:p,staticUniforms:T}}class jl{constructor(n,s,p){this.vertexBuffer=n,this.indexBuffer=s,this.segments=p}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Ji=u.aG([{name:"a_pos",type:"Int16",components:2}]);const Fl="#define PROJECTION_MERCATOR",er="mercator";class al{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return er}get shaderDefine(){return Fl}get shaderPreludeCode(){return Ma.projectionMercator}get vertexShaderPreludeCode(){return Ma.projectionMercator.vertexSource}get subdivisionGranularity(){return u.aH.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(n){}getMeshFromTileID(n,s,p,y,w){if(this._cachedMesh)return this._cachedMesh;const T=new u.aI;T.emplaceBack(0,0),T.emplaceBack(u.Z,0),T.emplaceBack(0,u.Z),T.emplaceBack(u.Z,u.Z);const R=n.createVertexBuffer(T,Ji.members),k=u.aJ.simpleSegment(0,0,4,2),L=new u.aK;L.emplaceBack(1,0,2),L.emplaceBack(1,2,3);const F=n.createIndexBuffer(L);return this._cachedMesh=new jl(R,F,k),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(n){}}class $l{constructor(n=0,s=0,p=0,y=0){if(isNaN(n)||n<0||isNaN(s)||s<0||isNaN(p)||p<0||isNaN(y)||y<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=n,this.bottom=s,this.left=p,this.right=y}interpolate(n,s,p){return s.top!=null&&n.top!=null&&(this.top=u.B.number(n.top,s.top,p)),s.bottom!=null&&n.bottom!=null&&(this.bottom=u.B.number(n.bottom,s.bottom,p)),s.left!=null&&n.left!=null&&(this.left=u.B.number(n.left,s.left,p)),s.right!=null&&n.right!=null&&(this.right=u.B.number(n.right,s.right,p)),this}getCenter(n,s){const p=u.ae((this.left+n-this.right)/2,0,n),y=u.ae((this.top+s-this.bottom)/2,0,s);return new u.P(p,y)}equals(n){return this.top===n.top&&this.bottom===n.bottom&&this.left===n.left&&this.right===n.right}clone(){return new $l(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function ol(b,n){if(!b.renderWorldCopies||b.lngRange)return;const s=n.lng-b.center.lng;n.lng+=s>180?-360:s<-180?360:0}function ji(b){return Math.max(0,Math.floor(b))}class gi{constructor(n,s,p,y,w,T){this._callbacks=n,this._tileSize=512,this._renderWorldCopies=T===void 0||!!T,this._minZoom=s||0,this._maxZoom=p||22,this._minPitch=y??0,this._maxPitch=w??60,this.setMaxBounds(),this._width=0,this._height=0,this._center=new u.Q(0,0),this._elevation=0,this._zoom=0,this._tileZoom=ji(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new $l,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(n,s,p){this._latRange=n.latRange,this._lngRange=n.lngRange,this._width=n.width,this._height=n.height,this._center=n.center,this._elevation=n.elevation,this._minElevationForCurrentTile=n.minElevationForCurrentTile,this._zoom=n.zoom,this._tileZoom=ji(this._zoom),this._scale=u.ac(this._zoom),this._bearingInRadians=n.bearingInRadians,this._fovInRadians=n.fovInRadians,this._pitchInRadians=n.pitchInRadians,this._rollInRadians=n.rollInRadians,this._unmodified=n.unmodified,this._edgeInsets=new $l(n.padding.top,n.padding.bottom,n.padding.left,n.padding.right),this._minZoom=n.minZoom,this._maxZoom=n.maxZoom,this._minPitch=n.minPitch,this._maxPitch=n.maxPitch,this._renderWorldCopies=n.renderWorldCopies,this._cameraToCenterDistance=n.cameraToCenterDistance,this._nearZ=n.nearZ,this._farZ=n.farZ,this._autoCalculateNearFarZ=!p&&n.autoCalculateNearFarZ,s&&this._constrain(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(n){this._minElevationForCurrentTile=n}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(n){this._minZoom!==n&&(this._minZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(n){this._maxZoom!==n&&(this._maxZoom=n,this.setZoom(this.getConstrained(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(n){this._minPitch!==n&&(this._minPitch=n,this.setPitch(Math.max(this.pitch,n)))}get maxPitch(){return this._maxPitch}setMaxPitch(n){this._maxPitch!==n&&(this._maxPitch=n,this.setPitch(Math.min(this.pitch,n)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(n){n===void 0?n=!0:n===null&&(n=!1),this._renderWorldCopies=n}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new u.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(n){const s=u.aL(n,-180,180)*Math.PI/180;var p,y,w,T,R,k,L,F,q;this._bearingInRadians!==s&&(this._unmodified=!1,this._bearingInRadians=s,this._calcMatrices(),this._rotationMatrix=P(),p=this._rotationMatrix,w=-this._bearingInRadians,T=(y=this._rotationMatrix)[0],R=y[1],k=y[2],L=y[3],F=Math.sin(w),q=Math.cos(w),p[0]=T*q+k*F,p[1]=R*q+L*F,p[2]=T*-F+k*q,p[3]=R*-F+L*q)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(n){const s=u.ae(n,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==s&&(this._unmodified=!1,this._pitchInRadians=s,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(n){const s=n/180*Math.PI;this._rollInRadians!==s&&(this._unmodified=!1,this._rollInRadians=s,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return u.aM(this._fovInRadians)}setFov(n){n=u.ae(n,.1,150),this.fov!==n&&(this._unmodified=!1,this._fovInRadians=u.ab(n),this._calcMatrices())}get zoom(){return this._zoom}setZoom(n){const s=this.getConstrained(this._center,n).zoom;this._zoom!==s&&(this._unmodified=!1,this._zoom=s,this._tileZoom=Math.max(0,Math.floor(s)),this._scale=u.ac(s),this._constrain(),this._calcMatrices())}get center(){return this._center}setCenter(n){n.lat===this._center.lat&&n.lng===this._center.lng||(this._unmodified=!1,this._center=n,this._constrain(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(n){n!==this._elevation&&(this._elevation=n,this._constrain(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(n){this._edgeInsets.equals(n)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,n,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(n,s){this._autoCalculateNearFarZ=!1,this._nearZ=n,this._farZ=s,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(n){return this._edgeInsets.equals(n)}interpolatePadding(n,s,p){this._unmodified=!1,this._edgeInsets.interpolate(n,s,p),this._constrain(),this._calcMatrices()}resize(n,s,p=!0){this._width=n,this._height=s,p&&this._constrain(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Kt([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(n){n?(this._lngRange=[n.getWest(),n.getEast()],this._latRange=[n.getSouth(),n.getNorth()],this._constrain()):(this._lngRange=null,this._latRange=[-85.051129,u.af])}getConstrained(n,s){return this._callbacks.getConstrained(n,s)}getCameraQueryGeometry(n,s){if(s.length===1)return[s[0],n];{let p=n.x,y=n.y,w=n.x,T=n.y;for(const R of s)p=Math.min(p,R.x),y=Math.min(y,R.y),w=Math.max(w,R.x),T=Math.max(T,R.y);return[new u.P(p,y),new u.P(w,y),new u.P(w,T),new u.P(p,T),new u.P(p,y)]}}_constrain(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const n=this._unmodified,{center:s,zoom:p}=this.getConstrained(this.center,this.zoom);this.setCenter(s),this.setZoom(p),this._unmodified=n,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let n=u.ad(new Float64Array(16));u.M(n,n,[this._width/2,-this._height/2,1]),u.L(n,n,[1,-1,0]),this._clipSpaceToPixelsMatrix=n,n=u.ad(new Float64Array(16)),u.M(n,n,[1,-1,1]),u.L(n,n,[-1,-1,0]),u.M(n,n,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=n,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(n,s,p,y){const w=p!==void 0?p:this.bearing,T=y=y!==void 0?y:this.pitch,R=u.$.fromLngLat(n,s),k=-Math.cos(u.ab(T)),L=Math.sin(u.ab(T)),F=L*Math.sin(u.ab(w)),q=-L*Math.cos(u.ab(w));let H=this.elevation;const ee=s-H;let ne;k*ee>=0||Math.abs(k)<.1?(ne=1e4,H=s+ne*k):ne=-ee/k;let ye,ge,_e=u.aN(1,R.y),Ee=0;do{if(Ee+=1,Ee>10)break;ge=ne/_e,ye=new u.$(R.x+F*ge,R.y+q*ge),_e=1/ye.meterInMercatorCoordinateUnits()}while(Math.abs(ne-ge*_e)>1e-12);return{center:ye.toLngLat(),elevation:H,zoom:u.ah(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(n){if(this.elevation-n==0)return;const s=u.ag(1,this.center.lat)*this.worldSize,p=this.cameraToCenterDistance/s,y=u.$.fromLngLat(this.center,this.elevation),w=ie(this.center,this.elevation,this.pitch,this.bearing,p);this._elevation=n;const T=this.calculateCenterFromCameraLngLatAlt(w.toLngLat(),u.aN(w.z,y.y),this.bearing,this.pitch);this._elevation=T.elevation,this._center=T.center,this.setZoom(T.zoom)}getCameraPoint(){const n=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new u.P(n*Math.sin(this.rollInRadians),n*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const n=u.ag(1,this.center.lat)*this.worldSize;return ie(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/n).toLngLat()}getMercatorTileCoordinates(n){if(!n)return[0,0,1,1];const s=n.canonical.z>=0?1<<n.canonical.z:Math.pow(2,n.canonical.z);return[n.canonical.x/s,n.canonical.y/s,1/s/u.Z,1/s/u.Z]}}class yi{constructor(n,s){this.min=n,this.max=s,this.center=u.aO([],u.aP([],this.min,this.max),.5)}quadrant(n){const s=[n%2==0,n<2],p=u.aQ(this.min),y=u.aQ(this.max);for(let w=0;w<s.length;w++)p[w]=s[w]?this.min[w]:this.center[w],y[w]=s[w]?this.center[w]:this.max[w];return y[2]=this.max[2],new yi(p,y)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}intersectsFrustum(n){let s=!0;for(let p=0;p<n.planes.length;p++){const y=this.intersectsPlane(n.planes[p]);if(y===0)return 0;y===1&&(s=!1)}return s?2:n.aabb.min[0]>this.max[0]||n.aabb.min[1]>this.max[1]||n.aabb.min[2]>this.max[2]||n.aabb.max[0]<this.min[0]||n.aabb.max[1]<this.min[1]||n.aabb.max[2]<this.min[2]?0:1}intersectsPlane(n){let s=n[3],p=n[3];for(let y=0;y<3;y++)n[y]>0?(s+=n[y]*this.min[y],p+=n[y]*this.max[y]):(p+=n[y]*this.min[y],s+=n[y]*this.max[y]);return s>=0?2:p<0?0:1}}class Fi{distanceToTile2d(n,s,p,y){const w=y.distanceX([n,s]),T=y.distanceY([n,s]);return Math.hypot(w,T)}getWrap(n,s,p){return p}getTileAABB(n,s,p,y){var w,T;let R=p,k=p;if(y.terrain){const F=new u.Y(n.z,s,n.z,n.x,n.y),q=y.terrain.getMinMaxElevation(F);R=(w=q.minElevation)!==null&&w!==void 0?w:p,k=(T=q.maxElevation)!==null&&T!==void 0?T:p}const L=1<<n.z;return new yi([s+n.x/L,n.y/L,R],[s+(n.x+1)/L,(n.y+1)/L,k])}allowVariableZoom(n,s){const p=n.fov*(Math.abs(Math.cos(n.rollInRadians))*n.height+Math.abs(Math.sin(n.rollInRadians))*n.width)/n.height,y=u.ae(78.5-p/2,0,60);return!!s.terrain||n.pitch>y}allowWorldCopies(){return!0}recalculateCache(){}}class Br{constructor(n,s,p){this.points=n,this.planes=s,this.aabb=p}static fromInvProjectionMatrix(n,s=1,p=0){const y=Math.pow(2,p),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(L=>{const F=1/(L=u.at([],L,n))[3]/s*y;return u.aR(L,L,[F,F,1/L[3],F])}),T=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(L=>{const F=u.aS([],w[L[0]],w[L[1]]),q=u.aS([],w[L[2]],w[L[1]]),H=u.aT([],u.aU([],F,q)),ee=-u.aV(H,w[L[1]]);return H.concat(ee)}),R=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],k=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const L of w)for(let F=0;F<3;F++)R[F]=Math.min(R[F],L[F]),k[F]=Math.max(k[F],L[F]);return new Br(w,T,new yi(R,k))}}class Wo{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,s,p){return this._helper.interpolatePadding(n,s,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,s,p=!0){this._helper.resize(n,s,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,s){this._helper.overrideNearFarZ(n,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n,s){}constructor(n,s,p,y,w){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this._helper=new gi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(T,R)=>this.getConstrained(T,R)},n,s,p,y,w),this._coveringTilesDetailsProvider=new Fi}clone(){const n=new Wo;return n.apply(this),n}apply(n,s,p){this._helper.apply(n,s,p)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(n){const s=[new u.aW(0,n)];if(this._helper._renderWorldCopies){const p=this.screenPointToMercatorCoordinate(new u.P(0,0)),y=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,0)),w=this.screenPointToMercatorCoordinate(new u.P(this._helper._width,this._helper._height)),T=this.screenPointToMercatorCoordinate(new u.P(0,this._helper._height)),R=Math.floor(Math.min(p.x,y.x,w.x,T.x)),k=Math.floor(Math.max(p.x,y.x,w.x,T.x)),L=1;for(let F=R-L;F<=k+L;F++)F!==0&&s.push(new u.aW(F,n))}return s}getCameraFrustum(){return Br.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){const s=this.screenPointToLocation(this.centerPoint,n),p=n?n.getElevationForLngLatZoom(s,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(p)}setLocationAtPoint(n,s){const p=u.ag(this.elevation,this.center.lat),y=this.screenPointToMercatorCoordinateAtZ(s,p),w=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,p),T=u.$.fromLngLat(n),R=new u.$(T.x-(y.x-w.x),T.y-(y.y-w.y));this.setCenter(R==null?void 0:R.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(n,s){return s?this.coordinatePoint(u.$.fromLngLat(n),s.getElevationForLngLatZoom(n,this._helper._tileZoom),this._pixelMatrix3D):this.coordinatePoint(u.$.fromLngLat(n))}screenPointToLocation(n,s){var p;return(p=this.screenPointToMercatorCoordinate(n,s))===null||p===void 0?void 0:p.toLngLat()}screenPointToMercatorCoordinate(n,s){if(s){const p=s.pointCoordinate(n);if(p!=null)return p}return this.screenPointToMercatorCoordinateAtZ(n)}screenPointToMercatorCoordinateAtZ(n,s){const p=s||0,y=[n.x,n.y,0,1],w=[n.x,n.y,1,1];u.at(y,y,this._pixelMatrixInverse),u.at(w,w,this._pixelMatrixInverse);const T=y[3],R=w[3],k=y[1]/T,L=w[1]/R,F=y[2]/T,q=w[2]/R,H=F===q?0:(p-F)/(q-F);return new u.$(u.B.number(y[0]/T,w[0]/R,H)/this.worldSize,u.B.number(k,L,H)/this.worldSize,p)}coordinatePoint(n,s=0,p=this._pixelMatrix){const y=[n.x*this.worldSize,n.y*this.worldSize,s,1];return u.at(y,y,p),new u.P(y[0]/y[3],y[1]/y[3])}getBounds(){const n=Math.max(0,this._helper._height/2-Ge(this));return new Kt().extend(this.screenPointToLocation(new u.P(0,n))).extend(this.screenPointToLocation(new u.P(this._helper._width,n))).extend(this.screenPointToLocation(new u.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new u.P(0,this._helper._height)))}isPointOnMapSurface(n,s){return s?s.pointCoordinate(n)!=null:n.y>this.height/2-Ge(this)}calculatePosMatrix(n,s=!1,p){var y;const w=(y=n.key)!==null&&y!==void 0?y:u.aX(n.wrap,n.canonical.z,n.canonical.z,n.canonical.x,n.canonical.y),T=s?this._alignedPosMatrixCache:this._posMatrixCache;if(T.has(w)){const L=T.get(w);return p?L.f32:L.f64}const R=te(n,this.worldSize);u.N(R,s?this._alignedProjMatrix:this._viewProjMatrix,R);const k={f64:R,f32:new Float32Array(R)};return T.set(w,k),p?k.f32:k.f64}calculateFogMatrix(n){const s=n.key,p=this._fogMatrixCacheF32;if(p.has(s))return p.get(s);const y=te(n,this.worldSize);return u.N(y,this._fogMatrix,y),p.set(s,new Float32Array(y)),p.get(s)}getConstrained(n,s){s=u.ae(+s,this.minZoom,this.maxZoom);const p={center:new u.Q(n.lng,n.lat),zoom:s};let y=this._helper._lngRange;this._helper._renderWorldCopies||y!==null||(y=[-179.9999999999,180-1e-10]);const w=this.tileSize*u.ac(p.zoom);let T=0,R=w,k=0,L=w,F=0,q=0;const{x:H,y:ee}=this.size;if(this._helper._latRange){const De=this._helper._latRange;T=u.S(De[1])*w,R=u.S(De[0])*w,R-T<ee&&(F=ee/(R-T))}y&&(k=u.aL(u.U(y[0])*w,0,w),L=u.aL(u.U(y[1])*w,0,w),L<k&&(L+=w),L-k<H&&(q=H/(L-k)));const{x:ne,y:ye}=gr(w,n);let ge,_e;const Ee=Math.max(q||0,F||0);if(Ee){const De=new u.P(q?(L+k)/2:ne,F?(R+T)/2:ye);return p.center=Lr(w,De).wrap(),p.zoom+=u.ah(Ee),p}if(this._helper._latRange){const De=ee/2;ye-De<T&&(_e=T+De),ye+De>R&&(_e=R-De)}if(y){const De=(k+L)/2;let ze=ne;this._helper._renderWorldCopies&&(ze=u.aL(ne,De-w/2,De+w/2));const je=H/2;ze-je<k&&(ge=k+je),ze+je>L&&(ge=L-je)}if(ge!==void 0||_e!==void 0){const De=new u.P(ge??ne,_e??ye);p.center=Lr(w,De).wrap()}return p}calculateCenterFromCameraLngLatAlt(n,s,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,s,p,y)}_calculateNearFarZIfNeeded(n,s,p){if(!this._helper.autoCalculateNearFarZ)return;const y=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),w=n-y*this._helper._pixelPerMeter/Math.cos(s),T=y<0?w:n,R=Math.PI/2+this.pitchInRadians,k=u.ab(this.fov)*(Math.abs(Math.cos(u.ab(this.roll)))*this.height+Math.abs(Math.sin(u.ab(this.roll)))*this.width)/this.height*(.5+p.y/this.height),L=Math.sin(k)*T/Math.sin(u.ae(Math.PI-R-k,.01,Math.PI-.01)),F=Ge(this),q=Math.atan(F/this._helper.cameraToCenterDistance),H=u.ab(.75),ee=q>H?2*q*(.5+p.y/(2*F)):H,ne=Math.sin(ee)*T/Math.sin(u.ae(Math.PI-R-ee,.01,Math.PI-.01)),ye=Math.min(L,ne);this._helper._farZ=1.01*(Math.cos(Math.PI/2-s)*ye+T),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const n=this.centerOffset,s=gr(this.worldSize,this.center),p=s.x,y=s.y;this._helper._pixelPerMeter=u.ag(1,this.center.lat)*this.worldSize;const w=u.ab(Math.min(this.pitch,br)),T=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(w));let R;this._calculateNearFarZIfNeeded(T,w,n),R=new Float64Array(16),u.aY(R,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),u.an(this._invProjMatrix,R),R[8]=2*-n.x/this._helper._width,R[9]=2*n.y/this._helper._height,this._projectionMatrix=u.aZ(R),u.M(R,R,[1,-1,1]),u.L(R,R,[0,0,-this._helper.cameraToCenterDistance]),u.a_(R,R,-this.rollInRadians),u.a$(R,R,this.pitchInRadians),u.a_(R,R,-this.bearingInRadians),u.L(R,R,[-p,-y,0]),this._mercatorMatrix=u.M([],R,[this.worldSize,this.worldSize,this.worldSize]),u.M(R,R,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,R),u.L(R,R,[0,0,-this.elevation]),this._viewProjMatrix=R,this._invViewProjMatrix=u.an([],R);const k=[0,0,-1,1];u.at(k,k,this._invViewProjMatrix),this._cameraPosition=[k[0]/k[3],k[1]/k[3],k[2]/k[3]],this._fogMatrix=new Float64Array(16),u.aY(this._fogMatrix,this.fovInRadians,this.width/this.height,T,this._helper._farZ),this._fogMatrix[8]=2*-n.x/this.width,this._fogMatrix[9]=2*n.y/this.height,u.M(this._fogMatrix,this._fogMatrix,[1,-1,1]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),u.a_(this._fogMatrix,this._fogMatrix,-this.rollInRadians),u.a$(this._fogMatrix,this._fogMatrix,this.pitchInRadians),u.a_(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),u.L(this._fogMatrix,this._fogMatrix,[-p,-y,0]),u.M(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),u.L(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=u.N(new Float64Array(16),this.clipSpaceToPixelsMatrix,R);const L=this._helper._width%2/2,F=this._helper._height%2/2,q=Math.cos(this.bearingInRadians),H=Math.sin(-this.bearingInRadians),ee=p-Math.round(p)+q*L+H*F,ne=y-Math.round(y)+q*F+H*L,ye=new Float64Array(R);if(u.L(ye,ye,[ee>.5?ee-1:ee,ne>.5?ne-1:ne,0]),this._alignedProjMatrix=ye,R=u.an(new Float64Array(16),this._pixelMatrix),!R)throw new Error("failed to invert matrix");this._pixelMatrixInverse=R,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const n=this.screenPointToMercatorCoordinate(new u.P(0,0)),s=[n.x*this.worldSize,n.y*this.worldSize,0,1];return u.at(s,s,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const n=u.ag(1,this.center.lat)*this.worldSize;return ie(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/n).toLngLat()}lngLatToCameraDepth(n,s){const p=u.$.fromLngLat(n),y=[p.x*this.worldSize,p.y*this.worldSize,s,1];return u.at(y,y,this._viewProjMatrix),y[2]/y[3]}getProjectionData(n){const{overscaledTileID:s,aligned:p,applyTerrainMatrix:y}=n,w=this._helper.getMercatorTileCoordinates(s),T=s?this.calculatePosMatrix(s,p,!0):null;let R;return R=s&&s.terrainRttPosMatrix32f&&y?s.terrainRttPosMatrix32f:T||u.b0(),{mainMatrix:R,tileMercatorCoords:w,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:R}}isLocationOccluded(n){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(n,s,p){return 1}transformLightDirection(n){return u.aQ(n)}getRayDirectionFromPixel(n){throw new Error("Not implemented.")}projectTileCoordinates(n,s,p,y){const w=this.calculatePosMatrix(p);let T;y?(T=[n,s,y(n,s),1],u.at(T,T,w)):(T=[n,s,0,1],lr(T,T,w));const R=T[3];return{point:new u.P(T[0]/R,T[1]/R),signedDistanceFromCamera:R,isOccluded:!1}}populateCache(n){for(const s of n)this.calculatePosMatrix(s)}getMatrixForModel(n,s){const p=u.$.fromLngLat(n,s),y=p.meterInMercatorCoordinateUnits(),w=u.b1();return u.L(w,w,[p.x,p.y,p.z]),u.a_(w,w,Math.PI),u.a$(w,w,Math.PI/2),u.M(w,w,[-y,y,y]),w}getProjectionDataForCustomLayer(n=!0){const s=new u.Y(0,0,0,0,0),p=this.getProjectionData({overscaledTileID:s,applyGlobeMatrix:n}),y=te(s,this.worldSize);u.N(y,this._viewProjMatrix,y),p.tileMercatorCoords=[0,0,1,1];const w=[u.Z,u.Z,this.worldSize/this._helper.pixelsPerMeter],T=u.b2();return u.M(T,y,w),p.fallbackMatrix=T,p.mainMatrix=T,p}getFastPathSimpleProjectionMatrix(n){return this.calculatePosMatrix(n)}}function ui(){u.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Aa(b){if(b.useSlerp)if(b.k<1){const n=u.b3(b.startEulerAngles.roll,b.startEulerAngles.pitch,b.startEulerAngles.bearing),s=u.b3(b.endEulerAngles.roll,b.endEulerAngles.pitch,b.endEulerAngles.bearing),p=new Float64Array(4);u.b4(p,n,s,b.k);const y=u.b5(p);b.tr.setRoll(y.roll),b.tr.setPitch(y.pitch),b.tr.setBearing(y.bearing)}else b.tr.setRoll(b.endEulerAngles.roll),b.tr.setPitch(b.endEulerAngles.pitch),b.tr.setBearing(b.endEulerAngles.bearing);else b.tr.setRoll(u.B.number(b.startEulerAngles.roll,b.endEulerAngles.roll,b.k)),b.tr.setPitch(u.B.number(b.startEulerAngles.pitch,b.endEulerAngles.pitch,b.k)),b.tr.setBearing(u.B.number(b.startEulerAngles.bearing,b.endEulerAngles.bearing,b.k))}function qi(b,n,s,p,y){const w=y.padding,T=gr(y.worldSize,s.getNorthWest()),R=gr(y.worldSize,s.getNorthEast()),k=gr(y.worldSize,s.getSouthEast()),L=gr(y.worldSize,s.getSouthWest()),F=u.ab(-p),q=T.rotate(F),H=R.rotate(F),ee=k.rotate(F),ne=L.rotate(F),ye=new u.P(Math.max(q.x,H.x,ne.x,ee.x),Math.max(q.y,H.y,ne.y,ee.y)),ge=new u.P(Math.min(q.x,H.x,ne.x,ee.x),Math.min(q.y,H.y,ne.y,ee.y)),_e=ye.sub(ge),Ee=(y.width-(w.left+w.right+n.left+n.right))/_e.x,De=(y.height-(w.top+w.bottom+n.top+n.bottom))/_e.y;if(De<0||Ee<0)return void ui();const ze=Math.min(u.ah(y.scale*Math.min(Ee,De)),b.maxZoom),je=u.P.convert(b.offset),Ue=new u.P((n.left-n.right)/2,(n.top-n.bottom)/2).rotate(u.ab(p)),Fe=je.add(Ue).mult(y.scale/u.ac(ze));return{center:Lr(y.worldSize,T.add(k).div(2).sub(Fe)),zoom:ze,bearing:p}}class mo{get useGlobeControls(){return!1}handlePanInertia(n,s){return{easingOffset:n,easingCenter:s.center}}handleMapControlsRollPitchBearingZoom(n,s){n.bearingDelta&&s.setBearing(s.bearing+n.bearingDelta),n.pitchDelta&&s.setPitch(s.pitch+n.pitchDelta),n.rollDelta&&s.setRoll(s.roll+n.rollDelta),n.zoomDelta&&s.setZoom(s.zoom+n.zoomDelta)}handleMapControlsPan(n,s,p){n.around.distSqr(s.centerPoint)<.01||s.setLocationAtPoint(p,n.around)}cameraForBoxAndBearing(n,s,p,y,w){return qi(n,s,p,y,w)}handleJumpToCenterZoom(n,s){n.zoom!==(s.zoom!==void 0?+s.zoom:n.zoom)&&n.setZoom(+s.zoom),s.center!==void 0&&n.setCenter(u.Q.convert(s.center))}handleEaseTo(n,s){const p=n.zoom,y=n.padding,w={roll:n.roll,pitch:n.pitch,bearing:n.bearing},T={roll:s.roll===void 0?n.roll:s.roll,pitch:s.pitch===void 0?n.pitch:s.pitch,bearing:s.bearing===void 0?n.bearing:s.bearing},R=s.zoom!==void 0,k=!n.isPaddingEqual(s.padding);let L=!1;const F=R?+s.zoom:n.zoom;let q=n.centerPoint.add(s.offsetAsPoint);const H=n.screenPointToLocation(q),{center:ee,zoom:ne}=n.getConstrained(u.Q.convert(s.center||H),F??p);ol(n,ee);const ye=gr(n.worldSize,H),ge=gr(n.worldSize,ee).sub(ye),_e=u.ac(ne-p);return L=ne!==p,{easeFunc:Ee=>{if(L&&n.setZoom(u.B.number(p,ne,Ee)),u.b6(w,T)||Aa({startEulerAngles:w,endEulerAngles:T,tr:n,k:Ee,useSlerp:w.roll!=T.roll}),k&&(n.interpolatePadding(y,s.padding,Ee),q=n.centerPoint.add(s.offsetAsPoint)),s.around)n.setLocationAtPoint(s.around,s.aroundPoint);else{const De=u.ac(n.zoom-p),ze=ne>p?Math.min(2,_e):Math.max(.5,_e),je=Math.pow(ze,1-Ee),Ue=Lr(n.worldSize,ye.add(ge.mult(Ee*je)).mult(De));n.setLocationAtPoint(n.renderWorldCopies?Ue.wrap():Ue,q)}},isZooming:L,elevationCenter:ee}}handleFlyTo(n,s){const p=s.zoom!==void 0,y=n.zoom,w=n.getConstrained(u.Q.convert(s.center||s.locationAtOffset),p?+s.zoom:y),T=w.center,R=w.zoom;ol(n,T);const k=gr(n.worldSize,s.locationAtOffset),L=gr(n.worldSize,T).sub(k),F=L.mag(),q=u.ac(R-y);let H;if(s.minZoom!==void 0){const ee=Math.min(+s.minZoom,y,R),ne=n.getConstrained(T,ee).zoom;H=u.ac(ne-y)}return{easeFunc:(ee,ne,ye,ge)=>{n.setZoom(ee===1?R:y+u.ah(ne));const _e=ee===1?T:Lr(n.worldSize,k.add(L.mult(ye)).mult(ne));n.setLocationAtPoint(n.renderWorldCopies?_e.wrap():_e,ge)},scaleOfZoom:q,targetCenter:T,scaleOfMinZoom:H,pixelPathLength:F}}}class wr{constructor(n,s,p){this.blendFunction=n,this.blendColor=s,this.mask=p}}wr.Replace=[1,0],wr.disabled=new wr(wr.Replace,u.b7.transparent,[!1,!1,!1,!1]),wr.unblended=new wr(wr.Replace,u.b7.transparent,[!0,!0,!0,!0]),wr.alphaBlended=new wr([1,771],u.b7.transparent,[!0,!0,!0,!0]);const Hr=2305;class Yn{constructor(n,s,p){this.enable=n,this.mode=s,this.frontFace=p}}Yn.disabled=new Yn(!1,1029,Hr),Yn.backCCW=new Yn(!0,1029,Hr),Yn.frontCCW=new Yn(!0,1028,Hr);class Rn{constructor(n,s,p){this.func=n,this.mask=s,this.range=p}}Rn.ReadOnly=!1,Rn.ReadWrite=!0,Rn.disabled=new Rn(519,Rn.ReadOnly,[0,1]);const ws=7680;class Fn{constructor(n,s,p,y,w,T){this.test=n,this.ref=s,this.mask=p,this.fail=y,this.depthFail=w,this.pass=T}}Fn.disabled=new Fn({func:519,mask:0},0,0,ws,ws,ws);const ea=new WeakMap;function _i(b){var n;if(ea.has(b))return ea.get(b);{const s=(n=b.getParameter(b.VERSION))===null||n===void 0?void 0:n.startsWith("WebGL 2.0");return ea.set(b,s),s}}class Hc{get awaitingQuery(){return!!this._readbackQueue}constructor(n){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=n;const s=n.context,p=s.gl;this._texFormat=p.RGBA,this._texType=p.UNSIGNED_BYTE;const y=new u.aI;y.emplaceBack(-1,-1),y.emplaceBack(2,-1),y.emplaceBack(-1,2);const w=new u.aK;w.emplaceBack(0,1,2),this._fullscreenTriangle=new jl(s.createVertexBuffer(y,Ji.members),s.createIndexBuffer(w),u.aJ.simpleSegment(0,0,y.length,w.length)),this._resultBuffer=new Uint8Array(4),s.activeTexture.set(p.TEXTURE1);const T=p.createTexture();p.bindTexture(p.TEXTURE_2D,T),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_S,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_WRAP_T,p.CLAMP_TO_EDGE),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MIN_FILTER,p.NEAREST),p.texParameteri(p.TEXTURE_2D,p.TEXTURE_MAG_FILTER,p.NEAREST),p.texImage2D(p.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=s.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(T),_i(p)&&(this._pbo=p.createBuffer(),p.bindBuffer(p.PIXEL_PACK_BUFFER,this._pbo),p.bufferData(p.PIXEL_PACK_BUFFER,4,p.STREAM_READ),p.bindBuffer(p.PIXEL_PACK_BUFFER,null))}destroy(){const n=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),n.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(n,s){const p=this._updateCount;return this._readbackQueue?p>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():p>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(n,s),this._updateCount++,this._measuredError}_bindFramebuffer(){const n=this._cachedRenderContext.context,s=n.gl;n.activeTexture.set(s.TEXTURE1),s.bindTexture(s.TEXTURE_2D,this._fbo.colorAttachment.get()),n.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(n,s){const p=this._cachedRenderContext.context,y=p.gl;if(this._bindFramebuffer(),p.viewport.set([0,0,this._texWidth,this._texHeight]),p.clear({color:u.b7.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(p,y.TRIANGLES,Rn.disabled,Fn.disabled,wr.unblended,Yn.disabled,((w,T)=>({u_input:w,u_output_expected:T}))(n,s),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&_i(y)){y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.readBuffer(y.COLOR_ATTACHMENT0),y.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),y.bindBuffer(y.PIXEL_PACK_BUFFER,null);const w=y.fenceSync(y.SYNC_GPU_COMMANDS_COMPLETE,0);y.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:w}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const n=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&_i(n)){const s=n.clientWaitSync(this._readbackQueue.sync,0,0);if(s===n.WAIT_FAILED)return u.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(s===n.TIMEOUT_EXPIRED)return;n.bindBuffer(n.PIXEL_PACK_BUFFER,this._pbo),n.getBufferSubData(n.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),n.bindBuffer(n.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),n.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Hc._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(n){let s=0;return s+=n[0]/256,s+=n[1]/65536,s+=n[2]/16777216,n[3]<127&&(s=-s),s/128}}const Vl=u.Z/128;function qu(b,n){const s=b.granularity!==void 0?Math.max(b.granularity,1):1,p=s+(b.generateBorders?2:0),y=s+(b.extendToNorthPole||b.generateBorders?1:0)+(b.extendToSouthPole||b.generateBorders?1:0),w=p+1,T=y+1,R=b.generateBorders?-1:0,k=b.generateBorders||b.extendToNorthPole?-1:0,L=s+(b.generateBorders?1:0),F=s+(b.generateBorders||b.extendToSouthPole?1:0),q=w*T,H=p*y*6,ee=w*T>65536;if(ee&&n==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const ne=ee||n==="32bit",ye=new Int16Array(2*q);let ge=0;for(let De=k;De<=F;De++)for(let ze=R;ze<=L;ze++){let je=ze/s*u.Z;ze===-1&&(je=-64),ze===s+1&&(je=u.Z+Vl);let Ue=De/s*u.Z;De===-1&&(Ue=b.extendToNorthPole?u.b9:-64),De===s+1&&(Ue=b.extendToSouthPole?u.ba:u.Z+Vl),ye[ge++]=je,ye[ge++]=Ue}const _e=ne?new Uint32Array(H):new Uint16Array(H);let Ee=0;for(let De=0;De<y;De++)for(let ze=0;ze<p;ze++){const je=ze+1+De*w,Ue=ze+(De+1)*w,Fe=ze+1+(De+1)*w;_e[Ee++]=ze+De*w,_e[Ee++]=Ue,_e[Ee++]=je,_e[Ee++]=je,_e[Ee++]=Ue,_e[Ee++]=Fe}return{vertices:ye.buffer.slice(0),indices:_e.buffer.slice(0),uses32bitIndices:ne}}const sl=new u.aH({fill:new u.bb(128,2),line:new u.bb(512,0),tile:new u.bb(128,32),stencil:new u.bb(128,1),circle:3});class Ul{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return Ma.projectionGlobe}get vertexShaderPreludeCode(){return Ma.projectionMercator.vertexSource}get subdivisionGranularity(){return sl}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(n){this._errorMeasurement||(this._errorMeasurement=new Hc(n));const s=u.S(this._errorQueryLatitudeDegrees),p=2*Math.atan(Math.exp(Math.PI-s*Math.PI*2))-.5*Math.PI,y=this._errorMeasurement.updateErrorLoop(s,p),w=j.now();y!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=y,this._errorMeasurementLastChangeTime=w);const T=Math.min(Math.max((w-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=u.bc(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,u.bd(T))}_getMeshKey(n){return`${n.granularity.toString(36)}_${n.generateBorders?"b":""}${n.extendToNorthPole?"n":""}${n.extendToSouthPole?"s":""}`}getMeshFromTileID(n,s,p,y,w){const T=(w==="stencil"?sl.stencil:sl.tile).getGranularityForZoomLevel(s.z);return this._getMesh(n,{granularity:T,generateBorders:p,extendToNorthPole:s.y===0&&y,extendToSouthPole:s.y===(1<<s.z)-1&&y})}_getMesh(n,s){const p=this._getMeshKey(s);if(p in this._tileMeshCache)return this._tileMeshCache[p];const y=function(w,T){const R=qu(T,"16bit"),k=u.aI.deserialize({arrayBuffer:R.vertices,length:R.vertices.byteLength/2/2}),L=u.aK.deserialize({arrayBuffer:R.indices,length:R.indices.byteLength/2/3});return new jl(w.createVertexBuffer(k,Ji.members),w.createIndexBuffer(L),u.aJ.simpleSegment(0,0,k.length,L.length))}(n,s);return this._tileMeshCache[p]=y,y}recalculate(n){}hasTransition(){const n=j.now();let s=!1;return s=s||(n-this._errorMeasurementLastChangeTime)/1e3<.7,s=s||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,s}setErrorQueryLatitudeDegrees(n){this._errorQueryLatitudeDegrees=n}}const Hl=new u.r({type:new u.D(u.v.projection.type)});class ql extends u.E{constructor(n){super(),this._transitionable=new u.T(Hl),this.setProjection(n),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new u.C(0)),this._mercatorProjection=new al,this._verticalPerspectiveProjection=new Ul}get transitionState(){const n=this.properties.get("type");if(typeof n=="string"&&n==="mercator")return 0;if(typeof n=="string"&&n==="vertical-perspective")return 1;if(n instanceof u.be){if(n.from==="vertical-perspective"&&n.to==="mercator")return 1-n.transition;if(n.from==="mercator"&&n.to==="vertical-perspective")return n.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(n){this._mercatorProjection.updateGPUdependent(n),this._verticalPerspectiveProjection.updateGPUdependent(n)}getMeshFromTileID(n,s,p,y,w){return this.currentProjection.getMeshFromTileID(n,s,p,y,w)}setProjection(n){this._transitionable.setValue("type",(n==null?void 0:n.type)||"mercator")}updateTransitions(n){this._transitioning=this._transitionable.transitioned(n,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(n){this.properties=this._transitioning.possiblyEvaluate(n)}setErrorQueryLatitudeDegrees(n){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(n),this._mercatorProjection.setErrorQueryLatitudeDegrees(n)}}function qc(b){const n=Zl(b.worldSize,b.center.lat);return 2*Math.PI*n}function Gl(b,n,s,p,y){const w=1/(1<<y),T=n/u.Z*w+p*w,R=u.bg((b/u.Z*w+s*w)*Math.PI*2+Math.PI,2*Math.PI),k=2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI,L=Math.cos(k),F=new Float64Array(3);return F[0]=Math.sin(R)*L,F[1]=Math.sin(k),F[2]=Math.cos(R)*L,F}function Gi(b){return function(n,s){const p=Math.cos(s),y=new Float64Array(3);return y[0]=Math.sin(n)*p,y[1]=Math.sin(s),y[2]=Math.cos(n)*p,y}(b.lng*Math.PI/180,b.lat*Math.PI/180)}function Zl(b,n){return b/(2*Math.PI)/Math.cos(n*Math.PI/180)}function Xl(b){const n=Math.asin(b[1])/Math.PI*180,s=Math.sqrt(b[0]*b[0]+b[2]*b[2]);if(s>1e-6){const p=b[0]/s,y=Math.acos(b[2]/s),w=(p>0?y:-y)/Math.PI*180;return new u.Q(u.aL(w,-180,180),n)}return new u.Q(0,n)}function ll(b){return Math.cos(b*Math.PI/180)}function Zi(b,n){const s=ll(b),p=ll(n);return u.ah(p/s)}function Nh(b,n){const s=b.rotate(n.bearingInRadians),p=n.zoom+Zi(n.center.lat,0),y=u.bc(1/ll(n.center.lat),1/ll(Math.min(Math.abs(n.center.lat),60)),u.bf(p,7,3,0,1)),w=360/qc({worldSize:n.worldSize,center:{lat:n.center.lat}});return new u.Q(n.center.lng-s.x*w*y,u.ae(n.center.lat+s.y*w,-85.051129,u.af))}function jh(b){const n=.5*b,s=Math.sin(n),p=Math.cos(n);return Math.log(s+p)-Math.log(p-s)}function sp(b,n,s,p){const y=b.lat+s*p;if(Math.abs(s)>1){const w=(Math.sign(b.lat+s)!==Math.sign(b.lat)?-Math.abs(b.lat):Math.abs(b.lat))*Math.PI/180,T=Math.abs(b.lat+s)*Math.PI/180,R=jh(w+p*(T-w)),k=jh(w),L=jh(T);return new u.Q(b.lng+n*((R-k)/(L-k)),y)}return new u.Q(b.lng+n*p,y)}class lp{constructor(n){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._aabbFactory=n}recalculateCache(){if(!this._hadAnyChanges)return;const n=this._cachePrevious;this._cachePrevious=this._cache,this._cache=n,this._cache.clear(),this._hadAnyChanges=!1}getTileAABB(n,s,p,y){const w=`${n.z}_${n.x}_${n.y}`,T=this._cache.get(w);if(T)return T;const R=this._cachePrevious.get(w);if(R)return this._cache.set(w,R),R;const k=this._aabbFactory(n,s,p,y);return this._cache.set(w,k),this._hadAnyChanges=!0,k}}function sa(b,n,s){const p=b-n;return p<0?-p:Math.max(0,p-s)}function Gu(b,n,s,p,y){const w=b-s;let T;return T=w<0?Math.min(-w,1+w-y):w>1?Math.min(Math.max(w-y,0),1-w):0,Math.max(T,sa(n,p,y))}class Yo{constructor(){this._aabbCache=new lp(this._computeTileAABB)}recalculateCache(){this._aabbCache.recalculateCache()}distanceToTile2d(n,s,p,y){const w=1<<p.z,T=1/w,R=p.x/w,k=p.y/w;let L=2;return L=Math.min(L,Gu(n,s,R,k,T)),L=Math.min(L,Gu(n,s,R+.5,-k-T,T)),L=Math.min(L,Gu(n,s,R+.5,2-k-T,T)),L}getWrap(n,s,p){const y=1<<s.z,w=1/y,T=s.x/y,R=sa(n.x,T,w),k=sa(n.x,T-1,w),L=sa(n.x,T+1,w),F=Math.min(R,k,L);return F===L?1:F===k?-1:0}allowVariableZoom(n,s){return rt(n,s)>4}allowWorldCopies(){return!1}getTileAABB(n,s,p,y){return this._aabbCache.getTileAABB(n,s,p,y)}_computeTileAABB(n,s,p,y){if(n.z<=0)return new yi([-1,-1,-1],[1,1,1]);if(n.z===1)return new yi([n.x===0?-1:0,n.y===0?0:-1,-1],[n.x===0?0:1,n.y===0?1:0,1]);{const w=[Gl(0,0,n.x,n.y,n.z),Gl(u.Z,0,n.x,n.y,n.z),Gl(u.Z,u.Z,n.x,n.y,n.z),Gl(0,u.Z,n.x,n.y,n.z)],T=[1,1,1],R=[-1,-1,-1];for(const k of w)for(let L=0;L<3;L++)T[L]=Math.min(T[L],k[L]),R[L]=Math.max(R[L],k[L]);if(n.y===0||n.y===(1<<n.z)-1){const k=[0,n.y===0?1:-1,0];for(let L=0;L<3;L++)T[L]=Math.min(T[L],k[L]),R[L]=Math.max(R[L],k[L])}return new yi(T,R)}}}class Wl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,s,p){return this._helper.interpolatePadding(n,s,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,s){this._helper.resize(n,s)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,s){this._helper.overrideNearFarZ(n,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(n){}constructor(){this._cachedClippingPlane=u.bk(),this._projectionMatrix=u.b1(),this._globeViewProjMatrix32f=u.b0(),this._globeViewProjMatrixNoCorrection=u.b1(),this._globeViewProjMatrixNoCorrectionInverted=u.b1(),this._globeProjMatrixInverted=u.b1(),this._cameraPosition=u.bh(),this._globeLatitudeErrorCorrectionRadians=0,this._helper=new gi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,s)=>this.getConstrained(n,s)}),this._coveringTilesDetailsProvider=new Yo}clone(){const n=new Wl;return n.apply(this),n}apply(n,s){this._globeLatitudeErrorCorrectionRadians=s||0,this._helper.apply(n)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const n=u.bh();return n[0]=this._cameraPosition[0],n[1]=this._cameraPosition[1],n[2]=this._cameraPosition[2],n}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(n){const{overscaledTileID:s,applyGlobeMatrix:p}=n,y=this._helper.getMercatorTileCoordinates(s);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:y,clippingPlane:this._cachedClippingPlane,projectionTransition:p?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(n){const s=this.pitchInRadians,p=this.cameraToCenterDistance/n,y=Math.sin(s)*p,w=Math.cos(s)*p+1,T=1/Math.sqrt(y*y+w*w)*1;let R=-y,k=w;const L=Math.sqrt(R*R+k*k);R/=L,k/=L;const F=[0,R,k];u.bl(F,F,[0,0,0],-this.bearingInRadians),u.bm(F,F,[0,0,0],-1*this.center.lat*Math.PI/180),u.bn(F,F,[0,0,0],this.center.lng*Math.PI/180);const q=1/u.bo(F);return u.aO(F,F,q),[...F,-T*q]}isLocationOccluded(n){return!this.isSurfacePointVisible(Gi(n))}transformLightDirection(n){const s=this._helper._center.lng*Math.PI/180,p=this._helper._center.lat*Math.PI/180,y=Math.cos(p),w=[Math.sin(s)*y,Math.sin(p),Math.cos(s)*y],T=[w[2],0,-w[0]],R=[0,0,0];u.aU(R,T,w),u.aT(T,T),u.aT(R,R);const k=[0,0,0];return u.aT(k,[T[0]*n[0]+R[0]*n[1]+w[0]*n[2],T[1]*n[0]+R[1]*n[1]+w[1]*n[2],T[2]*n[0]+R[2]*n[1]+w[2]*n[2]]),k}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(n,s,p){const y=function(R,k,L){const F=1/(1<<L.z);return new u.$(R/u.Z*F+L.x*F,k/u.Z*F+L.y*F)}(n,s,p.canonical),w=(T=y.y,[u.bg(y.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-T*Math.PI*2))-.5*Math.PI]);var T;return this.getCircleRadiusCorrection()/Math.cos(w[1])}projectTileCoordinates(n,s,p,y){const w=p.canonical,T=Gl(n,s,w.x,w.y,w.z),R=1+(y?y(n,s):0)/u.bu,k=[T[0]*R,T[1]*R,T[2]*R,1];u.at(k,k,this._globeViewProjMatrixNoCorrection);const L=this._cachedClippingPlane,F=L[0]*T[0]+L[1]*T[1]+L[2]*T[2]+L[3]<0;return{point:new u.P(k[0]/k[3],k[1]/k[3]),signedDistanceFromCamera:k[3],isOccluded:F}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const n=Zl(this.worldSize,this.center.lat),s=u.b2(),p=u.b2();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*n),u.aY(s,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const y=this.centerOffset;s[8]=2*-y.x/this._helper._width,s[9]=2*y.y/this._helper._height,this._projectionMatrix=u.aZ(s),this._globeProjMatrixInverted=u.b2(),u.an(this._globeProjMatrixInverted,s),u.L(s,s,[0,0,-this.cameraToCenterDistance]),u.a_(s,s,this.rollInRadians),u.a$(s,s,-this.pitchInRadians),u.a_(s,s,this.bearingInRadians),u.L(s,s,[0,0,-n]);const w=u.bh();w[0]=n,w[1]=n,w[2]=n,u.a$(p,s,this.center.lat*Math.PI/180),u.bp(p,p,-this.center.lng*Math.PI/180),u.M(p,p,w),this._globeViewProjMatrixNoCorrection=p,u.a$(s,s,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),u.bp(s,s,-this.center.lng*Math.PI/180),u.M(s,s,w),this._globeViewProjMatrix32f=new Float32Array(s),this._globeViewProjMatrixNoCorrectionInverted=u.b2(),u.an(this._globeViewProjMatrixNoCorrectionInverted,p);const T=u.bh();this._cameraPosition=u.bh(),this._cameraPosition[2]=this.cameraToCenterDistance/n,u.bl(this._cameraPosition,this._cameraPosition,T,-this.rollInRadians),u.bm(this._cameraPosition,this._cameraPosition,T,this.pitchInRadians),u.bl(this._cameraPosition,this._cameraPosition,T,-this.bearingInRadians),u.aP(this._cameraPosition,this._cameraPosition,[0,0,1]),u.bm(this._cameraPosition,this._cameraPosition,T,-this.center.lat*Math.PI/180),u.bn(this._cameraPosition,this._cameraPosition,T,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(n);const R=u.aZ(this._globeViewProjMatrixNoCorrectionInverted);u.M(R,R,[1,1,-1]),this._cachedFrustum=Br.fromInvProjectionMatrix(R)}calculateFogMatrix(n){u.w("calculateFogMatrix is not supported on globe projection.");const s=u.b2();return u.ad(s),s}getVisibleUnwrappedCoordinates(n){return[new u.aW(0,n)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(n){n&&u.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,s){if(!this._globeViewProjMatrixNoCorrection)return 1;const p=Gi(n);u.aO(p,p,1+s/u.bu);const y=u.bk();return u.at(y,[p[0],p[1],p[2],1],this._globeViewProjMatrixNoCorrection),y[2]/y[3]}populateCache(n){}getBounds(){const n=.5*this.width,s=.5*this.height,p=[new u.P(0,0),new u.P(n,0),new u.P(this.width,0),new u.P(this.width,s),new u.P(this.width,this.height),new u.P(n,this.height),new u.P(0,this.height),new u.P(0,s)],y=[];for(const q of p)y.push(this.unprojectScreenPoint(q));let w=0,T=0,R=0,k=0;const L=this.center;for(const q of y){const H=u.bq(L.lng,q.lng),ee=u.bq(L.lat,q.lat);H<T&&(T=H),H>w&&(w=H),ee<k&&(k=ee),ee>R&&(R=ee)}const F=[L.lng+T,L.lat+k,L.lng+w,L.lat+R];return this.isSurfacePointOnScreen([0,1,0])&&(F[3]=90,F[0]=-180,F[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(F[1]=-90,F[0]=-180,F[2]=180),new Kt(F)}getConstrained(n,s){const p=u.ae(n.lat,-85.051129,u.af),y=u.ae(+s,this.minZoom+Zi(0,p),this.maxZoom);return{center:new u.Q(n.lng,p),zoom:y}}calculateCenterFromCameraLngLatAlt(n,s,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,s,p,y)}setLocationAtPoint(n,s){const p=Gi(this.unprojectScreenPoint(s)),y=Gi(n),w=u.bh();u.br(w);const T=u.bh();u.bn(T,p,w,-this.center.lng*Math.PI/180),u.bm(T,T,w,this.center.lat*Math.PI/180);const R=y[0]*y[0]+y[2]*y[2],k=T[0]*T[0];if(R<k)return;const L=Math.sqrt(R-k),F=-L,q=u.bs(y[0],y[2],T[0],L),H=u.bs(y[0],y[2],T[0],F),ee=u.bh();u.bn(ee,y,w,-q);const ne=u.bs(ee[1],ee[2],T[1],T[2]),ye=u.bh();u.bn(ye,y,w,-H);const ge=u.bs(ye[1],ye[2],T[1],T[2]),_e=.5*Math.PI,Ee=ne>=-_e&&ne<=_e,De=ge>=-_e&&ge<=_e;let ze,je;if(Ee&&De){const Tt=this.center.lng*Math.PI/180,gt=this.center.lat*Math.PI/180;u.bv(q,Tt)+u.bv(ne,gt)<u.bv(H,Tt)+u.bv(ge,gt)?(ze=q,je=ne):(ze=H,je=ge)}else if(Ee)ze=q,je=ne;else{if(!De)return;ze=H,je=ge}const Ue=ze/Math.PI*180,Fe=je/Math.PI*180,it=this.center.lat;this.setCenter(new u.Q(Ue,u.ae(Fe,-90,90))),this.setZoom(this.zoom+Zi(it,this.center.lat))}locationToScreenPoint(n,s){const p=Gi(n);if(s){const y=s.getElevationForLngLatZoom(n,this._helper._tileZoom);u.aO(p,p,1+y/u.bu)}return this._projectSurfacePointToScreen(p)}_projectSurfacePointToScreen(n){const s=u.bk();return u.at(s,[...n,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],new u.P((.5*s[0]+.5)*this.width,(.5*-s[1]+.5)*this.height)}screenPointToMercatorCoordinate(n,s){if(s){const p=s.pointCoordinate(n);if(p)return p}return u.$.fromLngLat(this.unprojectScreenPoint(n))}screenPointToLocation(n,s){var p;return(p=this.screenPointToMercatorCoordinate(n,s))===null||p===void 0?void 0:p.toLngLat()}isPointOnMapSurface(n,s){const p=this._cameraPosition,y=this.getRayDirectionFromPixel(n);return!!this.rayPlanetIntersection(p,y)}getRayDirectionFromPixel(n){const s=u.bk();s[0]=n.x/this.width*2-1,s[1]=-1*(n.y/this.height*2-1),s[2]=1,s[3]=1,u.at(s,s,this._globeViewProjMatrixNoCorrectionInverted),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3];const p=u.bh();p[0]=s[0]-this._cameraPosition[0],p[1]=s[1]-this._cameraPosition[1],p[2]=s[2]-this._cameraPosition[2];const y=u.bh();return u.aT(y,p),y}isSurfacePointVisible(n){const s=this._cachedClippingPlane;return s[0]*n[0]+s[1]*n[1]+s[2]*n[2]+s[3]>=0}isSurfacePointOnScreen(n){if(!this.isSurfacePointVisible(n))return!1;const s=u.bk();return u.at(s,[...n,1],this._globeViewProjMatrixNoCorrection),s[0]/=s[3],s[1]/=s[3],s[2]/=s[3],s[0]>-1&&s[0]<1&&s[1]>-1&&s[1]<1&&s[2]>-1&&s[2]<1}rayPlanetIntersection(n,s){const p=u.aV(n,s),y=u.bh(),w=u.bh();u.aO(w,s,p),u.aS(y,n,w);const T=1-u.aV(y,y);if(T<0)return null;const R=u.aV(n,n)-1,k=-p+(p<0?1:-1)*Math.sqrt(T),L=R/k,F=k;return{tMin:Math.min(L,F),tMax:Math.max(L,F)}}unprojectScreenPoint(n){const s=this._cameraPosition,p=this.getRayDirectionFromPixel(n),y=this.rayPlanetIntersection(s,p);if(y){const F=u.bh();u.aP(F,s,[p[0]*y.tMin,p[1]*y.tMin,p[2]*y.tMin]);const q=u.bh();return u.aT(q,F),Xl(q)}const w=this._cachedClippingPlane,T=w[0]*p[0]+w[1]*p[1]+w[2]*p[2],R=-u.bt(w,s)/T,k=u.bh();if(R>0)u.aP(k,s,[p[0]*R,p[1]*R,p[2]*R]);else{const F=u.bh();u.aP(F,s,[2*p[0],2*p[1],2*p[2]]);const q=u.bt(this._cachedClippingPlane,F);u.aS(k,F,[this._cachedClippingPlane[0]*q,this._cachedClippingPlane[1]*q,this._cachedClippingPlane[2]*q])}const L=function(F){const q=u.bh();return q[0]=F[0]*-F[3],q[1]=F[1]*-F[3],q[2]=F[2]*-F[3],{center:q,radius:Math.sqrt(1-F[3]*F[3])}}(w);return Xl(function(F,q,H){const ee=u.bh();u.aS(ee,H,F);const ne=u.bh();return u.bi(ne,F,ee,q/u.bj(ee)),ne}(L.center,L.radius,k))}getMatrixForModel(n,s){const p=u.Q.convert(n),y=1/u.bu,w=u.b1();return u.bp(w,w,p.lng/180*Math.PI),u.a$(w,w,-p.lat/180*Math.PI),u.L(w,w,[0,0,1+s/u.bu]),u.a$(w,w,.5*Math.PI),u.M(w,w,[y,y,y]),w}getProjectionDataForCustomLayer(n=!0){const s=this.getProjectionData({overscaledTileID:new u.Y(0,0,0,0,0),applyGlobeMatrix:n});return s.tileMercatorCoords=[0,0,1,1],s}getFastPathSimpleProjectionMatrix(n){}}class Yl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(n){this._helper.setMinZoom(n)}setMaxZoom(n){this._helper.setMaxZoom(n)}setMinPitch(n){this._helper.setMinPitch(n)}setMaxPitch(n){this._helper.setMaxPitch(n)}setRenderWorldCopies(n){this._helper.setRenderWorldCopies(n)}setBearing(n){this._helper.setBearing(n)}setPitch(n){this._helper.setPitch(n)}setRoll(n){this._helper.setRoll(n)}setFov(n){this._helper.setFov(n)}setZoom(n){this._helper.setZoom(n)}setCenter(n){this._helper.setCenter(n)}setElevation(n){this._helper.setElevation(n)}setMinElevationForCurrentTile(n){this._helper.setMinElevationForCurrentTile(n)}setPadding(n){this._helper.setPadding(n)}interpolatePadding(n,s,p){return this._helper.interpolatePadding(n,s,p)}isPaddingEqual(n){return this._helper.isPaddingEqual(n)}resize(n,s,p=!0){this._helper.resize(n,s,p)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(n){this._helper.setMaxBounds(n)}overrideNearFarZ(n,s){this._helper.overrideNearFarZ(n,s)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(n){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),n)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(n,s){this._globeness=n,this._globeLatitudeErrorCorrectionRadians=s,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().recalculateCache(),this._mercatorTransform.getCoveringTilesDetailsProvider().recalculateCache()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this._helper=new gi({calcMatrices:()=>{this._calcMatrices()},getConstrained:(n,s)=>this.getConstrained(n,s)}),this._globeness=1,this._mercatorTransform=new Wo,this._verticalPerspectiveTransform=new Wl}clone(){const n=new Yl;return n._globeness=this._globeness,n._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,n.apply(this),n}apply(n){this._helper.apply(n),this._mercatorTransform.apply(this),this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(n){const s=this._mercatorTransform.getProjectionData(n),p=this._verticalPerspectiveTransform.getProjectionData(n);return{mainMatrix:this.isGlobeRendering?p.mainMatrix:s.mainMatrix,clippingPlane:p.clippingPlane,tileMercatorCoords:p.tileMercatorCoords,projectionTransition:n.applyGlobeMatrix?this._globeness:0,fallbackMatrix:s.fallbackMatrix}}isLocationOccluded(n){return this.currentTransform.isLocationOccluded(n)}transformLightDirection(n){return this.currentTransform.transformLightDirection(n)}getPixelScale(){return u.bc(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return u.bc(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(n,s,p){const y=this._mercatorTransform.getPitchedTextCorrection(n,s,p),w=this._verticalPerspectiveTransform.getPitchedTextCorrection(n,s,p);return u.bc(y,w,this._globeness)}projectTileCoordinates(n,s,p,y){return this.currentTransform.projectTileCoordinates(n,s,p,y)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(n){return this.currentTransform.calculateFogMatrix(n)}getVisibleUnwrappedCoordinates(n){return this.currentTransform.getVisibleUnwrappedCoordinates(n)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(n){this._mercatorTransform.recalculateZoomAndCenter(n),this._verticalPerspectiveTransform.recalculateZoomAndCenter(n)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(n,s){return this.currentTransform.lngLatToCameraDepth(n,s)}populateCache(n){this._mercatorTransform.populateCache(n),this._verticalPerspectiveTransform.populateCache(n)}getBounds(){return this.currentTransform.getBounds()}getConstrained(n,s){return this.currentTransform.getConstrained(n,s)}calculateCenterFromCameraLngLatAlt(n,s,p,y){return this._helper.calculateCenterFromCameraLngLatAlt(n,s,p,y)}setLocationAtPoint(n,s){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(n,s),void this.apply(this._mercatorTransform);this._verticalPerspectiveTransform.setLocationAtPoint(n,s),this.apply(this._verticalPerspectiveTransform)}locationToScreenPoint(n,s){return this.currentTransform.locationToScreenPoint(n,s)}screenPointToMercatorCoordinate(n,s){return this.currentTransform.screenPointToMercatorCoordinate(n,s)}screenPointToLocation(n,s){return this.currentTransform.screenPointToLocation(n,s)}isPointOnMapSurface(n,s){return this.currentTransform.isPointOnMapSurface(n,s)}getRayDirectionFromPixel(n){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(n)}getMatrixForModel(n,s){return this.currentTransform.getMatrixForModel(n,s)}getProjectionDataForCustomLayer(n=!0){const s=this._mercatorTransform.getProjectionDataForCustomLayer(n);if(!this.isGlobeRendering)return s;const p=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(n);return p.fallbackMatrix=s.mainMatrix,p}getFastPathSimpleProjectionMatrix(n){return this.currentTransform.getFastPathSimpleProjectionMatrix(n)}}class go{get useGlobeControls(){return!0}handlePanInertia(n,s){const p=Nh(n,s);return Math.abs(p.lng-s.center.lng)>180&&(p.lng=s.center.lng+179.5*Math.sign(p.lng-s.center.lng)),{easingCenter:p,easingOffset:new u.P(0,0)}}handleMapControlsRollPitchBearingZoom(n,s){const p=n.around,y=s.screenPointToLocation(p);n.bearingDelta&&s.setBearing(s.bearing+n.bearingDelta),n.pitchDelta&&s.setPitch(s.pitch+n.pitchDelta),n.rollDelta&&s.setRoll(s.roll+n.rollDelta);const w=s.zoom;n.zoomDelta&&s.setZoom(s.zoom+n.zoomDelta);const T=s.zoom-w;if(T===0)return;const R=u.bq(s.center.lng,y.lng),k=R/(Math.abs(R/180)+1),L=u.bq(s.center.lat,y.lat),F=s.getRayDirectionFromPixel(p),q=s.cameraPosition,H=-1*u.aV(q,F),ee=u.bh();u.aP(ee,q,[F[0]*H,F[1]*H,F[2]*H]);const ne=u.bo(ee)-1,ye=Math.exp(.5*-Math.max(ne-.3,0)),ge=Zl(s.worldSize,s.center.lat)/Math.min(s.width,s.height),_e=u.bf(ge,.9,.5,1,.25),Ee=(1-u.ac(-T))*Math.min(ye,_e),De=s.center.lat,ze=s.zoom,je=new u.Q(s.center.lng+k*Ee,u.ae(s.center.lat+L*Ee,-85.051129,u.af));s.setLocationAtPoint(y,p);const Ue=s.center,Fe=u.bf(Math.abs(R),45,85,0,1),it=u.bf(ge,.75,.35,0,1),Tt=Math.pow(Math.max(Fe,it),.25),gt=u.bq(Ue.lng,je.lng),dt=u.bq(Ue.lat,je.lat);s.setCenter(new u.Q(Ue.lng+gt*Tt,Ue.lat+dt*Tt).wrap()),s.setZoom(ze+Zi(De,s.center.lat))}handleMapControlsPan(n,s,p){if(!n.panDelta)return;const y=s.center.lat,w=s.zoom;s.setCenter(Nh(n.panDelta,s).wrap()),s.setZoom(w+Zi(y,s.center.lat))}cameraForBoxAndBearing(n,s,p,y,w){const T=qi(n,s,p,y,w),R=s.left/w.width*2-1,k=(w.width-s.right)/w.width*2-1,L=s.top/w.height*-2+1,F=(w.height-s.bottom)/w.height*-2+1,q=u.bq(p.getWest(),p.getEast())<0,H=q?p.getEast():p.getWest(),ee=q?p.getWest():p.getEast(),ne=Math.max(p.getNorth(),p.getSouth()),ye=Math.min(p.getNorth(),p.getSouth()),ge=H+.5*u.bq(H,ee),_e=ne+.5*u.bq(ne,ye),Ee=w.clone();Ee.setCenter(T.center),Ee.setBearing(T.bearing),Ee.setPitch(0),Ee.setRoll(0),Ee.setZoom(T.zoom);const De=Ee.modelViewProjectionMatrix,ze=[Gi(p.getNorthWest()),Gi(p.getNorthEast()),Gi(p.getSouthWest()),Gi(p.getSouthEast()),Gi(new u.Q(ee,_e)),Gi(new u.Q(H,_e)),Gi(new u.Q(ge,ne)),Gi(new u.Q(ge,ye))],je=Gi(T.center);let Ue=Number.POSITIVE_INFINITY;for(const Fe of ze)R<0&&(Ue=go.getLesserNonNegativeNonNull(Ue,go.solveVectorScale(Fe,je,De,"x",R))),k>0&&(Ue=go.getLesserNonNegativeNonNull(Ue,go.solveVectorScale(Fe,je,De,"x",k))),L>0&&(Ue=go.getLesserNonNegativeNonNull(Ue,go.solveVectorScale(Fe,je,De,"y",L))),F<0&&(Ue=go.getLesserNonNegativeNonNull(Ue,go.solveVectorScale(Fe,je,De,"y",F)));if(Number.isFinite(Ue)&&Ue!==0)return T.zoom=Ee.zoom+u.ah(Ue),T;ui()}handleJumpToCenterZoom(n,s){const p=n.center.lat,y=n.getConstrained(s.center?u.Q.convert(s.center):n.center,n.zoom).center;n.setCenter(y.wrap());const w=s.zoom!==void 0?+s.zoom:n.zoom+Zi(p,y.lat);n.zoom!==w&&n.setZoom(w)}handleEaseTo(n,s){const p=n.zoom,y=n.center,w=n.padding,T={roll:n.roll,pitch:n.pitch,bearing:n.bearing},R={roll:s.roll===void 0?n.roll:s.roll,pitch:s.pitch===void 0?n.pitch:s.pitch,bearing:s.bearing===void 0?n.bearing:s.bearing},k=s.zoom!==void 0,L=!n.isPaddingEqual(s.padding);let F=!1;const q=s.center?u.Q.convert(s.center):y,H=n.getConstrained(q,p).center;ol(n,H);const ee=n.clone();ee.setCenter(H),ee.setZoom(k?+s.zoom:p+Zi(y.lat,q.lat)),ee.setBearing(s.bearing);const ne=new u.P(u.ae(n.centerPoint.x+s.offsetAsPoint.x,0,n.width),u.ae(n.centerPoint.y+s.offsetAsPoint.y,0,n.height));ee.setLocationAtPoint(H,ne);const ye=(s.offset&&s.offsetAsPoint.mag())>0?ee.center:H,ge=k?+s.zoom:p+Zi(y.lat,ye.lat),_e=p+Zi(y.lat,0),Ee=ge+Zi(ye.lat,0),De=u.bq(y.lng,ye.lng),ze=u.bq(y.lat,ye.lat),je=u.ac(Ee-_e);return F=ge!==p,{easeFunc:Ue=>{if(u.b6(T,R)||Aa({startEulerAngles:T,endEulerAngles:R,tr:n,k:Ue,useSlerp:T.roll!=R.roll}),L&&n.interpolatePadding(w,s.padding,Ue),s.around)u.w("Easing around a point is not supported under globe projection."),n.setLocationAtPoint(s.around,s.aroundPoint);else{const Fe=Ee>_e?Math.min(2,je):Math.max(.5,je),it=Math.pow(Fe,1-Ue),Tt=sp(y,De,ze,Ue*it);n.setCenter(Tt.wrap())}if(F){const Fe=u.B.number(_e,Ee,Ue)+Zi(0,n.center.lat);n.setZoom(Fe)}},isZooming:F,elevationCenter:ye}}handleFlyTo(n,s){const p=s.zoom!==void 0,y=n.center,w=n.zoom,T=n.padding,R=!n.isPaddingEqual(s.padding),k=n.getConstrained(u.Q.convert(s.center||s.locationAtOffset),w).center,L=p?+s.zoom:n.zoom+Zi(n.center.lat,k.lat),F=n.clone();F.setCenter(k),F.setZoom(L),F.setBearing(s.bearing);const q=new u.P(u.ae(n.centerPoint.x+s.offsetAsPoint.x,0,n.width),u.ae(n.centerPoint.y+s.offsetAsPoint.y,0,n.height));F.setLocationAtPoint(k,q);const H=F.center;ol(n,H);const ee=function(ze,je,Ue){const Fe=Gi(je),it=Gi(Ue),Tt=u.aV(Fe,it),gt=Math.acos(Tt),dt=qc(ze);return gt/(2*Math.PI)*dt}(n,y,H),ne=w+Zi(y.lat,0),ye=L+Zi(H.lat,0),ge=u.ac(ye-ne);let _e;if(typeof s.minZoom=="number"){const ze=+s.minZoom+Zi(H.lat,0),je=Math.min(ze,ne,ye)+Zi(0,H.lat),Ue=n.getConstrained(H,je).zoom+Zi(H.lat,0);_e=u.ac(Ue-ne)}const Ee=u.bq(y.lng,H.lng),De=u.bq(y.lat,H.lat);return{easeFunc:(ze,je,Ue,Fe)=>{const it=sp(y,Ee,De,Ue);R&&n.interpolatePadding(T,s.padding,ze);const Tt=ze===1?H:it;n.setCenter(Tt.wrap());const gt=ne+u.ah(je);n.setZoom(ze===1?L:gt+Zi(0,Tt.lat))},scaleOfZoom:ge,targetCenter:H,scaleOfMinZoom:_e,pixelPathLength:ee}}static solveVectorScale(n,s,p,y,w){const T=y==="x"?[p[0],p[4],p[8],p[12]]:[p[1],p[5],p[9],p[13]],R=[p[3],p[7],p[11],p[15]],k=n[0]*T[0]+n[1]*T[1]+n[2]*T[2],L=n[0]*R[0]+n[1]*R[1]+n[2]*R[2],F=s[0]*T[0]+s[1]*T[1]+s[2]*T[2],q=s[0]*R[0]+s[1]*R[1]+s[2]*R[2];return F+w*L===k+w*q||R[3]*(k-F)+T[3]*(q-L)+k*q==F*L?null:(F+T[3]-w*q-w*R[3])/(F-k-w*q+w*L)}static getLesserNonNegativeNonNull(n,s){return s!==null&&s>=0&&s<n?s:n}}class Kl{constructor(n){this._globe=n,this._mercatorCameraHelper=new mo,this._verticalPerspectiveCameraHelper=new go}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(n,s){return this.currentHelper.handlePanInertia(n,s)}handleMapControlsRollPitchBearingZoom(n,s){return this.currentHelper.handleMapControlsRollPitchBearingZoom(n,s)}handleMapControlsPan(n,s,p){this.currentHelper.handleMapControlsPan(n,s,p)}cameraForBoxAndBearing(n,s,p,y,w){return this.currentHelper.cameraForBoxAndBearing(n,s,p,y,w)}handleJumpToCenterZoom(n,s){this.currentHelper.handleJumpToCenterZoom(n,s)}handleEaseTo(n,s){return this.currentHelper.handleEaseTo(n,s)}handleFlyTo(n,s){return this.currentHelper.handleFlyTo(n,s)}}const Fh=(b,n)=>u.x(b,n&&n.filter(s=>s.identifier!=="source.canvas")),cp=u.bw();class Gf extends u.E{constructor(n,s={}){super(),this._rtlPluginLoaded=()=>{for(const p in this.sourceCaches){const y=this.sourceCaches[p].getSource().type;y!=="vector"&&y!=="geojson"||this.sourceCaches[p].reload()}},this.map=n,this.dispatcher=new Xe(qt(),n._getMapId()),this.dispatcher.registerMessageHandler("GG",(p,y)=>this.getGlyphs(p,y)),this.dispatcher.registerMessageHandler("GI",(p,y)=>this.getImages(p,y)),this.imageManager=new Re,this.imageManager.setEventedParent(this),this.glyphManager=new We(n._requestManager,s.localIdeographFontFamily),this.lineAtlas=new we(256,512),this.crossTileSymbolIndex=new Uc,this._spritesImagesIds={},this._layers={},this._order=[],this.sourceCaches={},this.zoomHistory=new u.bx,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("SR",u.by()),sr().on(Hn,this._rtlPluginLoaded),this.on("data",p=>{if(p.dataType!=="source"||p.sourceDataType!=="metadata")return;const y=this.sourceCaches[p.sourceId];if(!y)return;const w=y.getSource();if(w&&w.vectorLayerIds)for(const T in this._layers){const R=this._layers[T];R.source===w.id&&this._validateLayer(R)}})}loadURL(n,s={},p){this.fire(new u.l("dataloading",{dataType:"style"})),s.validate=typeof s.validate!="boolean"||s.validate;const y=this.map._requestManager.transformRequest(n,"Style");this._loadStyleRequest=new AbortController;const w=this._loadStyleRequest;u.j(y,this._loadStyleRequest).then(T=>{this._loadStyleRequest=null,this._load(T.data,s,p)}).catch(T=>{this._loadStyleRequest=null,T&&!w.signal.aborted&&this.fire(new u.k(T))})}loadJSON(n,s={},p){this.fire(new u.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,j.frameAsync(this._frameRequest).then(()=>{this._frameRequest=null,s.validate=s.validate!==!1,this._load(n,s,p)}).catch(()=>{})}loadEmpty(){this.fire(new u.l("dataloading",{dataType:"style"})),this._load(cp,{validate:!1})}_load(n,s,p){var y,w;const T=s.transformStyle?s.transformStyle(p,n):n;if(!s.validate||!Fh(this,u.y(T))){this._loaded=!0,this.stylesheet=T;for(const R in T.sources)this.addSource(R,T.sources[R],{validate:!1});T.sprite?this._loadSprite(T.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(T.glyphs),this._createLayers(),this.light=new et(this.stylesheet.light),this._setProjectionInternal(((y=this.stylesheet.projection)===null||y===void 0?void 0:y.type)||"mercator"),this.sky=new Rt(this.stylesheet.sky),this.map.setTerrain((w=this.stylesheet.terrain)!==null&&w!==void 0?w:null),this.fire(new u.l("data",{dataType:"style"})),this.fire(new u.l("style.load"))}}_createLayers(){const n=u.bz(this.stylesheet.layers);this.dispatcher.broadcast("SL",n),this._order=n.map(s=>s.id),this._layers={},this._serializedLayers=null;for(const s of n){const p=u.bA(s);p.setEventedParent(this,{layer:{id:s.id}}),this._layers[s.id]=p}}_loadSprite(n,s=!1,p=void 0){let y;this.imageManager.setLoaded(!1),this._spriteRequest=new AbortController,function(w,T,R,k){return u._(this,void 0,void 0,function*(){const L=ve(w),F=R>1?"@2x":"",q={},H={};for(const{id:ee,url:ne}of L){const ye=T.transformRequest(Se(ne,F,".json"),"SpriteJSON");q[ee]=u.j(ye,k);const ge=T.transformRequest(Se(ne,F,".png"),"SpriteImage");H[ee]=he.getImage(ge,k)}return yield Promise.all([...Object.values(q),...Object.values(H)]),function(ee,ne){return u._(this,void 0,void 0,function*(){const ye={};for(const ge in ee){ye[ge]={};const _e=j.getImageCanvasContext((yield ne[ge]).data),Ee=(yield ee[ge]).data;for(const De in Ee){const{width:ze,height:je,x:Ue,y:Fe,sdf:it,pixelRatio:Tt,stretchX:gt,stretchY:dt,content:vt,textFitWidth:Jt,textFitHeight:Yt}=Ee[De];ye[ge][De]={data:null,pixelRatio:Tt,sdf:it,stretchX:gt,stretchY:dt,content:vt,textFitWidth:Jt,textFitHeight:Yt,spriteData:{width:ze,height:je,x:Ue,y:Fe,context:_e}}}}return ye})}(q,H)})}(n,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then(w=>{if(this._spriteRequest=null,w)for(const T in w){this._spritesImagesIds[T]=[];const R=this._spritesImagesIds[T]?this._spritesImagesIds[T].filter(k=>!(k in w)):[];for(const k of R)this.imageManager.removeImage(k),this._changedImages[k]=!0;for(const k in w[T]){const L=T==="default"?k:`${T}:${k}`;this._spritesImagesIds[T].push(L),L in this.imageManager.images?this.imageManager.updateImage(L,w[T][k],!1):this.imageManager.addImage(L,w[T][k]),s&&(this._changedImages[L]=!0)}}}).catch(w=>{this._spriteRequest=null,y=w,this.fire(new u.k(y))}).finally(()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),s&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"})),p&&p(y)})}_unloadSprite(){for(const n of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(n),this._changedImages[n]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}_validateLayer(n){const s=this.sourceCaches[n.source];if(!s)return;const p=n.sourceLayer;if(!p)return;const y=s.getSource();(y.type==="geojson"||y.vectorLayerIds&&y.vectorLayerIds.indexOf(p)===-1)&&this.fire(new u.k(new Error(`Source layer "${p}" does not exist on source "${y.id}" as specified by style layer "${n.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const n in this.sourceCaches)if(!this.sourceCaches[n].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(n,s=!1){const p=this._serializedAllLayers();if(!n||n.length===0)return Object.values(s?u.bB(p):p);const y=[];for(const w of n)if(p[w]){const T=s?u.bB(p[w]):p[w];y.push(T)}return y}_serializedAllLayers(){let n=this._serializedLayers;if(n)return n;n=this._serializedLayers={};const s=Object.keys(this._layers);for(const p of s){const y=this._layers[p];y.type!=="custom"&&(n[p]=y.serialize())}return n}hasTransitions(){var n,s,p;if(!((n=this.light)===null||n===void 0)&&n.hasTransition()||!((s=this.sky)===null||s===void 0)&&s.hasTransition()||!((p=this.projection)===null||p===void 0)&&p.hasTransition())return!0;for(const y in this.sourceCaches)if(this.sourceCaches[y].hasTransition())return!0;for(const y in this._layers)if(this._layers[y].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(n){if(!this._loaded)return;const s=this._changed;if(s){const y=Object.keys(this._updatedLayers),w=Object.keys(this._removedLayers);(y.length||w.length)&&this._updateWorkerLayers(y,w);for(const T in this._updatedSources){const R=this._updatedSources[T];if(R==="reload")this._reloadSource(T);else{if(R!=="clear")throw new Error(`Invalid action ${R}`);this._clearSource(T)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const T in this._updatedPaintProps)this._layers[T].updateTransitions(n);this.light.updateTransitions(n),this.sky.updateTransitions(n),this._resetUpdates()}const p={};for(const y in this.sourceCaches){const w=this.sourceCaches[y];p[y]=w.used,w.used=!1}for(const y of this._order){const w=this._layers[y];w.recalculate(n,this._availableImages),!w.isHidden(n.zoom)&&w.source&&(this.sourceCaches[w.source].used=!0)}for(const y in p){const w=this.sourceCaches[y];!!p[y]!=!!w.used&&w.fire(new u.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:y}))}this.light.recalculate(n),this.sky.recalculate(n),this.projection.recalculate(n),this.z=n.zoom,s&&this.fire(new u.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const n=Object.keys(this._changedImages);if(n.length){for(const s in this.sourceCaches)this.sourceCaches[s].reloadTilesForDependencies(["icons","patterns"],n);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const n in this.sourceCaches)this.sourceCaches[n].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(n,s){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(n,!1),removedIds:s})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(n,s={}){var p;this._checkLoaded();const y=this.serialize();if(n=s.transformStyle?s.transformStyle(y,n):n,((p=s.validate)===null||p===void 0||p)&&Fh(this,u.y(n)))return!1;(n=u.bB(n)).layers=u.bz(n.layers);const w=u.bC(y,n),T=this._getOperationsToPerform(w);if(T.unimplemented.length>0)throw new Error(`Unimplemented: ${T.unimplemented.join(", ")}.`);if(T.operations.length===0)return!1;for(const R of T.operations)R();return this.stylesheet=n,this._serializedLayers=null,!0}_getOperationsToPerform(n){const s=[],p=[];for(const y of n)switch(y.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":s.push(()=>this.addLayer.apply(this,y.args));break;case"removeLayer":s.push(()=>this.removeLayer.apply(this,y.args));break;case"setPaintProperty":s.push(()=>this.setPaintProperty.apply(this,y.args));break;case"setLayoutProperty":s.push(()=>this.setLayoutProperty.apply(this,y.args));break;case"setFilter":s.push(()=>this.setFilter.apply(this,y.args));break;case"addSource":s.push(()=>this.addSource.apply(this,y.args));break;case"removeSource":s.push(()=>this.removeSource.apply(this,y.args));break;case"setLayerZoomRange":s.push(()=>this.setLayerZoomRange.apply(this,y.args));break;case"setLight":s.push(()=>this.setLight.apply(this,y.args));break;case"setGeoJSONSourceData":s.push(()=>this.setGeoJSONSourceData.apply(this,y.args));break;case"setGlyphs":s.push(()=>this.setGlyphs.apply(this,y.args));break;case"setSprite":s.push(()=>this.setSprite.apply(this,y.args));break;case"setTerrain":s.push(()=>this.map.setTerrain.apply(this,y.args));break;case"setSky":s.push(()=>this.setSky.apply(this,y.args));break;case"setProjection":this.setProjection.apply(this,y.args);break;case"setTransition":s.push(()=>{});break;default:p.push(y.command)}return{operations:s,unimplemented:p}}addImage(n,s){if(this.getImage(n))return this.fire(new u.k(new Error(`An image named "${n}" already exists.`)));this.imageManager.addImage(n,s),this._afterImageUpdated(n)}updateImage(n,s){this.imageManager.updateImage(n,s)}getImage(n){return this.imageManager.getImage(n)}removeImage(n){if(!this.getImage(n))return this.fire(new u.k(new Error(`An image named "${n}" does not exist.`)));this.imageManager.removeImage(n),this._afterImageUpdated(n)}_afterImageUpdated(n){this._availableImages=this.imageManager.listImages(),this._changedImages[n]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(n,s,p={}){if(this._checkLoaded(),this.sourceCaches[n]!==void 0)throw new Error(`Source "${n}" already exists.`);if(!s.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(s).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(s.type)>=0&&this._validate(u.y.source,`sources.${n}`,s,null,p))return;this.map&&this.map._collectResourceTiming&&(s.collectResourceTiming=!0);const y=this.sourceCaches[n]=new Ie(n,s,this.dispatcher);y.style=this,y.setEventedParent(this,()=>({isSourceLoaded:y.loaded(),source:y.serialize(),sourceId:n})),y.onAdd(this.map),this._changed=!0}removeSource(n){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error("There is no source with this ID");for(const p in this._layers)if(this._layers[p].source===n)return this.fire(new u.k(new Error(`Source "${n}" cannot be removed while layer "${p}" is using it.`)));const s=this.sourceCaches[n];delete this.sourceCaches[n],delete this._updatedSources[n],s.fire(new u.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:n})),s.setEventedParent(null),s.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(n,s){if(this._checkLoaded(),this.sourceCaches[n]===void 0)throw new Error(`There is no source with this ID=${n}`);const p=this.sourceCaches[n].getSource();if(p.type!=="geojson")throw new Error(`geojsonSource.type is ${p.type}, which is !== 'geojson`);p.setData(s),this._changed=!0}getSource(n){return this.sourceCaches[n]&&this.sourceCaches[n].getSource()}addLayer(n,s,p={}){this._checkLoaded();const y=n.id;if(this.getLayer(y))return void this.fire(new u.k(new Error(`Layer "${y}" already exists on this map.`)));let w;if(n.type==="custom"){if(Fh(this,u.bD(n)))return;w=u.bA(n)}else{if("source"in n&&typeof n.source=="object"&&(this.addSource(y,n.source),n=u.bB(n),n=u.e(n,{source:y})),this._validate(u.y.layer,`layers.${y}`,n,{arrayIndex:-1},p))return;w=u.bA(n),this._validateLayer(w),w.setEventedParent(this,{layer:{id:y}})}const T=s?this._order.indexOf(s):this._order.length;if(s&&T===-1)this.fire(new u.k(new Error(`Cannot add layer "${y}" before non-existing layer "${s}".`)));else{if(this._order.splice(T,0,y),this._layerOrderChanged=!0,this._layers[y]=w,this._removedLayers[y]&&w.source&&w.type!=="custom"){const R=this._removedLayers[y];delete this._removedLayers[y],R.type!==w.type?this._updatedSources[w.source]="clear":(this._updatedSources[w.source]="reload",this.sourceCaches[w.source].pause())}this._updateLayer(w),w.onAdd&&w.onAdd(this.map)}}moveLayer(n,s){if(this._checkLoaded(),this._changed=!0,!this._layers[n])return void this.fire(new u.k(new Error(`The layer '${n}' does not exist in the map's style and cannot be moved.`)));if(n===s)return;const p=this._order.indexOf(n);this._order.splice(p,1);const y=s?this._order.indexOf(s):this._order.length;s&&y===-1?this.fire(new u.k(new Error(`Cannot move layer "${n}" before non-existing layer "${s}".`))):(this._order.splice(y,0,n),this._layerOrderChanged=!0)}removeLayer(n){this._checkLoaded();const s=this._layers[n];if(!s)return void this.fire(new u.k(new Error(`Cannot remove non-existing layer "${n}".`)));s.setEventedParent(null);const p=this._order.indexOf(n);this._order.splice(p,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[n]=s,delete this._layers[n],this._serializedLayers&&delete this._serializedLayers[n],delete this._updatedLayers[n],delete this._updatedPaintProps[n],s.onRemove&&s.onRemove(this.map)}getLayer(n){return this._layers[n]}getLayersOrder(){return[...this._order]}hasLayer(n){return n in this._layers}setLayerZoomRange(n,s,p){this._checkLoaded();const y=this.getLayer(n);y?y.minzoom===s&&y.maxzoom===p||(s!=null&&(y.minzoom=s),p!=null&&(y.maxzoom=p),this._updateLayer(y)):this.fire(new u.k(new Error(`Cannot set the zoom range of non-existing layer "${n}".`)))}setFilter(n,s,p={}){this._checkLoaded();const y=this.getLayer(n);if(y){if(!u.bE(y.filter,s))return s==null?(y.filter=void 0,void this._updateLayer(y)):void(this._validate(u.y.filter,`layers.${y.id}.filter`,s,null,p)||(y.filter=u.bB(s),this._updateLayer(y)))}else this.fire(new u.k(new Error(`Cannot filter non-existing layer "${n}".`)))}getFilter(n){return u.bB(this.getLayer(n).filter)}setLayoutProperty(n,s,p,y={}){this._checkLoaded();const w=this.getLayer(n);w?u.bE(w.getLayoutProperty(s),p)||(w.setLayoutProperty(s,p,y),this._updateLayer(w)):this.fire(new u.k(new Error(`Cannot style non-existing layer "${n}".`)))}getLayoutProperty(n,s){const p=this.getLayer(n);if(p)return p.getLayoutProperty(s);this.fire(new u.k(new Error(`Cannot get style of non-existing layer "${n}".`)))}setPaintProperty(n,s,p,y={}){this._checkLoaded();const w=this.getLayer(n);w?u.bE(w.getPaintProperty(s),p)||(w.setPaintProperty(s,p,y)&&this._updateLayer(w),this._changed=!0,this._updatedPaintProps[n]=!0,this._serializedLayers=null):this.fire(new u.k(new Error(`Cannot style non-existing layer "${n}".`)))}getPaintProperty(n,s){return this.getLayer(n).getPaintProperty(s)}setFeatureState(n,s){this._checkLoaded();const p=n.source,y=n.sourceLayer,w=this.sourceCaches[p];if(w===void 0)return void this.fire(new u.k(new Error(`The source '${p}' does not exist in the map's style.`)));const T=w.getSource().type;T==="geojson"&&y?this.fire(new u.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):T!=="vector"||y?(n.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),w.setFeatureState(y,n.id,s)):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(n,s){this._checkLoaded();const p=n.source,y=this.sourceCaches[p];if(y===void 0)return void this.fire(new u.k(new Error(`The source '${p}' does not exist in the map's style.`)));const w=y.getSource().type,T=w==="vector"?n.sourceLayer:void 0;w!=="vector"||T?s&&typeof n.id!="string"&&typeof n.id!="number"?this.fire(new u.k(new Error("A feature id is required to remove its specific state property."))):y.removeFeatureState(T,n.id,s):this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(n){this._checkLoaded();const s=n.source,p=n.sourceLayer,y=this.sourceCaches[s];if(y!==void 0)return y.getSource().type!=="vector"||p?(n.id===void 0&&this.fire(new u.k(new Error("The feature id parameter must be provided."))),y.getFeatureState(p,n.id)):void this.fire(new u.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new u.k(new Error(`The source '${s}' does not exist in the map's style.`)))}getTransition(){return u.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const n=u.bF(this.sourceCaches,w=>w.serialize()),s=this._serializeByIds(this._order,!0),p=this.map.getTerrain()||void 0,y=this.stylesheet;return u.bG({version:y.version,name:y.name,metadata:y.metadata,light:y.light,sky:y.sky,center:y.center,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,sprite:y.sprite,glyphs:y.glyphs,transition:y.transition,projection:y.projection,sources:n,layers:s,terrain:p},w=>w!==void 0)}_updateLayer(n){this._updatedLayers[n.id]=!0,n.source&&!this._updatedSources[n.source]&&this.sourceCaches[n.source].getSource().type!=="raster"&&(this._updatedSources[n.source]="reload",this.sourceCaches[n.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(n){const s=T=>this._layers[T].type==="fill-extrusion",p={},y=[];for(let T=this._order.length-1;T>=0;T--){const R=this._order[T];if(s(R)){p[R]=T;for(const k of n){const L=k[R];if(L)for(const F of L)y.push(F)}}}y.sort((T,R)=>R.intersectionZ-T.intersectionZ);const w=[];for(let T=this._order.length-1;T>=0;T--){const R=this._order[T];if(s(R))for(let k=y.length-1;k>=0;k--){const L=y[k].feature;if(p[L.layer.id]<T)break;w.push(L),y.pop()}else for(const k of n){const L=k[R];if(L)for(const F of L)w.push(F.feature)}}return w}queryRenderedFeatures(n,s,p){s&&s.filter&&this._validate(u.y.filter,"queryRenderedFeatures.filter",s.filter,null,s);const y={};if(s&&s.layers){if(!(Array.isArray(s.layers)||s.layers instanceof Set))return this.fire(new u.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const L of s.layers){const F=this._layers[L];if(!F)return this.fire(new u.k(new Error(`The layer '${L}' does not exist in the map's style and cannot be queried for features.`))),[];y[F.source]=!0}}const w=[];s.availableImages=this._availableImages;const T=this._serializedAllLayers(),R=s.layers instanceof Set?s.layers:Array.isArray(s.layers)?new Set(s.layers):null,k=Object.assign(Object.assign({},s),{layers:R});for(const L in this.sourceCaches)s.layers&&!y[L]||w.push(Ke(this.sourceCaches[L],this._layers,T,n,k,p,this.map.terrain?(F,q,H)=>this.map.terrain.getElevation(F,q,H):void 0));return this.placement&&w.push(function(L,F,q,H,ee,ne,ye){const ge={},_e=ne.queryRenderedSymbols(H),Ee=[];for(const De of Object.keys(_e).map(Number))Ee.push(ye[De]);Ee.sort(Je);for(const De of Ee){const ze=De.featureIndex.lookupSymbolFeatures(_e[De.bucketInstanceId],F,De.bucketIndex,De.sourceLayerIndex,ee.filter,ee.layers,ee.availableImages,L);for(const je in ze){const Ue=ge[je]=ge[je]||[],Fe=ze[je];Fe.sort((it,Tt)=>{const gt=De.featureSortOrder;if(gt){const dt=gt.indexOf(it.featureIndex);return gt.indexOf(Tt.featureIndex)-dt}return Tt.featureIndex-it.featureIndex});for(const it of Fe)Ue.push(it)}}return function(De,ze,je){for(const Ue in De)for(const Fe of De[Ue])Vt(Fe,je[ze[Ue].source]);return De}(ge,L,q)}(this._layers,T,this.sourceCaches,n,k,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(w)}querySourceFeatures(n,s){s&&s.filter&&this._validate(u.y.filter,"querySourceFeatures.filter",s.filter,null,s);const p=this.sourceCaches[n];return p?function(y,w){const T=y.getRenderableIds().map(L=>y.getTileByID(L)),R=[],k={};for(let L=0;L<T.length;L++){const F=T[L],q=F.tileID.canonical.key;k[q]||(k[q]=!0,F.querySourceFeatures(R,w))}return R}(p,s):[]}getLight(){return this.light.getLight()}setLight(n,s={}){this._checkLoaded();const p=this.light.getLight();let y=!1;for(const T in n)if(!u.bE(n[T],p[T])){y=!0;break}if(!y)return;const w={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(n,s),this.light.updateTransitions(w)}getProjection(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.projection}setProjection(n){if(this._checkLoaded(),this.projection){if(this.projection.name===n.type)return;this.projection.destroy(),delete this.projection}this.stylesheet.projection=n,this._setProjectionInternal(n.type)}getSky(){var n;return(n=this.stylesheet)===null||n===void 0?void 0:n.sky}setSky(n,s={}){this._checkLoaded();const p=this.getSky();let y=!1;if(!n&&!p)return;if(n&&!p)y=!0;else if(!n&&p)y=!0;else for(const T in n)if(!u.bE(n[T],p[T])){y=!0;break}if(!y)return;const w={now:j.now(),transition:u.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=n,this.sky.setSky(n,s),this.sky.updateTransitions(w)}_setProjectionInternal(n){const s=function(p){if(Array.isArray(p)){const y=new ql({type:p});return{projection:y,transform:new Yl,cameraHelper:new Kl(y)}}switch(p){case"mercator":return{projection:new al,transform:new Wo,cameraHelper:new mo};case"globe":{const y=new ql({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:y,transform:new Yl,cameraHelper:new Kl(y)}}case"vertical-perspective":return{projection:new Ul,transform:new Wl,cameraHelper:new go};default:return u.w(`Unknown projection name: ${p}. Falling back to mercator projection.`),{projection:new al,transform:new Wo,cameraHelper:new mo}}}(n);this.projection=s.projection,this.map.migrateProjection(s.transform,s.cameraHelper);for(const p in this.sourceCaches)this.sourceCaches[p].reload()}_validate(n,s,p,y,w={}){return(!w||w.validate!==!1)&&Fh(this,n.call(u.y,u.e({key:s,style:this.serialize(),value:p,styleSpec:u.v},y)))}_remove(n=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),sr().off(Hn,this._rtlPluginLoaded);for(const s in this._layers)this._layers[s].setEventedParent(null);for(const s in this.sourceCaches){const p=this.sourceCaches[s];p.setEventedParent(null),p.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),n&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(n)}_clearSource(n){this.sourceCaches[n].clearTiles()}_reloadSource(n){this.sourceCaches[n].resume(),this.sourceCaches[n].reload()}_updateSources(n){for(const s in this.sourceCaches)this.sourceCaches[s].update(n,this.map.terrain)}_generateCollisionBoxes(){for(const n in this.sourceCaches)this._reloadSource(n)}_updatePlacement(n,s,p,y,w=!1){let T=!1,R=!1;const k={};for(const L of this._order){const F=this._layers[L];if(F.type!=="symbol")continue;if(!k[F.source]){const H=this.sourceCaches[F.source];k[F.source]=H.getRenderableIds(!0).map(ee=>H.getTileByID(ee)).sort((ee,ne)=>ne.tileID.overscaledZ-ee.tileID.overscaledZ||(ee.tileID.isLessThan(ne.tileID)?-1:1))}const q=this.crossTileSymbolIndex.addLayer(F,k[F.source],n.center.lng);T=T||q}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((w=w||this._layerOrderChanged||p===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(j.now(),n.zoom))&&(this.pauseablePlacement=new Xo(n,this.map.terrain,this._order,w,s,p,y,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,k),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(j.now()),R=!0),T&&this.pauseablePlacement.placement.setStale()),R||T)for(const L of this._order){const F=this._layers[L];F.type==="symbol"&&this.placement.updateLayerOpacities(F,k[F.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(j.now())}_releaseSymbolFadeTiles(){for(const n in this.sourceCaches)this.sourceCaches[n].releaseSymbolFadeTiles()}getImages(n,s){return u._(this,void 0,void 0,function*(){const p=yield this.imageManager.getImages(s.icons);this._updateTilesForChangedImages();const y=this.sourceCaches[s.source];return y&&y.setDependencies(s.tileID.key,s.type,s.icons),p})}getGlyphs(n,s){return u._(this,void 0,void 0,function*(){const p=yield this.glyphManager.getGlyphs(s.stacks),y=this.sourceCaches[s.source];return y&&y.setDependencies(s.tileID.key,s.type,[""]),p})}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(n,s={}){this._checkLoaded(),n&&this._validate(u.y.glyphs,"glyphs",n,null,s)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=n,this.glyphManager.entries={},this.glyphManager.setURL(n))}addSprite(n,s,p={},y){this._checkLoaded();const w=[{id:n,url:s}],T=[...ve(this.stylesheet.sprite),...w];this._validate(u.y.sprite,"sprite",T,null,p)||(this.stylesheet.sprite=T,this._loadSprite(w,!0,y))}removeSprite(n){this._checkLoaded();const s=ve(this.stylesheet.sprite);if(s.find(p=>p.id===n)){if(this._spritesImagesIds[n])for(const p of this._spritesImagesIds[n])this.imageManager.removeImage(p),this._changedImages[p]=!0;s.splice(s.findIndex(p=>p.id===n),1),this.stylesheet.sprite=s.length>0?s:void 0,delete this._spritesImagesIds[n],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new u.l("data",{dataType:"style"}))}else this.fire(new u.k(new Error(`Sprite "${n}" doesn't exists on this map.`)))}getSprite(){return ve(this.stylesheet.sprite)}setSprite(n,s={},p){this._checkLoaded(),n&&this._validate(u.y.sprite,"sprite",n,null,s)||(this.stylesheet.sprite=n,n?this._loadSprite(n,!0,p):(this._unloadSprite(),p&&p(null)))}}var ig=u.aG([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class ag{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(n,s,p,y,w,T,R,k,L){this.context=n;let F=this.boundPaintVertexBuffers.length!==y.length;for(let q=0;!F&&q<y.length;q++)this.boundPaintVertexBuffers[q]!==y[q]&&(F=!0);!this.vao||this.boundProgram!==s||this.boundLayoutVertexBuffer!==p||F||this.boundIndexBuffer!==w||this.boundVertexOffset!==T||this.boundDynamicVertexBuffer!==R||this.boundDynamicVertexBuffer2!==k||this.boundDynamicVertexBuffer3!==L?this.freshBind(s,p,y,w,T,R,k,L):(n.bindVertexArray.set(this.vao),R&&R.bind(),w&&w.dynamicDraw&&w.bind(),k&&k.bind(),L&&L.bind())}freshBind(n,s,p,y,w,T,R,k){const L=n.numAttributes,F=this.context,q=F.gl;this.vao&&this.destroy(),this.vao=F.createVertexArray(),F.bindVertexArray.set(this.vao),this.boundProgram=n,this.boundLayoutVertexBuffer=s,this.boundPaintVertexBuffers=p,this.boundIndexBuffer=y,this.boundVertexOffset=w,this.boundDynamicVertexBuffer=T,this.boundDynamicVertexBuffer2=R,this.boundDynamicVertexBuffer3=k,s.enableAttributes(q,n);for(const H of p)H.enableAttributes(q,n);T&&T.enableAttributes(q,n),R&&R.enableAttributes(q,n),k&&k.enableAttributes(q,n),s.bind(),s.setVertexAttribPointers(q,n,w);for(const H of p)H.bind(),H.setVertexAttribPointers(q,n,w);T&&(T.bind(),T.setVertexAttribPointers(q,n,w)),y&&y.bind(),R&&(R.bind(),R.setVertexAttribPointers(q,n,w)),k&&(k.bind(),k.setVertexAttribPointers(q,n,w)),F.currentNumAttributes=L}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const og=(b,n,s,p,y)=>({u_texture:0,u_ele_delta:b,u_fog_matrix:n,u_fog_color:s?s.properties.get("fog-color"):u.b7.white,u_fog_ground_blend:s?s.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:y?0:s?s.calculateFogBlendOpacity(p):0,u_horizon_color:s?s.properties.get("horizon-color"):u.b7.white,u_horizon_fog_blend:s?s.properties.get("horizon-fog-blend"):1,u_is_globe_mode:y?1:0}),$h={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function Gc(b){const n=[];for(let s=0;s<b.length;s++){if(b[s]===null)continue;const p=b[s].split(" ");n.push(p.pop())}return n}class Vh{constructor(n,s,p,y,w,T,R,k,L=[]){const F=n.gl;this.program=F.createProgram();const q=Gc(s.staticAttributes),H=p?p.getBinderAttributes():[],ee=q.concat(H),ne=Ma.prelude.staticUniforms?Gc(Ma.prelude.staticUniforms):[],ye=R.staticUniforms?Gc(R.staticUniforms):[],ge=s.staticUniforms?Gc(s.staticUniforms):[],_e=p?p.getBinderUniforms():[],Ee=ne.concat(ye).concat(ge).concat(_e),De=[];for(const gt of Ee)De.indexOf(gt)<0&&De.push(gt);const ze=p?p.defines():[];_i(F)&&ze.unshift("#version 300 es"),w&&ze.push("#define OVERDRAW_INSPECTOR;"),T&&ze.push("#define TERRAIN3D;"),k&&ze.push(k),L&&ze.push(...L);let je=ze.concat(Ma.prelude.fragmentSource,R.fragmentSource,s.fragmentSource).join(`
`),Ue=ze.concat(Ma.prelude.vertexSource,R.vertexSource,s.vertexSource).join(`
`);_i(F)||(je=function(gt){return gt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")}(je),Ue=function(gt){return gt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")}(Ue));const Fe=F.createShader(F.FRAGMENT_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);if(F.shaderSource(Fe,je),F.compileShader(Fe),!F.getShaderParameter(Fe,F.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${F.getShaderInfoLog(Fe)}`);F.attachShader(this.program,Fe);const it=F.createShader(F.VERTEX_SHADER);if(F.isContextLost())return void(this.failedToCreate=!0);if(F.shaderSource(it,Ue),F.compileShader(it),!F.getShaderParameter(it,F.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${F.getShaderInfoLog(it)}`);F.attachShader(this.program,it),this.attributes={};const Tt={};this.numAttributes=ee.length;for(let gt=0;gt<this.numAttributes;gt++)ee[gt]&&(F.bindAttribLocation(this.program,gt,ee[gt]),this.attributes[ee[gt]]=gt);if(F.linkProgram(this.program),!F.getProgramParameter(this.program,F.LINK_STATUS))throw new Error(`Program failed to link: ${F.getProgramInfoLog(this.program)}`);F.deleteShader(it),F.deleteShader(Fe);for(let gt=0;gt<De.length;gt++){const dt=De[gt];if(dt&&!Tt[dt]){const vt=F.getUniformLocation(this.program,dt);vt&&(Tt[dt]=vt)}}this.fixedUniforms=y(n,Tt),this.terrainUniforms=((gt,dt)=>({u_depth:new u.bH(gt,dt.u_depth),u_terrain:new u.bH(gt,dt.u_terrain),u_terrain_dim:new u.b8(gt,dt.u_terrain_dim),u_terrain_matrix:new u.bJ(gt,dt.u_terrain_matrix),u_terrain_unpack:new u.bK(gt,dt.u_terrain_unpack),u_terrain_exaggeration:new u.b8(gt,dt.u_terrain_exaggeration)}))(n,Tt),this.projectionUniforms=((gt,dt)=>({u_projection_matrix:new u.bJ(gt,dt.u_projection_matrix),u_projection_tile_mercator_coords:new u.bK(gt,dt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new u.bK(gt,dt.u_projection_clipping_plane),u_projection_transition:new u.b8(gt,dt.u_projection_transition),u_projection_fallback_matrix:new u.bJ(gt,dt.u_projection_fallback_matrix)}))(n,Tt),this.binderUniforms=p?p.getUniforms(n,Tt):[]}draw(n,s,p,y,w,T,R,k,L,F,q,H,ee,ne,ye,ge,_e,Ee,De){const ze=n.gl;if(this.failedToCreate)return;if(n.program.set(this.program),n.setDepthMode(p),n.setStencilMode(y),n.setColorMode(w),n.setCullFace(T),k){n.activeTexture.set(ze.TEXTURE2),ze.bindTexture(ze.TEXTURE_2D,k.depthTexture),n.activeTexture.set(ze.TEXTURE3),ze.bindTexture(ze.TEXTURE_2D,k.texture);for(const Ue in this.terrainUniforms)this.terrainUniforms[Ue].set(k[Ue])}if(L)for(const Ue in L)this.projectionUniforms[$h[Ue]].set(L[Ue]);if(R)for(const Ue in this.fixedUniforms)this.fixedUniforms[Ue].set(R[Ue]);ge&&ge.setUniforms(n,this.binderUniforms,ne,{zoom:ye});let je=0;switch(s){case ze.LINES:je=2;break;case ze.TRIANGLES:je=3;break;case ze.LINE_STRIP:je=1}for(const Ue of ee.get()){const Fe=Ue.vaos||(Ue.vaos={});(Fe[F]||(Fe[F]=new ag)).bind(n,this,q,ge?ge.getPaintVertexBuffers():[],H,Ue.vertexOffset,_e,Ee,De),ze.drawElements(s,Ue.primitiveLength*je,ze.UNSIGNED_SHORT,Ue.primitiveOffset*je*2)}}}function Uh(b,n,s){const p=1/u.az(s,1,n.transform.tileZoom),y=Math.pow(2,s.tileID.overscaledZ),w=s.tileSize*Math.pow(2,n.transform.tileZoom)/y,T=w*(s.tileID.canonical.x+s.tileID.wrap*y),R=w*s.tileID.canonical.y;return{u_image:0,u_texsize:s.imageAtlasTexture.size,u_scale:[p,b.fromScale,b.toScale],u_fade:b.t,u_pixel_coord_upper:[T>>16,R>>16],u_pixel_coord_lower:[65535&T,65535&R]}}const Hh=(b,n,s,p)=>{const y=b.style.light,w=y.properties.get("position"),T=[w.x,w.y,w.z],R=u.bN();y.properties.get("anchor")==="viewport"&&u.bO(R,b.transform.bearingInRadians),u.bP(T,T,R);const k=b.transform.transformLightDirection(T),L=y.properties.get("color");return{u_lightpos:T,u_lightpos_globe:k,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[L.r,L.g,L.b],u_vertical_gradient:+n,u_opacity:s,u_fill_translate:p}},yo=(b,n,s,p,y,w,T)=>u.e(Hh(b,n,s,p),Uh(w,b,T),{u_height_factor:-Math.pow(2,y.overscaledZ)/T.tileSize/8}),Zc=(b,n,s,p)=>u.e(Uh(n,b,s),{u_fill_translate:p}),Zf=(b,n)=>({u_world:b,u_fill_translate:n}),Xc=(b,n,s,p,y)=>u.e(Zc(b,n,s,y),{u_world:p}),Wc=(b,n,s,p,y)=>{const w=b.transform;let T,R,k=0;if(s.paint.get("circle-pitch-alignment")==="map"){const L=u.az(n,1,w.zoom);T=!0,R=[L,L],k=L/(u.Z*Math.pow(2,n.tileID.overscaledZ))*2*Math.PI*y}else T=!1,R=w.pixelsToGLUnits;return{u_camera_to_center_distance:w.cameraToCenterDistance,u_scale_with_map:+(s.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+T,u_device_pixel_ratio:b.pixelRatio,u_extrude_scale:R,u_globe_extrude_scale:k,u_translate:p}},up=b=>({u_pixel_extrude_scale:[1/b.width,1/b.height]}),Zu=b=>({u_viewport_size:[b.width,b.height]}),Xf=(b,n=1)=>({u_color:b,u_overlay:0,u_overlay_scale:n}),_o=(b,n,s,p)=>{const y=u.az(b,1,n)/(u.Z*Math.pow(2,b.tileID.overscaledZ))*2*Math.PI*p;return{u_extrude_scale:u.az(b,1,n),u_intensity:s,u_globe_extrude_scale:y}},hp=(b,n,s,p)=>{const y=u.K();u.bQ(y,0,b.width,b.height,0,0,1);const w=b.context.gl;return{u_matrix:y,u_world:[w.drawingBufferWidth,w.drawingBufferHeight],u_image:s,u_color_ramp:p,u_opacity:n.paint.get("heatmap-opacity")}},fp=(b,n,s)=>{const p=s.paint.get("hillshade-accent-color");let y;switch(s.paint.get("hillshade-method")){case"basic":y=4;break;case"combined":y=1;break;case"igor":y=2;break;case"multidirectional":y=3;break;default:y=0}const w=s.getIlluminationProperties();for(let T=0;T<w.directionRadians.length;T++)s.paint.get("hillshade-illumination-anchor")==="viewport"&&(w.directionRadians[T]+=b.transform.bearingInRadians);return{u_image:0,u_latrange:Wf(0,n.tileID),u_exaggeration:s.paint.get("hillshade-exaggeration"),u_altitudes:w.altitudeRadians,u_azimuths:w.directionRadians,u_accent:p,u_method:y,u_highlights:w.highlightColor,u_shadows:w.shadowColor}},sg=(b,n)=>{const s=n.stride,p=u.K();return u.bQ(p,0,u.Z,-8192,0,0,1),u.L(p,p,[0,-8192,0]),{u_matrix:p,u_image:1,u_dimension:[s,s],u_zoom:b.overscaledZ,u_unpack:n.getUnpackVector()}};function Wf(b,n){const s=Math.pow(2,n.canonical.z),p=n.canonical.y;return[new u.$(0,p/s).toLngLat().lat,new u.$(0,(p+1)/s).toLngLat().lat]}const Yc=(b,n,s,p)=>{const y=b.transform;return{u_translation:Ss(b,n,s),u_ratio:p/u.az(n,1,y.zoom),u_device_pixel_ratio:b.pixelRatio,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Kc=(b,n,s,p,y)=>u.e(Yc(b,n,s,p),{u_image:0,u_image_height:y}),Qc=(b,n,s,p,y)=>{const w=b.transform,T=Jc(n,w);return{u_translation:Ss(b,n,s),u_texsize:n.imageAtlasTexture.size,u_ratio:p/u.az(n,1,w.zoom),u_device_pixel_ratio:b.pixelRatio,u_image:0,u_scale:[T,y.fromScale,y.toScale],u_fade:y.t,u_units_to_pixels:[1/w.pixelsToGLUnits[0],1/w.pixelsToGLUnits[1]]}},dp=(b,n,s,p,y,w)=>{const T=b.lineAtlas,R=Jc(n,b.transform),k=s.layout.get("line-cap")==="round",L=T.getDash(y.from,k),F=T.getDash(y.to,k),q=L.width*w.fromScale,H=F.width*w.toScale;return u.e(Yc(b,n,s,p),{u_patternscale_a:[R/q,-L.height/2],u_patternscale_b:[R/H,-F.height/2],u_sdfgamma:T.width/(256*Math.min(q,H)*b.pixelRatio)/2,u_image:0,u_tex_y_a:L.y,u_tex_y_b:F.y,u_mix:w.t})};function Jc(b,n){return 1/u.az(b,1,n.tileZoom)}function Ss(b,n,s){return u.aA(b.transform,n,s.paint.get("line-translate"),s.paint.get("line-translate-anchor"))}const Yf=(b,n,s,p,y)=>{return{u_tl_parent:b,u_scale_parent:n,u_buffer_scale:1,u_fade_t:s.mix,u_opacity:s.opacity*p.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:p.paint.get("raster-brightness-min"),u_brightness_high:p.paint.get("raster-brightness-max"),u_saturation_factor:(T=p.paint.get("raster-saturation"),T>0?1-1/(1.001-T):-T),u_contrast_factor:(w=p.paint.get("raster-contrast"),w>0?1/(1-w):1+w),u_spin_weights:qh(p.paint.get("raster-hue-rotate")),u_coords_top:[y[0].x,y[0].y,y[1].x,y[1].y],u_coords_bottom:[y[3].x,y[3].y,y[2].x,y[2].y]};var w,T};function qh(b){b*=Math.PI/180;const n=Math.sin(b),s=Math.cos(b);return[(2*s+1)/3,(-Math.sqrt(3)*n-s+1)/3,(Math.sqrt(3)*n-s+1)/3]}const cl=(b,n,s,p,y,w,T,R,k,L,F,q,H)=>{const ee=T.transform;return{u_is_size_zoom_constant:+(b==="constant"||b==="source"),u_is_size_feature_constant:+(b==="constant"||b==="camera"),u_size_t:n?n.uSizeT:0,u_size:n?n.uSize:0,u_camera_to_center_distance:ee.cameraToCenterDistance,u_pitch:ee.pitch/360*2*Math.PI,u_rotate_symbol:+s,u_aspect_ratio:ee.width/ee.height,u_fade_change:T.options.fadeDuration?T.symbolFadeChange:1,u_label_plane_matrix:R,u_coord_matrix:k,u_is_text:+F,u_pitch_with_map:+p,u_is_along_line:y,u_is_variable_anchor:w,u_texsize:q,u_texture:0,u_translation:L,u_pitched_scale:H}},Kf=(b,n,s,p,y,w,T,R,k,L,F,q,H,ee)=>{const ne=T.transform;return u.e(cl(b,n,s,p,y,w,T,R,k,L,F,q,ee),{u_gamma_scale:p?Math.cos(ne.pitch*Math.PI/180)*ne.cameraToCenterDistance:1,u_device_pixel_ratio:T.pixelRatio,u_is_halo:1})},Xu=(b,n,s,p,y,w,T,R,k,L,F,q,H)=>u.e(Kf(b,n,s,p,y,w,T,R,k,L,!0,F,0,H),{u_texsize_icon:q,u_texture_icon:1}),pp=(b,n)=>({u_opacity:b,u_color:n}),lg=(b,n,s,p,y)=>u.e(function(w,T,R,k){const L=R.imageManager.getPattern(w.from.toString()),F=R.imageManager.getPattern(w.to.toString()),{width:q,height:H}=R.imageManager.getPixelSize(),ee=Math.pow(2,k.tileID.overscaledZ),ne=k.tileSize*Math.pow(2,R.transform.tileZoom)/ee,ye=ne*(k.tileID.canonical.x+k.tileID.wrap*ee),ge=ne*k.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:L.tl,u_pattern_br_a:L.br,u_pattern_tl_b:F.tl,u_pattern_br_b:F.br,u_texsize:[q,H],u_mix:T.t,u_pattern_size_a:L.displaySize,u_pattern_size_b:F.displaySize,u_scale_a:T.fromScale,u_scale_b:T.toScale,u_tile_units_to_pixels:1/u.az(k,1,R.transform.tileZoom),u_pixel_coord_upper:[ye>>16,ge>>16],u_pixel_coord_lower:[65535&ye,65535&ge]}}(s,y,n,p),{u_opacity:b}),Qf=(b,n)=>{},mp={fillExtrusion:(b,n)=>({u_lightpos:new u.bL(b,n.u_lightpos),u_lightpos_globe:new u.bL(b,n.u_lightpos_globe),u_lightintensity:new u.b8(b,n.u_lightintensity),u_lightcolor:new u.bL(b,n.u_lightcolor),u_vertical_gradient:new u.b8(b,n.u_vertical_gradient),u_opacity:new u.b8(b,n.u_opacity),u_fill_translate:new u.bM(b,n.u_fill_translate)}),fillExtrusionPattern:(b,n)=>({u_lightpos:new u.bL(b,n.u_lightpos),u_lightpos_globe:new u.bL(b,n.u_lightpos_globe),u_lightintensity:new u.b8(b,n.u_lightintensity),u_lightcolor:new u.bL(b,n.u_lightcolor),u_vertical_gradient:new u.b8(b,n.u_vertical_gradient),u_height_factor:new u.b8(b,n.u_height_factor),u_opacity:new u.b8(b,n.u_opacity),u_fill_translate:new u.bM(b,n.u_fill_translate),u_image:new u.bH(b,n.u_image),u_texsize:new u.bM(b,n.u_texsize),u_pixel_coord_upper:new u.bM(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(b,n.u_pixel_coord_lower),u_scale:new u.bL(b,n.u_scale),u_fade:new u.b8(b,n.u_fade)}),fill:(b,n)=>({u_fill_translate:new u.bM(b,n.u_fill_translate)}),fillPattern:(b,n)=>({u_image:new u.bH(b,n.u_image),u_texsize:new u.bM(b,n.u_texsize),u_pixel_coord_upper:new u.bM(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(b,n.u_pixel_coord_lower),u_scale:new u.bL(b,n.u_scale),u_fade:new u.b8(b,n.u_fade),u_fill_translate:new u.bM(b,n.u_fill_translate)}),fillOutline:(b,n)=>({u_world:new u.bM(b,n.u_world),u_fill_translate:new u.bM(b,n.u_fill_translate)}),fillOutlinePattern:(b,n)=>({u_world:new u.bM(b,n.u_world),u_image:new u.bH(b,n.u_image),u_texsize:new u.bM(b,n.u_texsize),u_pixel_coord_upper:new u.bM(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(b,n.u_pixel_coord_lower),u_scale:new u.bL(b,n.u_scale),u_fade:new u.b8(b,n.u_fade),u_fill_translate:new u.bM(b,n.u_fill_translate)}),circle:(b,n)=>({u_camera_to_center_distance:new u.b8(b,n.u_camera_to_center_distance),u_scale_with_map:new u.bH(b,n.u_scale_with_map),u_pitch_with_map:new u.bH(b,n.u_pitch_with_map),u_extrude_scale:new u.bM(b,n.u_extrude_scale),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_globe_extrude_scale:new u.b8(b,n.u_globe_extrude_scale),u_translate:new u.bM(b,n.u_translate)}),collisionBox:(b,n)=>({u_pixel_extrude_scale:new u.bM(b,n.u_pixel_extrude_scale)}),collisionCircle:(b,n)=>({u_viewport_size:new u.bM(b,n.u_viewport_size)}),debug:(b,n)=>({u_color:new u.bI(b,n.u_color),u_overlay:new u.bH(b,n.u_overlay),u_overlay_scale:new u.b8(b,n.u_overlay_scale)}),depth:Qf,clippingMask:Qf,heatmap:(b,n)=>({u_extrude_scale:new u.b8(b,n.u_extrude_scale),u_intensity:new u.b8(b,n.u_intensity),u_globe_extrude_scale:new u.b8(b,n.u_globe_extrude_scale)}),heatmapTexture:(b,n)=>({u_matrix:new u.bJ(b,n.u_matrix),u_world:new u.bM(b,n.u_world),u_image:new u.bH(b,n.u_image),u_color_ramp:new u.bH(b,n.u_color_ramp),u_opacity:new u.b8(b,n.u_opacity)}),hillshade:(b,n)=>({u_image:new u.bH(b,n.u_image),u_latrange:new u.bM(b,n.u_latrange),u_exaggeration:new u.b8(b,n.u_exaggeration),u_altitudes:new u.bS(b,n.u_altitudes),u_azimuths:new u.bS(b,n.u_azimuths),u_accent:new u.bI(b,n.u_accent),u_method:new u.bH(b,n.u_method),u_shadows:new u.bR(b,n.u_shadows),u_highlights:new u.bR(b,n.u_highlights)}),hillshadePrepare:(b,n)=>({u_matrix:new u.bJ(b,n.u_matrix),u_image:new u.bH(b,n.u_image),u_dimension:new u.bM(b,n.u_dimension),u_zoom:new u.b8(b,n.u_zoom),u_unpack:new u.bK(b,n.u_unpack)}),line:(b,n)=>({u_translation:new u.bM(b,n.u_translation),u_ratio:new u.b8(b,n.u_ratio),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_units_to_pixels:new u.bM(b,n.u_units_to_pixels)}),lineGradient:(b,n)=>({u_translation:new u.bM(b,n.u_translation),u_ratio:new u.b8(b,n.u_ratio),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_units_to_pixels:new u.bM(b,n.u_units_to_pixels),u_image:new u.bH(b,n.u_image),u_image_height:new u.b8(b,n.u_image_height)}),linePattern:(b,n)=>({u_translation:new u.bM(b,n.u_translation),u_texsize:new u.bM(b,n.u_texsize),u_ratio:new u.b8(b,n.u_ratio),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_image:new u.bH(b,n.u_image),u_units_to_pixels:new u.bM(b,n.u_units_to_pixels),u_scale:new u.bL(b,n.u_scale),u_fade:new u.b8(b,n.u_fade)}),lineSDF:(b,n)=>({u_translation:new u.bM(b,n.u_translation),u_ratio:new u.b8(b,n.u_ratio),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_units_to_pixels:new u.bM(b,n.u_units_to_pixels),u_patternscale_a:new u.bM(b,n.u_patternscale_a),u_patternscale_b:new u.bM(b,n.u_patternscale_b),u_sdfgamma:new u.b8(b,n.u_sdfgamma),u_image:new u.bH(b,n.u_image),u_tex_y_a:new u.b8(b,n.u_tex_y_a),u_tex_y_b:new u.b8(b,n.u_tex_y_b),u_mix:new u.b8(b,n.u_mix)}),raster:(b,n)=>({u_tl_parent:new u.bM(b,n.u_tl_parent),u_scale_parent:new u.b8(b,n.u_scale_parent),u_buffer_scale:new u.b8(b,n.u_buffer_scale),u_fade_t:new u.b8(b,n.u_fade_t),u_opacity:new u.b8(b,n.u_opacity),u_image0:new u.bH(b,n.u_image0),u_image1:new u.bH(b,n.u_image1),u_brightness_low:new u.b8(b,n.u_brightness_low),u_brightness_high:new u.b8(b,n.u_brightness_high),u_saturation_factor:new u.b8(b,n.u_saturation_factor),u_contrast_factor:new u.b8(b,n.u_contrast_factor),u_spin_weights:new u.bL(b,n.u_spin_weights),u_coords_top:new u.bK(b,n.u_coords_top),u_coords_bottom:new u.bK(b,n.u_coords_bottom)}),symbolIcon:(b,n)=>({u_is_size_zoom_constant:new u.bH(b,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(b,n.u_is_size_feature_constant),u_size_t:new u.b8(b,n.u_size_t),u_size:new u.b8(b,n.u_size),u_camera_to_center_distance:new u.b8(b,n.u_camera_to_center_distance),u_pitch:new u.b8(b,n.u_pitch),u_rotate_symbol:new u.bH(b,n.u_rotate_symbol),u_aspect_ratio:new u.b8(b,n.u_aspect_ratio),u_fade_change:new u.b8(b,n.u_fade_change),u_label_plane_matrix:new u.bJ(b,n.u_label_plane_matrix),u_coord_matrix:new u.bJ(b,n.u_coord_matrix),u_is_text:new u.bH(b,n.u_is_text),u_pitch_with_map:new u.bH(b,n.u_pitch_with_map),u_is_along_line:new u.bH(b,n.u_is_along_line),u_is_variable_anchor:new u.bH(b,n.u_is_variable_anchor),u_texsize:new u.bM(b,n.u_texsize),u_texture:new u.bH(b,n.u_texture),u_translation:new u.bM(b,n.u_translation),u_pitched_scale:new u.b8(b,n.u_pitched_scale)}),symbolSDF:(b,n)=>({u_is_size_zoom_constant:new u.bH(b,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(b,n.u_is_size_feature_constant),u_size_t:new u.b8(b,n.u_size_t),u_size:new u.b8(b,n.u_size),u_camera_to_center_distance:new u.b8(b,n.u_camera_to_center_distance),u_pitch:new u.b8(b,n.u_pitch),u_rotate_symbol:new u.bH(b,n.u_rotate_symbol),u_aspect_ratio:new u.b8(b,n.u_aspect_ratio),u_fade_change:new u.b8(b,n.u_fade_change),u_label_plane_matrix:new u.bJ(b,n.u_label_plane_matrix),u_coord_matrix:new u.bJ(b,n.u_coord_matrix),u_is_text:new u.bH(b,n.u_is_text),u_pitch_with_map:new u.bH(b,n.u_pitch_with_map),u_is_along_line:new u.bH(b,n.u_is_along_line),u_is_variable_anchor:new u.bH(b,n.u_is_variable_anchor),u_texsize:new u.bM(b,n.u_texsize),u_texture:new u.bH(b,n.u_texture),u_gamma_scale:new u.b8(b,n.u_gamma_scale),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_is_halo:new u.bH(b,n.u_is_halo),u_translation:new u.bM(b,n.u_translation),u_pitched_scale:new u.b8(b,n.u_pitched_scale)}),symbolTextAndIcon:(b,n)=>({u_is_size_zoom_constant:new u.bH(b,n.u_is_size_zoom_constant),u_is_size_feature_constant:new u.bH(b,n.u_is_size_feature_constant),u_size_t:new u.b8(b,n.u_size_t),u_size:new u.b8(b,n.u_size),u_camera_to_center_distance:new u.b8(b,n.u_camera_to_center_distance),u_pitch:new u.b8(b,n.u_pitch),u_rotate_symbol:new u.bH(b,n.u_rotate_symbol),u_aspect_ratio:new u.b8(b,n.u_aspect_ratio),u_fade_change:new u.b8(b,n.u_fade_change),u_label_plane_matrix:new u.bJ(b,n.u_label_plane_matrix),u_coord_matrix:new u.bJ(b,n.u_coord_matrix),u_is_text:new u.bH(b,n.u_is_text),u_pitch_with_map:new u.bH(b,n.u_pitch_with_map),u_is_along_line:new u.bH(b,n.u_is_along_line),u_is_variable_anchor:new u.bH(b,n.u_is_variable_anchor),u_texsize:new u.bM(b,n.u_texsize),u_texsize_icon:new u.bM(b,n.u_texsize_icon),u_texture:new u.bH(b,n.u_texture),u_texture_icon:new u.bH(b,n.u_texture_icon),u_gamma_scale:new u.b8(b,n.u_gamma_scale),u_device_pixel_ratio:new u.b8(b,n.u_device_pixel_ratio),u_is_halo:new u.bH(b,n.u_is_halo),u_translation:new u.bM(b,n.u_translation),u_pitched_scale:new u.b8(b,n.u_pitched_scale)}),background:(b,n)=>({u_opacity:new u.b8(b,n.u_opacity),u_color:new u.bI(b,n.u_color)}),backgroundPattern:(b,n)=>({u_opacity:new u.b8(b,n.u_opacity),u_image:new u.bH(b,n.u_image),u_pattern_tl_a:new u.bM(b,n.u_pattern_tl_a),u_pattern_br_a:new u.bM(b,n.u_pattern_br_a),u_pattern_tl_b:new u.bM(b,n.u_pattern_tl_b),u_pattern_br_b:new u.bM(b,n.u_pattern_br_b),u_texsize:new u.bM(b,n.u_texsize),u_mix:new u.b8(b,n.u_mix),u_pattern_size_a:new u.bM(b,n.u_pattern_size_a),u_pattern_size_b:new u.bM(b,n.u_pattern_size_b),u_scale_a:new u.b8(b,n.u_scale_a),u_scale_b:new u.b8(b,n.u_scale_b),u_pixel_coord_upper:new u.bM(b,n.u_pixel_coord_upper),u_pixel_coord_lower:new u.bM(b,n.u_pixel_coord_lower),u_tile_units_to_pixels:new u.b8(b,n.u_tile_units_to_pixels)}),terrain:(b,n)=>({u_texture:new u.bH(b,n.u_texture),u_ele_delta:new u.b8(b,n.u_ele_delta),u_fog_matrix:new u.bJ(b,n.u_fog_matrix),u_fog_color:new u.bI(b,n.u_fog_color),u_fog_ground_blend:new u.b8(b,n.u_fog_ground_blend),u_fog_ground_blend_opacity:new u.b8(b,n.u_fog_ground_blend_opacity),u_horizon_color:new u.bI(b,n.u_horizon_color),u_horizon_fog_blend:new u.b8(b,n.u_horizon_fog_blend),u_is_globe_mode:new u.b8(b,n.u_is_globe_mode)}),terrainDepth:(b,n)=>({u_ele_delta:new u.b8(b,n.u_ele_delta)}),terrainCoords:(b,n)=>({u_texture:new u.bH(b,n.u_texture),u_terrain_coords_id:new u.b8(b,n.u_terrain_coords_id),u_ele_delta:new u.b8(b,n.u_ele_delta)}),projectionErrorMeasurement:(b,n)=>({u_input:new u.b8(b,n.u_input),u_output_expected:new u.b8(b,n.u_output_expected)}),atmosphere:(b,n)=>({u_sun_pos:new u.bL(b,n.u_sun_pos),u_atmosphere_blend:new u.b8(b,n.u_atmosphere_blend),u_globe_position:new u.bL(b,n.u_globe_position),u_globe_radius:new u.b8(b,n.u_globe_radius),u_inv_proj_matrix:new u.bJ(b,n.u_inv_proj_matrix)}),sky:(b,n)=>({u_sky_color:new u.bI(b,n.u_sky_color),u_horizon_color:new u.bI(b,n.u_horizon_color),u_horizon:new u.bM(b,n.u_horizon),u_horizon_normal:new u.bM(b,n.u_horizon_normal),u_sky_horizon_blend:new u.b8(b,n.u_sky_horizon_blend),u_sky_blend:new u.b8(b,n.u_sky_blend)})};class gp{constructor(n,s,p){this.context=n;const y=n.gl;this.buffer=y.createBuffer(),this.dynamicDraw=!!p,this.context.unbindVAO(),n.bindElementBuffer.set(this.buffer),y.bufferData(y.ELEMENT_ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(n){const s=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),s.bufferSubData(s.ELEMENT_ARRAY_BUFFER,0,n.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Jf={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Fa{constructor(n,s,p,y){this.length=s.length,this.attributes=p,this.itemSize=s.bytesPerElement,this.dynamicDraw=y,this.context=n;const w=n.gl;this.buffer=w.createBuffer(),n.bindVertexBuffer.set(this.buffer),w.bufferData(w.ARRAY_BUFFER,s.arrayBuffer,this.dynamicDraw?w.DYNAMIC_DRAW:w.STATIC_DRAW),this.dynamicDraw||delete s.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(n){if(n.length!==this.length)throw new Error(`Length of new data is ${n.length}, which doesn't match current length of ${this.length}`);const s=this.context.gl;this.bind(),s.bufferSubData(s.ARRAY_BUFFER,0,n.arrayBuffer)}enableAttributes(n,s){for(let p=0;p<this.attributes.length;p++){const y=s.attributes[this.attributes[p].name];y!==void 0&&n.enableVertexAttribArray(y)}}setVertexAttribPointers(n,s,p){for(let y=0;y<this.attributes.length;y++){const w=this.attributes[y],T=s.attributes[w.name];T!==void 0&&n.vertexAttribPointer(T,w.components,n[Jf[w.type]],!1,this.itemSize,w.offset+this.itemSize*(p||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Kn{constructor(n){this.gl=n.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(n){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Ko extends Kn{getDefault(){return u.b7.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.clearColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Gh extends Kn{getDefault(){return 1}set(n){(n!==this.current||this.dirty)&&(this.gl.clearDepth(n),this.current=n,this.dirty=!1)}}class Zh extends Kn{getDefault(){return 0}set(n){(n!==this.current||this.dirty)&&(this.gl.clearStencil(n),this.current=n,this.dirty=!1)}}class Xh extends Kn{getDefault(){return[!0,!0,!0,!0]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.colorMask(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Wh extends Kn{getDefault(){return!0}set(n){(n!==this.current||this.dirty)&&(this.gl.depthMask(n),this.current=n,this.dirty=!1)}}class ed extends Kn{getDefault(){return 255}set(n){(n!==this.current||this.dirty)&&(this.gl.stencilMask(n),this.current=n,this.dirty=!1)}}class vo extends Kn{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(n){const s=this.current;(n.func!==s.func||n.ref!==s.ref||n.mask!==s.mask||this.dirty)&&(this.gl.stencilFunc(n.func,n.ref,n.mask),this.current=n,this.dirty=!1)}}class Wu extends Kn{getDefault(){const n=this.gl;return[n.KEEP,n.KEEP,n.KEEP]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||this.dirty)&&(this.gl.stencilOp(n[0],n[1],n[2]),this.current=n,this.dirty=!1)}}class Yu extends Kn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.STENCIL_TEST):s.disable(s.STENCIL_TEST),this.current=n,this.dirty=!1}}class td extends Kn{getDefault(){return[0,1]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.depthRange(n[0],n[1]),this.current=n,this.dirty=!1)}}class yp extends Kn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.DEPTH_TEST):s.disable(s.DEPTH_TEST),this.current=n,this.dirty=!1}}class Ql extends Kn{getDefault(){return this.gl.LESS}set(n){(n!==this.current||this.dirty)&&(this.gl.depthFunc(n),this.current=n,this.dirty=!1)}}class Jl extends Kn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.BLEND):s.disable(s.BLEND),this.current=n,this.dirty=!1}}class nd extends Kn{getDefault(){const n=this.gl;return[n.ONE,n.ZERO]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||this.dirty)&&(this.gl.blendFunc(n[0],n[1]),this.current=n,this.dirty=!1)}}class rd extends Kn{getDefault(){return u.b7.transparent}set(n){const s=this.current;(n.r!==s.r||n.g!==s.g||n.b!==s.b||n.a!==s.a||this.dirty)&&(this.gl.blendColor(n.r,n.g,n.b,n.a),this.current=n,this.dirty=!1)}}class Qo extends Kn{getDefault(){return this.gl.FUNC_ADD}set(n){(n!==this.current||this.dirty)&&(this.gl.blendEquation(n),this.current=n,this.dirty=!1)}}class Ku extends Kn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;n?s.enable(s.CULL_FACE):s.disable(s.CULL_FACE),this.current=n,this.dirty=!1}}class Qu extends Kn{getDefault(){return this.gl.BACK}set(n){(n!==this.current||this.dirty)&&(this.gl.cullFace(n),this.current=n,this.dirty=!1)}}class Yh extends Kn{getDefault(){return this.gl.CCW}set(n){(n!==this.current||this.dirty)&&(this.gl.frontFace(n),this.current=n,this.dirty=!1)}}class ec extends Kn{getDefault(){return null}set(n){(n!==this.current||this.dirty)&&(this.gl.useProgram(n),this.current=n,this.dirty=!1)}}class Kh extends Kn{getDefault(){return this.gl.TEXTURE0}set(n){(n!==this.current||this.dirty)&&(this.gl.activeTexture(n),this.current=n,this.dirty=!1)}}class eu extends Kn{getDefault(){const n=this.gl;return[0,0,n.drawingBufferWidth,n.drawingBufferHeight]}set(n){const s=this.current;(n[0]!==s[0]||n[1]!==s[1]||n[2]!==s[2]||n[3]!==s[3]||this.dirty)&&(this.gl.viewport(n[0],n[1],n[2],n[3]),this.current=n,this.dirty=!1)}}class Ya extends Kn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindFramebuffer(s.FRAMEBUFFER,n),this.current=n,this.dirty=!1}}class id extends Kn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindRenderbuffer(s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class Qh extends Kn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindTexture(s.TEXTURE_2D,n),this.current=n,this.dirty=!1}}class Ka extends Kn{getDefault(){return null}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.bindBuffer(s.ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class ul extends Kn{getDefault(){return null}set(n){const s=this.gl;s.bindBuffer(s.ELEMENT_ARRAY_BUFFER,n),this.current=n,this.dirty=!1}}class Pa extends Kn{getDefault(){return null}set(n){var s;if(n===this.current&&!this.dirty)return;const p=this.gl;_i(p)?p.bindVertexArray(n):(s=p.getExtension("OES_vertex_array_object"))===null||s===void 0||s.bindVertexArrayOES(n),this.current=n,this.dirty=!1}}class Ra extends Kn{getDefault(){return 4}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_ALIGNMENT,n),this.current=n,this.dirty=!1}}class Jo extends Kn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n),this.current=n,this.dirty=!1}}class tu extends Kn{getDefault(){return!1}set(n){if(n===this.current&&!this.dirty)return;const s=this.gl;s.pixelStorei(s.UNPACK_FLIP_Y_WEBGL,n),this.current=n,this.dirty=!1}}class tc extends Kn{constructor(n,s){super(n),this.context=n,this.parent=s}getDefault(){return null}}class Cs extends tc{setDirty(){this.dirty=!0}set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferTexture2D(s.FRAMEBUFFER,s.COLOR_ATTACHMENT0,s.TEXTURE_2D,n,0),this.current=n,this.dirty=!1}}class hl extends tc{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}class nc extends tc{set(n){if(n===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const s=this.gl;s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,n),this.current=n,this.dirty=!1}}const Ju="Framebuffer is not complete";class qn{constructor(n,s,p,y,w){this.context=n,this.width=s,this.height=p;const T=n.gl,R=this.framebuffer=T.createFramebuffer();if(this.colorAttachment=new Cs(n,R),y)this.depthAttachment=w?new nc(n,R):new hl(n,R);else if(w)throw new Error("Stencil cannot be set without depth");if(T.checkFramebufferStatus(T.FRAMEBUFFER)!==T.FRAMEBUFFER_COMPLETE)throw new Error(Ju)}destroy(){const n=this.context.gl,s=this.colorAttachment.get();if(s&&n.deleteTexture(s),this.depthAttachment){const p=this.depthAttachment.get();p&&n.deleteRenderbuffer(p)}n.deleteFramebuffer(this.framebuffer)}}class Ts{constructor(n){var s,p;if(this.gl=n,this.clearColor=new Ko(this),this.clearDepth=new Gh(this),this.clearStencil=new Zh(this),this.colorMask=new Xh(this),this.depthMask=new Wh(this),this.stencilMask=new ed(this),this.stencilFunc=new vo(this),this.stencilOp=new Wu(this),this.stencilTest=new Yu(this),this.depthRange=new td(this),this.depthTest=new yp(this),this.depthFunc=new Ql(this),this.blend=new Jl(this),this.blendFunc=new nd(this),this.blendColor=new rd(this),this.blendEquation=new Qo(this),this.cullFace=new Ku(this),this.cullFaceSide=new Qu(this),this.frontFace=new Yh(this),this.program=new ec(this),this.activeTexture=new Kh(this),this.viewport=new eu(this),this.bindFramebuffer=new Ya(this),this.bindRenderbuffer=new id(this),this.bindTexture=new Qh(this),this.bindVertexBuffer=new Ka(this),this.bindElementBuffer=new ul(this),this.bindVertexArray=new Pa(this),this.pixelStoreUnpack=new Ra(this),this.pixelStoreUnpackPremultiplyAlpha=new Jo(this),this.pixelStoreUnpackFlipY=new tu(this),this.extTextureFilterAnisotropic=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=n.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=n.getParameter(n.MAX_TEXTURE_SIZE),_i(n)){this.HALF_FLOAT=n.HALF_FLOAT;const y=n.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(s=n.RGBA16F)!==null&&s!==void 0?s:y==null?void 0:y.RGBA16F_EXT,this.RGB16F=(p=n.RGB16F)!==null&&p!==void 0?p:y==null?void 0:y.RGB16F_EXT,n.getExtension("EXT_color_buffer_float")}else{n.getExtension("EXT_color_buffer_half_float"),n.getExtension("OES_texture_half_float_linear");const y=n.getExtension("OES_texture_half_float");this.HALF_FLOAT=y==null?void 0:y.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(n,s){return new gp(this,n,s)}createVertexBuffer(n,s,p){return new Fa(this,n,s,p)}createRenderbuffer(n,s,p){const y=this.gl,w=y.createRenderbuffer();return this.bindRenderbuffer.set(w),y.renderbufferStorage(y.RENDERBUFFER,n,s,p),this.bindRenderbuffer.set(null),w}createFramebuffer(n,s,p,y){return new qn(this,n,s,p,y)}clear({color:n,depth:s,stencil:p}){const y=this.gl;let w=0;n&&(w|=y.COLOR_BUFFER_BIT,this.clearColor.set(n),this.colorMask.set([!0,!0,!0,!0])),s!==void 0&&(w|=y.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(s),this.depthMask.set(!0)),p!==void 0&&(w|=y.STENCIL_BUFFER_BIT,this.clearStencil.set(p),this.stencilMask.set(255)),y.clear(w)}setCullFace(n){n.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(n.mode),this.frontFace.set(n.frontFace))}setDepthMode(n){n.func!==this.gl.ALWAYS||n.mask?(this.depthTest.set(!0),this.depthFunc.set(n.func),this.depthMask.set(n.mask),this.depthRange.set(n.range)):this.depthTest.set(!1)}setStencilMode(n){n.test.func!==this.gl.ALWAYS||n.mask?(this.stencilTest.set(!0),this.stencilMask.set(n.mask),this.stencilOp.set([n.fail,n.depthFail,n.pass]),this.stencilFunc.set({func:n.test.func,ref:n.ref,mask:n.test.mask})):this.stencilTest.set(!1)}setColorMode(n){u.bE(n.blendFunction,wr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(n.blendFunction),this.blendColor.set(n.blendColor)),this.colorMask.set(n.mask)}createVertexArray(){var n;return _i(this.gl)?this.gl.createVertexArray():(n=this.gl.getExtension("OES_vertex_array_object"))===null||n===void 0?void 0:n.createVertexArrayOES()}deleteVertexArray(n){var s;return _i(this.gl)?this.gl.deleteVertexArray(n):(s=this.gl.getExtension("OES_vertex_array_object"))===null||s===void 0?void 0:s.deleteVertexArrayOES(n)}unbindVAO(){this.bindVertexArray.set(null)}}let Jh;function Oa(b,n,s,p,y){const w=b.context,T=b.transform,R=w.gl,k=b.useProgram("collisionBox"),L=[];let F=0,q=0;for(let _e=0;_e<p.length;_e++){const Ee=p[_e],De=n.getTile(Ee).getBucket(s);if(!De)continue;const ze=y?De.textCollisionBox:De.iconCollisionBox,je=De.collisionCircleArray;je.length>0&&(L.push({circleArray:je,circleOffset:q,coord:Ee}),F+=je.length/4,q=F),ze&&k.draw(w,R.LINES,Rn.disabled,Fn.disabled,b.colorModeForRenderPass(),Yn.disabled,up(b.transform),b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee),T.getProjectionData({overscaledTileID:Ee,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),s.id,ze.layoutVertexBuffer,ze.indexBuffer,ze.segments,null,b.transform.zoom,null,null,ze.collisionVertexBuffer)}if(!y||!L.length)return;const H=b.useProgram("collisionCircle"),ee=new u.bT;ee.resize(4*F),ee._trim();let ne=0;for(const _e of L)for(let Ee=0;Ee<_e.circleArray.length/4;Ee++){const De=4*Ee,ze=_e.circleArray[De+0],je=_e.circleArray[De+1],Ue=_e.circleArray[De+2],Fe=_e.circleArray[De+3];ee.emplace(ne++,ze,je,Ue,Fe,0),ee.emplace(ne++,ze,je,Ue,Fe,1),ee.emplace(ne++,ze,je,Ue,Fe,2),ee.emplace(ne++,ze,je,Ue,Fe,3)}(!Jh||Jh.length<2*F)&&(Jh=function(_e){const Ee=2*_e,De=new u.bV;De.resize(Ee),De._trim();for(let ze=0;ze<Ee;ze++){const je=6*ze;De.uint16[je+0]=4*ze+0,De.uint16[je+1]=4*ze+1,De.uint16[je+2]=4*ze+2,De.uint16[je+3]=4*ze+2,De.uint16[je+4]=4*ze+3,De.uint16[je+5]=4*ze+0}return De}(F));const ye=w.createIndexBuffer(Jh,!0),ge=w.createVertexBuffer(ee,u.bU.members,!0);for(const _e of L){const Ee=Zu(b.transform);H.draw(w,R.TRIANGLES,Rn.disabled,Fn.disabled,b.colorModeForRenderPass(),Yn.disabled,Ee,b.style.map.terrain&&b.style.map.terrain.getTerrainData(_e.coord),null,s.id,ge,ye,u.aJ.simpleSegment(0,2*_e.circleOffset,_e.circleArray.length,_e.circleArray.length/2),null,b.transform.zoom,null,null,null)}ge.destroy(),ye.destroy()}const rc=u.ad(new Float32Array(16));function Es(b,n,s,p,y,w){const{horizontalAlign:T,verticalAlign:R}=u.aE(b);return new u.P((-(T-.5)*n/y+p[0])*w,(-(R-.5)*s/y+p[1])*w)}function _p(b,n,s,p,y,w){const T=n.tileAnchorPoint.add(new u.P(n.translation[0],n.translation[1]));if(n.pitchWithMap){let R=p.mult(w);s||(R=R.rotate(-y));const k=T.add(R);return qe(k.x,k.y,n.pitchedLabelPlaneMatrix,n.getElevation).point}if(s){const R=pn(n.tileAnchorPoint.x+1,n.tileAnchorPoint.y,n).point.sub(b),k=Math.atan(R.y/R.x)+(R.x<0?Math.PI:0);return b.add(p.rotate(k))}return b.add(p)}function eh(b,n,s,p,y,w,T,R,k,L,F,q){const H=b.text.placedSymbolArray,ee=b.text.dynamicLayoutVertexArray,ne=b.icon.dynamicLayoutVertexArray,ye={};ee.clear();for(let ge=0;ge<H.length;ge++){const _e=H.get(ge),Ee=_e.hidden||!_e.crossTileID||b.allowVerticalPlacement&&!_e.placedOrientation?null:p[_e.crossTileID];if(Ee){const De=new u.P(_e.anchorX,_e.anchorY),ze={getElevation:q,width:y.width,height:y.height,pitchedLabelPlaneMatrix:w,pitchWithMap:s,transform:y,tileAnchorPoint:De,translation:L,unwrappedTileID:F},je=s?tn(De.x,De.y,ze):pn(De.x,De.y,ze),Ue=dn(y.cameraToCenterDistance,je.signedDistanceFromCamera);let Fe=u.am(b.textSizeData,R,_e)*Ue/u.ay;s&&(Fe*=b.tilePixelRatio/T);const{width:it,height:Tt,anchor:gt,textOffset:dt,textBoxScale:vt}=Ee,Jt=Es(gt,it,Tt,dt,vt,Fe),Yt=y.getPitchedTextCorrection(De.x+L[0],De.y+L[1],F),Dt=_p(je.point,ze,n,Jt,-y.bearingInRadians,Yt),un=b.allowVerticalPlacement&&_e.placedOrientation===u.al.vertical?Math.PI/2:0;for(let $n=0;$n<_e.numGlyphs;$n++)u.as(ee,Dt,un);k&&_e.associatedIconIndex>=0&&(ye[_e.associatedIconIndex]={shiftedAnchor:Dt,angle:un})}else rr(_e.numGlyphs,ee)}if(k){ne.clear();const ge=b.icon.placedSymbolArray;for(let _e=0;_e<ge.length;_e++){const Ee=ge.get(_e);if(Ee.hidden)rr(Ee.numGlyphs,ne);else{const De=ye[_e];if(De)for(let ze=0;ze<Ee.numGlyphs;ze++)u.as(ne,De.shiftedAnchor,De.angle);else rr(Ee.numGlyphs,ne)}}b.icon.dynamicLayoutVertexBuffer.updateData(ne)}b.text.dynamicLayoutVertexBuffer.updateData(ee)}function ic(b,n,s){return s.iconsInText&&n?"symbolTextAndIcon":b?"symbolSDF":"symbolIcon"}function nu(b,n,s,p,y,w,T,R,k,L,F,q,H){const ee=b.context,ne=ee.gl,ye=b.transform,ge=R==="map",_e=k==="map",Ee=R!=="viewport"&&s.layout.get("symbol-placement")!=="point",De=ge&&!_e&&!Ee,ze=!s.layout.get("symbol-sort-key").isConstant();let je=!1;const Ue=b.getDepthModeForSublayer(0,Rn.ReadOnly),Fe=s._unevaluatedLayout.hasValue("text-variable-anchor")||s._unevaluatedLayout.hasValue("text-variable-anchor-offset"),it=[],Tt=ye.getCircleRadiusCorrection();for(const gt of p){const dt=n.getTile(gt),vt=dt.getBucket(s);if(!vt)continue;const Jt=y?vt.text:vt.icon;if(!Jt||!Jt.segments.get().length||!Jt.hasVisibleVertices)continue;const Yt=Jt.programConfigurations.get(s.id),Dt=y||vt.sdfIcons,un=y?vt.textSizeData:vt.iconSizeData,$n=_e||ye.pitch!==0,Qn=b.useProgram(ic(Dt,y,vt),Yt),ei=u.ak(un,ye.zoom),Mr=b.style.map.terrain&&b.style.map.terrain.getTerrainData(gt);let ti,qr,Ir,fr,Ai=[0,0],$i=null;if(y)qr=dt.glyphAtlasTexture,Ir=ne.LINEAR,ti=dt.glyphAtlasTexture.size,vt.iconsInText&&(Ai=dt.imageAtlasTexture.size,$i=dt.imageAtlasTexture,fr=$n||b.options.rotating||b.options.zooming||un.kind==="composite"||un.kind==="camera"?ne.LINEAR:ne.NEAREST);else{const fi=s.layout.get("icon-size").constantOr(0)!==1||vt.iconsNeedLinear;qr=dt.imageAtlasTexture,Ir=Dt||b.options.rotating||b.options.zooming||fi||$n?ne.LINEAR:ne.NEAREST,ti=dt.imageAtlasTexture.size}const Wi=u.az(dt,1,b.transform.zoom),mr=Ot(ge,b.transform,Wi),us=u.K();u.an(us,mr);const No=Xt(_e,ge,b.transform,Wi),Ls=u.aA(ye,dt,w,T),Bs=ye.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!H,applyTerrainMatrix:!0}),hu=Fe&&vt.hasTextData(),Ns=s.layout.get("icon-text-fit")!=="none"&&hu&&vt.hasIconData();if(Ee){const fi=b.style.map.terrain?(da,Ar)=>b.style.map.terrain.getElevation(gt,da,Ar):null,Pi=s.layout.get("text-rotation-alignment")==="map";en(vt,b,y,mr,us,_e,L,Pi,gt.toUnwrapped(),ye.width,ye.height,Ls,fi)}const dc=y&&Fe||Ns,eo=Ee||dc?rc:_e?mr:b.transform.clipSpaceToPixelsMatrix,js=Dt&&s.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let to;to=Dt?vt.iconsInText?Xu(un.kind,ei,De,_e,Ee,dc,b,eo,No,Ls,ti,Ai,Tt):Kf(un.kind,ei,De,_e,Ee,dc,b,eo,No,Ls,y,ti,0,Tt):cl(un.kind,ei,De,_e,Ee,dc,b,eo,No,Ls,y,ti,Tt);const hs={program:Qn,buffers:Jt,uniformValues:to,projectionData:Bs,atlasTexture:qr,atlasTextureIcon:$i,atlasInterpolation:Ir,atlasInterpolationIcon:fr,isSDF:Dt,hasHalo:js};if(ze&&vt.canOverlap){je=!0;const fi=Jt.segments.get();for(const Pi of fi)it.push({segments:new u.aJ([Pi]),sortKey:Pi.sortKey,state:hs,terrainData:Mr})}else it.push({segments:Jt.segments,sortKey:0,state:hs,terrainData:Mr})}je&&it.sort((gt,dt)=>gt.sortKey-dt.sortKey);for(const gt of it){const dt=gt.state;if(ee.activeTexture.set(ne.TEXTURE0),dt.atlasTexture.bind(dt.atlasInterpolation,ne.CLAMP_TO_EDGE),dt.atlasTextureIcon&&(ee.activeTexture.set(ne.TEXTURE1),dt.atlasTextureIcon&&dt.atlasTextureIcon.bind(dt.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),dt.isSDF){const vt=dt.uniformValues;dt.hasHalo&&(vt.u_is_halo=1,ac(dt.buffers,gt.segments,s,b,dt.program,Ue,F,q,vt,dt.projectionData,gt.terrainData)),vt.u_is_halo=0}ac(dt.buffers,gt.segments,s,b,dt.program,Ue,F,q,dt.uniformValues,dt.projectionData,gt.terrainData)}}function ac(b,n,s,p,y,w,T,R,k,L,F){const q=p.context;y.draw(q,q.gl.TRIANGLES,w,T,R,Yn.backCCW,k,F,L,s.id,b.layoutVertexBuffer,b.indexBuffer,n,s.paint,p.transform.zoom,b.programConfigurations.get(s.id),b.dynamicLayoutVertexBuffer,b.opacityVertexBuffer)}function Ms(b,n,s,p,y){const w=b.context,T=w.gl,R=Fn.disabled,k=new wr([T.ONE,T.ONE],u.b7.transparent,[!0,!0,!0,!0]),L=n.getBucket(s);if(!L)return;const F=p.key;let q=s.heatmapFbos.get(F);q||(q=oc(w,n.tileSize,n.tileSize),s.heatmapFbos.set(F,q)),w.bindFramebuffer.set(q.framebuffer),w.viewport.set([0,0,n.tileSize,n.tileSize]),w.clear({color:u.b7.transparent});const H=L.programConfigurations.get(s.id),ee=b.useProgram("heatmap",H,!y),ne=b.transform.getProjectionData({overscaledTileID:n.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),ye=b.style.map.terrain.getTerrainData(p);ee.draw(w,T.TRIANGLES,Rn.disabled,R,k,Yn.disabled,_o(n,b.transform.zoom,s.paint.get("heatmap-intensity"),1),ye,ne,s.id,L.layoutVertexBuffer,L.indexBuffer,L.segments,s.paint,b.transform.zoom,H)}function fl(b,n,s,p,y){const w=b.context,T=w.gl,R=b.transform;w.setColorMode(b.colorModeForRenderPass());const k=ru(w,n),L=s.key,F=n.heatmapFbos.get(L);if(!F)return;w.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,F.colorAttachment.get()),w.activeTexture.set(T.TEXTURE1),k.bind(T.LINEAR,T.CLAMP_TO_EDGE);const q=R.getProjectionData({overscaledTileID:s,applyTerrainMatrix:y,applyGlobeMatrix:!p});b.useProgram("heatmapTexture").draw(w,T.TRIANGLES,Rn.disabled,Fn.disabled,b.colorModeForRenderPass(),Yn.disabled,hp(b,n,0,1),null,q,n.id,b.rasterBoundsBuffer,b.quadTriangleIndexBuffer,b.rasterBoundsSegments,n.paint,R.zoom),F.destroy(),n.heatmapFbos.delete(L)}function oc(b,n,s){var p,y;const w=b.gl,T=w.createTexture();w.bindTexture(w.TEXTURE_2D,T),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,w.CLAMP_TO_EDGE),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,w.LINEAR),w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,w.LINEAR);const R=(p=b.HALF_FLOAT)!==null&&p!==void 0?p:w.UNSIGNED_BYTE,k=(y=b.RGBA16F)!==null&&y!==void 0?y:w.RGBA;w.texImage2D(w.TEXTURE_2D,0,k,n,s,0,w.RGBA,R,null);const L=b.createFramebuffer(n,s,!1,!1);return L.colorAttachment.set(T),L}function ru(b,n){return n.colorRampTexture||(n.colorRampTexture=new ke(b,n.colorRamp,b.gl.RGBA)),n.colorRampTexture}function la(b,n,s,p,y){if(!s||!p||!p.imageAtlas)return;const w=p.imageAtlas.patternPositions;let T=w[s.to.toString()],R=w[s.from.toString()];if(!T&&R&&(T=R),!R&&T&&(R=T),!T||!R){const k=y.getPaintProperty(n);T=w[k],R=w[k]}T&&R&&b.setConstantPatternPositions(T,R)}function ca(b,n,s,p,y,w,T,R){const k=b.context.gl,L="fill-pattern",F=s.paint.get(L),q=F&&F.constantOr(1),H=s.getCrossfadeParameters();let ee,ne,ye,ge,_e;const Ee=b.transform,De=s.paint.get("fill-translate"),ze=s.paint.get("fill-translate-anchor");T?(ne=q&&!s.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ee=k.LINES):(ne=q?"fillPattern":"fill",ee=k.TRIANGLES);const je=F.constantOr(null);for(const Ue of p){const Fe=n.getTile(Ue);if(q&&!Fe.patternsLoaded())continue;const it=Fe.getBucket(s);if(!it)continue;const Tt=it.programConfigurations.get(s.id),gt=b.useProgram(ne,Tt),dt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ue);q&&(b.context.activeTexture.set(k.TEXTURE0),Fe.imageAtlasTexture.bind(k.LINEAR,k.CLAMP_TO_EDGE),Tt.updatePaintBuffers(H)),la(Tt,L,je,Fe,s);const vt=Ee.getProjectionData({overscaledTileID:Ue,applyGlobeMatrix:!R,applyTerrainMatrix:!0}),Jt=u.aA(Ee,Fe,De,ze);if(T){ge=it.indexBuffer2,_e=it.segments2;const Dt=[k.drawingBufferWidth,k.drawingBufferHeight];ye=ne==="fillOutlinePattern"&&q?Xc(b,H,Fe,Dt,Jt):Zf(Dt,Jt)}else ge=it.indexBuffer,_e=it.segments,ye=q?Zc(b,H,Fe,Jt):{u_fill_translate:Jt};const Yt=b.stencilModeForClipping(Ue);gt.draw(b.context,ee,y,Yt,w,Yn.backCCW,ye,dt,vt,s.id,it.layoutVertexBuffer,ge,_e,s.paint,b.transform.zoom,Tt)}}function Ro(b,n,s,p,y,w,T,R){const k=b.context,L=k.gl,F="fill-extrusion-pattern",q=s.paint.get(F),H=q.constantOr(1),ee=s.getCrossfadeParameters(),ne=s.paint.get("fill-extrusion-opacity"),ye=q.constantOr(null),ge=b.transform;for(const _e of p){const Ee=n.getTile(_e),De=Ee.getBucket(s);if(!De)continue;const ze=b.style.map.terrain&&b.style.map.terrain.getTerrainData(_e),je=De.programConfigurations.get(s.id),Ue=b.useProgram(H?"fillExtrusionPattern":"fillExtrusion",je);H&&(b.context.activeTexture.set(L.TEXTURE0),Ee.imageAtlasTexture.bind(L.LINEAR,L.CLAMP_TO_EDGE),je.updatePaintBuffers(ee));const Fe=ge.getProjectionData({overscaledTileID:_e,applyGlobeMatrix:!R,applyTerrainMatrix:!0});la(je,F,ye,Ee,s);const it=u.aA(ge,Ee,s.paint.get("fill-extrusion-translate"),s.paint.get("fill-extrusion-translate-anchor")),Tt=s.paint.get("fill-extrusion-vertical-gradient"),gt=H?yo(b,Tt,ne,it,_e,ee,Ee):Hh(b,Tt,ne,it);Ue.draw(k,k.gl.TRIANGLES,y,w,T,Yn.backCCW,gt,ze,Fe,s.id,De.layoutVertexBuffer,De.indexBuffer,De.segments,s.paint,b.transform.zoom,je,b.style.map.terrain&&De.centroidVertexBuffer)}}function Oo(b,n,s,p,y,w,T,R,k){var L;const F=b.style.projection,q=b.context,H=b.transform,ee=q.gl,ne=[`#define NUM_ILLUMINATION_SOURCES ${s.paint.get("hillshade-highlight-color").values.length}`],ye=b.useProgram("hillshade",null,!1,ne),ge=!b.options.moving;for(const _e of p){const Ee=n.getTile(_e),De=Ee.fbo;if(!De)continue;const ze=F.getMeshFromTileID(q,_e.canonical,R,!0,"raster"),je=(L=b.style.map.terrain)===null||L===void 0?void 0:L.getTerrainData(_e);q.activeTexture.set(ee.TEXTURE0),ee.bindTexture(ee.TEXTURE_2D,De.colorAttachment.get());const Ue=H.getProjectionData({overscaledTileID:_e,aligned:ge,applyGlobeMatrix:!k,applyTerrainMatrix:!0});ye.draw(q,ee.TRIANGLES,w,y[_e.overscaledZ],T,Yn.backCCW,fp(b,Ee,s),je,Ue,s.id,ze.vertexBuffer,ze.indexBuffer,ze.segments)}}const Qa=[new u.P(0,0),new u.P(u.Z,0),new u.P(u.Z,u.Z),new u.P(0,u.Z)];function es(b,n,s,p,y,w,T,R,k=!1,L=!1){const F=p[p.length-1].overscaledZ,q=b.context,H=q.gl,ee=b.useProgram("raster"),ne=b.transform,ye=b.style.projection,ge=b.colorModeForRenderPass(),_e=!b.options.moving;for(const Ee of p){const De=b.getDepthModeForSublayer(Ee.overscaledZ-F,s.paint.get("raster-opacity")===1?Rn.ReadWrite:Rn.ReadOnly,H.LESS),ze=n.getTile(Ee);ze.registerFadeDuration(s.paint.get("raster-fade-duration"));const je=n.findLoadedParent(Ee,0),Ue=n.findLoadedSibling(Ee),Fe=ad(ze,je||Ue||null,n,s,b.transform,b.style.map.terrain);let it,Tt;const gt=s.paint.get("raster-resampling")==="nearest"?H.NEAREST:H.LINEAR;q.activeTexture.set(H.TEXTURE0),ze.texture.bind(gt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),q.activeTexture.set(H.TEXTURE1),je?(je.texture.bind(gt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),it=Math.pow(2,je.tileID.overscaledZ-ze.tileID.overscaledZ),Tt=[ze.tileID.canonical.x*it%1,ze.tileID.canonical.y*it%1]):ze.texture.bind(gt,H.CLAMP_TO_EDGE,H.LINEAR_MIPMAP_NEAREST),ze.texture.useMipmap&&q.extTextureFilterAnisotropic&&b.transform.pitch>20&&H.texParameterf(H.TEXTURE_2D,q.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,q.extTextureFilterAnisotropicMax);const dt=b.style.map.terrain&&b.style.map.terrain.getTerrainData(Ee),vt=ne.getProjectionData({overscaledTileID:Ee,aligned:_e,applyGlobeMatrix:!L,applyTerrainMatrix:!0}),Jt=Yf(Tt||[0,0],it||1,Fe,s,R),Yt=ye.getMeshFromTileID(q,Ee.canonical,w,T,"raster");ee.draw(q,H.TRIANGLES,De,y?y[Ee.overscaledZ]:Fn.disabled,ge,k?Yn.frontCCW:Yn.backCCW,Jt,dt,vt,s.id,Yt.vertexBuffer,Yt.indexBuffer,Yt.segments)}}function ad(b,n,s,p,y,w){const T=p.paint.get("raster-fade-duration");if(!w&&T>0){const R=j.now(),k=(R-b.timeAdded)/T,L=n?(R-n.timeAdded)/T:-1,F=s.getSource(),q=rt(y,{tileSize:F.tileSize,roundZoom:F.roundZoom}),H=!n||Math.abs(n.tileID.overscaledZ-q)>Math.abs(b.tileID.overscaledZ-q),ee=H&&b.refreshedUponExpiration?1:u.ae(H?k:1-L,0,1);return b.refreshedUponExpiration&&k>=1&&(b.refreshedUponExpiration=!1),n?{opacity:1,mix:1-ee}:{opacity:ee,mix:0}}return{opacity:1,mix:0}}const iu=new u.b7(1,0,0,1),th=new u.b7(0,1,0,1),ua=new u.b7(0,0,1,1),hi=new u.b7(1,0,1,1),hr=new u.b7(0,1,1,1);function ts(b,n,s,p){sc(b,0,n+s/2,b.transform.width,s,p)}function Io(b,n,s,p){sc(b,n-s/2,0,s,b.transform.height,p)}function sc(b,n,s,p,y,w){const T=b.context,R=T.gl;R.enable(R.SCISSOR_TEST),R.scissor(n*b.pixelRatio,s*b.pixelRatio,p*b.pixelRatio,y*b.pixelRatio),T.clear({color:w}),R.disable(R.SCISSOR_TEST)}function Or(b,n,s){const p=b.context,y=p.gl,w=b.useProgram("debug"),T=Rn.disabled,R=Fn.disabled,k=b.colorModeForRenderPass(),L="$debug",F=b.style.map.terrain&&b.style.map.terrain.getTerrainData(s);p.activeTexture.set(y.TEXTURE0);const q=n.getTileByID(s.key).latestRawTileData,H=Math.floor((q&&q.byteLength||0)/1024),ee=n.getTile(s).tileSize,ne=512/Math.min(ee,512)*(s.overscaledZ/b.transform.zoom)*.5;let ye=s.canonical.toString();s.overscaledZ!==s.canonical.z&&(ye+=` => ${s.overscaledZ}`),function(_e,Ee){_e.initDebugOverlayCanvas();const De=_e.debugOverlayCanvas,ze=_e.context.gl,je=_e.debugOverlayCanvas.getContext("2d");je.clearRect(0,0,De.width,De.height),je.shadowColor="white",je.shadowBlur=2,je.lineWidth=1.5,je.strokeStyle="white",je.textBaseline="top",je.font="bold 36px Open Sans, sans-serif",je.fillText(Ee,5,5),je.strokeText(Ee,5,5),_e.debugOverlayTexture.update(De),_e.debugOverlayTexture.bind(ze.LINEAR,ze.CLAMP_TO_EDGE)}(b,`${ye} ${H}kB`);const ge=b.transform.getProjectionData({overscaledTileID:s,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(p,y.TRIANGLES,T,R,wr.alphaBlended,Yn.disabled,Xf(u.b7.transparent,ne),null,ge,L,b.debugBuffer,b.quadTriangleIndexBuffer,b.debugSegments),w.draw(p,y.LINE_STRIP,T,R,k,Yn.disabled,Xf(u.b7.red),F,ge,L,b.debugBuffer,b.tileBorderIndexBuffer,b.debugSegments)}function As(b,n,s,p){const{isRenderingGlobe:y}=p,w=b.context,T=w.gl,R=b.transform,k=b.colorModeForRenderPass(),L=b.getDepthModeFor3D(),F=b.useProgram("terrain");w.bindFramebuffer.set(null),w.viewport.set([0,0,b.width,b.height]);for(const q of s){const H=n.getTerrainMesh(q.tileID),ee=b.renderToTexture.getTexture(q),ne=n.getTerrainData(q.tileID);w.activeTexture.set(T.TEXTURE0),T.bindTexture(T.TEXTURE_2D,ee.texture);const ye=n.getMeshFrameDelta(R.zoom),ge=R.calculateFogMatrix(q.tileID.toUnwrapped()),_e=og(ye,ge,b.style.sky,R.pitch,y),Ee=R.getProjectionData({overscaledTileID:q.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});F.draw(w,T.TRIANGLES,L,Fn.disabled,k,Yn.backCCW,_e,ne,Ee,"terrain",H.vertexBuffer,H.indexBuffer,H.segments)}}function $a(b,n){if(!n.mesh){const s=new u.aI;s.emplaceBack(-1,-1),s.emplaceBack(1,-1),s.emplaceBack(1,1),s.emplaceBack(-1,1);const p=new u.aK;p.emplaceBack(0,1,2),p.emplaceBack(0,2,3),n.mesh=new jl(b.createVertexBuffer(s,Ji.members),b.createIndexBuffer(p),u.aJ.simpleSegment(0,0,s.length,p.length))}return n.mesh}class lc{constructor(n,s){this.context=new Ts(n),this.transform=s,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:u.ad(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=Ie.maxUnderzooming+Ie.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Uc}resize(n,s,p){if(this.width=Math.floor(n*p),this.height=Math.floor(s*p),this.pixelRatio=p,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style._order)this.style._layers[y].resize()}setup(){const n=this.context,s=new u.aI;s.emplaceBack(0,0),s.emplaceBack(u.Z,0),s.emplaceBack(0,u.Z),s.emplaceBack(u.Z,u.Z),this.tileExtentBuffer=n.createVertexBuffer(s,Ji.members),this.tileExtentSegments=u.aJ.simpleSegment(0,0,4,2);const p=new u.aI;p.emplaceBack(0,0),p.emplaceBack(u.Z,0),p.emplaceBack(0,u.Z),p.emplaceBack(u.Z,u.Z),this.debugBuffer=n.createVertexBuffer(p,Ji.members),this.debugSegments=u.aJ.simpleSegment(0,0,4,5);const y=new u.b_;y.emplaceBack(0,0,0,0),y.emplaceBack(u.Z,0,u.Z,0),y.emplaceBack(0,u.Z,0,u.Z),y.emplaceBack(u.Z,u.Z,u.Z,u.Z),this.rasterBoundsBuffer=n.createVertexBuffer(y,ig.members),this.rasterBoundsSegments=u.aJ.simpleSegment(0,0,4,2);const w=new u.aI;w.emplaceBack(0,0),w.emplaceBack(u.Z,0),w.emplaceBack(0,u.Z),w.emplaceBack(u.Z,u.Z),this.rasterBoundsBufferPosOnly=n.createVertexBuffer(w,Ji.members),this.rasterBoundsSegmentsPosOnly=u.aJ.simpleSegment(0,0,4,5);const T=new u.aI;T.emplaceBack(0,0),T.emplaceBack(1,0),T.emplaceBack(0,1),T.emplaceBack(1,1),this.viewportBuffer=n.createVertexBuffer(T,Ji.members),this.viewportSegments=u.aJ.simpleSegment(0,0,4,2);const R=new u.b$;R.emplaceBack(0),R.emplaceBack(1),R.emplaceBack(3),R.emplaceBack(2),R.emplaceBack(0),this.tileBorderIndexBuffer=n.createIndexBuffer(R);const k=new u.aK;k.emplaceBack(1,0,2),k.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=n.createIndexBuffer(k);const L=this.context.gl;this.stencilClearMode=new Fn({func:L.ALWAYS,mask:0},0,255,L.ZERO,L.ZERO,L.ZERO),this.tileExtentMesh=new jl(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const n=this.context,s=n.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const p=u.K();u.bQ(p,0,this.width,this.height,0,0,1),u.M(p,p,[s.drawingBufferWidth,s.drawingBufferHeight,0]);const y={mainMatrix:p,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:p};this.useProgram("clippingMask",null,!0).draw(n,s.TRIANGLES,Rn.disabled,this.stencilClearMode,wr.disabled,Yn.disabled,null,null,y,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(n,s,p){if(this.currentStencilSource===n.source||!n.isTileClipped()||!s||!s.length)return;this.currentStencilSource=n.source,this.nextStencilID+s.length>256&&this.clearStencil();const y=this.context;y.setColorMode(wr.disabled),y.setDepthMode(Rn.disabled);const w={};for(const T of s)w[T.key]=this.nextStencilID++;this._renderTileMasks(w,s,p,!0),this._renderTileMasks(w,s,p,!1),this._tileClippingMaskIDs=w}_renderTileMasks(n,s,p,y){const w=this.context,T=w.gl,R=this.style.projection,k=this.transform,L=this.useProgram("clippingMask");for(const F of s){const q=n[F.key],H=this.style.map.terrain&&this.style.map.terrain.getTerrainData(F),ee=R.getMeshFromTileID(this.context,F.canonical,y,!0,"stencil"),ne=k.getProjectionData({overscaledTileID:F,applyGlobeMatrix:!p,applyTerrainMatrix:!0});L.draw(w,T.TRIANGLES,Rn.disabled,new Fn({func:T.ALWAYS,mask:0},q,255,T.KEEP,T.KEEP,T.REPLACE),wr.disabled,p?Yn.disabled:Yn.backCCW,null,H,ne,"$clipping",ee.vertexBuffer,ee.indexBuffer,ee.segments)}}_renderTilesDepthBuffer(){const n=this.context,s=n.gl,p=this.style.projection,y=this.transform,w=this.useProgram("depth"),T=this.getDepthModeFor3D(),R=Ve(y,{tileSize:y.tileSize});for(const k of R){const L=this.style.map.terrain&&this.style.map.terrain.getTerrainData(k),F=p.getMeshFromTileID(this.context,k.canonical,!0,!0,"raster"),q=y.getProjectionData({overscaledTileID:k,applyGlobeMatrix:!0,applyTerrainMatrix:!0});w.draw(n,s.TRIANGLES,T,Fn.disabled,wr.disabled,Yn.backCCW,null,L,q,"$clipping",F.vertexBuffer,F.indexBuffer,F.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const n=this.nextStencilID++,s=this.context.gl;return new Fn({func:s.NOTEQUAL,mask:255},n,255,s.KEEP,s.KEEP,s.REPLACE)}stencilModeForClipping(n){const s=this.context.gl;return new Fn({func:s.EQUAL,mask:255},this._tileClippingMaskIDs[n.key],0,s.KEEP,s.KEEP,s.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(n){const s=this.context.gl,p=n.sort((T,R)=>R.overscaledZ-T.overscaledZ),y=p[p.length-1].overscaledZ,w=p[0].overscaledZ-y+1;if(w>1){this.currentStencilSource=void 0,this.nextStencilID+w>256&&this.clearStencil();const T={};for(let R=0;R<w;R++)T[R+y]=new Fn({func:s.GEQUAL,mask:255},R+this.nextStencilID,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID+=w,[T,p]}return[{[y]:Fn.disabled},p]}stencilConfigForOverlapTwoPass(n){const s=this.context.gl,p=n.sort((T,R)=>R.overscaledZ-T.overscaledZ),y=p[p.length-1].overscaledZ,w=p[0].overscaledZ-y+1;if(this.clearStencil(),w>1){const T={},R={};for(let k=0;k<w;k++)T[k+y]=new Fn({func:s.GREATER,mask:255},w+1+k,255,s.KEEP,s.KEEP,s.REPLACE),R[k+y]=new Fn({func:s.GREATER,mask:255},1+k,255,s.KEEP,s.KEEP,s.REPLACE);return this.nextStencilID=2*w+1,[T,R,p]}return this.nextStencilID=3,[{[y]:new Fn({func:s.GREATER,mask:255},2,255,s.KEEP,s.KEEP,s.REPLACE)},{[y]:new Fn({func:s.GREATER,mask:255},1,255,s.KEEP,s.KEEP,s.REPLACE)},p]}colorModeForRenderPass(){const n=this.context.gl;return this._showOverdrawInspector?new wr([n.CONSTANT_COLOR,n.ONE],new u.b7(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?wr.unblended:wr.alphaBlended}getDepthModeForSublayer(n,s,p){if(!this.opaquePassEnabledForLayer())return Rn.disabled;const y=1-((1+this.currentLayer)*this.numSublayers+n)*this.depthEpsilon;return new Rn(p||this.context.gl.LEQUAL,s,[y,y])}getDepthModeFor3D(){return new Rn(this.context.gl.LEQUAL,Rn.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(n,s){var p,y;this.style=n,this.options=s,this.lineAtlas=n.lineAtlas,this.imageManager=n.imageManager,this.glyphManager=n.glyphManager,this.symbolFadeChange=n.placement.symbolFadeChange(j.now()),this.imageManager.beginFrame();const w=this.style._order,T=this.style.sourceCaches,R={},k={},L={},F={isRenderingToTexture:!1,isRenderingGlobe:((p=n.projection)===null||p===void 0?void 0:p.transitionState)>0};for(const H in T){const ee=T[H];ee.used&&ee.prepare(this.context),R[H]=ee.getVisibleCoordinates(!1),k[H]=R[H].slice().reverse(),L[H]=ee.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let H=0;H<w.length;H++)if(this.style._layers[w[H]].is3D()){this.opaquePassCutoff=H;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const H of w){const ee=this.style._layers[H];if(!ee.hasOffscreenPass()||ee.isHidden(this.transform.zoom))continue;const ne=k[ee.source];(ee.type==="custom"||ne.length)&&this.renderLayer(this,T[ee.source],ee,ne,F)}if((y=this.style.projection)===null||y===void 0||y.updateGPUdependent({context:this.context,useProgram:H=>this.useProgram(H)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:s.showOverdrawInspector?u.b7.black:u.b7.transparent,depth:1}),this.clearStencil(),this.style.sky&&function(H,ee){const ne=H.context,ye=ne.gl,ge=((Ue,Fe,it)=>{const Tt=Math.cos(Fe.rollInRadians),gt=Math.sin(Fe.rollInRadians),dt=Ge(Fe),vt=Fe.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ue.properties.get("sky-color"),u_horizon_color:Ue.properties.get("horizon-color"),u_horizon:[(Fe.width/2-dt*gt)*it,(Fe.height/2+dt*Tt)*it],u_horizon_normal:[-gt,Tt],u_sky_horizon_blend:Ue.properties.get("sky-horizon-blend")*Fe.height/2*it,u_sky_blend:vt}})(ee,H.style.map.transform,H.pixelRatio),_e=new Rn(ye.LEQUAL,Rn.ReadWrite,[0,1]),Ee=Fn.disabled,De=H.colorModeForRenderPass(),ze=H.useProgram("sky"),je=$a(ne,ee);ze.draw(ne,ye.TRIANGLES,_e,Ee,De,Yn.disabled,ge,null,void 0,"sky",je.vertexBuffer,je.indexBuffer,je.segments)}(this,this.style.sky),this._showOverdrawInspector=s.showOverdrawInspector,this.depthRangeFor3D=[0,1-(n._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=w.length-1;this.currentLayer>=0;this.currentLayer--){const H=this.style._layers[w[this.currentLayer]],ee=T[H.source],ne=R[H.source];this._renderTileClippingMasks(H,ne,!1),this.renderLayer(this,ee,H,ne,F)}this.renderPass="translucent";let q=!1;for(this.currentLayer=0;this.currentLayer<w.length;this.currentLayer++){const H=this.style._layers[w[this.currentLayer]],ee=T[H.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(H,F))continue;this.opaquePassEnabledForLayer()||q||(q=!0,F.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const ne=(H.type==="symbol"?L:k)[H.source];this._renderTileClippingMasks(H,R[H.source],!!this.renderToTexture),this.renderLayer(this,ee,H,ne,F)}if(F.isRenderingGlobe&&function(H,ee,ne){const ye=H.context,ge=ye.gl,_e=H.useProgram("atmosphere"),Ee=new Rn(ge.LEQUAL,Rn.ReadOnly,[0,1]),De=H.transform,ze=function(vt,Jt){const Yt=vt.properties.get("position"),Dt=[-Yt.x,-Yt.y,-Yt.z],un=u.ad(new Float64Array(16));return vt.properties.get("anchor")==="map"&&(u.a_(un,un,Jt.rollInRadians),u.a$(un,un,-Jt.pitchInRadians),u.a_(un,un,Jt.bearingInRadians),u.a$(un,un,Jt.center.lat*Math.PI/180),u.bp(un,un,-Jt.center.lng*Math.PI/180)),u.bZ(Dt,Dt,un),Dt}(ne,H.transform),je=De.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ue=ee.properties.get("atmosphere-blend")*je.projectionTransition;if(Ue===0)return;const Fe=Zl(De.worldSize,De.center.lat),it=De.inverseProjectionMatrix,Tt=new Float64Array(4);Tt[3]=1,u.at(Tt,Tt,De.modelViewProjectionMatrix),Tt[0]/=Tt[3],Tt[1]/=Tt[3],Tt[2]/=Tt[3],Tt[3]=1,u.at(Tt,Tt,it),Tt[0]/=Tt[3],Tt[1]/=Tt[3],Tt[2]/=Tt[3],Tt[3]=1;const gt=((vt,Jt,Yt,Dt,un)=>({u_sun_pos:vt,u_atmosphere_blend:Jt,u_globe_position:Yt,u_globe_radius:Dt,u_inv_proj_matrix:un}))(ze,Ue,[Tt[0],Tt[1],Tt[2]],Fe,it),dt=$a(ye,ee);_e.draw(ye,ge.TRIANGLES,Ee,Fn.disabled,wr.alphaBlended,Yn.disabled,gt,null,null,"atmosphere",dt.vertexBuffer,dt.indexBuffer,dt.segments)}(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const H=function(ee,ne){let ye=null;const ge=Object.values(ee._layers).flatMap(ze=>ze.source&&!ze.isHidden(ne)?[ee.sourceCaches[ze.source]]:[]),_e=ge.filter(ze=>ze.getSource().type==="vector"),Ee=ge.filter(ze=>ze.getSource().type!=="vector"),De=ze=>{(!ye||ye.getSource().maxzoom<ze.getSource().maxzoom)&&(ye=ze)};return _e.forEach(ze=>De(ze)),ye||Ee.forEach(ze=>De(ze)),ye}(this.style,this.transform.zoom);H&&function(ee,ne,ye){for(let ge=0;ge<ye.length;ge++)Or(ee,ne,ye[ge])}(this,H,H.getVisibleCoordinates())}this.options.showPadding&&function(H){const ee=H.transform.padding;ts(H,H.transform.height-(ee.top||0),3,iu),ts(H,ee.bottom||0,3,th),Io(H,ee.left||0,3,ua),Io(H,H.transform.width-(ee.right||0),3,hi);const ne=H.transform.centerPoint;(function(ye,ge,_e,Ee){sc(ye,ge-1,_e-10,2,20,Ee),sc(ye,ge-10,_e-1,20,2,Ee)})(H,ne.x,H.transform.height-ne.y,hr)}(this),this.context.setDefault()}maybeDrawDepthAndCoords(n){if(!this.style||!this.style.map||!this.style.map.terrain)return;const s=this.terrainFacilitator.matrix,p=this.transform.modelViewProjectionMatrix;let y=this.terrainFacilitator.dirty;y||(y=n?!u.c0(s,p):!u.c1(s,p)),y||(y=this.style.map.terrain.sourceCache.anyTilesAfterTime(this.terrainFacilitator.renderTime)),y&&(u.c2(s,p),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,function(w,T){const R=w.context,k=R.gl,L=w.transform,F=wr.unblended,q=new Rn(k.LEQUAL,Rn.ReadWrite,[0,1]),H=T.sourceCache.getRenderableTiles(),ee=w.useProgram("terrainDepth");R.bindFramebuffer.set(T.getFramebuffer("depth").framebuffer),R.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),R.clear({color:u.b7.transparent,depth:1});for(const ne of H){const ye=T.getTerrainMesh(ne.tileID),ge=T.getTerrainData(ne.tileID),_e=L.getProjectionData({overscaledTileID:ne.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),Ee={u_ele_delta:T.getMeshFrameDelta(L.zoom)};ee.draw(R,k.TRIANGLES,q,Fn.disabled,F,Yn.backCCW,Ee,ge,_e,"terrain",ye.vertexBuffer,ye.indexBuffer,ye.segments)}R.bindFramebuffer.set(null),R.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain),function(w,T){const R=w.context,k=R.gl,L=w.transform,F=wr.unblended,q=new Rn(k.LEQUAL,Rn.ReadWrite,[0,1]),H=T.getCoordsTexture(),ee=T.sourceCache.getRenderableTiles(),ne=w.useProgram("terrainCoords");R.bindFramebuffer.set(T.getFramebuffer("coords").framebuffer),R.viewport.set([0,0,w.width/devicePixelRatio,w.height/devicePixelRatio]),R.clear({color:u.b7.transparent,depth:1}),T.coordsIndex=[];for(const ye of ee){const ge=T.getTerrainMesh(ye.tileID),_e=T.getTerrainData(ye.tileID);R.activeTexture.set(k.TEXTURE0),k.bindTexture(k.TEXTURE_2D,H.texture);const Ee={u_terrain_coords_id:(255-T.coordsIndex.length)/255,u_texture:0,u_ele_delta:T.getMeshFrameDelta(L.zoom)},De=L.getProjectionData({overscaledTileID:ye.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});ne.draw(R,k.TRIANGLES,q,Fn.disabled,F,Yn.backCCW,Ee,_e,De,"terrain",ge.vertexBuffer,ge.indexBuffer,ge.segments),T.coordsIndex.push(ye.tileID.key)}R.bindFramebuffer.set(null),R.viewport.set([0,0,w.width,w.height])}(this,this.style.map.terrain))}renderLayer(n,s,p,y,w){p.isHidden(this.transform.zoom)||(p.type==="background"||p.type==="custom"||(y||[]).length)&&(this.id=p.id,u.c3(p)?function(T,R,k,L,F,q){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:H}=q,ee=Fn.disabled,ne=T.colorModeForRenderPass();(k._unevaluatedLayout.hasValue("text-variable-anchor")||k._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&function(ye,ge,_e,Ee,De,ze,je,Ue,Fe){const it=ge.transform,Tt=ge.style.map.terrain,gt=De==="map",dt=ze==="map";for(const vt of ye){const Jt=Ee.getTile(vt),Yt=Jt.getBucket(_e);if(!Yt||!Yt.text||!Yt.text.segments.get().length)continue;const Dt=u.ak(Yt.textSizeData,it.zoom),un=u.az(Jt,1,ge.transform.zoom),$n=Ot(gt,ge.transform,un),Qn=_e.layout.get("icon-text-fit")!=="none"&&Yt.hasIconData();if(Dt){const ei=Math.pow(2,it.zoom-Jt.tileID.overscaledZ),Mr=Tt?(ti,qr)=>Tt.getElevation(vt,ti,qr):null;eh(Yt,gt,dt,Fe,it,$n,ei,Dt,Qn,u.aA(it,Jt,je,Ue),vt.toUnwrapped(),Mr)}}}(L,T,k,R,k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),F),k.paint.get("icon-opacity").constantOr(1)!==0&&nu(T,R,k,L,!1,k.paint.get("icon-translate"),k.paint.get("icon-translate-anchor"),k.layout.get("icon-rotation-alignment"),k.layout.get("icon-pitch-alignment"),k.layout.get("icon-keep-upright"),ee,ne,H),k.paint.get("text-opacity").constantOr(1)!==0&&nu(T,R,k,L,!0,k.paint.get("text-translate"),k.paint.get("text-translate-anchor"),k.layout.get("text-rotation-alignment"),k.layout.get("text-pitch-alignment"),k.layout.get("text-keep-upright"),ee,ne,H),R.map.showCollisionBoxes&&(Oa(T,R,k,L,!0),Oa(T,R,k,L,!1))}(n,s,p,y,this.style.placement.variableOffsets,w):u.c4(p)?function(T,R,k,L,F){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:q}=F,H=k.paint.get("circle-opacity"),ee=k.paint.get("circle-stroke-width"),ne=k.paint.get("circle-stroke-opacity"),ye=!k.layout.get("circle-sort-key").isConstant();if(H.constantOr(1)===0&&(ee.constantOr(1)===0||ne.constantOr(1)===0))return;const ge=T.context,_e=ge.gl,Ee=T.transform,De=T.getDepthModeForSublayer(0,Rn.ReadOnly),ze=Fn.disabled,je=T.colorModeForRenderPass(),Ue=[],Fe=Ee.getCircleRadiusCorrection();for(let it=0;it<L.length;it++){const Tt=L[it],gt=R.getTile(Tt),dt=gt.getBucket(k);if(!dt)continue;const vt=k.paint.get("circle-translate"),Jt=k.paint.get("circle-translate-anchor"),Yt=u.aA(Ee,gt,vt,Jt),Dt=dt.programConfigurations.get(k.id),un=T.useProgram("circle",Dt),$n=dt.layoutVertexBuffer,Qn=dt.indexBuffer,ei=T.style.map.terrain&&T.style.map.terrain.getTerrainData(Tt),Mr={programConfiguration:Dt,program:un,layoutVertexBuffer:$n,indexBuffer:Qn,uniformValues:Wc(T,gt,k,Yt,Fe),terrainData:ei,projectionData:Ee.getProjectionData({overscaledTileID:Tt,applyGlobeMatrix:!q,applyTerrainMatrix:!0})};if(ye){const ti=dt.segments.get();for(const qr of ti)Ue.push({segments:new u.aJ([qr]),sortKey:qr.sortKey,state:Mr})}else Ue.push({segments:dt.segments,sortKey:0,state:Mr})}ye&&Ue.sort((it,Tt)=>it.sortKey-Tt.sortKey);for(const it of Ue){const{programConfiguration:Tt,program:gt,layoutVertexBuffer:dt,indexBuffer:vt,uniformValues:Jt,terrainData:Yt,projectionData:Dt}=it.state;gt.draw(ge,_e.TRIANGLES,De,ze,je,Yn.backCCW,Jt,Yt,Dt,k.id,dt,vt,it.segments,k.paint,T.transform.zoom,Tt)}}(n,s,p,y,w):u.c5(p)?function(T,R,k,L,F){if(k.paint.get("heatmap-opacity")===0)return;const q=T.context,{isRenderingToTexture:H,isRenderingGlobe:ee}=F;if(T.style.map.terrain){for(const ne of L){const ye=R.getTile(ne);R.hasRenderableParent(ne)||(T.renderPass==="offscreen"?Ms(T,ye,k,ne,ee):T.renderPass==="translucent"&&fl(T,k,ne,H,ee))}q.viewport.set([0,0,T.width,T.height])}else T.renderPass==="offscreen"?function(ne,ye,ge,_e){const Ee=ne.context,De=Ee.gl,ze=ne.transform,je=Fn.disabled,Ue=new wr([De.ONE,De.ONE],u.b7.transparent,[!0,!0,!0,!0]);(function(Fe,it,Tt){const gt=Fe.gl;Fe.activeTexture.set(gt.TEXTURE1),Fe.viewport.set([0,0,it.width/4,it.height/4]);let dt=Tt.heatmapFbos.get(u.bW);dt?(gt.bindTexture(gt.TEXTURE_2D,dt.colorAttachment.get()),Fe.bindFramebuffer.set(dt.framebuffer)):(dt=oc(Fe,it.width/4,it.height/4),Tt.heatmapFbos.set(u.bW,dt))})(Ee,ne,ge),Ee.clear({color:u.b7.transparent});for(let Fe=0;Fe<_e.length;Fe++){const it=_e[Fe];if(ye.hasRenderableParent(it))continue;const Tt=ye.getTile(it),gt=Tt.getBucket(ge);if(!gt)continue;const dt=gt.programConfigurations.get(ge.id),vt=ne.useProgram("heatmap",dt),Jt=ze.getProjectionData({overscaledTileID:it,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Yt=ze.getCircleRadiusCorrection();vt.draw(Ee,De.TRIANGLES,Rn.disabled,je,Ue,Yn.backCCW,_o(Tt,ze.zoom,ge.paint.get("heatmap-intensity"),Yt),null,Jt,ge.id,gt.layoutVertexBuffer,gt.indexBuffer,gt.segments,ge.paint,ze.zoom,dt)}Ee.viewport.set([0,0,ne.width,ne.height])}(T,R,k,L):T.renderPass==="translucent"&&function(ne,ye){const ge=ne.context,_e=ge.gl;ge.setColorMode(ne.colorModeForRenderPass());const Ee=ye.heatmapFbos.get(u.bW);Ee&&(ge.activeTexture.set(_e.TEXTURE0),_e.bindTexture(_e.TEXTURE_2D,Ee.colorAttachment.get()),ge.activeTexture.set(_e.TEXTURE1),ru(ge,ye).bind(_e.LINEAR,_e.CLAMP_TO_EDGE),ne.useProgram("heatmapTexture").draw(ge,_e.TRIANGLES,Rn.disabled,Fn.disabled,ne.colorModeForRenderPass(),Yn.disabled,hp(ne,ye,0,1),null,null,ye.id,ne.viewportBuffer,ne.quadTriangleIndexBuffer,ne.viewportSegments,ye.paint,ne.transform.zoom))}(T,k)}(n,s,p,y,w):u.c6(p)?function(T,R,k,L,F){if(T.renderPass!=="translucent")return;const{isRenderingToTexture:q}=F,H=k.paint.get("line-opacity"),ee=k.paint.get("line-width");if(H.constantOr(1)===0||ee.constantOr(1)===0)return;const ne=T.getDepthModeForSublayer(0,Rn.ReadOnly),ye=T.colorModeForRenderPass(),ge=k.paint.get("line-dasharray"),_e=k.paint.get("line-pattern"),Ee=_e.constantOr(1),De=k.paint.get("line-gradient"),ze=k.getCrossfadeParameters(),je=Ee?"linePattern":ge?"lineSDF":De?"lineGradient":"line",Ue=T.context,Fe=Ue.gl,it=T.transform;let Tt=!0;for(const gt of L){const dt=R.getTile(gt);if(Ee&&!dt.patternsLoaded())continue;const vt=dt.getBucket(k);if(!vt)continue;const Jt=vt.programConfigurations.get(k.id),Yt=T.context.program.get(),Dt=T.useProgram(je,Jt),un=Tt||Dt.program!==Yt,$n=T.style.map.terrain&&T.style.map.terrain.getTerrainData(gt),Qn=_e.constantOr(null);if(Qn&&dt.imageAtlas){const Ir=dt.imageAtlas,fr=Ir.patternPositions[Qn.to.toString()],Ai=Ir.patternPositions[Qn.from.toString()];fr&&Ai&&Jt.setConstantPatternPositions(fr,Ai)}const ei=it.getProjectionData({overscaledTileID:gt,applyGlobeMatrix:!q,applyTerrainMatrix:!0}),Mr=it.getPixelScale(),ti=Ee?Qc(T,dt,k,Mr,ze):ge?dp(T,dt,k,Mr,ge,ze):De?Kc(T,dt,k,Mr,vt.lineClipsArray.length):Yc(T,dt,k,Mr);if(Ee)Ue.activeTexture.set(Fe.TEXTURE0),dt.imageAtlasTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE),Jt.updatePaintBuffers(ze);else if(ge&&(un||T.lineAtlas.dirty))Ue.activeTexture.set(Fe.TEXTURE0),T.lineAtlas.bind(Ue);else if(De){const Ir=vt.gradients[k.id];let fr=Ir.texture;if(k.gradientVersion!==Ir.version){let Ai=256;if(k.stepInterpolant){const $i=R.getSource().maxzoom,Wi=gt.canonical.z===$i?Math.ceil(1<<T.transform.maxZoom-gt.canonical.z):1;Ai=u.ae(u.bX(vt.maxLineLength/u.Z*1024*Wi),256,Ue.maxTextureSize)}Ir.gradient=u.bY({expression:k.gradientExpression(),evaluationKey:"lineProgress",resolution:Ai,image:Ir.gradient||void 0,clips:vt.lineClipsArray}),Ir.texture?Ir.texture.update(Ir.gradient):Ir.texture=new ke(Ue,Ir.gradient,Fe.RGBA),Ir.version=k.gradientVersion,fr=Ir.texture}Ue.activeTexture.set(Fe.TEXTURE0),fr.bind(k.stepInterpolant?Fe.NEAREST:Fe.LINEAR,Fe.CLAMP_TO_EDGE)}const qr=T.stencilModeForClipping(gt);Dt.draw(Ue,Fe.TRIANGLES,ne,qr,ye,Yn.disabled,ti,$n,ei,k.id,vt.layoutVertexBuffer,vt.indexBuffer,vt.segments,k.paint,T.transform.zoom,Jt,vt.layoutVertexBuffer2),Tt=!1}}(n,s,p,y,w):u.c7(p)?function(T,R,k,L,F){const q=k.paint.get("fill-color"),H=k.paint.get("fill-opacity");if(H.constantOr(1)===0)return;const{isRenderingToTexture:ee}=F,ne=T.colorModeForRenderPass(),ye=k.paint.get("fill-pattern"),ge=T.opaquePassEnabledForLayer()&&!ye.constantOr(1)&&q.constantOr(u.b7.transparent).a===1&&H.constantOr(0)===1?"opaque":"translucent";if(T.renderPass===ge){const _e=T.getDepthModeForSublayer(1,T.renderPass==="opaque"?Rn.ReadWrite:Rn.ReadOnly);ca(T,R,k,L,_e,ne,!1,ee)}if(T.renderPass==="translucent"&&k.paint.get("fill-antialias")){const _e=T.getDepthModeForSublayer(k.getPaintProperty("fill-outline-color")?2:0,Rn.ReadOnly);ca(T,R,k,L,_e,ne,!0,ee)}}(n,s,p,y,w):u.c8(p)?function(T,R,k,L,F){const q=k.paint.get("fill-extrusion-opacity");if(q===0)return;const{isRenderingToTexture:H}=F;if(T.renderPass==="translucent"){const ee=new Rn(T.context.gl.LEQUAL,Rn.ReadWrite,T.depthRangeFor3D);if(q!==1||k.paint.get("fill-extrusion-pattern").constantOr(1))Ro(T,R,k,L,ee,Fn.disabled,wr.disabled,H),Ro(T,R,k,L,ee,T.stencilModeFor3D(),T.colorModeForRenderPass(),H);else{const ne=T.colorModeForRenderPass();Ro(T,R,k,L,ee,Fn.disabled,ne,H)}}}(n,s,p,y,w):u.c9(p)?function(T,R,k,L,F){if(T.renderPass!=="offscreen"&&T.renderPass!=="translucent")return;const{isRenderingToTexture:q}=F,H=T.context,ee=T.style.projection.useSubdivision,ne=T.getDepthModeForSublayer(0,Rn.ReadOnly),ye=T.colorModeForRenderPass();if(T.renderPass==="offscreen")(function(ge,_e,Ee,De,ze,je,Ue){const Fe=ge.context,it=Fe.gl;for(const Tt of Ee){const gt=_e.getTile(Tt),dt=gt.dem;if(!dt||!dt.data||!gt.needsHillshadePrepare)continue;const vt=dt.dim,Jt=dt.stride,Yt=dt.getPixels();if(Fe.activeTexture.set(it.TEXTURE1),Fe.pixelStoreUnpackPremultiplyAlpha.set(!1),gt.demTexture=gt.demTexture||ge.getTileTexture(Jt),gt.demTexture){const un=gt.demTexture;un.update(Yt,{premultiply:!1}),un.bind(it.NEAREST,it.CLAMP_TO_EDGE)}else gt.demTexture=new ke(Fe,Yt,it.RGBA,{premultiply:!1}),gt.demTexture.bind(it.NEAREST,it.CLAMP_TO_EDGE);Fe.activeTexture.set(it.TEXTURE0);let Dt=gt.fbo;if(!Dt){const un=new ke(Fe,{width:vt,height:vt,data:null},it.RGBA);un.bind(it.LINEAR,it.CLAMP_TO_EDGE),Dt=gt.fbo=Fe.createFramebuffer(vt,vt,!0,!1),Dt.colorAttachment.set(un.texture)}Fe.bindFramebuffer.set(Dt.framebuffer),Fe.viewport.set([0,0,vt,vt]),ge.useProgram("hillshadePrepare").draw(Fe,it.TRIANGLES,ze,je,Ue,Yn.disabled,sg(gt.tileID,dt),null,null,De.id,ge.rasterBoundsBuffer,ge.quadTriangleIndexBuffer,ge.rasterBoundsSegments),gt.needsHillshadePrepare=!1}})(T,R,L,k,ne,Fn.disabled,ye),H.viewport.set([0,0,T.width,T.height]);else if(T.renderPass==="translucent")if(ee){const[ge,_e,Ee]=T.stencilConfigForOverlapTwoPass(L);Oo(T,R,k,Ee,ge,ne,ye,!1,q),Oo(T,R,k,Ee,_e,ne,ye,!0,q)}else{const[ge,_e]=T.getStencilConfigForOverlapAndUpdateStencilID(L);Oo(T,R,k,_e,ge,ne,ye,!1,q)}}(n,s,p,y,w):u.ca(p)?function(T,R,k,L,F){if(T.renderPass!=="translucent"||k.paint.get("raster-opacity")===0||!L.length)return;const{isRenderingToTexture:q}=F,H=R.getSource(),ee=T.style.projection.useSubdivision;if(H instanceof bn)es(T,R,k,L,null,!1,!1,H.tileCoords,H.flippedWindingOrder,q);else if(ee){const[ne,ye,ge]=T.stencilConfigForOverlapTwoPass(L);es(T,R,k,ge,ne,!1,!0,Qa,!1,q),es(T,R,k,ge,ye,!0,!0,Qa,!1,q)}else{const[ne,ye]=T.getStencilConfigForOverlapAndUpdateStencilID(L);es(T,R,k,ye,ne,!1,!0,Qa,!1,q)}}(n,s,p,y,w):u.cb(p)?function(T,R,k,L,F){const q=k.paint.get("background-color"),H=k.paint.get("background-opacity");if(H===0)return;const{isRenderingToTexture:ee}=F,ne=T.context,ye=ne.gl,ge=T.style.projection,_e=T.transform,Ee=_e.tileSize,De=k.paint.get("background-pattern");if(T.isPatternMissing(De))return;const ze=!De&&q.a===1&&H===1&&T.opaquePassEnabledForLayer()?"opaque":"translucent";if(T.renderPass!==ze)return;const je=Fn.disabled,Ue=T.getDepthModeForSublayer(0,ze==="opaque"?Rn.ReadWrite:Rn.ReadOnly),Fe=T.colorModeForRenderPass(),it=T.useProgram(De?"backgroundPattern":"background"),Tt=L||Ve(_e,{tileSize:Ee,terrain:T.style.map.terrain});De&&(ne.activeTexture.set(ye.TEXTURE0),T.imageManager.bind(T.context));const gt=k.getCrossfadeParameters();for(const dt of Tt){const vt=_e.getProjectionData({overscaledTileID:dt,applyGlobeMatrix:!ee,applyTerrainMatrix:!0}),Jt=De?lg(H,T,De,{tileID:dt,tileSize:Ee},gt):pp(H,q),Yt=T.style.map.terrain&&T.style.map.terrain.getTerrainData(dt),Dt=ge.getMeshFromTileID(ne,dt.canonical,!1,!0,"raster");it.draw(ne,ye.TRIANGLES,Ue,je,Fe,Yn.backCCW,Jt,Yt,vt,k.id,Dt.vertexBuffer,Dt.indexBuffer,Dt.segments)}}(n,0,p,y,w):u.cc(p)&&function(T,R,k,L){const{isRenderingGlobe:F}=L,q=T.context,H=k.implementation,ee=T.style.projection,ne=T.transform,ye=ne.getProjectionDataForCustomLayer(F),ge={farZ:ne.farZ,nearZ:ne.nearZ,fov:ne.fov*Math.PI/180,modelViewProjectionMatrix:ne.modelViewProjectionMatrix,projectionMatrix:ne.projectionMatrix,shaderData:{variantName:ee.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ee.shaderPreludeCode.vertexSource}`,define:ee.shaderDefine},defaultProjectionData:ye},_e=H.renderingMode?H.renderingMode:"2d";if(T.renderPass==="offscreen"){const Ee=H.prerender;Ee&&(T.setCustomLayerDefaults(),q.setColorMode(T.colorModeForRenderPass()),Ee.call(H,q.gl,ge),q.setDirty(),T.setBaseState())}else if(T.renderPass==="translucent"){T.setCustomLayerDefaults(),q.setColorMode(T.colorModeForRenderPass()),q.setStencilMode(Fn.disabled);const Ee=_e==="3d"?T.getDepthModeFor3D():T.getDepthModeForSublayer(0,Rn.ReadOnly);q.setDepthMode(Ee),H.render(q.gl,ge),q.setDirty(),T.setBaseState(),q.bindFramebuffer.set(null)}}(n,0,p,w))}saveTileTexture(n){const s=this._tileTextures[n.size[0]];s?s.push(n):this._tileTextures[n.size[0]]=[n]}getTileTexture(n){const s=this._tileTextures[n];return s&&s.length>0?s.pop():null}isPatternMissing(n){if(!n)return!1;if(!n.from||!n.to)return!0;const s=this.imageManager.getPattern(n.from.toString()),p=this.imageManager.getPattern(n.to.toString());return!s||!p}useProgram(n,s,p=!1,y=[]){this.cache=this.cache||{};const w=!!this.style.map.terrain,T=this.style.projection,R=p?Ma.projectionMercator:T.shaderPreludeCode,k=p?Fl:T.shaderDefine,L=n+(s?s.cacheKey:"")+`/${p?er:T.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(w?"/terrain":"")+(y?`/${y.join("/")}`:"");return this.cache[L]||(this.cache[L]=new Vh(this.context,Ma[n],s,mp[n],this._showOverdrawInspector,w,R,k,y)),this.cache[L]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const n=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(n.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new ke(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this.debugOverlayTexture&&this.debugOverlayTexture.destroy()}overLimit(){const{drawingBufferWidth:n,drawingBufferHeight:s}=this.context.gl;return this.width!==n||this.height!==s}}function Ps(b,n){let s,p=!1,y=null,w=null;const T=()=>{y=null,p&&(b.apply(w,s),y=setTimeout(T,n),p=!1)};return(...R)=>(p=!0,w=this,s=R,y||T(),y)}class ef{constructor(n){this._getCurrentHash=()=>{const s=window.location.hash.replace("#","");if(this._hashName){let p;return s.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(p=y)}),(p&&p[1]||"").split("/")}return s.split("/")},this._onHashChange=()=>{const s=this._getCurrentHash();if(!this._isValidHash(s))return!1;const p=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(s[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+s[2],+s[1]],zoom:+s[0],bearing:p,pitch:+(s[4]||0)}),!0},this._updateHashUnthrottled=()=>{const s=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,s)},this._removeHash=()=>{const s=this._getCurrentHash();if(s.length===0)return;const p=s.join("/");let y=p;y.split("&").length>0&&(y=y.split("&")[0]),this._hashName&&(y=`${this._hashName}=${p}`);let w=window.location.hash.replace(y,"");w.startsWith("#&")?w=w.slice(0,1)+w.slice(2):w==="#"&&(w="");let T=window.location.href.replace(/(#.+)?$/,w);T=T.replace("&&","&"),window.history.replaceState(window.history.state,null,T)},this._updateHash=Ps(this._updateHashUnthrottled,300),this._hashName=n&&encodeURIComponent(n)}addTo(n){return this._map=n,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(n){const s=this._map.getCenter(),p=Math.round(100*this._map.getZoom())/100,y=Math.ceil((p*Math.LN2+Math.log(512/360/.5))/Math.LN10),w=Math.pow(10,y),T=Math.round(s.lng*w)/w,R=Math.round(s.lat*w)/w,k=this._map.getBearing(),L=this._map.getPitch();let F="";if(F+=n?`/${T}/${R}/${p}`:`${p}/${R}/${T}`,(k||L)&&(F+="/"+Math.round(10*k)/10),L&&(F+=`/${Math.round(L)}`),this._hashName){const q=this._hashName;let H=!1;const ee=window.location.hash.slice(1).split("&").map(ne=>{const ye=ne.split("=")[0];return ye===q?(H=!0,`${ye}=${F}`):ne}).filter(ne=>ne);return H||ee.push(`${q}=${F}`),`#${ee.join("&")}`}return`#${F}`}_isValidHash(n){if(n.length<3||n.some(isNaN))return!1;try{new u.Q(+n[2],+n[1])}catch{return!1}const s=+n[0],p=+(n[3]||0),y=+(n[4]||0);return s>=this._map.getMinZoom()&&s<=this._map.getMaxZoom()&&p>=-180&&p<=180&&y>=this._map.getMinPitch()&&y<=this._map.getMaxPitch()}}const Va={linearity:.3,easing:u.cd(0,0,.3,1)},nh=u.e({deceleration:2500,maxSpeed:1400},Va),ko=u.e({deceleration:20,maxSpeed:1400},Va),zo=u.e({deceleration:1e3,maxSpeed:360},Va),Rs=u.e({deceleration:1e3,maxSpeed:90},Va),ns=u.e({deceleration:1e3,maxSpeed:360},Va);class tf{constructor(n){this._map=n,this.clear()}clear(){this._inertiaBuffer=[]}record(n){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:j.now(),settings:n})}_drainInertiaBuffer(){const n=this._inertiaBuffer,s=j.now();for(;n.length>0&&s-n[0].time>160;)n.shift()}_onMoveEnd(n){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const s={zoom:0,bearing:0,pitch:0,roll:0,pan:new u.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:w}of this._inertiaBuffer)s.zoom+=w.zoomDelta||0,s.bearing+=w.bearingDelta||0,s.pitch+=w.pitchDelta||0,s.roll+=w.rollDelta||0,w.panDelta&&s.pan._add(w.panDelta),w.around&&(s.around=w.around),w.pinchAround&&(s.pinchAround=w.pinchAround);const p=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,y={};if(s.pan.mag()){const w=rs(s.pan.mag(),p,u.e({},nh,n||{})),T=s.pan.mult(w.amount/s.pan.mag()),R=this._map.cameraHelper.handlePanInertia(T,this._map.transform);y.center=R.easingCenter,y.offset=R.easingOffset,dl(y,w)}if(s.zoom){const w=rs(s.zoom,p,ko);y.zoom=this._map.transform.zoom+w.amount,dl(y,w)}if(s.bearing){const w=rs(s.bearing,p,zo);y.bearing=this._map.transform.bearing+u.ae(w.amount,-179,179),dl(y,w)}if(s.pitch){const w=rs(s.pitch,p,Rs);y.pitch=this._map.transform.pitch+w.amount,dl(y,w)}if(s.roll){const w=rs(s.roll,p,ns);y.roll=this._map.transform.roll+u.ae(w.amount,-179,179),dl(y,w)}if(y.zoom||y.bearing){const w=s.pinchAround===void 0?s.around:s.pinchAround;y.around=w?this._map.unproject(w):this._map.getCenter()}return this.clear(),u.e(y,{noMoveStart:!0})}}function dl(b,n){(!b.duration||b.duration<n.duration)&&(b.duration=n.duration,b.easing=n.easing)}function rs(b,n,s){const{maxSpeed:p,linearity:y,deceleration:w}=s,T=u.ae(b*y/(n/1e3),-p,p),R=Math.abs(T)/(w*y);return{easing:s.easing,duration:1e3*R,amount:T*(R/2)}}class vi extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,p,y={}){p=p instanceof MouseEvent?p:new MouseEvent(n,p);const w=$.mousePos(s.getCanvas(),p),T=s.unproject(w);super(n,u.e({point:w,lngLat:T,originalEvent:p},y)),this._defaultPrevented=!1,this.target=s}}class bo extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,p){const y=n==="touchend"?p.changedTouches:p.touches,w=$.touchPos(s.getCanvasContainer(),y),T=w.map(k=>s.unproject(k)),R=w.reduce((k,L,F,q)=>k.add(L.div(q.length)),new u.P(0,0));super(n,{points:w,point:R,lngLats:T,lngLat:s.unproject(R),originalEvent:p}),this._defaultPrevented=!1}}class Xi extends u.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(n,s,p){super(n,{originalEvent:p}),this._defaultPrevented=!1}}class rh{constructor(n,s){this._map=n,this._clickTolerance=s.clickTolerance}reset(){delete this._mousedownPos}wheel(n){return this._firePreventable(new Xi(n.type,this._map,n))}mousedown(n,s){return this._mousedownPos=s,this._firePreventable(new vi(n.type,this._map,n))}mouseup(n){this._map.fire(new vi(n.type,this._map,n))}click(n,s){this._mousedownPos&&this._mousedownPos.dist(s)>=this._clickTolerance||this._map.fire(new vi(n.type,this._map,n))}dblclick(n){return this._firePreventable(new vi(n.type,this._map,n))}mouseover(n){this._map.fire(new vi(n.type,this._map,n))}mouseout(n){this._map.fire(new vi(n.type,this._map,n))}touchstart(n){return this._firePreventable(new bo(n.type,this._map,n))}touchmove(n){this._map.fire(new bo(n.type,this._map,n))}touchend(n){this._map.fire(new bo(n.type,this._map,n))}touchcancel(n){this._map.fire(new bo(n.type,this._map,n))}_firePreventable(n){if(this._map.fire(n),n.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class od{constructor(n){this._map=n}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(n){this._map.fire(new vi(n.type,this._map,n))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new vi("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(n){this._delayContextMenu?this._contextMenuEvent=n:this._ignoreContextMenu||this._map.fire(new vi(n.type,this._map,n)),this._map.listens("contextmenu")&&n.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class au{constructor(n){this._map=n}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(n){return this.transform.screenPointToLocation(u.P.convert(n),this._map.terrain)}}class sd{constructor(n,s){this._map=n,this._tr=new au(n),this._el=n.getCanvasContainer(),this._container=n.getContainer(),this._clickTolerance=s.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(n,s){this.isEnabled()&&n.shiftKey&&n.button===0&&($.disableDrag(),this._startPos=this._lastPos=s,this._active=!0)}mousemoveWindow(n,s){if(!this._active)return;const p=s;if(this._lastPos.equals(p)||!this._box&&p.dist(this._startPos)<this._clickTolerance)return;const y=this._startPos;this._lastPos=p,this._box||(this._box=$.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",n));const w=Math.min(y.x,p.x),T=Math.max(y.x,p.x),R=Math.min(y.y,p.y),k=Math.max(y.y,p.y);$.setTransform(this._box,`translate(${w}px,${R}px)`),this._box.style.width=T-w+"px",this._box.style.height=k-R+"px"}mouseupWindow(n,s){if(!this._active||n.button!==0)return;const p=this._startPos,y=s;if(this.reset(),$.suppressClick(),p.x!==y.x||p.y!==y.y)return this._map.fire(new u.l("boxzoomend",{originalEvent:n})),{cameraAnimation:w=>w.fitScreenCoordinates(p,y,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",n)}keydown(n){this._active&&n.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",n))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&($.remove(this._box),this._box=null),$.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(n,s){return this._map.fire(new u.l(n,{originalEvent:s}))}}function nf(b,n){if(b.length!==n.length)throw new Error(`The number of touches and points are not equal - touches ${b.length}, points ${n.length}`);const s={};for(let p=0;p<b.length;p++)s[b[p].identifier]=n[p];return s}class Li{constructor(n){this.reset(),this.numTouches=n.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(n,s,p){(this.centroid||p.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=n.timeStamp),p.length===this.numTouches&&(this.centroid=function(y){const w=new u.P(0,0);for(const T of y)w._add(T);return w.div(y.length)}(s),this.touches=nf(p,s)))}touchmove(n,s,p){if(this.aborted||!this.centroid)return;const y=nf(p,s);for(const w in this.touches){const T=y[w];(!T||T.dist(this.touches[w])>30)&&(this.aborted=!0)}}touchend(n,s,p){if((!this.centroid||n.timeStamp-this.startTime>500)&&(this.aborted=!0),p.length===0){const y=!this.aborted&&this.centroid;if(this.reset(),y)return y}}}class pl{constructor(n){this.singleTap=new Li(n),this.numTaps=n.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(n,s,p){this.singleTap.touchstart(n,s,p)}touchmove(n,s,p){this.singleTap.touchmove(n,s,p)}touchend(n,s,p){const y=this.singleTap.touchend(n,s,p);if(y){const w=n.timeStamp-this.lastTime<500,T=!this.lastTap||this.lastTap.dist(y)<30;if(w&&T||this.reset(),this.count++,this.lastTime=n.timeStamp,this.lastTap=y,this.count===this.numTaps)return this.reset(),y}}}class ou{constructor(n){this._tr=new au(n),this._zoomIn=new pl({numTouches:1,numTaps:2}),this._zoomOut=new pl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(n,s,p){this._zoomIn.touchstart(n,s,p),this._zoomOut.touchstart(n,s,p)}touchmove(n,s,p){this._zoomIn.touchmove(n,s,p),this._zoomOut.touchmove(n,s,p)}touchend(n,s,p){const y=this._zoomIn.touchend(n,s,p),w=this._zoomOut.touchend(n,s,p),T=this._tr;return y?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:T.zoom+1,around:T.unproject(y)},{originalEvent:n})}):w?(this._active=!0,n.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:R=>R.easeTo({duration:300,zoom:T.zoom-1,around:T.unproject(w)},{originalEvent:n})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Bi{constructor(n){this._enabled=!!n.enable,this._moveStateManager=n.moveStateManager,this._clickTolerance=n.clickTolerance||1,this._moveFunction=n.move,this._activateOnStart=!!n.activateOnStart,n.assignEvents(this),this.reset()}reset(n){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(n)}_move(...n){const s=this._moveFunction(...n);if(s.bearingDelta||s.pitchDelta||s.rollDelta||s.around||s.panDelta)return this._active=!0,s}dragStart(n,s){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(n)&&(this._moveStateManager.startMove(n),this._lastPoint=Array.isArray(s)?s[0]:s,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(n,s){if(!this.isEnabled())return;const p=this._lastPoint;if(!p)return;if(n.preventDefault(),!this._moveStateManager.isValidMoveEvent(n))return void this.reset(n);const y=Array.isArray(s)?s[0]:s;return!this._moved&&y.dist(p)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=y,this._move(p,y))}dragEnd(n){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(n)&&(this._moved&&$.suppressClick(),this.reset(n))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ja={0:1,2:2};class Do{constructor(n){this._correctEvent=n.checkCorrectEvent}startMove(n){const s=$.mouseButton(n);this._eventButton=s}endMove(n){delete this._eventButton}isValidStartEvent(n){return this._correctEvent(n)}isValidMoveEvent(n){return!function(s,p){const y=Ja[p];return s.buttons===void 0||(s.buttons&y)!==y}(n,this._eventButton)}isValidEndEvent(n){return $.mouseButton(n)===this._eventButton}}class ha{constructor(){this._firstTouch=void 0}_isOneFingerTouch(n){return n.targetTouches.length===1}_isSameTouchEvent(n){return n.targetTouches[0].identifier===this._firstTouch}startMove(n){this._firstTouch=n.targetTouches[0].identifier}endMove(n){delete this._firstTouch}isValidStartEvent(n){return this._isOneFingerTouch(n)}isValidMoveEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}isValidEndEvent(n){return this._isOneFingerTouch(n)&&this._isSameTouchEvent(n)}}class su{constructor(n=new Do({checkCorrectEvent:()=>!0}),s=new ha){this.mouseMoveStateManager=n,this.oneFingerTouchMoveStateManager=s}_executeRelevantHandler(n,s,p){return n instanceof MouseEvent?s(n):typeof TouchEvent<"u"&&n instanceof TouchEvent?p(n):void 0}startMove(n){this._executeRelevantHandler(n,s=>this.mouseMoveStateManager.startMove(s),s=>this.oneFingerTouchMoveStateManager.startMove(s))}endMove(n){this._executeRelevantHandler(n,s=>this.mouseMoveStateManager.endMove(s),s=>this.oneFingerTouchMoveStateManager.endMove(s))}isValidStartEvent(n){return this._executeRelevantHandler(n,s=>this.mouseMoveStateManager.isValidStartEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidStartEvent(s))}isValidMoveEvent(n){return this._executeRelevantHandler(n,s=>this.mouseMoveStateManager.isValidMoveEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(s))}isValidEndEvent(n){return this._executeRelevantHandler(n,s=>this.mouseMoveStateManager.isValidEndEvent(s),s=>this.oneFingerTouchMoveStateManager.isValidEndEvent(s))}}const ih=b=>{b.mousedown=b.dragStart,b.mousemoveWindow=b.dragMove,b.mouseup=b.dragEnd,b.contextmenu=n=>{n.preventDefault()}};class cg{constructor(n,s){this._clickTolerance=n.clickTolerance||1,this._map=s,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new u.P(0,0)}_shouldBePrevented(n){return n<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(n,s,p){return this._calculateTransform(n,s,p)}touchmove(n,s,p){if(this._active){if(!this._shouldBePrevented(p.length))return n.preventDefault(),this._calculateTransform(n,s,p);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",n)}}touchend(n,s,p){this._calculateTransform(n,s,p),this._active&&this._shouldBePrevented(p.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(n,s,p){p.length>0&&(this._active=!0);const y=nf(p,s),w=new u.P(0,0),T=new u.P(0,0);let R=0;for(const L in y){const F=y[L],q=this._touches[L];q&&(w._add(F),T._add(F.sub(q)),R++,y[L]=F)}if(this._touches=y,this._shouldBePrevented(R)||!T.mag())return;const k=T.div(R);return this._sum._add(k),this._sum.mag()<this._clickTolerance?void 0:{around:w.div(R),panDelta:k}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class rf{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(n,s,p){this._firstTwoTouches||p.length<2||(this._firstTwoTouches=[p[0].identifier,p[1].identifier],this._start([s[0],s[1]]))}touchmove(n,s,p){if(!this._firstTwoTouches)return;n.preventDefault();const[y,w]=this._firstTwoTouches,T=is(p,s,y),R=is(p,s,w);if(!T||!R)return;const k=this._aroundCenter?null:T.add(R).div(2);return this._move([T,R],k,n)}touchend(n,s,p){if(!this._firstTwoTouches)return;const[y,w]=this._firstTwoTouches,T=is(p,s,y),R=is(p,s,w);T&&R||(this._active&&$.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(n){this._enabled=!0,this._aroundCenter=!!n&&n.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function is(b,n,s){for(let p=0;p<b.length;p++)if(b[p].identifier===s)return n[p]}function ah(b,n){return Math.log(b/n)/Math.LN2}class Os extends rf{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(n){this._startDistance=this._distance=n[0].dist(n[1])}_move(n,s){const p=this._distance;if(this._distance=n[0].dist(n[1]),this._active||!(Math.abs(ah(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:ah(this._distance,p),pinchAround:s}}}function Lo(b,n){return 180*b.angleWith(n)/Math.PI}class rn extends rf{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(n){this._startVector=this._vector=n[0].sub(n[1]),this._minDiameter=n[0].dist(n[1])}_move(n,s,p){const y=this._vector;if(this._vector=n[0].sub(n[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Lo(this._vector,y),pinchAround:s}}_isBelowThreshold(n){this._minDiameter=Math.min(this._minDiameter,n.mag());const s=25/(Math.PI*this._minDiameter)*360,p=Lo(n,this._startVector);return Math.abs(p)<s}}function oh(b){return Math.abs(b.y)>Math.abs(b.x)}class cc extends rf{constructor(n){super(),this._currentTouchCount=0,this._map=n}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(n,s,p){super.touchstart(n,s,p),this._currentTouchCount=p.length}_start(n){this._lastPoints=n,oh(n[0].sub(n[1]))&&(this._valid=!1)}_move(n,s,p){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const y=n[0].sub(this._lastPoints[0]),w=n[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(y,w,p.timeStamp),this._valid?(this._lastPoints=n,this._active=!0,{pitchDelta:(y.y+w.y)/2*-.5}):void 0}gestureBeginsVertically(n,s,p){if(this._valid!==void 0)return this._valid;const y=n.mag()>=2,w=s.mag()>=2;if(!y&&!w)return;if(!y||!w)return this._firstMove===void 0&&(this._firstMove=p),p-this._firstMove<100&&void 0;const T=n.y>0==s.y>0;return oh(n)&&oh(s)&&T}}const af={panStep:100,bearingStep:15,pitchStep:10};class uc{constructor(n){this._tr=new au(n);const s=af;this._panStep=s.panStep,this._bearingStep=s.bearingStep,this._pitchStep=s.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(n){if(n.altKey||n.ctrlKey||n.metaKey)return;let s=0,p=0,y=0,w=0,T=0;switch(n.keyCode){case 61:case 107:case 171:case 187:s=1;break;case 189:case 109:case 173:s=-1;break;case 37:n.shiftKey?p=-1:(n.preventDefault(),w=-1);break;case 39:n.shiftKey?p=1:(n.preventDefault(),w=1);break;case 38:n.shiftKey?y=1:(n.preventDefault(),T=-1);break;case 40:n.shiftKey?y=-1:(n.preventDefault(),T=1);break;default:return}return this._rotationDisabled&&(p=0,y=0),{cameraAnimation:R=>{const k=this._tr;R.easeTo({duration:300,easeId:"keyboardHandler",easing:ml,zoom:s?Math.round(k.zoom)+s*(n.shiftKey?2:1):k.zoom,bearing:k.bearing+p*this._bearingStep,pitch:k.pitch+y*this._pitchStep,offset:[-w*this._panStep,-T*this._panStep],center:k.center},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function ml(b){return b*(2-b)}const of=4.000244140625;class Vn{constructor(n,s){this._onTimeout=p=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(p)},this._map=n,this._tr=new au(n),this._triggerRenderFrame=s,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222}setZoomRate(n){this._defaultZoomRate=n}setWheelZoomRate(n){this._wheelZoomRate=n}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(n){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!n&&n.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(n){return!!this._map.cooperativeGestures.isEnabled()&&!(n.ctrlKey||this._map.cooperativeGestures.isBypassed(n))}wheel(n){if(!this.isEnabled())return;if(this._shouldBePrevented(n))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",n);let s=n.deltaMode===WheelEvent.DOM_DELTA_LINE?40*n.deltaY:n.deltaY;const p=j.now(),y=p-(this._lastWheelEventTime||0);this._lastWheelEventTime=p,s!==0&&s%of==0?this._type="wheel":s!==0&&Math.abs(s)<4?this._type="trackpad":y>400?(this._type=null,this._lastValue=s,this._timeout=setTimeout(this._onTimeout,40,n)):this._type||(this._type=Math.abs(y*s)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,s+=this._lastValue)),n.shiftKey&&s&&(s/=4),this._type&&(this._lastWheelEvent=n,this._delta-=s,this._active||this._start(n)),n.preventDefault()}_start(n){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const s=$.mousePos(this._map.getCanvas(),n),p=this._tr;this._aroundPoint=this._aroundCenter?p.transform.locationToScreenPoint(u.Q.convert(p.center)):s,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const n=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const R=n.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=R),typeof this._targetZoom=="number"&&(this._targetZoom+=R)}if(this._delta!==0){const R=this._type==="wheel"&&Math.abs(this._delta)>of?this._wheelZoomRate:this._defaultZoomRate;let k=2/(1+Math.exp(-Math.abs(this._delta*R)));this._delta<0&&k!==0&&(k=1/k);const L=typeof this._targetZoom!="number"?n.scale:u.ac(this._targetZoom);this._targetZoom=n.getConstrained(n.getCameraLngLat(),u.ah(L*k)).zoom,this._type==="wheel"&&(this._startZoom=n.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const s=typeof this._targetZoom!="number"?n.zoom:this._targetZoom,p=this._startZoom,y=this._easing;let w,T=!1;if(this._type==="wheel"&&p&&y){const R=j.now()-this._lastWheelEventTime,k=Math.min((R+5)/200,1),L=y(k);w=u.B.number(p,s,L),k<1?this._frameId||(this._frameId=!0):T=!0}else w=s,T=!0;return this._active=!0,T&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout},200)),this._lastExpectedZoom=w,{noInertia:!0,needsRenderFrame:!T,zoomDelta:w-n.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(n){let s=u.cf;if(this._prevEase){const p=this._prevEase,y=(j.now()-p.start)/p.duration,w=p.easing(y+.01)-p.easing(y),T=.27/Math.sqrt(w*w+1e-4)*.01,R=Math.sqrt(.0729-T*T);s=u.cd(T,R,.25,1)}return this._prevEase={start:j.now(),duration:n,easing:s},s}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class sh{constructor(n,s){this._clickZoom=n,this._tapZoom=s}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class vp{constructor(n){this._tr=new au(n),this.reset()}reset(){this._active=!1}dblclick(n,s){return n.preventDefault(),{cameraAnimation:p=>{p.easeTo({duration:300,zoom:this._tr.zoom+(n.shiftKey?-1:1),around:this._tr.unproject(s)},{originalEvent:n})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class as{constructor(){this._tap=new pl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(n,s,p){if(!this._swipePoint)if(this._tapTime){const y=s[0],w=n.timeStamp-this._tapTime<500,T=this._tapPoint.dist(y)<30;w&&T?p.length>0&&(this._swipePoint=y,this._swipeTouch=p[0].identifier):this.reset()}else this._tap.touchstart(n,s,p)}touchmove(n,s,p){if(this._tapTime){if(this._swipePoint){if(p[0].identifier!==this._swipeTouch)return;const y=s[0],w=y.y-this._swipePoint.y;return this._swipePoint=y,n.preventDefault(),this._active=!0,{zoomDelta:w/128}}}else this._tap.touchmove(n,s,p)}touchend(n,s,p){if(this._tapTime)this._swipePoint&&p.length===0&&this.reset();else{const y=this._tap.touchend(n,s,p);y&&(this._tapTime=n.timeStamp,this._tapPoint=y)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class sf{constructor(n,s,p){this._el=n,this._mousePan=s,this._touchPan=p}enable(n){this._inertiaOptions=n||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class lf{constructor(n,s,p,y){this._pitchWithRotate=n.pitchWithRotate,this._rollEnabled=n.rollEnabled,this._mouseRotate=s,this._mousePitch=p,this._mouseRoll=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class os{constructor(n,s,p,y){this._el=n,this._touchZoom=s,this._touchRotate=p,this._tapDragZoom=y,this._rotationDisabled=!1,this._enabled=!0}enable(n){this._touchZoom.enable(n),this._rotationDisabled||this._touchRotate.enable(n),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class Bo{constructor(n,s){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=n,this._options=s,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const n=this._map.getCanvasContainer();n.classList.add("maplibregl-cooperative-gestures"),this._container=$.create("div","maplibregl-cooperative-gesture-screen",n);let s=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(s=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const p=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),y=document.createElement("div");y.className="maplibregl-desktop-message",y.textContent=s,this._container.appendChild(y);const w=document.createElement("div");w.className="maplibregl-mobile-message",w.textContent=p,this._container.appendChild(w),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&($.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(n){return n[this._bypassKey]}notifyGestureBlocked(n,s){this._enabled&&(this._map.fire(new u.l("cooperativegestureprevented",{gestureType:n,originalEvent:s})),this._container.classList.add("maplibregl-show"),setTimeout(()=>{this._container.classList.remove("maplibregl-show")},100))}}const Is=b=>b.zoom||b.drag||b.roll||b.pitch||b.rotate;class ld extends u.l{}function lu(b){return b.panDelta&&b.panDelta.mag()||b.zoomDelta||b.bearingDelta||b.pitchDelta||b.rollDelta}class lh{constructor(n,s){this.handleWindowEvent=y=>{this.handleEvent(y,`${y.type}Window`)},this.handleEvent=(y,w)=>{if(y.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const T=y.type==="renderFrame"?void 0:y,R={needsRenderFrame:!1},k={},L={};for(const{handlerName:H,handler:ee,allowed:ne}of this._handlers){if(!ee.isEnabled())continue;let ye;if(this._blockedByActive(L,ne,H))ee.reset();else if(ee[w||y.type]){if(u.cg(y,w||y.type)){const ge=$.mousePos(this._map.getCanvas(),y);ye=ee[w||y.type](y,ge)}else if(u.ch(y,w||y.type)){const ge=this._getMapTouches(y.touches),_e=$.touchPos(this._map.getCanvas(),ge);ye=ee[w||y.type](y,_e,ge)}else u.ci(w||y.type)||(ye=ee[w||y.type](y));this.mergeHandlerResult(R,k,ye,H,T),ye&&ye.needsRenderFrame&&this._triggerRenderFrame()}(ye||ee.isActive())&&(L[H]=ee)}const F={};for(const H in this._previousActiveHandlers)L[H]||(F[H]=T);this._previousActiveHandlers=L,(Object.keys(F).length||lu(R))&&(this._changes.push([R,k,F]),this._triggerRenderFrame()),(Object.keys(L).length||lu(R))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:q}=R;q&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],q(this._map))},this._map=n,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new tf(n),this._bearingSnap=s.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(s);const p=this._el;this._listeners=[[p,"touchstart",{passive:!0}],[p,"touchmove",{passive:!1}],[p,"touchend",void 0],[p,"touchcancel",void 0],[p,"mousedown",void 0],[p,"mousemove",void 0],[p,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[p,"mouseover",void 0],[p,"mouseout",void 0],[p,"dblclick",void 0],[p,"click",void 0],[p,"keydown",{capture:!1}],[p,"keyup",void 0],[p,"wheel",{passive:!1}],[p,"contextmenu",void 0],[window,"blur",void 0]];for(const[y,w,T]of this._listeners)$.addEventListener(y,w,y===document?this.handleWindowEvent:this.handleEvent,T)}destroy(){for(const[n,s,p]of this._listeners)$.removeEventListener(n,s,n===document?this.handleWindowEvent:this.handleEvent,p)}_addDefaultHandlers(n){const s=this._map,p=s.getCanvasContainer();this._add("mapEvent",new rh(s,n));const y=s.boxZoom=new sd(s,n);this._add("boxZoom",y),n.interactive&&n.boxZoom&&y.enable();const w=s.cooperativeGestures=new Bo(s,n.cooperativeGestures);this._add("cooperativeGestures",w),n.cooperativeGestures&&w.enable();const T=new ou(s),R=new vp(s);s.doubleClickZoom=new sh(R,T),this._add("tapZoom",T),this._add("clickZoom",R),n.interactive&&n.doubleClickZoom&&s.doubleClickZoom.enable();const k=new as;this._add("tapDragZoom",k);const L=s.touchPitch=new cc(s);this._add("touchPitch",L),n.interactive&&n.touchPitch&&s.touchPitch.enable(n.touchPitch);const F=()=>s.project(s.getCenter()),q=function({enable:ze,clickTolerance:je,aroundCenter:Ue=!0,minPixelCenterThreshold:Fe=100,rotateDegreesPerPixelMoved:it=.8},Tt){const gt=new Do({checkCorrectEvent:dt=>$.mouseButton(dt)===0&&dt.ctrlKey||$.mouseButton(dt)===2&&!dt.ctrlKey});return new Bi({clickTolerance:je,move:(dt,vt)=>{const Jt=Tt();if(Ue&&Math.abs(Jt.y-dt.y)>Fe)return{bearingDelta:u.ce(new u.P(dt.x,vt.y),vt,Jt)};let Yt=(vt.x-dt.x)*it;return Ue&&vt.y<Jt.y&&(Yt=-Yt),{bearingDelta:Yt}},moveStateManager:gt,enable:ze,assignEvents:ih})}(n,F),H=function({enable:ze,clickTolerance:je,pitchDegreesPerPixelMoved:Ue=-.5}){const Fe=new Do({checkCorrectEvent:it=>$.mouseButton(it)===0&&it.ctrlKey||$.mouseButton(it)===2});return new Bi({clickTolerance:je,move:(it,Tt)=>({pitchDelta:(Tt.y-it.y)*Ue}),moveStateManager:Fe,enable:ze,assignEvents:ih})}(n),ee=function({enable:ze,clickTolerance:je,rollDegreesPerPixelMoved:Ue=.3},Fe){const it=new Do({checkCorrectEvent:Tt=>$.mouseButton(Tt)===2&&Tt.ctrlKey});return new Bi({clickTolerance:je,move:(Tt,gt)=>{const dt=Fe();let vt=(gt.x-Tt.x)*Ue;return gt.y<dt.y&&(vt=-vt),{rollDelta:vt}},moveStateManager:it,enable:ze,assignEvents:ih})}(n,F);s.dragRotate=new lf(n,q,H,ee),this._add("mouseRotate",q,["mousePitch"]),this._add("mousePitch",H,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ee,["mousePitch"]),n.interactive&&n.dragRotate&&s.dragRotate.enable();const ne=function({enable:ze,clickTolerance:je}){const Ue=new Do({checkCorrectEvent:Fe=>$.mouseButton(Fe)===0&&!Fe.ctrlKey});return new Bi({clickTolerance:je,move:(Fe,it)=>({around:it,panDelta:it.sub(Fe)}),activateOnStart:!0,moveStateManager:Ue,enable:ze,assignEvents:ih})}(n),ye=new cg(n,s);s.dragPan=new sf(p,ne,ye),this._add("mousePan",ne),this._add("touchPan",ye,["touchZoom","touchRotate"]),n.interactive&&n.dragPan&&s.dragPan.enable(n.dragPan);const ge=new rn,_e=new Os;s.touchZoomRotate=new os(p,_e,ge,k),this._add("touchRotate",ge,["touchPan","touchZoom"]),this._add("touchZoom",_e,["touchPan","touchRotate"]),n.interactive&&n.touchZoomRotate&&s.touchZoomRotate.enable(n.touchZoomRotate);const Ee=s.scrollZoom=new Vn(s,()=>this._triggerRenderFrame());this._add("scrollZoom",Ee,["mousePan"]),n.interactive&&n.scrollZoom&&s.scrollZoom.enable(n.scrollZoom);const De=s.keyboard=new uc(s);this._add("keyboard",De),n.interactive&&n.keyboard&&s.keyboard.enable(),this._add("blockableMapEvent",new od(s))}_add(n,s,p){this._handlers.push({handlerName:n,handler:s,allowed:p}),this._handlersById[n]=s}stop(n){if(!this._updatingCamera){for(const{handler:s}of this._handlers)s.reset();this._inertia.clear(),this._fireEvents({},{},n),this._changes=[]}}isActive(){for(const{handler:n}of this._handlers)if(n.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!Is(this._eventsInProgress)||this.isZooming()}_blockedByActive(n,s,p){for(const y in n)if(y!==p&&(!s||s.indexOf(y)<0))return!0;return!1}_getMapTouches(n){const s=[];for(const p of n)this._el.contains(p.target)&&s.push(p);return s}mergeHandlerResult(n,s,p,y,w){if(!p)return;u.e(n,p);const T={handlerName:y,originalEvent:p.originalEvent||w};p.zoomDelta!==void 0&&(s.zoom=T),p.panDelta!==void 0&&(s.drag=T),p.rollDelta!==void 0&&(s.roll=T),p.pitchDelta!==void 0&&(s.pitch=T),p.bearingDelta!==void 0&&(s.rotate=T)}_applyChanges(){const n={},s={},p={};for(const[y,w,T]of this._changes)y.panDelta&&(n.panDelta=(n.panDelta||new u.P(0,0))._add(y.panDelta)),y.zoomDelta&&(n.zoomDelta=(n.zoomDelta||0)+y.zoomDelta),y.bearingDelta&&(n.bearingDelta=(n.bearingDelta||0)+y.bearingDelta),y.pitchDelta&&(n.pitchDelta=(n.pitchDelta||0)+y.pitchDelta),y.rollDelta&&(n.rollDelta=(n.rollDelta||0)+y.rollDelta),y.around!==void 0&&(n.around=y.around),y.pinchAround!==void 0&&(n.pinchAround=y.pinchAround),y.noInertia&&(n.noInertia=y.noInertia),u.e(s,w),u.e(p,T);this._updateMapTransform(n,s,p),this._changes=[]}_updateMapTransform(n,s,p){const y=this._map,w=y._getTransformForUpdate(),T=y.terrain;if(!(lu(n)||T&&this._terrainMovement))return this._fireEvents(s,p,!0);y._stop(!0);let{panDelta:R,zoomDelta:k,bearingDelta:L,pitchDelta:F,rollDelta:q,around:H,pinchAround:ee}=n;ee!==void 0&&(H=ee),H=H||y.transform.centerPoint,T&&!w.isPointOnMapSurface(H)&&(H=w.centerPoint);const ne={panDelta:R,zoomDelta:k,rollDelta:q,pitchDelta:F,bearingDelta:L,around:H};this._map.cameraHelper.useGlobeControls&&!w.isPointOnMapSurface(H)&&(H=w.centerPoint);const ye=H.distSqr(w.centerPoint)<.01?w.center:w.screenPointToLocation(R?H.sub(R):H);T?(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,w),this._terrainMovement||!s.drag&&!s.zoom?s.drag&&this._terrainMovement?w.setCenter(w.screenPointToLocation(w.centerPoint.sub(R))):this._map.cameraHelper.handleMapControlsPan(ne,w,ye):(this._terrainMovement=!0,this._map._elevationFreeze=!0,this._map.cameraHelper.handleMapControlsPan(ne,w,ye))):(this._map.cameraHelper.handleMapControlsRollPitchBearingZoom(ne,w),this._map.cameraHelper.handleMapControlsPan(ne,w,ye)),y._applyUpdatedTransform(w),this._map._update(),n.noInertia||this._inertia.record(n),this._fireEvents(s,p,!0)}_fireEvents(n,s,p){const y=Is(this._eventsInProgress),w=Is(n),T={};for(const q in n){const{originalEvent:H}=n[q];this._eventsInProgress[q]||(T[`${q}start`]=H),this._eventsInProgress[q]=n[q]}!y&&w&&this._fireEvent("movestart",w.originalEvent);for(const q in T)this._fireEvent(q,T[q]);w&&this._fireEvent("move",w.originalEvent);for(const q in n){const{originalEvent:H}=n[q];this._fireEvent(q,H)}const R={};let k;for(const q in this._eventsInProgress){const{handlerName:H,originalEvent:ee}=this._eventsInProgress[q];this._handlersById[H].isActive()||(delete this._eventsInProgress[q],k=s[H]||ee,R[`${q}end`]=k)}for(const q in R)this._fireEvent(q,R[q]);const L=Is(this._eventsInProgress),F=(y||w)&&!L;if(F&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const q=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&q.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(q)}if(p&&F){this._updatingCamera=!0;const q=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),H=ee=>ee!==0&&-this._bearingSnap<ee&&ee<this._bearingSnap;!q||!q.essential&&j.prefersReducedMotion?(this._map.fire(new u.l("moveend",{originalEvent:k})),H(this._map.getBearing())&&this._map.resetNorth()):(H(q.bearing||this._map.getBearing())&&(q.bearing=0),q.freezeElevation=!0,this._map.easeTo(q,{originalEvent:k})),this._updatingCamera=!1}}_fireEvent(n,s){this._map.fire(new u.l(n,s?{originalEvent:s}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(n=>{delete this._frameId,this.handleEvent(new ld("renderFrame",{timeStamp:n})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class ch extends u.E{constructor(n,s,p){super(),this._renderFrameCallback=()=>{const y=Math.min((j.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(y)),y<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=n,this._bearingSnap=p.bearingSnap,this.cameraHelper=s,this.on("moveend",()=>{delete this._requestedCameraState})}migrateProjection(n,s){n.apply(this.transform),this.transform=n,this.cameraHelper=s}getCenter(){return new u.Q(this.transform.center.lng,this.transform.center.lat)}setCenter(n,s){return this.jumpTo({center:n},s)}getCenterElevation(){return this.transform.elevation}setCenterElevation(n,s){return this.jumpTo({elevation:n},s),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(n){this._centerClampedToGround=n}panBy(n,s,p){return n=u.P.convert(n).mult(-1),this.panTo(this.transform.center,u.e({offset:n},s),p)}panTo(n,s,p){return this.easeTo(u.e({center:n},s),p)}getZoom(){return this.transform.zoom}setZoom(n,s){return this.jumpTo({zoom:n},s),this}zoomTo(n,s,p){return this.easeTo(u.e({zoom:n},s),p)}zoomIn(n,s){return this.zoomTo(this.getZoom()+1,n,s),this}zoomOut(n,s){return this.zoomTo(this.getZoom()-1,n,s),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(n,s){return n!=this.transform.fov&&(this.transform.setFov(n),this.fire(new u.l("movestart",s)).fire(new u.l("move",s)).fire(new u.l("moveend",s))),this}getBearing(){return this.transform.bearing}setBearing(n,s){return this.jumpTo({bearing:n},s),this}getPadding(){return this.transform.padding}setPadding(n,s){return this.jumpTo({padding:n},s),this}rotateTo(n,s,p){return this.easeTo(u.e({bearing:n},s),p)}resetNorth(n,s){return this.rotateTo(0,u.e({duration:1e3},n),s),this}resetNorthPitch(n,s){return this.easeTo(u.e({bearing:0,pitch:0,roll:0,duration:1e3},n),s),this}snapToNorth(n,s){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(n,s):this}getPitch(){return this.transform.pitch}setPitch(n,s){return this.jumpTo({pitch:n},s),this}getRoll(){return this.transform.roll}setRoll(n,s){return this.jumpTo({roll:n},s),this}cameraForBounds(n,s){n=Kt.convert(n).adjustAntiMeridian();const p=s&&s.bearing||0;return this._cameraForBoxAndBearing(n.getNorthWest(),n.getSouthEast(),p,s)}_cameraForBoxAndBearing(n,s,p,y){const w={top:0,bottom:0,right:0,left:0};if(typeof(y=u.e({padding:w,offset:[0,0],maxZoom:this.transform.maxZoom},y)).padding=="number"){const L=y.padding;y.padding={top:L,bottom:L,right:L,left:L}}const T=u.e(w,y.padding);y.padding=T;const R=this.transform,k=new Kt(n,s);return this.cameraHelper.cameraForBoxAndBearing(y,T,k,p,R)}fitBounds(n,s,p){return this._fitInternal(this.cameraForBounds(n,s),s,p)}fitScreenCoordinates(n,s,p,y,w){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(u.P.convert(n)),this.transform.screenPointToLocation(u.P.convert(s)),p,y),y,w)}_fitInternal(n,s,p){return n?(delete(s=u.e(n,s)).padding,s.linear?this.easeTo(s,p):this.flyTo(s,p)):this}jumpTo(n,s){this.stop();const p=this._getTransformForUpdate();let y=!1,w=!1,T=!1;const R=p.zoom;this.cameraHelper.handleJumpToCenterZoom(p,n);const k=p.zoom!==R;return"elevation"in n&&p.elevation!==+n.elevation&&p.setElevation(+n.elevation),"bearing"in n&&p.bearing!==+n.bearing&&(y=!0,p.setBearing(+n.bearing)),"pitch"in n&&p.pitch!==+n.pitch&&(w=!0,p.setPitch(+n.pitch)),"roll"in n&&p.roll!==+n.roll&&(T=!0,p.setRoll(+n.roll)),n.padding==null||p.isPaddingEqual(n.padding)||p.setPadding(n.padding),this._applyUpdatedTransform(p),this.fire(new u.l("movestart",s)).fire(new u.l("move",s)),k&&this.fire(new u.l("zoomstart",s)).fire(new u.l("zoom",s)).fire(new u.l("zoomend",s)),y&&this.fire(new u.l("rotatestart",s)).fire(new u.l("rotate",s)).fire(new u.l("rotateend",s)),w&&this.fire(new u.l("pitchstart",s)).fire(new u.l("pitch",s)).fire(new u.l("pitchend",s)),T&&this.fire(new u.l("rollstart",s)).fire(new u.l("roll",s)).fire(new u.l("rollend",s)),this.fire(new u.l("moveend",s))}calculateCameraOptionsFromTo(n,s,p,y=0){const w=u.$.fromLngLat(n,s),T=u.$.fromLngLat(p,y),R=T.x-w.x,k=T.y-w.y,L=T.z-w.z,F=Math.hypot(R,k,L);if(F===0)throw new Error("Can't calculate camera options with same From and To");const q=Math.hypot(R,k),H=u.ah(this.transform.cameraToCenterDistance/F/this.transform.tileSize),ee=180*Math.atan2(R,-k)/Math.PI;let ne=180*Math.acos(q/F)/Math.PI;return ne=L<0?90-ne:90+ne,{center:T.toLngLat(),elevation:y,zoom:H,pitch:ne,bearing:ee}}calculateCameraOptionsFromCameraLngLatAltRotation(n,s,p,y,w){const T=this.transform.calculateCenterFromCameraLngLatAlt(n,s,p,y);return{center:T.center,elevation:T.elevation,zoom:T.zoom,bearing:p,pitch:y,roll:w}}easeTo(n,s){this._stop(!1,n.easeId),((n=u.e({offset:[0,0],duration:500,easing:u.cf},n)).animate===!1||!n.essential&&j.prefersReducedMotion)&&(n.duration=0);const p=this._getTransformForUpdate(),y=this.getBearing(),w=p.pitch,T=p.roll,R="bearing"in n?this._normalizeBearing(n.bearing,y):y,k="pitch"in n?+n.pitch:w,L="roll"in n?this._normalizeBearing(n.roll,T):T,F="padding"in n?n.padding:p.padding,q=u.P.convert(n.offset);let H,ee;n.around&&(H=u.Q.convert(n.around),ee=p.locationToScreenPoint(H));const ne={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},ye=this.cameraHelper.handleEaseTo(p,{bearing:R,pitch:k,roll:L,padding:F,around:H,aroundPoint:ee,offsetAsPoint:q,offset:n.offset,zoom:n.zoom,center:n.center});return this._rotating=this._rotating||y!==R,this._pitching=this._pitching||k!==w,this._rolling=this._rolling||L!==T,this._padding=!p.isPaddingEqual(F),this._zooming=this._zooming||ye.isZooming,this._easeId=n.easeId,this._prepareEase(s,n.noMoveStart,ne),this.terrain&&this._prepareElevation(ye.elevationCenter),this._ease(ge=>{ye.easeFunc(ge),this.terrain&&!n.freezeElevation&&this._updateElevation(ge),this._applyUpdatedTransform(p),this._fireMoveEvents(s)},ge=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(s,ge)},n),this}_prepareEase(n,s,p={}){this._moving=!0,s||p.moving||this.fire(new u.l("movestart",n)),this._zooming&&!p.zooming&&this.fire(new u.l("zoomstart",n)),this._rotating&&!p.rotating&&this.fire(new u.l("rotatestart",n)),this._pitching&&!p.pitching&&this.fire(new u.l("pitchstart",n)),this._rolling&&!p.rolling&&this.fire(new u.l("rollstart",n))}_prepareElevation(n){this._elevationCenter=n,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(n,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(n){this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const s=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(n<1&&s!==this._elevationTarget){const p=this._elevationTarget-this._elevationStart;this._elevationStart+=n*(p-(s-(p*n+this._elevationStart))/(1-n)),this._elevationTarget=s}this.transform.setElevation(u.B.number(this._elevationStart,this._elevationTarget,n))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(n){if(!this.terrain&&n.elevation>=0&&n.pitch<=90)return{};const s=n.getCameraLngLat(),p=n.getCameraAltitude(),y=this.terrain?this.terrain.getElevationForLngLatZoom(s,n.zoom):0;if(p<y){const w=this.calculateCameraOptionsFromTo(s,y,n.center,n.elevation);return{pitch:w.pitch,zoom:w.zoom}}return{}}_applyUpdatedTransform(n){const s=[];if(s.push(y=>this._elevateCameraIfInsideTerrain(y)),this.transformCameraUpdate&&s.push(y=>this.transformCameraUpdate(y)),!s.length)return;const p=n.clone();for(const y of s){const w=p.clone(),{center:T,zoom:R,roll:k,pitch:L,bearing:F,elevation:q}=y(w);T&&w.setCenter(T),q!==void 0&&w.setElevation(q),R!==void 0&&w.setZoom(R),k!==void 0&&w.setRoll(k),L!==void 0&&w.setPitch(L),F!==void 0&&w.setBearing(F),p.apply(w)}this.transform.apply(p)}_fireMoveEvents(n){this.fire(new u.l("move",n)),this._zooming&&this.fire(new u.l("zoom",n)),this._rotating&&this.fire(new u.l("rotate",n)),this._pitching&&this.fire(new u.l("pitch",n)),this._rolling&&this.fire(new u.l("roll",n))}_afterEase(n,s){if(this._easeId&&s&&this._easeId===s)return;delete this._easeId;const p=this._zooming,y=this._rotating,w=this._pitching,T=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,p&&this.fire(new u.l("zoomend",n)),y&&this.fire(new u.l("rotateend",n)),w&&this.fire(new u.l("pitchend",n)),T&&this.fire(new u.l("rollend",n)),this.fire(new u.l("moveend",n))}flyTo(n,s){if(!n.essential&&j.prefersReducedMotion){const vt=u.O(n,["center","zoom","bearing","pitch","roll","elevation"]);return this.jumpTo(vt,s)}this.stop(),n=u.e({offset:[0,0],speed:1.2,curve:1.42,easing:u.cf},n);const p=this._getTransformForUpdate(),y=p.bearing,w=p.pitch,T=p.roll,R=p.padding,k="bearing"in n?this._normalizeBearing(n.bearing,y):y,L="pitch"in n?+n.pitch:w,F="roll"in n?this._normalizeBearing(n.roll,T):T,q="padding"in n?n.padding:p.padding,H=u.P.convert(n.offset);let ee=p.centerPoint.add(H);const ne=p.screenPointToLocation(ee),ye=this.cameraHelper.handleFlyTo(p,{bearing:k,pitch:L,roll:F,padding:q,locationAtOffset:ne,offsetAsPoint:H,center:n.center,minZoom:n.minZoom,zoom:n.zoom});let ge=n.curve;const _e=Math.max(p.width,p.height),Ee=_e/ye.scaleOfZoom,De=ye.pixelPathLength;typeof ye.scaleOfMinZoom=="number"&&(ge=Math.sqrt(_e/ye.scaleOfMinZoom/De*2));const ze=ge*ge;function je(vt){const Jt=(Ee*Ee-_e*_e+(vt?-1:1)*ze*ze*De*De)/(2*(vt?Ee:_e)*ze*De);return Math.log(Math.sqrt(Jt*Jt+1)-Jt)}function Ue(vt){return(Math.exp(vt)-Math.exp(-vt))/2}function Fe(vt){return(Math.exp(vt)+Math.exp(-vt))/2}const it=je(!1);let Tt=function(vt){return Fe(it)/Fe(it+ge*vt)},gt=function(vt){return _e*((Fe(it)*(Ue(Jt=it+ge*vt)/Fe(Jt))-Ue(it))/ze)/De;var Jt},dt=(je(!0)-it)/ge;if(Math.abs(De)<2e-6||!isFinite(dt)){if(Math.abs(_e-Ee)<1e-6)return this.easeTo(n,s);const vt=Ee<_e?-1:1;dt=Math.abs(Math.log(Ee/_e))/ge,gt=()=>0,Tt=Jt=>Math.exp(vt*ge*Jt)}return n.duration="duration"in n?+n.duration:1e3*dt/("screenSpeed"in n?+n.screenSpeed/ge:+n.speed),n.maxDuration&&n.duration>n.maxDuration&&(n.duration=0),this._zooming=!0,this._rotating=y!==k,this._pitching=L!==w,this._rolling=F!==T,this._padding=!p.isPaddingEqual(q),this._prepareEase(s,!1),this.terrain&&this._prepareElevation(ye.targetCenter),this._ease(vt=>{const Jt=vt*dt,Yt=1/Tt(Jt),Dt=gt(Jt);this._rotating&&p.setBearing(u.B.number(y,k,vt)),this._pitching&&p.setPitch(u.B.number(w,L,vt)),this._rolling&&p.setRoll(u.B.number(T,F,vt)),this._padding&&(p.interpolatePadding(R,q,vt),ee=p.centerPoint.add(H)),ye.easeFunc(vt,Yt,Dt,ee),this.terrain&&!n.freezeElevation&&this._updateElevation(vt),this._applyUpdatedTransform(p),this._fireMoveEvents(s)},()=>{this.terrain&&n.freezeElevation&&this._finalizeElevation(),this._afterEase(s)},n),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(n,s){var p;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,s)}return n||(p=this.handlers)===null||p===void 0||p.stop(!1),this}_ease(n,s,p){p.animate===!1||p.duration===0?(n(1),s()):(this._easeStart=j.now(),this._easeOptions=p,this._onEaseFrame=n,this._onEaseEnd=s,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(n,s){n=u.aL(n,-180,180);const p=Math.abs(n-s);return Math.abs(n-360-s)<p&&(n-=360),Math.abs(n+360-s)<p&&(n+=360),n}queryTerrainElevation(n){return this.terrain?this.terrain.getElevationForLngLatZoom(u.Q.convert(n),this.transform.tileZoom):null}}const ss={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Nr{constructor(n=ss){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=s=>{!s||s.sourceDataType!=="metadata"&&s.sourceDataType!=="visibility"&&s.dataType!=="style"&&s.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=n}getDefaultPosition(){return"bottom-right"}onAdd(n){return this._map=n,this._compact=this.options.compact,this._container=$.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=$.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=$.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){$.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(n,s){const p=this._map._getUIString(`AttributionControl.${s}`);n.title=p,n.setAttribute("aria-label",p)}_updateAttributions(){if(!this._map.style)return;let n=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?n=n.concat(this.options.customAttribution.map(y=>typeof y!="string"?"":y)):typeof this.options.customAttribution=="string"&&n.push(this.options.customAttribution)),this._map.style.stylesheet){const y=this._map.style.stylesheet;this.styleOwner=y.owner,this.styleId=y.id}const s=this._map.style.sourceCaches;for(const y in s){const w=s[y];if(w.used||w.usedForTerrain){const T=w.getSource();T.attribution&&n.indexOf(T.attribution)<0&&n.push(T.attribution)}}n=n.filter(y=>String(y).trim()),n.sort((y,w)=>y.length-w.length),n=n.filter((y,w)=>{for(let T=w+1;T<n.length;T++)if(n[T].indexOf(y)>=0)return!1;return!0});const p=n.join(" | ");p!==this._attribHTML&&(this._attribHTML=p,n.length?(this._innerContainer.innerHTML=$.sanitize(p),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class ls{constructor(n={}){this._updateCompact=()=>{const s=this._container.children;if(s.length){const p=s[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&p.classList.add("maplibregl-compact"):p.classList.remove("maplibregl-compact")}},this.options=n}getDefaultPosition(){return"bottom-left"}onAdd(n){this._map=n,this._compact=this.options&&this.options.compact,this._container=$.create("div","maplibregl-ctrl");const s=$.create("a","maplibregl-ctrl-logo");return s.target="_blank",s.rel="noopener nofollow",s.href="https://maplibre.org/",s.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),s.setAttribute("rel","noopener nofollow"),this._container.appendChild(s),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){$.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class cu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(n){const s=++this._id;return this._queue.push({callback:n,id:s,cancelled:!1}),s}remove(n){const s=this._currentlyRunning,p=s?this._queue.concat(s):this._queue;for(const y of p)if(y.id===n)return void(y.cancelled=!0)}run(n=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const s=this._currentlyRunning=this._queue;this._queue=[];for(const p of s)if(!p.cancelled&&(p.callback(n),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var cd=u.aG([{name:"a_pos3d",type:"Int16",components:3}]);class cf extends u.E{constructor(n){super(),this._lastTilesetChange=j.now(),this.sourceCache=n,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=n._source.tileSize*2**this.deltaZoom,n.usedForTerrain=!0,n.tileSize=this.tileSize}destruct(){this.sourceCache.usedForTerrain=!1,this.sourceCache.tileSize=null}update(n,s){this.sourceCache.update(n,s),this._renderableTilesKeys=[];const p={};for(const y of Ve(n,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:s,calculateTileZoom:this.sourceCache._source.calculateTileZoom}))p[y.key]=!0,this._renderableTilesKeys.push(y.key),this._tiles[y.key]||(y.terrainRttPosMatrix32f=new Float64Array(16),u.bQ(y.terrainRttPosMatrix32f,0,u.Z,u.Z,0,0,1),this._tiles[y.key]=new Gn(y,this.tileSize),this._lastTilesetChange=j.now());for(const y in this._tiles)p[y]||delete this._tiles[y]}freeRtt(n){for(const s in this._tiles){const p=this._tiles[s];(!n||p.tileID.equals(n)||p.tileID.isChildOf(n)||n.isChildOf(p.tileID))&&(p.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map(n=>this.getTileByID(n))}getTileByID(n){return this._tiles[n]}getTerrainCoords(n,s){return s?this._getTerrainCoordsForTileRanges(n,s):this._getTerrainCoordsForRegularTile(n)}_getTerrainCoordsForRegularTile(n){const s={};for(const p of this._renderableTilesKeys){const y=this._tiles[p].tileID,w=n.clone(),T=u.b2();if(y.canonical.equals(n.canonical))u.bQ(T,0,u.Z,u.Z,0,0,1);else if(y.canonical.isChildOf(n.canonical)){const R=y.canonical.z-n.canonical.z,k=y.canonical.x-(y.canonical.x>>R<<R),L=y.canonical.y-(y.canonical.y>>R<<R),F=u.Z>>R;u.bQ(T,0,F,F,0,0,1),u.L(T,T,[-k*F,-L*F,0])}else{if(!n.canonical.isChildOf(y.canonical))continue;{const R=n.canonical.z-y.canonical.z,k=n.canonical.x-(n.canonical.x>>R<<R),L=n.canonical.y-(n.canonical.y>>R<<R),F=u.Z>>R;u.bQ(T,0,u.Z,u.Z,0,0,1),u.L(T,T,[k*F,L*F,0]),u.M(T,T,[1/2**R,1/2**R,0])}}w.terrainRttPosMatrix32f=new Float32Array(T),s[p]=w}return s}_getTerrainCoordsForTileRanges(n,s){const p={};for(const y of this._renderableTilesKeys){const w=this._tiles[y].tileID;if(!this._isWithinTileRanges(w,s))continue;const T=n.clone(),R=u.b2();if(w.canonical.z===n.canonical.z){const k=n.canonical.x-w.canonical.x,L=n.canonical.y-w.canonical.y;u.bQ(R,0,u.Z,u.Z,0,0,1),u.L(R,R,[k*u.Z,L*u.Z,0])}else if(w.canonical.z>n.canonical.z){const k=w.canonical.z-n.canonical.z,L=w.canonical.x-(w.canonical.x>>k<<k),F=w.canonical.y-(w.canonical.y>>k<<k),q=n.canonical.x-(w.canonical.x>>k),H=n.canonical.y-(w.canonical.y>>k),ee=u.Z>>k;u.bQ(R,0,ee,ee,0,0,1),u.L(R,R,[-L*ee+q*u.Z,-F*ee+H*u.Z,0])}else{const k=n.canonical.z-w.canonical.z,L=n.canonical.x-(n.canonical.x>>k<<k),F=n.canonical.y-(n.canonical.y>>k<<k),q=(n.canonical.x>>k)-w.canonical.x,H=(n.canonical.y>>k)-w.canonical.y,ee=u.Z<<k;u.bQ(R,0,ee,ee,0,0,1),u.L(R,R,[L*u.Z+q*ee,F*u.Z+H*ee,0])}T.terrainRttPosMatrix32f=new Float32Array(R),p[y]=T}return p}getSourceTile(n,s){const p=this.sourceCache._source;let y=n.overscaledZ-this.deltaZoom;if(y>p.maxzoom&&(y=p.maxzoom),y<p.minzoom)return null;this._sourceTileCache[n.key]||(this._sourceTileCache[n.key]=n.scaledTo(y).key);let w=this.sourceCache.getTileByID(this._sourceTileCache[n.key]);if((!w||!w.dem)&&s)for(;y>=p.minzoom&&(!w||!w.dem);)w=this.sourceCache.getTileByID(n.scaledTo(y--).key);return w}anyTilesAfterTime(n=Date.now()){return this._lastTilesetChange>=n}_isWithinTileRanges(n,s){return s[n.canonical.z]&&n.canonical.x>=s[n.canonical.z].minTileX&&n.canonical.x<=s[n.canonical.z].maxTileX&&n.canonical.y>=s[n.canonical.z].minTileY&&n.canonical.y<=s[n.canonical.z].maxTileY}}class uf{constructor(n,s,p){this._meshCache={},this.painter=n,this.sourceCache=new cf(s),this.options=p,this.exaggeration=typeof p.exaggeration=="number"?p.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(n,s,p,y=u.Z){var w;if(!(s>=0&&s<y&&p>=0&&p<y))return 0;const T=this.getTerrainData(n),R=(w=T.tile)===null||w===void 0?void 0:w.dem;if(!R)return 0;const k=u.cj([],[s/y*u.Z,p/y*u.Z],T.u_terrain_matrix),L=[k[0]*R.dim,k[1]*R.dim],F=Math.floor(L[0]),q=Math.floor(L[1]),H=L[0]-F,ee=L[1]-q;return R.get(F,q)*(1-H)*(1-ee)+R.get(F+1,q)*H*(1-ee)+R.get(F,q+1)*(1-H)*ee+R.get(F+1,q+1)*H*ee}getElevationForLngLatZoom(n,s){if(!u.ck(s,n.wrap()))return 0;const{tileID:p,mercatorX:y,mercatorY:w}=this._getOverscaledTileIDFromLngLatZoom(n,s);return this.getElevation(p,y%u.Z,w%u.Z,u.Z)}getElevation(n,s,p,y=u.Z){return this.getDEMElevation(n,s,p,y)*this.exaggeration}getTerrainData(n){if(!this._emptyDemTexture){const y=this.painter.context,w=new u.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new ke(y,w,y.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new ke(y,new u.R({width:1,height:1}),y.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=u.ad([])}const s=this.sourceCache.getSourceTile(n,!0);if(s&&s.dem&&(!s.demTexture||s.needsTerrainPrepare)){const y=this.painter.context;s.demTexture=this.painter.getTileTexture(s.dem.stride),s.demTexture?s.demTexture.update(s.dem.getPixels(),{premultiply:!1}):s.demTexture=new ke(y,s.dem.getPixels(),y.gl.RGBA,{premultiply:!1}),s.demTexture.bind(y.gl.NEAREST,y.gl.CLAMP_TO_EDGE),s.needsTerrainPrepare=!1}const p=s&&s+s.tileID.key+n.key;if(p&&!this._demMatrixCache[p]){const y=this.sourceCache.sourceCache._source.maxzoom;let w=n.canonical.z-s.tileID.canonical.z;n.overscaledZ>n.canonical.z&&(n.canonical.z>=y?w=n.canonical.z-y:u.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const T=n.canonical.x-(n.canonical.x>>w<<w),R=n.canonical.y-(n.canonical.y>>w<<w),k=u.cl(new Float64Array(16),[1/(u.Z<<w),1/(u.Z<<w),0]);u.L(k,k,[T*u.Z,R*u.Z,0]),this._demMatrixCache[n.key]={matrix:k,coord:n}}return{u_depth:2,u_terrain:3,u_terrain_dim:s&&s.dem&&s.dem.dim||1,u_terrain_matrix:p?this._demMatrixCache[n.key].matrix:this._emptyDemMatrix,u_terrain_unpack:s&&s.dem&&s.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(s&&s.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:s}}getFramebuffer(n){const s=this.painter,p=s.width/devicePixelRatio,y=s.height/devicePixelRatio;return!this._fbo||this._fbo.width===p&&this._fbo.height===y||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new ke(s.context,{width:p,height:y,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new ke(s.context,{width:p,height:y,data:null},s.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(s.context.gl.NEAREST,s.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=s.context.createFramebuffer(p,y,!0,!1),this._fbo.depthAttachment.set(s.context.createRenderbuffer(s.context.gl.DEPTH_COMPONENT16,p,y))),this._fbo.colorAttachment.set(n==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const n=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const s=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let w=0,T=0;w<this._coordsTextureSize;w++)for(let R=0;R<this._coordsTextureSize;R++,T+=4)s[T+0]=255&R,s[T+1]=255&w,s[T+2]=R>>8<<4|w>>8,s[T+3]=0;const p=new u.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(s.buffer)),y=new ke(n,p,n.gl.RGBA,{premultiply:!1});return y.bind(n.gl.NEAREST,n.gl.CLAMP_TO_EDGE),this._coordsTexture=y,y}pointCoordinate(n){this.painter.maybeDrawDepthAndCoords(!0);const s=new Uint8Array(4),p=this.painter.context,y=p.gl,w=Math.round(n.x*this.painter.pixelRatio/devicePixelRatio),T=Math.round(n.y*this.painter.pixelRatio/devicePixelRatio),R=Math.round(this.painter.height/devicePixelRatio);p.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),y.readPixels(w,R-T-1,1,1,y.RGBA,y.UNSIGNED_BYTE,s),p.bindFramebuffer.set(null);const k=s[0]+(s[2]>>4<<8),L=s[1]+((15&s[2])<<8),F=this.coordsIndex[255-s[3]],q=F&&this.sourceCache.getTileByID(F);if(!q)return null;const H=this._coordsTextureSize,ee=(1<<q.tileID.canonical.z)*H;return new u.$((q.tileID.canonical.x*H+k)/ee+q.tileID.wrap,(q.tileID.canonical.y*H+L)/ee,this.getElevation(q.tileID,k,L,H))}depthAtPoint(n){const s=new Uint8Array(4),p=this.painter.context,y=p.gl;return p.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),y.readPixels(n.x,this.painter.height/devicePixelRatio-n.y-1,1,1,y.RGBA,y.UNSIGNED_BYTE,s),p.bindFramebuffer.set(null),(s[0]/16777216+s[1]/65536+s[2]/256+s[3])/256}getTerrainMesh(n){var s;const p=((s=this.painter.style.projection)===null||s===void 0?void 0:s.transitionState)>0,y=p&&n.canonical.y===0,w=p&&n.canonical.y===(1<<n.canonical.z)-1,T=`m_${y?"n":""}_${w?"s":""}`;if(this._meshCache[T])return this._meshCache[T];const R=this.painter.context,k=new u.cm,L=new u.aK,F=this.meshSize,q=u.Z/F,H=F*F;for(let Fe=0;Fe<=F;Fe++)for(let it=0;it<=F;it++)k.emplaceBack(it*q,Fe*q,0);for(let Fe=0;Fe<H;Fe+=F+1)for(let it=0;it<F;it++)L.emplaceBack(it+Fe,F+it+Fe+1,F+it+Fe+2),L.emplaceBack(it+Fe,F+it+Fe+2,it+Fe+1);const ee=k.length,ne=ee+(F+1),ye=(F+1)*F,ge=y?u.b9:0,_e=y?0:1,Ee=w?u.ba:u.Z,De=w?0:1;for(let Fe=0;Fe<=F;Fe++)k.emplaceBack(Fe*q,ge,_e);for(let Fe=0;Fe<=F;Fe++)k.emplaceBack(Fe*q,Ee,De);for(let Fe=0;Fe<F;Fe++)L.emplaceBack(ye+Fe,ne+Fe,ne+Fe+1),L.emplaceBack(ye+Fe,ne+Fe+1,ye+Fe+1),L.emplaceBack(0+Fe,ee+Fe+1,ee+Fe),L.emplaceBack(0+Fe,0+Fe+1,ee+Fe+1);const ze=k.length,je=ze+2*(F+1);for(const Fe of[0,1])for(let it=0;it<=F;it++)for(const Tt of[0,1])k.emplaceBack(Fe*u.Z,it*q,Tt);for(let Fe=0;Fe<2*F;Fe+=2)L.emplaceBack(ze+Fe,ze+Fe+1,ze+Fe+3),L.emplaceBack(ze+Fe,ze+Fe+3,ze+Fe+2),L.emplaceBack(je+Fe,je+Fe+3,je+Fe+1),L.emplaceBack(je+Fe,je+Fe+2,je+Fe+3);const Ue=new jl(R.createVertexBuffer(k,cd.members),R.createIndexBuffer(L),u.aJ.simpleSegment(0,0,k.length,L.length));return this._meshCache[T]=Ue,Ue}getMeshFrameDelta(n){return 2*Math.PI*u.bu/Math.pow(2,Math.max(n,0))/5}getMinTileElevationForLngLatZoom(n,s){var p;const{tileID:y}=this._getOverscaledTileIDFromLngLatZoom(n,s);return(p=this.getMinMaxElevation(y).minElevation)!==null&&p!==void 0?p:0}getMinMaxElevation(n){const s=this.getTerrainData(n).tile,p={minElevation:null,maxElevation:null};return s&&s.dem&&(p.minElevation=s.dem.min*this.exaggeration,p.maxElevation=s.dem.max*this.exaggeration),p}_getOverscaledTileIDFromLngLatZoom(n,s){const p=u.$.fromLngLat(n.wrap()),y=(1<<s)*u.Z,w=p.x*y,T=p.y*y,R=Math.floor(w/u.Z),k=Math.floor(T/u.Z);return{tileID:new u.Y(s,0,s,R,k),mercatorX:w,mercatorY:T}}}class gl{constructor(n,s,p){this._context=n,this._size=s,this._tileSize=p,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const n of this._objects)n.texture.destroy(),n.fbo.destroy()}_createObject(n){const s=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),p=new ke(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return p.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),s.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),s.colorAttachment.set(p.texture),{id:n,fbo:s,texture:p,stamp:-1,inUse:!1}}getObjectForId(n){return this._objects[n]}useObject(n){n.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter(s=>n.id!==s),this._recentlyUsed.push(n.id)}stampObject(n){n.stamp=++this._stamp}getOrCreateFreeObject(){for(const s of this._recentlyUsed)if(!this._objects[s].inUse)return this._objects[s];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const n=this._createObject(this._objects.length);return this._objects.push(n),n}freeObject(n){n.inUse=!1}freeAllObjects(){for(const n of this._objects)this.freeObject(n)}isFull(){return!(this._objects.length<this._size)&&this._objects.some(n=>!n.inUse)===!1}}const An={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0};class Sr{constructor(n,s){this.painter=n,this.terrain=s,this.pool=new gl(n.context,30,s.sourceCache.tileSize*s.qualityFactor)}destruct(){this.pool.destruct()}getTexture(n){return this.pool.getObjectForId(n.rtt[this._stacks.length-1].id).texture}prepareForRender(n,s){this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.sourceCache.getRenderableTiles(),this._renderableLayerIds=n._order.filter(p=>!n._layers[p].isHidden(s)),this._coordsAscending={};for(const p in n.sourceCaches){this._coordsAscending[p]={};const y=n.sourceCaches[p].getVisibleCoordinates(),w=n.sourceCaches[p].getSource(),T=w instanceof bn?w.terrainTileRanges:null;for(const R of y){const k=this.terrain.sourceCache.getTerrainCoords(R,T);for(const L in k)this._coordsAscending[p][L]||(this._coordsAscending[p][L]=[]),this._coordsAscending[p][L].push(k[L])}}this._coordsAscendingStr={};for(const p of n._order){const y=n._layers[p],w=y.source;if(An[y.type]&&!this._coordsAscendingStr[w]){this._coordsAscendingStr[w]={};for(const T in this._coordsAscending[w])this._coordsAscendingStr[w][T]=this._coordsAscending[w][T].map(R=>R.key).sort().join()}}for(const p of this._renderableTiles)for(const y in this._coordsAscendingStr){const w=this._coordsAscendingStr[y][p.tileID.key];w&&w!==p.rttCoords[y]&&(p.rtt=[])}}renderLayer(n,s){if(n.isHidden(this.painter.transform.zoom))return!1;const p=Object.assign(Object.assign({},s),{isRenderingToTexture:!0}),y=n.type,w=this.painter,T=this._renderableLayerIds[this._renderableLayerIds.length-1]===n.id;if(An[y]&&(this._prevType&&An[this._prevType]||this._stacks.push([]),this._prevType=y,this._stacks[this._stacks.length-1].push(n.id),!T))return!0;if(An[this._prevType]||An[y]&&T){this._prevType=y;const R=this._stacks.length-1,k=this._stacks[R]||[];for(const L of this._renderableTiles){if(this.pool.isFull()&&(As(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(L),L.rtt[R]){const q=this.pool.getObjectForId(L.rtt[R].id);if(q.stamp===L.rtt[R].stamp){this.pool.useObject(q);continue}}const F=this.pool.getOrCreateFreeObject();this.pool.useObject(F),this.pool.stampObject(F),L.rtt[R]={id:F.id,stamp:F.stamp},w.context.bindFramebuffer.set(F.fbo.framebuffer),w.context.clear({color:u.b7.transparent,stencil:0}),w.currentStencilSource=void 0;for(let q=0;q<k.length;q++){const H=w.style._layers[k[q]],ee=H.source?this._coordsAscending[H.source][L.tileID.key]:[L.tileID];w.context.viewport.set([0,0,F.fbo.width,F.fbo.height]),w._renderTileClippingMasks(H,ee,!0),w.renderLayer(w,w.style.sourceCaches[H.source],H,ee,p),H.source&&(L.rttCoords[H.source]=this._coordsAscendingStr[H.source][L.tileID.key])}}return As(this.painter,this.terrain,this._rttTiles,p),this._rttTiles=[],this.pool.freeAllObjects(),An[y]}return!1}}const nn={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},xn=E,cs={hash:!1,interactive:!0,bearingSnap:7,attributionControl:ss,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:u.a.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0},ks={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class uu{constructor(n,s,p=!1){this.mousedown=w=>{this.startMove(w,$.mousePos(this.element,w)),$.addEventListener(window,"mousemove",this.mousemove),$.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=w=>{this.move(w,$.mousePos(this.element,w))},this.mouseup=w=>{this._rotatePitchHanlder.dragEnd(w),this.offTemp()},this.touchstart=w=>{w.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=$.touchPos(this.element,w.targetTouches)[0],this.startMove(w,this._startPos),$.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.addEventListener(window,"touchend",this.touchend))},this.touchmove=w=>{w.targetTouches.length!==1?this.reset():(this._lastPos=$.touchPos(this.element,w.targetTouches)[0],this.move(w,this._lastPos))},this.touchend=w=>{w.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHanlder.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=s;const y=new su;this._rotatePitchHanlder=new Bi({clickTolerance:3,move:(w,T)=>{const R=s.getBoundingClientRect(),k=new u.P((R.bottom-R.top)/2,(R.right-R.left)/2);return{bearingDelta:u.ce(new u.P(w.x,T.y),T,k),pitchDelta:p?-.5*(T.y-w.y):void 0}},moveStateManager:y,enable:!0,assignEvents:()=>{}}),this.map=n,$.addEventListener(s,"mousedown",this.mousedown),$.addEventListener(s,"touchstart",this.touchstart,{passive:!1}),$.addEventListener(s,"touchcancel",this.reset)}startMove(n,s){this._rotatePitchHanlder.dragStart(n,s),$.disableDrag()}move(n,s){const p=this.map,{bearingDelta:y,pitchDelta:w}=this._rotatePitchHanlder.dragMove(n,s)||{};y&&p.setBearing(p.getBearing()+y),w&&p.setPitch(p.getPitch()+w)}off(){const n=this.element;$.removeEventListener(n,"mousedown",this.mousedown),$.removeEventListener(n,"touchstart",this.touchstart,{passive:!1}),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend),$.removeEventListener(n,"touchcancel",this.reset),this.offTemp()}offTemp(){$.enableDrag(),$.removeEventListener(window,"mousemove",this.mousemove),$.removeEventListener(window,"mouseup",this.mouseup),$.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),$.removeEventListener(window,"touchend",this.touchend)}}let ii;function yl(b,n,s,p=!1){if(p||!s.getCoveringTilesDetailsProvider().allowWorldCopies())return b==null?void 0:b.wrap();const y=new u.Q(b.lng,b.lat);if(b=new u.Q(b.lng,b.lat),n){const w=new u.Q(b.lng-360,b.lat),T=new u.Q(b.lng+360,b.lat),R=s.locationToScreenPoint(b).distSqr(n);s.locationToScreenPoint(w).distSqr(n)<R?b=w:s.locationToScreenPoint(T).distSqr(n)<R&&(b=T)}for(;Math.abs(b.lng-s.center.lng)>180;){const w=s.locationToScreenPoint(b);if(w.x>=0&&w.y>=0&&w.x<=s.width&&w.y<=s.height)break;b.lng>s.center.lng?b.lng-=360:b.lng+=360}return b.lng!==y.lng&&s.isPointOnMapSurface(s.locationToScreenPoint(b))?b:y}const xo={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function bi(b,n,s){const p=b.classList;for(const y in xo)p.remove(`maplibregl-${s}-anchor-${y}`);p.add(`maplibregl-${s}-anchor-${n}`)}class zs extends u.E{constructor(n){if(super(),this._onKeyPress=s=>{const p=s.code,y=s.charCode||s.keyCode;p!=="Space"&&p!=="Enter"&&y!==32&&y!==13||this.togglePopup()},this._onMapClick=s=>{const p=s.originalEvent.target,y=this._element;this._popup&&(p===y||y.contains(p))&&this.togglePopup()},this._update=s=>{if(!this._map)return;const p=this._map.loaded()&&!this._map.isMoving();((s==null?void 0:s.type)==="terrain"||(s==null?void 0:s.type)==="render"&&!p)&&this._map.once("render",this._update),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let y="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?y=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(y=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let w="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?w="rotateX(0deg)":this._pitchAlignment==="map"&&(w=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||s&&s.type!=="moveend"||(this._pos=this._pos.round()),$.setTransform(this._element,`${xo[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${w} ${y}`),j.frameAsync(new AbortController).then(()=>{this._updateOpacity(s&&s.type==="moveend")}).catch(()=>{})},this._onMove=s=>{if(!this._isDragging){const p=this._clickTolerance||this._map._clickTolerance;this._isDragging=s.point.dist(this._pointerdownPos)>=p}this._isDragging&&(this._pos=s.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new u.l("dragstart"))),this.fire(new u.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new u.l("dragend")),this._state="inactive"},this._addDragHandler=s=>{this._element.contains(s.originalEvent.target)&&(s.preventDefault(),this._positionDelta=s.point.sub(this._pos).add(this._offset),this._pointerdownPos=s.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=n&&n.anchor||"center",this._color=n&&n.color||"#3FB1CE",this._scale=n&&n.scale||1,this._draggable=n&&n.draggable||!1,this._clickTolerance=n&&n.clickTolerance||0,this._subpixelPositioning=n&&n.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=n&&n.rotation||0,this._rotationAlignment=n&&n.rotationAlignment||"auto",this._pitchAlignment=n&&n.pitchAlignment&&n.pitchAlignment!=="auto"?n.pitchAlignment:this._rotationAlignment,this.setOpacity(n==null?void 0:n.opacity,n==null?void 0:n.opacityWhenCovered),n&&n.element)this._element=n.element,this._offset=u.P.convert(n&&n.offset||[0,0]);else{this._defaultMarker=!0,this._element=$.create("div");const s=$.createNS("http://www.w3.org/2000/svg","svg"),p=41,y=27;s.setAttributeNS(null,"display","block"),s.setAttributeNS(null,"height",`${p}px`),s.setAttributeNS(null,"width",`${y}px`),s.setAttributeNS(null,"viewBox",`0 0 ${y} ${p}`);const w=$.createNS("http://www.w3.org/2000/svg","g");w.setAttributeNS(null,"stroke","none"),w.setAttributeNS(null,"stroke-width","1"),w.setAttributeNS(null,"fill","none"),w.setAttributeNS(null,"fill-rule","evenodd");const T=$.createNS("http://www.w3.org/2000/svg","g");T.setAttributeNS(null,"fill-rule","nonzero");const R=$.createNS("http://www.w3.org/2000/svg","g");R.setAttributeNS(null,"transform","translate(3.0, 29.0)"),R.setAttributeNS(null,"fill","#000000");const k=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const _e of k){const Ee=$.createNS("http://www.w3.org/2000/svg","ellipse");Ee.setAttributeNS(null,"opacity","0.04"),Ee.setAttributeNS(null,"cx","10.5"),Ee.setAttributeNS(null,"cy","5.80029008"),Ee.setAttributeNS(null,"rx",_e.rx),Ee.setAttributeNS(null,"ry",_e.ry),R.appendChild(Ee)}const L=$.createNS("http://www.w3.org/2000/svg","g");L.setAttributeNS(null,"fill",this._color);const F=$.createNS("http://www.w3.org/2000/svg","path");F.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),L.appendChild(F);const q=$.createNS("http://www.w3.org/2000/svg","g");q.setAttributeNS(null,"opacity","0.25"),q.setAttributeNS(null,"fill","#000000");const H=$.createNS("http://www.w3.org/2000/svg","path");H.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),q.appendChild(H);const ee=$.createNS("http://www.w3.org/2000/svg","g");ee.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ee.setAttributeNS(null,"fill","#FFFFFF");const ne=$.createNS("http://www.w3.org/2000/svg","g");ne.setAttributeNS(null,"transform","translate(8.0, 8.0)");const ye=$.createNS("http://www.w3.org/2000/svg","circle");ye.setAttributeNS(null,"fill","#000000"),ye.setAttributeNS(null,"opacity","0.25"),ye.setAttributeNS(null,"cx","5.5"),ye.setAttributeNS(null,"cy","5.5"),ye.setAttributeNS(null,"r","5.4999962");const ge=$.createNS("http://www.w3.org/2000/svg","circle");ge.setAttributeNS(null,"fill","#FFFFFF"),ge.setAttributeNS(null,"cx","5.5"),ge.setAttributeNS(null,"cy","5.5"),ge.setAttributeNS(null,"r","5.4999962"),ne.appendChild(ye),ne.appendChild(ge),T.appendChild(R),T.appendChild(L),T.appendChild(q),T.appendChild(ee),T.appendChild(ne),s.appendChild(T),s.setAttributeNS(null,"height",p*this._scale+"px"),s.setAttributeNS(null,"width",y*this._scale+"px"),this._element.appendChild(s),this._offset=u.P.convert(n&&n.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",s=>{s.preventDefault()}),this._element.addEventListener("mousedown",s=>{s.preventDefault()}),bi(this._element,this._anchor,"marker"),n&&n.className)for(const s of n.className.split(" "))this._element.classList.add(s);this._popup=null}addTo(n){return this.remove(),this._map=n,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",n._getUIString("Marker.Title")),n.getCanvasContainer().appendChild(this._element),n.on("move",this._update),n.on("moveend",this._update),n.on("terrain",this._update),n.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),$.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(n){return this._lngLat=u.Q.convert(n),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(n){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),n){if(!("offset"in n.options)){const y=Math.abs(13.5)/Math.SQRT2;n.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[y,-1*(38.1-13.5+y)],"bottom-right":[-y,-1*(38.1-13.5+y)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=n,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(n){return this._subpixelPositioning=n,this}getPopup(){return this._popup}togglePopup(){const n=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:n?(n.isOpen()?n.remove():(n.setLngLat(this._lngLat),n.addTo(this._map)),this):this}_updateOpacity(n=!1){var s,p;const y=(s=this._map)===null||s===void 0?void 0:s.terrain,w=this._map.transform.isLocationOccluded(this._lngLat);if(!y||w){const ee=w?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ee&&(this._element.style.opacity=ee))}if(n)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout(()=>{this._opacityTimeout=null},100)}const T=this._map,R=T.terrain.depthAtPoint(this._pos),k=T.terrain.getElevationForLngLatZoom(this._lngLat,T.transform.tileZoom);if(T.transform.lngLatToCameraDepth(this._lngLat,k)-R<.006)return void(this._element.style.opacity=this._opacity);const L=-this._offset.y/T.transform.pixelsPerMeter,F=Math.sin(T.getPitch()*Math.PI/180)*L,q=T.terrain.depthAtPoint(new u.P(this._pos.x,this._pos.y-this._offset.y)),H=T.transform.lngLatToCameraDepth(this._lngLat,k+F)-q>.006;!((p=this._popup)===null||p===void 0)&&p.isOpen()&&H&&this._popup.remove(),this._element.style.opacity=H?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(n){return this._offset=u.P.convert(n),this._update(),this}addClassName(n){this._element.classList.add(n)}removeClassName(n){this._element.classList.remove(n)}toggleClassName(n){return this._element.classList.toggle(n)}setDraggable(n){return this._draggable=!!n,this._map&&(n?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(n){return this._rotation=n||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(n){return this._rotationAlignment=n||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(n){return this._pitchAlignment=n&&n!=="auto"?n:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(n,s){return(this._opacity===void 0||n===void 0&&s===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),n!==void 0&&(this._opacity=n),s!==void 0&&(this._opacityWhenCovered=s),this._map&&this._updateOpacity(!0),this}}const Kr={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let Qr=0,hc=!1;const uh={maxWidth:100,unit:"metric"};function fc(b,n,s){const p=s&&s.maxWidth||100,y=b._container.clientHeight/2,w=b._container.clientWidth/2,T=b.unproject([w-p/2,y]),R=b.unproject([w+p/2,y]),k=Math.round(b.project(R).x-b.project(T).x),L=Math.min(p,k,b._container.clientWidth),F=T.distanceTo(R);if(s&&s.unit==="imperial"){const q=3.2808*F;q>5280?Ds(n,L,q/5280,b._getUIString("ScaleControl.Miles")):Ds(n,L,q,b._getUIString("ScaleControl.Feet"))}else s&&s.unit==="nautical"?Ds(n,L,F/1852,b._getUIString("ScaleControl.NauticalMiles")):F>=1e3?Ds(n,L,F/1e3,b._getUIString("ScaleControl.Kilometers")):Ds(n,L,F,b._getUIString("ScaleControl.Meters"))}function Ds(b,n,s,p){const y=function(w){const T=Math.pow(10,`${Math.floor(w)}`.length-1);let R=w/T;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:R>=1?1:function(k){const L=Math.pow(10,Math.ceil(-Math.log(k)/Math.LN10));return Math.round(k*L)/L}(R),T*R}(s);b.style.width=n*(y/s)+"px",b.innerHTML=`${y}&nbsp;${p}`}const hh={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0},fa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Jr(b){if(b){if(typeof b=="number"){const n=Math.round(Math.abs(b)/Math.SQRT2);return{center:new u.P(0,0),top:new u.P(0,b),"top-left":new u.P(n,n),"top-right":new u.P(-n,n),bottom:new u.P(0,-b),"bottom-left":new u.P(n,-n),"bottom-right":new u.P(-n,-n),left:new u.P(b,0),right:new u.P(-b,0)}}if(b instanceof u.P||Array.isArray(b)){const n=u.P.convert(b);return{center:n,top:n,"top-left":n,"top-right":n,bottom:n,"bottom-left":n,"bottom-right":n,left:n,right:n}}return{center:u.P.convert(b.center||[0,0]),top:u.P.convert(b.top||[0,0]),"top-left":u.P.convert(b["top-left"]||[0,0]),"top-right":u.P.convert(b["top-right"]||[0,0]),bottom:u.P.convert(b.bottom||[0,0]),"bottom-left":u.P.convert(b["bottom-left"]||[0,0]),"bottom-right":u.P.convert(b["bottom-right"]||[0,0]),left:u.P.convert(b.left||[0,0]),right:u.P.convert(b.right||[0,0])}}return Jr(new u.P(0,0))}const fh=E;g.AJAXError=u.cq,g.Event=u.l,g.Evented=u.E,g.LngLat=u.Q,g.MercatorCoordinate=u.$,g.Point=u.P,g.addProtocol=u.cr,g.config=u.a,g.removeProtocol=u.cs,g.AttributionControl=Nr,g.BoxZoomHandler=sd,g.CanvasSource=En,g.CooperativeGesturesHandler=Bo,g.DoubleClickZoomHandler=sh,g.DragPanHandler=sf,g.DragRotateHandler=lf,g.EdgeInsets=$l,g.FullscreenControl=class extends u.E{constructor(b={}){super(),this._onFullscreenChange=()=>{var n;let s=window.document.fullscreenElement||window.document.mozFullScreenElement||window.document.webkitFullscreenElement||window.document.msFullscreenElement;for(;!((n=s==null?void 0:s.shadowRoot)===null||n===void 0)&&n.fullscreenElement;)s=s.shadowRoot.fullscreenElement;s===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,b&&b.container&&(b.container instanceof HTMLElement?this._container=b.container:u.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(b){return this._map=b,this._container||(this._container=this._map.getContainer()),this._controlContainer=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){$.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const b=this._fullscreenButton=$.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);$.create("span","maplibregl-ctrl-icon",b).setAttribute("aria-hidden","true"),b.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const b=this._getTitle();this._fullscreenButton.setAttribute("aria-label",b),this._fullscreenButton.title=b}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new u.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new u.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){window.document.exitFullscreen?window.document.exitFullscreen():window.document.mozCancelFullScreen?window.document.mozCancelFullScreen():window.document.msExitFullscreen?window.document.msExitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},g.GeoJSONSource=Sn,g.GeolocateControl=class extends u.E{constructor(b){super(),this._onSuccess=n=>{if(this._map){if(this._isOutOfMapMaxBounds(n))return this._setErrorState(),this.fire(new u.l("outofmaxbounds",n)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=n,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(n),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(n),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new u.l("geolocate",n)),this._finish()}},this._updateCamera=n=>{const s=new u.Q(n.coords.longitude,n.coords.latitude),p=n.coords.accuracy,y=this._map.getBearing(),w=u.e({bearing:y},this.options.fitBoundsOptions),T=Kt.fromLngLat(s,p);this._map.fitBounds(T,w,{geolocateSource:!0})},this._updateMarker=n=>{if(n){const s=new u.Q(n.coords.longitude,n.coords.latitude);this._accuracyCircleMarker.setLngLat(s).addTo(this._map),this._userLocationDotMarker.setLngLat(s).addTo(this._map),this._accuracy=n.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onZoom=()=>{this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},this._onError=n=>{if(this._map){if(n.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(n.code===3&&hc)return;this.options.trackUserLocation&&this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new u.l("error",n)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",n=>n.preventDefault()),this._geolocateButton=$.create("button","maplibregl-ctrl-geolocate",this._container),$.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=n=>{if(this._map){if(n===!1){u.w("Geolocation support is not available so the GeolocateControl will be disabled.");const s=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}else{const s=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=s,this._geolocateButton.setAttribute("aria-label",s)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=$.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new zs({element:this._dotElement}),this._circleElement=$.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new zs({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",()=>this.trigger()),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",s=>{s.geolocateSource||this._watchState!=="ACTIVE_LOCK"||s.originalEvent&&s.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new u.l("trackuserlocationend")),this.fire(new u.l("userlocationlostfocus")))})}},this.options=u.e({},Kr,b)}onAdd(b){return this._map=b,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),function(){return u._(this,arguments,void 0,function*(n=!1){if(ii!==void 0&&!n)return ii;if(window.navigator.permissions===void 0)return ii=!!window.navigator.geolocation,ii;try{ii=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{ii=!!window.navigator.geolocation}return ii})}().then(n=>this._finishSetupUI(n)),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),$.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Qr=0,hc=!1}_isOutOfMapMaxBounds(b){const n=this._map.getMaxBounds(),s=b.coords;return n&&(s.longitude<n.getWest()||s.longitude>n.getEast()||s.latitude<n.getSouth()||s.latitude>n.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadius(){const b=this._map.getBounds(),n=b.getSouthEast(),s=b.getNorthEast(),p=n.distanceTo(s),y=Math.ceil(this._accuracy/(p/this._map._container.clientHeight)*2);this._circleElement.style.width=`${y}px`,this._circleElement.style.height=`${y}px`}trigger(){if(!this._setup)return u.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new u.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Qr--,hc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new u.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new u.l("trackuserlocationstart")),this.fire(new u.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let b;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),Qr++,Qr>1?(b={maximumAge:6e5,timeout:0},hc=!0):(b=this.options.positionOptions,hc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,b)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},g.GlobeControl=class{constructor(){this._toggleProjection=()=>{var b;const n=(b=this._map.getProjection())===null||b===void 0?void 0:b.type;this._map.setProjection(n!=="mercator"&&n?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var b;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((b=this._map.getProjection())===null||b===void 0?void 0:b.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(b){return this._map=b,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=$.create("button","maplibregl-ctrl-globe",this._container),$.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._container}onRemove(){$.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},g.Hash=ef,g.ImageSource=bn,g.KeyboardHandler=uc,g.LngLatBounds=Kt,g.LogoControl=ls,g.Map=class extends ch{constructor(b){var n,s;u.cn.mark(u.co.create);const p=Object.assign(Object.assign(Object.assign({},cs),b),{canvasContextAttributes:Object.assign(Object.assign({},cs.canvasContextAttributes),b.canvasContextAttributes)});if(p.minZoom!=null&&p.maxZoom!=null&&p.minZoom>p.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(p.minPitch!=null&&p.maxPitch!=null&&p.minPitch>p.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(p.minPitch!=null&&p.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(p.maxPitch!=null&&p.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const y=new Wo,w=new mo;if(p.minZoom!==void 0&&y.setMinZoom(p.minZoom),p.maxZoom!==void 0&&y.setMaxZoom(p.maxZoom),p.minPitch!==void 0&&y.setMinPitch(p.minPitch),p.maxPitch!==void 0&&y.setMaxPitch(p.maxPitch),p.renderWorldCopies!==void 0&&y.setRenderWorldCopies(p.renderWorldCopies),super(y,w,{bearingSnap:p.bearingSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new cu,this._controls=[],this._mapId=u.a4(),this._contextLost=R=>{R.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.fire(new u.l("webglcontextlost",{originalEvent:R}))},this._contextRestored=R=>{this._setupPainter(),this.resize(),this._update(),this.fire(new u.l("webglcontextrestored",{originalEvent:R}))},this._onMapScroll=R=>{if(R.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=p.interactive,this._maxTileCacheSize=p.maxTileCacheSize,this._maxTileCacheZoomLevels=p.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},p.canvasContextAttributes),this._trackResize=p.trackResize===!0,this._bearingSnap=p.bearingSnap,this._centerClampedToGround=p.centerClampedToGround,this._refreshExpiredTiles=p.refreshExpiredTiles===!0,this._fadeDuration=p.fadeDuration,this._crossSourceCollisions=p.crossSourceCollisions===!0,this._collectResourceTiming=p.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},nn),p.locale),this._clickTolerance=p.clickTolerance,this._overridePixelRatio=p.pixelRatio,this._maxCanvasSize=p.maxCanvasSize,this.transformCameraUpdate=p.transformCameraUpdate,this.cancelPendingTileRequestsWhileZooming=p.cancelPendingTileRequestsWhileZooming===!0,this._imageQueueHandle=he.addThrottleControl(()=>this.isMoving()),this._requestManager=new ae(p.transformRequest),typeof p.container=="string"){if(this._container=document.getElementById(p.container),!this._container)throw new Error(`Container '${p.container}' not found.`)}else{if(!(p.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=p.container}if(p.maxBounds&&this.setMaxBounds(p.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this.on("terrain",()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)}),this.once("idle",()=>{this._idleTriggered=!0}),typeof window<"u"){addEventListener("online",this._onWindowOnline,!1);let R=!1;const k=Ps(L=>{this._trackResize&&!this._removed&&(this.resize(L),this.redraw())},50);this._resizeObserver=new ResizeObserver(L=>{R?k(L):R=!0}),this._resizeObserver.observe(this._container)}this.handlers=new lh(this,p),this._hash=p.hash&&new ef(typeof p.hash=="string"&&p.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:p.center,elevation:p.elevation,zoom:p.zoom,bearing:p.bearing,pitch:p.pitch,roll:p.roll}),p.bounds&&(this.resize(),this.fitBounds(p.bounds,u.e({},p.fitBoundsOptions,{duration:0}))));const T=typeof p.style=="string"||((s=(n=p.style)===null||n===void 0?void 0:n.projection)===null||s===void 0?void 0:s.type)!=="globe";this.resize(null,T),this._localIdeographFontFamily=p.localIdeographFontFamily,this._validateStyle=p.validateStyle,p.style&&this.setStyle(p.style,{localIdeographFontFamily:p.localIdeographFontFamily}),p.attributionControl&&this.addControl(new Nr(typeof p.attributionControl=="boolean"?void 0:p.attributionControl)),p.maplibreLogo&&this.addControl(new ls,p.logoPosition),this.on("style.load",()=>{if(T||this._resizeTransform(),this.transform.unmodified){const R=u.O(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(R)}}),this.on("data",R=>{this._update(R.dataType==="style"),this.fire(new u.l(`${R.dataType}data`,R))}),this.on("dataloading",R=>{this.fire(new u.l(`${R.dataType}dataloading`,R))}),this.on("dataabort",R=>{this.fire(new u.l("sourcedataabort",R))})}_getMapId(){return this._mapId}addControl(b,n){if(n===void 0&&(n=b.getDefaultPosition?b.getDefaultPosition():"top-right"),!b||!b.onAdd)return this.fire(new u.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const s=b.onAdd(this);this._controls.push(b);const p=this._controlPositions[n];return n.indexOf("bottom")!==-1?p.insertBefore(s,p.firstChild):p.appendChild(s),this}removeControl(b){if(!b||!b.onRemove)return this.fire(new u.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const n=this._controls.indexOf(b);return n>-1&&this._controls.splice(n,1),b.onRemove(this),this}hasControl(b){return this._controls.indexOf(b)>-1}calculateCameraOptionsFromTo(b,n,s,p){return p==null&&this.terrain&&(p=this.terrain.getElevationForLngLatZoom(s,this.transform.tileZoom)),super.calculateCameraOptionsFromTo(b,n,s,p)}resize(b,n=!0){const[s,p]=this._containerDimensions(),y=this._getClampedPixelRatio(s,p);if(this._resizeCanvas(s,p,y),this.painter.resize(s,p,y),this.painter.overLimit()){const T=this.painter.context.gl;this._maxCanvasSize=[T.drawingBufferWidth,T.drawingBufferHeight];const R=this._getClampedPixelRatio(s,p);this._resizeCanvas(s,p,R),this.painter.resize(s,p,R)}this._resizeTransform(n);const w=!this._moving;return w&&(this.stop(),this.fire(new u.l("movestart",b)).fire(new u.l("move",b))),this.fire(new u.l("resize",b)),w&&this.fire(new u.l("moveend",b)),this}_resizeTransform(b=!0){var n;const[s,p]=this._containerDimensions();this.transform.resize(s,p,b),(n=this._requestedCameraState)===null||n===void 0||n.resize(s,p,b)}_getClampedPixelRatio(b,n){const{0:s,1:p}=this._maxCanvasSize,y=this.getPixelRatio(),w=b*y,T=n*y;return Math.min(w>s?s/w:1,T>p?p/T:1)*y}getPixelRatio(){var b;return(b=this._overridePixelRatio)!==null&&b!==void 0?b:devicePixelRatio}setPixelRatio(b){this._overridePixelRatio=b,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(b){return this.transform.setMaxBounds(Kt.convert(b)),this._update()}setMinZoom(b){if((b=b??-2)>=-2&&b<=this.transform.maxZoom)return this.transform.setMinZoom(b),this._update(),this.getZoom()<b&&this.setZoom(b),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(b){if((b=b??22)>=this.transform.minZoom)return this.transform.setMaxZoom(b),this._update(),this.getZoom()>b&&this.setZoom(b),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(b){if((b=b??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(b>=0&&b<=this.transform.maxPitch)return this.transform.setMinPitch(b),this._update(),this.getPitch()<b&&this.setPitch(b),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(b){if((b=b??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(b>=this.transform.minPitch)return this.transform.setMaxPitch(b),this._update(),this.getPitch()>b&&this.setPitch(b),this;throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(b){return this.transform.setRenderWorldCopies(b),this._update()}project(b){return this.transform.locationToScreenPoint(u.Q.convert(b),this.style&&this.terrain)}unproject(b){return this.transform.screenPointToLocation(u.P.convert(b),this.terrain)}isMoving(){var b;return this._moving||((b=this.handlers)===null||b===void 0?void 0:b.isMoving())}isZooming(){var b;return this._zooming||((b=this.handlers)===null||b===void 0?void 0:b.isZooming())}isRotating(){var b;return this._rotating||((b=this.handlers)===null||b===void 0?void 0:b.isRotating())}_createDelegatedListener(b,n,s){if(b==="mouseenter"||b==="mouseover"){let p=!1;return{layers:n,listener:s,delegates:{mousemove:w=>{const T=n.filter(k=>this.getLayer(k)),R=T.length!==0?this.queryRenderedFeatures(w.point,{layers:T}):[];R.length?p||(p=!0,s.call(this,new vi(b,this,w.originalEvent,{features:R}))):p=!1},mouseout:()=>{p=!1}}}}if(b==="mouseleave"||b==="mouseout"){let p=!1;return{layers:n,listener:s,delegates:{mousemove:T=>{const R=n.filter(k=>this.getLayer(k));(R.length!==0?this.queryRenderedFeatures(T.point,{layers:R}):[]).length?p=!0:p&&(p=!1,s.call(this,new vi(b,this,T.originalEvent)))},mouseout:T=>{p&&(p=!1,s.call(this,new vi(b,this,T.originalEvent)))}}}}{const p=y=>{const w=n.filter(R=>this.getLayer(R)),T=w.length!==0?this.queryRenderedFeatures(y.point,{layers:w}):[];T.length&&(y.features=T,s.call(this,y),delete y.features)};return{layers:n,listener:s,delegates:{[b]:p}}}}_saveDelegatedListener(b,n){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[b]=this._delegatedListeners[b]||[],this._delegatedListeners[b].push(n)}_removeDelegatedListener(b,n,s){if(!this._delegatedListeners||!this._delegatedListeners[b])return;const p=this._delegatedListeners[b];for(let y=0;y<p.length;y++){const w=p[y];if(w.listener===s&&w.layers.length===n.length&&w.layers.every(T=>n.includes(T))){for(const T in w.delegates)this.off(T,w.delegates[T]);return void p.splice(y,1)}}}on(b,n,s){if(s===void 0)return super.on(b,n);const p=typeof n=="string"?[n]:n,y=this._createDelegatedListener(b,p,s);this._saveDelegatedListener(b,y);for(const w in y.delegates)this.on(w,y.delegates[w]);return{unsubscribe:()=>{this._removeDelegatedListener(b,p,s)}}}once(b,n,s){if(s===void 0)return super.once(b,n);const p=typeof n=="string"?[n]:n,y=this._createDelegatedListener(b,p,s);for(const w in y.delegates){const T=y.delegates[w];y.delegates[w]=(...R)=>{this._removeDelegatedListener(b,p,s),T(...R)}}this._saveDelegatedListener(b,y);for(const w in y.delegates)this.once(w,y.delegates[w]);return this}off(b,n,s){return s===void 0?super.off(b,n):(this._removeDelegatedListener(b,typeof n=="string"?[n]:n,s),this)}queryRenderedFeatures(b,n){if(!this.style)return[];let s;const p=b instanceof u.P||Array.isArray(b),y=p?b:[[0,0],[this.transform.width,this.transform.height]];if(n=n||(p?{}:b)||{},y instanceof u.P||typeof y[0]=="number")s=[u.P.convert(y)];else{const w=u.P.convert(y[0]),T=u.P.convert(y[1]);s=[w,new u.P(T.x,w.y),T,new u.P(w.x,T.y),w]}return this.style.queryRenderedFeatures(s,n,this.transform)}querySourceFeatures(b,n){return this.style.querySourceFeatures(b,n)}setStyle(b,n){return(n=u.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},n)).diff!==!1&&n.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&b?(this._diffStyle(b,n),this):(this._localIdeographFontFamily=n.localIdeographFontFamily,this._updateStyle(b,n))}setTransformRequest(b){return this._requestManager.setTransformRequest(b),this}_getUIString(b){const n=this._locale[b];if(n==null)throw new Error(`Missing UI string '${b}'`);return n}_updateStyle(b,n){var s,p;if(n.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",()=>this._updateStyle(b,n));const y=this.style&&n.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!b)),b?(this.style=new Gf(this,n||{}),this.style.setEventedParent(this,{style:this.style}),typeof b=="string"?this.style.loadURL(b,n,y):this.style.loadJSON(b,n,y),this):((p=(s=this.style)===null||s===void 0?void 0:s.projection)===null||p===void 0||p.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Gf(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(b,n){if(typeof b=="string"){const s=this._requestManager.transformRequest(b,"Style");u.j(s,new AbortController).then(p=>{this._updateDiff(p.data,n)}).catch(p=>{p&&this.fire(new u.k(p))})}else typeof b=="object"&&this._updateDiff(b,n)}_updateDiff(b,n){try{this.style.setState(b,n)&&this._update(!0)}catch(s){u.w(`Unable to perform style diff: ${s.message||s.error||s}.  Rebuilding the style from scratch.`),this._updateStyle(b,n)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():u.w("There is no style added to the map.")}addSource(b,n){return this._lazyInitEmptyStyle(),this.style.addSource(b,n),this._update(!0)}isSourceLoaded(b){const n=this.style&&this.style.sourceCaches[b];if(n!==void 0)return n.loaded();this.fire(new u.k(new Error(`There is no source with ID '${b}'`)))}setTerrain(b){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),b){const n=this.style.sourceCaches[b.source];if(!n)throw new Error(`cannot load terrain, because there exists no source with ID: ${b.source}`);this.terrain===null&&n.reload();for(const s in this.style._layers){const p=this.style._layers[s];p.type==="hillshade"&&p.source===b.source&&u.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new uf(this.painter,n,b),this.painter.renderToTexture=new Sr(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=s=>{var p;s.dataType==="style"?this.terrain.sourceCache.freeRtt():s.dataType==="source"&&s.tile&&(s.sourceId!==b.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((p=s.source)===null||p===void 0?void 0:p.type)==="image"?this.terrain.sourceCache.freeRtt():this.terrain.sourceCache.freeRtt(s.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.sourceCache.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new u.l("terrain",{terrain:b})),this}getTerrain(){var b,n;return(n=(b=this.terrain)===null||b===void 0?void 0:b.options)!==null&&n!==void 0?n:null}areTilesLoaded(){const b=this.style&&this.style.sourceCaches;for(const n in b){const s=b[n]._tiles;for(const p in s){const y=s[p];if(y.state!=="loaded"&&y.state!=="errored")return!1}}return!0}removeSource(b){return this.style.removeSource(b),this._update(!0)}getSource(b){return this.style.getSource(b)}setSourceTileLodParams(b,n,s){if(s){const p=this.getSource(s);if(!p)throw new Error(`There is no source with ID "${s}", cannot set LOD parameters`);p.calculateTileZoom=Ne(Math.max(1,b),Math.max(1,n))}else for(const p in this.style.sourceCaches)this.style.sourceCaches[p].getSource().calculateTileZoom=Ne(Math.max(1,b),Math.max(1,n));return this._update(!0),this}refreshTiles(b,n){const s=this.style.sourceCaches[b];if(!s)throw new Error(`There is no source cache with ID "${b}", cannot refresh tile`);n===void 0?s.reload():s.refreshTiles(n.map(p=>new u.a1(p.z,p.x,p.y)))}addImage(b,n,s={}){const{pixelRatio:p=1,sdf:y=!1,stretchX:w,stretchY:T,content:R,textFitWidth:k,textFitHeight:L}=s;if(this._lazyInitEmptyStyle(),!(n instanceof HTMLImageElement||u.b(n))){if(n.width===void 0||n.height===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:F,height:q,data:H}=n,ee=n;return this.style.addImage(b,{data:new u.R({width:F,height:q},new Uint8Array(H)),pixelRatio:p,stretchX:w,stretchY:T,content:R,textFitWidth:k,textFitHeight:L,sdf:y,version:0,userImage:ee}),ee.onAdd&&ee.onAdd(this,b),this}}{const{width:F,height:q,data:H}=j.getImageData(n);this.style.addImage(b,{data:new u.R({width:F,height:q},H),pixelRatio:p,stretchX:w,stretchY:T,content:R,textFitWidth:k,textFitHeight:L,sdf:y,version:0})}}updateImage(b,n){const s=this.style.getImage(b);if(!s)return this.fire(new u.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const p=n instanceof HTMLImageElement||u.b(n)?j.getImageData(n):n,{width:y,height:w,data:T}=p;if(y===void 0||w===void 0)return this.fire(new u.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(y!==s.data.width||w!==s.data.height)return this.fire(new u.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const R=!(n instanceof HTMLImageElement||u.b(n));return s.data.replace(T,R),this.style.updateImage(b,s),this}getImage(b){return this.style.getImage(b)}hasImage(b){return b?!!this.style.getImage(b):(this.fire(new u.k(new Error("Missing required image id"))),!1)}removeImage(b){this.style.removeImage(b)}loadImage(b){return he.getImage(this._requestManager.transformRequest(b,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(b,n){return this._lazyInitEmptyStyle(),this.style.addLayer(b,n),this._update(!0)}moveLayer(b,n){return this.style.moveLayer(b,n),this._update(!0)}removeLayer(b){return this.style.removeLayer(b),this._update(!0)}getLayer(b){return this.style.getLayer(b)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(b,n,s){return this.style.setLayerZoomRange(b,n,s),this._update(!0)}setFilter(b,n,s={}){return this.style.setFilter(b,n,s),this._update(!0)}getFilter(b){return this.style.getFilter(b)}setPaintProperty(b,n,s,p={}){return this.style.setPaintProperty(b,n,s,p),this._update(!0)}getPaintProperty(b,n){return this.style.getPaintProperty(b,n)}setLayoutProperty(b,n,s,p={}){return this.style.setLayoutProperty(b,n,s,p),this._update(!0)}getLayoutProperty(b,n){return this.style.getLayoutProperty(b,n)}setGlyphs(b,n={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(b,n),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(b,n,s={}){return this._lazyInitEmptyStyle(),this.style.addSprite(b,n,s,p=>{p||this._update(!0)}),this}removeSprite(b){return this._lazyInitEmptyStyle(),this.style.removeSprite(b),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(b,n={}){return this._lazyInitEmptyStyle(),this.style.setSprite(b,n,s=>{s||this._update(!0)}),this}setLight(b,n={}){return this._lazyInitEmptyStyle(),this.style.setLight(b,n),this._update(!0)}getLight(){return this.style.getLight()}setSky(b,n={}){return this._lazyInitEmptyStyle(),this.style.setSky(b,n),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(b,n){return this.style.setFeatureState(b,n),this._update()}removeFeatureState(b,n){return this.style.removeFeatureState(b,n),this._update()}getFeatureState(b){return this.style.getFeatureState(b)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let b=0,n=0;return this._container&&(b=this._container.clientWidth||400,n=this._container.clientHeight||300),[b,n]}_setupContainer(){const b=this._container;b.classList.add("maplibregl-map");const n=this._canvasContainer=$.create("div","maplibregl-canvas-container",b);this._interactive&&n.classList.add("maplibregl-interactive"),this._canvas=$.create("canvas","maplibregl-canvas",n),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const s=this._containerDimensions(),p=this._getClampedPixelRatio(s[0],s[1]);this._resizeCanvas(s[0],s[1],p);const y=this._controlContainer=$.create("div","maplibregl-control-container",b),w=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(T=>{w[T]=$.create("div",`maplibregl-ctrl-${T} `,y)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(b,n,s){this._canvas.width=Math.floor(s*b),this._canvas.height=Math.floor(s*n),this._canvas.style.width=`${b}px`,this._canvas.style.height=`${n}px`}_setupPainter(){const b=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let n=null;this._canvas.addEventListener("webglcontextcreationerror",p=>{n={requestedAttributes:b},p&&(n.statusMessage=p.statusMessage,n.type=p.type)},{once:!0});let s=null;if(s=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,b):this._canvas.getContext("webgl2",b)||this._canvas.getContext("webgl",b),!s){const p="Failed to initialize WebGL";throw n?(n.message=p,new Error(JSON.stringify(n))):new Error(p)}this.painter=new lc(s,this.transform),X.testSupport(s)}migrateProjection(b,n){super.migrateProjection(b,n),this.painter.transform=b,this.fire(new u.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(b){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||b,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(b){return this._update(),this._renderTaskQueue.add(b)}_cancelRenderFrame(b){this._renderTaskQueue.remove(b)}_render(b){var n,s,p,y,w;const T=this._idleTriggered?this._fadeDuration:0,R=((n=this.style.projection)===null||n===void 0?void 0:n.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(b),this._removed)return;let k=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const q=this.transform.zoom,H=j.now();this.style.zoomHistory.update(q,H);const ee=new u.C(q,{now:H,fadeDuration:T,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),ne=ee.crossFadingFactor();ne===1&&ne===this._crossFadingFactor||(k=!0,this._crossFadingFactor=ne),this.style.update(ee)}const L=((s=this.style.projection)===null||s===void 0?void 0:s.transitionState)>0!==R;(p=this.style.projection)===null||p===void 0||p.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((y=this.style.projection)===null||y===void 0?void 0:y.transitionState,(w=this.style.projection)===null||w===void 0?void 0:w.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||L)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.sourceCache.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,T,this._crossSourceCollisions,L),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:T,showPadding:this.showPadding}),this.fire(new u.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,u.cn.mark(u.co.load),this.fire(new u.l("load"))),this.style&&(this.style.hasTransitions()||k)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const F=this._sourcesDirty||this._styleDirty||this._placementDirty;return F||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new u.l("idle")),!this._loaded||this._fullyLoaded||F||(this._fullyLoaded=!0,u.cn.mark(u.co.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var b;this._hash&&this._hash.remove();for(const s of this._controls)s.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&removeEventListener("online",this._onWindowOnline,!1),he.removeThrottleControl(this._imageQueueHandle),(b=this._resizeObserver)===null||b===void 0||b.disconnect();const n=this.painter.context.gl.getExtension("WEBGL_lose_context");n!=null&&n.loseContext&&n.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),$.remove(this._canvasContainer),$.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),u.cn.clearMetrics(),this._removed=!0,this.fire(new u.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,j.frame(this._frameRequest,b=>{u.cn.frame(b),this._frameRequest=null;try{this._render(b)}catch(n){if(!u.cp(n)&&!function(s){return s.message===Ju}(n))throw n}},()=>{}))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(b){this._showTileBoundaries!==b&&(this._showTileBoundaries=b,this._update())}get showPadding(){return!!this._showPadding}set showPadding(b){this._showPadding!==b&&(this._showPadding=b,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(b){this._showCollisionBoxes!==b&&(this._showCollisionBoxes=b,b?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(b){this._showOverdrawInspector!==b&&(this._showOverdrawInspector=b,this._update())}get repaint(){return!!this._repaint}set repaint(b){this._repaint!==b&&(this._repaint=b,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(b){this._vertices=b,this._update()}get version(){return xn}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(b){return this._lazyInitEmptyStyle(),this.style.setProjection(b),this._update(!0)}},g.MapMouseEvent=vi,g.MapTouchEvent=bo,g.MapWheelEvent=Xi,g.Marker=zs,g.NavigationControl=class{constructor(b){this._updateZoomButtons=()=>{const n=this._map.getZoom(),s=n===this._map.getMaxZoom(),p=n===this._map.getMinZoom();this._zoomInButton.disabled=s,this._zoomOutButton.disabled=p,this._zoomInButton.setAttribute("aria-disabled",s.toString()),this._zoomOutButton.setAttribute("aria-disabled",p.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(n,s)=>{const p=this._map._getUIString(`NavigationControl.${s}`);n.title=p,n.setAttribute("aria-label",p)},this.options=u.e({},ks,b),this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",n=>n.preventDefault()),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",n=>this._map.zoomIn({},{originalEvent:n})),$.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",n=>this._map.zoomOut({},{originalEvent:n})),$.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",n=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:n}):this._map.resetNorth({},{originalEvent:n})}),this._compassIcon=$.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(b){return this._map=b,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new uu(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){$.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(b,n){const s=$.create("button",b,this._container);return s.type="button",s.addEventListener("click",n),s}},g.Popup=class extends u.E{constructor(b){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:void 0)},this.remove=()=>(this._content&&$.remove(this._content),this._container&&($.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new u.l("close"))),this),this._onMouseUp=n=>{this._update(n.point)},this._onMouseMove=n=>{this._update(n.point)},this._onDrag=n=>{this._update(n.point)},this._update=n=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=$.create("div","maplibregl-popup",this._map.getContainer()),this._tip=$.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const T of this.options.className.split(" "))this._container.classList.add(T);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=yl(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!n)return;const s=this._flatPos=this._pos=this._trackPointer&&n?n:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&n?n:this._map.transform.locationToScreenPoint(this._lngLat));let p=this.options.anchor;const y=Jr(this.options.offset);if(!p){const T=this._container.offsetWidth,R=this._container.offsetHeight;let k;k=s.y+y.bottom.y<R?["top"]:s.y>this._map.transform.height-R?["bottom"]:[],s.x<T/2?k.push("left"):s.x>this._map.transform.width-T/2&&k.push("right"),p=k.length===0?"bottom":k.join("-")}let w=s.add(y[p]);this.options.subpixelPositioning||(w=w.round()),$.setTransform(this._container,`${xo[p]} translate(${w.x}px,${w.y}px)`),bi(this._container,p,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=u.e(Object.create(hh),b)}addTo(b){return this._map&&this.remove(),this._map=b,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new u.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(b){return this._lngLat=u.Q.convert(b),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(b){return this.setDOMContent(document.createTextNode(b))}setHTML(b){const n=document.createDocumentFragment(),s=document.createElement("body");let p;for(s.innerHTML=b;p=s.firstChild,p;)n.appendChild(p);return this.setDOMContent(n)}getMaxWidth(){var b;return(b=this._container)===null||b===void 0?void 0:b.style.maxWidth}setMaxWidth(b){return this.options.maxWidth=b,this._update(),this}setDOMContent(b){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=$.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(b),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(b){return this._container&&this._container.classList.add(b),this}removeClassName(b){return this._container&&this._container.classList.remove(b),this}setOffset(b){return this.options.offset=b,this._update(),this}toggleClassName(b){if(this._container)return this._container.classList.toggle(b)}setSubpixelPositioning(b){this.options.subpixelPositioning=b}_createCloseButton(){this.options.closeButton&&(this._closeButton=$.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const b=this._container.querySelector(fa);b&&b.focus()}},g.RasterDEMTileSource=ln,g.RasterTileSource=Qt,g.ScaleControl=class{constructor(b){this._onMove=()=>{fc(this._map,this._container,this.options)},this.setUnit=n=>{this.options.unit=n,fc(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},uh),b)}getDefaultPosition(){return"bottom-left"}onAdd(b){return this._map=b,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-scale",b.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){$.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},g.ScrollZoomHandler=Vn,g.Style=Gf,g.TerrainControl=class{constructor(b){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=b}onAdd(b){return this._map=b,this._container=$.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=$.create("button","maplibregl-ctrl-terrain",this._container),$.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){$.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},g.TwoFingersTouchPitchHandler=cc,g.TwoFingersTouchRotateHandler=rn,g.TwoFingersTouchZoomHandler=Os,g.TwoFingersTouchZoomRotateHandler=os,g.VectorTileSource=kt,g.VideoSource=gn,g.addSourceType=(b,n)=>u._(void 0,void 0,void 0,function*(){if(Pn(b))throw new Error(`A source type called "${b}" already exists.`);((s,p)=>{Ln[s]=p})(b,n)}),g.clearPrewarmedResources=function(){const b=At;b&&(b.isPreloaded()&&b.numActive()===1?(b.release(tt),At=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},g.createTileMesh=qu,g.getMaxParallelImageRequests=function(){return u.a.MAX_PARALLEL_IMAGE_REQUESTS},g.getRTLTextPluginStatus=function(){return sr().getRTLTextPluginStatus()},g.getVersion=function(){return fh},g.getWorkerCount=function(){return _t.workerCount},g.getWorkerUrl=function(){return u.a.WORKER_URL},g.importScriptInWorkers=function(b){return mt().broadcast("IS",b)},g.prewarm=function(){qt().acquire(tt)},g.setMaxParallelImageRequests=function(b){u.a.MAX_PARALLEL_IMAGE_REQUESTS=b},g.setRTLTextPlugin=function(b,n){return sr().setRTLTextPlugin(b,n)},g.setWorkerCount=function(b){_t.workerCount=b},g.setWorkerUrl=function(b){u.a.WORKER_URL=b}});var v=i;return v})}(sv)),sv.exports}var lv=JP();const ey=f0(lv);function Pr(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];throw new Error(typeof e=="number"?"[MobX] minified error nr: "+e+(i.length?" "+i.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var e3={};function p0(){return typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:e3}var wT=Object.assign,zv=Object.getOwnPropertyDescriptor,zu=Object.defineProperty,m0=Object.prototype,mx=[];Object.freeze(mx);var ST={};Object.freeze(ST);var t3=typeof Proxy<"u",n3=Object.toString();function CT(){t3||Pr("Proxy not available")}function TT(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var bm=function(){};function Lc(e){return typeof e=="function"}function Ud(e){var t=typeof e;switch(t){case"string":case"symbol":case"number":return!0}return!1}function g0(e){return e!==null&&typeof e=="object"}function zh(e){if(!g0(e))return!1;var t=Object.getPrototypeOf(e);if(t==null)return!0;var i=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof i=="function"&&i.toString()===n3}function ET(e){var t=e==null?void 0:e.constructor;return t?t.name==="GeneratorFunction"||t.displayName==="GeneratorFunction":!1}function Fy(e,t,i){zu(e,t,{enumerable:!1,writable:!0,configurable:!0,value:i})}function MT(e,t,i){zu(e,t,{enumerable:!1,writable:!1,configurable:!0,value:i})}function Qd(e,t){var i="isMobX"+e;return t.prototype[i]=!0,function(a){return g0(a)&&a[i]===!0}}function Wm(e){return e!=null&&Object.prototype.toString.call(e)==="[object Map]"}function r3(e){var t=Object.getPrototypeOf(e),i=Object.getPrototypeOf(t),a=Object.getPrototypeOf(i);return a===null}function Ph(e){return e!=null&&Object.prototype.toString.call(e)==="[object Set]"}var AT=typeof Object.getOwnPropertySymbols<"u";function i3(e){var t=Object.keys(e);if(!AT)return t;var i=Object.getOwnPropertySymbols(e);return i.length?[].concat(t,i.filter(function(a){return m0.propertyIsEnumerable.call(e,a)})):t}var Lm=typeof Reflect<"u"&&Reflect.ownKeys?Reflect.ownKeys:AT?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function PT(e){return e===null?null:typeof e=="object"?""+e:e}function Oh(e,t){return m0.hasOwnProperty.call(e,t)}var a3=Object.getOwnPropertyDescriptors||function(t){var i={};return Lm(t).forEach(function(a){i[a]=zv(t,a)}),i};function Ks(e,t){return!!(e&t)}function Qs(e,t,i){return i?e|=t:e&=~t,e}function dS(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=Array(t);i<t;i++)a[i]=e[i];return a}function o3(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,l3(a.key),a)}}function Ym(e,t,i){return t&&o3(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function xm(e,t){var i=typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i)return(i=i.call(e)).next.bind(i);if(Array.isArray(e)||(i=c3(e))||t){i&&(e=i);var a=0;return function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hd(){return Hd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Hd.apply(null,arguments)}function RT(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,gx(e,t)}function gx(e,t){return gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},gx(e,t)}function s3(e,t){if(typeof e!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function l3(e){var t=s3(e,"string");return typeof t=="symbol"?t:t+""}function c3(e,t){if(e){if(typeof e=="string")return dS(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?dS(e,t):void 0}}var Iu=Symbol("mobx-stored-annotations");function Du(e){function t(i,a){if(Vy(a))return e.decorate_20223_(i,a);$y(i,a,e)}return Object.assign(t,e)}function $y(e,t,i){Oh(e,Iu)||Fy(e,Iu,Hd({},e[Iu])),g3(i)||(e[Iu][t]=i)}function u3(e){return Oh(e,Iu)||Fy(e,Iu,Hd({},e[Iu])),e[Iu]}function Vy(e){return typeof e=="object"&&typeof e.kind=="string"}var Un=Symbol("mobx administration"),Hf=function(){function e(i){i===void 0&&(i="Atom"),this.name_=void 0,this.flags_=0,this.observers_=new Set,this.lastAccessedBy_=0,this.lowestObserverState_=Dr.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=i}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(a){return a()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(a){return a()})},t.reportObserved=function(){return GT(this)},t.reportChanged=function(){Dl(),ZT(this),Ll()},t.toString=function(){return this.name_},Ym(e,[{key:"isBeingObserved",get:function(){return Ks(this.flags_,e.isBeingObservedMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isBeingObservedMask_,a)}},{key:"isPendingUnobservation",get:function(){return Ks(this.flags_,e.isPendingUnobservationMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isPendingUnobservationMask_,a)}},{key:"diffValue",get:function(){return Ks(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=Qs(this.flags_,e.diffValueMask_,a===1)}}])}();Hf.isBeingObservedMask_=1;Hf.isPendingUnobservationMask_=2;Hf.diffValueMask_=4;var H1=Qd("Atom",Hf);function OT(e,t,i){t===void 0&&(t=bm),i===void 0&&(i=bm);var a=new Hf(e);return t!==bm&&bR(a,t),i!==bm&&QT(a,i),a}function h3(e,t){return hE(e,t)}function f3(e,t){return Object.is?Object.is(e,t):e===t?e!==0||1/e===1/t:e!==e&&t!==t}var Dv={structural:h3,default:f3};function qd(e,t,i){return rE(e)?e:Array.isArray(e)?Za.array(e,{name:i}):zh(e)?Za.object(e,void 0,{name:i}):Wm(e)?Za.map(e,{name:i}):Ph(e)?Za.set(e,{name:i}):typeof e=="function"&&!_y(e)&&!vy(e)?ET(e)?Bm(e):yy(i,e):e}function d3(e,t,i){if(e==null||C0(e)||S0(e)||ep(e)||Ou(e))return e;if(Array.isArray(e))return Za.array(e,{name:i,deep:!1});if(zh(e))return Za.object(e,void 0,{name:i,deep:!1});if(Wm(e))return Za.map(e,{name:i,deep:!1});if(Ph(e))return Za.set(e,{name:i,deep:!1})}function y0(e){return e}function p3(e,t){return hE(e,t)?t:e}var m3="override";function g3(e){return e.annotationType_===m3}function Uy(e,t){return{annotationType_:e,options_:t,make_:y3,extend_:_3,decorate_20223_:v3}}function y3(e,t,i,a){var f;if((f=this.options_)!=null&&f.bound)return this.extend_(e,t,i,!1)===null?0:1;if(a===e.target_)return this.extend_(e,t,i,!1)===null?0:2;if(_y(i.value))return 1;var v=IT(e,this,t,i,!1);return zu(a,t,v),2}function _3(e,t,i,a){var f=IT(e,this,t,i);return e.defineProperty_(t,f,a)}function v3(e,t){var i=t.kind,a=t.name,f=t.addInitializer,v=this,g=function(P){var I,B,j,$;return Gd((I=(B=v.options_)==null?void 0:B.name)!=null?I:a.toString(),P,(j=($=v.options_)==null?void 0:$.autoAction)!=null?j:!1)};if(i=="field")return function(E){var P,I=E;return _y(I)||(I=g(I)),(P=v.options_)!=null&&P.bound&&(I=I.bind(this),I.isMobxAction=!0),I};if(i=="method"){var u;return _y(e)||(e=g(e)),(u=this.options_)!=null&&u.bound&&f(function(){var E=this,P=E[a].bind(E);P.isMobxAction=!0,E[a]=P}),e}Pr("Cannot apply '"+v.annotationType_+"' to '"+String(a)+"' (kind: "+i+"):"+(`
'`+v.annotationType_+"' can only be used on properties with a function value."))}function b3(e,t,i,a){t.annotationType_,a.value}function IT(e,t,i,a,f){var v,g,u,E,P,I,B;f===void 0&&(f=sn.safeDescriptors),b3(e,t,i,a);var j=a.value;if((v=t.options_)!=null&&v.bound){var $;j=j.bind(($=e.proxy_)!=null?$:e.target_)}return{value:Gd((g=(u=t.options_)==null?void 0:u.name)!=null?g:i.toString(),j,(E=(P=t.options_)==null?void 0:P.autoAction)!=null?E:!1,(I=t.options_)!=null&&I.bound?(B=e.proxy_)!=null?B:e.target_:void 0),configurable:f?e.isPlainObject_:!0,enumerable:!1,writable:!f}}function kT(e,t){return{annotationType_:e,options_:t,make_:x3,extend_:w3,decorate_20223_:S3}}function x3(e,t,i,a){var f;if(a===e.target_)return this.extend_(e,t,i,!1)===null?0:2;if((f=this.options_)!=null&&f.bound&&(!Oh(e.target_,t)||!vy(e.target_[t]))&&this.extend_(e,t,i,!1)===null)return 0;if(vy(i.value))return 1;var v=zT(e,this,t,i,!1,!1);return zu(a,t,v),2}function w3(e,t,i,a){var f,v=zT(e,this,t,i,(f=this.options_)==null?void 0:f.bound);return e.defineProperty_(t,v,a)}function S3(e,t){var i,a=t.name,f=t.addInitializer;return vy(e)||(e=Bm(e)),(i=this.options_)!=null&&i.bound&&f(function(){var v=this,g=v[a].bind(v);g.isMobXFlow=!0,v[a]=g}),e}function C3(e,t,i,a){t.annotationType_,a.value}function zT(e,t,i,a,f,v){v===void 0&&(v=sn.safeDescriptors),C3(e,t,i,a);var g=a.value;if(vy(g)||(g=Bm(g)),f){var u;g=g.bind((u=e.proxy_)!=null?u:e.target_),g.isMobXFlow=!0}return{value:g,configurable:v?e.isPlainObject_:!0,enumerable:!1,writable:!v}}function q1(e,t){return{annotationType_:e,options_:t,make_:T3,extend_:E3,decorate_20223_:M3}}function T3(e,t,i){return this.extend_(e,t,i,!1)===null?0:1}function E3(e,t,i,a){return A3(e,this,t,i),e.defineComputedProperty_(t,Hd({},this.options_,{get:i.get,set:i.set}),a)}function M3(e,t){var i=this,a=t.name,f=t.addInitializer;return f(function(){var v=tp(this)[Un],g=Hd({},i.options_,{get:e,context:this});g.name||(g.name="ObservableObject."+a.toString()),v.values_.set(a,new Bc(g))}),function(){return this[Un].getObservablePropValue_(a)}}function A3(e,t,i,a){t.annotationType_,a.get}function _0(e,t){return{annotationType_:e,options_:t,make_:P3,extend_:R3,decorate_20223_:O3}}function P3(e,t,i){return this.extend_(e,t,i,!1)===null?0:1}function R3(e,t,i,a){var f,v;return I3(e,this),e.defineObservableProperty_(t,i.value,(f=(v=this.options_)==null?void 0:v.enhancer)!=null?f:qd,a)}function O3(e,t){var i=this,a=t.kind,f=t.name,v=new WeakSet;function g(u,E){var P,I,B=tp(u)[Un],j=new Fd(E,(P=(I=i.options_)==null?void 0:I.enhancer)!=null?P:qd,"ObservableObject."+f.toString(),!1);B.values_.set(f,j),v.add(u)}if(a=="accessor")return{get:function(){return v.has(this)||g(this,e.get.call(this)),this[Un].getObservablePropValue_(f)},set:function(E){return v.has(this)||g(this,E),this[Un].setObservablePropValue_(f,E)},init:function(E){return v.has(this)||g(this,E),E}}}function I3(e,t,i,a){t.annotationType_}var k3="true",z3=DT();function DT(e){return{annotationType_:k3,options_:e,make_:D3,extend_:L3,decorate_20223_:B3}}function D3(e,t,i,a){var f,v;if(i.get)return v0.make_(e,t,i,a);if(i.set){var g=Gd(t.toString(),i.set);return a===e.target_?e.defineProperty_(t,{configurable:sn.safeDescriptors?e.isPlainObject_:!0,set:g})===null?0:2:(zu(a,t,{configurable:!0,set:g}),2)}if(a!==e.target_&&typeof i.value=="function"){var u;if(ET(i.value)){var E,P=(E=this.options_)!=null&&E.autoBind?Bm.bound:Bm;return P.make_(e,t,i,a)}var I=(u=this.options_)!=null&&u.autoBind?yy.bound:yy;return I.make_(e,t,i,a)}var B=((f=this.options_)==null?void 0:f.deep)===!1?Za.ref:Za;if(typeof i.value=="function"&&(v=this.options_)!=null&&v.autoBind){var j;i.value=i.value.bind((j=e.proxy_)!=null?j:e.target_)}return B.make_(e,t,i,a)}function L3(e,t,i,a){var f,v;if(i.get)return v0.extend_(e,t,i,a);if(i.set)return e.defineProperty_(t,{configurable:sn.safeDescriptors?e.isPlainObject_:!0,set:Gd(t.toString(),i.set)},a);if(typeof i.value=="function"&&(f=this.options_)!=null&&f.autoBind){var g;i.value=i.value.bind((g=e.proxy_)!=null?g:e.target_)}var u=((v=this.options_)==null?void 0:v.deep)===!1?Za.ref:Za;return u.extend_(e,t,i,a)}function B3(e,t){Pr("'"+this.annotationType_+"' cannot be used as a decorator")}var N3="observable",j3="observable.ref",F3="observable.shallow",$3="observable.struct",LT={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};Object.freeze(LT);function N_(e){return e||LT}var yx=_0(N3),V3=_0(j3,{enhancer:y0}),U3=_0(F3,{enhancer:d3}),H3=_0($3,{enhancer:p3}),BT=Du(yx);function j_(e){return e.deep===!0?qd:e.deep===!1?y0:G3(e.defaultDecorator)}function q3(e){var t;return e?(t=e.defaultDecorator)!=null?t:DT(e):void 0}function G3(e){var t,i;return e&&(t=(i=e.options_)==null?void 0:i.enhancer)!=null?t:qd}function NT(e,t,i){if(Vy(t))return yx.decorate_20223_(e,t);if(Ud(t)){$y(e,t,yx);return}return rE(e)?e:zh(e)?Za.object(e,t,i):Array.isArray(e)?Za.array(e,t):Wm(e)?Za.map(e,t):Ph(e)?Za.set(e,t):typeof e=="object"&&e!==null?e:Za.box(e,t)}wT(NT,BT);var Z3={box:function(t,i){var a=N_(i);return new Fd(t,j_(a),a.name,!0,a.equals)},array:function(t,i){var a=N_(i);return(sn.useProxies===!1||a.proxy===!1?qR:DR)(t,j_(a),a.name)},map:function(t,i){var a=N_(i);return new aE(t,j_(a),a.name)},set:function(t,i){var a=N_(i);return new oE(t,j_(a),a.name)},object:function(t,i,a){return qf(function(){return eE(sn.useProxies===!1||(a==null?void 0:a.proxy)===!1?tp({},a):RR({},a),t,i)})},ref:Du(V3),shallow:Du(U3),deep:BT,struct:Du(H3)},Za=wT(NT,Z3),jT="computed",X3="computed.struct",_x=q1(jT),W3=q1(X3,{equals:Dv.structural}),v0=function(t,i){if(Vy(i))return _x.decorate_20223_(t,i);if(Ud(i))return $y(t,i,_x);if(zh(t))return Du(q1(jT,t));var a=zh(i)?i:{};return a.get=t,a.name||(a.name=t.name||""),new Bc(a)};Object.assign(v0,_x);v0.struct=Du(W3);var pS,mS,Lv=0,Y3=1,K3=(pS=(mS=zv(function(){},"name"))==null?void 0:mS.configurable)!=null?pS:!1,gS={value:"action",configurable:!0,writable:!1,enumerable:!1};function Gd(e,t,i,a){i===void 0&&(i=!1);function f(){return Q3(e,i,t,a||this,arguments)}return f.isMobxAction=!0,f.toString=function(){return t.toString()},K3&&(gS.value=e,zu(f,"name",gS)),f}function Q3(e,t,i,a,f){var v=J3(e,t);try{return i.apply(a,f)}catch(g){throw v.error_=g,g}finally{eR(v)}}function J3(e,t,i,a){var f=!1,v=0,g=sn.trackingDerivation,u=!t||!g;Dl();var E=sn.allowStateChanges;u&&(Jd(),E=b0(!0));var P=G1(!0),I={runAsAction_:u,prevDerivation_:g,prevAllowStateChanges_:E,prevAllowStateReads_:P,notifySpy_:f,startTime_:v,actionId_:Y3++,parentActionId_:Lv};return Lv=I.actionId_,I}function eR(e){Lv!==e.actionId_&&Pr(30),Lv=e.parentActionId_,e.error_!==void 0&&(sn.suppressReactionErrors=!0),x0(e.prevAllowStateChanges_),fy(e.prevAllowStateReads_),Ll(),e.runAsAction_&&Ih(e.prevDerivation_),sn.suppressReactionErrors=!1}function tR(e,t){var i=b0(e);try{return t()}finally{x0(i)}}function b0(e){var t=sn.allowStateChanges;return sn.allowStateChanges=e,t}function x0(e){sn.allowStateChanges=e}var Fd=function(e){function t(a,f,v,g,u){var E;return v===void 0&&(v="ObservableValue"),u===void 0&&(u=Dv.default),E=e.call(this,v)||this,E.enhancer=void 0,E.name_=void 0,E.equals=void 0,E.hasUnreportedChange_=!1,E.interceptors_=void 0,E.changeListeners_=void 0,E.value_=void 0,E.dehancer=void 0,E.enhancer=f,E.name_=v,E.equals=u,E.value_=f(a,void 0,v),E}RT(t,e);var i=t.prototype;return i.dehanceValue=function(f){return this.dehancer!==void 0?this.dehancer(f):f},i.set=function(f){this.value_,f=this.prepareNewValue_(f),f!==sn.UNCHANGED&&this.setNewValue_(f)},i.prepareNewValue_=function(f){if(kl(this)){var v=zl(this,{object:this,type:Lu,newValue:f});if(!v)return sn.UNCHANGED;f=v.newValue}return f=this.enhancer(f,this.value_,this.name_),this.equals(this.value_,f)?sn.UNCHANGED:f},i.setNewValue_=function(f){var v=this.value_;this.value_=f,this.reportChanged(),Ic(this)&&kc(this,{type:Lu,object:this,newValue:f,oldValue:v})},i.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},i.intercept_=function(f){return Hy(this,f)},i.observe_=function(f,v){return v&&f({observableKind:"value",debugObjectName:this.name_,object:this,type:Lu,newValue:this.value_,oldValue:void 0}),qy(this,f)},i.raw=function(){return this.value_},i.toJSON=function(){return this.get()},i.toString=function(){return this.name_+"["+this.value_+"]"},i.valueOf=function(){return PT(this.get())},i[Symbol.toPrimitive]=function(){return this.valueOf()},t}(Hf),Bc=function(){function e(i){this.dependenciesState_=Dr.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.observers_=new Set,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Dr.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new Nv(null),this.name_=void 0,this.triggeredBy_=void 0,this.flags_=0,this.derivation=void 0,this.setter_=void 0,this.isTracing_=Bv.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,i.get||Pr(31),this.derivation=i.get,this.name_=i.name||"ComputedValue",i.set&&(this.setter_=Gd("ComputedValue-setter",i.set)),this.equals_=i.equals||(i.compareStructural||i.struct?Dv.structural:Dv.default),this.scope_=i.context,this.requiresReaction_=i.requiresReaction,this.keepAlive_=!!i.keepAlive}var t=e.prototype;return t.onBecomeStale_=function(){oR(this)},t.onBO=function(){this.onBOL&&this.onBOL.forEach(function(a){return a()})},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach(function(a){return a()})},t.get=function(){if(this.isComputing&&Pr(32,this.name_,this.derivation),sn.inBatch===0&&this.observers_.size===0&&!this.keepAlive_)vx(this)&&(this.warnAboutUntrackedRead_(),Dl(),this.value_=this.computeValue_(!1),Ll());else if(GT(this),vx(this)){var a=sn.trackingContext;this.keepAlive_&&!a&&(sn.trackingContext=this),this.trackAndCompute()&&aR(this),sn.trackingContext=a}var f=this.value_;if(cv(f))throw f.cause;return f},t.set=function(a){if(this.setter_){this.isRunningSetter&&Pr(33,this.name_),this.isRunningSetter=!0;try{this.setter_.call(this.scope_,a)}finally{this.isRunningSetter=!1}}else Pr(34,this.name_)},t.trackAndCompute=function(){var a=this.value_,f=this.dependenciesState_===Dr.NOT_TRACKING_,v=this.computeValue_(!0),g=f||cv(a)||cv(v)||!this.equals_(a,v);return g&&(this.value_=v),g},t.computeValue_=function(a){this.isComputing=!0;var f=b0(!1),v;if(a)v=FT(this,this.derivation,this.scope_);else if(sn.disableErrorBoundaries===!0)v=this.derivation.call(this.scope_);else try{v=this.derivation.call(this.scope_)}catch(g){v=new Nv(g)}return x0(f),this.isComputing=!1,v},t.suspend_=function(){this.keepAlive_||(bx(this),this.value_=void 0)},t.observe_=function(a,f){var v=this,g=!0,u=void 0;return Ah(function(){var E=v.get();if(!g||f){var P=Jd();a({observableKind:"computed",debugObjectName:v.name_,type:Lu,object:v,newValue:E,oldValue:u}),Ih(P)}g=!1,u=E})},t.warnAboutUntrackedRead_=function(){},t.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},t.valueOf=function(){return PT(this.get())},t[Symbol.toPrimitive]=function(){return this.valueOf()},Ym(e,[{key:"isComputing",get:function(){return Ks(this.flags_,e.isComputingMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isComputingMask_,a)}},{key:"isRunningSetter",get:function(){return Ks(this.flags_,e.isRunningSetterMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isRunningSetterMask_,a)}},{key:"isBeingObserved",get:function(){return Ks(this.flags_,e.isBeingObservedMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isBeingObservedMask_,a)}},{key:"isPendingUnobservation",get:function(){return Ks(this.flags_,e.isPendingUnobservationMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isPendingUnobservationMask_,a)}},{key:"diffValue",get:function(){return Ks(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=Qs(this.flags_,e.diffValueMask_,a===1)}}])}();Bc.isComputingMask_=1;Bc.isRunningSetterMask_=2;Bc.isBeingObservedMask_=4;Bc.isPendingUnobservationMask_=8;Bc.diffValueMask_=16;var w0=Qd("ComputedValue",Bc),Dr;(function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"})(Dr||(Dr={}));var Bv;(function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"})(Bv||(Bv={}));var Nv=function(t){this.cause=void 0,this.cause=t};function cv(e){return e instanceof Nv}function vx(e){switch(e.dependenciesState_){case Dr.UP_TO_DATE_:return!1;case Dr.NOT_TRACKING_:case Dr.STALE_:return!0;case Dr.POSSIBLY_STALE_:{for(var t=G1(!0),i=Jd(),a=e.observing_,f=a.length,v=0;v<f;v++){var g=a[v];if(w0(g)){if(sn.disableErrorBoundaries)g.get();else try{g.get()}catch{return Ih(i),fy(t),!0}if(e.dependenciesState_===Dr.STALE_)return Ih(i),fy(t),!0}}return VT(e),Ih(i),fy(t),!1}}}function FT(e,t,i){var a=G1(!0);VT(e),e.newObserving_=new Array(e.runId_===0?100:e.observing_.length),e.unboundDepsCount_=0,e.runId_=++sn.runId;var f=sn.trackingDerivation;sn.trackingDerivation=e,sn.inBatch++;var v;if(sn.disableErrorBoundaries===!0)v=t.call(i);else try{v=t.call(i)}catch(g){v=new Nv(g)}return sn.inBatch--,sn.trackingDerivation=f,nR(e),fy(a),v}function nR(e){for(var t=e.observing_,i=e.observing_=e.newObserving_,a=Dr.UP_TO_DATE_,f=0,v=e.unboundDepsCount_,g=0;g<v;g++){var u=i[g];u.diffValue===0&&(u.diffValue=1,f!==g&&(i[f]=u),f++),u.dependenciesState_>a&&(a=u.dependenciesState_)}for(i.length=f,e.newObserving_=null,v=t.length;v--;){var E=t[v];E.diffValue===0&&HT(E,e),E.diffValue=0}for(;f--;){var P=i[f];P.diffValue===1&&(P.diffValue=0,iR(P,e))}a!==Dr.UP_TO_DATE_&&(e.dependenciesState_=a,e.onBecomeStale_())}function bx(e){var t=e.observing_;e.observing_=[];for(var i=t.length;i--;)HT(t[i],e);e.dependenciesState_=Dr.NOT_TRACKING_}function $T(e){var t=Jd();try{return e()}finally{Ih(t)}}function Jd(){var e=sn.trackingDerivation;return sn.trackingDerivation=null,e}function Ih(e){sn.trackingDerivation=e}function G1(e){var t=sn.allowStateReads;return sn.allowStateReads=e,t}function fy(e){sn.allowStateReads=e}function VT(e){if(e.dependenciesState_!==Dr.UP_TO_DATE_){e.dependenciesState_=Dr.UP_TO_DATE_;for(var t=e.observing_,i=t.length;i--;)t[i].lowestObserverState_=Dr.UP_TO_DATE_}}var uv=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},hv=!0,UT=!1,sn=function(){var e=p0();return e.__mobxInstanceCount>0&&!e.__mobxGlobals&&(hv=!1),e.__mobxGlobals&&e.__mobxGlobals.version!==new uv().version&&(hv=!1),hv?e.__mobxGlobals?(e.__mobxInstanceCount+=1,e.__mobxGlobals.UNCHANGED||(e.__mobxGlobals.UNCHANGED={}),e.__mobxGlobals):(e.__mobxInstanceCount=1,e.__mobxGlobals=new uv):(setTimeout(function(){UT||Pr(35)},1),new uv)}();function rR(){if((sn.pendingReactions.length||sn.inBatch||sn.isRunningReactions)&&Pr(36),UT=!0,hv){var e=p0();--e.__mobxInstanceCount===0&&(e.__mobxGlobals=void 0),sn=new uv}}function iR(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function HT(e,t){e.observers_.delete(t),e.observers_.size===0&&qT(e)}function qT(e){e.isPendingUnobservation===!1&&(e.isPendingUnobservation=!0,sn.pendingUnobservations.push(e))}function Dl(){sn.inBatch++}function Ll(){if(--sn.inBatch===0){XT();for(var e=sn.pendingUnobservations,t=0;t<e.length;t++){var i=e[t];i.isPendingUnobservation=!1,i.observers_.size===0&&(i.isBeingObserved&&(i.isBeingObserved=!1,i.onBUO()),i instanceof Bc&&i.suspend_())}sn.pendingUnobservations=[]}}function GT(e){var t=sn.trackingDerivation;return t!==null?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved&&sn.trackingContext&&(e.isBeingObserved=!0,e.onBO())),e.isBeingObserved):(e.observers_.size===0&&sn.inBatch>0&&qT(e),!1)}function ZT(e){e.lowestObserverState_!==Dr.STALE_&&(e.lowestObserverState_=Dr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Dr.UP_TO_DATE_&&t.onBecomeStale_(),t.dependenciesState_=Dr.STALE_}))}function aR(e){e.lowestObserverState_!==Dr.STALE_&&(e.lowestObserverState_=Dr.STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Dr.POSSIBLY_STALE_?t.dependenciesState_=Dr.STALE_:t.dependenciesState_===Dr.UP_TO_DATE_&&(e.lowestObserverState_=Dr.UP_TO_DATE_)}))}function oR(e){e.lowestObserverState_===Dr.UP_TO_DATE_&&(e.lowestObserverState_=Dr.POSSIBLY_STALE_,e.observers_.forEach(function(t){t.dependenciesState_===Dr.UP_TO_DATE_&&(t.dependenciesState_=Dr.POSSIBLY_STALE_,t.onBecomeStale_())}))}var ju=function(){function e(i,a,f,v){i===void 0&&(i="Reaction"),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Dr.NOT_TRACKING_,this.runId_=0,this.unboundDepsCount_=0,this.flags_=0,this.isTracing_=Bv.NONE,this.name_=i,this.onInvalidate_=a,this.errorHandler_=f,this.requiresObservable_=v}var t=e.prototype;return t.onBecomeStale_=function(){this.schedule_()},t.schedule_=function(){this.isScheduled||(this.isScheduled=!0,sn.pendingReactions.push(this),XT())},t.runReaction_=function(){if(!this.isDisposed){Dl(),this.isScheduled=!1;var a=sn.trackingContext;if(sn.trackingContext=this,vx(this)){this.isTrackPending=!0;try{this.onInvalidate_()}catch(f){this.reportExceptionInDerivation_(f)}}sn.trackingContext=a,Ll()}},t.track=function(a){if(!this.isDisposed){Dl(),this.isRunning=!0;var f=sn.trackingContext;sn.trackingContext=this;var v=FT(this,a,void 0);sn.trackingContext=f,this.isRunning=!1,this.isTrackPending=!1,this.isDisposed&&bx(this),cv(v)&&this.reportExceptionInDerivation_(v.cause),Ll()}},t.reportExceptionInDerivation_=function(a){var f=this;if(this.errorHandler_){this.errorHandler_(a,this);return}if(sn.disableErrorBoundaries)throw a;var v="[mobx] uncaught error in '"+this+"'";sn.suppressReactionErrors||console.error(v,a),sn.globalReactionErrorHandlers.forEach(function(g){return g(a,f)})},t.dispose=function(){this.isDisposed||(this.isDisposed=!0,this.isRunning||(Dl(),bx(this),Ll()))},t.getDisposer_=function(a){var f=this,v=function g(){f.dispose(),a==null||a.removeEventListener==null||a.removeEventListener("abort",g)};return a==null||a.addEventListener==null||a.addEventListener("abort",v),v[Un]=this,v},t.toString=function(){return"Reaction["+this.name_+"]"},t.trace=function(a){},Ym(e,[{key:"isDisposed",get:function(){return Ks(this.flags_,e.isDisposedMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isDisposedMask_,a)}},{key:"isScheduled",get:function(){return Ks(this.flags_,e.isScheduledMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isScheduledMask_,a)}},{key:"isTrackPending",get:function(){return Ks(this.flags_,e.isTrackPendingMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isTrackPendingMask_,a)}},{key:"isRunning",get:function(){return Ks(this.flags_,e.isRunningMask_)},set:function(a){this.flags_=Qs(this.flags_,e.isRunningMask_,a)}},{key:"diffValue",get:function(){return Ks(this.flags_,e.diffValueMask_)?1:0},set:function(a){this.flags_=Qs(this.flags_,e.diffValueMask_,a===1)}}])}();ju.isDisposedMask_=1;ju.isScheduledMask_=2;ju.isTrackPendingMask_=4;ju.isRunningMask_=8;ju.diffValueMask_=16;var sR=100,xx=function(t){return t()};function XT(){sn.inBatch>0||sn.isRunningReactions||xx(lR)}function lR(){sn.isRunningReactions=!0;for(var e=sn.pendingReactions,t=0;e.length>0;){++t===sR&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var i=e.splice(0),a=0,f=i.length;a<f;a++)i[a].runReaction_()}sn.isRunningReactions=!1}var jv=Qd("Reaction",ju);function cR(e){var t=xx;xx=function(a){return e(function(){return t(a)})}}function dy(){return!1}function uR(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}}var WT="action",hR="action.bound",YT="autoAction",fR="autoAction.bound",dR="<unnamed action>",wx=Uy(WT),pR=Uy(hR,{bound:!0}),Sx=Uy(YT,{autoAction:!0}),mR=Uy(fR,{autoAction:!0,bound:!0});function KT(e){var t=function(a,f){if(Lc(a))return Gd(a.name||dR,a,e);if(Lc(f))return Gd(a,f,e);if(Vy(f))return(e?Sx:wx).decorate_20223_(a,f);if(Ud(f))return $y(a,f,e?Sx:wx);if(Ud(a))return Du(Uy(e?YT:WT,{name:a,autoAction:e}))};return t}var wm=KT(!1);Object.assign(wm,wx);var yy=KT(!0);Object.assign(yy,Sx);wm.bound=Du(pR);yy.bound=Du(mR);function _y(e){return Lc(e)&&e.isMobxAction===!0}function Ah(e,t){var i,a,f,v;t===void 0&&(t=ST);var g=(i=(a=t)==null?void 0:a.name)!=null?i:"Autorun",u=!t.scheduler&&!t.delay,E;if(u)E=new ju(g,function(){this.track(B)},t.onError,t.requiresObservable);else{var P=yR(t),I=!1;E=new ju(g,function(){I||(I=!0,P(function(){I=!1,E.isDisposed||E.track(B)}))},t.onError,t.requiresObservable)}function B(){e(E)}return(f=t)!=null&&(f=f.signal)!=null&&f.aborted||E.schedule_(),E.getDisposer_((v=t)==null?void 0:v.signal)}var gR=function(t){return t()};function yR(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:gR}var _R="onBO",vR="onBUO";function bR(e,t,i){return JT(_R,e,t,i)}function QT(e,t,i){return JT(vR,e,t,i)}function JT(e,t,i,a){var f=Vv(t),v=Lc(a)?a:i,g=e+"L";return f[g]?f[g].add(v):f[g]=new Set([v]),function(){var u=f[g];u&&(u.delete(v),u.size===0&&delete f[g])}}var xR="never",F_="always",wR="observed";function SR(e){e.isolateGlobalState===!0&&rR();var t=e.useProxies,i=e.enforceActions;if(t!==void 0&&(sn.useProxies=t===F_?!0:t===xR?!1:typeof Proxy<"u"),t==="ifavailable"&&(sn.verifyProxies=!0),i!==void 0){var a=i===F_?F_:i===wR;sn.enforceActions=a,sn.allowStateChanges=!(a===!0||a===F_)}["computedRequiresReaction","reactionRequiresObservable","observableRequiresReaction","disableErrorBoundaries","safeDescriptors"].forEach(function(f){f in e&&(sn[f]=!!e[f])}),sn.allowStateReads=!sn.observableRequiresReaction,e.reactionScheduler&&cR(e.reactionScheduler)}function eE(e,t,i,a){var f=a3(t);return qf(function(){var v=tp(e,a)[Un];Lm(f).forEach(function(g){v.extend_(g,f[g],i&&g in i?i[g]:!0)})}),e}function CR(e,t){return tE(Vv(e,t))}function tE(e){var t={name:e.name_};return e.observing_&&e.observing_.length>0&&(t.dependencies=TR(e.observing_).map(tE)),t}function TR(e){return Array.from(new Set(e))}var ER=0;function nE(){this.message="FLOW_CANCELLED"}nE.prototype=Object.create(Error.prototype);var bb=kT("flow"),MR=kT("flow.bound",{bound:!0}),Bm=Object.assign(function(t,i){if(Vy(i))return bb.decorate_20223_(t,i);if(Ud(i))return $y(t,i,bb);var a=t,f=a.name||"<unnamed flow>",v=function(){var u=this,E=arguments,P=++ER,I=wm(f+" - runid: "+P+" - init",a).apply(u,E),B,j=void 0,$=new Promise(function(X,J){var G=0;B=J;function le(he){j=void 0;var ae;try{ae=wm(f+" - runid: "+P+" - yield "+G++,I.next).call(I,he)}catch(ve){return J(ve)}pe(ae)}function oe(he){j=void 0;var ae;try{ae=wm(f+" - runid: "+P+" - yield "+G++,I.throw).call(I,he)}catch(ve){return J(ve)}pe(ae)}function pe(he){if(Lc(he==null?void 0:he.then)){he.then(pe,J);return}return he.done?X(he.value):(j=Promise.resolve(he.value),j.then(le,oe))}le(void 0)});return $.cancel=wm(f+" - runid: "+P+" - cancel",function(){try{j&&yS(j);var X=I.return(void 0),J=Promise.resolve(X.value);J.then(bm,bm),yS(J),B(new nE)}catch(G){B(G)}}),$};return v.isMobXFlow=!0,v},bb);Bm.bound=Du(MR);function yS(e){Lc(e.cancel)&&e.cancel()}function vy(e){return(e==null?void 0:e.isMobXFlow)===!0}function AR(e,t){return e?C0(e)||!!e[Un]||H1(e)||jv(e)||w0(e):!1}function rE(e){return AR(e)}function Rh(e,t){t===void 0&&(t=void 0),Dl();try{return e.apply(t)}finally{Ll()}}function pm(e){return e[Un]}var PR={has:function(t,i){return pm(t).has_(i)},get:function(t,i){return pm(t).get_(i)},set:function(t,i,a){var f;return Ud(i)?(f=pm(t).set_(i,a,!0))!=null?f:!0:!1},deleteProperty:function(t,i){var a;return Ud(i)?(a=pm(t).delete_(i,!0))!=null?a:!0:!1},defineProperty:function(t,i,a){var f;return(f=pm(t).defineProperty_(i,a))!=null?f:!0},ownKeys:function(t){return pm(t).ownKeys_()},preventExtensions:function(t){Pr(13)}};function RR(e,t){var i,a;return CT(),e=tp(e,t),(a=(i=e[Un]).proxy_)!=null?a:i.proxy_=new Proxy(e,PR)}function kl(e){return e.interceptors_!==void 0&&e.interceptors_.length>0}function Hy(e,t){var i=e.interceptors_||(e.interceptors_=[]);return i.push(t),TT(function(){var a=i.indexOf(t);a!==-1&&i.splice(a,1)})}function zl(e,t){var i=Jd();try{for(var a=[].concat(e.interceptors_||[]),f=0,v=a.length;f<v&&(t=a[f](t),t&&!t.type&&Pr(14),!!t);f++);return t}finally{Ih(i)}}function Ic(e){return e.changeListeners_!==void 0&&e.changeListeners_.length>0}function qy(e,t){var i=e.changeListeners_||(e.changeListeners_=[]);return i.push(t),TT(function(){var a=i.indexOf(t);a!==-1&&i.splice(a,1)})}function kc(e,t){var i=Jd(),a=e.changeListeners_;if(a){a=a.slice();for(var f=0,v=a.length;f<v;f++)a[f](t);Ih(i)}}function OR(e,t,i){return qf(function(){var a,f=tp(e,i)[Un];(a=t)!=null||(t=u3(e)),Lm(t).forEach(function(v){return f.make_(v,t[v])})}),e}var xb=Symbol("mobx-keys");function IR(e,t,i){return zh(e)?eE(e,e,t,i):(qf(function(){var a=tp(e,i)[Un];if(!e[xb]){var f=Object.getPrototypeOf(e),v=new Set([].concat(Lm(e),Lm(f)));v.delete("constructor"),v.delete(Un),Fy(f,xb,v)}e[xb].forEach(function(g){return a.make_(g,t&&g in t?t[g]:!0)})}),e)}var _S="splice",Lu="update",kR=1e4,zR={get:function(t,i){var a=t[Un];return i===Un?a:i==="length"?a.getArrayLength_():typeof i=="string"&&!isNaN(i)?a.get_(parseInt(i)):Oh(Fv,i)?Fv[i]:t[i]},set:function(t,i,a){var f=t[Un];return i==="length"&&f.setArrayLength_(a),typeof i=="symbol"||isNaN(i)?t[i]=a:f.set_(parseInt(i),a),!0},preventExtensions:function(){Pr(15)}},Z1=function(){function e(i,a,f,v){i===void 0&&(i="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=f,this.legacyMode_=v,this.atom_=new Hf(i),this.enhancer_=function(g,u){return a(g,u,"ObservableArray[..]")}}var t=e.prototype;return t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.dehanceValues_=function(a){return this.dehancer!==void 0&&a.length>0?a.map(this.dehancer):a},t.intercept_=function(a){return Hy(this,a)},t.observe_=function(a,f){return f===void 0&&(f=!1),f&&a({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),qy(this,a)},t.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},t.setArrayLength_=function(a){(typeof a!="number"||isNaN(a)||a<0)&&Pr("Out of range: "+a);var f=this.values_.length;if(a!==f)if(a>f){for(var v=new Array(a-f),g=0;g<a-f;g++)v[g]=void 0;this.spliceWithArray_(f,0,v)}else this.spliceWithArray_(a,f-a)},t.updateArrayLength_=function(a,f){a!==this.lastKnownLength_&&Pr(16),this.lastKnownLength_+=f,this.legacyMode_&&f>0&&uE(a+f+1)},t.spliceWithArray_=function(a,f,v){var g=this;this.atom_;var u=this.values_.length;if(a===void 0?a=0:a>u?a=u:a<0&&(a=Math.max(0,u+a)),arguments.length===1?f=u-a:f==null?f=0:f=Math.max(0,Math.min(f,u-a)),v===void 0&&(v=mx),kl(this)){var E=zl(this,{object:this.proxy_,type:_S,index:a,removedCount:f,added:v});if(!E)return mx;f=E.removedCount,v=E.added}if(v=v.length===0?v:v.map(function(B){return g.enhancer_(B,void 0)}),this.legacyMode_){var P=v.length-f;this.updateArrayLength_(u,P)}var I=this.spliceItemsIntoValues_(a,f,v);return(f!==0||v.length!==0)&&this.notifyArraySplice_(a,v,I),this.dehanceValues_(I)},t.spliceItemsIntoValues_=function(a,f,v){if(v.length<kR){var g;return(g=this.values_).splice.apply(g,[a,f].concat(v))}else{var u=this.values_.slice(a,a+f),E=this.values_.slice(a+f);this.values_.length+=v.length-f;for(var P=0;P<v.length;P++)this.values_[a+P]=v[P];for(var I=0;I<E.length;I++)this.values_[a+v.length+I]=E[I];return u}},t.notifyArrayChildUpdate_=function(a,f,v){var g=!this.owned_&&dy(),u=Ic(this),E=u||g?{observableKind:"array",object:this.proxy_,type:Lu,debugObjectName:this.atom_.name_,index:a,newValue:f,oldValue:v}:null;this.atom_.reportChanged(),u&&kc(this,E)},t.notifyArraySplice_=function(a,f,v){var g=!this.owned_&&dy(),u=Ic(this),E=u||g?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:_S,index:a,removed:v,added:f,removedCount:v.length,addedCount:f.length}:null;this.atom_.reportChanged(),u&&kc(this,E)},t.get_=function(a){if(this.legacyMode_&&a>=this.values_.length){console.warn("[mobx] Out of bounds read: "+a);return}return this.atom_.reportObserved(),this.dehanceValue_(this.values_[a])},t.set_=function(a,f){var v=this.values_;if(this.legacyMode_&&a>v.length&&Pr(17,a,v.length),a<v.length){this.atom_;var g=v[a];if(kl(this)){var u=zl(this,{type:Lu,object:this.proxy_,index:a,newValue:f});if(!u)return;f=u.newValue}f=this.enhancer_(f,g);var E=f!==g;E&&(v[a]=f,this.notifyArrayChildUpdate_(a,f,g))}else{for(var P=new Array(a+1-v.length),I=0;I<P.length-1;I++)P[I]=void 0;P[P.length-1]=f,this.spliceWithArray_(v.length,0,P)}},e}();function DR(e,t,i,a){return i===void 0&&(i="ObservableArray"),a===void 0&&(a=!1),CT(),qf(function(){var f=new Z1(i,t,a,!1);MT(f.values_,Un,f);var v=new Proxy(f.values_,zR);return f.proxy_=v,e&&e.length&&f.spliceWithArray_(0,0,e),v})}var Fv={clear:function(){return this.splice(0)},replace:function(t){var i=this[Un];return i.spliceWithArray_(0,i.values_.length,t)},toJSON:function(){return this.slice()},splice:function(t,i){for(var a=arguments.length,f=new Array(a>2?a-2:0),v=2;v<a;v++)f[v-2]=arguments[v];var g=this[Un];switch(arguments.length){case 0:return[];case 1:return g.spliceWithArray_(t);case 2:return g.spliceWithArray_(t,i)}return g.spliceWithArray_(t,i,f)},spliceWithArray:function(t,i,a){return this[Un].spliceWithArray_(t,i,a)},push:function(){for(var t=this[Un],i=arguments.length,a=new Array(i),f=0;f<i;f++)a[f]=arguments[f];return t.spliceWithArray_(t.values_.length,0,a),t.values_.length},pop:function(){return this.splice(Math.max(this[Un].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var t=this[Un],i=arguments.length,a=new Array(i),f=0;f<i;f++)a[f]=arguments[f];return t.spliceWithArray_(0,0,a),t.values_.length},reverse:function(){return sn.trackingDerivation&&Pr(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){sn.trackingDerivation&&Pr(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(t){var i=this[Un],a=i.dehanceValues_(i.values_).indexOf(t);return a>-1?(this.splice(a,1),!0):!1}};Mi("at",rl);Mi("concat",rl);Mi("flat",rl);Mi("includes",rl);Mi("indexOf",rl);Mi("join",rl);Mi("lastIndexOf",rl);Mi("slice",rl);Mi("toString",rl);Mi("toLocaleString",rl);Mi("toSorted",rl);Mi("toSpliced",rl);Mi("with",rl);Mi("every",Nc);Mi("filter",Nc);Mi("find",Nc);Mi("findIndex",Nc);Mi("findLast",Nc);Mi("findLastIndex",Nc);Mi("flatMap",Nc);Mi("forEach",Nc);Mi("map",Nc);Mi("some",Nc);Mi("toReversed",Nc);Mi("reduce",iE);Mi("reduceRight",iE);function Mi(e,t){typeof Array.prototype[e]=="function"&&(Fv[e]=t(e))}function rl(e){return function(){var t=this[Un];t.atom_.reportObserved();var i=t.dehanceValues_(t.values_);return i[e].apply(i,arguments)}}function Nc(e){return function(t,i){var a=this,f=this[Un];f.atom_.reportObserved();var v=f.dehanceValues_(f.values_);return v[e](function(g,u){return t.call(i,g,u,a)})}}function iE(e){return function(){var t=this,i=this[Un];i.atom_.reportObserved();var a=i.dehanceValues_(i.values_),f=arguments[0];return arguments[0]=function(v,g,u){return f(v,g,u,t)},a[e].apply(a,arguments)}}var LR=Qd("ObservableArrayAdministration",Z1);function S0(e){return g0(e)&&LR(e[Un])}var BR={},Nf="add",$v="delete",aE=function(){function e(i,a,f){var v=this;a===void 0&&(a=qd),f===void 0&&(f="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[Un]=BR,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=a,this.name_=f,Lc(Map)||Pr(18),qf(function(){v.keysAtom_=OT("ObservableMap.keys()"),v.data_=new Map,v.hasMap_=new Map,i&&v.merge(i)})}var t=e.prototype;return t.has_=function(a){return this.data_.has(a)},t.has=function(a){var f=this;if(!sn.trackingDerivation)return this.has_(a);var v=this.hasMap_.get(a);if(!v){var g=v=new Fd(this.has_(a),y0,"ObservableMap.key?",!1);this.hasMap_.set(a,g),QT(g,function(){return f.hasMap_.delete(a)})}return v.get()},t.set=function(a,f){var v=this.has_(a);if(kl(this)){var g=zl(this,{type:v?Lu:Nf,object:this,newValue:f,name:a});if(!g)return this;f=g.newValue}return v?this.updateValue_(a,f):this.addValue_(a,f),this},t.delete=function(a){var f=this;if(this.keysAtom_,kl(this)){var v=zl(this,{type:$v,object:this,name:a});if(!v)return!1}if(this.has_(a)){var g=dy(),u=Ic(this),E=u||g?{observableKind:"map",debugObjectName:this.name_,type:$v,object:this,oldValue:this.data_.get(a).value_,name:a}:null;return Rh(function(){var P;f.keysAtom_.reportChanged(),(P=f.hasMap_.get(a))==null||P.setNewValue_(!1);var I=f.data_.get(a);I.setNewValue_(void 0),f.data_.delete(a)}),u&&kc(this,E),!0}return!1},t.updateValue_=function(a,f){var v=this.data_.get(a);if(f=v.prepareNewValue_(f),f!==sn.UNCHANGED){var g=dy(),u=Ic(this),E=u||g?{observableKind:"map",debugObjectName:this.name_,type:Lu,object:this,oldValue:v.value_,name:a,newValue:f}:null;v.setNewValue_(f),u&&kc(this,E)}},t.addValue_=function(a,f){var v=this;this.keysAtom_,Rh(function(){var P,I=new Fd(f,v.enhancer_,"ObservableMap.key",!1);v.data_.set(a,I),f=I.value_,(P=v.hasMap_.get(a))==null||P.setNewValue_(!0),v.keysAtom_.reportChanged()});var g=dy(),u=Ic(this),E=u||g?{observableKind:"map",debugObjectName:this.name_,type:Nf,object:this,name:a,newValue:f}:null;u&&kc(this,E)},t.get=function(a){return this.has(a)?this.dehanceValue_(this.data_.get(a).get()):this.dehanceValue_(void 0)},t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},t.values=function(){var a=this,f=this.keys();return vS({next:function(){var g=f.next(),u=g.done,E=g.value;return{done:u,value:u?void 0:a.get(E)}}})},t.entries=function(){var a=this,f=this.keys();return vS({next:function(){var g=f.next(),u=g.done,E=g.value;return{done:u,value:u?void 0:[E,a.get(E)]}}})},t[Symbol.iterator]=function(){return this.entries()},t.forEach=function(a,f){for(var v=xm(this),g;!(g=v()).done;){var u=g.value,E=u[0],P=u[1];a.call(f,P,E,this)}},t.merge=function(a){var f=this;return ep(a)&&(a=new Map(a)),Rh(function(){zh(a)?i3(a).forEach(function(v){return f.set(v,a[v])}):Array.isArray(a)?a.forEach(function(v){var g=v[0],u=v[1];return f.set(g,u)}):Wm(a)?(r3(a)||Pr(19,a),a.forEach(function(v,g){return f.set(g,v)})):a!=null&&Pr(20,a)}),this},t.clear=function(){var a=this;Rh(function(){$T(function(){for(var f=xm(a.keys()),v;!(v=f()).done;){var g=v.value;a.delete(g)}})})},t.replace=function(a){var f=this;return Rh(function(){for(var v=NR(a),g=new Map,u=!1,E=xm(f.data_.keys()),P;!(P=E()).done;){var I=P.value;if(!v.has(I)){var B=f.delete(I);if(B)u=!0;else{var j=f.data_.get(I);g.set(I,j)}}}for(var $=xm(v.entries()),X;!(X=$()).done;){var J=X.value,G=J[0],le=J[1],oe=f.data_.has(G);if(f.set(G,le),f.data_.has(G)){var pe=f.data_.get(G);g.set(G,pe),oe||(u=!0)}}if(!u)if(f.data_.size!==g.size)f.keysAtom_.reportChanged();else for(var he=f.data_.keys(),ae=g.keys(),ve=he.next(),Se=ae.next();!ve.done;){if(ve.value!==Se.value){f.keysAtom_.reportChanged();break}ve=he.next(),Se=ae.next()}f.data_=g}),this},t.toString=function(){return"[object ObservableMap]"},t.toJSON=function(){return Array.from(this)},t.observe_=function(a,f){return qy(this,a)},t.intercept_=function(a){return Hy(this,a)},Ym(e,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Map"}}])}(),ep=Qd("ObservableMap",aE);function vS(e){return e[Symbol.toStringTag]="MapIterator",W1(e)}function NR(e){if(Wm(e)||ep(e))return e;if(Array.isArray(e))return new Map(e);if(zh(e)){var t=new Map;for(var i in e)t.set(i,e[i]);return t}else return Pr(21,e)}var jR={},oE=function(){function e(i,a,f){var v=this;a===void 0&&(a=qd),f===void 0&&(f="ObservableSet"),this.name_=void 0,this[Un]=jR,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=f,Lc(Set)||Pr(22),this.enhancer_=function(g,u){return a(g,u,f)},qf(function(){v.atom_=OT(v.name_),i&&v.replace(i)})}var t=e.prototype;return t.dehanceValue_=function(a){return this.dehancer!==void 0?this.dehancer(a):a},t.clear=function(){var a=this;Rh(function(){$T(function(){for(var f=xm(a.data_.values()),v;!(v=f()).done;){var g=v.value;a.delete(g)}})})},t.forEach=function(a,f){for(var v=xm(this),g;!(g=v()).done;){var u=g.value;a.call(f,u,u,this)}},t.add=function(a){var f=this;if(this.atom_,kl(this)){var v=zl(this,{type:Nf,object:this,newValue:a});if(!v)return this;a=v.newValue}if(!this.has(a)){Rh(function(){f.data_.add(f.enhancer_(a,void 0)),f.atom_.reportChanged()});var g=!1,u=Ic(this),E=u||g?{observableKind:"set",debugObjectName:this.name_,type:Nf,object:this,newValue:a}:null;u&&kc(this,E)}return this},t.delete=function(a){var f=this;if(kl(this)){var v=zl(this,{type:$v,object:this,oldValue:a});if(!v)return!1}if(this.has(a)){var g=!1,u=Ic(this),E=u||g?{observableKind:"set",debugObjectName:this.name_,type:$v,object:this,oldValue:a}:null;return Rh(function(){f.atom_.reportChanged(),f.data_.delete(a)}),u&&kc(this,E),!0}return!1},t.has=function(a){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(a))},t.entries=function(){var a=this.values();return bS({next:function(){var v=a.next(),g=v.value,u=v.done;return u?{value:void 0,done:u}:{value:[g,g],done:u}}})},t.keys=function(){return this.values()},t.values=function(){this.atom_.reportObserved();var a=this,f=this.data_.values();return bS({next:function(){var g=f.next(),u=g.value,E=g.done;return E?{value:void 0,done:E}:{value:a.dehanceValue_(u),done:E}}})},t.intersection=function(a){if(Ph(a)&&!Ou(a))return a.intersection(this);var f=new Set(this);return f.intersection(a)},t.union=function(a){if(Ph(a)&&!Ou(a))return a.union(this);var f=new Set(this);return f.union(a)},t.difference=function(a){return new Set(this).difference(a)},t.symmetricDifference=function(a){if(Ph(a)&&!Ou(a))return a.symmetricDifference(this);var f=new Set(this);return f.symmetricDifference(a)},t.isSubsetOf=function(a){return new Set(this).isSubsetOf(a)},t.isSupersetOf=function(a){return new Set(this).isSupersetOf(a)},t.isDisjointFrom=function(a){if(Ph(a)&&!Ou(a))return a.isDisjointFrom(this);var f=new Set(this);return f.isDisjointFrom(a)},t.replace=function(a){var f=this;return Ou(a)&&(a=new Set(a)),Rh(function(){Array.isArray(a)?(f.clear(),a.forEach(function(v){return f.add(v)})):Ph(a)?(f.clear(),a.forEach(function(v){return f.add(v)})):a!=null&&Pr("Cannot initialize set from "+a)}),this},t.observe_=function(a,f){return qy(this,a)},t.intercept_=function(a){return Hy(this,a)},t.toJSON=function(){return Array.from(this)},t.toString=function(){return"[object ObservableSet]"},t[Symbol.iterator]=function(){return this.values()},Ym(e,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:Symbol.toStringTag,get:function(){return"Set"}}])}(),Ou=Qd("ObservableSet",oE);function bS(e){return e[Symbol.toStringTag]="SetIterator",W1(e)}var xS=Object.create(null),wS="remove",sE=function(){function e(i,a,f,v){a===void 0&&(a=new Map),v===void 0&&(v=z3),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=i,this.values_=a,this.name_=f,this.defaultAnnotation_=v,this.keysAtom_=new Hf("ObservableObject.keys"),this.isPlainObject_=zh(this.target_)}var t=e.prototype;return t.getObservablePropValue_=function(a){return this.values_.get(a).get()},t.setObservablePropValue_=function(a,f){var v=this.values_.get(a);if(v instanceof Bc)return v.set(f),!0;if(kl(this)){var g=zl(this,{type:Lu,object:this.proxy_||this.target_,name:a,newValue:f});if(!g)return null;f=g.newValue}if(f=v.prepareNewValue_(f),f!==sn.UNCHANGED){var u=Ic(this),E=!1,P=u||E?{type:Lu,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:v.value_,name:a,newValue:f}:null;v.setNewValue_(f),u&&kc(this,P)}return!0},t.get_=function(a){return sn.trackingDerivation&&!Oh(this.target_,a)&&this.has_(a),this.target_[a]},t.set_=function(a,f,v){return v===void 0&&(v=!1),Oh(this.target_,a)?this.values_.has(a)?this.setObservablePropValue_(a,f):v?Reflect.set(this.target_,a,f):(this.target_[a]=f,!0):this.extend_(a,{value:f,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,v)},t.has_=function(a){if(!sn.trackingDerivation)return a in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var f=this.pendingKeys_.get(a);return f||(f=new Fd(a in this.target_,y0,"ObservableObject.key?",!1),this.pendingKeys_.set(a,f)),f.get()},t.make_=function(a,f){if(f===!0&&(f=this.defaultAnnotation_),f!==!1){if(!(a in this.target_)){var v;if((v=this.target_[Iu])!=null&&v[a])return;Pr(1,f.annotationType_,this.name_+"."+a.toString())}for(var g=this.target_;g&&g!==m0;){var u=zv(g,a);if(u){var E=f.make_(this,a,u,g);if(E===0)return;if(E===1)break}g=Object.getPrototypeOf(g)}CS(this,f,a)}},t.extend_=function(a,f,v,g){if(g===void 0&&(g=!1),v===!0&&(v=this.defaultAnnotation_),v===!1)return this.defineProperty_(a,f,g);var u=v.extend_(this,a,f,g);return u&&CS(this,v,a),u},t.defineProperty_=function(a,f,v){v===void 0&&(v=!1),this.keysAtom_;try{Dl();var g=this.delete_(a);if(!g)return g;if(kl(this)){var u=zl(this,{object:this.proxy_||this.target_,name:a,type:Nf,newValue:f.value});if(!u)return null;var E=u.newValue;f.value!==E&&(f=Hd({},f,{value:E}))}if(v){if(!Reflect.defineProperty(this.target_,a,f))return!1}else zu(this.target_,a,f);this.notifyPropertyAddition_(a,f.value)}finally{Ll()}return!0},t.defineObservableProperty_=function(a,f,v,g){g===void 0&&(g=!1),this.keysAtom_;try{Dl();var u=this.delete_(a);if(!u)return u;if(kl(this)){var E=zl(this,{object:this.proxy_||this.target_,name:a,type:Nf,newValue:f});if(!E)return null;f=E.newValue}var P=SS(a),I={configurable:sn.safeDescriptors?this.isPlainObject_:!0,enumerable:!0,get:P.get,set:P.set};if(g){if(!Reflect.defineProperty(this.target_,a,I))return!1}else zu(this.target_,a,I);var B=new Fd(f,v,"ObservableObject.key",!1);this.values_.set(a,B),this.notifyPropertyAddition_(a,B.value_)}finally{Ll()}return!0},t.defineComputedProperty_=function(a,f,v){v===void 0&&(v=!1),this.keysAtom_;try{Dl();var g=this.delete_(a);if(!g)return g;if(kl(this)){var u=zl(this,{object:this.proxy_||this.target_,name:a,type:Nf,newValue:void 0});if(!u)return null}f.name||(f.name="ObservableObject.key"),f.context=this.proxy_||this.target_;var E=SS(a),P={configurable:sn.safeDescriptors?this.isPlainObject_:!0,enumerable:!1,get:E.get,set:E.set};if(v){if(!Reflect.defineProperty(this.target_,a,P))return!1}else zu(this.target_,a,P);this.values_.set(a,new Bc(f)),this.notifyPropertyAddition_(a,void 0)}finally{Ll()}return!0},t.delete_=function(a,f){if(f===void 0&&(f=!1),this.keysAtom_,!Oh(this.target_,a))return!0;if(kl(this)){var v=zl(this,{object:this.proxy_||this.target_,name:a,type:wS});if(!v)return null}try{var g;Dl();var u=Ic(this),E=!1,P=this.values_.get(a),I=void 0;if(!P&&(u||E)){var B;I=(B=zv(this.target_,a))==null?void 0:B.value}if(f){if(!Reflect.deleteProperty(this.target_,a))return!1}else delete this.target_[a];if(P&&(this.values_.delete(a),P instanceof Fd&&(I=P.value_),ZT(P)),this.keysAtom_.reportChanged(),(g=this.pendingKeys_)==null||(g=g.get(a))==null||g.set(a in this.target_),u||E){var j={type:wS,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:I,name:a};u&&kc(this,j)}}finally{Ll()}return!0},t.observe_=function(a,f){return qy(this,a)},t.intercept_=function(a){return Hy(this,a)},t.notifyPropertyAddition_=function(a,f){var v,g=Ic(this),u=!1;if(g||u){var E=g||u?{type:Nf,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:a,newValue:f}:null;g&&kc(this,E)}(v=this.pendingKeys_)==null||(v=v.get(a))==null||v.set(!0),this.keysAtom_.reportChanged()},t.ownKeys_=function(){return this.keysAtom_.reportObserved(),Lm(this.target_)},t.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},e}();function tp(e,t){var i;if(Oh(e,Un))return e;var a=(i=t==null?void 0:t.name)!=null?i:"ObservableObject",f=new sE(e,new Map,String(a),q3(t));return Fy(e,Un,f),e}var FR=Qd("ObservableObjectAdministration",sE);function SS(e){return xS[e]||(xS[e]={get:function(){return this[Un].getObservablePropValue_(e)},set:function(i){return this[Un].setObservablePropValue_(e,i)}})}function C0(e){return g0(e)?FR(e[Un]):!1}function CS(e,t,i){var a;(a=e.target_[Iu])==null||delete a[i]}var $R=cE(0),VR=function(){var e=!1,t={};return Object.defineProperty(t,"0",{set:function(){e=!0}}),Object.create(t)[0]=1,e===!1}(),wb=0,lE=function(){};function UR(e,t){Object.setPrototypeOf?Object.setPrototypeOf(e.prototype,t):e.prototype.__proto__!==void 0?e.prototype.__proto__=t:e.prototype=t}UR(lE,Array.prototype);var X1=function(e){function t(a,f,v,g){var u;return v===void 0&&(v="ObservableArray"),g===void 0&&(g=!1),u=e.call(this)||this,qf(function(){var E=new Z1(v,f,g,!0);E.proxy_=u,MT(u,Un,E),a&&a.length&&u.spliceWithArray(0,0,a),VR&&Object.defineProperty(u,"0",$R)}),u}RT(t,e);var i=t.prototype;return i.concat=function(){this[Un].atom_.reportObserved();for(var f=arguments.length,v=new Array(f),g=0;g<f;g++)v[g]=arguments[g];return Array.prototype.concat.apply(this.slice(),v.map(function(u){return S0(u)?u.slice():u}))},i[Symbol.iterator]=function(){var a=this,f=0;return W1({next:function(){return f<a.length?{value:a[f++],done:!1}:{done:!0,value:void 0}}})},Ym(t,[{key:"length",get:function(){return this[Un].getArrayLength_()},set:function(f){this[Un].setArrayLength_(f)}},{key:Symbol.toStringTag,get:function(){return"Array"}}])}(lE);Object.entries(Fv).forEach(function(e){var t=e[0],i=e[1];t!=="concat"&&Fy(X1.prototype,t,i)});function cE(e){return{enumerable:!1,configurable:!0,get:function(){return this[Un].get_(e)},set:function(i){this[Un].set_(e,i)}}}function HR(e){zu(X1.prototype,""+e,cE(e))}function uE(e){if(e>wb){for(var t=wb;t<e+100;t++)HR(t);wb=e}}uE(1e3);function qR(e,t,i){return new X1(e,t,i)}function Vv(e,t){if(typeof e=="object"&&e!==null){if(S0(e))return t!==void 0&&Pr(23),e[Un].atom_;if(Ou(e))return e.atom_;if(ep(e)){if(t===void 0)return e.keysAtom_;var i=e.data_.get(t)||e.hasMap_.get(t);return i||Pr(25,t,Cx(e)),i}if(C0(e)){if(!t)return Pr(26);var a=e[Un].values_.get(t);return a||Pr(27,t,Cx(e)),a}if(H1(e)||w0(e)||jv(e))return e}else if(Lc(e)&&jv(e[Un]))return e[Un];Pr(28)}function GR(e,t){if(e||Pr(29),H1(e)||w0(e)||jv(e)||ep(e)||Ou(e))return e;if(e[Un])return e[Un];Pr(24,e)}function Cx(e,t){var i;if(t!==void 0)i=Vv(e,t);else{if(_y(e))return e.name;C0(e)||ep(e)||Ou(e)?i=GR(e):i=Vv(e)}return i.name_}function qf(e){var t=Jd(),i=b0(!0);Dl();try{return e()}finally{Ll(),x0(i),Ih(t)}}var TS=m0.toString;function hE(e,t,i){return i===void 0&&(i=-1),Tx(e,t,i)}function Tx(e,t,i,a,f){if(e===t)return e!==0||1/e===1/t;if(e==null||t==null)return!1;if(e!==e)return t!==t;var v=typeof e;if(v!=="function"&&v!=="object"&&typeof t!="object")return!1;var g=TS.call(e);if(g!==TS.call(t))return!1;switch(g){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:+e==0?1/+e===1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return typeof Symbol<"u"&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":i>=0&&i++;break}e=ES(e),t=ES(t);var u=g==="[object Array]";if(!u){if(typeof e!="object"||typeof t!="object")return!1;var E=e.constructor,P=t.constructor;if(E!==P&&!(Lc(E)&&E instanceof E&&Lc(P)&&P instanceof P)&&"constructor"in e&&"constructor"in t)return!1}if(i===0)return!1;i<0&&(i=-1),a=a||[],f=f||[];for(var I=a.length;I--;)if(a[I]===e)return f[I]===t;if(a.push(e),f.push(t),u){if(I=e.length,I!==t.length)return!1;for(;I--;)if(!Tx(e[I],t[I],i-1,a,f))return!1}else{var B=Object.keys(e),j=B.length;if(Object.keys(t).length!==j)return!1;for(var $=0;$<j;$++){var X=B[$];if(!(Oh(t,X)&&Tx(e[X],t[X],i-1,a,f)))return!1}}return a.pop(),f.pop(),!0}function ES(e){return S0(e)?e.slice():Wm(e)||ep(e)||Ph(e)||Ou(e)?Array.from(e.entries()):e}var MS,ZR=((MS=p0().Iterator)==null?void 0:MS.prototype)||{};function W1(e){return e[Symbol.iterator]=XR,Object.assign(Object.create(ZR),e)}function XR(){return this}["Symbol","Map","Set"].forEach(function(e){var t=p0();typeof t[e]>"u"&&Pr("MobX requires global '"+e+"' to be available or polyfilled")});typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__=="object"&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:uR,extras:{getDebugName:Cx},$mobx:Un});if(!U.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!OR)throw new Error("mobx-react-lite@3 requires mobx at least version 6 to be available");var Gy=vT();const Ex=f0(Gy),WR=_T({__proto__:null,default:Ex},[Gy]);function YR(e){e()}function KR(e){e||(e=YR),SR({reactionScheduler:e})}function QR(e){return CR(e)}var JR=1e4,eO=1e4,tO=function(){function e(t){var i=this;Object.defineProperty(this,"finalize",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"registrations",{enumerable:!0,configurable:!0,writable:!0,value:new Map}),Object.defineProperty(this,"sweepTimeout",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"sweep",{enumerable:!0,configurable:!0,writable:!0,value:function(a){a===void 0&&(a=JR),clearTimeout(i.sweepTimeout),i.sweepTimeout=void 0;var f=Date.now();i.registrations.forEach(function(v,g){f-v.registeredAt>=a&&(i.finalize(v.value),i.registrations.delete(g))}),i.registrations.size>0&&i.scheduleSweep()}}),Object.defineProperty(this,"finalizeAllImmediately",{enumerable:!0,configurable:!0,writable:!0,value:function(){i.sweep(0)}})}return Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(t,i,a){this.registrations.set(a,{value:i,registeredAt:Date.now()}),this.scheduleSweep()}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(t){this.registrations.delete(t)}}),Object.defineProperty(e.prototype,"scheduleSweep",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.sweepTimeout===void 0&&(this.sweepTimeout=setTimeout(this.sweep,eO))}}),e}(),nO=typeof FinalizationRegistry<"u"?FinalizationRegistry:tO,by=new nO(function(e){var t;(t=e.reaction)===null||t===void 0||t.dispose(),e.reaction=null}),Sb={exports:{}},Cb={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AS;function rO(){if(AS)return Cb;AS=1;var e=d0();function t(B,j){return B===j&&(B!==0||1/B===1/j)||B!==B&&j!==j}var i=typeof Object.is=="function"?Object.is:t,a=e.useState,f=e.useEffect,v=e.useLayoutEffect,g=e.useDebugValue;function u(B,j){var $=j(),X=a({inst:{value:$,getSnapshot:j}}),J=X[0].inst,G=X[1];return v(function(){J.value=$,J.getSnapshot=j,E(J)&&G({inst:J})},[B,$,j]),f(function(){return E(J)&&G({inst:J}),B(function(){E(J)&&G({inst:J})})},[B]),g($),$}function E(B){var j=B.getSnapshot;B=B.value;try{var $=j();return!i(B,$)}catch{return!0}}function P(B,j){return j()}var I=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?P:u;return Cb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:I,Cb}var PS;function iO(){return PS||(PS=1,Sb.exports=rO()),Sb.exports}var aO=iO();function RS(e){e.reaction=new ju("observer".concat(e.name),function(){var t;e.stateVersion=Symbol(),(t=e.onStoreChange)===null||t===void 0||t.call(e)})}function oO(e,t){t===void 0&&(t="observed");var i=Nt.useRef(null);if(!i.current){var a={reaction:null,onStoreChange:null,stateVersion:Symbol(),name:t,subscribe:function(u){return by.unregister(a),a.onStoreChange=u,a.reaction||(RS(a),a.stateVersion=Symbol()),function(){var E;a.onStoreChange=null,(E=a.reaction)===null||E===void 0||E.dispose(),a.reaction=null}},getSnapshot:function(){return a.stateVersion}};i.current=a}var f=i.current;f.reaction||(RS(f),by.register(i,f,f)),Nt.useDebugValue(f.reaction,QR),aO.useSyncExternalStore(f.subscribe,f.getSnapshot,f.getSnapshot);var v,g;if(f.reaction.track(function(){try{v=e()}catch(u){g=u}}),g)throw g;return v}var Tb,Eb,fE=typeof Symbol=="function"&&Symbol.for,sO=(Eb=(Tb=Object.getOwnPropertyDescriptor(function(){},"name"))===null||Tb===void 0?void 0:Tb.configurable)!==null&&Eb!==void 0?Eb:!1,OS=fE?Symbol.for("react.forward_ref"):typeof U.forwardRef=="function"&&U.forwardRef(function(e){return null}).$$typeof,IS=fE?Symbol.for("react.memo"):typeof U.memo=="function"&&U.memo(function(e){return null}).$$typeof;function Y1(e,t){var i;if(IS&&e.$$typeof===IS)throw new Error("[mobx-react-lite] You are trying to use `observer` on a function component wrapped in either another `observer` or `React.memo`. The observer already applies 'React.memo' for you.");var a=(i=void 0)!==null&&i!==void 0?i:!1,f=e,v=e.displayName||e.name;if(OS&&e.$$typeof===OS&&(a=!0,f=e.render,typeof f!="function"))throw new Error("[mobx-react-lite] `render` property of ForwardRef was not a function");var g=function(u,E){return oO(function(){return f(u,E)},v)};return g.displayName=e.displayName,sO&&Object.defineProperty(g,"name",{value:e.name,writable:!0,configurable:!0}),e.contextTypes&&(g.contextTypes=e.contextTypes),a&&(g=U.forwardRef(g)),g=U.memo(g),cO(e,g),g}var lO={$$typeof:!0,render:!0,compare:!0,type:!0,displayName:!0};function cO(e,t){Object.keys(e).forEach(function(i){lO[i]||Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(e,i))})}var Mb;KR(Gy.unstable_batchedUpdates);Mb=by.finalizeAllImmediately;const Fu=Object.create(null);Fu.open="0";Fu.close="1";Fu.ping="2";Fu.pong="3";Fu.message="4";Fu.upgrade="5";Fu.noop="6";const fv=Object.create(null);Object.keys(Fu).forEach(e=>{fv[Fu[e]]=e});const Mx={type:"error",data:"parser error"},dE=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",pE=typeof ArrayBuffer=="function",mE=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,K1=({type:e,data:t},i,a)=>dE&&t instanceof Blob?i?a(t):kS(t,a):pE&&(t instanceof ArrayBuffer||mE(t))?i?a(t):kS(new Blob([t]),a):a(Fu[e]+(t||"")),kS=(e,t)=>{const i=new FileReader;return i.onload=function(){const a=i.result.split(",")[1];t("b"+(a||""))},i.readAsDataURL(e)};function zS(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Ab;function uO(e,t){if(dE&&e.data instanceof Blob)return e.data.arrayBuffer().then(zS).then(t);if(pE&&(e.data instanceof ArrayBuffer||mE(e.data)))return t(zS(e.data));K1(e,!1,i=>{Ab||(Ab=new TextEncoder),t(Ab.encode(i))})}const DS="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",oy=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<DS.length;e++)oy[DS.charCodeAt(e)]=e;const hO=e=>{let t=e.length*.75,i=e.length,a,f=0,v,g,u,E;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const P=new ArrayBuffer(t),I=new Uint8Array(P);for(a=0;a<i;a+=4)v=oy[e.charCodeAt(a)],g=oy[e.charCodeAt(a+1)],u=oy[e.charCodeAt(a+2)],E=oy[e.charCodeAt(a+3)],I[f++]=v<<2|g>>4,I[f++]=(g&15)<<4|u>>2,I[f++]=(u&3)<<6|E&63;return P},fO=typeof ArrayBuffer=="function",Q1=(e,t)=>{if(typeof e!="string")return{type:"message",data:gE(e,t)};const i=e.charAt(0);return i==="b"?{type:"message",data:dO(e.substring(1),t)}:fv[i]?e.length>1?{type:fv[i],data:e.substring(1)}:{type:fv[i]}:Mx},dO=(e,t)=>{if(fO){const i=hO(e);return gE(i,t)}else return{base64:!0,data:e}},gE=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},yE="",pO=(e,t)=>{const i=e.length,a=new Array(i);let f=0;e.forEach((v,g)=>{K1(v,!1,u=>{a[g]=u,++f===i&&t(a.join(yE))})})},mO=(e,t)=>{const i=e.split(yE),a=[];for(let f=0;f<i.length;f++){const v=Q1(i[f],t);if(a.push(v),v.type==="error")break}return a};function gO(){return new TransformStream({transform(e,t){uO(e,i=>{const a=i.length;let f;if(a<126)f=new Uint8Array(1),new DataView(f.buffer).setUint8(0,a);else if(a<65536){f=new Uint8Array(3);const v=new DataView(f.buffer);v.setUint8(0,126),v.setUint16(1,a)}else{f=new Uint8Array(9);const v=new DataView(f.buffer);v.setUint8(0,127),v.setBigUint64(1,BigInt(a))}e.data&&typeof e.data!="string"&&(f[0]|=128),t.enqueue(f),t.enqueue(i)})}})}let Pb;function $_(e){return e.reduce((t,i)=>t+i.length,0)}function V_(e,t){if(e[0].length===t)return e.shift();const i=new Uint8Array(t);let a=0;for(let f=0;f<t;f++)i[f]=e[0][a++],a===e[0].length&&(e.shift(),a=0);return e.length&&a<e[0].length&&(e[0]=e[0].slice(a)),i}function yO(e,t){Pb||(Pb=new TextDecoder);const i=[];let a=0,f=-1,v=!1;return new TransformStream({transform(g,u){for(i.push(g);;){if(a===0){if($_(i)<1)break;const E=V_(i,1);v=(E[0]&128)===128,f=E[0]&127,f<126?a=3:f===126?a=1:a=2}else if(a===1){if($_(i)<2)break;const E=V_(i,2);f=new DataView(E.buffer,E.byteOffset,E.length).getUint16(0),a=3}else if(a===2){if($_(i)<8)break;const E=V_(i,8),P=new DataView(E.buffer,E.byteOffset,E.length),I=P.getUint32(0);if(I>Math.pow(2,21)-1){u.enqueue(Mx);break}f=I*Math.pow(2,32)+P.getUint32(4),a=3}else{if($_(i)<f)break;const E=V_(i,f);u.enqueue(Q1(v?E:Pb.decode(E),t)),a=0}if(f===0||f>e){u.enqueue(Mx);break}}}})}const _E=4;function Sa(e){if(e)return _O(e)}function _O(e){for(var t in Sa.prototype)e[t]=Sa.prototype[t];return e}Sa.prototype.on=Sa.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Sa.prototype.once=function(e,t){function i(){this.off(e,i),t.apply(this,arguments)}return i.fn=t,this.on(e,i),this};Sa.prototype.off=Sa.prototype.removeListener=Sa.prototype.removeAllListeners=Sa.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var i=this._callbacks["$"+e];if(!i)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var a,f=0;f<i.length;f++)if(a=i[f],a===t||a.fn===t){i.splice(f,1);break}return i.length===0&&delete this._callbacks["$"+e],this};Sa.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),i=this._callbacks["$"+e],a=1;a<arguments.length;a++)t[a-1]=arguments[a];if(i){i=i.slice(0);for(var a=0,f=i.length;a<f;++a)i[a].apply(this,t)}return this};Sa.prototype.emitReserved=Sa.prototype.emit;Sa.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Sa.prototype.hasListeners=function(e){return!!this.listeners(e).length};const T0=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,i)=>i(t,0),Il=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),vO="arraybuffer";function vE(e,...t){return t.reduce((i,a)=>(e.hasOwnProperty(a)&&(i[a]=e[a]),i),{})}const bO=Il.setTimeout,xO=Il.clearTimeout;function E0(e,t){t.useNativeTimers?(e.setTimeoutFn=bO.bind(Il),e.clearTimeoutFn=xO.bind(Il)):(e.setTimeoutFn=Il.setTimeout.bind(Il),e.clearTimeoutFn=Il.clearTimeout.bind(Il))}const wO=1.33;function SO(e){return typeof e=="string"?CO(e):Math.ceil((e.byteLength||e.size)*wO)}function CO(e){let t=0,i=0;for(let a=0,f=e.length;a<f;a++)t=e.charCodeAt(a),t<128?i+=1:t<2048?i+=2:t<55296||t>=57344?i+=3:(a++,i+=4);return i}function bE(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function TO(e){let t="";for(let i in e)e.hasOwnProperty(i)&&(t.length&&(t+="&"),t+=encodeURIComponent(i)+"="+encodeURIComponent(e[i]));return t}function EO(e){let t={},i=e.split("&");for(let a=0,f=i.length;a<f;a++){let v=i[a].split("=");t[decodeURIComponent(v[0])]=decodeURIComponent(v[1])}return t}class MO extends Error{constructor(t,i,a){super(t),this.description=i,this.context=a,this.type="TransportError"}}class J1 extends Sa{constructor(t){super(),this.writable=!1,E0(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,i,a){return super.emitReserved("error",new MO(t,i,a)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const i=Q1(t,this.socket.binaryType);this.onPacket(i)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,i={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(i)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const i=TO(t);return i.length?"?"+i:""}}class AO extends J1{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const i=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let a=0;this._polling&&(a++,this.once("pollComplete",function(){--a||i()})),this.writable||(a++,this.once("drain",function(){--a||i()}))}else i()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const i=a=>{if(this.readyState==="opening"&&a.type==="open"&&this.onOpen(),a.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(a)};mO(t,this.socket.binaryType).forEach(i),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,pO(t,i=>{this.doWrite(i,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",i=this.query||{};return this.opts.timestampRequests!==!1&&(i[this.opts.timestampParam]=bE()),!this.supportsBinary&&!i.sid&&(i.b64=1),this.createUri(t,i)}}let xE=!1;try{xE=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const PO=xE;function RO(){}class OO extends AO{constructor(t){if(super(t),typeof location<"u"){const i=location.protocol==="https:";let a=location.port;a||(a=i?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||a!==t.port}}doWrite(t,i){const a=this.request({method:"POST",data:t});a.on("success",i),a.on("error",(f,v)=>{this.onError("xhr post error",f,v)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(i,a)=>{this.onError("xhr poll error",i,a)}),this.pollXhr=t}}let Am=class dv extends Sa{constructor(t,i,a){super(),this.createRequest=t,E0(this,a),this._opts=a,this._method=a.method||"GET",this._uri=i,this._data=a.data!==void 0?a.data:null,this._create()}_create(){var t;const i=vE(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");i.xdomain=!!this._opts.xd;const a=this._xhr=this.createRequest(i);try{a.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){a.setDisableHeaderCheck&&a.setDisableHeaderCheck(!0);for(let f in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(f)&&a.setRequestHeader(f,this._opts.extraHeaders[f])}}catch{}if(this._method==="POST")try{a.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{a.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(a),"withCredentials"in a&&(a.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(a.timeout=this._opts.requestTimeout),a.onreadystatechange=()=>{var f;a.readyState===3&&((f=this._opts.cookieJar)===null||f===void 0||f.parseCookies(a.getResponseHeader("set-cookie"))),a.readyState===4&&(a.status===200||a.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof a.status=="number"?a.status:0)},0))},a.send(this._data)}catch(f){this.setTimeoutFn(()=>{this._onError(f)},0);return}typeof document<"u"&&(this._index=dv.requestsCount++,dv.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=RO,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete dv.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};Am.requestsCount=0;Am.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",LS);else if(typeof addEventListener=="function"){const e="onpagehide"in Il?"pagehide":"unload";addEventListener(e,LS,!1)}}function LS(){for(let e in Am.requests)Am.requests.hasOwnProperty(e)&&Am.requests[e].abort()}const IO=function(){const e=wE({xdomain:!1});return e&&e.responseType!==null}();class kO extends OO{constructor(t){super(t);const i=t&&t.forceBase64;this.supportsBinary=IO&&!i}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Am(wE,this.uri(),t)}}function wE(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||PO))return new XMLHttpRequest}catch{}if(!t)try{return new Il[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const SE=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class zO extends J1{get name(){return"websocket"}doOpen(){const t=this.uri(),i=this.opts.protocols,a=SE?{}:vE(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(a.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,i,a)}catch(f){return this.emitReserved("error",f)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const a=t[i],f=i===t.length-1;K1(a,this.supportsBinary,v=>{try{this.doWrite(a,v)}catch{}f&&T0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",i=this.query||{};return this.opts.timestampRequests&&(i[this.opts.timestampParam]=bE()),this.supportsBinary||(i.b64=1),this.createUri(t,i)}}const Rb=Il.WebSocket||Il.MozWebSocket;class DO extends zO{createSocket(t,i,a){return SE?new Rb(t,i,a):i?new Rb(t,i):new Rb(t)}doWrite(t,i){this.ws.send(i)}}class LO extends J1{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const i=yO(Number.MAX_SAFE_INTEGER,this.socket.binaryType),a=t.readable.pipeThrough(i).getReader(),f=gO();f.readable.pipeTo(t.writable),this._writer=f.writable.getWriter();const v=()=>{a.read().then(({done:u,value:E})=>{u||(this.onPacket(E),v())}).catch(u=>{})};v();const g={type:"open"};this.query.sid&&(g.data=`{"sid":"${this.query.sid}"}`),this._writer.write(g).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let i=0;i<t.length;i++){const a=t[i],f=i===t.length-1;this._writer.write(a).then(()=>{f&&T0(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const BO={websocket:DO,webtransport:LO,polling:kO},NO=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,jO=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Ax(e){if(e.length>8e3)throw"URI too long";const t=e,i=e.indexOf("["),a=e.indexOf("]");i!=-1&&a!=-1&&(e=e.substring(0,i)+e.substring(i,a).replace(/:/g,";")+e.substring(a,e.length));let f=NO.exec(e||""),v={},g=14;for(;g--;)v[jO[g]]=f[g]||"";return i!=-1&&a!=-1&&(v.source=t,v.host=v.host.substring(1,v.host.length-1).replace(/;/g,":"),v.authority=v.authority.replace("[","").replace("]","").replace(/;/g,":"),v.ipv6uri=!0),v.pathNames=FO(v,v.path),v.queryKey=$O(v,v.query),v}function FO(e,t){const i=/\/{2,9}/g,a=t.replace(i,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&a.splice(0,1),t.slice(-1)=="/"&&a.splice(a.length-1,1),a}function $O(e,t){const i={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(a,f,v){f&&(i[f]=v)}),i}const Px=typeof addEventListener=="function"&&typeof removeEventListener=="function",pv=[];Px&&addEventListener("offline",()=>{pv.forEach(e=>e())},!1);class $f extends Sa{constructor(t,i){if(super(),this.binaryType=vO,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(i=t,t=null),t){const a=Ax(t);i.hostname=a.host,i.secure=a.protocol==="https"||a.protocol==="wss",i.port=a.port,a.query&&(i.query=a.query)}else i.host&&(i.hostname=Ax(i.host).host);E0(this,i),this.secure=i.secure!=null?i.secure:typeof location<"u"&&location.protocol==="https:",i.hostname&&!i.port&&(i.port=this.secure?"443":"80"),this.hostname=i.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=i.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},i.transports.forEach(a=>{const f=a.prototype.name;this.transports.push(f),this._transportsByName[f]=a}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},i),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=EO(this.opts.query)),Px&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},pv.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const i=Object.assign({},this.opts.query);i.EIO=_E,i.transport=t,this.id&&(i.sid=this.id);const a=Object.assign({},this.opts,{query:i,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](a)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&$f.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const i=this.createTransport(t);i.open(),this.setTransport(i)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",i=>this._onClose("transport close",i))}onOpen(){this.readyState="open",$f.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const i=new Error("server error");i.code=t.data,this._onError(i);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let i=1;for(let a=0;a<this.writeBuffer.length;a++){const f=this.writeBuffer[a].data;if(f&&(i+=SO(f)),a>0&&i>this._maxPayload)return this.writeBuffer.slice(0,a);i+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,T0(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,i,a){return this._sendPacket("message",t,i,a),this}send(t,i,a){return this._sendPacket("message",t,i,a),this}_sendPacket(t,i,a,f){if(typeof i=="function"&&(f=i,i=void 0),typeof a=="function"&&(f=a,a=null),this.readyState==="closing"||this.readyState==="closed")return;a=a||{},a.compress=a.compress!==!1;const v={type:t,data:i,options:a};this.emitReserved("packetCreate",v),this.writeBuffer.push(v),f&&this.once("flush",f),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},i=()=>{this.off("upgrade",i),this.off("upgradeError",i),t()},a=()=>{this.once("upgrade",i),this.once("upgradeError",i)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?a():t()}):this.upgrading?a():t()),this}_onError(t){if($f.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,i){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Px&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const a=pv.indexOf(this._offlineEventListener);a!==-1&&pv.splice(a,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,i),this.writeBuffer=[],this._prevBufferLen=0}}}$f.protocol=_E;class VO extends $f{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let i=this.createTransport(t),a=!1;$f.priorWebsocketSuccess=!1;const f=()=>{a||(i.send([{type:"ping",data:"probe"}]),i.once("packet",B=>{if(!a)if(B.type==="pong"&&B.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",i),!i)return;$f.priorWebsocketSuccess=i.name==="websocket",this.transport.pause(()=>{a||this.readyState!=="closed"&&(I(),this.setTransport(i),i.send([{type:"upgrade"}]),this.emitReserved("upgrade",i),i=null,this.upgrading=!1,this.flush())})}else{const j=new Error("probe error");j.transport=i.name,this.emitReserved("upgradeError",j)}}))};function v(){a||(a=!0,I(),i.close(),i=null)}const g=B=>{const j=new Error("probe error: "+B);j.transport=i.name,v(),this.emitReserved("upgradeError",j)};function u(){g("transport closed")}function E(){g("socket closed")}function P(B){i&&B.name!==i.name&&v()}const I=()=>{i.removeListener("open",f),i.removeListener("error",g),i.removeListener("close",u),this.off("close",E),this.off("upgrading",P)};i.once("open",f),i.once("error",g),i.once("close",u),this.once("close",E),this.once("upgrading",P),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{a||i.open()},200):i.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const i=[];for(let a=0;a<t.length;a++)~this.transports.indexOf(t[a])&&i.push(t[a]);return i}}let UO=class extends VO{constructor(t,i={}){const a=typeof t=="object"?t:i;(!a.transports||a.transports&&typeof a.transports[0]=="string")&&(a.transports=(a.transports||["polling","websocket","webtransport"]).map(f=>BO[f]).filter(f=>!!f)),super(t,a)}};function HO(e,t="",i){let a=e;i=i||typeof location<"u"&&location,e==null&&(e=i.protocol+"//"+i.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=i.protocol+e:e=i.host+e),/^(https?|wss?):\/\//.test(e)||(typeof i<"u"?e=i.protocol+"//"+e:e="https://"+e),a=Ax(e)),a.port||(/^(http|ws)$/.test(a.protocol)?a.port="80":/^(http|ws)s$/.test(a.protocol)&&(a.port="443")),a.path=a.path||"/";const v=a.host.indexOf(":")!==-1?"["+a.host+"]":a.host;return a.id=a.protocol+"://"+v+":"+a.port+t,a.href=a.protocol+"://"+v+(i&&i.port===a.port?"":":"+a.port),a}const qO=typeof ArrayBuffer=="function",GO=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,CE=Object.prototype.toString,ZO=typeof Blob=="function"||typeof Blob<"u"&&CE.call(Blob)==="[object BlobConstructor]",XO=typeof File=="function"||typeof File<"u"&&CE.call(File)==="[object FileConstructor]";function ew(e){return qO&&(e instanceof ArrayBuffer||GO(e))||ZO&&e instanceof Blob||XO&&e instanceof File}function mv(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let i=0,a=e.length;i<a;i++)if(mv(e[i]))return!0;return!1}if(ew(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return mv(e.toJSON(),!0);for(const i in e)if(Object.prototype.hasOwnProperty.call(e,i)&&mv(e[i]))return!0;return!1}function WO(e){const t=[],i=e.data,a=e;return a.data=Rx(i,t),a.attachments=t.length,{packet:a,buffers:t}}function Rx(e,t){if(!e)return e;if(ew(e)){const i={_placeholder:!0,num:t.length};return t.push(e),i}else if(Array.isArray(e)){const i=new Array(e.length);for(let a=0;a<e.length;a++)i[a]=Rx(e[a],t);return i}else if(typeof e=="object"&&!(e instanceof Date)){const i={};for(const a in e)Object.prototype.hasOwnProperty.call(e,a)&&(i[a]=Rx(e[a],t));return i}return e}function YO(e,t){return e.data=Ox(e.data,t),delete e.attachments,e}function Ox(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let i=0;i<e.length;i++)e[i]=Ox(e[i],t);else if(typeof e=="object")for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(e[i]=Ox(e[i],t));return e}const KO=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],QO=5;var Cr;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Cr||(Cr={}));class JO{constructor(t){this.replacer=t}encode(t){return(t.type===Cr.EVENT||t.type===Cr.ACK)&&mv(t)?this.encodeAsBinary({type:t.type===Cr.EVENT?Cr.BINARY_EVENT:Cr.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let i=""+t.type;return(t.type===Cr.BINARY_EVENT||t.type===Cr.BINARY_ACK)&&(i+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(i+=t.nsp+","),t.id!=null&&(i+=t.id),t.data!=null&&(i+=JSON.stringify(t.data,this.replacer)),i}encodeAsBinary(t){const i=WO(t),a=this.encodeAsString(i.packet),f=i.buffers;return f.unshift(a),f}}function BS(e){return Object.prototype.toString.call(e)==="[object Object]"}class tw extends Sa{constructor(t){super(),this.reviver=t}add(t){let i;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");i=this.decodeString(t);const a=i.type===Cr.BINARY_EVENT;a||i.type===Cr.BINARY_ACK?(i.type=a?Cr.EVENT:Cr.ACK,this.reconstructor=new eI(i),i.attachments===0&&super.emitReserved("decoded",i)):super.emitReserved("decoded",i)}else if(ew(t)||t.base64)if(this.reconstructor)i=this.reconstructor.takeBinaryData(t),i&&(this.reconstructor=null,super.emitReserved("decoded",i));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let i=0;const a={type:Number(t.charAt(0))};if(Cr[a.type]===void 0)throw new Error("unknown packet type "+a.type);if(a.type===Cr.BINARY_EVENT||a.type===Cr.BINARY_ACK){const v=i+1;for(;t.charAt(++i)!=="-"&&i!=t.length;);const g=t.substring(v,i);if(g!=Number(g)||t.charAt(i)!=="-")throw new Error("Illegal attachments");a.attachments=Number(g)}if(t.charAt(i+1)==="/"){const v=i+1;for(;++i&&!(t.charAt(i)===","||i===t.length););a.nsp=t.substring(v,i)}else a.nsp="/";const f=t.charAt(i+1);if(f!==""&&Number(f)==f){const v=i+1;for(;++i;){const g=t.charAt(i);if(g==null||Number(g)!=g){--i;break}if(i===t.length)break}a.id=Number(t.substring(v,i+1))}if(t.charAt(++i)){const v=this.tryParse(t.substr(i));if(tw.isPayloadValid(a.type,v))a.data=v;else throw new Error("invalid payload")}return a}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,i){switch(t){case Cr.CONNECT:return BS(i);case Cr.DISCONNECT:return i===void 0;case Cr.CONNECT_ERROR:return typeof i=="string"||BS(i);case Cr.EVENT:case Cr.BINARY_EVENT:return Array.isArray(i)&&(typeof i[0]=="number"||typeof i[0]=="string"&&KO.indexOf(i[0])===-1);case Cr.ACK:case Cr.BINARY_ACK:return Array.isArray(i)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class eI{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const i=YO(this.reconPack,this.buffers);return this.finishedReconstruction(),i}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const tI=Object.freeze(Object.defineProperty({__proto__:null,Decoder:tw,Encoder:JO,get PacketType(){return Cr},protocol:QO},Symbol.toStringTag,{value:"Module"}));function Ec(e,t,i){return e.on(t,i),function(){e.off(t,i)}}const nI=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class TE extends Sa{constructor(t,i,a){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=i,a&&a.auth&&(this.auth=a.auth),this._opts=Object.assign({},a),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[Ec(t,"open",this.onopen.bind(this)),Ec(t,"packet",this.onpacket.bind(this)),Ec(t,"error",this.onerror.bind(this)),Ec(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...i){var a,f,v;if(nI.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(i.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(i),this;const g={type:Cr.EVENT,data:i};if(g.options={},g.options.compress=this.flags.compress!==!1,typeof i[i.length-1]=="function"){const I=this.ids++,B=i.pop();this._registerAckCallback(I,B),g.id=I}const u=(f=(a=this.io.engine)===null||a===void 0?void 0:a.transport)===null||f===void 0?void 0:f.writable,E=this.connected&&!(!((v=this.io.engine)===null||v===void 0)&&v._hasPingExpired());return this.flags.volatile&&!u||(E?(this.notifyOutgoingListeners(g),this.packet(g)):this.sendBuffer.push(g)),this.flags={},this}_registerAckCallback(t,i){var a;const f=(a=this.flags.timeout)!==null&&a!==void 0?a:this._opts.ackTimeout;if(f===void 0){this.acks[t]=i;return}const v=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let u=0;u<this.sendBuffer.length;u++)this.sendBuffer[u].id===t&&this.sendBuffer.splice(u,1);i.call(this,new Error("operation has timed out"))},f),g=(...u)=>{this.io.clearTimeoutFn(v),i.apply(this,u)};g.withError=!0,this.acks[t]=g}emitWithAck(t,...i){return new Promise((a,f)=>{const v=(g,u)=>g?f(g):a(u);v.withError=!0,i.push(v),this.emit(t,...i)})}_addToQueue(t){let i;typeof t[t.length-1]=="function"&&(i=t.pop());const a={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((f,...v)=>a!==this._queue[0]?void 0:(f!==null?a.tryCount>this._opts.retries&&(this._queue.shift(),i&&i(f)):(this._queue.shift(),i&&i(null,...v)),a.pending=!1,this._drainQueue())),this._queue.push(a),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const i=this._queue[0];i.pending&&!t||(i.pending=!0,i.tryCount++,this.flags=i.flags,this.emit.apply(this,i.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Cr.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,i){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,i),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(a=>String(a.id)===t)){const a=this.acks[t];delete this.acks[t],a.withError&&a.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Cr.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Cr.EVENT:case Cr.BINARY_EVENT:this.onevent(t);break;case Cr.ACK:case Cr.BINARY_ACK:this.onack(t);break;case Cr.DISCONNECT:this.ondisconnect();break;case Cr.CONNECT_ERROR:this.destroy();const a=new Error(t.data.message);a.data=t.data.data,this.emitReserved("connect_error",a);break}}onevent(t){const i=t.data||[];t.id!=null&&i.push(this.ack(t.id)),this.connected?this.emitEvent(i):this.receiveBuffer.push(Object.freeze(i))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const i=this._anyListeners.slice();for(const a of i)a.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const i=this;let a=!1;return function(...f){a||(a=!0,i.packet({type:Cr.ACK,id:t,data:f}))}}onack(t){const i=this.acks[t.id];typeof i=="function"&&(delete this.acks[t.id],i.withError&&t.data.unshift(null),i.apply(this,t.data))}onconnect(t,i){this.id=t,this.recovered=i&&this._pid===i,this._pid=i,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Cr.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const i=this._anyListeners;for(let a=0;a<i.length;a++)if(t===i[a])return i.splice(a,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const i=this._anyOutgoingListeners;for(let a=0;a<i.length;a++)if(t===i[a])return i.splice(a,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const i=this._anyOutgoingListeners.slice();for(const a of i)a.apply(this,t.data)}}}function Km(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Km.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),i=Math.floor(t*this.jitter*e);e=(Math.floor(t*10)&1)==0?e-i:e+i}return Math.min(e,this.max)|0};Km.prototype.reset=function(){this.attempts=0};Km.prototype.setMin=function(e){this.ms=e};Km.prototype.setMax=function(e){this.max=e};Km.prototype.setJitter=function(e){this.jitter=e};class Ix extends Sa{constructor(t,i){var a;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(i=t,t=void 0),i=i||{},i.path=i.path||"/socket.io",this.opts=i,E0(this,i),this.reconnection(i.reconnection!==!1),this.reconnectionAttempts(i.reconnectionAttempts||1/0),this.reconnectionDelay(i.reconnectionDelay||1e3),this.reconnectionDelayMax(i.reconnectionDelayMax||5e3),this.randomizationFactor((a=i.randomizationFactor)!==null&&a!==void 0?a:.5),this.backoff=new Km({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(i.timeout==null?2e4:i.timeout),this._readyState="closed",this.uri=t;const f=i.parser||tI;this.encoder=new f.Encoder,this.decoder=new f.Decoder,this._autoConnect=i.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var i;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(i=this.backoff)===null||i===void 0||i.setMin(t),this)}randomizationFactor(t){var i;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(i=this.backoff)===null||i===void 0||i.setJitter(t),this)}reconnectionDelayMax(t){var i;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(i=this.backoff)===null||i===void 0||i.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new UO(this.uri,this.opts);const i=this.engine,a=this;this._readyState="opening",this.skipReconnect=!1;const f=Ec(i,"open",function(){a.onopen(),t&&t()}),v=u=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",u),t?t(u):this.maybeReconnectOnOpen()},g=Ec(i,"error",v);if(this._timeout!==!1){const u=this._timeout,E=this.setTimeoutFn(()=>{f(),v(new Error("timeout")),i.close()},u);this.opts.autoUnref&&E.unref(),this.subs.push(()=>{this.clearTimeoutFn(E)})}return this.subs.push(f),this.subs.push(g),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(Ec(t,"ping",this.onping.bind(this)),Ec(t,"data",this.ondata.bind(this)),Ec(t,"error",this.onerror.bind(this)),Ec(t,"close",this.onclose.bind(this)),Ec(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(i){this.onclose("parse error",i)}}ondecoded(t){T0(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,i){let a=this.nsps[t];return a?this._autoConnect&&!a.active&&a.connect():(a=new TE(this,t,i),this.nsps[t]=a),a}_destroy(t){const i=Object.keys(this.nsps);for(const a of i)if(this.nsps[a].active)return;this._close()}_packet(t){const i=this.encoder.encode(t);for(let a=0;a<i.length;a++)this.engine.write(i[a],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,i){var a;this.cleanup(),(a=this.engine)===null||a===void 0||a.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,i),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const i=this.backoff.duration();this._reconnecting=!0;const a=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(f=>{f?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",f)):t.onreconnect()}))},i);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const ty={};function gv(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const i=HO(e,t.path||"/socket.io"),a=i.source,f=i.id,v=i.path,g=ty[f]&&v in ty[f].nsps,u=t.forceNew||t["force new connection"]||t.multiplex===!1||g;let E;return u?E=new Ix(a,t):(ty[f]||(ty[f]=new Ix(a,t)),E=ty[f]),i.query&&!t.query&&(t.query=i.queryKey),E.socket(i.path,t)}Object.assign(gv,{Manager:Ix,Socket:TE,io:gv,connect:gv});class rI{constructor(){Ni(this,"socket",null);Ni(this,"planePosition",[]);Ni(this,"isConnected",!1);Ni(this,"overlap_conflicts",null);Ni(this,"overlapTaxiways",null);Ni(this,"overlaps",{nodes:[],taxiways:[]});Ni(this,"plannedFlights",{});Ni(this,"activeFlights",{});Ni(this,"pathConflicts",[]);Ni(this,"isDragging",!1);Ni(this,"draggedFlightId",null);Ni(this,"conflictResolutions",[]);Ni(this,"selectedConflict",null);Ni(this,"analysis",null);Ni(this,"resolutions",[]);Ni(this,"conflictResolutionLoading",!1);Ni(this,"future_conflicts",[]);Ni(this,"current_conflicts",[]);Ni(this,"aircraftColorMapping",new Map);Ni(this,"planningColors",["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec"]);Ni(this,"activeColorIndex",0);Ni(this,"planningColorIndex",0);Ni(this,"currentSimulation",{conflict_id:null,solution_id:null,simulated_state:null,original_state:null,solution:null,success:!1,message:"",timestamp:null});IR(this),this.connect()}convertNumpyData(t){if(t==null)return t;if(Array.isArray(t))return t.map(i=>this.convertNumpyData(i));if(typeof t=="object"){const i={};for(const[a,f]of Object.entries(t))i[a]=this.convertNumpyData(f);return i}if(typeof t=="object"&&t.toString&&(t.toString().includes("np.float")||t.toString().includes("np.int")||t.toString().includes("numpy."))){const i=Number(t);return isNaN(i)?t:i}return t}connect(){this.socket=gv("wss://nonpenetrating-holly-unmathematically.ngrok-free.dev",{transports:["websocket"]}),this.socket.on("simulation_status",t=>{console.log(`: ${t.status} - ${t.message}`)}),this.socket.on("system_state_update",t=>{console.log("System state updated:",t),this.updatePlanePosition(t.aircraft_positions),this.updateFlightPlans({planned_flights:t.planned_flights||{},active_flights:t.active_flights||{}}),t&&t.overlaps&&this.updateOverlaps(t.overlaps)}),this.socket.on("flight_adjustment_result",t=>{console.log("Flight adjustment result:",t),this.setDraggingState(!1,null),t.success?(console.log(` ${t.flight_id} `),this.updateFlightStartTime(t.flight_id,parseFloat(t.adjust_time))):console.error(`: ${t.message}`)}),this.socket.on("conflicts_update",t=>{console.log("conflicts_update:",t),this.updateOverlapTaxiways(t),this.updateConflictResolutions(t.current),this.updateConflicts(t)}),this.socket.on("connect",()=>console.log("Connected to WebSocket server")),this.socket.on("disconnect",()=>console.log("Disconnected from WebSocket server")),this.socket.on("connect_error",t=>{console.error("Connection Error:",t)}),this.socket.on("conflict_resolutions_result",t=>{console.log(t),this.conflictResolutionLoading=!1,t.success?(console.log(":",t.data),this.selectedConflict=t.data.conflict,this.resolution_analysis=t.data.analysis,this.resolutions=t.data.recommendations):console.error(":",t.message)}),this.socket.on("conflict_resolution_applied",t=>{console.log(":",t),this.conflictResolutionLoading=!1,t.status==="applied"?(console.log(":"),this.updateConflictStatus(t.conflict_id,"resolved"),console.log(":",t.message)):console.error(":",t.message)}),this.socket.on("conflict_resolution_simulated",t=>{console.log(":",t),this.currentSimulation={conflict_id:t.conflict_id,solution_id:t.solution_id,success:t.success,message:t.message,simulated_state:t.simulated_state,original_state:t.original_state,solution:t.solution,timestamp:new Date().toISOString()},console.log(":",this.currentSimulation.simulated_state),t.success?(console.log(` - ID: ${t.conflict_id}, ID: ${t.solution_id}`),console.log(":",t.simulated_state)):console.error(":",t.message)})}startSimulate(){console.log("Starting simulation..."),this.socket&&this.socket.emit("simulate_start")}stoptSimulate(){console.log("Stop simulation..."),this.socket&&this.socket.emit("simulate_stop")}getSystemState(){console.log("..."),this.socket&&this.socket.emit("get_system_state")}adjustFlightTime(t,i){this.socket&&this.socket.connected?(this.setDraggingState(!0,t),console.log(`: ${t}, : ${i} `),this.socket.emit("adjust_flight_time",{flight_id:t,adjust_time:i.toString()})):console.error("WebSocket")}updatePlanePosition(t){t&&typeof t=="object"?this.planePosition=Object.entries(t).map(([i,a])=>({id:i,coords:a.coords,cur_path:[],trajectory:a.trajectory,speed:a.speed,state:a.state,path_progress:a.path_progress,position:a.position,departure_time:a.departure_time,remaining_taxi_time:a.remaining_taxi_time,time_to_takeoff:a.time_to_takeoff})):this.planePosition=[]}updateFlightPlans(t){if(t){const i=this.convertNumpyData(t);console.log(":",i),this.plannedFlights=i.planned_flights,this.activeFlights=i.active_flights}}updateFlightStartTime(t,i){console.log("",this.plannedFlights,this.plannedFlights[t].start_time),this.plannedFlights&&this.plannedFlights[t]&&(this.plannedFlights[t].start_time=this.plannedFlights[t].start_time+i,this.plannedFlights[t].start_time<=0&&(this.plannedFlights[t].start_time=0),console.log(` ${t} start_time: ${this.plannedFlights[t].start_time}`))}setDraggingState(t,i=null){this.isDragging=t,this.draggedFlightId=i}updateConflicts(t){console.log(":",t),console.log("current_conflicts:",t.current),console.log("future_conflicts:",t.future),this.current_conflicts=t.current,this.future_conflicts=t.future}updateOverlapTaxiways(t){this.overlapTaxiways=t.current}updateOverlaps(t){try{const i=this.convertNumpyData(t),a=i&&typeof i=="object"?i:{nodes:[],taxiways:[]};this.overlaps={nodes:Array.isArray(a.nodes)?a.nodes:[],taxiways:Array.isArray(a.taxiways)?a.taxiways:[]}}catch(i){console.error("  overlaps :",i),this.overlaps={nodes:[],taxiways:[]}}}updateConflictResolutions(t){try{console.log(" :",t),this.conflictResolutions=t,console.log(" :",this.conflictResolutions)}catch(i){console.error(" :",i),this.conflictResolutions=[]}}getConflictResolutions(t){this.conflictResolutionLoading=!0,this.socket&&this.socket.connected?(console.log("",t),this.socket.emit("get_conflict_resolutions",{conflict_id:t})):(console.error("WebSocket"),this.conflictResolutionLoading=!1)}applyConflictResolution(t,i){this.conflictResolutionLoading=!0,this.socket&&this.socket.connected?(console.log("",t,i),this.socket.emit("apply_conflict_resolution",{conflict_id:t,solution_id:i})):(console.error("WebSocket"),this.conflictResolutionLoading=!1)}updateConflictStatus(t,i){this.conflictResolutions=this.conflictResolutions.map(a=>{var E;const f=((E=a.analysis)==null?void 0:E.conflict_id)??a.id,v=P=>{if(typeof P=="string"){const I=P.split("_");return I[I.length-1]}return P},g=v(f),u=v(t);return g===u?{...a,status:i}:a})}getCurrentSimulation(){return this.currentSimulation}hasCurrentSimulation(){return this.currentSimulation.conflict_id!==null&&this.currentSimulation.solution_id!==null}clearCurrentSimulation(){this.currentSimulation={conflict_id:null,solution_id:null,simulated_state:null,original_state:null,solution:null,success:!1,message:"",timestamp:null}}getAircraftColor(t,i=!1){if(this.aircraftColorMapping.has(t))return this.aircraftColorMapping.get(t);const a=new Set(this.aircraftColorMapping.values());let f=null;for(let v=0;v<this.planningColors.length;v++){const g=this.planningColors[(this.planningColorIndex+v)%this.planningColors.length];if(!a.has(g)){f=g,this.planningColorIndex=(this.planningColorIndex+v+1)%this.planningColors.length;break}}return f||(f=this.planningColors[this.planningColorIndex%this.planningColors.length],this.planningColorIndex++),this.aircraftColorMapping.set(t,f),f}setAircraftColor(t,i){this.aircraftColorMapping.set(t,i)}getAllAircraftColors(){return new Map(this.aircraftColorMapping)}clearAircraftColors(){this.aircraftColorMapping.clear(),this.activeColorIndex=0,this.planningColorIndex=0}isAircraftActive(t){return this.planePosition&&this.planePosition.some(i=>i.id===t)}}const mn=new rI,ba={ACTIVE:"#95de64",PLANNING:"#69c0ff"},Ob={OPPOSITE:"#FF4444",SAME_DIRECTION:"#FF8800",CROSSING:"#6699CC"},U_={EMERGENCY_MODE:"#dc3545",WAITING:"#ffc107",REROUTING:"#17a2b8",DEFAULT:"#6c757d"},qo={LINE_WIDTH:3,ACTIVE_DASH:"none",PLANNING_DASH:"5,5"},Ml={LIGHT_GRAY:"#9ca3af",LIGHT_GRAY_HOVER:"#6b7280"},H_=(e,...t)=>{},iI=Y1(()=>{const e=U.useRef(null),t=U.useRef(null),i=U.useRef({}),a=U.useRef({}),f=U.useRef({}),v="/taxiwayline2.geojson",{t:g}=U1(),u=40,E=32;return U.useEffect(()=>{let P;if(!e.current){console.error("");return}fetch(v).then(Xe=>Xe.json()).then(Xe=>{if(H_("GeoJSON:",Xe),H_(":",e.current),!e.current){console.error("");return}t.current=new ey.Map({container:e.current,style:{version:8,sources:{},layers:[]},center:[116.593238,40.051893],zoom:23,maxZoom:24,bearing:90}),t.current.on("load",()=>{H_(),t.current.addSource("taxiways",{type:"geojson",data:Xe,promoteId:"id"}),t.current.addLayer({id:"taxiway-lines",type:"line",source:"taxiways",paint:{"line-color":["case",["==",["get","name"],null],"#e8e8e8","#f8f8f8"],"line-width":["interpolate",["linear"],["zoom"],0,.5,12,2,18,8],"line-opacity":1},layout:{"line-cap":"round","line-join":"round"}}),t.current.on("click","taxiway-lines",ft=>{if(ft.features&&ft.features.length>0){const Ke=ft.features[0],Je=Ke.properties.id,Vt=Ke.properties.name||"";new ey.Popup().setLngLat(ft.lngLat).setHTML(`
                  <div style="padding: 10px;">
                    <h3 style="margin: 0 0 10px 0; color: #333;">${g("road.info")}</h3>
                    <p style="margin: 5px 0;"><strong>${g("road.id")}:</strong> ${Je}</p>
                    <p style="margin: 5px 0;"><strong>${g("road.name")}:</strong> ${Vt}</p>
                    <p style="margin: 5px 0;"><strong>${g("coords")}:</strong> ${ft.lngLat.lng.toFixed(6)}, ${ft.lngLat.lat.toFixed(6)}</p>
                  </div>
                `).addTo(t.current),console.log(":",{id:Je,name:Vt,coordinates:ft.lngLat})}}),t.current.on("mouseenter","taxiway-lines",()=>{t.current.getCanvas().style.cursor="pointer"}),t.current.on("mouseleave","taxiway-lines",()=>{t.current.getCanvas().style.cursor=""});const mt=new ey.LngLatBounds;Xe.features.forEach(ft=>{ft.geometry.coordinates[0].forEach(Ke=>{mt.extend(Ke)})}),mt.isEmpty()||t.current.fitBounds(mt,{padding:50,duration:1e3,bearing:90}),console.log(""),mn.startSimulate()})}).catch(Xe=>console.error(":",Xe));const I=new Set,B=new Map,j=Xe=>{if(B.has(Xe)){const mt=B.get(Xe);I.delete(mt),B.delete(Xe)}},$=async()=>{if(!t.current)return;const Xe=new Set(Object.keys(i.current)),mt=new Set;mn.planePosition.forEach(async ft=>{var kt,Qt,ln,Sn,bn,gn,En;const{id:Ke,coords:Je,cur_path:Vt,trajectory:$t}=ft,Kt=mn.getAircraftColor(Ke,!0);let Gt=0;if(Xe.has(Ke)){const{marker:Ln,lastPosition:Pn}=i.current[Ke];if(Pn&&Array.isArray(Pn)&&Pn.length>=2){const Jn=Je[0]-Pn[0],br=Je[1]-Pn[1];if(Math.abs(Jn)>1e-7||Math.abs(br)>1e-7){const Lr=(Je[1]+Pn[1])/2*Math.PI/180,Ge=Jn*Math.cos(Lr),te=Math.atan2(br,Ge)*(180/Math.PI),ie=t.current?t.current.getBearing():0;Gt=90-te-ie;const Ce=Ln.getElement().querySelector(".airplane-rotate");Ce&&(Ce.style.transform=`rotate(${Gt}deg)`,Ce.style.transformOrigin="center center")}}const Hn=(gn=mn.plannedFlights)==null?void 0:gn[Ke],or=(Hn==null?void 0:Hn.display_offset)!=null?Hn.display_offset:i.current[Ke].lastDisplayOffset??0,dr=G(Pn,[Je[0],Je[1]],$t)||i.current[Ke].lastPerp,sr=le([Je[0],Je[1]],Pn,$t,or,dr);Ln.setLngLat(sr),dr&&(i.current[Ke].lastPerp=dr),(Hn==null?void 0:Hn.display_offset)!=null&&(i.current[Ke].lastDisplayOffset=Hn.display_offset);const Gn=JSON.stringify($t),pr=$t?$t.length:0;if(i.current[Ke].lastTrajectory!==Gn||i.current[Ke].lastTrajectoryHash!==pr)try{const Jn=(En=mn.plannedFlights)==null?void 0:En[Ke],br=(Jn==null?void 0:Jn.display_offset)||0;he(Ke,$t,Kt,br),i.current[Ke].lastTrajectory=Gn,i.current[Ke].lastTrajectoryHash=pr}catch(Jn){console.error(` ${Ke}:`,Jn)}i.current[Ke].lastPosition=[...Je],i.current[Ke].count=0}else{const Ln=new lv.Marker({element:X(Kt,u,Gt)}).setLngLat(le([Je[0],Je[1]],null,$t,((Qt=(kt=mn.plannedFlights)==null?void 0:kt[Ke])==null?void 0:Qt.display_offset)||0,null)).setPopup(new lv.Popup().setHTML(`<h1>${Ke}</h1>`)).addTo(t.current);i.current[Ke]={marker:Ln,lastPosition:[...Je],lastTrajectory:null,lastTrajectoryHash:null,lastPerp:G(null,[Je[0],Je[1]],$t)||null,lastDisplayOffset:((Sn=(ln=mn.plannedFlights)==null?void 0:ln[Ke])==null?void 0:Sn.display_offset)??0};try{const Pn=(bn=mn.plannedFlights)==null?void 0:bn[Ke],Hn=(Pn==null?void 0:Pn.display_offset)||0;he(Ke,$t,Kt,Hn),i.current[Ke].lastTrajectory=JSON.stringify($t),i.current[Ke].lastTrajectoryHash=$t?$t.length:0}catch(Pn){console.error(` ${Ke}:`,Pn)}}mt.add(Ke)}),Object.keys(i.current).forEach(ft=>{if(!mt.has(ft))if(!i.current[ft].count)i.current[ft].count=1;else if(i.current[ft].count<5)i.current[ft].count+=1;else{const{marker:Ke}=i.current[ft];Ke.remove(),Se(ft),delete i.current[ft],j(ft)}})};function X(Xe="#FF3B30",mt=32,ft=-90){const Ke=document.createElement("div");return Ke.className="airplane-marker",Ke.style.cssText=`display: block; width: ${mt}px; height: ${mt}px;`,Ke.innerHTML=`
        <div class="airplane-rotate" style="
          width: ${mt}px;
          height: ${mt}px;
          transform: rotate(${ft}deg);
          transform-origin: center center;
          will-change: transform;
        ">
          <svg viewBox="0 0 1024 1024" width="${mt}" height="${mt}" style="color: ${Xe}">
            <path fill="currentColor" d="M512 174.933333c23.466667 0 42.666667 8.533333 59.733333 25.6s25.6 36.266667 25.6 59.733334v192l206.933334 185.6c6.4 4.266667 10.666667 12.8 14.933333 21.333333s6.4 17.066667 6.4 25.6v23.466667c0 8.533333-2.133333 12.8-6.4 14.933333s-10.666667 2.133333-17.066667-2.133333l-204.8-140.8v149.333333c38.4 36.266667 57.6 57.6 57.6 64v36.266667c0 8.533333-2.133333 12.8-6.4 17.066666-4.266667 2.133333-10.666667 2.133333-19.2 0l-117.333333-72.533333-117.333333 72.533333c-6.4 4.266667-12.8 4.266667-19.2 0s-6.4-8.533333-6.4-17.066666v-36.266667c0-8.533333 19.2-29.866667 57.6-64v-149.333333l-204.8 140.8c-6.4 4.266667-12.8 6.4-17.066667 2.133333-4.266667-2.133333-6.4-8.533333-6.4-14.933333V684.8c0-8.533333 2.133333-17.066667 6.4-25.6 4.266667-8.533333 8.533333-17.066667 14.933333-21.333333l206.933334-185.6v-192c0-23.466667 8.533333-42.666667 25.6-59.733334s36.266667-25.6 59.733333-25.6z"/>
          </svg>
        </div>
      `,Ke}function J(Xe,mt){const ft=Number(mt)||0;let Ke;return ft<=10?Ke=3:ft>=20?Ke=9:ft<=15?Ke=3+(ft-10)/5*3:Ke=6+(ft-15)/5*3,(Number(Xe)||0)*Ke}function G(Xe,mt,ft){if(!t.current)return null;const Ke=Je=>Array.isArray(Je)&&Je.length>=2&&Number.isFinite(Je[0])&&Number.isFinite(Je[1])&&Math.abs(Je[0])<=180&&Math.abs(Je[1])<=90;if(Ke(Xe)&&Ke(mt)){const Je=t.current.project({lng:Xe[0],lat:Xe[1]}),Vt=t.current.project({lng:mt[0],lat:mt[1]}),$t=Vt.x-Je.x,Kt=Vt.y-Je.y,Gt=Math.sqrt($t*$t+Kt*Kt);if(Gt>1e-4&&Number.isFinite(Gt)){const kt=$t/Gt;return{x:-(Kt/Gt),y:kt}}}if(ft&&Array.isArray(ft)&&ft.length>0){const Je=ft[ft.length-1];if(Array.isArray(Je)&&Je.length>=2){const Vt=Je[Je.length-2],$t=Je[Je.length-1];if(Ke(Vt)&&Ke($t)){const Kt=t.current.project({lng:Vt[0],lat:Vt[1]}),Gt=t.current.project({lng:$t[0],lat:$t[1]}),kt=Gt.x-Kt.x,Qt=Gt.y-Kt.y,ln=Math.sqrt(kt*kt+Qt*Qt);if(ln>1e-4&&Number.isFinite(ln)){const Sn=kt/ln;return{x:-(Qt/ln),y:Sn}}}}}return null}function le(Xe,mt,ft,Ke,Je){const Vt=J(Ke,t.current?t.current.getZoom():0),$t=()=>Array.isArray(mt)&&mt.length>=2&&Number.isFinite(mt[0])&&Number.isFinite(mt[1])?{lng:mt[0],lat:mt[1]}:{lng:Number(Xe==null?void 0:Xe[0])||0,lat:Number(Xe==null?void 0:Xe[1])||0};if(!Vt)return{lng:Xe[0],lat:Xe[1]};const Kt=G(mt,Xe,ft)||Je;if(!Kt||!Number.isFinite(Kt.x)||!Number.isFinite(Kt.y))return{lng:Xe[0],lat:Xe[1]};if(!Xe||!Array.isArray(Xe)||Xe.length<2||!Number.isFinite(Xe[0])||!Number.isFinite(Xe[1]))return $t();const Gt=t.current.project({lng:Xe[0],lat:Xe[1]}),kt={x:Gt.x+Kt.x*Vt,y:Gt.y+Kt.y*Vt},Qt=t.current.unproject(kt);return{lng:Qt.lng,lat:Qt.lat}}function oe(Xe,mt=10,ft=5){const[Ke,Je,Vt,$t]=Xe.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);return Array.from({length:ft},(Kt,Gt)=>{const kt=(1-Gt/mt).toFixed(2);return`rgba(${Je}, ${Vt}, ${$t}, ${kt})`})}function pe(Xe,mt=10,ft=.6){const Ke=Xe.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(!Ke)return Array.from({length:mt},()=>Xe);const Je=parseInt(Ke[1],10),Vt=parseInt(Ke[2],10),$t=parseInt(Ke[3],10);return Array.from({length:mt},(Kt,Gt)=>{const kt=mt<=1?1:Gt/(mt-1),Qt=Math.min(1,kt*ft),ln=Math.round(Je+(255-Je)*Qt),Sn=Math.round(Vt+(255-Vt)*Qt),bn=Math.round($t+(255-$t)*Qt);return`rgb(${ln}, ${Sn}, ${bn})`})}const he=(Xe,mt,ft,Ke=0)=>{if(!t.current||!t.current.getSource||!t.current.addSource||!t.current.getLayer||!t.current.addLayer||!t.current.removeLayer||!t.current.removeSource){console.warn("");return}if(!mt||mt.length===0)return;let Je={type:"FeatureCollection",features:[]},Vt=0;const $t=pe("rgb(149, 222, 100)",10);if(mt.forEach(Gt=>{Gt.length>0&&Je.features.push({type:"Feature",properties:{color:$t[Math.min(Vt++,$t.length-1)],height:Ke},geometry:{type:"MultiLineString",coordinates:Gt}})}),Je.features.length===0){t.current.getLayer(Xe)&&t.current.removeLayer(Xe),t.current.getSource(Xe)&&t.current.removeSource(Xe);return}if(t.current.getSource(Xe))try{const Gt=t.current.getSource(Xe);Gt&&Gt.setData&&requestAnimationFrame(()=>{Gt.setData(Je)})}catch(Gt){console.error(` ${Xe}:`,Gt)}else try{t.current.addSource(Xe,{type:"geojson",data:Je}),t.current.addLayer({id:Xe,type:"line",source:Xe,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["get","color"],"line-width":5,"line-offset":["interpolate",["linear"],["zoom"],10,["*",["get","height"],3],15,["*",["get","height"],6],20,["*",["get","height"],9]],"line-opacity":1,"line-blur":.5}})}catch(Gt){console.error(` ${Xe}:`,Gt)}},ae=(Xe,mt,ft="rgb(24, 144, 255)",Ke=0)=>{let Je={type:"FeatureCollection",features:[]},Vt=0;const $t=oe(ft,10,10);if(mt.forEach(Kt=>{Kt&&Kt.length>0&&Je.features.push({type:"Feature",properties:{color:$t[Math.min(Vt++,$t.length-1)],height:Ke},geometry:{type:"MultiLineString",coordinates:Kt}})}),!t.current.getSource(Xe))t.current.addSource(Xe,{type:"geojson",data:Je}),t.current.addLayer({id:Xe,type:"line",source:Xe,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":["get","color"],"line-width":3,"line-offset":["*",["get","height"]],"line-opacity":1,"line-blur":.5}});else{const Kt=t.current.getSource(Xe);Kt&&Kt.setData(Je)}},ve=()=>{if(!(!t.current||!t.current.getStyle))try{const Xe=t.current.getStyle();if(!Xe||!Xe.layers)return;const mt=[],ft=[];Xe.layers.forEach(Ke=>{Ke.id&&Ke.id.startsWith("sim-")&&(mt.push(Ke.id),Ke.source&&!ft.includes(Ke.source)&&ft.push(Ke.source))}),mt.forEach(Ke=>{t.current.getLayer(Ke)&&t.current.removeLayer(Ke)}),ft.forEach(Ke=>{t.current.getSource(Ke)&&t.current.removeSource(Ke)})}catch(Xe){console.error(":",Xe)}},Se=Xe=>{t.current.getLayer(Xe)&&t.current.removeLayer(Xe),t.current.getSource(Xe)&&t.current.removeSource(Xe)};let ke=null,Le=0;const Re=100,me=()=>{const Xe=Date.now();Xe-Le>=Re?(Le=Xe,$()):(ke&&clearTimeout(ke),ke=setTimeout(()=>{Le=Date.now(),$()},Re-(Xe-Le)))},Ae=Ah(()=>{mn.planePosition,me()}),He=()=>{if(!(!t.current||!t.current.getStyle))try{const Xe=t.current.getStyle();if(!Xe||!Xe.layers)return;const mt=[],ft=[];Xe.layers.forEach(Ke=>{Ke.id&&Ke.id.startsWith("conflict-marker-")&&(mt.push(Ke.id),Ke.source&&!ft.includes(Ke.source)&&ft.push(Ke.source))}),mt.forEach(Ke=>{t.current.getLayer(Ke)&&t.current.removeLayer(Ke)}),ft.forEach(Ke=>{t.current.getSource(Ke)&&t.current.removeSource(Ke)})}catch(Xe){console.error(":",Xe)}},We=Ah(()=>{var Xe,mt,ft,Ke;if(mn.conflicts!=null){const Je=mn.conflicts,Vt=[[[Je.pos1,Je.pos2]]],$t=((mt=(Xe=mn.plannedFlights)==null?void 0:Xe[Je.id1])==null?void 0:mt.display_offset)||0,Kt=((Ke=(ft=mn.plannedFlights)==null?void 0:ft[Je.id2])==null?void 0:Ke.display_offset)||0,Gt="#984ea3";St(`conflict-${Je.id1}-${Je.id2}-a`,Vt,Gt,$t),St(`conflict-${Je.id1}-${Je.id2}-b`,Vt,Gt,Kt)}}),pt=Xe=>{!Xe||!Array.isArray(Xe)||Xe.forEach((mt,ft)=>{const{conflict_node:Ke,safety_risk:Je,severity:Vt}=mt;if(!Ke)return;let $t=null;const Kt=qt.features.find(ln=>{const Sn=String(ln.properties.startnode),bn=String(ln.properties.endnode);return Sn===String(Ke)||bn===String(Ke)});if(Kt&&Kt.geometry&&Kt.geometry.coordinates){const ln=Kt.geometry.coordinates[0];ln&&ln.length>0&&($t=String(Kt.properties.startnode)===String(Ke)?ln[0]:ln[ln.length-1])}if(!$t){console.warn(` ${Ke} `);return}const Gt=`conflict-marker-${Ke}-${ft}`,kt=At(Vt),Qt={type:"FeatureCollection",features:[{type:"Feature",properties:{conflict_node:Ke,safety_risk:Je,severity:Vt,color:kt},geometry:{type:"Point",coordinates:$t}}]};t.current.getSource(Gt)?t.current.getSource(Gt).setData(Qt):(t.current.addSource(Gt,{type:"geojson",data:Qt}),t.current.addLayer({id:`${Gt}-circle`,type:"circle",source:Gt,paint:{"circle-radius":12,"circle-color":kt,"circle-opacity":.7,"circle-stroke-width":1,"circle-stroke-color":"#ffffff"}}),t.current.addLayer({id:`${Gt}-text`,type:"symbol",source:Gt,layout:{"text-field":String(Je||""),"text-font":["Open Sans Bold","Arial Unicode MS Bold"],"text-size":12,"text-anchor":"center"},paint:{"text-color":"#ffffff","text-halo-color":"#000000","text-halo-width":1}}))})};P=Ah(()=>{console.log(":",mn.conflictResolutions),He(),mn.conflictResolutions&&Array.isArray(mn.conflictResolutions)&&pt(mn.conflictResolutions)});const xe=()=>{if(!t.current||!t.current.getStyle||!t.current.getLayer||!t.current.removeLayer||!t.current.getSource||!t.current.removeSource){console.warn("");return}try{const Xe=t.current.getStyle();if(!Xe||!Xe.layers)return;const mt=[],ft=[];Xe.layers.forEach(Je=>{Je.id&&Je.id.startsWith("planned-path-")&&(mt.push(Je.id),Je.source&&!ft.includes(Je.source)&&ft.push(Je.source))}),mt.forEach(Je=>{t.current&&t.current.getLayer&&t.current.getLayer(Je)&&t.current.removeLayer(Je)}),ft.forEach(Je=>{t.current&&t.current.getSource&&t.current.getSource(Je)&&t.current.removeSource(Je)});const Ke=mt.filter(Je=>Je.startsWith("planned-path-layer-")).map(Je=>`planned-${Je.replace("planned-path-layer-","")}`);mn.plannedFlights&&Object.keys(mn.plannedFlights).forEach(Je=>{});try{a.current&&Object.entries(a.current).forEach(([Je,Vt])=>{Vt&&Vt.remove&&Vt.remove(),delete a.current[Je]})}catch(Je){console.error(":",Je)}}catch(Xe){console.error("planned paths:",Xe)}},et=()=>{if(!t.current||!t.current.getStyle||!t.current.getSource||!t.current.addSource||!t.current.getLayer||!t.current.addLayer||!qt||!mn.plannedFlights){console.warn("");return}xe();const Xe=mn.plannedFlights;if(!(!Xe||Object.keys(Xe).length===0))for(const[mt,ft]of Object.entries(Xe)){if(!ft.node_path||!Array.isArray(ft.node_path)||ft.node_path.length<2)continue;if(ft.type==="active"){console.log(` ${mt} active`);continue}if(mn.planePosition&&mn.planePosition.some(ln=>ln.id===mt&&(ln.state==="taxiing"||ln.state==="moving"))){console.log(` ${mt} `);continue}console.log("",mt,ft);const Je=[];for(let ln=0;ln<ft.node_path.length-1;ln++){const Sn=String(ft.node_path[ln]),bn=String(ft.node_path[ln+1]),gn=qt.features.find(En=>{const Ln=String(En.properties.startnode),Pn=String(En.properties.endnode);return Ln===Sn&&Pn===bn||Ln===bn&&Pn===Sn});if(gn&&gn.geometry&&gn.geometry.coordinates){const En=gn.geometry.coordinates[0];if(En&&En.length>0){const Hn=String(gn.properties.startnode)!==Sn?[...En].reverse():En;Je.length===0?Je.push(...Hn):Je.push(...Hn.slice(1))}}}if(Je.length<2){console.warn(` ${mt} `);return}const Vt=mn.planePosition&&mn.planePosition.some(ln=>ln.id===mt),$t=mn.getAircraftColor(mt,Vt),Kt=ft.display_offset||0,Gt={type:"FeatureCollection",features:[{type:"Feature",properties:{flightId:mt,destination:ft.destination,offset:Kt},geometry:{type:"LineString",coordinates:Je}}]},kt=`planned-path-source-${mt}`,Qt=`planned-path-layer-${mt}`;try{if(!t.current||!t.current.getSource||!t.current.addSource){console.warn("");return}t.current.getSource(kt)?t.current.getSource(kt).setData(Gt):t.current.addSource(kt,{type:"geojson",data:Gt}),t.current.getLayer(Qt)||(t.current.addLayer({id:Qt,type:"line",source:kt,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":$t,"line-width":3,"line-dasharray":[2,2],"line-opacity":.8,"line-offset":["get","offset"]}}),t.current.on("click",Qt,ln=>{const Sn=ln.features[0],{flightId:bn,destination:gn}=Sn.properties;new ey.Popup().setLngLat(ln.lngLat).setHTML(`
                  <div style="padding: 10px;">
                    <h3 style="margin: 0 0 10px 0; color: #333;">${g("plan.path")}</h3>
                    <p style="margin: 5px 0;"><strong>${g("flight.id")}:</strong> ${bn}</p>
                    <p style="margin: 5px 0;"><strong>${g("destination")}:</strong> ${gn}</p>
                  </div>
                `).addTo(t.current)}),t.current.on("mouseenter",Qt,()=>{t.current.getCanvas().style.cursor="pointer"}),t.current.on("mouseleave",Qt,()=>{t.current.getCanvas().style.cursor=""}))}catch(ln){console.error(` ${mt} :`,ln)}try{if(Je&&Je.length>=2&&t.current){const ln=Je[0],Sn=Je[1],bn=G(ln,Sn,null),gn=le(ln,null,null,Kt,bn),En=Sn[0]-ln[0],Ln=Sn[1]-ln[1];let Pn=-90;if(Math.abs(En)>1e-7||Math.abs(Ln)>1e-7){const dr=(Sn[1]+ln[1])/2*Math.PI/180,sr=En*Math.cos(dr),Gn=Math.atan2(Ln,sr)*(180/Math.PI),pr=t.current?t.current.getBearing():0;Pn=90-Gn-pr}a.current[mt]&&(a.current[mt].remove(),delete a.current[mt]);const Hn=new lv.Marker({element:X($t,E,Pn)}).setLngLat({lng:gn.lng,lat:gn.lat}).addTo(t.current);a.current[mt]=Hn}}catch(ln){console.error(` ${mt} :`,ln)}}};let Qe=null,Rt=0;const we=200,tt=()=>{const Xe=Date.now();Xe-Rt>=we?(Rt=Xe,et()):(Qe&&clearTimeout(Qe),Qe=setTimeout(()=>{Rt=Date.now(),et()},we-(Xe-Rt)))},_t=Ah(()=>{try{mn.plannedFlights&&Object.keys(mn.plannedFlights).length>0?(H_("plannedFlights:",mn.plannedFlights),tt()):xe()}catch(Xe){console.error("plannedFlights:",Xe)}}),Pt=Ah(()=>{try{const Xe=mn.getCurrentSimulation(),mt=Xe&&Xe.simulated_state,ft=mt&&mt.aircraft_positions;if(!t.current)return;ft&&typeof ft=="object"&&Object.keys(ft).length>0?(ve(),Object.entries(ft).forEach(([Ke,Je],Vt)=>{const $t=(Je==null?void 0:Je.trajectory)||[],Kt=`sim-${Ke}`;ae(Kt,$t,"rgb(24, 144, 255)",Vt)})):ve()}catch(Xe){console.error(":",Xe)}}),At=Xe=>{switch(Xe==null?void 0:Xe.toUpperCase()){case"HIGH":return"#ff4d4f";case"MEDIUM":return"#faad14";case"LOW":return"#52c41a";default:return"#d9d9d9"}},St=(Xe,mt,ft,Ke)=>{let Je={type:"FeatureCollection",features:[]};if(mt.forEach(Vt=>{Vt.length>0&&Je.features.push({type:"Feature",properties:{height:Ke},geometry:{type:"MultiLineString",coordinates:Vt}})}),!t.current.getSource(Xe))t.current.addSource(Xe,{type:"geojson",data:Je}),t.current.addLayer({id:Xe,type:"line",source:Xe,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":ft,"line-width":4,"line-offset":0,"line-opacity":.6,"line-blur":.5}});else{const Vt=t.current.getSource(Xe);Vt&&Vt.setData(Je)}};let qt=null;return fetch(v).then(Xe=>Xe.json()).then(Xe=>{qt=Xe,qt.features.forEach(ft=>{ft.id=String(parseInt(ft.properties.id))}),P=Ah(()=>{let ft=mn.overlapTaxiways;console.log("WebSocket overlapTaxiways:",ft);const Ke=ft||[];console.log(" (current):",Ke),Array.isArray(Ke)&&Ke.length>0?(console.log(" (current):",Ke),mt(Ke,"current")):(console.log(""),window._currentAreaLayers&&(console.log(" current :",window._currentAreaLayers.length,"IDs:",window._currentAreaLayers),window._currentAreaLayers.forEach(Je=>{t.current.getLayer(Je)&&t.current.removeLayer(Je),t.current.getSource(Je)&&t.current.removeSource(Je)}),window._currentAreaLayers=[],console.log(" current ")))}),Ah(()=>{const ft=mn.future_conflicts||[];console.log("future_conflicts:",ft),Array.isArray(ft)&&ft.length>0?(console.log(" (future):",ft),mt(ft,"future")):(console.log(""),window._futureAreaLayers&&(console.log(" future :",window._futureAreaLayers.length,"IDs:",window._futureAreaLayers),window._futureAreaLayers.forEach(Ke=>{t.current.getLayer(Ke)&&t.current.removeLayer(Ke),t.current.getSource(Ke)&&t.current.removeSource(Ke)}),window._futureAreaLayers=[],console.log(" future ")))});function mt(ft,Ke="current"){if(console.log("highlightTaxiwayByLayerWithArea:",Ke,":",ft),!t.current||!qt){console.log("geojsonData");return}const Je=Ke==="future"?"_futureAreaLayers":"_currentAreaLayers",Vt=Ke==="future"?"_futureConflictRegistry":"_currentConflictRegistry";console.log(":",Je),window[Je]||(window[Je]=[]),window[Vt]||(window[Vt]={});const $t=new Set,Kt=kt=>{var Ln;const Qt=(kt==null?void 0:kt.merged_functions)||(kt==null?void 0:kt.functions)||(kt==null?void 0:kt.piecewise_functions),ln=(kt==null?void 0:kt.taxiway_sequence)||(kt==null?void 0:kt.taxiway_ids)||(kt==null?void 0:kt.taxiways)||((Ln=kt==null?void 0:kt.path)==null?void 0:Ln.taxiway_sequence),Sn=(kt==null?void 0:kt.flight1_id)||(kt==null?void 0:kt.id1)||(kt==null?void 0:kt.flight1),bn=(kt==null?void 0:kt.flight2_id)||(kt==null?void 0:kt.id2)||(kt==null?void 0:kt.flight2),gn=(kt==null?void 0:kt.conflict_time)||(kt==null?void 0:kt.time)||0,En=(kt==null?void 0:kt.conflict_id)||`${Sn||""}-${bn||""}-${Array.isArray(ln)?ln.join("_"):""}`;return{merged_functions:Qt,taxiway_sequence:ln,flight1_id:Sn,flight2_id:bn,conflict_time:gn,conflict_id:En,is_unchanged:kt==null?void 0:kt.is_unchanged}};ft.forEach((kt,Qt)=>{const ln=Kt(kt),{merged_functions:Sn,taxiway_sequence:bn,flight1_id:gn,flight2_id:En,conflict_time:Ln,conflict_id:Pn,is_unchanged:Hn}=ln,or=Pn;if($t.add(or),!Array.isArray(Sn)||!Array.isArray(bn)){console.warn(`Invalid conflict data, skip. key=${or}`);return}const dr=bn.map(Pe=>({id:String(Pe),feat:qt.features.find(Me=>String(parseInt(Me.id))===String(Pe))||null})),sr=dr.filter(Pe=>!Pe.feat).map(Pe=>Pe.id);sr.length>0&&console.warn("ID:",sr);const Gn=dr.filter(Pe=>!!Pe.feat).map(Pe=>Pe.feat);if(!Gn.length){console.warn(`No taxiway features found for key=${or}`);return}const pr=[];if(Gn.length>0){const Pe=[...Gn[0].geometry.coordinates[0]];if(Gn.length>1){const Me=Gn[1].geometry.coordinates[0],Ye=Pe[0],xt=Pe[Pe.length-1],Mt=Me[0],Ot=Me[Me.length-1],Xt=Math.min(zd(Ye[0],Ye[1],Mt[0],Mt[1]),zd(Ye[0],Ye[1],Ot[0],Ot[1])),It=Math.min(zd(xt[0],xt[1],Mt[0],Mt[1]),zd(xt[0],xt[1],Ot[0],Ot[1]));Xt<It&&Pe.reverse()}pr.push(Pe);for(let Me=1;Me<Gn.length;Me++){const Ye=pr[Me-1],xt=[...Gn[Me].geometry.coordinates[0]],Mt=Ye[Ye.length-1],Ot=xt[0],Xt=xt[xt.length-1];zd(Mt[0],Mt[1],Xt[0],Xt[1])<zd(Mt[0],Mt[1],Ot[0],Ot[1])&&xt.reverse(),pr.push(xt)}}const Jn=[];pr.forEach((Pe,Me)=>{Me===0?Jn.push(...Pe):Jn.push(...Pe.slice(1)),Jn[Jn.length-1]});const br=aI(Jn),gr=br[br.length-1],Lr=[],Ge=[],te=(Pe,Me)=>{const Ye=Math.PI/180,xt=2*Math.PI*6378137,Mt=Math.pow(2,Number(Me)||0)*512;return Math.cos(Pe*Ye)*xt/Mt};let ie=null;Sn.forEach(Pe=>{const{x1:Me,x2:Ye,a:xt,b:Mt,c:Ot}=Pe,Xt=Math.max(0,Me),It=Math.min(gr,Ye);if(It<=Xt)return;const qe=.1,cn=Math.max(2,Math.ceil((It-Xt)/1));for(let en=0;en<=cn;en++){const Wt=Xt+(It-Xt)*(en/cn),at=Mt!==0?-(xt*Wt+Ot)/Mt*qe:0,Ht=Math.abs(at),an=Ib(Jn,br,Wt),Cn=t.current.getZoom?t.current.getZoom():0,pn=Math.min(Wt+.5,gr),Bn=Math.max(Wt-.5,0),tn=Ib(Jn,br,pn),xr=Ib(Jn,br,Bn),mi=t.current.project({lng:xr[0],lat:xr[1]}),Wn=t.current.project({lng:tn[0],lat:tn[1]}),Xn=Wn.x-mi.x,rr=Wn.y-mi.y,lr=Math.sqrt(Xn*Xn+rr*rr);let On;if(lr>1e-4&&Number.isFinite(lr)){const Ca=Xn/lr;On={x:-(rr/lr),y:Ca},ie=On}else On=ie||{x:0,y:0};const cr=te(an[1],Cn)||1,Dn=Ht/2/cr,Rr=t.current.project({lng:an[0],lat:an[1]}),Yr={x:Rr.x+On.x*Dn,y:Rr.y+On.y*Dn},Na={x:Rr.x-On.x*Dn,y:Rr.y-On.y*Dn},Di=t.current.unproject(Yr),ci=t.current.unproject(Na);Lr.push([Di.lng,Di.lat]),Ge.push([ci.lng,ci.lat])}});const de=[...Lr,...Ge.reverse()];de.push([...Lr[0]]);const Ce={type:"Feature",properties:{data:Sn,taxiway_sequence:bn,conflict_idx:Qt,flight1_id:gn,flight2_id:En,conflict_time:Ln},geometry:{type:"Polygon",coordinates:[de]}},Ne=`${Ke}-area-${or}`,ce=`${Ke}-axis-${or}`,rt={type:"Feature",properties:{conflict_idx:Qt,flight1_id:gn,flight2_id:En,conflict_time:Ln,conflict_key:or},geometry:{type:"LineString",coordinates:Jn}};let Ve,Ie;Ke==="future"?(Ve="rgba(30, 144, 255, 0.25)",Ie=.5):(Ve="rgba(255,165,0, 0.25)",Ie=.5);try{if(console.log(":",Ne,":",Ke),Hn===!0&&window[Vt][or]){console.log("key=",or,"areaId=",window[Vt][or].areaId,"type=",Ke);return}const Pe=window[Vt][or];if(Pe){console.log(": key=",or,"areaId=",Pe.areaId,"axisId=",Pe.axisId,"type=",Ke),t.current.getLayer(Pe.areaId)&&t.current.removeLayer(Pe.areaId),t.current.getSource(Pe.areaId)&&t.current.removeSource(Pe.areaId),Pe.axisId&&(t.current.getLayer(Pe.axisId)&&t.current.removeLayer(Pe.axisId),t.current.getSource(Pe.axisId)&&t.current.removeSource(Pe.axisId));const Ye=window[Je].indexOf(Pe.areaId);Ye>-1&&window[Je].splice(Ye,1);const xt=window[Je].indexOf(Pe.axisId);xt>-1&&window[Je].splice(xt,1)}t.current.getSource(ce)&&t.current.removeSource(ce),t.current.addSource(ce,{type:"geojson",data:rt}),t.current.getLayer(ce)&&t.current.removeLayer(ce),t.current.addLayer({id:ce,type:"line",source:ce,paint:{"line-color":"#00FFFF","line-width":2,"line-opacity":.9,"line-dasharray":[2,2]}}),t.current.addSource(Ne,{type:"geojson",data:Ce}),t.current.addLayer({id:Ne,type:"fill",source:Ne,paint:{"fill-color":Ve,"fill-opacity":Ie},interactive:!0}),console.log(":",Ne,":",Ve),t.current.on("click",Ne,Ye=>{if(Ye.features&&Ye.features.length>0){const xt=Ye.features[0].properties;new ey.Popup().setLngLat(Ye.lngLat).setHTML(`<pre>${JSON.stringify(xt.data,null,2)}</pre>`).addTo(t.current)}}),window[Je].push(Ne),window[Je].push(ce);const Me=JSON.stringify({merged_functions:Sn,taxiway_sequence:bn,flight1_id:gn,flight2_id:En});window[Vt][or]={areaId:Ne,axisId:ce,hash:Me}}catch(Pe){console.error("Error creating merged area layer:",Ne,":",Ke,"error:",Pe)}}),Object.keys(window[Vt]).forEach(kt=>{if(!$t.has(kt)){const Qt=window[Vt][kt];if(Qt){console.log("",kt,"areaId=",Qt.areaId,"axisId=",Qt.axisId,"type=",Ke),t.current.getLayer(Qt.areaId)&&t.current.removeLayer(Qt.areaId),t.current.getSource(Qt.areaId)&&t.current.removeSource(Qt.areaId),Qt.axisId&&(t.current.getLayer(Qt.axisId)&&t.current.removeLayer(Qt.axisId),t.current.getSource(Qt.axisId)&&t.current.removeSource(Qt.axisId));const ln=window[Je].indexOf(Qt.areaId);ln>-1&&window[Je].splice(ln,1);const Sn=window[Je].indexOf(Qt.axisId);Sn>-1&&window[Je].splice(Sn,1)}delete window[Vt][kt]}})}}).catch(Xe=>console.error(":",Xe)),()=>{var Xe;(Xe=t.current)==null||Xe.remove(),Ae(),We(),P&&P(),_t&&_t(),disposer5&&disposer5(),Pt&&Pt(),Object.values(f.current).forEach(mt=>{clearTimeout(mt)}),f.current={},xe(),He(),window._areaLayers&&(window._areaLayers.forEach(mt=>{t.current.getLayer(mt)&&t.current.removeLayer(mt),t.current.getSource(mt)&&t.current.removeSource(mt)}),window._areaLayers=[])}},[]),Ct.jsxs("div",{style:{display:"flex",width:"100%",height:"100%"},children:[Ct.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",width:"28%",maxWidth:"420px",height:"auto",maxHeight:"92%",backgroundColor:"rgba(255, 255, 255, 0.35)",borderRadius:"8px",display:"none",flexDirection:"column",overflow:"auto",zIndex:10,padding:"12px"},children:Ct.jsx(NS,{})}),Ct.jsxs("div",{style:{width:"100%",height:"100%",position:"relative"},children:[Ct.jsx("div",{style:{position:"absolute",top:"12px",left:"12px",width:"28%",maxWidth:"420px",height:"auto",maxHeight:"92%",backgroundColor:"rgba(255, 255, 255, 0.35)",borderRadius:"8px",display:"flex",flexDirection:"column",overflow:"auto",zIndex:10,padding:"12px"},children:Ct.jsx(NS,{})}),Ct.jsx("div",{ref:e,style:{width:"100%",height:"100%"}})]})]})}),NS=Y1(()=>{const{t:e}=U1(),t=mn.conflictResolutions,i=mn.selectedConflict,a=mn.resolutions,f=mn.resolution_analysis,v=mn.conflictResolutionLoading,g=B=>{mn.getConflictResolutions(B)},u=(B,j)=>{mn.applyConflictResolution(B,j),console.log("",B,j)},E=(B,j)=>{mn.socket&&mn.socket.connected?(console.log("",B,j),mn.socket.emit("simulate_conflict_resolution",{conflict_id:B,solution_id:j})):console.error("WebSocket")},P=3e3,I=Nt.useRef({id:null,ts:0});return Nt.useEffect(()=>{if(!i)return;const B=i.conflict_id??i.id;if(!B)return;const j=Date.now();if(f&&f.conflict_id===B&&Array.isArray(a)&&a.length>0){I.current={id:B,ts:j};return}const X=j-(I.current.ts||0),J=I.current.id===B;!v&&(!J||X>P)&&(I.current={id:B,ts:j},g(B))},[i,v,a,f]),Ct.jsxs("div",{style:{padding:"16px",height:"100%",display:"flex",flexDirection:"column",width:"100%"},children:[v&&Ct.jsx("div",{style:{textAlign:"center",padding:"20px",color:"#666"},children:e("processing")}),!i&&Ct.jsxs("div",{className:"prettyScrollbar",style:{flex:1,overflowY:"auto"},children:[Ct.jsxs("h4",{style:{fontSize:"14px",marginBottom:"12px",color:"#555"},children:[e("current.conflicts")," (",t.length,")"]}),t.length===0?Ct.jsx("div",{style:{textAlign:"center",color:"#999",padding:"20px"},children:e("no.conflicts")}):t.map(B=>Ct.jsxs("div",{style:{position:"relative",border:"1px solid #ddd",borderRadius:"6px",padding:"8px",marginBottom:"6px",backgroundColor:B.status==="resolved"?"#f8f9fa":"white",borderLeft:`4px solid ${B.severity==="HIGH"?"#dc3545":B.severity==="MEDIUM"?"#ffc107":"#28a745"}`,opacity:B.status==="resolved"?.6:1},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px",marginBottom:"6px"},children:[Ct.jsxs("div",{style:{display:"flex",gap:"4px"},children:[Ct.jsx("span",{style:{fontSize:"11px",padding:"2px 6px",borderRadius:"3px",backgroundColor:B.severity==="HIGH"?"#dc3545":B.severity==="MEDIUM"?"#ffc107":"#28a745",color:"white"},children:B.severity||"UNKNOWN"}),Ct.jsx("span",{style:{fontSize:"11px",padding:"2px 6px",borderRadius:"3px",backgroundColor:B.conflict_type==="CROSSING"?"#dc3545":B.conflict_type==="parallel"?"#ffc107":"#28a745",color:"white"},children:B.conflict_type||"UNKNOWN"})]}),Ct.jsx("span",{style:{fontWeight:"bold",fontSize:"13px"},children:B.id})]}),Ct.jsxs("div",{style:{fontSize:"12px",color:"#666",marginBottom:"6px"},children:[e("flights"),": ",[B.flight1_id,B.flight2_id].filter(Boolean).join(", ")||"N/A"," ","| ",e("node"),": ",Array.isArray(B.taxiway_sequence)?B.taxiway_sequence.join(", "):B.taxiway_sequence||"N/A"]}),Ct.jsx("div",{onClick:()=>{mn.selectedConflict=B},style:{position:"absolute",top:"8px",right:"8px",width:"20px",height:"20px",backgroundColor:"transparent",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",userSelect:"none",border:"none"},title:e("view.details"),children:Ct.jsxs("svg",{t:"1763042591206",className:"icon",viewBox:"0 0 1024 1024",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16","aria-hidden":"true",focusable:"false",children:[Ct.jsx("path",{d:"M346.2 514.6m-64.2 0a64.2 64.2 0 1 0 128.4 0 64.2 64.2 0 1 0-128.4 0Z",fill:"#91B1D5"}),Ct.jsx("path",{d:"M450.1 514.6a64.2 64.2 0 1 0 128.4 0 64.2 64.2 0 1 0-128.4 0Z",fill:"#91B1D5"}),Ct.jsx("path",{d:"M682.5 514.6m-64.2 0a64.2 64.2 0 1 0 128.4 0 64.2 64.2 0 1 0-128.4 0Z",fill:"#91B1D5"}),Ct.jsx("path",{d:"M512 136.3c50.7 0 99.9 9.9 146.2 29.5 44.7 18.9 84.9 46 119.5 80.6 34.5 34.5 61.6 74.7 80.6 119.5 19.6 46.3 29.5 95.5 29.5 146.2s-9.9 99.9-29.5 146.2c-18.9 44.7-46 84.9-80.6 119.5-34.5 34.5-74.7 61.6-119.5 80.6-46.3 19.6-95.5 29.5-146.2 29.5s-99.9-9.9-146.2-29.5c-44.7-18.9-84.9-46-119.4-80.6-34.5-34.5-61.6-74.7-80.6-119.5-19.6-46.3-29.5-95.5-29.5-146.2s9.9-99.9 29.5-146.2c18.9-44.7 46-84.9 80.6-119.5 34.5-34.5 74.7-61.6 119.4-80.6 46.3-19.6 95.5-29.5 146.2-29.5m0-70C265.9 66.3 66.3 265.9 66.3 512S265.9 957.7 512 957.7 957.7 758.1 957.7 512 758.1 66.3 512 66.3z",fill:"#91B1D5"})]})}),B.status==="resolved"&&Ct.jsx("div",{style:{textAlign:"center",color:"#28a745",fontSize:"12px",fontWeight:"bold"},children:e("resolved")})]},B.id))]}),i&&Ct.jsxs("div",{className:"prettyScrollbar",style:{flex:1,overflowY:"auto",width:"100%",margin:0,backgroundColor:"transparent"},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",marginBottom:"16px"},children:[Ct.jsx("button",{onClick:()=>{mn.selectedConflict=null,mn.resolutions=[]},style:{background:"none",border:"none",fontSize:"16px",cursor:"pointer",marginRight:"8px",color:"#979797"},children:Ct.jsx("svg",{width:"20",height:"20",viewBox:"0 0 1024 1024",fill:"currentColor","aria-hidden":"true",focusable:"false",children:Ct.jsx("path",{d:"M363.840919 472.978737C336.938714 497.358861 337.301807 537.486138 364.730379 561.486138L673.951902 832.05497C682.818816 839.813519 696.296418 838.915012 704.05497 830.048098 711.813519 821.181184 710.915012 807.703582 702.048098 799.94503L392.826577 529.376198C384.59578 522.174253 384.502227 511.835287 392.492414 504.59418L702.325747 223.807723C711.056111 215.895829 711.719614 202.404616 703.807723 193.674252 695.895829 184.943889 682.404617 184.280386 673.674253 192.192278L363.840919 472.978737Z"})})}),Ct.jsxs("h4",{style:{margin:0,fontSize:"14px",color:"#555"},children:[i.conflict_id," ",e("solutions")]})]}),null,(()=>{const B=({strategy:G})=>{const le=G==="emergency_mode"?"#dc3545":G==="waiting"?"#ffc107":G==="rerouting"?"#17a2b8":"#6c757d";return Ct.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 24 24",style:{marginRight:8},children:[G==="emergency_mode"&&Ct.jsxs("g",{fill:le,children:[Ct.jsx("rect",{x:"10",y:"3",width:"4",height:"10",rx:"2"}),Ct.jsx("circle",{cx:"12",cy:"19",r:"3"})]}),G==="waiting"&&Ct.jsxs("g",{stroke:le,strokeWidth:"2",fill:"none",children:[Ct.jsx("circle",{cx:"12",cy:"12",r:"9"}),Ct.jsx("path",{d:"M12 12 L12 7"}),Ct.jsx("path",{d:"M12 12 L16 14"})]}),G==="rerouting"&&Ct.jsxs("g",{fill:"none",stroke:le,strokeWidth:"2",children:[Ct.jsx("path",{d:"M4 18 C8 10, 12 14, 16 6"}),Ct.jsx("path",{d:"M16 6 L13 6 M16 6 L16 9"})]}),G!=="emergency_mode"&&G!=="waiting"&&G!=="rerouting"&&Ct.jsx("g",{fill:le,children:Ct.jsx("circle",{cx:"12",cy:"12",r:"8"})})]})},j=({pathDelta:G=0,timeDelta:le=0,maxPath:oe=1,maxTime:pe=1})=>{const Le=Math.min(1,Math.abs(G)/(oe||1)),Re=Math.min(1,Math.abs(le)/(pe||1)),me=Math.max(2,Le*110),Ae=Math.max(2,Re*110);return Ct.jsxs("svg",{width:200,height:44,style:{borderRadius:4},children:[Ct.jsx("text",{x:6,y:"14",fontSize:"11",fill:Ml.LIGHT_GRAY,children:e("path.delta")}),Ct.jsx("rect",{x:80,y:"6",width:110,height:"8",fill:"#f0f0f0",rx:"3"}),Ct.jsx("rect",{x:80,y:"6",width:me,height:"8",fill:Ml.LIGHT_GRAY,rx:"3"}),Ct.jsx("text",{x:80+me+6,y:"13",fontSize:"10",fill:Ml.LIGHT_GRAY,children:G!=null&&G.toFixed?G.toFixed(2):G}),Ct.jsx("text",{x:6,y:"38",fontSize:"11",fill:Ml.LIGHT_GRAY,children:e("time.delta")}),Ct.jsx("rect",{x:80,y:"30",width:110,height:"8",fill:"#f0f0f0",rx:"3"}),Ct.jsx("rect",{x:80,y:"30",width:Ae,height:"8",fill:Ml.LIGHT_GRAY,rx:"3"}),Ct.jsx("text",{x:80+Ae+6,y:"37",fontSize:"10",fill:Ml.LIGHT_GRAY,children:le!=null&&le.toFixed?le.toFixed(2):le})]})},$=({impactGraph:G,targetFlight:le})=>{const oe=G!=null&&G.nodes?Object.entries(G.nodes):[],pe=(G==null?void 0:G.edges)||[],he=oe.length,ke=Math.min(220,Math.max(90,he*24)),Le=260,Re=ke,Ae=((xe,et)=>{if(xe.length===0)return{};const Qe={},Rt={};xe.forEach(([ft])=>{Qe[ft]=[],Rt[ft]=[]}),et.forEach(ft=>{const Ke=ft.from,Je=ft.to;Qe[Ke]&&Rt[Je]&&(Qe[Ke].push(Je),Rt[Je].push(Ke))});const we=xe.filter(([ft])=>Rt[ft].length===0),tt=we.length>0?we[0][0]:xe[0][0],_t={},Pt=new Set,At=[{id:tt,level:0}];Pt.add(tt),_t[tt]=0;let St=0;for(;At.length>0;){const{id:ft,level:Ke}=At.shift();St=Math.max(St,Ke),Qe[ft].forEach(Je=>{Pt.has(Je)||(Pt.add(Je),_t[Je]=Ke+1,At.push({id:Je,level:Ke+1}))})}xe.forEach(([ft])=>{Pt.has(ft)||(_t[ft]=St+1,St=Math.max(St,St+1))});const qt={};xe.forEach(([ft])=>{const Ke=_t[ft];qt[Ke]||(qt[Ke]=[]),qt[Ke].push(ft)});const Xe={},mt=St>0?(Le-60)/(St+1):Le-60;return Object.keys(qt).forEach(ft=>{const Ke=qt[ft],Je=Ke.length>1?(Re-40)/(Ke.length-1):Re/2;Ke.forEach((Vt,$t)=>{Xe[Vt]={x:30+parseInt(ft)*mt,y:Ke.length===1?Re/2:20+$t*Je}})}),Xe})(oe,pe),He=xe=>{const et=mn.planePosition&&mn.planePosition.some(Qe=>Qe.id===xe);return mn.getAircraftColor(xe,et)},We=xe=>typeof xe!="number"||xe<=1?1:xe<=3?2:xe<=5?3:xe<=10?4:5,pt=xe=>Math.max(.5,xe*.5);return Ct.jsxs("svg",{width:Le,height:Re,style:{borderRadius:4},children:[Ct.jsxs("defs",{children:[Ct.jsx("marker",{id:"arrowhead",markerWidth:"10",markerHeight:"7",refX:"9",refY:"3.5",orient:"auto",children:Ct.jsx("polygon",{points:"0 0, 10 3.5, 0 7",fill:"#666"})}),Ct.jsx("symbol",{id:"impact-airplane-icon",viewBox:"0 0 1024 1024",children:Ct.jsx("path",{fill:"currentColor",d:"M512 174.933333c23.466667 0 42.666667 8.533333 59.733333 25.6s25.6 36.266667 25.6 59.733334v192l206.933334 185.6c6.4 4.266667 10.666667 12.8 14.933333 21.333333s6.4 17.066667 6.4 25.6v23.466667c0 8.533333-2.133333 12.8-6.4 14.933333s-10.666667 2.133333-17.066667-2.133333l-204.8-140.8v149.333333c38.4 36.266667 57.6 57.6 57.6 64v36.266667c0 8.533333-2.133333 12.8-6.4 17.066666-4.266667 2.133333-10.666667 2.133333-19.2 0l-117.333333-72.533333-117.333333 72.533333c-6.4 4.266667-12.8 4.266667-19.2 0s-6.4-8.533333-6.4-17.066666v-36.266667c0-8.533333 19.2-29.866667 57.6-64v-149.333333l-204.8 140.8c-6.4 4.266667-12.8 6.4-17.066667 2.133333-4.266667-2.133333-6.4-8.533333-6.4-14.933333V684.8c0-8.533333 2.133333-17.066667 6.4-25.6 4.266667-8.533333 8.533333-17.066667 14.933333-21.333333l206.933334-185.6v-192c0-23.466667 8.533333-42.666667 25.6-59.733334s36.266667-25.6 59.733333-25.6z"})})]}),pe.map((xe,et)=>{var kt;const Qe=xe.from,Rt=xe.to,we=Ae[Qe],tt=Ae[Rt];if(!we||!tt)return null;const _t=(kt=oe.find(([Qt])=>Qt===Rt))==null?void 0:kt[1],Pt=We(_t==null?void 0:_t.delay_minutes),At=pt(Pt),St=tt.x-we.x,qt=tt.y-we.y,Xe=Math.max(1,Math.sqrt(St*St+qt*qt)),mt=St/Xe,ft=qt/Xe,Ke=9,Je=tt.x-mt*Ke,Vt=tt.y-ft*Ke,$t=we.x+mt*Ke,Kt=we.y+ft*Ke,Gt=`M ${$t} ${Kt} L ${Je} ${Vt}`;return Ct.jsx("path",{d:Gt,fill:"none",stroke:"#666",opacity:.35,strokeWidth:At,strokeLinecap:"round",strokeLinejoin:"round"},et)}),oe.map(([xe,et])=>{const Qe=Ae[xe];if(!Qe)return null;const Rt=He(xe),we=18;return Ct.jsxs("g",{children:[Ct.jsx("svg",{x:Qe.x-we/2,y:Qe.y-we/2,width:we,height:we,viewBox:"0 0 1024 1024",style:{color:Rt},children:Ct.jsx("use",{xlinkHref:"#impact-airplane-icon",transform:"rotate(90 512 512)"})}),Ct.jsx("text",{x:Qe.x,y:Qe.y-12,textAnchor:"middle",fontSize:"9",fill:"#333",fontWeight:"bold",children:xe}),typeof et.delay_minutes=="number"&&Ct.jsxs("text",{x:Qe.x,y:Qe.y+14,textAnchor:"middle",fontSize:"9",fill:"#333",fontWeight:"bold",children:[et.delay_minutes.toFixed(1),"m"]})]},xe)})]})},X=Math.max(...a.map(G=>Math.abs(G.path_length_delta||0)),1),J=Math.max(...a.map(G=>Math.abs(G.time_delta_minutes||0)),1);return Ct.jsx(Ct.Fragment,{children:a.map(G=>Ct.jsxs("div",{style:{border:"1px solid #ddd",borderRadius:"6px",padding:"12px",marginBottom:"12px",backgroundColor:"rgba(255,255,255,0.6)",width:"90%",maxWidth:"740px",marginLeft:"auto",marginRight:"auto"},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:8},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[Ct.jsx(B,{strategy:G.strategy}),Ct.jsx("div",{style:{fontSize:13,fontWeight:"bold",color:"#333"},children:G.strategy})]}),Ct.jsxs("div",{style:{display:"flex",alignItems:"center",gap:8},children:[Ct.jsx("button",{title:e("simulate.apply"),"aria-label":e("simulate.apply"),onClick:()=>E(f.conflict_id,G.option_id),style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer",color:Ml.LIGHT_GRAY,borderRadius:"4px"},onMouseOver:le=>le.currentTarget.style.color=Ml.LIGHT_GRAY_HOVER,onMouseOut:le=>le.currentTarget.style.color=Ml.LIGHT_GRAY,children:Ct.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:[Ct.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.15"}),Ct.jsx("path",{d:"M9 8l7 4-7 4z"})]})}),Ct.jsx("button",{title:e("apply.solution"),"aria-label":e("apply.solution"),onClick:()=>u(f.conflict_id,G.option_id),style:{background:"transparent",border:"none",padding:"4px",cursor:"pointer",color:Ml.LIGHT_GRAY,borderRadius:"4px"},onMouseOver:le=>le.currentTarget.style.color=Ml.LIGHT_GRAY_HOVER,onMouseOut:le=>le.currentTarget.style.color=Ml.LIGHT_GRAY,children:Ct.jsxs("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"currentColor",children:[Ct.jsx("circle",{cx:"12",cy:"12",r:"10",opacity:"0.15"}),Ct.jsx("path",{d:"M9 12l2 2 4-4",stroke:"currentColor",strokeWidth:"2",fill:"none",strokeLinecap:"round",strokeLinejoin:"round"})]})})]})]}),Ct.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:12},children:[Ct.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:12},children:[Ct.jsx("div",{style:{display:"flex",alignItems:"center",minWidth:100},children:Ct.jsxs("span",{style:{fontSize:11,padding:"2px 6px",borderRadius:3,backgroundColor:"#f5f5f5",color:ba.ACTIVE},children:[e("target"),": ",G.target_flight]})}),Ct.jsx("div",{style:{width:300},children:Ct.jsx(j,{pathDelta:G.path_length_delta||0,timeDelta:G.time_delta_minutes||0,maxPath:X,maxTime:J})})]}),Ct.jsx("div",{style:{display:"flex",justifyContent:"center"},children:Ct.jsx($,{impactGraph:G.impact_graph,targetFlight:G.target_flight})})]})]},G.option_id))})})()]})]})});function zd(e,t,i,a){const v=Math.PI/180,g=(a-t)*v,u=(i-e)*v,E=Math.sin(g/2)**2+Math.cos(t*v)*Math.cos(a*v)*Math.sin(u/2)**2;return 2*6378137*Math.asin(Math.sqrt(E))}function aI(e){let t=[0];for(let i=1;i<e.length;i++){const[a,f]=e[i-1],[v,g]=e[i];t.push(t[i-1]+zd(a,f,v,g))}return t}function Ib(e,t,i){for(let a=1;a<t.length;a++)if(i<=t[a]){const f=(i-t[a-1])/(t[a]-t[a-1]),[v,g]=e[a-1],[u,E]=e[a];return[v+(u-v)*f,g+(E-g)*f]}return e[e.length-1]}function oI(e,t){if(jS(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),a=Object.keys(t);if(i.length!==a.length)return!1;for(var f=0;f<i.length;f++)if(!Object.hasOwnProperty.call(t,i[f])||!jS(e[i[f]],t[i[f]]))return!1;return!0}function jS(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}var FS=Symbol("patchMixins"),EE=Symbol("patchedDefinition");function sI(e,t){var i=e[FS]=e[FS]||{},a=i[t]=i[t]||{};return a.locks=a.locks||0,a.methods=a.methods||[],a}function $S(e,t){for(var i=this,a=arguments.length,f=new Array(a>2?a-2:0),v=2;v<a;v++)f[v-2]=arguments[v];t.locks++;try{var g;return e!=null&&(g=e.apply(this,f)),g}finally{t.locks--,t.locks===0&&t.methods.forEach(function(u){u.apply(i,f)})}}function VS(e,t){var i=function(){for(var f=arguments.length,v=new Array(f),g=0;g<f;g++)v[g]=arguments[g];$S.call.apply($S,[this,e,t].concat(v))};return i}function lI(e,t,i){var a=sI(e,t);a.methods.indexOf(i)<0&&a.methods.push(i);var f=Object.getOwnPropertyDescriptor(e,t);if(!(f&&f[EE])){var v=e[t],g=ME(e,t,f?f.enumerable:void 0,a,v);Object.defineProperty(e,t,g)}}function ME(e,t,i,a,f){var v,g=VS(f,a);return v={},v[EE]=!0,v.get=function(){return g},v.set=function(E){if(this===e)g=VS(E,a);else{var P=ME(this,t,i,a,E);Object.defineProperty(this,t,P)}},v.configurable=!0,v.enumerable=i,v}var US=Symbol("ObserverAdministration"),HS=Symbol("isMobXReactObserver");function kx(e){var t;return(t=e[US])!=null?t:e[US]={reaction:null,mounted:!1,reactionInvalidatedBeforeMount:!1,forceUpdate:null,name:zx(e.constructor),state:void 0,props:void 0,context:void 0}}function cI(e){var t=e.prototype;if(e[HS]){var i=zx(e);throw new Error("The provided component class ("+i+") has already been declared as an observer component.")}else e[HS]=!0;if(t.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(e.__proto__!==U.PureComponent){if(!t.shouldComponentUpdate)t.shouldComponentUpdate=qS;else if(t.shouldComponentUpdate!==qS)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}var a=t.render;if(typeof a!="function"){var f=zx(e);throw new Error("[mobx-react] class component ("+f+") is missing `render` method.\n`observer` requires `render` being a function defined on prototype.\n`render = () => {}` or `render = function() {}` is not supported.")}t.render=function(){return Object.defineProperty(this,"render",{configurable:!1,writable:!1,value:uI.call(this,a)}),this.render()};var v=t.componentDidMount;return t.componentDidMount=function(){var g=this,u=kx(this);return u.mounted=!0,by.unregister(this),u.forceUpdate=function(){return g.forceUpdate()},(!u.reaction||u.reactionInvalidatedBeforeMount)&&u.forceUpdate(),v==null?void 0:v.apply(this,arguments)},lI(t,"componentWillUnmount",function(){var g,u=kx(this);(g=u.reaction)==null||g.dispose(),u.reaction=null,u.forceUpdate=null,u.mounted=!1,u.reactionInvalidatedBeforeMount=!1}),e}function zx(e){return e.displayName||e.name||"<component>"}function uI(e){var t=e.bind(this),i=kx(this);function a(){i.reaction||(i.reaction=hI(i),i.mounted||by.register(this,i,this));var f=void 0,v=void 0;if(i.reaction.track(function(){try{v=tR(!1,t)}catch(g){f=g}}),f)throw f;return v}return a}function hI(e){return new ju(e.name+".render()",function(){if(!e.mounted){e.reactionInvalidatedBeforeMount=!0;return}try{e.forceUpdate==null||e.forceUpdate()}catch{var t;(t=e.reaction)==null||t.dispose(),e.reaction=null}})}function qS(e,t){return this.state!==t?!0:!oI(this.props,e)}function fI(e,t){return e.isMobxInjector===!0&&console.warn("Mobx observer: You are trying to use `observer` on a component that already has `inject`. Please apply `observer` before applying `inject`"),Object.prototype.isPrototypeOf.call(U.Component,e)||Object.prototype.isPrototypeOf.call(U.PureComponent,e)?cI(e):Y1(e)}Nt.version.split(".")[0];if(!U.Component)throw new Error("mobx-react requires React to be available");if(!Za)throw new Error("mobx-react requires mobx to be available");function yv(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function dI(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function AE(e){let t,i,a;e.length!==2?(t=yv,i=(u,E)=>yv(e(u),E),a=(u,E)=>e(u)-E):(t=e===yv||e===dI?e:pI,i=e,a=e);function f(u,E,P=0,I=u.length){if(P<I){if(t(E,E)!==0)return I;do{const B=P+I>>>1;i(u[B],E)<0?P=B+1:I=B}while(P<I)}return P}function v(u,E,P=0,I=u.length){if(P<I){if(t(E,E)!==0)return I;do{const B=P+I>>>1;i(u[B],E)<=0?P=B+1:I=B}while(P<I)}return P}function g(u,E,P=0,I=u.length){const B=f(u,E,P,I-1);return B>P&&a(u[B-1],E)>-a(u[B],E)?B-1:B}return{left:f,center:g,right:v}}function pI(){return 0}function mI(e){return e===null?NaN:+e}const gI=AE(yv),yI=gI.right;AE(mI).center;class GS extends Map{constructor(t,i=bI){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:i}}),t!=null)for(const[a,f]of t)this.set(a,f)}get(t){return super.get(ZS(this,t))}has(t){return super.has(ZS(this,t))}set(t,i){return super.set(_I(this,t),i)}delete(t){return super.delete(vI(this,t))}}function ZS({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):i}function _I({_intern:e,_key:t},i){const a=t(i);return e.has(a)?e.get(a):(e.set(a,i),i)}function vI({_intern:e,_key:t},i){const a=t(i);return e.has(a)&&(i=e.get(a),e.delete(a)),i}function bI(e){return e!==null&&typeof e=="object"?e.valueOf():e}const xI=Math.sqrt(50),wI=Math.sqrt(10),SI=Math.sqrt(2);function Uv(e,t,i){const a=(t-e)/Math.max(0,i),f=Math.floor(Math.log10(a)),v=a/Math.pow(10,f),g=v>=xI?10:v>=wI?5:v>=SI?2:1;let u,E,P;return f<0?(P=Math.pow(10,-f)/g,u=Math.round(e*P),E=Math.round(t*P),u/P<e&&++u,E/P>t&&--E,P=-P):(P=Math.pow(10,f)*g,u=Math.round(e/P),E=Math.round(t/P),u*P<e&&++u,E*P>t&&--E),E<u&&.5<=i&&i<2?Uv(e,t,i*2):[u,E,P]}function CI(e,t,i){if(t=+t,e=+e,i=+i,!(i>0))return[];if(e===t)return[e];const a=t<e,[f,v,g]=a?Uv(t,e,i):Uv(e,t,i);if(!(v>=f))return[];const u=v-f+1,E=new Array(u);if(a)if(g<0)for(let P=0;P<u;++P)E[P]=(v-P)/-g;else for(let P=0;P<u;++P)E[P]=(v-P)*g;else if(g<0)for(let P=0;P<u;++P)E[P]=(f+P)/-g;else for(let P=0;P<u;++P)E[P]=(f+P)*g;return E}function Dx(e,t,i){return t=+t,e=+e,i=+i,Uv(e,t,i)[2]}function TI(e,t,i){t=+t,e=+e,i=+i;const a=t<e,f=a?Dx(t,e,i):Dx(e,t,i);return(a?-1:1)*(f<0?1/-f:f)}function kb(e,t,i){e=+e,t=+t,i=(f=arguments.length)<2?(t=e,e=0,1):f<3?1:+i;for(var a=-1,f=Math.max(0,Math.ceil((t-e)/i))|0,v=new Array(f);++a<f;)v[a]=e+a*i;return v}function EI(e){return e}var MI=1,XS=1e-6;function AI(e){return"translate("+e+",0)"}function PI(e){return t=>+e(t)}function RI(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),i=>+e(i)+t}function OI(){return!this.__axis}function II(e,t){var i=[],a=null,f=null,v=6,g=6,u=3,E=typeof window<"u"&&window.devicePixelRatio>1?0:.5,P=-1,I="y",B=AI;function j($){var X=a??(t.ticks?t.ticks.apply(t,i):t.domain()),J=f??(t.tickFormat?t.tickFormat.apply(t,i):EI),G=Math.max(v,0)+u,le=t.range(),oe=+le[0]+E,pe=+le[le.length-1]+E,he=(t.bandwidth?RI:PI)(t.copy(),E),ae=$.selection?$.selection():$,ve=ae.selectAll(".domain").data([null]),Se=ae.selectAll(".tick").data(X,t).order(),ke=Se.exit(),Le=Se.enter().append("g").attr("class","tick"),Re=Se.select("line"),me=Se.select("text");ve=ve.merge(ve.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),Se=Se.merge(Le),Re=Re.merge(Le.append("line").attr("stroke","currentColor").attr(I+"2",P*v)),me=me.merge(Le.append("text").attr("fill","currentColor").attr(I,P*G).attr("dy","0em")),$!==ae&&(ve=ve.transition($),Se=Se.transition($),Re=Re.transition($),me=me.transition($),ke=ke.transition($).attr("opacity",XS).attr("transform",function(Ae){return isFinite(Ae=he(Ae))?B(Ae+E):this.getAttribute("transform")}),Le.attr("opacity",XS).attr("transform",function(Ae){var He=this.parentNode.__axis;return B((He&&isFinite(He=He(Ae))?He:he(Ae))+E)})),ke.remove(),ve.attr("d",g?"M"+oe+","+P*g+"V"+E+"H"+pe+"V"+P*g:"M"+oe+","+E+"H"+pe),Se.attr("opacity",1).attr("transform",function(Ae){return B(he(Ae)+E)}),Re.attr(I+"2",P*v),me.attr(I,P*G).text(J),ae.filter(OI).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor","middle"),ae.each(function(){this.__axis=he})}return j.scale=function($){return arguments.length?(t=$,j):t},j.ticks=function(){return i=Array.from(arguments),j},j.tickArguments=function($){return arguments.length?(i=$==null?[]:Array.from($),j):i.slice()},j.tickValues=function($){return arguments.length?(a=$==null?null:Array.from($),j):a&&a.slice()},j.tickFormat=function($){return arguments.length?(f=$,j):f},j.tickSize=function($){return arguments.length?(v=g=+$,j):v},j.tickSizeInner=function($){return arguments.length?(v=+$,j):v},j.tickSizeOuter=function($){return arguments.length?(g=+$,j):g},j.tickPadding=function($){return arguments.length?(u=+$,j):u},j.offset=function($){return arguments.length?(E=+$,j):E},j}function kI(e){return II(MI,e)}var zI={value:()=>{}};function nw(){for(var e=0,t=arguments.length,i={},a;e<t;++e){if(!(a=arguments[e]+"")||a in i||/[\s.]/.test(a))throw new Error("illegal type: "+a);i[a]=[]}return new _v(i)}function _v(e){this._=e}function DI(e,t){return e.trim().split(/^|\s+/).map(function(i){var a="",f=i.indexOf(".");if(f>=0&&(a=i.slice(f+1),i=i.slice(0,f)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:a}})}_v.prototype=nw.prototype={constructor:_v,on:function(e,t){var i=this._,a=DI(e+"",i),f,v=-1,g=a.length;if(arguments.length<2){for(;++v<g;)if((f=(e=a[v]).type)&&(f=LI(i[f],e.name)))return f;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++v<g;)if(f=(e=a[v]).type)i[f]=WS(i[f],e.name,t);else if(t==null)for(f in i)i[f]=WS(i[f],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new _v(e)},call:function(e,t){if((f=arguments.length-2)>0)for(var i=new Array(f),a=0,f,v;a<f;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(v=this._[e],a=0,f=v.length;a<f;++a)v[a].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var a=this._[e],f=0,v=a.length;f<v;++f)a[f].value.apply(t,i)}};function LI(e,t){for(var i=0,a=e.length,f;i<a;++i)if((f=e[i]).name===t)return f.value}function WS(e,t,i){for(var a=0,f=e.length;a<f;++a)if(e[a].name===t){e[a]=zI,e=e.slice(0,a).concat(e.slice(a+1));break}return i!=null&&e.push({name:t,value:i}),e}var Lx="http://www.w3.org/1999/xhtml";const YS={svg:"http://www.w3.org/2000/svg",xhtml:Lx,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function M0(e){var t=e+="",i=t.indexOf(":");return i>=0&&(t=e.slice(0,i))!=="xmlns"&&(e=e.slice(i+1)),YS.hasOwnProperty(t)?{space:YS[t],local:e}:e}function BI(e){return function(){var t=this.ownerDocument,i=this.namespaceURI;return i===Lx&&t.documentElement.namespaceURI===Lx?t.createElement(e):t.createElementNS(i,e)}}function NI(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function PE(e){var t=M0(e);return(t.local?NI:BI)(t)}function jI(){}function rw(e){return e==null?jI:function(){return this.querySelector(e)}}function FI(e){typeof e!="function"&&(e=rw(e));for(var t=this._groups,i=t.length,a=new Array(i),f=0;f<i;++f)for(var v=t[f],g=v.length,u=a[f]=new Array(g),E,P,I=0;I<g;++I)(E=v[I])&&(P=e.call(E,E.__data__,I,v))&&("__data__"in E&&(P.__data__=E.__data__),u[I]=P);return new nl(a,this._parents)}function $I(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function VI(){return[]}function RE(e){return e==null?VI:function(){return this.querySelectorAll(e)}}function UI(e){return function(){return $I(e.apply(this,arguments))}}function HI(e){typeof e=="function"?e=UI(e):e=RE(e);for(var t=this._groups,i=t.length,a=[],f=[],v=0;v<i;++v)for(var g=t[v],u=g.length,E,P=0;P<u;++P)(E=g[P])&&(a.push(e.call(E,E.__data__,P,g)),f.push(E));return new nl(a,f)}function OE(e){return function(){return this.matches(e)}}function IE(e){return function(t){return t.matches(e)}}var qI=Array.prototype.find;function GI(e){return function(){return qI.call(this.children,e)}}function ZI(){return this.firstElementChild}function XI(e){return this.select(e==null?ZI:GI(typeof e=="function"?e:IE(e)))}var WI=Array.prototype.filter;function YI(){return Array.from(this.children)}function KI(e){return function(){return WI.call(this.children,e)}}function QI(e){return this.selectAll(e==null?YI:KI(typeof e=="function"?e:IE(e)))}function JI(e){typeof e!="function"&&(e=OE(e));for(var t=this._groups,i=t.length,a=new Array(i),f=0;f<i;++f)for(var v=t[f],g=v.length,u=a[f]=[],E,P=0;P<g;++P)(E=v[P])&&e.call(E,E.__data__,P,v)&&u.push(E);return new nl(a,this._parents)}function kE(e){return new Array(e.length)}function ek(){return new nl(this._enter||this._groups.map(kE),this._parents)}function Hv(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Hv.prototype={constructor:Hv,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function tk(e){return function(){return e}}function nk(e,t,i,a,f,v){for(var g=0,u,E=t.length,P=v.length;g<P;++g)(u=t[g])?(u.__data__=v[g],a[g]=u):i[g]=new Hv(e,v[g]);for(;g<E;++g)(u=t[g])&&(f[g]=u)}function rk(e,t,i,a,f,v,g){var u,E,P=new Map,I=t.length,B=v.length,j=new Array(I),$;for(u=0;u<I;++u)(E=t[u])&&(j[u]=$=g.call(E,E.__data__,u,t)+"",P.has($)?f[u]=E:P.set($,E));for(u=0;u<B;++u)$=g.call(e,v[u],u,v)+"",(E=P.get($))?(a[u]=E,E.__data__=v[u],P.delete($)):i[u]=new Hv(e,v[u]);for(u=0;u<I;++u)(E=t[u])&&P.get(j[u])===E&&(f[u]=E)}function ik(e){return e.__data__}function ak(e,t){if(!arguments.length)return Array.from(this,ik);var i=t?rk:nk,a=this._parents,f=this._groups;typeof e!="function"&&(e=tk(e));for(var v=f.length,g=new Array(v),u=new Array(v),E=new Array(v),P=0;P<v;++P){var I=a[P],B=f[P],j=B.length,$=ok(e.call(I,I&&I.__data__,P,a)),X=$.length,J=u[P]=new Array(X),G=g[P]=new Array(X),le=E[P]=new Array(j);i(I,B,J,G,le,$,t);for(var oe=0,pe=0,he,ae;oe<X;++oe)if(he=J[oe]){for(oe>=pe&&(pe=oe+1);!(ae=G[pe])&&++pe<X;);he._next=ae||null}}return g=new nl(g,a),g._enter=u,g._exit=E,g}function ok(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function sk(){return new nl(this._exit||this._groups.map(kE),this._parents)}function lk(e,t,i){var a=this.enter(),f=this,v=this.exit();return typeof e=="function"?(a=e(a),a&&(a=a.selection())):a=a.append(e+""),t!=null&&(f=t(f),f&&(f=f.selection())),i==null?v.remove():i(v),a&&f?a.merge(f).order():f}function ck(e){for(var t=e.selection?e.selection():e,i=this._groups,a=t._groups,f=i.length,v=a.length,g=Math.min(f,v),u=new Array(f),E=0;E<g;++E)for(var P=i[E],I=a[E],B=P.length,j=u[E]=new Array(B),$,X=0;X<B;++X)($=P[X]||I[X])&&(j[X]=$);for(;E<f;++E)u[E]=i[E];return new nl(u,this._parents)}function uk(){for(var e=this._groups,t=-1,i=e.length;++t<i;)for(var a=e[t],f=a.length-1,v=a[f],g;--f>=0;)(g=a[f])&&(v&&g.compareDocumentPosition(v)^4&&v.parentNode.insertBefore(g,v),v=g);return this}function hk(e){e||(e=fk);function t(B,j){return B&&j?e(B.__data__,j.__data__):!B-!j}for(var i=this._groups,a=i.length,f=new Array(a),v=0;v<a;++v){for(var g=i[v],u=g.length,E=f[v]=new Array(u),P,I=0;I<u;++I)(P=g[I])&&(E[I]=P);E.sort(t)}return new nl(f,this._parents).order()}function fk(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function dk(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function pk(){return Array.from(this)}function mk(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a=e[t],f=0,v=a.length;f<v;++f){var g=a[f];if(g)return g}return null}function gk(){let e=0;for(const t of this)++e;return e}function yk(){return!this.node()}function _k(e){for(var t=this._groups,i=0,a=t.length;i<a;++i)for(var f=t[i],v=0,g=f.length,u;v<g;++v)(u=f[v])&&e.call(u,u.__data__,v,f);return this}function vk(e){return function(){this.removeAttribute(e)}}function bk(e){return function(){this.removeAttributeNS(e.space,e.local)}}function xk(e,t){return function(){this.setAttribute(e,t)}}function wk(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Sk(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttribute(e):this.setAttribute(e,i)}}function Ck(e,t){return function(){var i=t.apply(this,arguments);i==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,i)}}function Tk(e,t){var i=M0(e);if(arguments.length<2){var a=this.node();return i.local?a.getAttributeNS(i.space,i.local):a.getAttribute(i)}return this.each((t==null?i.local?bk:vk:typeof t=="function"?i.local?Ck:Sk:i.local?wk:xk)(i,t))}function zE(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Ek(e){return function(){this.style.removeProperty(e)}}function Mk(e,t,i){return function(){this.style.setProperty(e,t,i)}}function Ak(e,t,i){return function(){var a=t.apply(this,arguments);a==null?this.style.removeProperty(e):this.style.setProperty(e,a,i)}}function Pk(e,t,i){return arguments.length>1?this.each((t==null?Ek:typeof t=="function"?Ak:Mk)(e,t,i??"")):Nm(this.node(),e)}function Nm(e,t){return e.style.getPropertyValue(t)||zE(e).getComputedStyle(e,null).getPropertyValue(t)}function Rk(e){return function(){delete this[e]}}function Ok(e,t){return function(){this[e]=t}}function Ik(e,t){return function(){var i=t.apply(this,arguments);i==null?delete this[e]:this[e]=i}}function kk(e,t){return arguments.length>1?this.each((t==null?Rk:typeof t=="function"?Ik:Ok)(e,t)):this.node()[e]}function DE(e){return e.trim().split(/^|\s+/)}function iw(e){return e.classList||new LE(e)}function LE(e){this._node=e,this._names=DE(e.getAttribute("class")||"")}LE.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function BE(e,t){for(var i=iw(e),a=-1,f=t.length;++a<f;)i.add(t[a])}function NE(e,t){for(var i=iw(e),a=-1,f=t.length;++a<f;)i.remove(t[a])}function zk(e){return function(){BE(this,e)}}function Dk(e){return function(){NE(this,e)}}function Lk(e,t){return function(){(t.apply(this,arguments)?BE:NE)(this,e)}}function Bk(e,t){var i=DE(e+"");if(arguments.length<2){for(var a=iw(this.node()),f=-1,v=i.length;++f<v;)if(!a.contains(i[f]))return!1;return!0}return this.each((typeof t=="function"?Lk:t?zk:Dk)(i,t))}function Nk(){this.textContent=""}function jk(e){return function(){this.textContent=e}}function Fk(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function $k(e){return arguments.length?this.each(e==null?Nk:(typeof e=="function"?Fk:jk)(e)):this.node().textContent}function Vk(){this.innerHTML=""}function Uk(e){return function(){this.innerHTML=e}}function Hk(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function qk(e){return arguments.length?this.each(e==null?Vk:(typeof e=="function"?Hk:Uk)(e)):this.node().innerHTML}function Gk(){this.nextSibling&&this.parentNode.appendChild(this)}function Zk(){return this.each(Gk)}function Xk(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Wk(){return this.each(Xk)}function Yk(e){var t=typeof e=="function"?e:PE(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function Kk(){return null}function Qk(e,t){var i=typeof e=="function"?e:PE(e),a=t==null?Kk:typeof t=="function"?t:rw(t);return this.select(function(){return this.insertBefore(i.apply(this,arguments),a.apply(this,arguments)||null)})}function Jk(){var e=this.parentNode;e&&e.removeChild(this)}function ez(){return this.each(Jk)}function tz(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function nz(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function rz(e){return this.select(e?nz:tz)}function iz(e){return arguments.length?this.property("__data__",e):this.node().__data__}function az(e){return function(t){e.call(this,t,this.__data__)}}function oz(e){return e.trim().split(/^|\s+/).map(function(t){var i="",a=t.indexOf(".");return a>=0&&(i=t.slice(a+1),t=t.slice(0,a)),{type:t,name:i}})}function sz(e){return function(){var t=this.__on;if(t){for(var i=0,a=-1,f=t.length,v;i<f;++i)v=t[i],(!e.type||v.type===e.type)&&v.name===e.name?this.removeEventListener(v.type,v.listener,v.options):t[++a]=v;++a?t.length=a:delete this.__on}}}function lz(e,t,i){return function(){var a=this.__on,f,v=az(t);if(a){for(var g=0,u=a.length;g<u;++g)if((f=a[g]).type===e.type&&f.name===e.name){this.removeEventListener(f.type,f.listener,f.options),this.addEventListener(f.type,f.listener=v,f.options=i),f.value=t;return}}this.addEventListener(e.type,v,i),f={type:e.type,name:e.name,value:t,listener:v,options:i},a?a.push(f):this.__on=[f]}}function cz(e,t,i){var a=oz(e+""),f,v=a.length,g;if(arguments.length<2){var u=this.node().__on;if(u){for(var E=0,P=u.length,I;E<P;++E)for(f=0,I=u[E];f<v;++f)if((g=a[f]).type===I.type&&g.name===I.name)return I.value}return}for(u=t?lz:sz,f=0;f<v;++f)this.each(u(a[f],t,i));return this}function jE(e,t,i){var a=zE(e),f=a.CustomEvent;typeof f=="function"?f=new f(t,i):(f=a.document.createEvent("Event"),i?(f.initEvent(t,i.bubbles,i.cancelable),f.detail=i.detail):f.initEvent(t,!1,!1)),e.dispatchEvent(f)}function uz(e,t){return function(){return jE(this,e,t)}}function hz(e,t){return function(){return jE(this,e,t.apply(this,arguments))}}function fz(e,t){return this.each((typeof t=="function"?hz:uz)(e,t))}function*dz(){for(var e=this._groups,t=0,i=e.length;t<i;++t)for(var a=e[t],f=0,v=a.length,g;f<v;++f)(g=a[f])&&(yield g)}var FE=[null];function nl(e,t){this._groups=e,this._parents=t}function Zy(){return new nl([[document.documentElement]],FE)}function pz(){return this}nl.prototype=Zy.prototype={constructor:nl,select:FI,selectAll:HI,selectChild:XI,selectChildren:QI,filter:JI,data:ak,enter:ek,exit:sk,join:lk,merge:ck,selection:pz,order:uk,sort:hk,call:dk,nodes:pk,node:mk,size:gk,empty:yk,each:_k,attr:Tk,style:Pk,property:kk,classed:Bk,text:$k,html:qk,raise:Zk,lower:Wk,append:Yk,insert:Qk,remove:ez,clone:rz,datum:iz,on:cz,dispatch:fz,[Symbol.iterator]:dz};function Ao(e){return typeof e=="string"?new nl([[document.querySelector(e)]],[document.documentElement]):new nl([[e]],FE)}function mz(e){let t;for(;t=e.sourceEvent;)e=t;return e}function KS(e,t){if(e=mz(e),t===void 0&&(t=e.currentTarget),t){var i=t.ownerSVGElement||t;if(i.createSVGPoint){var a=i.createSVGPoint();return a.x=e.clientX,a.y=e.clientY,a=a.matrixTransform(t.getScreenCTM().inverse()),[a.x,a.y]}if(t.getBoundingClientRect){var f=t.getBoundingClientRect();return[e.clientX-f.left-t.clientLeft,e.clientY-f.top-t.clientTop]}}return[e.pageX,e.pageY]}const gz={passive:!1},xy={capture:!0,passive:!1};function zb(e){e.stopImmediatePropagation()}function Pm(e){e.preventDefault(),e.stopImmediatePropagation()}function yz(e){var t=e.document.documentElement,i=Ao(e).on("dragstart.drag",Pm,xy);"onselectstart"in t?i.on("selectstart.drag",Pm,xy):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function _z(e,t){var i=e.document.documentElement,a=Ao(e).on("dragstart.drag",null);t&&(a.on("click.drag",Pm,xy),setTimeout(function(){a.on("click.drag",null)},0)),"onselectstart"in i?a.on("selectstart.drag",null):(i.style.MozUserSelect=i.__noselect,delete i.__noselect)}const q_=e=>()=>e;function Bx(e,{sourceEvent:t,subject:i,target:a,identifier:f,active:v,x:g,y:u,dx:E,dy:P,dispatch:I}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:i,enumerable:!0,configurable:!0},target:{value:a,enumerable:!0,configurable:!0},identifier:{value:f,enumerable:!0,configurable:!0},active:{value:v,enumerable:!0,configurable:!0},x:{value:g,enumerable:!0,configurable:!0},y:{value:u,enumerable:!0,configurable:!0},dx:{value:E,enumerable:!0,configurable:!0},dy:{value:P,enumerable:!0,configurable:!0},_:{value:I}})}Bx.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function vz(e){return!e.ctrlKey&&!e.button}function bz(){return this.parentNode}function xz(e,t){return t??{x:e.x,y:e.y}}function wz(){return navigator.maxTouchPoints||"ontouchstart"in this}function Sz(){var e=vz,t=bz,i=xz,a=wz,f={},v=nw("start","drag","end"),g=0,u,E,P,I,B=0;function j(he){he.on("mousedown.drag",$).filter(a).on("touchstart.drag",G).on("touchmove.drag",le,gz).on("touchend.drag touchcancel.drag",oe).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function $(he,ae){if(!(I||!e.call(this,he,ae))){var ve=pe(this,t.call(this,he,ae),he,ae,"mouse");ve&&(Ao(he.view).on("mousemove.drag",X,xy).on("mouseup.drag",J,xy),yz(he.view),zb(he),P=!1,u=he.clientX,E=he.clientY,ve("start",he))}}function X(he){if(Pm(he),!P){var ae=he.clientX-u,ve=he.clientY-E;P=ae*ae+ve*ve>B}f.mouse("drag",he)}function J(he){Ao(he.view).on("mousemove.drag mouseup.drag",null),_z(he.view,P),Pm(he),f.mouse("end",he)}function G(he,ae){if(e.call(this,he,ae)){var ve=he.changedTouches,Se=t.call(this,he,ae),ke=ve.length,Le,Re;for(Le=0;Le<ke;++Le)(Re=pe(this,Se,he,ae,ve[Le].identifier,ve[Le]))&&(zb(he),Re("start",he,ve[Le]))}}function le(he){var ae=he.changedTouches,ve=ae.length,Se,ke;for(Se=0;Se<ve;++Se)(ke=f[ae[Se].identifier])&&(Pm(he),ke("drag",he,ae[Se]))}function oe(he){var ae=he.changedTouches,ve=ae.length,Se,ke;for(I&&clearTimeout(I),I=setTimeout(function(){I=null},500),Se=0;Se<ve;++Se)(ke=f[ae[Se].identifier])&&(zb(he),ke("end",he,ae[Se]))}function pe(he,ae,ve,Se,ke,Le){var Re=v.copy(),me=KS(Le||ve,ae),Ae,He,We;if((We=i.call(he,new Bx("beforestart",{sourceEvent:ve,target:j,identifier:ke,active:g,x:me[0],y:me[1],dx:0,dy:0,dispatch:Re}),Se))!=null)return Ae=We.x-me[0]||0,He=We.y-me[1]||0,function pt(xe,et,Qe){var Rt=me,we;switch(xe){case"start":f[ke]=pt,we=g++;break;case"end":delete f[ke],--g;case"drag":me=KS(Qe||et,ae),we=g;break}Re.call(xe,he,new Bx(xe,{sourceEvent:et,subject:We,target:j,identifier:ke,active:we,x:me[0]+Ae,y:me[1]+He,dx:me[0]-Rt[0],dy:me[1]-Rt[1],dispatch:Re}),Se)}}return j.filter=function(he){return arguments.length?(e=typeof he=="function"?he:q_(!!he),j):e},j.container=function(he){return arguments.length?(t=typeof he=="function"?he:q_(he),j):t},j.subject=function(he){return arguments.length?(i=typeof he=="function"?he:q_(he),j):i},j.touchable=function(he){return arguments.length?(a=typeof he=="function"?he:q_(!!he),j):a},j.on=function(){var he=v.on.apply(v,arguments);return he===v?j:he},j.clickDistance=function(he){return arguments.length?(B=(he=+he)*he,j):Math.sqrt(B)},j}function aw(e,t,i){e.prototype=t.prototype=i,i.constructor=e}function $E(e,t){var i=Object.create(e.prototype);for(var a in t)i[a]=t[a];return i}function Xy(){}var wy=.7,qv=1/wy,Rm="\\s*([+-]?\\d+)\\s*",Sy="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Bu="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Cz=/^#([0-9a-f]{3,8})$/,Tz=new RegExp(`^rgb\\(${Rm},${Rm},${Rm}\\)$`),Ez=new RegExp(`^rgb\\(${Bu},${Bu},${Bu}\\)$`),Mz=new RegExp(`^rgba\\(${Rm},${Rm},${Rm},${Sy}\\)$`),Az=new RegExp(`^rgba\\(${Bu},${Bu},${Bu},${Sy}\\)$`),Pz=new RegExp(`^hsl\\(${Sy},${Bu},${Bu}\\)$`),Rz=new RegExp(`^hsla\\(${Sy},${Bu},${Bu},${Sy}\\)$`),QS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};aw(Xy,Zd,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:JS,formatHex:JS,formatHex8:Oz,formatHsl:Iz,formatRgb:e2,toString:e2});function JS(){return this.rgb().formatHex()}function Oz(){return this.rgb().formatHex8()}function Iz(){return VE(this).formatHsl()}function e2(){return this.rgb().formatRgb()}function Zd(e){var t,i;return e=(e+"").trim().toLowerCase(),(t=Cz.exec(e))?(i=t[1].length,t=parseInt(t[1],16),i===6?t2(t):i===3?new ys(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):i===8?G_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):i===4?G_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Tz.exec(e))?new ys(t[1],t[2],t[3],1):(t=Ez.exec(e))?new ys(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Mz.exec(e))?G_(t[1],t[2],t[3],t[4]):(t=Az.exec(e))?G_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Pz.exec(e))?i2(t[1],t[2]/100,t[3]/100,1):(t=Rz.exec(e))?i2(t[1],t[2]/100,t[3]/100,t[4]):QS.hasOwnProperty(e)?t2(QS[e]):e==="transparent"?new ys(NaN,NaN,NaN,0):null}function t2(e){return new ys(e>>16&255,e>>8&255,e&255,1)}function G_(e,t,i,a){return a<=0&&(e=t=i=NaN),new ys(e,t,i,a)}function kz(e){return e instanceof Xy||(e=Zd(e)),e?(e=e.rgb(),new ys(e.r,e.g,e.b,e.opacity)):new ys}function Nx(e,t,i,a){return arguments.length===1?kz(e):new ys(e,t,i,a??1)}function ys(e,t,i,a){this.r=+e,this.g=+t,this.b=+i,this.opacity=+a}aw(ys,Nx,$E(Xy,{brighter(e){return e=e==null?qv:Math.pow(qv,e),new ys(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?wy:Math.pow(wy,e),new ys(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ys($d(this.r),$d(this.g),$d(this.b),Gv(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:n2,formatHex:n2,formatHex8:zz,formatRgb:r2,toString:r2}));function n2(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}`}function zz(){return`#${Ld(this.r)}${Ld(this.g)}${Ld(this.b)}${Ld((isNaN(this.opacity)?1:this.opacity)*255)}`}function r2(){const e=Gv(this.opacity);return`${e===1?"rgb(":"rgba("}${$d(this.r)}, ${$d(this.g)}, ${$d(this.b)}${e===1?")":`, ${e})`}`}function Gv(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function $d(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ld(e){return e=$d(e),(e<16?"0":"")+e.toString(16)}function i2(e,t,i,a){return a<=0?e=t=i=NaN:i<=0||i>=1?e=t=NaN:t<=0&&(e=NaN),new Oc(e,t,i,a)}function VE(e){if(e instanceof Oc)return new Oc(e.h,e.s,e.l,e.opacity);if(e instanceof Xy||(e=Zd(e)),!e)return new Oc;if(e instanceof Oc)return e;e=e.rgb();var t=e.r/255,i=e.g/255,a=e.b/255,f=Math.min(t,i,a),v=Math.max(t,i,a),g=NaN,u=v-f,E=(v+f)/2;return u?(t===v?g=(i-a)/u+(i<a)*6:i===v?g=(a-t)/u+2:g=(t-i)/u+4,u/=E<.5?v+f:2-v-f,g*=60):u=E>0&&E<1?0:g,new Oc(g,u,E,e.opacity)}function Dz(e,t,i,a){return arguments.length===1?VE(e):new Oc(e,t,i,a??1)}function Oc(e,t,i,a){this.h=+e,this.s=+t,this.l=+i,this.opacity=+a}aw(Oc,Dz,$E(Xy,{brighter(e){return e=e==null?qv:Math.pow(qv,e),new Oc(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?wy:Math.pow(wy,e),new Oc(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,i=this.l,a=i+(i<.5?i:1-i)*t,f=2*i-a;return new ys(Db(e>=240?e-240:e+120,f,a),Db(e,f,a),Db(e<120?e+240:e-120,f,a),this.opacity)},clamp(){return new Oc(a2(this.h),Z_(this.s),Z_(this.l),Gv(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Gv(this.opacity);return`${e===1?"hsl(":"hsla("}${a2(this.h)}, ${Z_(this.s)*100}%, ${Z_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function a2(e){return e=(e||0)%360,e<0?e+360:e}function Z_(e){return Math.max(0,Math.min(1,e||0))}function Db(e,t,i){return(e<60?t+(i-t)*e/60:e<180?i:e<240?t+(i-t)*(240-e)/60:t)*255}const ow=e=>()=>e;function Lz(e,t){return function(i){return e+i*t}}function Bz(e,t,i){return e=Math.pow(e,i),t=Math.pow(t,i)-e,i=1/i,function(a){return Math.pow(e+a*t,i)}}function Nz(e){return(e=+e)==1?UE:function(t,i){return i-t?Bz(t,i,e):ow(isNaN(t)?i:t)}}function UE(e,t){var i=t-e;return i?Lz(e,i):ow(isNaN(e)?t:e)}const Zv=function e(t){var i=Nz(t);function a(f,v){var g=i((f=Nx(f)).r,(v=Nx(v)).r),u=i(f.g,v.g),E=i(f.b,v.b),P=UE(f.opacity,v.opacity);return function(I){return f.r=g(I),f.g=u(I),f.b=E(I),f.opacity=P(I),f+""}}return a.gamma=e,a}(1);function jz(e,t){t||(t=[]);var i=e?Math.min(t.length,e.length):0,a=t.slice(),f;return function(v){for(f=0;f<i;++f)a[f]=e[f]*(1-v)+t[f]*v;return a}}function Fz(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function $z(e,t){var i=t?t.length:0,a=e?Math.min(i,e.length):0,f=new Array(a),v=new Array(i),g;for(g=0;g<a;++g)f[g]=sw(e[g],t[g]);for(;g<i;++g)v[g]=t[g];return function(u){for(g=0;g<a;++g)v[g]=f[g](u);return v}}function Vz(e,t){var i=new Date;return e=+e,t=+t,function(a){return i.setTime(e*(1-a)+t*a),i}}function Rc(e,t){return e=+e,t=+t,function(i){return e*(1-i)+t*i}}function Uz(e,t){var i={},a={},f;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(f in t)f in e?i[f]=sw(e[f],t[f]):a[f]=t[f];return function(v){for(f in i)a[f]=i[f](v);return a}}var jx=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Lb=new RegExp(jx.source,"g");function Hz(e){return function(){return e}}function qz(e){return function(t){return e(t)+""}}function HE(e,t){var i=jx.lastIndex=Lb.lastIndex=0,a,f,v,g=-1,u=[],E=[];for(e=e+"",t=t+"";(a=jx.exec(e))&&(f=Lb.exec(t));)(v=f.index)>i&&(v=t.slice(i,v),u[g]?u[g]+=v:u[++g]=v),(a=a[0])===(f=f[0])?u[g]?u[g]+=f:u[++g]=f:(u[++g]=null,E.push({i:g,x:Rc(a,f)})),i=Lb.lastIndex;return i<t.length&&(v=t.slice(i),u[g]?u[g]+=v:u[++g]=v),u.length<2?E[0]?qz(E[0].x):Hz(t):(t=E.length,function(P){for(var I=0,B;I<t;++I)u[(B=E[I]).i]=B.x(P);return u.join("")})}function sw(e,t){var i=typeof t,a;return t==null||i==="boolean"?ow(t):(i==="number"?Rc:i==="string"?(a=Zd(t))?(t=a,Zv):HE:t instanceof Zd?Zv:t instanceof Date?Vz:Fz(t)?jz:Array.isArray(t)?$z:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Uz:Rc)(e,t)}function Gz(e,t){return e=+e,t=+t,function(i){return Math.round(e*(1-i)+t*i)}}var o2=180/Math.PI,Fx={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function qE(e,t,i,a,f,v){var g,u,E;return(g=Math.sqrt(e*e+t*t))&&(e/=g,t/=g),(E=e*i+t*a)&&(i-=e*E,a-=t*E),(u=Math.sqrt(i*i+a*a))&&(i/=u,a/=u,E/=u),e*a<t*i&&(e=-e,t=-t,E=-E,g=-g),{translateX:f,translateY:v,rotate:Math.atan2(t,e)*o2,skewX:Math.atan(E)*o2,scaleX:g,scaleY:u}}var X_;function Zz(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Fx:qE(t.a,t.b,t.c,t.d,t.e,t.f)}function Xz(e){return e==null||(X_||(X_=document.createElementNS("http://www.w3.org/2000/svg","g")),X_.setAttribute("transform",e),!(e=X_.transform.baseVal.consolidate()))?Fx:(e=e.matrix,qE(e.a,e.b,e.c,e.d,e.e,e.f))}function GE(e,t,i,a){function f(P){return P.length?P.pop()+" ":""}function v(P,I,B,j,$,X){if(P!==B||I!==j){var J=$.push("translate(",null,t,null,i);X.push({i:J-4,x:Rc(P,B)},{i:J-2,x:Rc(I,j)})}else(B||j)&&$.push("translate("+B+t+j+i)}function g(P,I,B,j){P!==I?(P-I>180?I+=360:I-P>180&&(P+=360),j.push({i:B.push(f(B)+"rotate(",null,a)-2,x:Rc(P,I)})):I&&B.push(f(B)+"rotate("+I+a)}function u(P,I,B,j){P!==I?j.push({i:B.push(f(B)+"skewX(",null,a)-2,x:Rc(P,I)}):I&&B.push(f(B)+"skewX("+I+a)}function E(P,I,B,j,$,X){if(P!==B||I!==j){var J=$.push(f($)+"scale(",null,",",null,")");X.push({i:J-4,x:Rc(P,B)},{i:J-2,x:Rc(I,j)})}else(B!==1||j!==1)&&$.push(f($)+"scale("+B+","+j+")")}return function(P,I){var B=[],j=[];return P=e(P),I=e(I),v(P.translateX,P.translateY,I.translateX,I.translateY,B,j),g(P.rotate,I.rotate,B,j),u(P.skewX,I.skewX,B,j),E(P.scaleX,P.scaleY,I.scaleX,I.scaleY,B,j),P=I=null,function($){for(var X=-1,J=j.length,G;++X<J;)B[(G=j[X]).i]=G.x($);return B.join("")}}}var Wz=GE(Zz,"px, ","px)","deg)"),Yz=GE(Xz,", ",")",")"),jm=0,sy=0,ny=0,ZE=1e3,Xv,ly,Wv=0,Xd=0,A0=0,Cy=typeof performance=="object"&&performance.now?performance:Date,XE=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lw(){return Xd||(XE(Kz),Xd=Cy.now()+A0)}function Kz(){Xd=0}function Yv(){this._call=this._time=this._next=null}Yv.prototype=WE.prototype={constructor:Yv,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?lw():+i)+(t==null?0:+t),!this._next&&ly!==this&&(ly?ly._next=this:Xv=this,ly=this),this._call=e,this._time=i,$x()},stop:function(){this._call&&(this._call=null,this._time=1/0,$x())}};function WE(e,t,i){var a=new Yv;return a.restart(e,t,i),a}function Qz(){lw(),++jm;for(var e=Xv,t;e;)(t=Xd-e._time)>=0&&e._call.call(void 0,t),e=e._next;--jm}function s2(){Xd=(Wv=Cy.now())+A0,jm=sy=0;try{Qz()}finally{jm=0,e6(),Xd=0}}function Jz(){var e=Cy.now(),t=e-Wv;t>ZE&&(A0-=t,Wv=e)}function e6(){for(var e,t=Xv,i,a=1/0;t;)t._call?(a>t._time&&(a=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:Xv=i);ly=e,$x(a)}function $x(e){if(!jm){sy&&(sy=clearTimeout(sy));var t=e-Xd;t>24?(e<1/0&&(sy=setTimeout(s2,e-Cy.now()-A0)),ny&&(ny=clearInterval(ny))):(ny||(Wv=Cy.now(),ny=setInterval(Jz,ZE)),jm=1,XE(s2))}}function l2(e,t,i){var a=new Yv;return t=t==null?0:+t,a.restart(f=>{a.stop(),e(f+t)},t,i),a}var t6=nw("start","end","cancel","interrupt"),n6=[],YE=0,c2=1,Vx=2,vv=3,u2=4,Ux=5,bv=6;function P0(e,t,i,a,f,v){var g=e.__transition;if(!g)e.__transition={};else if(i in g)return;r6(e,i,{name:t,index:a,group:f,on:t6,tween:n6,time:v.time,delay:v.delay,duration:v.duration,ease:v.ease,timer:null,state:YE})}function cw(e,t){var i=jc(e,t);if(i.state>YE)throw new Error("too late; already scheduled");return i}function Vu(e,t){var i=jc(e,t);if(i.state>vv)throw new Error("too late; already running");return i}function jc(e,t){var i=e.__transition;if(!i||!(i=i[t]))throw new Error("transition not found");return i}function r6(e,t,i){var a=e.__transition,f;a[t]=i,i.timer=WE(v,0,i.time);function v(P){i.state=c2,i.timer.restart(g,i.delay,i.time),i.delay<=P&&g(P-i.delay)}function g(P){var I,B,j,$;if(i.state!==c2)return E();for(I in a)if($=a[I],$.name===i.name){if($.state===vv)return l2(g);$.state===u2?($.state=bv,$.timer.stop(),$.on.call("interrupt",e,e.__data__,$.index,$.group),delete a[I]):+I<t&&($.state=bv,$.timer.stop(),$.on.call("cancel",e,e.__data__,$.index,$.group),delete a[I])}if(l2(function(){i.state===vv&&(i.state=u2,i.timer.restart(u,i.delay,i.time),u(P))}),i.state=Vx,i.on.call("start",e,e.__data__,i.index,i.group),i.state===Vx){for(i.state=vv,f=new Array(j=i.tween.length),I=0,B=-1;I<j;++I)($=i.tween[I].value.call(e,e.__data__,i.index,i.group))&&(f[++B]=$);f.length=B+1}}function u(P){for(var I=P<i.duration?i.ease.call(null,P/i.duration):(i.timer.restart(E),i.state=Ux,1),B=-1,j=f.length;++B<j;)f[B].call(e,I);i.state===Ux&&(i.on.call("end",e,e.__data__,i.index,i.group),E())}function E(){i.state=bv,i.timer.stop(),delete a[t];for(var P in a)return;delete e.__transition}}function i6(e,t){var i=e.__transition,a,f,v=!0,g;if(i){t=t==null?null:t+"";for(g in i){if((a=i[g]).name!==t){v=!1;continue}f=a.state>Vx&&a.state<Ux,a.state=bv,a.timer.stop(),a.on.call(f?"interrupt":"cancel",e,e.__data__,a.index,a.group),delete i[g]}v&&delete e.__transition}}function a6(e){return this.each(function(){i6(this,e)})}function o6(e,t){var i,a;return function(){var f=Vu(this,e),v=f.tween;if(v!==i){a=i=v;for(var g=0,u=a.length;g<u;++g)if(a[g].name===t){a=a.slice(),a.splice(g,1);break}}f.tween=a}}function s6(e,t,i){var a,f;if(typeof i!="function")throw new Error;return function(){var v=Vu(this,e),g=v.tween;if(g!==a){f=(a=g).slice();for(var u={name:t,value:i},E=0,P=f.length;E<P;++E)if(f[E].name===t){f[E]=u;break}E===P&&f.push(u)}v.tween=f}}function l6(e,t){var i=this._id;if(e+="",arguments.length<2){for(var a=jc(this.node(),i).tween,f=0,v=a.length,g;f<v;++f)if((g=a[f]).name===e)return g.value;return null}return this.each((t==null?o6:s6)(i,e,t))}function uw(e,t,i){var a=e._id;return e.each(function(){var f=Vu(this,a);(f.value||(f.value={}))[t]=i.apply(this,arguments)}),function(f){return jc(f,a).value[t]}}function KE(e,t){var i;return(typeof t=="number"?Rc:t instanceof Zd?Zv:(i=Zd(t))?(t=i,Zv):HE)(e,t)}function c6(e){return function(){this.removeAttribute(e)}}function u6(e){return function(){this.removeAttributeNS(e.space,e.local)}}function h6(e,t,i){var a,f=i+"",v;return function(){var g=this.getAttribute(e);return g===f?null:g===a?v:v=t(a=g,i)}}function f6(e,t,i){var a,f=i+"",v;return function(){var g=this.getAttributeNS(e.space,e.local);return g===f?null:g===a?v:v=t(a=g,i)}}function d6(e,t,i){var a,f,v;return function(){var g,u=i(this),E;return u==null?void this.removeAttribute(e):(g=this.getAttribute(e),E=u+"",g===E?null:g===a&&E===f?v:(f=E,v=t(a=g,u)))}}function p6(e,t,i){var a,f,v;return function(){var g,u=i(this),E;return u==null?void this.removeAttributeNS(e.space,e.local):(g=this.getAttributeNS(e.space,e.local),E=u+"",g===E?null:g===a&&E===f?v:(f=E,v=t(a=g,u)))}}function m6(e,t){var i=M0(e),a=i==="transform"?Yz:KE;return this.attrTween(e,typeof t=="function"?(i.local?p6:d6)(i,a,uw(this,"attr."+e,t)):t==null?(i.local?u6:c6)(i):(i.local?f6:h6)(i,a,t))}function g6(e,t){return function(i){this.setAttribute(e,t.call(this,i))}}function y6(e,t){return function(i){this.setAttributeNS(e.space,e.local,t.call(this,i))}}function _6(e,t){var i,a;function f(){var v=t.apply(this,arguments);return v!==a&&(i=(a=v)&&y6(e,v)),i}return f._value=t,f}function v6(e,t){var i,a;function f(){var v=t.apply(this,arguments);return v!==a&&(i=(a=v)&&g6(e,v)),i}return f._value=t,f}function b6(e,t){var i="attr."+e;if(arguments.length<2)return(i=this.tween(i))&&i._value;if(t==null)return this.tween(i,null);if(typeof t!="function")throw new Error;var a=M0(e);return this.tween(i,(a.local?_6:v6)(a,t))}function x6(e,t){return function(){cw(this,e).delay=+t.apply(this,arguments)}}function w6(e,t){return t=+t,function(){cw(this,e).delay=t}}function S6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?x6:w6)(t,e)):jc(this.node(),t).delay}function C6(e,t){return function(){Vu(this,e).duration=+t.apply(this,arguments)}}function T6(e,t){return t=+t,function(){Vu(this,e).duration=t}}function E6(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?C6:T6)(t,e)):jc(this.node(),t).duration}function M6(e,t){if(typeof t!="function")throw new Error;return function(){Vu(this,e).ease=t}}function A6(e){var t=this._id;return arguments.length?this.each(M6(t,e)):jc(this.node(),t).ease}function P6(e,t){return function(){var i=t.apply(this,arguments);if(typeof i!="function")throw new Error;Vu(this,e).ease=i}}function R6(e){if(typeof e!="function")throw new Error;return this.each(P6(this._id,e))}function O6(e){typeof e!="function"&&(e=OE(e));for(var t=this._groups,i=t.length,a=new Array(i),f=0;f<i;++f)for(var v=t[f],g=v.length,u=a[f]=[],E,P=0;P<g;++P)(E=v[P])&&e.call(E,E.__data__,P,v)&&u.push(E);return new Dh(a,this._parents,this._name,this._id)}function I6(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,i=e._groups,a=t.length,f=i.length,v=Math.min(a,f),g=new Array(a),u=0;u<v;++u)for(var E=t[u],P=i[u],I=E.length,B=g[u]=new Array(I),j,$=0;$<I;++$)(j=E[$]||P[$])&&(B[$]=j);for(;u<a;++u)g[u]=t[u];return new Dh(g,this._parents,this._name,this._id)}function k6(e){return(e+"").trim().split(/^|\s+/).every(function(t){var i=t.indexOf(".");return i>=0&&(t=t.slice(0,i)),!t||t==="start"})}function z6(e,t,i){var a,f,v=k6(t)?cw:Vu;return function(){var g=v(this,e),u=g.on;u!==a&&(f=(a=u).copy()).on(t,i),g.on=f}}function D6(e,t){var i=this._id;return arguments.length<2?jc(this.node(),i).on.on(e):this.each(z6(i,e,t))}function L6(e){return function(){var t=this.parentNode;for(var i in this.__transition)if(+i!==e)return;t&&t.removeChild(this)}}function B6(){return this.on("end.remove",L6(this._id))}function N6(e){var t=this._name,i=this._id;typeof e!="function"&&(e=rw(e));for(var a=this._groups,f=a.length,v=new Array(f),g=0;g<f;++g)for(var u=a[g],E=u.length,P=v[g]=new Array(E),I,B,j=0;j<E;++j)(I=u[j])&&(B=e.call(I,I.__data__,j,u))&&("__data__"in I&&(B.__data__=I.__data__),P[j]=B,P0(P[j],t,i,j,P,jc(I,i)));return new Dh(v,this._parents,t,i)}function j6(e){var t=this._name,i=this._id;typeof e!="function"&&(e=RE(e));for(var a=this._groups,f=a.length,v=[],g=[],u=0;u<f;++u)for(var E=a[u],P=E.length,I,B=0;B<P;++B)if(I=E[B]){for(var j=e.call(I,I.__data__,B,E),$,X=jc(I,i),J=0,G=j.length;J<G;++J)($=j[J])&&P0($,t,i,J,j,X);v.push(j),g.push(I)}return new Dh(v,g,t,i)}var F6=Zy.prototype.constructor;function $6(){return new F6(this._groups,this._parents)}function V6(e,t){var i,a,f;return function(){var v=Nm(this,e),g=(this.style.removeProperty(e),Nm(this,e));return v===g?null:v===i&&g===a?f:f=t(i=v,a=g)}}function QE(e){return function(){this.style.removeProperty(e)}}function U6(e,t,i){var a,f=i+"",v;return function(){var g=Nm(this,e);return g===f?null:g===a?v:v=t(a=g,i)}}function H6(e,t,i){var a,f,v;return function(){var g=Nm(this,e),u=i(this),E=u+"";return u==null&&(E=u=(this.style.removeProperty(e),Nm(this,e))),g===E?null:g===a&&E===f?v:(f=E,v=t(a=g,u))}}function q6(e,t){var i,a,f,v="style."+t,g="end."+v,u;return function(){var E=Vu(this,e),P=E.on,I=E.value[v]==null?u||(u=QE(t)):void 0;(P!==i||f!==I)&&(a=(i=P).copy()).on(g,f=I),E.on=a}}function G6(e,t,i){var a=(e+="")=="transform"?Wz:KE;return t==null?this.styleTween(e,V6(e,a)).on("end.style."+e,QE(e)):typeof t=="function"?this.styleTween(e,H6(e,a,uw(this,"style."+e,t))).each(q6(this._id,e)):this.styleTween(e,U6(e,a,t),i).on("end.style."+e,null)}function Z6(e,t,i){return function(a){this.style.setProperty(e,t.call(this,a),i)}}function X6(e,t,i){var a,f;function v(){var g=t.apply(this,arguments);return g!==f&&(a=(f=g)&&Z6(e,g,i)),a}return v._value=t,v}function W6(e,t,i){var a="style."+(e+="");if(arguments.length<2)return(a=this.tween(a))&&a._value;if(t==null)return this.tween(a,null);if(typeof t!="function")throw new Error;return this.tween(a,X6(e,t,i??""))}function Y6(e){return function(){this.textContent=e}}function K6(e){return function(){var t=e(this);this.textContent=t??""}}function Q6(e){return this.tween("text",typeof e=="function"?K6(uw(this,"text",e)):Y6(e==null?"":e+""))}function J6(e){return function(t){this.textContent=e.call(this,t)}}function eD(e){var t,i;function a(){var f=e.apply(this,arguments);return f!==i&&(t=(i=f)&&J6(f)),t}return a._value=e,a}function tD(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,eD(e))}function nD(){for(var e=this._name,t=this._id,i=JE(),a=this._groups,f=a.length,v=0;v<f;++v)for(var g=a[v],u=g.length,E,P=0;P<u;++P)if(E=g[P]){var I=jc(E,t);P0(E,e,i,P,g,{time:I.time+I.delay+I.duration,delay:0,duration:I.duration,ease:I.ease})}return new Dh(a,this._parents,e,i)}function rD(){var e,t,i=this,a=i._id,f=i.size();return new Promise(function(v,g){var u={value:g},E={value:function(){--f===0&&v()}};i.each(function(){var P=Vu(this,a),I=P.on;I!==e&&(t=(e=I).copy(),t._.cancel.push(u),t._.interrupt.push(u),t._.end.push(E)),P.on=t}),f===0&&v()})}var iD=0;function Dh(e,t,i,a){this._groups=e,this._parents=t,this._name=i,this._id=a}function JE(){return++iD}var Mh=Zy.prototype;Dh.prototype={constructor:Dh,select:N6,selectAll:j6,selectChild:Mh.selectChild,selectChildren:Mh.selectChildren,filter:O6,merge:I6,selection:$6,transition:nD,call:Mh.call,nodes:Mh.nodes,node:Mh.node,size:Mh.size,empty:Mh.empty,each:Mh.each,on:D6,attr:m6,attrTween:b6,style:G6,styleTween:W6,text:Q6,textTween:tD,remove:B6,tween:l6,delay:S6,duration:E6,ease:A6,easeVarying:R6,end:rD,[Symbol.iterator]:Mh[Symbol.iterator]};function aD(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var oD={time:null,delay:0,duration:250,ease:aD};function sD(e,t){for(var i;!(i=e.__transition)||!(i=i[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return i}function lD(e){var t,i;e instanceof Dh?(t=e._id,e=e._name):(t=JE(),(i=oD).time=lw(),e=e==null?null:e+"");for(var a=this._groups,f=a.length,v=0;v<f;++v)for(var g=a[v],u=g.length,E,P=0;P<u;++P)(E=g[P])&&P0(E,e,t,P,g,i||sD(E,t));return new Dh(a,this._parents,e,t)}Zy.prototype.interrupt=a6;Zy.prototype.transition=lD;function cD(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Kv(e,t){if((i=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var i,a=e.slice(0,i);return[a.length>1?a[0]+a.slice(2):a,+e.slice(i+1)]}function Fm(e){return e=Kv(Math.abs(e)),e?e[1]:NaN}function uD(e,t){return function(i,a){for(var f=i.length,v=[],g=0,u=e[0],E=0;f>0&&u>0&&(E+u+1>a&&(u=Math.max(1,a-E)),v.push(i.substring(f-=u,f+u)),!((E+=u+1)>a));)u=e[g=(g+1)%e.length];return v.reverse().join(t)}}function hD(e){return function(t){return t.replace(/[0-9]/g,function(i){return e[+i]})}}var fD=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Qv(e){if(!(t=fD.exec(e)))throw new Error("invalid format: "+e);var t;return new hw({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Qv.prototype=hw.prototype;function hw(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}hw.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function dD(e){e:for(var t=e.length,i=1,a=-1,f;i<t;++i)switch(e[i]){case".":a=f=i;break;case"0":a===0&&(a=i),f=i;break;default:if(!+e[i])break e;a>0&&(a=0);break}return a>0?e.slice(0,a)+e.slice(f+1):e}var eM;function pD(e,t){var i=Kv(e,t);if(!i)return e+"";var a=i[0],f=i[1],v=f-(eM=Math.max(-8,Math.min(8,Math.floor(f/3)))*3)+1,g=a.length;return v===g?a:v>g?a+new Array(v-g+1).join("0"):v>0?a.slice(0,v)+"."+a.slice(v):"0."+new Array(1-v).join("0")+Kv(e,Math.max(0,t+v-1))[0]}function h2(e,t){var i=Kv(e,t);if(!i)return e+"";var a=i[0],f=i[1];return f<0?"0."+new Array(-f).join("0")+a:a.length>f+1?a.slice(0,f+1)+"."+a.slice(f+1):a+new Array(f-a.length+2).join("0")}const f2={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:cD,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>h2(e*100,t),r:h2,s:pD,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function d2(e){return e}var p2=Array.prototype.map,m2=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function mD(e){var t=e.grouping===void 0||e.thousands===void 0?d2:uD(p2.call(e.grouping,Number),e.thousands+""),i=e.currency===void 0?"":e.currency[0]+"",a=e.currency===void 0?"":e.currency[1]+"",f=e.decimal===void 0?".":e.decimal+"",v=e.numerals===void 0?d2:hD(p2.call(e.numerals,String)),g=e.percent===void 0?"%":e.percent+"",u=e.minus===void 0?"":e.minus+"",E=e.nan===void 0?"NaN":e.nan+"";function P(B){B=Qv(B);var j=B.fill,$=B.align,X=B.sign,J=B.symbol,G=B.zero,le=B.width,oe=B.comma,pe=B.precision,he=B.trim,ae=B.type;ae==="n"?(oe=!0,ae="g"):f2[ae]||(pe===void 0&&(pe=12),he=!0,ae="g"),(G||j==="0"&&$==="=")&&(G=!0,j="0",$="=");var ve=J==="$"?i:J==="#"&&/[boxX]/.test(ae)?"0"+ae.toLowerCase():"",Se=J==="$"?a:/[%p]/.test(ae)?g:"",ke=f2[ae],Le=/[defgprs%]/.test(ae);pe=pe===void 0?6:/[gprs]/.test(ae)?Math.max(1,Math.min(21,pe)):Math.max(0,Math.min(20,pe));function Re(me){var Ae=ve,He=Se,We,pt,xe;if(ae==="c")He=ke(me)+He,me="";else{me=+me;var et=me<0||1/me<0;if(me=isNaN(me)?E:ke(Math.abs(me),pe),he&&(me=dD(me)),et&&+me==0&&X!=="+"&&(et=!1),Ae=(et?X==="("?X:u:X==="-"||X==="("?"":X)+Ae,He=(ae==="s"?m2[8+eM/3]:"")+He+(et&&X==="("?")":""),Le){for(We=-1,pt=me.length;++We<pt;)if(xe=me.charCodeAt(We),48>xe||xe>57){He=(xe===46?f+me.slice(We+1):me.slice(We))+He,me=me.slice(0,We);break}}}oe&&!G&&(me=t(me,1/0));var Qe=Ae.length+me.length+He.length,Rt=Qe<le?new Array(le-Qe+1).join(j):"";switch(oe&&G&&(me=t(Rt+me,Rt.length?le-He.length:1/0),Rt=""),$){case"<":me=Ae+me+He+Rt;break;case"=":me=Ae+Rt+me+He;break;case"^":me=Rt.slice(0,Qe=Rt.length>>1)+Ae+me+He+Rt.slice(Qe);break;default:me=Rt+Ae+me+He;break}return v(me)}return Re.toString=function(){return B+""},Re}function I(B,j){var $=P((B=Qv(B),B.type="f",B)),X=Math.max(-8,Math.min(8,Math.floor(Fm(j)/3)))*3,J=Math.pow(10,-X),G=m2[8+X/3];return function(le){return $(J*le)+G}}return{format:P,formatPrefix:I}}var W_,tM,nM;gD({thousands:",",grouping:[3],currency:["$",""]});function gD(e){return W_=mD(e),tM=W_.format,nM=W_.formatPrefix,W_}function yD(e){return Math.max(0,-Fm(Math.abs(e)))}function _D(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Fm(t)/3)))*3-Fm(Math.abs(e)))}function vD(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Fm(t)-Fm(e))+1}function rM(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}const g2=Symbol("implicit");function Hx(){var e=new GS,t=[],i=[],a=g2;function f(v){let g=e.get(v);if(g===void 0){if(a!==g2)return a;e.set(v,g=t.push(v)-1)}return i[g%i.length]}return f.domain=function(v){if(!arguments.length)return t.slice();t=[],e=new GS;for(const g of v)e.has(g)||e.set(g,t.push(g)-1);return f},f.range=function(v){return arguments.length?(i=Array.from(v),f):i.slice()},f.unknown=function(v){return arguments.length?(a=v,f):a},f.copy=function(){return Hx(t,i).unknown(a)},rM.apply(f,arguments),f}function bD(e){return function(){return e}}function xD(e){return+e}var y2=[0,1];function Sm(e){return e}function qx(e,t){return(t-=e=+e)?function(i){return(i-e)/t}:bD(isNaN(t)?NaN:.5)}function wD(e,t){var i;return e>t&&(i=e,e=t,t=i),function(a){return Math.max(e,Math.min(t,a))}}function SD(e,t,i){var a=e[0],f=e[1],v=t[0],g=t[1];return f<a?(a=qx(f,a),v=i(g,v)):(a=qx(a,f),v=i(v,g)),function(u){return v(a(u))}}function CD(e,t,i){var a=Math.min(e.length,t.length)-1,f=new Array(a),v=new Array(a),g=-1;for(e[a]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++g<a;)f[g]=qx(e[g],e[g+1]),v[g]=i(t[g],t[g+1]);return function(u){var E=yI(e,u,1,a)-1;return v[E](f[E](u))}}function TD(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function ED(){var e=y2,t=y2,i=sw,a,f,v,g=Sm,u,E,P;function I(){var j=Math.min(e.length,t.length);return g!==Sm&&(g=wD(e[0],e[j-1])),u=j>2?CD:SD,E=P=null,B}function B(j){return j==null||isNaN(j=+j)?v:(E||(E=u(e.map(a),t,i)))(a(g(j)))}return B.invert=function(j){return g(f((P||(P=u(t,e.map(a),Rc)))(j)))},B.domain=function(j){return arguments.length?(e=Array.from(j,xD),I()):e.slice()},B.range=function(j){return arguments.length?(t=Array.from(j),I()):t.slice()},B.rangeRound=function(j){return t=Array.from(j),i=Gz,I()},B.clamp=function(j){return arguments.length?(g=j?!0:Sm,I()):g!==Sm},B.interpolate=function(j){return arguments.length?(i=j,I()):i},B.unknown=function(j){return arguments.length?(v=j,B):v},function(j,$){return a=j,f=$,I()}}function MD(){return ED()(Sm,Sm)}function AD(e,t,i,a){var f=TI(e,t,i),v;switch(a=Qv(a??",f"),a.type){case"s":{var g=Math.max(Math.abs(e),Math.abs(t));return a.precision==null&&!isNaN(v=_D(f,g))&&(a.precision=v),nM(a,g)}case"":case"e":case"g":case"p":case"r":{a.precision==null&&!isNaN(v=vD(f,Math.max(Math.abs(e),Math.abs(t))))&&(a.precision=v-(a.type==="e"));break}case"f":case"%":{a.precision==null&&!isNaN(v=yD(f))&&(a.precision=v-(a.type==="%")*2);break}}return tM(a)}function PD(e){var t=e.domain;return e.ticks=function(i){var a=t();return CI(a[0],a[a.length-1],i??10)},e.tickFormat=function(i,a){var f=t();return AD(f[0],f[f.length-1],i??10,a)},e.nice=function(i){i==null&&(i=10);var a=t(),f=0,v=a.length-1,g=a[f],u=a[v],E,P,I=10;for(u<g&&(P=g,g=u,u=P,P=f,f=v,v=P);I-- >0;){if(P=Dx(g,u,i),P===E)return a[f]=g,a[v]=u,t(a);if(P>0)g=Math.floor(g/P)*P,u=Math.ceil(u/P)*P;else if(P<0)g=Math.ceil(g*P)/P,u=Math.floor(u*P)/P;else break;E=P}return e},e}function Gx(){var e=MD();return e.copy=function(){return TD(e,Gx())},rM.apply(e,arguments),PD(e)}function RD(e){for(var t=e.length/6|0,i=new Array(t),a=0;a<t;)i[a]="#"+e.slice(a*6,++a*6);return i}const OD=RD("4e79a7f28e2ce1575976b7b259a14fedc949af7aa1ff9da79c755fbab0ab");function cy(e,t,i){this.k=e,this.x=t,this.y=i}cy.prototype={constructor:cy,scale:function(e){return e===1?this:new cy(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new cy(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};cy.prototype;var Bb={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/var _2;function ID(){return _2||(_2=1,function(e){(function(){var t={}.hasOwnProperty;function i(){for(var v="",g=0;g<arguments.length;g++){var u=arguments[g];u&&(v=f(v,a(u)))}return v}function a(v){if(typeof v=="string"||typeof v=="number")return v;if(typeof v!="object")return"";if(Array.isArray(v))return i.apply(null,v);if(v.toString!==Object.prototype.toString&&!v.toString.toString().includes("[native code]"))return v.toString();var g="";for(var u in v)t.call(v,u)&&v[u]&&(g=f(g,u));return g}function f(v,g){return g?v?v+" "+g:v+g:v}e.exports?(i.default=i,e.exports=i):window.classNames=i})()}(Bb)),Bb.exports}var kD=ID();const Mn=f0(kD);function Ti(){return Ti=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var a in i)({}).hasOwnProperty.call(i,a)&&(e[a]=i[a])}return e},Ti.apply(null,arguments)}function zn(e){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zn(e)}var zD=Symbol.for("react.element"),DD=Symbol.for("react.transitional.element"),LD=Symbol.for("react.fragment");function iM(e){return e&&zn(e)==="object"&&(e.$$typeof===zD||e.$$typeof===DD)&&e.type===LD}function Zx(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[];return Nt.Children.forEach(e,function(a){a==null&&!t.keepEmpty||(Array.isArray(a)?i=i.concat(Zx(a)):iM(a)&&a.props?i=i.concat(Zx(a.props.children,t)):i.push(a))}),i}var Xx={},BD=function(t){};function ND(e,t){}function jD(e,t){}function FD(){Xx={}}function aM(e,t,i){!t&&!Xx[i]&&(e(!1,i),Xx[i]=!0)}function el(e,t){aM(ND,e,t)}function $D(e,t){aM(jD,e,t)}el.preMessage=BD;el.resetWarned=FD;el.noteOnce=$D;function VD(e,t){if(zn(e)!="object"||!e)return e;var i=e[Symbol.toPrimitive];if(i!==void 0){var a=i.call(e,t);if(zn(a)!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function oM(e){var t=VD(e,"string");return zn(t)=="symbol"?t:t+""}function ut(e,t,i){return(t=oM(t))in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function v2(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(f){return Object.getOwnPropertyDescriptor(e,f).enumerable})),i.push.apply(i,a)}return i}function ct(e){for(var t=1;t<arguments.length;t++){var i=arguments[t]!=null?arguments[t]:{};t%2?v2(Object(i),!0).forEach(function(a){ut(e,a,i[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):v2(Object(i)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(i,a))})}return e}function b2(e){return e instanceof HTMLElement||e instanceof SVGElement}function UD(e){return e&&zn(e)==="object"&&b2(e.nativeElement)?e.nativeElement:b2(e)?e:null}function HD(e){var t=UD(e);if(t)return t;if(e instanceof Nt.Component){var i;return(i=Ex.findDOMNode)===null||i===void 0?void 0:i.call(Ex,e)}return null}var Nb={exports:{}},Xr={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var x2;function qD(){if(x2)return Xr;x2=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),a=Symbol.for("react.strict_mode"),f=Symbol.for("react.profiler"),v=Symbol.for("react.provider"),g=Symbol.for("react.context"),u=Symbol.for("react.server_context"),E=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),I=Symbol.for("react.suspense_list"),B=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),$=Symbol.for("react.offscreen"),X;X=Symbol.for("react.module.reference");function J(G){if(typeof G=="object"&&G!==null){var le=G.$$typeof;switch(le){case e:switch(G=G.type,G){case i:case f:case a:case P:case I:return G;default:switch(G=G&&G.$$typeof,G){case u:case g:case E:case j:case B:case v:return G;default:return le}}case t:return le}}}return Xr.ContextConsumer=g,Xr.ContextProvider=v,Xr.Element=e,Xr.ForwardRef=E,Xr.Fragment=i,Xr.Lazy=j,Xr.Memo=B,Xr.Portal=t,Xr.Profiler=f,Xr.StrictMode=a,Xr.Suspense=P,Xr.SuspenseList=I,Xr.isAsyncMode=function(){return!1},Xr.isConcurrentMode=function(){return!1},Xr.isContextConsumer=function(G){return J(G)===g},Xr.isContextProvider=function(G){return J(G)===v},Xr.isElement=function(G){return typeof G=="object"&&G!==null&&G.$$typeof===e},Xr.isForwardRef=function(G){return J(G)===E},Xr.isFragment=function(G){return J(G)===i},Xr.isLazy=function(G){return J(G)===j},Xr.isMemo=function(G){return J(G)===B},Xr.isPortal=function(G){return J(G)===t},Xr.isProfiler=function(G){return J(G)===f},Xr.isStrictMode=function(G){return J(G)===a},Xr.isSuspense=function(G){return J(G)===P},Xr.isSuspenseList=function(G){return J(G)===I},Xr.isValidElementType=function(G){return typeof G=="string"||typeof G=="function"||G===i||G===f||G===a||G===P||G===I||G===$||typeof G=="object"&&G!==null&&(G.$$typeof===j||G.$$typeof===B||G.$$typeof===v||G.$$typeof===g||G.$$typeof===E||G.$$typeof===X||G.getModuleId!==void 0)},Xr.typeOf=J,Xr}var w2;function GD(){return w2||(w2=1,Nb.exports=qD()),Nb.exports}var jb=GD();function R0(e,t,i){var a=U.useRef({});return(!("value"in a.current)||i(a.current.condition,t))&&(a.current.value=e(),a.current.condition=t),a.current.value}var ZD=Number(U.version.split(".")[0]),sM=function(t,i){typeof t=="function"?t(i):zn(t)==="object"&&t&&"current"in t&&(t.current=i)},fw=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var f=i.filter(Boolean);return f.length<=1?f[0]:function(v){i.forEach(function(g){sM(g,v)})}},dw=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return R0(function(){return fw.apply(void 0,i)},i,function(f,v){return f.length!==v.length||f.every(function(g,u){return g!==v[u]})})},pw=function(t){var i,a;if(!t)return!1;if(lM(t)&&ZD>=19)return!0;var f=jb.isMemo(t)?t.type.type:t.type;return!(typeof f=="function"&&!((i=f.prototype)!==null&&i!==void 0&&i.render)&&f.$$typeof!==jb.ForwardRef||typeof t=="function"&&!((a=t.prototype)!==null&&a!==void 0&&a.render)&&t.$$typeof!==jb.ForwardRef)};function lM(e){return U.isValidElement(e)&&!iM(e)}var cM=function(t){if(t&&lM(t)){var i=t;return i.props.propertyIsEnumerable("ref")?i.props.ref:i.ref}return null};function Xa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S2(e,t){for(var i=0;i<t.length;i++){var a=t[i];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,oM(a.key),a)}}function Wa(e,t,i){return t&&S2(e.prototype,t),i&&S2(e,i),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ty(e,t){return Ty=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,a){return i.__proto__=a,i},Ty(e,t)}function np(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ty(e,t)}function Ey(e){return Ey=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},Ey(e)}function mw(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(mw=function(){return!!e})()}function ur(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function XD(e,t){if(t&&(zn(t)=="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ur(e)}function rp(e){var t=mw();return function(){var i,a=Ey(e);if(t){var f=Ey(this).constructor;i=Reflect.construct(a,arguments,f)}else i=a.apply(this,arguments);return XD(this,i)}}function Wx(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=Array(t);i<t;i++)a[i]=e[i];return a}function WD(e){if(Array.isArray(e))return Wx(e)}function uM(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gw(e,t){if(e){if(typeof e=="string")return Wx(e,t);var i={}.toString.call(e).slice(8,-1);return i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set"?Array.from(e):i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?Wx(e,t):void 0}}function YD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wn(e){return WD(e)||uM(e)||gw(e)||YD()}var hM=function(t){return+setTimeout(t,16)},fM=function(t){return clearTimeout(t)};typeof window<"u"&&"requestAnimationFrame"in window&&(hM=function(t){return window.requestAnimationFrame(t)},fM=function(t){return window.cancelAnimationFrame(t)});var C2=0,yw=new Map;function dM(e){yw.delete(e)}var Wd=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;C2+=1;var a=C2;function f(v){if(v===0)dM(a),t();else{var g=hM(function(){f(v-1)});yw.set(a,g)}}return f(i),a};Wd.cancel=function(e){var t=yw.get(e);return dM(e),fM(t)};function pM(e){if(Array.isArray(e))return e}function KD(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,g,u=[],E=!0,P=!1;try{if(v=(i=i.call(e)).next,t===0){if(Object(i)!==i)return;E=!1}else for(;!(E=(a=v.call(i)).done)&&(u.push(a.value),u.length!==t);E=!0);}catch(I){P=!0,f=I}finally{try{if(!E&&i.return!=null&&(g=i.return(),Object(g)!==g))return}finally{if(P)throw f}}return u}}function mM(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fn(e,t){return pM(e)||KD(e,t)||gw(e,t)||mM()}function My(e){for(var t=0,i,a=0,f=e.length;f>=4;++a,f-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(f){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}function _s(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function Yx(e,t){if(!e)return!1;if(e.contains)return e.contains(t);for(var i=t;i;){if(i===e)return!0;i=i.parentNode}return!1}var T2="data-rc-order",E2="data-rc-priority",QD="rc-util-key",Kx=new Map;function gM(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.mark;return t?t.startsWith("data-")?t:"data-".concat(t):QD}function O0(e){if(e.attachTo)return e.attachTo;var t=document.querySelector("head");return t||document.body}function JD(e){return e==="queue"?"prependQueue":e?"prepend":"append"}function _w(e){return Array.from((Kx.get(e)||e).children).filter(function(t){return t.tagName==="STYLE"})}function yM(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(!_s())return null;var i=t.csp,a=t.prepend,f=t.priority,v=f===void 0?0:f,g=JD(a),u=g==="prependQueue",E=document.createElement("style");E.setAttribute(T2,g),u&&v&&E.setAttribute(E2,"".concat(v)),i!=null&&i.nonce&&(E.nonce=i==null?void 0:i.nonce),E.innerHTML=e;var P=O0(t),I=P.firstChild;if(a){if(u){var B=(t.styles||_w(P)).filter(function(j){if(!["prepend","prependQueue"].includes(j.getAttribute(T2)))return!1;var $=Number(j.getAttribute(E2)||0);return v>=$});if(B.length)return P.insertBefore(E,B[B.length-1].nextSibling),E}P.insertBefore(E,I)}else P.appendChild(E);return E}function _M(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=O0(t);return(t.styles||_w(i)).find(function(a){return a.getAttribute(gM(t))===e})}function Ay(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=_M(e,t);if(i){var a=O0(t);a.removeChild(i)}}function e5(e,t){var i=Kx.get(e);if(!i||!Yx(document,i)){var a=yM("",t),f=a.parentNode;Kx.set(e,f),e.removeChild(a)}}function kh(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=O0(i),f=_w(a),v=ct(ct({},i),{},{styles:f});e5(a,v);var g=_M(t,v);if(g){var u,E;if((u=v.csp)!==null&&u!==void 0&&u.nonce&&g.nonce!==((E=v.csp)===null||E===void 0?void 0:E.nonce)){var P;g.nonce=(P=v.csp)===null||P===void 0?void 0:P.nonce}return g.innerHTML!==e&&(g.innerHTML=e),g}var I=yM(e,v);return I.setAttribute(gM(v),t),I}function t5(e,t){if(e==null)return{};var i={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;i[a]=e[a]}return i}function uo(e,t){if(e==null)return{};var i,a,f=t5(e,t);if(Object.getOwnPropertySymbols){var v=Object.getOwnPropertySymbols(e);for(a=0;a<v.length;a++)i=v[a],t.indexOf(i)===-1&&{}.propertyIsEnumerable.call(e,i)&&(f[i]=e[i])}return f}function Py(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,a=new Set;function f(v,g){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,E=a.has(v);if(el(!E,"Warning: There may be circular references"),E)return!1;if(v===g)return!0;if(i&&u>1)return!1;a.add(v);var P=u+1;if(Array.isArray(v)){if(!Array.isArray(g)||v.length!==g.length)return!1;for(var I=0;I<v.length;I++)if(!f(v[I],g[I],P))return!1;return!0}if(v&&g&&zn(v)==="object"&&zn(g)==="object"){var B=Object.keys(v);return B.length!==Object.keys(g).length?!1:B.every(function(j){return f(v[j],g[j],P)})}return!1}return f(e,t)}var n5="%";function Qx(e){return e.join(n5)}var r5=function(){function e(t){Xa(this,e),ut(this,"instanceId",void 0),ut(this,"cache",new Map),ut(this,"extracted",new Set),this.instanceId=t}return Wa(e,[{key:"get",value:function(i){return this.opGet(Qx(i))}},{key:"opGet",value:function(i){return this.cache.get(i)||null}},{key:"update",value:function(i,a){return this.opUpdate(Qx(i),a)}},{key:"opUpdate",value:function(i,a){var f=this.cache.get(i),v=a(f);v===null?this.cache.delete(i):this.cache.set(i,v)}}]),e}(),i5=["children"],$m="data-token-hash",zc="data-css-hash",jf="__cssinjs_instance__";function vM(){var e=Math.random().toString(12).slice(2);if(typeof document<"u"&&document.head&&document.body){var t=document.body.querySelectorAll("style[".concat(zc,"]"))||[],i=document.head.firstChild;Array.from(t).forEach(function(f){f[jf]=f[jf]||e,f[jf]===e&&document.head.insertBefore(f,i)});var a={};Array.from(document.querySelectorAll("style[".concat(zc,"]"))).forEach(function(f){var v=f.getAttribute(zc);if(a[v]){if(f[jf]===e){var g;(g=f.parentNode)===null||g===void 0||g.removeChild(f)}}else a[v]=!0})}return new r5(e)}var Yd=U.createContext({hashPriority:"low",cache:vM(),defaultCache:!0}),a5=function(t){var i=t.children,a=uo(t,i5),f=U.useContext(Yd),v=R0(function(){var g=ct({},f);Object.keys(a).forEach(function(E){var P=a[E];a[E]!==void 0&&(g[E]=P)});var u=a.cache;return g.cache=g.cache||vM(),g.defaultCache=!u&&f.defaultCache,g},[f,a],function(g,u){return!Py(g[0],u[0],!0)||!Py(g[1],u[1],!0)});return U.createElement(Yd.Provider,{value:v},i)};function o5(e,t){if(e.length!==t.length)return!1;for(var i=0;i<e.length;i++)if(e[i]!==t[i])return!1;return!0}var vw=function(){function e(){Xa(this,e),ut(this,"cache",void 0),ut(this,"keys",void 0),ut(this,"cacheCallTimes",void 0),this.cache=new Map,this.keys=[],this.cacheCallTimes=0}return Wa(e,[{key:"size",value:function(){return this.keys.length}},{key:"internalGet",value:function(i){var a,f,v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,g={map:this.cache};return i.forEach(function(u){if(!g)g=void 0;else{var E;g=(E=g)===null||E===void 0||(E=E.map)===null||E===void 0?void 0:E.get(u)}}),(a=g)!==null&&a!==void 0&&a.value&&v&&(g.value[1]=this.cacheCallTimes++),(f=g)===null||f===void 0?void 0:f.value}},{key:"get",value:function(i){var a;return(a=this.internalGet(i,!0))===null||a===void 0?void 0:a[0]}},{key:"has",value:function(i){return!!this.internalGet(i)}},{key:"set",value:function(i,a){var f=this;if(!this.has(i)){if(this.size()+1>e.MAX_CACHE_SIZE+e.MAX_CACHE_OFFSET){var v=this.keys.reduce(function(P,I){var B=fn(P,2),j=B[1];return f.internalGet(I)[1]<j?[I,f.internalGet(I)[1]]:P},[this.keys[0],this.cacheCallTimes]),g=fn(v,1),u=g[0];this.delete(u)}this.keys.push(i)}var E=this.cache;i.forEach(function(P,I){if(I===i.length-1)E.set(P,{value:[a,f.cacheCallTimes++]});else{var B=E.get(P);B?B.map||(B.map=new Map):E.set(P,{map:new Map}),E=E.get(P).map}})}},{key:"deleteByPath",value:function(i,a){var f=i.get(a[0]);if(a.length===1){var v;return f.map?i.set(a[0],{map:f.map}):i.delete(a[0]),(v=f.value)===null||v===void 0?void 0:v[0]}var g=this.deleteByPath(f.map,a.slice(1));return(!f.map||f.map.size===0)&&!f.value&&i.delete(a[0]),g}},{key:"delete",value:function(i){if(this.has(i))return this.keys=this.keys.filter(function(a){return!o5(a,i)}),this.deleteByPath(this.cache,i)}}]),e}();ut(vw,"MAX_CACHE_SIZE",20);ut(vw,"MAX_CACHE_OFFSET",5);var M2=0,bM=function(){function e(t){Xa(this,e),ut(this,"derivatives",void 0),ut(this,"id",void 0),this.derivatives=Array.isArray(t)?t:[t],this.id=M2,t.length===0&&(t.length>0,void 0),M2+=1}return Wa(e,[{key:"getDerivativeToken",value:function(i){return this.derivatives.reduce(function(a,f){return f(i,a)},void 0)}}]),e}(),Fb=new vw;function Jv(e){var t=Array.isArray(e)?e:[e];return Fb.has(t)||Fb.set(t,new bM(t)),Fb.get(t)}var s5=new WeakMap,$b={};function l5(e,t){for(var i=s5,a=0;a<t.length;a+=1){var f=t[a];i.has(f)||i.set(f,new WeakMap),i=i.get(f)}return i.has($b)||i.set($b,e()),i.get($b)}var A2=new WeakMap;function py(e){var t=A2.get(e)||"";return t||(Object.keys(e).forEach(function(i){var a=e[i];t+=i,a instanceof bM?t+=a.id:a&&zn(a)==="object"?t+=py(a):t+=a}),t=My(t),A2.set(e,t)),t}function P2(e,t){return My("".concat(t,"_").concat(py(e)))}var Jx=_s();function _r(e){return typeof e=="number"?"".concat(e,"px"):e}function e0(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},f=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(f)return e;var v=ct(ct({},a),{},ut(ut({},$m,t),zc,i)),g=Object.keys(v).map(function(u){var E=v[u];return E?"".concat(u,'="').concat(E,'"'):null}).filter(function(u){return u}).join(" ");return"<style ".concat(g,">").concat(e,"</style>")}var xv=function(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return"--".concat(i?"".concat(i,"-"):"").concat(t).replace(/([a-z0-9])([A-Z])/g,"$1-$2").replace(/([A-Z]+)([A-Z][a-z0-9]+)/g,"$1-$2").replace(/([a-z])([A-Z0-9])/g,"$1-$2").toLowerCase()},c5=function(t,i,a){return Object.keys(t).length?".".concat(i).concat(a!=null&&a.scope?".".concat(a.scope):"","{").concat(Object.entries(t).map(function(f){var v=fn(f,2),g=v[0],u=v[1];return"".concat(g,":").concat(u,";")}).join(""),"}"):""},xM=function(t,i,a){var f={},v={};return Object.entries(t).forEach(function(g){var u,E,P=fn(g,2),I=P[0],B=P[1];if(a!=null&&(u=a.preserve)!==null&&u!==void 0&&u[I])v[I]=B;else if((typeof B=="string"||typeof B=="number")&&!(a!=null&&(E=a.ignore)!==null&&E!==void 0&&E[I])){var j,$=xv(I,a==null?void 0:a.prefix);f[$]=typeof B=="number"&&!(a!=null&&(j=a.unitless)!==null&&j!==void 0&&j[I])?"".concat(B,"px"):String(B),v[I]="var(".concat($,")")}}),[v,c5(f,i,{scope:a==null?void 0:a.scope})]},R2=_s()?U.useLayoutEffect:U.useEffect,t0=function(t,i){var a=U.useRef(!0);R2(function(){return t(a.current)},i),R2(function(){return a.current=!1,function(){a.current=!0}},[])},u5=ct({},Dm),O2=u5.useInsertionEffect,h5=function(t,i,a){U.useMemo(t,a),t0(function(){return i(!0)},a)},f5=O2?function(e,t,i){return O2(function(){return e(),t()},i)}:h5,d5=ct({},Dm),p5=d5.useInsertionEffect,m5=function(t){var i=[],a=!1;function f(v){a||i.push(v)}return U.useEffect(function(){return a=!1,function(){a=!0,i.length&&i.forEach(function(v){return v()})}},t),f},g5=function(){return function(t){t()}},y5=typeof p5<"u"?m5:g5;function bw(e,t,i,a,f){var v=U.useContext(Yd),g=v.cache,u=[e].concat(wn(t)),E=Qx(u),P=y5([E]),I=function(X){g.opUpdate(E,function(J){var G=J||[void 0,void 0],le=fn(G,2),oe=le[0],pe=oe===void 0?0:oe,he=le[1],ae=he,ve=ae||i(),Se=[pe,ve];return X?X(Se):Se})};U.useMemo(function(){I()},[E]);var B=g.opGet(E),j=B[1];return f5(function(){f==null||f(j)},function($){return I(function(X){var J=fn(X,2),G=J[0],le=J[1];return $&&G===0&&(f==null||f(j)),[G+1,le]}),function(){g.opUpdate(E,function(X){var J=X||[],G=fn(J,2),le=G[0],oe=le===void 0?0:le,pe=G[1],he=oe-1;return he===0?(P(function(){($||!g.opGet(E))&&(a==null||a(pe,!1))}),null):[oe-1,pe]})}},[E]),j}var _5={},v5="css",Dd=new Map;function b5(e){Dd.set(e,(Dd.get(e)||0)+1)}function x5(e,t){if(typeof document<"u"){var i=document.querySelectorAll("style[".concat($m,'="').concat(e,'"]'));i.forEach(function(a){if(a[jf]===t){var f;(f=a.parentNode)===null||f===void 0||f.removeChild(a)}})}}var w5=0;function S5(e,t){Dd.set(e,(Dd.get(e)||0)-1);var i=new Set;Dd.forEach(function(a,f){a<=0&&i.add(f)}),Dd.size-i.size>w5&&i.forEach(function(a){x5(a,t),Dd.delete(a)})}var wM=function(t,i,a,f){var v=a.getDerivativeToken(t),g=ct(ct({},v),i);return f&&(g=f(g)),g},SM="token";function C5(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=U.useContext(Yd),f=a.cache.instanceId,v=a.container,g=i.salt,u=g===void 0?"":g,E=i.override,P=E===void 0?_5:E,I=i.formatToken,B=i.getComputedToken,j=i.cssVar,$=l5(function(){return Object.assign.apply(Object,[{}].concat(wn(t)))},t),X=py($),J=py(P),G=j?py(j):"",le=bw(SM,[u,e.id,X,J,G],function(){var oe,pe=B?B($,P,e):wM($,P,e,I),he=ct({},pe),ae="";if(j){var ve=xM(pe,j.key,{prefix:j.prefix,ignore:j.ignore,unitless:j.unitless,preserve:j.preserve}),Se=fn(ve,2);pe=Se[0],ae=Se[1]}var ke=P2(pe,u);pe._tokenKey=ke,he._tokenKey=P2(he,u);var Le=(oe=j==null?void 0:j.key)!==null&&oe!==void 0?oe:ke;pe._themeKey=Le,b5(Le);var Re="".concat(v5,"-").concat(My(ke));return pe._hashId=Re,[pe,Re,he,ae,(j==null?void 0:j.key)||""]},function(oe){S5(oe[0]._themeKey,f)},function(oe){var pe=fn(oe,4),he=pe[0],ae=pe[3];if(j&&ae){var ve=kh(ae,My("css-variables-".concat(he._themeKey)),{mark:zc,prepend:"queue",attachTo:v,priority:-999});ve[jf]=f,ve.setAttribute($m,he._themeKey)}});return le}var T5=function(t,i,a){var f=fn(t,5),v=f[2],g=f[3],u=f[4],E=a||{},P=E.plain;if(!g)return null;var I=v._tokenKey,B=-999,j={"data-rc-order":"prependQueue","data-rc-priority":"".concat(B)},$=e0(g,u,I,j,P);return[B,I,$]},E5={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},CM="comm",TM="rule",EM="decl",M5="@import",A5="@namespace",P5="@keyframes",R5="@layer",MM=Math.abs,xw=String.fromCharCode;function AM(e){return e.trim()}function wv(e,t,i){return e.replace(t,i)}function O5(e,t,i){return e.indexOf(t,i)}function Om(e,t){return e.charCodeAt(t)|0}function Vm(e,t,i){return e.slice(t,i)}function Au(e){return e.length}function I5(e){return e.length}function Y_(e,t){return t.push(e),e}var I0=1,Um=1,PM=0,Bl=0,xa=0,Qm="";function ww(e,t,i,a,f,v,g,u){return{value:e,root:t,parent:i,type:a,props:f,children:v,line:I0,column:Um,length:g,return:"",siblings:u}}function k5(){return xa}function z5(){return xa=Bl>0?Om(Qm,--Bl):0,Um--,xa===10&&(Um=1,I0--),xa}function Dc(){return xa=Bl<PM?Om(Qm,Bl++):0,Um++,xa===10&&(Um=1,I0++),xa}function Ff(){return Om(Qm,Bl)}function Sv(){return Bl}function k0(e,t){return Vm(Qm,e,t)}function Ry(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function D5(e){return I0=Um=1,PM=Au(Qm=e),Bl=0,[]}function L5(e){return Qm="",e}function Vb(e){return AM(k0(Bl-1,e1(e===91?e+2:e===40?e+1:e)))}function B5(e){for(;(xa=Ff())&&xa<33;)Dc();return Ry(e)>2||Ry(xa)>3?"":" "}function N5(e,t){for(;--t&&Dc()&&!(xa<48||xa>102||xa>57&&xa<65||xa>70&&xa<97););return k0(e,Sv()+(t<6&&Ff()==32&&Dc()==32))}function e1(e){for(;Dc();)switch(xa){case e:return Bl;case 34:case 39:e!==34&&e!==39&&e1(xa);break;case 40:e===41&&e1(e);break;case 92:Dc();break}return Bl}function j5(e,t){for(;Dc()&&e+xa!==57;)if(e+xa===84&&Ff()===47)break;return"/*"+k0(t,Bl-1)+"*"+xw(e===47?e:Dc())}function F5(e){for(;!Ry(Ff());)Dc();return k0(e,Bl)}function $5(e){return L5(Cv("",null,null,null,[""],e=D5(e),0,[0],e))}function Cv(e,t,i,a,f,v,g,u,E){for(var P=0,I=0,B=g,j=0,$=0,X=0,J=1,G=1,le=1,oe=0,pe="",he=f,ae=v,ve=a,Se=pe;G;)switch(X=oe,oe=Dc()){case 40:if(X!=108&&Om(Se,B-1)==58){O5(Se+=wv(Vb(oe),"&","&\f"),"&\f",MM(P?u[P-1]:0))!=-1&&(le=-1);break}case 34:case 39:case 91:Se+=Vb(oe);break;case 9:case 10:case 13:case 32:Se+=B5(X);break;case 92:Se+=N5(Sv()-1,7);continue;case 47:switch(Ff()){case 42:case 47:Y_(V5(j5(Dc(),Sv()),t,i,E),E),(Ry(X||1)==5||Ry(Ff()||1)==5)&&Au(Se)&&Vm(Se,-1,void 0)!==" "&&(Se+=" ");break;default:Se+="/"}break;case 123*J:u[P++]=Au(Se)*le;case 125*J:case 59:case 0:switch(oe){case 0:case 125:G=0;case 59+I:le==-1&&(Se=wv(Se,/\f/g,"")),$>0&&(Au(Se)-B||J===0&&X===47)&&Y_($>32?k2(Se+";",a,i,B-1,E):k2(wv(Se," ","")+";",a,i,B-2,E),E);break;case 59:Se+=";";default:if(Y_(ve=I2(Se,t,i,P,I,f,u,pe,he=[],ae=[],B,v),v),oe===123)if(I===0)Cv(Se,t,ve,ve,he,v,B,u,ae);else{switch(j){case 99:if(Om(Se,3)===110)break;case 108:if(Om(Se,2)===97)break;default:I=0;case 100:case 109:case 115:}I?Cv(e,ve,ve,a&&Y_(I2(e,ve,ve,0,0,f,u,pe,f,he=[],B,ae),ae),f,ae,B,u,a?he:ae):Cv(Se,ve,ve,ve,[""],ae,0,u,ae)}}P=I=$=0,J=le=1,pe=Se="",B=g;break;case 58:B=1+Au(Se),$=X;default:if(J<1){if(oe==123)--J;else if(oe==125&&J++==0&&z5()==125)continue}switch(Se+=xw(oe),oe*J){case 38:le=I>0?1:(Se+="\f",-1);break;case 44:u[P++]=(Au(Se)-1)*le,le=1;break;case 64:Ff()===45&&(Se+=Vb(Dc())),j=Ff(),I=B=Au(pe=Se+=F5(Sv())),oe++;break;case 45:X===45&&Au(Se)==2&&(J=0)}}return v}function I2(e,t,i,a,f,v,g,u,E,P,I,B){for(var j=f-1,$=f===0?v:[""],X=I5($),J=0,G=0,le=0;J<a;++J)for(var oe=0,pe=Vm(e,j+1,j=MM(G=g[J])),he=e;oe<X;++oe)(he=AM(G>0?$[oe]+" "+pe:wv(pe,/&\f/g,$[oe])))&&(E[le++]=he);return ww(e,t,i,f===0?TM:u,E,P,I,B)}function V5(e,t,i,a){return ww(e,t,i,CM,xw(k5()),Vm(e,2,-2),0,a)}function k2(e,t,i,a,f){return ww(e,t,i,EM,Vm(e,0,a),Vm(e,a+1,-1),a,f)}function t1(e,t){for(var i="",a=0;a<e.length;a++)i+=t(e[a],a,e,t)||"";return i}function U5(e,t,i,a){switch(e.type){case R5:if(e.children.length)break;case M5:case A5:case EM:return e.return=e.return||e.value;case CM:return"";case P5:return e.return=e.value+"{"+t1(e.children,a)+"}";case TM:if(!Au(e.value=e.props.join(",")))return""}return Au(i=t1(e.children,a))?e.return=e.value+"{"+i+"}":""}var z2="data-ant-cssinjs-cache-path",RM="_FILE_STYLE__",Vd,OM=!0;function H5(){if(!Vd&&(Vd={},_s())){var e=document.createElement("div");e.className=z2,e.style.position="fixed",e.style.visibility="hidden",e.style.top="-9999px",document.body.appendChild(e);var t=getComputedStyle(e).content||"";t=t.replace(/^"/,"").replace(/"$/,""),t.split(";").forEach(function(f){var v=f.split(":"),g=fn(v,2),u=g[0],E=g[1];Vd[u]=E});var i=document.querySelector("style[".concat(z2,"]"));if(i){var a;OM=!1,(a=i.parentNode)===null||a===void 0||a.removeChild(i)}document.body.removeChild(e)}}function q5(e){return H5(),!!Vd[e]}function G5(e){var t=Vd[e],i=null;if(t&&_s())if(OM)i=RM;else{var a=document.querySelector("style[".concat(zc,'="').concat(Vd[e],'"]'));a?i=a.innerHTML:delete Vd[e]}return[i,t]}var Z5="_skip_check_",IM="_multi_value_";function Tv(e){var t=t1($5(e),U5);return t.replace(/\{%%%\:[^;];}/g,";")}function X5(e){return zn(e)==="object"&&e&&(Z5 in e||IM in e)}function D2(e,t,i){if(!t)return e;var a=".".concat(t),f=i==="low"?":where(".concat(a,")"):a,v=e.split(",").map(function(g){var u,E=g.trim().split(/\s+/),P=E[0]||"",I=((u=P.match(/^\w+/))===null||u===void 0?void 0:u[0])||"";return P="".concat(I).concat(f).concat(P.slice(I.length)),[P].concat(wn(E.slice(1))).join(" ")});return v.join(",")}var W5=function e(t){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{root:!0,parentSelectors:[]},f=a.root,v=a.injectHash,g=a.parentSelectors,u=i.hashId,E=i.layer;i.path;var P=i.hashPriority,I=i.transformers,B=I===void 0?[]:I;i.linters;var j="",$={};function X(le){var oe=le.getName(u);if(!$[oe]){var pe=e(le.style,i,{root:!1,parentSelectors:g}),he=fn(pe,1),ae=he[0];$[oe]="@keyframes ".concat(le.getName(u)).concat(ae)}}function J(le){var oe=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];return le.forEach(function(pe){Array.isArray(pe)?J(pe,oe):pe&&oe.push(pe)}),oe}var G=J(Array.isArray(t)?t:[t]);return G.forEach(function(le){var oe=typeof le=="string"&&!f?{}:le;if(typeof oe=="string")j+="".concat(oe,`
`);else if(oe._keyframe)X(oe);else{var pe=B.reduce(function(he,ae){var ve;return(ae==null||(ve=ae.visit)===null||ve===void 0?void 0:ve.call(ae,he))||he},oe);Object.keys(pe).forEach(function(he){var ae=pe[he];if(zn(ae)==="object"&&ae&&(he!=="animationName"||!ae._keyframe)&&!X5(ae)){var ve=!1,Se=he.trim(),ke=!1;(f||v)&&u?Se.startsWith("@")?ve=!0:Se==="&"?Se=D2("",u,P):Se=D2(he,u,P):f&&!u&&(Se==="&"||Se==="")&&(Se="",ke=!0);var Le=e(ae,i,{root:ke,injectHash:ve,parentSelectors:[].concat(wn(g),[Se])}),Re=fn(Le,2),me=Re[0],Ae=Re[1];$=ct(ct({},$),Ae),j+="".concat(Se).concat(me)}else{let pt=function(xe,et){var Qe=xe.replace(/[A-Z]/g,function(we){return"-".concat(we.toLowerCase())}),Rt=et;!E5[xe]&&typeof Rt=="number"&&Rt!==0&&(Rt="".concat(Rt,"px")),xe==="animationName"&&et!==null&&et!==void 0&&et._keyframe&&(X(et),Rt=et.getName(u)),j+="".concat(Qe,":").concat(Rt,";")};var He,We=(He=ae==null?void 0:ae.value)!==null&&He!==void 0?He:ae;zn(ae)==="object"&&ae!==null&&ae!==void 0&&ae[IM]&&Array.isArray(We)?We.forEach(function(xe){pt(he,xe)}):pt(he,We)}})}}),f?E&&(j&&(j="@layer ".concat(E.name," {").concat(j,"}")),E.dependencies&&($["@layer ".concat(E.name)]=E.dependencies.map(function(le){return"@layer ".concat(le,", ").concat(E.name,";")}).join(`
`))):j="{".concat(j,"}"),[j,$]};function kM(e,t){return My("".concat(e.join("%")).concat(t))}function Y5(){return null}var zM="style";function n1(e,t){var i=e.token,a=e.path,f=e.hashId,v=e.layer,g=e.nonce,u=e.clientOnly,E=e.order,P=E===void 0?0:E,I=U.useContext(Yd),B=I.autoClear;I.mock;var j=I.defaultCache,$=I.hashPriority,X=I.container,J=I.ssrInline,G=I.transformers,le=I.linters,oe=I.cache,pe=I.layer,he=i._tokenKey,ae=[he];pe&&ae.push("layer"),ae.push.apply(ae,wn(a));var ve=Jx,Se=bw(zM,ae,function(){var Ae=ae.join("|");if(q5(Ae)){var He=G5(Ae),We=fn(He,2),pt=We[0],xe=We[1];if(pt)return[pt,he,xe,{},u,P]}var et=t(),Qe=W5(et,{hashId:f,hashPriority:$,layer:pe?v:void 0,path:a.join("-"),transformers:G,linters:le}),Rt=fn(Qe,2),we=Rt[0],tt=Rt[1],_t=Tv(we),Pt=kM(ae,_t);return[_t,he,Pt,tt,u,P]},function(Ae,He){var We=fn(Ae,3),pt=We[2];(He||B)&&Jx&&Ay(pt,{mark:zc,attachTo:X})},function(Ae){var He=fn(Ae,4),We=He[0];He[1];var pt=He[2],xe=He[3];if(ve&&We!==RM){var et={mark:zc,prepend:pe?!1:"queue",attachTo:X,priority:P},Qe=typeof g=="function"?g():g;Qe&&(et.csp={nonce:Qe});var Rt=[],we=[];Object.keys(xe).forEach(function(_t){_t.startsWith("@layer")?Rt.push(_t):we.push(_t)}),Rt.forEach(function(_t){kh(Tv(xe[_t]),"_layer-".concat(_t),ct(ct({},et),{},{prepend:!0}))});var tt=kh(We,pt,et);tt[jf]=oe.instanceId,tt.setAttribute($m,he),we.forEach(function(_t){kh(Tv(xe[_t]),"_effect-".concat(_t),et)})}}),ke=fn(Se,3),Le=ke[0],Re=ke[1],me=ke[2];return function(Ae){var He;return!J||ve||!j?He=U.createElement(Y5,null):He=U.createElement("style",Ti({},ut(ut({},$m,Re),zc,me),{dangerouslySetInnerHTML:{__html:Le}})),U.createElement(U.Fragment,null,He,Ae)}}var K5=function(t,i,a){var f=fn(t,6),v=f[0],g=f[1],u=f[2],E=f[3],P=f[4],I=f[5],B=a||{},j=B.plain;if(P)return null;var $=v,X={"data-rc-order":"prependQueue","data-rc-priority":"".concat(I)};return $=e0(v,g,u,X,j),E&&Object.keys(E).forEach(function(J){if(!i[J]){i[J]=!0;var G=Tv(E[J]),le=e0(G,g,"_effect-".concat(J),X,j);J.startsWith("@layer")?$=le+$:$+=le}}),[I,u,$]},DM="cssVar",Q5=function(t,i){var a=t.key,f=t.prefix,v=t.unitless,g=t.ignore,u=t.token,E=t.scope,P=E===void 0?"":E,I=U.useContext(Yd),B=I.cache.instanceId,j=I.container,$=u._tokenKey,X=[].concat(wn(t.path),[a,P,$]),J=bw(DM,X,function(){var G=i(),le=xM(G,a,{prefix:f,unitless:v,ignore:g,scope:P}),oe=fn(le,2),pe=oe[0],he=oe[1],ae=kM(X,he);return[pe,he,ae,a]},function(G){var le=fn(G,3),oe=le[2];Jx&&Ay(oe,{mark:zc,attachTo:j})},function(G){var le=fn(G,3),oe=le[1],pe=le[2];if(oe){var he=kh(oe,pe,{mark:zc,prepend:"queue",attachTo:j,priority:-999});he[jf]=B,he.setAttribute($m,a)}});return J},J5=function(t,i,a){var f=fn(t,4),v=f[1],g=f[2],u=f[3],E=a||{},P=E.plain;if(!v)return null;var I=-999,B={"data-rc-order":"prependQueue","data-rc-priority":"".concat(I)},j=e0(v,u,g,B,P);return[I,g,j]};ut(ut(ut({},zM,K5),SM,T5),DM,J5);var Qi=function(){function e(t,i){Xa(this,e),ut(this,"name",void 0),ut(this,"style",void 0),ut(this,"_keyframe",!0),this.name=t,this.style=i}return Wa(e,[{key:"getName",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"";return i?"".concat(i,"-").concat(this.name):this.name}}]),e}();function mm(e){return e.notSplit=!0,e}mm(["borderTop","borderBottom"]),mm(["borderTop"]),mm(["borderBottom"]),mm(["borderLeft","borderRight"]),mm(["borderLeft"]),mm(["borderRight"]);var Sw=U.createContext({});function e4(e){return pM(e)||uM(e)||gw(e)||mM()}function ku(e,t){for(var i=e,a=0;a<t.length;a+=1){if(i==null)return;i=i[t[a]]}return i}function LM(e,t,i,a){if(!t.length)return i;var f=e4(t),v=f[0],g=f.slice(1),u;return!e&&typeof v=="number"?u=[]:Array.isArray(e)?u=wn(e):u=ct({},e),a&&i===void 0&&g.length===1?delete u[v][g[0]]:u[v]=LM(u[v],g,i,a),u}function Mc(e,t,i){var a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;return t.length&&a&&i===void 0&&!ku(e,t.slice(0,-1))?e:LM(e,t,i,a)}function t4(e){return zn(e)==="object"&&e!==null&&Object.getPrototypeOf(e)===Object.prototype}function L2(e){return Array.isArray(e)?[]:{}}var n4=typeof Reflect>"u"?Object.keys:Reflect.ownKeys;function Cm(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=L2(t[0]);return t.forEach(function(f){function v(g,u){var E=new Set(u),P=ku(f,g),I=Array.isArray(P);if(I||t4(P)){if(!E.has(P)){E.add(P);var B=ku(a,g);I?a=Mc(a,g,[]):(!B||zn(B)!=="object")&&(a=Mc(a,g,L2(P))),n4(P).forEach(function(j){v([].concat(wn(g),[j]),E)})}}else a=Mc(a,g,P)}v([])}),a}const r4=U.createContext({}),i4=U.createContext(void 0);var a4={items_per_page:"/ page",jump_to:"Go to",jump_to_confirm:"confirm",page:"Page",prev_page:"Previous Page",next_page:"Next Page",prev_5:"Previous 5 Pages",next_5:"Next 5 Pages",prev_3:"Previous 3 Pages",next_3:"Next 3 Pages",page_size:"Page Size"},o4={yearFormat:"YYYY",dayFormat:"D",cellMeridiemFormat:"A",monthBeforeYear:!0},s4=ct(ct({},o4),{},{locale:"en_US",today:"Today",now:"Now",backToToday:"Back to today",ok:"OK",clear:"Clear",week:"Week",month:"Month",year:"Year",timeSelect:"select time",dateSelect:"select date",weekSelect:"Choose a week",monthSelect:"Choose a month",yearSelect:"Choose a year",decadeSelect:"Choose a decade",dateFormat:"M/D/YYYY",dateTimeFormat:"M/D/YYYY HH:mm:ss",previousMonth:"Previous month (PageUp)",nextMonth:"Next month (PageDown)",previousYear:"Last year (Control + left)",nextYear:"Next year (Control + right)",previousDecade:"Last decade",nextDecade:"Next decade",previousCentury:"Last century",nextCentury:"Next century"});const BM={placeholder:"Select time",rangePlaceholder:["Start time","End time"]},B2={lang:Object.assign({placeholder:"Select date",yearPlaceholder:"Select year",quarterPlaceholder:"Select quarter",monthPlaceholder:"Select month",weekPlaceholder:"Select week",rangePlaceholder:["Start date","End date"],rangeYearPlaceholder:["Start year","End year"],rangeQuarterPlaceholder:["Start quarter","End quarter"],rangeMonthPlaceholder:["Start month","End month"],rangeWeekPlaceholder:["Start week","End week"]},s4),timePickerLocale:Object.assign({},BM)},Ws="${label} is not a valid ${type}",Uf={locale:"en",Pagination:a4,DatePicker:B2,TimePicker:BM,Calendar:B2,global:{placeholder:"Please select",close:"Close"},Table:{filterTitle:"Filter menu",filterConfirm:"OK",filterReset:"Reset",filterEmptyText:"No filters",filterCheckAll:"Select all items",filterSearchPlaceholder:"Search in filters",emptyText:"No data",selectAll:"Select current page",selectInvert:"Invert current page",selectNone:"Clear all data",selectionAll:"Select all data",sortTitle:"Sort",expand:"Expand row",collapse:"Collapse row",triggerDesc:"Click to sort descending",triggerAsc:"Click to sort ascending",cancelSort:"Click to cancel sorting"},Tour:{Next:"Next",Previous:"Previous",Finish:"Finish"},Modal:{okText:"OK",cancelText:"Cancel",justOkText:"OK"},Popconfirm:{okText:"OK",cancelText:"Cancel"},Transfer:{titles:["",""],searchPlaceholder:"Search here",itemUnit:"item",itemsUnit:"items",remove:"Remove",selectCurrent:"Select current page",removeCurrent:"Remove current page",selectAll:"Select all data",deselectAll:"Deselect all data",removeAll:"Remove all data",selectInvert:"Invert current page"},Upload:{uploading:"Uploading...",removeFile:"Remove file",uploadError:"Upload error",previewFile:"Preview file",downloadFile:"Download file"},Empty:{description:"No data"},Icon:{icon:"icon"},Text:{edit:"Edit",copy:"Copy",copied:"Copied",expand:"Expand",collapse:"Collapse"},Form:{optional:"(optional)",defaultValidateMessages:{default:"Field validation error for ${label}",required:"Please enter ${label}",enum:"${label} must be one of [${enum}]",whitespace:"${label} cannot be a blank character",date:{format:"${label} date format is invalid",parse:"${label} cannot be converted to a date",invalid:"${label} is an invalid date"},types:{string:Ws,method:Ws,array:Ws,object:Ws,number:Ws,date:Ws,boolean:Ws,integer:Ws,float:Ws,regexp:Ws,email:Ws,url:Ws,hex:Ws},string:{len:"${label} must be ${len} characters",min:"${label} must be at least ${min} characters",max:"${label} must be up to ${max} characters",range:"${label} must be between ${min}-${max} characters"},number:{len:"${label} must be equal to ${len}",min:"${label} must be minimum ${min}",max:"${label} must be maximum ${max}",range:"${label} must be between ${min}-${max}"},array:{len:"Must be ${len} ${label}",min:"At least ${min} ${label}",max:"At most ${max} ${label}",range:"The amount of ${label} must be between ${min}-${max}"},pattern:{mismatch:"${label} does not match the pattern ${pattern}"}}},Image:{preview:"Preview"},QRCode:{expired:"QR code expired",refresh:"Refresh",scanned:"Scanned"},ColorPicker:{presetEmpty:"Empty",transparent:"Transparent",singleColor:"Single",gradientColor:"Gradient"}};let Ev=Object.assign({},Uf.Modal),Mv=[];const N2=()=>Mv.reduce((e,t)=>Object.assign(Object.assign({},e),t),Uf.Modal);function l4(e){if(e){const t=Object.assign({},e);return Mv.push(t),Ev=N2(),()=>{Mv=Mv.filter(i=>i!==t),Ev=N2()}}Ev=Object.assign({},Uf.Modal)}function NM(){return Ev}const Cw=U.createContext(void 0),z0=(e,t)=>{const i=U.useContext(Cw),a=U.useMemo(()=>{var v;const g=t||Uf[e],u=(v=i==null?void 0:i[e])!==null&&v!==void 0?v:{};return Object.assign(Object.assign({},typeof g=="function"?g():g),u||{})},[e,t,i]),f=U.useMemo(()=>{const v=i==null?void 0:i.locale;return i!=null&&i.exist&&!v?Uf.locale:v},[i]);return[a,f]},c4="internalMark",u4=e=>{const{locale:t={},children:i,_ANT_MARK__:a}=e;U.useEffect(()=>l4(t==null?void 0:t.Modal),[t]);const f=U.useMemo(()=>Object.assign(Object.assign({},t),{exist:!0}),[t]);return U.createElement(Cw.Provider,{value:f},i)},Tw={blue:"#1677FF",purple:"#722ED1",cyan:"#13C2C2",green:"#52C41A",magenta:"#EB2F96",pink:"#EB2F96",red:"#F5222D",orange:"#FA8C16",yellow:"#FADB14",volcano:"#FA541C",geekblue:"#2F54EB",gold:"#FAAD14",lime:"#A0D911"},Hm=Object.assign(Object.assign({},Tw),{colorPrimary:"#1677ff",colorSuccess:"#52c41a",colorWarning:"#faad14",colorError:"#ff4d4f",colorInfo:"#1677ff",colorLink:"",colorTextBase:"",colorBgBase:"",fontFamily:`-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,
'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',
'Noto Color Emoji'`,fontFamilyCode:"'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier, monospace",fontSize:14,lineWidth:1,lineType:"solid",motionUnit:.1,motionBase:0,motionEaseOutCirc:"cubic-bezier(0.08, 0.82, 0.17, 1)",motionEaseInOutCirc:"cubic-bezier(0.78, 0.14, 0.15, 0.86)",motionEaseOut:"cubic-bezier(0.215, 0.61, 0.355, 1)",motionEaseInOut:"cubic-bezier(0.645, 0.045, 0.355, 1)",motionEaseOutBack:"cubic-bezier(0.12, 0.4, 0.29, 1.46)",motionEaseInBack:"cubic-bezier(0.71, -0.46, 0.88, 0.6)",motionEaseInQuint:"cubic-bezier(0.755, 0.05, 0.855, 0.06)",motionEaseOutQuint:"cubic-bezier(0.23, 1, 0.32, 1)",borderRadius:6,sizeUnit:4,sizeStep:4,sizePopupArrow:16,controlHeight:32,zIndexBase:0,zIndexPopupBase:1e3,opacityImage:1,wireframe:!1,motion:!0}),Ga=Math.round;function Ub(e,t){const i=e.replace(/^[^(]*\((.*)/,"$1").replace(/\).*/,"").match(/\d*\.?\d+%?/g)||[],a=i.map(f=>parseFloat(f));for(let f=0;f<3;f+=1)a[f]=t(a[f]||0,i[f]||"",f);return i[3]?a[3]=i[3].includes("%")?a[3]/100:a[3]:a[3]=1,a}const j2=(e,t,i)=>i===0?e:e/100;function ry(e,t){const i=t||255;return e>i?i:e<0?0:e}class zi{constructor(t){ut(this,"isValid",!0),ut(this,"r",0),ut(this,"g",0),ut(this,"b",0),ut(this,"a",1),ut(this,"_h",void 0),ut(this,"_s",void 0),ut(this,"_l",void 0),ut(this,"_v",void 0),ut(this,"_max",void 0),ut(this,"_min",void 0),ut(this,"_brightness",void 0);function i(f){return f[0]in t&&f[1]in t&&f[2]in t}if(t)if(typeof t=="string"){let v=function(g){return f.startsWith(g)};var a=v;const f=t.trim();/^#?[A-F\d]{3,8}$/i.test(f)?this.fromHexString(f):v("rgb")?this.fromRgbString(f):v("hsl")?this.fromHslString(f):(v("hsv")||v("hsb"))&&this.fromHsvString(f)}else if(t instanceof zi)this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this._h=t._h,this._s=t._s,this._l=t._l,this._v=t._v;else if(i("rgb"))this.r=ry(t.r),this.g=ry(t.g),this.b=ry(t.b),this.a=typeof t.a=="number"?ry(t.a,1):1;else if(i("hsl"))this.fromHsl(t);else if(i("hsv"))this.fromHsv(t);else throw new Error("@ant-design/fast-color: unsupported input "+JSON.stringify(t))}setR(t){return this._sc("r",t)}setG(t){return this._sc("g",t)}setB(t){return this._sc("b",t)}setA(t){return this._sc("a",t,1)}setHue(t){const i=this.toHsv();return i.h=t,this._c(i)}getLuminance(){function t(v){const g=v/255;return g<=.03928?g/12.92:Math.pow((g+.055)/1.055,2.4)}const i=t(this.r),a=t(this.g),f=t(this.b);return .2126*i+.7152*a+.0722*f}getHue(){if(typeof this._h>"u"){const t=this.getMax()-this.getMin();t===0?this._h=0:this._h=Ga(60*(this.r===this.getMax()?(this.g-this.b)/t+(this.g<this.b?6:0):this.g===this.getMax()?(this.b-this.r)/t+2:(this.r-this.g)/t+4))}return this._h}getSaturation(){if(typeof this._s>"u"){const t=this.getMax()-this.getMin();t===0?this._s=0:this._s=t/this.getMax()}return this._s}getLightness(){return typeof this._l>"u"&&(this._l=(this.getMax()+this.getMin())/510),this._l}getValue(){return typeof this._v>"u"&&(this._v=this.getMax()/255),this._v}getBrightness(){return typeof this._brightness>"u"&&(this._brightness=(this.r*299+this.g*587+this.b*114)/1e3),this._brightness}darken(t=10){const i=this.getHue(),a=this.getSaturation();let f=this.getLightness()-t/100;return f<0&&(f=0),this._c({h:i,s:a,l:f,a:this.a})}lighten(t=10){const i=this.getHue(),a=this.getSaturation();let f=this.getLightness()+t/100;return f>1&&(f=1),this._c({h:i,s:a,l:f,a:this.a})}mix(t,i=50){const a=this._c(t),f=i/100,v=u=>(a[u]-this[u])*f+this[u],g={r:Ga(v("r")),g:Ga(v("g")),b:Ga(v("b")),a:Ga(v("a")*100)/100};return this._c(g)}tint(t=10){return this.mix({r:255,g:255,b:255,a:1},t)}shade(t=10){return this.mix({r:0,g:0,b:0,a:1},t)}onBackground(t){const i=this._c(t),a=this.a+i.a*(1-this.a),f=v=>Ga((this[v]*this.a+i[v]*i.a*(1-this.a))/a);return this._c({r:f("r"),g:f("g"),b:f("b"),a})}isDark(){return this.getBrightness()<128}isLight(){return this.getBrightness()>=128}equals(t){return this.r===t.r&&this.g===t.g&&this.b===t.b&&this.a===t.a}clone(){return this._c(this)}toHexString(){let t="#";const i=(this.r||0).toString(16);t+=i.length===2?i:"0"+i;const a=(this.g||0).toString(16);t+=a.length===2?a:"0"+a;const f=(this.b||0).toString(16);if(t+=f.length===2?f:"0"+f,typeof this.a=="number"&&this.a>=0&&this.a<1){const v=Ga(this.a*255).toString(16);t+=v.length===2?v:"0"+v}return t}toHsl(){return{h:this.getHue(),s:this.getSaturation(),l:this.getLightness(),a:this.a}}toHslString(){const t=this.getHue(),i=Ga(this.getSaturation()*100),a=Ga(this.getLightness()*100);return this.a!==1?`hsla(${t},${i}%,${a}%,${this.a})`:`hsl(${t},${i}%,${a}%)`}toHsv(){return{h:this.getHue(),s:this.getSaturation(),v:this.getValue(),a:this.a}}toRgb(){return{r:this.r,g:this.g,b:this.b,a:this.a}}toRgbString(){return this.a!==1?`rgba(${this.r},${this.g},${this.b},${this.a})`:`rgb(${this.r},${this.g},${this.b})`}toString(){return this.toRgbString()}_sc(t,i,a){const f=this.clone();return f[t]=ry(i,a),f}_c(t){return new this.constructor(t)}getMax(){return typeof this._max>"u"&&(this._max=Math.max(this.r,this.g,this.b)),this._max}getMin(){return typeof this._min>"u"&&(this._min=Math.min(this.r,this.g,this.b)),this._min}fromHexString(t){const i=t.replace("#","");function a(f,v){return parseInt(i[f]+i[v||f],16)}i.length<6?(this.r=a(0),this.g=a(1),this.b=a(2),this.a=i[3]?a(3)/255:1):(this.r=a(0,1),this.g=a(2,3),this.b=a(4,5),this.a=i[6]?a(6,7)/255:1)}fromHsl({h:t,s:i,l:a,a:f}){if(this._h=t%360,this._s=i,this._l=a,this.a=typeof f=="number"?f:1,i<=0){const j=Ga(a*255);this.r=j,this.g=j,this.b=j}let v=0,g=0,u=0;const E=t/60,P=(1-Math.abs(2*a-1))*i,I=P*(1-Math.abs(E%2-1));E>=0&&E<1?(v=P,g=I):E>=1&&E<2?(v=I,g=P):E>=2&&E<3?(g=P,u=I):E>=3&&E<4?(g=I,u=P):E>=4&&E<5?(v=I,u=P):E>=5&&E<6&&(v=P,u=I);const B=a-P/2;this.r=Ga((v+B)*255),this.g=Ga((g+B)*255),this.b=Ga((u+B)*255)}fromHsv({h:t,s:i,v:a,a:f}){this._h=t%360,this._s=i,this._v=a,this.a=typeof f=="number"?f:1;const v=Ga(a*255);if(this.r=v,this.g=v,this.b=v,i<=0)return;const g=t/60,u=Math.floor(g),E=g-u,P=Ga(a*(1-i)*255),I=Ga(a*(1-i*E)*255),B=Ga(a*(1-i*(1-E))*255);switch(u){case 0:this.g=B,this.b=P;break;case 1:this.r=I,this.b=P;break;case 2:this.r=P,this.b=B;break;case 3:this.r=P,this.g=I;break;case 4:this.r=B,this.g=P;break;case 5:default:this.g=P,this.b=I;break}}fromHsvString(t){const i=Ub(t,j2);this.fromHsv({h:i[0],s:i[1],v:i[2],a:i[3]})}fromHslString(t){const i=Ub(t,j2);this.fromHsl({h:i[0],s:i[1],l:i[2],a:i[3]})}fromRgbString(t){const i=Ub(t,(a,f)=>f.includes("%")?Ga(a/100*255):a);this.r=i[0],this.g=i[1],this.b=i[2],this.a=i[3]}}var K_=2,F2=.16,h4=.05,f4=.05,d4=.15,jM=5,FM=4,p4=[{index:7,amount:15},{index:6,amount:25},{index:5,amount:30},{index:5,amount:45},{index:5,amount:65},{index:5,amount:85},{index:4,amount:90},{index:3,amount:95},{index:2,amount:97},{index:1,amount:98}];function $2(e,t,i){var a;return Math.round(e.h)>=60&&Math.round(e.h)<=240?a=i?Math.round(e.h)-K_*t:Math.round(e.h)+K_*t:a=i?Math.round(e.h)+K_*t:Math.round(e.h)-K_*t,a<0?a+=360:a>=360&&(a-=360),a}function V2(e,t,i){if(e.h===0&&e.s===0)return e.s;var a;return i?a=e.s-F2*t:t===FM?a=e.s+F2:a=e.s+h4*t,a>1&&(a=1),i&&t===jM&&a>.1&&(a=.1),a<.06&&(a=.06),Math.round(a*100)/100}function U2(e,t,i){var a;return i?a=e.v+f4*t:a=e.v-d4*t,a=Math.max(0,Math.min(1,a)),Math.round(a*100)/100}function Kd(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=[],a=new zi(e),f=a.toHsv(),v=jM;v>0;v-=1){var g=new zi({h:$2(f,v,!0),s:V2(f,v,!0),v:U2(f,v,!0)});i.push(g)}i.push(a);for(var u=1;u<=FM;u+=1){var E=new zi({h:$2(f,u),s:V2(f,u),v:U2(f,u)});i.push(E)}return t.theme==="dark"?p4.map(function(P){var I=P.index,B=P.amount;return new zi(t.backgroundColor||"#141414").mix(i[I],B).toHexString()}):i.map(function(P){return P.toHexString()})}var Hb={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1677FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},r1=["#fff1f0","#ffccc7","#ffa39e","#ff7875","#ff4d4f","#f5222d","#cf1322","#a8071a","#820014","#5c0011"];r1.primary=r1[5];var i1=["#fff2e8","#ffd8bf","#ffbb96","#ff9c6e","#ff7a45","#fa541c","#d4380d","#ad2102","#871400","#610b00"];i1.primary=i1[5];var a1=["#fff7e6","#ffe7ba","#ffd591","#ffc069","#ffa940","#fa8c16","#d46b08","#ad4e00","#873800","#612500"];a1.primary=a1[5];var o1=["#fffbe6","#fff1b8","#ffe58f","#ffd666","#ffc53d","#faad14","#d48806","#ad6800","#874d00","#613400"];o1.primary=o1[5];var s1=["#feffe6","#ffffb8","#fffb8f","#fff566","#ffec3d","#fadb14","#d4b106","#ad8b00","#876800","#614700"];s1.primary=s1[5];var l1=["#fcffe6","#f4ffb8","#eaff8f","#d3f261","#bae637","#a0d911","#7cb305","#5b8c00","#3f6600","#254000"];l1.primary=l1[5];var c1=["#f6ffed","#d9f7be","#b7eb8f","#95de64","#73d13d","#52c41a","#389e0d","#237804","#135200","#092b00"];c1.primary=c1[5];var u1=["#e6fffb","#b5f5ec","#87e8de","#5cdbd3","#36cfc9","#13c2c2","#08979c","#006d75","#00474f","#002329"];u1.primary=u1[5];var n0=["#e6f4ff","#bae0ff","#91caff","#69b1ff","#4096ff","#1677ff","#0958d9","#003eb3","#002c8c","#001d66"];n0.primary=n0[5];var h1=["#f0f5ff","#d6e4ff","#adc6ff","#85a5ff","#597ef7","#2f54eb","#1d39c4","#10239e","#061178","#030852"];h1.primary=h1[5];var f1=["#f9f0ff","#efdbff","#d3adf7","#b37feb","#9254de","#722ed1","#531dab","#391085","#22075e","#120338"];f1.primary=f1[5];var d1=["#fff0f6","#ffd6e7","#ffadd2","#ff85c0","#f759ab","#eb2f96","#c41d7f","#9e1068","#780650","#520339"];d1.primary=d1[5];var p1=["#a6a6a6","#999999","#8c8c8c","#808080","#737373","#666666","#404040","#1a1a1a","#000000","#000000"];p1.primary=p1[5];var qb={red:r1,volcano:i1,orange:a1,gold:o1,yellow:s1,lime:l1,green:c1,cyan:u1,blue:n0,geekblue:h1,purple:f1,magenta:d1,grey:p1};function $M(e,{generateColorPalettes:t,generateNeutralColorPalettes:i}){const{colorSuccess:a,colorWarning:f,colorError:v,colorInfo:g,colorPrimary:u,colorBgBase:E,colorTextBase:P}=e,I=t(u),B=t(a),j=t(f),$=t(v),X=t(g),J=i(E,P),G=e.colorLink||e.colorInfo,le=t(G),oe=new zi($[1]).mix(new zi($[3]),50).toHexString();return Object.assign(Object.assign({},J),{colorPrimaryBg:I[1],colorPrimaryBgHover:I[2],colorPrimaryBorder:I[3],colorPrimaryBorderHover:I[4],colorPrimaryHover:I[5],colorPrimary:I[6],colorPrimaryActive:I[7],colorPrimaryTextHover:I[8],colorPrimaryText:I[9],colorPrimaryTextActive:I[10],colorSuccessBg:B[1],colorSuccessBgHover:B[2],colorSuccessBorder:B[3],colorSuccessBorderHover:B[4],colorSuccessHover:B[4],colorSuccess:B[6],colorSuccessActive:B[7],colorSuccessTextHover:B[8],colorSuccessText:B[9],colorSuccessTextActive:B[10],colorErrorBg:$[1],colorErrorBgHover:$[2],colorErrorBgFilledHover:oe,colorErrorBgActive:$[3],colorErrorBorder:$[3],colorErrorBorderHover:$[4],colorErrorHover:$[5],colorError:$[6],colorErrorActive:$[7],colorErrorTextHover:$[8],colorErrorText:$[9],colorErrorTextActive:$[10],colorWarningBg:j[1],colorWarningBgHover:j[2],colorWarningBorder:j[3],colorWarningBorderHover:j[4],colorWarningHover:j[4],colorWarning:j[6],colorWarningActive:j[7],colorWarningTextHover:j[8],colorWarningText:j[9],colorWarningTextActive:j[10],colorInfoBg:X[1],colorInfoBgHover:X[2],colorInfoBorder:X[3],colorInfoBorderHover:X[4],colorInfoHover:X[4],colorInfo:X[6],colorInfoActive:X[7],colorInfoTextHover:X[8],colorInfoText:X[9],colorInfoTextActive:X[10],colorLinkHover:le[4],colorLink:le[6],colorLinkActive:le[7],colorBgMask:new zi("#000").setA(.45).toRgbString(),colorWhite:"#fff"})}const m4=e=>{let t=e,i=e,a=e,f=e;return e<6&&e>=5?t=e+1:e<16&&e>=6?t=e+2:e>=16&&(t=16),e<7&&e>=5?i=4:e<8&&e>=7?i=5:e<14&&e>=8?i=6:e<16&&e>=14?i=7:e>=16&&(i=8),e<6&&e>=2?a=1:e>=6&&(a=2),e>4&&e<8?f=4:e>=8&&(f=6),{borderRadius:e,borderRadiusXS:a,borderRadiusSM:i,borderRadiusLG:t,borderRadiusOuter:f}};function g4(e){const{motionUnit:t,motionBase:i,borderRadius:a,lineWidth:f}=e;return Object.assign({motionDurationFast:`${(i+t).toFixed(1)}s`,motionDurationMid:`${(i+t*2).toFixed(1)}s`,motionDurationSlow:`${(i+t*3).toFixed(1)}s`,lineWidthBold:f+1},m4(a))}const VM=e=>{const{controlHeight:t}=e;return{controlHeightSM:t*.75,controlHeightXS:t*.5,controlHeightLG:t*1.25}};function Av(e){return(e+8)/e}function y4(e){const t=Array.from({length:10}).map((i,a)=>{const f=a-1,v=e*Math.pow(Math.E,f/5),g=a>1?Math.floor(v):Math.ceil(v);return Math.floor(g/2)*2});return t[1]=e,t.map(i=>({size:i,lineHeight:Av(i)}))}const UM=e=>{const t=y4(e),i=t.map(I=>I.size),a=t.map(I=>I.lineHeight),f=i[1],v=i[0],g=i[2],u=a[1],E=a[0],P=a[2];return{fontSizeSM:v,fontSize:f,fontSizeLG:g,fontSizeXL:i[3],fontSizeHeading1:i[6],fontSizeHeading2:i[5],fontSizeHeading3:i[4],fontSizeHeading4:i[3],fontSizeHeading5:i[2],lineHeight:u,lineHeightLG:P,lineHeightSM:E,fontHeight:Math.round(u*f),fontHeightLG:Math.round(P*g),fontHeightSM:Math.round(E*v),lineHeightHeading1:a[6],lineHeightHeading2:a[5],lineHeightHeading3:a[4],lineHeightHeading4:a[3],lineHeightHeading5:a[2]}};function _4(e){const{sizeUnit:t,sizeStep:i}=e;return{sizeXXL:t*(i+8),sizeXL:t*(i+4),sizeLG:t*(i+2),sizeMD:t*(i+1),sizeMS:t*i,size:t*i,sizeSM:t*(i-1),sizeXS:t*(i-2),sizeXXS:t*(i-3)}}const Al=(e,t)=>new zi(e).setA(t).toRgbString(),iy=(e,t)=>new zi(e).darken(t).toHexString(),v4=e=>{const t=Kd(e);return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[4],6:t[5],7:t[6],8:t[4],9:t[5],10:t[6]}},b4=(e,t)=>{const i=e||"#fff",a=t||"#000";return{colorBgBase:i,colorTextBase:a,colorText:Al(a,.88),colorTextSecondary:Al(a,.65),colorTextTertiary:Al(a,.45),colorTextQuaternary:Al(a,.25),colorFill:Al(a,.15),colorFillSecondary:Al(a,.06),colorFillTertiary:Al(a,.04),colorFillQuaternary:Al(a,.02),colorBgSolid:Al(a,1),colorBgSolidHover:Al(a,.75),colorBgSolidActive:Al(a,.95),colorBgLayout:iy(i,4),colorBgContainer:iy(i,0),colorBgElevated:iy(i,0),colorBgSpotlight:Al(a,.85),colorBgBlur:"transparent",colorBorder:iy(i,15),colorBorderSecondary:iy(i,6)}};function D0(e){Hb.pink=Hb.magenta,qb.pink=qb.magenta;const t=Object.keys(Tw).map(i=>{const a=e[i]===Hb[i]?qb[i]:Kd(e[i]);return Array.from({length:10},()=>1).reduce((f,v,g)=>(f[`${i}-${g+1}`]=a[g],f[`${i}${g+1}`]=a[g],f),{})}).reduce((i,a)=>(i=Object.assign(Object.assign({},i),a),i),{});return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},e),t),$M(e,{generateColorPalettes:v4,generateNeutralColorPalettes:b4})),UM(e.fontSize)),_4(e)),VM(e)),g4(e))}const Ew=Jv(D0),Oy={token:Hm,override:{override:Hm},hashed:!0},Mw=Nt.createContext(Oy),r0="ant",L0="anticon",x4=(e,t)=>t||(e?`${r0}-${e}`:r0),Ei=U.createContext({getPrefixCls:x4,iconPrefixCls:L0}),{Consumer:UV}=Ei,H2={};function HM(e){const t=U.useContext(Ei),{getPrefixCls:i,direction:a,getPopupContainer:f}=t,v=t[e];return Object.assign(Object.assign({classNames:H2,styles:H2},v),{getPrefixCls:i,direction:a,getPopupContainer:f})}const w4=`-ant-${Date.now()}-${Math.random()}`;function S4(e,t){const i={},a=(g,u)=>{let E=g.clone();return E=(u==null?void 0:u(E))||E,E.toRgbString()},f=(g,u)=>{const E=new zi(g),P=Kd(E.toRgbString());i[`${u}-color`]=a(E),i[`${u}-color-disabled`]=P[1],i[`${u}-color-hover`]=P[4],i[`${u}-color-active`]=P[6],i[`${u}-color-outline`]=E.clone().setA(.2).toRgbString(),i[`${u}-color-deprecated-bg`]=P[0],i[`${u}-color-deprecated-border`]=P[2]};if(t.primaryColor){f(t.primaryColor,"primary");const g=new zi(t.primaryColor),u=Kd(g.toRgbString());u.forEach((P,I)=>{i[`primary-${I+1}`]=P}),i["primary-color-deprecated-l-35"]=a(g,P=>P.lighten(35)),i["primary-color-deprecated-l-20"]=a(g,P=>P.lighten(20)),i["primary-color-deprecated-t-20"]=a(g,P=>P.tint(20)),i["primary-color-deprecated-t-50"]=a(g,P=>P.tint(50)),i["primary-color-deprecated-f-12"]=a(g,P=>P.setA(P.a*.12));const E=new zi(u[0]);i["primary-color-active-deprecated-f-30"]=a(E,P=>P.setA(P.a*.3)),i["primary-color-active-deprecated-d-02"]=a(E,P=>P.darken(2))}return t.successColor&&f(t.successColor,"success"),t.warningColor&&f(t.warningColor,"warning"),t.errorColor&&f(t.errorColor,"error"),t.infoColor&&f(t.infoColor,"info"),`
  :root {
    ${Object.keys(i).map(g=>`--${e}-${g}: ${i[g]};`).join(`
`)}
  }
  `.trim()}function C4(e,t){const i=S4(e,t);_s()&&kh(i,`${w4}-dynamic-theme`)}const i0=U.createContext(!1),qM=({children:e,disabled:t})=>{const i=U.useContext(i0);return U.createElement(i0.Provider,{value:t??i},e)},qm=U.createContext(void 0),T4=({children:e,size:t})=>{const i=U.useContext(qm);return U.createElement(qm.Provider,{value:t||i},e)};function E4(){const e=U.useContext(i0),t=U.useContext(qm);return{componentDisabled:e,componentSize:t}}var GM=Wa(function e(){Xa(this,e)}),ZM="CALC_UNIT",M4=new RegExp(ZM,"g");function Gb(e){return typeof e=="number"?"".concat(e).concat(ZM):e}var A4=function(e){np(i,e);var t=rp(i);function i(a,f){var v;Xa(this,i),v=t.call(this),ut(ur(v),"result",""),ut(ur(v),"unitlessCssVar",void 0),ut(ur(v),"lowPriority",void 0);var g=zn(a);return v.unitlessCssVar=f,a instanceof i?v.result="(".concat(a.result,")"):g==="number"?v.result=Gb(a):g==="string"&&(v.result=a),v}return Wa(i,[{key:"add",value:function(f){return f instanceof i?this.result="".concat(this.result," + ").concat(f.getResult()):(typeof f=="number"||typeof f=="string")&&(this.result="".concat(this.result," + ").concat(Gb(f))),this.lowPriority=!0,this}},{key:"sub",value:function(f){return f instanceof i?this.result="".concat(this.result," - ").concat(f.getResult()):(typeof f=="number"||typeof f=="string")&&(this.result="".concat(this.result," - ").concat(Gb(f))),this.lowPriority=!0,this}},{key:"mul",value:function(f){return this.lowPriority&&(this.result="(".concat(this.result,")")),f instanceof i?this.result="".concat(this.result," * ").concat(f.getResult(!0)):(typeof f=="number"||typeof f=="string")&&(this.result="".concat(this.result," * ").concat(f)),this.lowPriority=!1,this}},{key:"div",value:function(f){return this.lowPriority&&(this.result="(".concat(this.result,")")),f instanceof i?this.result="".concat(this.result," / ").concat(f.getResult(!0)):(typeof f=="number"||typeof f=="string")&&(this.result="".concat(this.result," / ").concat(f)),this.lowPriority=!1,this}},{key:"getResult",value:function(f){return this.lowPriority||f?"(".concat(this.result,")"):this.result}},{key:"equal",value:function(f){var v=this,g=f||{},u=g.unit,E=!0;return typeof u=="boolean"?E=u:Array.from(this.unitlessCssVar).some(function(P){return v.result.includes(P)})&&(E=!1),this.result=this.result.replace(M4,E?"px":""),typeof this.lowPriority<"u"?"calc(".concat(this.result,")"):this.result}}]),i}(GM),P4=function(e){np(i,e);var t=rp(i);function i(a){var f;return Xa(this,i),f=t.call(this),ut(ur(f),"result",0),a instanceof i?f.result=a.result:typeof a=="number"&&(f.result=a),f}return Wa(i,[{key:"add",value:function(f){return f instanceof i?this.result+=f.result:typeof f=="number"&&(this.result+=f),this}},{key:"sub",value:function(f){return f instanceof i?this.result-=f.result:typeof f=="number"&&(this.result-=f),this}},{key:"mul",value:function(f){return f instanceof i?this.result*=f.result:typeof f=="number"&&(this.result*=f),this}},{key:"div",value:function(f){return f instanceof i?this.result/=f.result:typeof f=="number"&&(this.result/=f),this}},{key:"equal",value:function(){return this.result}}]),i}(GM),R4=function(t,i){var a=t==="css"?A4:P4;return function(f){return new a(f,i)}},q2=function(t,i){return"".concat([i,t.replace(/([A-Z]+)([A-Z][a-z]+)/g,"$1-$2").replace(/([a-z])([A-Z])/g,"$1-$2")].filter(Boolean).join("-"))};function Gm(e){var t=U.useRef();t.current=e;var i=U.useCallback(function(){for(var a,f=arguments.length,v=new Array(f),g=0;g<f;g++)v[g]=arguments[g];return(a=t.current)===null||a===void 0?void 0:a.call.apply(a,[t].concat(v))},[]);return i}function a0(e){var t=U.useRef(!1),i=U.useState(e),a=fn(i,2),f=a[0],v=a[1];U.useEffect(function(){return t.current=!1,function(){t.current=!0}},[]);function g(u,E){E&&t.current||v(u)}return[f,g]}function G2(e,t,i,a){var f=ct({},t[e]);if(a!=null&&a.deprecatedTokens){var v=a.deprecatedTokens;v.forEach(function(u){var E=fn(u,2),P=E[0],I=E[1];if(f!=null&&f[P]||f!=null&&f[I]){var B;(B=f[I])!==null&&B!==void 0||(f[I]=f==null?void 0:f[P])}})}var g=ct(ct({},i),f);return Object.keys(g).forEach(function(u){g[u]===t[u]&&delete g[u]}),g}var XM=typeof CSSINJS_STATISTIC<"u",m1=!0;function Fc(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];if(!XM)return Object.assign.apply(Object,[{}].concat(t));m1=!1;var a={};return t.forEach(function(f){if(zn(f)==="object"){var v=Object.keys(f);v.forEach(function(g){Object.defineProperty(a,g,{configurable:!0,enumerable:!0,get:function(){return f[g]}})})}}),m1=!0,a}var Z2={};function O4(){}var I4=function(t){var i,a=t,f=O4;return XM&&typeof Proxy<"u"&&(i=new Set,a=new Proxy(t,{get:function(g,u){if(m1){var E;(E=i)===null||E===void 0||E.add(u)}return g[u]}}),f=function(g,u){var E;Z2[g]={global:Array.from(i),component:ct(ct({},(E=Z2[g])===null||E===void 0?void 0:E.component),u)}}),{token:a,keys:i,flush:f}};function X2(e,t,i){if(typeof i=="function"){var a;return i(Fc(t,(a=t[e])!==null&&a!==void 0?a:{}))}return i??{}}function k4(e){return e==="js"?{max:Math.max,min:Math.min}:{max:function(){for(var i=arguments.length,a=new Array(i),f=0;f<i;f++)a[f]=arguments[f];return"max(".concat(a.map(function(v){return _r(v)}).join(","),")")},min:function(){for(var i=arguments.length,a=new Array(i),f=0;f<i;f++)a[f]=arguments[f];return"min(".concat(a.map(function(v){return _r(v)}).join(","),")")}}}var z4=1e3*60*10,D4=function(){function e(){Xa(this,e),ut(this,"map",new Map),ut(this,"objectIDMap",new WeakMap),ut(this,"nextID",0),ut(this,"lastAccessBeat",new Map),ut(this,"accessBeat",0)}return Wa(e,[{key:"set",value:function(i,a){this.clear();var f=this.getCompositeKey(i);this.map.set(f,a),this.lastAccessBeat.set(f,Date.now())}},{key:"get",value:function(i){var a=this.getCompositeKey(i),f=this.map.get(a);return this.lastAccessBeat.set(a,Date.now()),this.accessBeat+=1,f}},{key:"getCompositeKey",value:function(i){var a=this,f=i.map(function(v){return v&&zn(v)==="object"?"obj_".concat(a.getObjectID(v)):"".concat(zn(v),"_").concat(v)});return f.join("|")}},{key:"getObjectID",value:function(i){if(this.objectIDMap.has(i))return this.objectIDMap.get(i);var a=this.nextID;return this.objectIDMap.set(i,a),this.nextID+=1,a}},{key:"clear",value:function(){var i=this;if(this.accessBeat>1e4){var a=Date.now();this.lastAccessBeat.forEach(function(f,v){a-f>z4&&(i.map.delete(v),i.lastAccessBeat.delete(v))}),this.accessBeat=0}}}]),e}(),W2=new D4;function L4(e,t){return Nt.useMemo(function(){var i=W2.get(t);if(i)return i;var a=e();return W2.set(t,a),a},t)}var B4=function(){return{}};function N4(e){var t=e.useCSP,i=t===void 0?B4:t,a=e.useToken,f=e.usePrefix,v=e.getResetStyles,g=e.getCommonStyle,u=e.getCompUnitless;function E(j,$,X,J){var G=Array.isArray(j)?j[0]:j;function le(ke){return"".concat(String(G)).concat(ke.slice(0,1).toUpperCase()).concat(ke.slice(1))}var oe=(J==null?void 0:J.unitless)||{},pe=typeof u=="function"?u(j):{},he=ct(ct({},pe),{},ut({},le("zIndexPopup"),!0));Object.keys(oe).forEach(function(ke){he[le(ke)]=oe[ke]});var ae=ct(ct({},J),{},{unitless:he,prefixToken:le}),ve=I(j,$,X,ae),Se=P(G,X,ae);return function(ke){var Le=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ke,Re=ve(ke,Le),me=fn(Re,2),Ae=me[1],He=Se(Le),We=fn(He,2),pt=We[0],xe=We[1];return[pt,Ae,xe]}}function P(j,$,X){var J=X.unitless,G=X.injectStyle,le=G===void 0?!0:G,oe=X.prefixToken,pe=X.ignore,he=function(Se){var ke=Se.rootCls,Le=Se.cssVar,Re=Le===void 0?{}:Le,me=a(),Ae=me.realToken;return Q5({path:[j],prefix:Re.prefix,key:Re.key,unitless:J,ignore:pe,token:Ae,scope:ke},function(){var He=X2(j,Ae,$),We=G2(j,Ae,He,{deprecatedTokens:X==null?void 0:X.deprecatedTokens});return Object.keys(He).forEach(function(pt){We[oe(pt)]=We[pt],delete We[pt]}),We}),null},ae=function(Se){var ke=a(),Le=ke.cssVar;return[function(Re){return le&&Le?Nt.createElement(Nt.Fragment,null,Nt.createElement(he,{rootCls:Se,cssVar:Le,component:j}),Re):Re},Le==null?void 0:Le.key]};return ae}function I(j,$,X){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},G=Array.isArray(j)?j:[j,j],le=fn(G,1),oe=le[0],pe=G.join("-"),he=e.layer||{name:"antd"};return function(ae){var ve=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ae,Se=a(),ke=Se.theme,Le=Se.realToken,Re=Se.hashId,me=Se.token,Ae=Se.cssVar,He=f(),We=He.rootPrefixCls,pt=He.iconPrefixCls,xe=i(),et=Ae?"css":"js",Qe=L4(function(){var At=new Set;return Ae&&Object.keys(J.unitless||{}).forEach(function(St){At.add(xv(St,Ae.prefix)),At.add(xv(St,q2(oe,Ae.prefix)))}),R4(et,At)},[et,oe,Ae==null?void 0:Ae.prefix]),Rt=k4(et),we=Rt.max,tt=Rt.min,_t={theme:ke,token:me,hashId:Re,nonce:function(){return xe.nonce},clientOnly:J.clientOnly,layer:he,order:J.order||-999};typeof v=="function"&&n1(ct(ct({},_t),{},{clientOnly:!1,path:["Shared",We]}),function(){return v(me,{prefix:{rootPrefixCls:We,iconPrefixCls:pt},csp:xe})});var Pt=n1(ct(ct({},_t),{},{path:[pe,ae,pt]}),function(){if(J.injectStyle===!1)return[];var At=I4(me),St=At.token,qt=At.flush,Xe=X2(oe,Le,X),mt=".".concat(ae),ft=G2(oe,Le,Xe,{deprecatedTokens:J.deprecatedTokens});Ae&&Xe&&zn(Xe)==="object"&&Object.keys(Xe).forEach(function($t){Xe[$t]="var(".concat(xv($t,q2(oe,Ae.prefix)),")")});var Ke=Fc(St,{componentCls:mt,prefixCls:ae,iconCls:".".concat(pt),antCls:".".concat(We),calc:Qe,max:we,min:tt},Ae?Xe:ft),Je=$(Ke,{hashId:Re,prefixCls:ae,rootPrefixCls:We,iconPrefixCls:pt});qt(oe,ft);var Vt=typeof g=="function"?g(Ke,ae,ve,J.resetFont):null;return[J.resetStyle===!1?null:Vt,Je]});return[Pt,Re]}}function B(j,$,X){var J=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},G=I(j,$,X,ct({resetStyle:!1,order:-998},J)),le=function(pe){var he=pe.prefixCls,ae=pe.rootCls,ve=ae===void 0?he:ae;return G(he,ve),null};return le}return{genStyleHooks:E,genSubStyleComponent:B,genComponentStyleHook:I}}const Aw=["blue","purple","cyan","green","magenta","pink","red","orange","yellow","volcano","geekblue","lime","gold"],j4="5.26.7";function Zb(e){return e>=0&&e<=255}function uy(e,t){const{r:i,g:a,b:f,a:v}=new zi(e).toRgb();if(v<1)return e;const{r:g,g:u,b:E}=new zi(t).toRgb();for(let P=.01;P<=1;P+=.01){const I=Math.round((i-g*(1-P))/P),B=Math.round((a-u*(1-P))/P),j=Math.round((f-E*(1-P))/P);if(Zb(I)&&Zb(B)&&Zb(j))return new zi({r:I,g:B,b:j,a:Math.round(P*100)/100}).toRgbString()}return new zi({r:i,g:a,b:f,a:1}).toRgbString()}var F4=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};function Pw(e){const{override:t}=e,i=F4(e,["override"]),a=Object.assign({},t);Object.keys(Hm).forEach(j=>{delete a[j]});const f=Object.assign(Object.assign({},i),a),v=480,g=576,u=768,E=992,P=1200,I=1600;if(f.motion===!1){const j="0s";f.motionDurationFast=j,f.motionDurationMid=j,f.motionDurationSlow=j}return Object.assign(Object.assign(Object.assign({},f),{colorFillContent:f.colorFillSecondary,colorFillContentHover:f.colorFill,colorFillAlter:f.colorFillQuaternary,colorBgContainerDisabled:f.colorFillTertiary,colorBorderBg:f.colorBgContainer,colorSplit:uy(f.colorBorderSecondary,f.colorBgContainer),colorTextPlaceholder:f.colorTextQuaternary,colorTextDisabled:f.colorTextQuaternary,colorTextHeading:f.colorText,colorTextLabel:f.colorTextSecondary,colorTextDescription:f.colorTextTertiary,colorTextLightSolid:f.colorWhite,colorHighlight:f.colorError,colorBgTextHover:f.colorFillSecondary,colorBgTextActive:f.colorFill,colorIcon:f.colorTextTertiary,colorIconHover:f.colorText,colorErrorOutline:uy(f.colorErrorBg,f.colorBgContainer),colorWarningOutline:uy(f.colorWarningBg,f.colorBgContainer),fontSizeIcon:f.fontSizeSM,lineWidthFocus:f.lineWidth*3,lineWidth:f.lineWidth,controlOutlineWidth:f.lineWidth*2,controlInteractiveSize:f.controlHeight/2,controlItemBgHover:f.colorFillTertiary,controlItemBgActive:f.colorPrimaryBg,controlItemBgActiveHover:f.colorPrimaryBgHover,controlItemBgActiveDisabled:f.colorFill,controlTmpOutline:f.colorFillQuaternary,controlOutline:uy(f.colorPrimaryBg,f.colorBgContainer),lineType:f.lineType,borderRadius:f.borderRadius,borderRadiusXS:f.borderRadiusXS,borderRadiusSM:f.borderRadiusSM,borderRadiusLG:f.borderRadiusLG,fontWeightStrong:600,opacityLoading:.65,linkDecoration:"none",linkHoverDecoration:"none",linkFocusDecoration:"none",controlPaddingHorizontal:12,controlPaddingHorizontalSM:8,paddingXXS:f.sizeXXS,paddingXS:f.sizeXS,paddingSM:f.sizeSM,padding:f.size,paddingMD:f.sizeMD,paddingLG:f.sizeLG,paddingXL:f.sizeXL,paddingContentHorizontalLG:f.sizeLG,paddingContentVerticalLG:f.sizeMS,paddingContentHorizontal:f.sizeMS,paddingContentVertical:f.sizeSM,paddingContentHorizontalSM:f.size,paddingContentVerticalSM:f.sizeXS,marginXXS:f.sizeXXS,marginXS:f.sizeXS,marginSM:f.sizeSM,margin:f.size,marginMD:f.sizeMD,marginLG:f.sizeLG,marginXL:f.sizeXL,marginXXL:f.sizeXXL,boxShadow:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowSecondary:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTertiary:`
      0 1px 2px 0 rgba(0, 0, 0, 0.03),
      0 1px 6px -1px rgba(0, 0, 0, 0.02),
      0 2px 4px 0 rgba(0, 0, 0, 0.02)
    `,screenXS:v,screenXSMin:v,screenXSMax:g-1,screenSM:g,screenSMMin:g,screenSMMax:u-1,screenMD:u,screenMDMin:u,screenMDMax:E-1,screenLG:E,screenLGMin:E,screenLGMax:P-1,screenXL:P,screenXLMin:P,screenXLMax:I-1,screenXXL:I,screenXXLMin:I,boxShadowPopoverArrow:"2px 2px 5px rgba(0, 0, 0, 0.05)",boxShadowCard:`
      0 1px 2px -2px ${new zi("rgba(0, 0, 0, 0.16)").toRgbString()},
      0 3px 6px 0 ${new zi("rgba(0, 0, 0, 0.12)").toRgbString()},
      0 5px 12px 4px ${new zi("rgba(0, 0, 0, 0.09)").toRgbString()}
    `,boxShadowDrawerRight:`
      -6px 0 16px 0 rgba(0, 0, 0, 0.08),
      -3px 0 6px -4px rgba(0, 0, 0, 0.12),
      -9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerLeft:`
      6px 0 16px 0 rgba(0, 0, 0, 0.08),
      3px 0 6px -4px rgba(0, 0, 0, 0.12),
      9px 0 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerUp:`
      0 6px 16px 0 rgba(0, 0, 0, 0.08),
      0 3px 6px -4px rgba(0, 0, 0, 0.12),
      0 9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowDrawerDown:`
      0 -6px 16px 0 rgba(0, 0, 0, 0.08),
      0 -3px 6px -4px rgba(0, 0, 0, 0.12),
      0 -9px 28px 8px rgba(0, 0, 0, 0.05)
    `,boxShadowTabsOverflowLeft:"inset 10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowRight:"inset -10px 0 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowTop:"inset 0 10px 8px -8px rgba(0, 0, 0, 0.08)",boxShadowTabsOverflowBottom:"inset 0 -10px 8px -8px rgba(0, 0, 0, 0.08)"}),a)}var Y2=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const WM={lineHeight:!0,lineHeightSM:!0,lineHeightLG:!0,lineHeightHeading1:!0,lineHeightHeading2:!0,lineHeightHeading3:!0,lineHeightHeading4:!0,lineHeightHeading5:!0,opacityLoading:!0,fontWeightStrong:!0,zIndexPopupBase:!0,zIndexBase:!0,opacityImage:!0},$4={size:!0,sizeSM:!0,sizeLG:!0,sizeMD:!0,sizeXS:!0,sizeXXS:!0,sizeMS:!0,sizeXL:!0,sizeXXL:!0,sizeUnit:!0,sizeStep:!0,motionBase:!0,motionUnit:!0},V4={screenXS:!0,screenXSMin:!0,screenXSMax:!0,screenSM:!0,screenSMMin:!0,screenSMMax:!0,screenMD:!0,screenMDMin:!0,screenMDMax:!0,screenLG:!0,screenLGMin:!0,screenLGMax:!0,screenXL:!0,screenXLMin:!0,screenXLMax:!0,screenXXL:!0,screenXXLMin:!0},YM=(e,t,i)=>{const a=i.getDerivativeToken(e),{override:f}=t,v=Y2(t,["override"]);let g=Object.assign(Object.assign({},a),{override:f});return g=Pw(g),v&&Object.entries(v).forEach(([u,E])=>{const{theme:P}=E,I=Y2(E,["theme"]);let B=I;P&&(B=YM(Object.assign(Object.assign({},g),I),{override:I},P)),g[u]=B}),g};function Uu(){const{token:e,hashed:t,theme:i,override:a,cssVar:f}=Nt.useContext(Mw),v=`${j4}-${t||""}`,g=i||Ew,[u,E,P]=C5(g,[Hm,e],{salt:v,override:a,getComputedToken:YM,formatToken:Pw,cssVar:f&&{prefix:f.prefix,key:f.key,unitless:WM,ignore:$4,preserve:V4}});return[g,P,t?E:"",u,f]}const Rw=(e,t=!1)=>({boxSizing:"border-box",margin:0,padding:0,color:e.colorText,fontSize:e.fontSize,lineHeight:e.lineHeight,listStyle:"none",fontFamily:t?"inherit":e.fontFamily}),KM=()=>({display:"inline-flex",alignItems:"center",color:"inherit",fontStyle:"normal",lineHeight:0,textAlign:"center",textTransform:"none",verticalAlign:"-0.125em",textRendering:"optimizeLegibility","-webkit-font-smoothing":"antialiased","-moz-osx-font-smoothing":"grayscale","> *":{lineHeight:1},svg:{display:"inline-block"}}),U4=()=>({"&::before":{display:"table",content:'""'},"&::after":{display:"table",clear:"both",content:'""'}}),H4=e=>({a:{color:e.colorLink,textDecoration:e.linkDecoration,backgroundColor:"transparent",outline:"none",cursor:"pointer",transition:`color ${e.motionDurationSlow}`,"-webkit-text-decoration-skip":"objects","&:hover":{color:e.colorLinkHover},"&:active":{color:e.colorLinkActive},"&:active, &:hover":{textDecoration:e.linkHoverDecoration,outline:0},"&:focus":{textDecoration:e.linkFocusDecoration,outline:0},"&[disabled]":{color:e.colorTextDisabled,cursor:"not-allowed"}}}),q4=(e,t,i,a)=>{const f=`[class^="${t}"], [class*=" ${t}"]`,v=i?`.${i}`:f,g={boxSizing:"border-box","&::before, &::after":{boxSizing:"border-box"}};let u={};return a!==!1&&(u={fontFamily:e.fontFamily,fontSize:e.fontSize}),{[v]:Object.assign(Object.assign(Object.assign({},u),g),{[f]:g})}},G4=(e,t)=>({outline:`${_r(e.lineWidthFocus)} solid ${e.colorPrimaryBorder}`,outlineOffset:t??1,transition:"outline-offset 0s, outline 0s"}),Ow=(e,t)=>({"&:focus-visible":Object.assign({},G4(e,t))}),QM=e=>({[`.${e}`]:Object.assign(Object.assign({},KM()),{[`.${e} .${e}-icon`]:{display:"block"}})}),{genStyleHooks:ip,genComponentStyleHook:Z4,genSubStyleComponent:Iw}=N4({usePrefix:()=>{const{getPrefixCls:e,iconPrefixCls:t}=U.useContext(Ei);return{rootPrefixCls:e(),iconPrefixCls:t}},useToken:()=>{const[e,t,i,a,f]=Uu();return{theme:e,realToken:t,hashId:i,token:a,cssVar:f}},useCSP:()=>{const{csp:e}=U.useContext(Ei);return e??{}},getResetStyles:(e,t)=>{var i;const a=H4(e);return[a,{"&":a},QM((i=t==null?void 0:t.prefix.iconPrefixCls)!==null&&i!==void 0?i:L0)]},getCommonStyle:q4,getCompUnitless:()=>WM}),X4=(e,t)=>{const[i,a]=Uu();return n1({token:a,hashId:"",path:["ant-design-icons",e],nonce:()=>t==null?void 0:t.nonce,layer:{name:"antd"}},()=>[QM(e)])},W4=Object.assign({},Dm),{useId:K2}=W4,Y4=()=>"",K4=typeof K2>"u"?Y4:K2;function Q4(e,t,i){var a;const f=e||{},v=f.inherit===!1||!t?Object.assign(Object.assign({},Oy),{hashed:(a=t==null?void 0:t.hashed)!==null&&a!==void 0?a:Oy.hashed,cssVar:t==null?void 0:t.cssVar}):t,g=K4();return R0(()=>{var u,E;if(!e)return t;const P=Object.assign({},v.components);Object.keys(e.components||{}).forEach(j=>{P[j]=Object.assign(Object.assign({},P[j]),e.components[j])});const I=`css-var-${g.replace(/:/g,"")}`,B=((u=f.cssVar)!==null&&u!==void 0?u:v.cssVar)&&Object.assign(Object.assign(Object.assign({prefix:i==null?void 0:i.prefixCls},typeof v.cssVar=="object"?v.cssVar:{}),typeof f.cssVar=="object"?f.cssVar:{}),{key:typeof f.cssVar=="object"&&((E=f.cssVar)===null||E===void 0?void 0:E.key)||I});return Object.assign(Object.assign(Object.assign({},v),f),{token:Object.assign(Object.assign({},v.token),f.token),components:P,cssVar:B})},[f,v],(u,E)=>u.some((P,I)=>{const B=E[I];return!Py(P,B,!0)}))}var J4=["children"],JM=U.createContext({});function eL(e){var t=e.children,i=uo(e,J4);return U.createElement(JM.Provider,{value:i},t)}var tL=function(e){np(i,e);var t=rp(i);function i(){return Xa(this,i),t.apply(this,arguments)}return Wa(i,[{key:"render",value:function(){return this.props.children}}]),i}(U.Component);function nL(e){var t=U.useReducer(function(u){return u+1},0),i=fn(t,2),a=i[1],f=U.useRef(e),v=Gm(function(){return f.current}),g=Gm(function(u){f.current=typeof u=="function"?u(f.current):u,a()});return[v,g]}var Lf="none",Q_="appear",J_="enter",ev="leave",Q2="none",Ac="prepare",Tm="start",Em="active",kw="end",eA="prepared";function J2(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit".concat(e)]="webkit".concat(t),i["Moz".concat(e)]="moz".concat(t),i["ms".concat(e)]="MS".concat(t),i["O".concat(e)]="o".concat(t.toLowerCase()),i}function rL(e,t){var i={animationend:J2("Animation","AnimationEnd"),transitionend:J2("Transition","TransitionEnd")};return e&&("AnimationEvent"in t||delete i.animationend.animation,"TransitionEvent"in t||delete i.transitionend.transition),i}var iL=rL(_s(),typeof window<"u"?window:{}),tA={};if(_s()){var aL=document.createElement("div");tA=aL.style}var tv={};function nA(e){if(tv[e])return tv[e];var t=iL[e];if(t)for(var i=Object.keys(t),a=i.length,f=0;f<a;f+=1){var v=i[f];if(Object.prototype.hasOwnProperty.call(t,v)&&v in tA)return tv[e]=t[v],tv[e]}return""}var rA=nA("animationend"),iA=nA("transitionend"),aA=!!(rA&&iA),eC=rA||"animationend",tC=iA||"transitionend";function nC(e,t){if(!e)return null;if(zn(e)==="object"){var i=t.replace(/-\w/g,function(a){return a[1].toUpperCase()});return e[i]}return"".concat(e,"-").concat(t)}const oL=function(e){var t=U.useRef();function i(f){f&&(f.removeEventListener(tC,e),f.removeEventListener(eC,e))}function a(f){t.current&&t.current!==f&&i(t.current),f&&f!==t.current&&(f.addEventListener(tC,e),f.addEventListener(eC,e),t.current=f)}return U.useEffect(function(){return function(){i(t.current)}},[]),[a,i]};var oA=_s()?U.useLayoutEffect:U.useEffect;const sL=function(){var e=U.useRef(null);function t(){Wd.cancel(e.current)}function i(a){var f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:2;t();var v=Wd(function(){f<=1?a({isCanceled:function(){return v!==e.current}}):i(a,f-1)});e.current=v}return U.useEffect(function(){return function(){t()}},[]),[i,t]};var lL=[Ac,Tm,Em,kw],cL=[Ac,eA],sA=!1,uL=!0;function lA(e){return e===Em||e===kw}const hL=function(e,t,i){var a=a0(Q2),f=fn(a,2),v=f[0],g=f[1],u=sL(),E=fn(u,2),P=E[0],I=E[1];function B(){g(Ac,!0)}var j=t?cL:lL;return oA(function(){if(v!==Q2&&v!==kw){var $=j.indexOf(v),X=j[$+1],J=i(v);J===sA?g(X,!0):X&&P(function(G){function le(){G.isCanceled()||g(X,!0)}J===!0?le():Promise.resolve(J).then(le)})}},[e,v]),U.useEffect(function(){return function(){I()}},[]),[B,v]};function fL(e,t,i,a){var f=a.motionEnter,v=f===void 0?!0:f,g=a.motionAppear,u=g===void 0?!0:g,E=a.motionLeave,P=E===void 0?!0:E,I=a.motionDeadline,B=a.motionLeaveImmediately,j=a.onAppearPrepare,$=a.onEnterPrepare,X=a.onLeavePrepare,J=a.onAppearStart,G=a.onEnterStart,le=a.onLeaveStart,oe=a.onAppearActive,pe=a.onEnterActive,he=a.onLeaveActive,ae=a.onAppearEnd,ve=a.onEnterEnd,Se=a.onLeaveEnd,ke=a.onVisibleChanged,Le=a0(),Re=fn(Le,2),me=Re[0],Ae=Re[1],He=nL(Lf),We=fn(He,2),pt=We[0],xe=We[1],et=a0(null),Qe=fn(et,2),Rt=Qe[0],we=Qe[1],tt=pt(),_t=U.useRef(!1),Pt=U.useRef(null);function At(){return i()}var St=U.useRef(!1);function qt(){xe(Lf),we(null,!0)}var Xe=Gm(function(gn){var En=pt();if(En!==Lf){var Ln=At();if(!(gn&&!gn.deadline&&gn.target!==Ln)){var Pn=St.current,Hn;En===Q_&&Pn?Hn=ae==null?void 0:ae(Ln,gn):En===J_&&Pn?Hn=ve==null?void 0:ve(Ln,gn):En===ev&&Pn&&(Hn=Se==null?void 0:Se(Ln,gn)),Pn&&Hn!==!1&&qt()}}}),mt=oL(Xe),ft=fn(mt,1),Ke=ft[0],Je=function(En){switch(En){case Q_:return ut(ut(ut({},Ac,j),Tm,J),Em,oe);case J_:return ut(ut(ut({},Ac,$),Tm,G),Em,pe);case ev:return ut(ut(ut({},Ac,X),Tm,le),Em,he);default:return{}}},Vt=U.useMemo(function(){return Je(tt)},[tt]),$t=hL(tt,!e,function(gn){if(gn===Ac){var En=Vt[Ac];return En?En(At()):sA}if(kt in Vt){var Ln;we(((Ln=Vt[kt])===null||Ln===void 0?void 0:Ln.call(Vt,At(),null))||null)}return kt===Em&&tt!==Lf&&(Ke(At()),I>0&&(clearTimeout(Pt.current),Pt.current=setTimeout(function(){Xe({deadline:!0})},I))),kt===eA&&qt(),uL}),Kt=fn($t,2),Gt=Kt[0],kt=Kt[1],Qt=lA(kt);St.current=Qt;var ln=U.useRef(null);oA(function(){if(!(_t.current&&ln.current===t)){Ae(t);var gn=_t.current;_t.current=!0;var En;!gn&&t&&u&&(En=Q_),gn&&t&&v&&(En=J_),(gn&&!t&&P||!gn&&B&&!t&&P)&&(En=ev);var Ln=Je(En);En&&(e||Ln[Ac])?(xe(En),Gt()):xe(Lf),ln.current=t}},[t]),U.useEffect(function(){(tt===Q_&&!u||tt===J_&&!v||tt===ev&&!P)&&xe(Lf)},[u,v,P]),U.useEffect(function(){return function(){_t.current=!1,clearTimeout(Pt.current)}},[]);var Sn=U.useRef(!1);U.useEffect(function(){me&&(Sn.current=!0),me!==void 0&&tt===Lf&&((Sn.current||me)&&(ke==null||ke(me)),Sn.current=!0)},[me,tt]);var bn=Rt;return Vt[Ac]&&kt===Tm&&(bn=ct({transition:"none"},bn)),[tt,kt,bn,me??t]}function dL(e){var t=e;zn(e)==="object"&&(t=e.transitionSupport);function i(f,v){return!!(f.motionName&&t&&v!==!1)}var a=U.forwardRef(function(f,v){var g=f.visible,u=g===void 0?!0:g,E=f.removeOnLeave,P=E===void 0?!0:E,I=f.forceRender,B=f.children,j=f.motionName,$=f.leavedClassName,X=f.eventProps,J=U.useContext(JM),G=J.motion,le=i(f,G),oe=U.useRef(),pe=U.useRef();function he(){try{return oe.current instanceof HTMLElement?oe.current:HD(pe.current)}catch{return null}}var ae=fL(le,u,he,f),ve=fn(ae,4),Se=ve[0],ke=ve[1],Le=ve[2],Re=ve[3],me=U.useRef(Re);Re&&(me.current=!0);var Ae=U.useCallback(function(Qe){oe.current=Qe,sM(v,Qe)},[v]),He,We=ct(ct({},X),{},{visible:u});if(!B)He=null;else if(Se===Lf)Re?He=B(ct({},We),Ae):!P&&me.current&&$?He=B(ct(ct({},We),{},{className:$}),Ae):I||!P&&!$?He=B(ct(ct({},We),{},{style:{display:"none"}}),Ae):He=null;else{var pt;ke===Ac?pt="prepare":lA(ke)?pt="active":ke===Tm&&(pt="start");var xe=nC(j,"".concat(Se,"-").concat(pt));He=B(ct(ct({},We),{},{className:Mn(nC(j,Se),ut(ut({},xe,xe&&pt),j,typeof j=="string")),style:Le}),Ae)}if(U.isValidElement(He)&&pw(He)){var et=cM(He);et||(He=U.cloneElement(He,{ref:Ae}))}return U.createElement(tL,{ref:pe},He)});return a.displayName="CSSMotion",a}const Wy=dL(aA);var g1="add",y1="keep",_1="remove",Xb="removed";function pL(e){var t;return e&&zn(e)==="object"&&"key"in e?t=e:t={key:e},ct(ct({},t),{},{key:String(t.key)})}function v1(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return e.map(pL)}function mL(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],i=[],a=0,f=t.length,v=v1(e),g=v1(t);v.forEach(function(P){for(var I=!1,B=a;B<f;B+=1){var j=g[B];if(j.key===P.key){a<B&&(i=i.concat(g.slice(a,B).map(function($){return ct(ct({},$),{},{status:g1})})),a=B),i.push(ct(ct({},j),{},{status:y1})),a+=1,I=!0;break}}I||i.push(ct(ct({},P),{},{status:_1}))}),a<f&&(i=i.concat(g.slice(a).map(function(P){return ct(ct({},P),{},{status:g1})})));var u={};i.forEach(function(P){var I=P.key;u[I]=(u[I]||0)+1});var E=Object.keys(u).filter(function(P){return u[P]>1});return E.forEach(function(P){i=i.filter(function(I){var B=I.key,j=I.status;return B!==P||j!==_1}),i.forEach(function(I){I.key===P&&(I.status=y1)})}),i}var gL=["component","children","onVisibleChanged","onAllRemoved"],yL=["status"],_L=["eventProps","visible","children","motionName","motionAppear","motionEnter","motionLeave","motionLeaveImmediately","motionDeadline","removeOnLeave","leavedClassName","onAppearPrepare","onAppearStart","onAppearActive","onAppearEnd","onEnterStart","onEnterActive","onEnterEnd","onLeaveStart","onLeaveActive","onLeaveEnd"];function vL(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Wy,i=function(a){np(v,a);var f=rp(v);function v(){var g;Xa(this,v);for(var u=arguments.length,E=new Array(u),P=0;P<u;P++)E[P]=arguments[P];return g=f.call.apply(f,[this].concat(E)),ut(ur(g),"state",{keyEntities:[]}),ut(ur(g),"removeKey",function(I){g.setState(function(B){var j=B.keyEntities.map(function($){return $.key!==I?$:ct(ct({},$),{},{status:Xb})});return{keyEntities:j}},function(){var B=g.state.keyEntities,j=B.filter(function($){var X=$.status;return X!==Xb}).length;j===0&&g.props.onAllRemoved&&g.props.onAllRemoved()})}),g}return Wa(v,[{key:"render",value:function(){var u=this,E=this.state.keyEntities,P=this.props,I=P.component,B=P.children,j=P.onVisibleChanged;P.onAllRemoved;var $=uo(P,gL),X=I||U.Fragment,J={};return _L.forEach(function(G){J[G]=$[G],delete $[G]}),delete $.keys,U.createElement(X,$,E.map(function(G,le){var oe=G.status,pe=uo(G,yL),he=oe===g1||oe===y1;return U.createElement(t,Ti({},J,{key:pe.key,visible:he,eventProps:pe,onVisibleChanged:function(ve){j==null||j(ve,{key:pe.key}),ve||u.removeKey(pe.key)}}),function(ae,ve){return B(ct(ct({},ae),{},{index:le}),ve)})}))}}],[{key:"getDerivedStateFromProps",value:function(u,E){var P=u.keys,I=E.keyEntities,B=v1(P),j=mL(I,B);return{keyEntities:j.filter(function($){var X=I.find(function(J){var G=J.key;return $.key===G});return!(X&&X.status===Xb&&$.status===_1)})}}}]),v}(U.Component);return ut(i,"defaultProps",{component:"div"}),i}const bL=vL(aA),rC=U.createContext(!0);function xL(e){const t=U.useContext(rC),{children:i}=e,[,a]=Uu(),{motion:f}=a,v=U.useRef(!1);return v.current||(v.current=t!==f),v.current?U.createElement(rC.Provider,{value:f},U.createElement(eL,{motion:f},i)):i}const wL=()=>null;var SL=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const CL=["getTargetContainer","getPopupContainer","renderEmpty","input","pagination","form","select","button"];let o0,cA,uA,hA;function Pv(){return o0||r0}function TL(){return cA||L0}function EL(e){return Object.keys(e).some(t=>t.endsWith("Color"))}const ML=e=>{const{prefixCls:t,iconPrefixCls:i,theme:a,holderRender:f}=e;t!==void 0&&(o0=t),i!==void 0&&(cA=i),"holderRender"in e&&(hA=f),a&&(EL(a)?C4(Pv(),a):uA=a)},zw=()=>({getPrefixCls:(e,t)=>t||(e?`${Pv()}-${e}`:Pv()),getIconPrefixCls:TL,getRootPrefixCls:()=>o0||Pv(),getTheme:()=>uA,holderRender:hA}),AL=e=>{const{children:t,csp:i,autoInsertSpaceInButton:a,alert:f,anchor:v,form:g,locale:u,componentSize:E,direction:P,space:I,splitter:B,virtual:j,dropdownMatchSelectWidth:$,popupMatchSelectWidth:X,popupOverflow:J,legacyLocale:G,parentContext:le,iconPrefixCls:oe,theme:pe,componentDisabled:he,segmented:ae,statistic:ve,spin:Se,calendar:ke,carousel:Le,cascader:Re,collapse:me,typography:Ae,checkbox:He,descriptions:We,divider:pt,drawer:xe,skeleton:et,steps:Qe,image:Rt,layout:we,list:tt,mentions:_t,modal:Pt,progress:At,result:St,slider:qt,breadcrumb:Xe,menu:mt,pagination:ft,input:Ke,textArea:Je,empty:Vt,badge:$t,radio:Kt,rate:Gt,switch:kt,transfer:Qt,avatar:ln,message:Sn,tag:bn,table:gn,card:En,tabs:Ln,timeline:Pn,timePicker:Hn,upload:or,notification:dr,tree:sr,colorPicker:Gn,datePicker:pr,rangePicker:Jn,flex:br,wave:gr,dropdown:Lr,warning:Ge,tour:te,tooltip:ie,popover:de,popconfirm:Ce,floatButtonGroup:Ne,variant:ce,inputNumber:rt,treeSelect:Ve}=e,Ie=U.useCallback((en,Wt)=>{const{prefixCls:at}=e;if(Wt)return Wt;const Ht=at||le.getPrefixCls("");return en?`${Ht}-${en}`:Ht},[le.getPrefixCls,e.prefixCls]),Pe=oe||le.iconPrefixCls||L0,Me=i||le.csp;X4(Pe,Me);const Ye=Q4(pe,le.theme,{prefixCls:Ie("")}),xt={csp:Me,autoInsertSpaceInButton:a,alert:f,anchor:v,locale:u||G,direction:P,space:I,splitter:B,virtual:j,popupMatchSelectWidth:X??$,popupOverflow:J,getPrefixCls:Ie,iconPrefixCls:Pe,theme:Ye,segmented:ae,statistic:ve,spin:Se,calendar:ke,carousel:Le,cascader:Re,collapse:me,typography:Ae,checkbox:He,descriptions:We,divider:pt,drawer:xe,skeleton:et,steps:Qe,image:Rt,input:Ke,textArea:Je,layout:we,list:tt,mentions:_t,modal:Pt,progress:At,result:St,slider:qt,breadcrumb:Xe,menu:mt,pagination:ft,empty:Vt,badge:$t,radio:Kt,rate:Gt,switch:kt,transfer:Qt,avatar:ln,message:Sn,tag:bn,table:gn,card:En,tabs:Ln,timeline:Pn,timePicker:Hn,upload:or,notification:dr,tree:sr,colorPicker:Gn,datePicker:pr,rangePicker:Jn,flex:br,wave:gr,dropdown:Lr,warning:Ge,tour:te,tooltip:ie,popover:de,popconfirm:Ce,floatButtonGroup:Ne,variant:ce,inputNumber:rt,treeSelect:Ve},Mt=Object.assign({},le);Object.keys(xt).forEach(en=>{xt[en]!==void 0&&(Mt[en]=xt[en])}),CL.forEach(en=>{const Wt=e[en];Wt&&(Mt[en]=Wt)}),typeof a<"u"&&(Mt.button=Object.assign({autoInsertSpace:a},Mt.button));const Ot=R0(()=>Mt,Mt,(en,Wt)=>{const at=Object.keys(en),Ht=Object.keys(Wt);return at.length!==Ht.length||at.some(an=>en[an]!==Wt[an])}),{layer:Xt}=U.useContext(Yd),It=U.useMemo(()=>({prefixCls:Pe,csp:Me,layer:Xt?"antd":void 0}),[Pe,Me,Xt]);let qe=U.createElement(U.Fragment,null,U.createElement(wL,{dropdownMatchSelectWidth:$}),t);const dn=U.useMemo(()=>{var en,Wt,at,Ht;return Cm(((en=Uf.Form)===null||en===void 0?void 0:en.defaultValidateMessages)||{},((at=(Wt=Ot.locale)===null||Wt===void 0?void 0:Wt.Form)===null||at===void 0?void 0:at.defaultValidateMessages)||{},((Ht=Ot.form)===null||Ht===void 0?void 0:Ht.validateMessages)||{},(g==null?void 0:g.validateMessages)||{})},[Ot,g==null?void 0:g.validateMessages]);Object.keys(dn).length>0&&(qe=U.createElement(i4.Provider,{value:dn},qe)),u&&(qe=U.createElement(u4,{locale:u,_ANT_MARK__:c4},qe)),qe=U.createElement(Sw.Provider,{value:It},qe),E&&(qe=U.createElement(T4,{size:E},qe)),qe=U.createElement(xL,null,qe);const cn=U.useMemo(()=>{const en=Ye||{},{algorithm:Wt,token:at,components:Ht,cssVar:an}=en,Cn=SL(en,["algorithm","token","components","cssVar"]),pn=Wt&&(!Array.isArray(Wt)||Wt.length>0)?Jv(Wt):Ew,Bn={};Object.entries(Ht||{}).forEach(([xr,mi])=>{const Wn=Object.assign({},mi);"algorithm"in Wn&&(Wn.algorithm===!0?Wn.theme=pn:(Array.isArray(Wn.algorithm)||typeof Wn.algorithm=="function")&&(Wn.theme=Jv(Wn.algorithm)),delete Wn.algorithm),Bn[xr]=Wn});const tn=Object.assign(Object.assign({},Hm),at);return Object.assign(Object.assign({},Cn),{theme:pn,token:tn,components:Bn,override:Object.assign({override:tn},Bn),cssVar:an})},[Ye]);return pe&&(qe=U.createElement(Mw.Provider,{value:cn},qe)),Ot.warning&&(qe=U.createElement(r4.Provider,{value:Ot.warning},qe)),he!==void 0&&(qe=U.createElement(qM,{disabled:he},qe)),U.createElement(Ei.Provider,{value:Ot},qe)},Nl=e=>{const t=U.useContext(Ei),i=U.useContext(Cw);return U.createElement(AL,Object.assign({parentContext:t,legacyLocale:i},e))};Nl.ConfigContext=Ei;Nl.SizeContext=qm;Nl.config=ML;Nl.useConfig=E4;Object.defineProperty(Nl,"SizeContext",{get:()=>qm});var PL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm193.5 301.7l-210.6 292a31.8 31.8 0 01-51.7 0L318.5 484.9c-3.8-5.3 0-12.7 6.5-12.7h46.9c10.2 0 19.9 4.9 25.9 13.3l71.2 98.8 157.2-218c6-8.3 15.6-13.3 25.9-13.3H699c6.5 0 10.3 7.4 6.5 12.7z"}}]},name:"check-circle",theme:"filled"};function fA(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}function RL(e){return fA(e)instanceof ShadowRoot}function OL(e){return RL(e)?fA(e):null}function IL(e){return e.replace(/-(.)/g,function(t,i){return i.toUpperCase()})}function kL(e,t){el(e,"[@ant-design/icons] ".concat(t))}function iC(e){return zn(e)==="object"&&typeof e.name=="string"&&typeof e.theme=="string"&&(zn(e.icon)==="object"||typeof e.icon=="function")}function aC(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return Object.keys(e).reduce(function(t,i){var a=e[i];switch(i){case"class":t.className=a,delete t.class;break;default:delete t[i],t[IL(i)]=a}return t},{})}function b1(e,t,i){return i?Nt.createElement(e.tag,ct(ct({key:t},aC(e.attrs)),i),(e.children||[]).map(function(a,f){return b1(a,"".concat(t,"-").concat(e.tag,"-").concat(f))})):Nt.createElement(e.tag,ct({key:t},aC(e.attrs)),(e.children||[]).map(function(a,f){return b1(a,"".concat(t,"-").concat(e.tag,"-").concat(f))}))}function dA(e){return Kd(e)[0]}function pA(e){return e?Array.isArray(e)?e:[e]:[]}var zL=`
.anticon {
  display: inline-flex;
  align-items: center;
  color: inherit;
  font-style: normal;
  line-height: 0;
  text-align: center;
  text-transform: none;
  vertical-align: -0.125em;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
}

.anticon > * {
  line-height: 1;
}

.anticon svg {
  display: inline-block;
}

.anticon::before {
  display: none;
}

.anticon .anticon-icon {
  display: block;
}

.anticon[tabindex] {
  cursor: pointer;
}

.anticon-spin::before,
.anticon-spin {
  display: inline-block;
  -webkit-animation: loadingCircle 1s infinite linear;
  animation: loadingCircle 1s infinite linear;
}

@-webkit-keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}

@keyframes loadingCircle {
  100% {
    -webkit-transform: rotate(360deg);
    transform: rotate(360deg);
  }
}
`,DL=function(t){var i=U.useContext(Sw),a=i.csp,f=i.prefixCls,v=i.layer,g=zL;f&&(g=g.replace(/anticon/g,f)),v&&(g="@layer ".concat(v,` {
`).concat(g,`
}`)),U.useEffect(function(){var u=t.current,E=OL(u);kh(g,"@ant-design-icons",{prepend:!v,csp:a,attachTo:E})},[])},LL=["icon","className","onClick","style","primaryColor","secondaryColor"],my={primaryColor:"#333",secondaryColor:"#E6E6E6",calculated:!1};function BL(e){var t=e.primaryColor,i=e.secondaryColor;my.primaryColor=t,my.secondaryColor=i||dA(t),my.calculated=!!i}function NL(){return ct({},my)}var Jm=function(t){var i=t.icon,a=t.className,f=t.onClick,v=t.style,g=t.primaryColor,u=t.secondaryColor,E=uo(t,LL),P=U.useRef(),I=my;if(g&&(I={primaryColor:g,secondaryColor:u||dA(g)}),DL(P),kL(iC(i),"icon should be icon definiton, but got ".concat(i)),!iC(i))return null;var B=i;return B&&typeof B.icon=="function"&&(B=ct(ct({},B),{},{icon:B.icon(I.primaryColor,I.secondaryColor)})),b1(B.icon,"svg-".concat(B.name),ct(ct({className:a,onClick:f,style:v,"data-icon":B.name,width:"1em",height:"1em",fill:"currentColor","aria-hidden":"true"},E),{},{ref:P}))};Jm.displayName="IconReact";Jm.getTwoToneColors=NL;Jm.setTwoToneColors=BL;function mA(e){var t=pA(e),i=fn(t,2),a=i[0],f=i[1];return Jm.setTwoToneColors({primaryColor:a,secondaryColor:f})}function jL(){var e=Jm.getTwoToneColors();return e.calculated?[e.primaryColor,e.secondaryColor]:e.primaryColor}var FL=["className","icon","spin","rotate","tabIndex","onClick","twoToneColor"];mA(n0.primary);var Lh=U.forwardRef(function(e,t){var i=e.className,a=e.icon,f=e.spin,v=e.rotate,g=e.tabIndex,u=e.onClick,E=e.twoToneColor,P=uo(e,FL),I=U.useContext(Sw),B=I.prefixCls,j=B===void 0?"anticon":B,$=I.rootClassName,X=Mn($,j,ut(ut({},"".concat(j,"-").concat(a.name),!!a.name),"".concat(j,"-spin"),!!f||a.name==="loading"),i),J=g;J===void 0&&u&&(J=-1);var G=v?{msTransform:"rotate(".concat(v,"deg)"),transform:"rotate(".concat(v,"deg)")}:void 0,le=pA(E),oe=fn(le,2),pe=oe[0],he=oe[1];return U.createElement("span",Ti({role:"img","aria-label":a.name},P,{ref:t,tabIndex:J,onClick:u,className:X}),U.createElement(Jm,{icon:a,primaryColor:pe,secondaryColor:he,style:G}))});Lh.displayName="AntdIcon";Lh.getTwoToneColor=jL;Lh.setTwoToneColor=mA;var $L=function(t,i){return U.createElement(Lh,Ti({},t,{ref:i,icon:PL}))},Dw=U.forwardRef($L),VL={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64c247.4 0 448 200.6 448 448S759.4 960 512 960 64 759.4 64 512 264.6 64 512 64zm127.98 274.82h-.04l-.08.06L512 466.75 384.14 338.88c-.04-.05-.06-.06-.08-.06a.12.12 0 00-.07 0c-.03 0-.05.01-.09.05l-45.02 45.02a.2.2 0 00-.05.09.12.12 0 000 .07v.02a.27.27 0 00.06.06L466.75 512 338.88 639.86c-.05.04-.06.06-.06.08a.12.12 0 000 .07c0 .03.01.05.05.09l45.02 45.02a.2.2 0 00.09.05.12.12 0 00.07 0c.02 0 .04-.01.08-.05L512 557.25l127.86 127.87c.04.04.06.05.08.05a.12.12 0 00.07 0c.03 0 .05-.01.09-.05l45.02-45.02a.2.2 0 00.05-.09.12.12 0 000-.07v-.02a.27.27 0 00-.05-.06L557.25 512l127.87-127.86c.04-.04.05-.06.05-.08a.12.12 0 000-.07c0-.03-.01-.05-.05-.09l-45.02-45.02a.2.2 0 00-.09-.05.12.12 0 00-.07 0z"}}]},name:"close-circle",theme:"filled"},UL=function(t,i){return U.createElement(Lh,Ti({},t,{ref:i,icon:VL}))},Lw=U.forwardRef(UL),HL={icon:{tag:"svg",attrs:{"fill-rule":"evenodd",viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M799.86 166.31c.02 0 .04.02.08.06l57.69 57.7c.04.03.05.05.06.08a.12.12 0 010 .06c0 .03-.02.05-.06.09L569.93 512l287.7 287.7c.04.04.05.06.06.09a.12.12 0 010 .07c0 .02-.02.04-.06.08l-57.7 57.69c-.03.04-.05.05-.07.06a.12.12 0 01-.07 0c-.03 0-.05-.02-.09-.06L512 569.93l-287.7 287.7c-.04.04-.06.05-.09.06a.12.12 0 01-.07 0c-.02 0-.04-.02-.08-.06l-57.69-57.7c-.04-.03-.05-.05-.06-.07a.12.12 0 010-.07c0-.03.02-.05.06-.09L454.07 512l-287.7-287.7c-.04-.04-.05-.06-.06-.09a.12.12 0 010-.07c0-.02.02-.04.06-.08l57.7-57.69c.03-.04.05-.05.07-.06a.12.12 0 01.07 0c.03 0 .05.02.09.06L512 454.07l287.7-287.7c.04-.04.06-.05.09-.06a.12.12 0 01.07 0z"}}]},name:"close",theme:"outlined"},qL=function(t,i){return U.createElement(Lh,Ti({},t,{ref:i,icon:HL}))},Yy=U.forwardRef(qL),GL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm-32 232c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V296zm32 440a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"exclamation-circle",theme:"filled"},ZL=function(t,i){return U.createElement(Lh,Ti({},t,{ref:i,icon:GL}))},Bw=U.forwardRef(ZL),XL={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm32 664c0 4.4-3.6 8-8 8h-48c-4.4 0-8-3.6-8-8V456c0-4.4 3.6-8 8-8h48c4.4 0 8 3.6 8 8v272zm-32-344a48.01 48.01 0 010-96 48.01 48.01 0 010 96z"}}]},name:"info-circle",theme:"filled"},WL=function(t,i){return U.createElement(Lh,Ti({},t,{ref:i,icon:XL}))},Nw=U.forwardRef(WL),YL=`accept acceptCharset accessKey action allowFullScreen allowTransparency
    alt async autoComplete autoFocus autoPlay capture cellPadding cellSpacing challenge
    charSet checked classID className colSpan cols content contentEditable contextMenu
    controls coords crossOrigin data dateTime default defer dir disabled download draggable
    encType form formAction formEncType formMethod formNoValidate formTarget frameBorder
    headers height hidden high href hrefLang htmlFor httpEquiv icon id inputMode integrity
    is keyParams keyType kind label lang list loop low manifest marginHeight marginWidth max maxLength media
    mediaGroup method min minLength multiple muted name noValidate nonce open
    optimum pattern placeholder poster preload radioGroup readOnly rel required
    reversed role rowSpan rows sandbox scope scoped scrolling seamless selected
    shape size sizes span spellCheck src srcDoc srcLang srcSet start step style
    summary tabIndex target title type useMap value width wmode wrap`,KL=`onCopy onCut onPaste onCompositionEnd onCompositionStart onCompositionUpdate onKeyDown
    onKeyPress onKeyUp onFocus onBlur onChange onInput onSubmit onClick onContextMenu onDoubleClick
    onDrag onDragEnd onDragEnter onDragExit onDragLeave onDragOver onDragStart onDrop onMouseDown
    onMouseEnter onMouseLeave onMouseMove onMouseOut onMouseOver onMouseUp onSelect onTouchCancel
    onTouchEnd onTouchMove onTouchStart onScroll onWheel onAbort onCanPlay onCanPlayThrough
    onDurationChange onEmptied onEncrypted onEnded onError onLoadedData onLoadedMetadata
    onLoadStart onPause onPlay onPlaying onProgress onRateChange onSeeked onSeeking onStalled onSuspend onTimeUpdate onVolumeChange onWaiting onLoad onError`,QL="".concat(YL," ").concat(KL).split(/[\s\n]+/),JL="aria-",eB="data-";function oC(e,t){return e.indexOf(t)===0}function B0(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,i;t===!1?i={aria:!0,data:!0,attr:!0}:t===!0?i={aria:!0}:i=ct({},t);var a={};return Object.keys(e).forEach(function(f){(i.aria&&(f==="role"||oC(f,JL))||i.data&&oC(f,eB)||i.attr&&QL.includes(f))&&(a[f]=e[f])}),a}function tB(e){return e&&Nt.isValidElement(e)&&e.type===Nt.Fragment}const nB=(e,t,i)=>Nt.isValidElement(e)?Nt.cloneElement(e,typeof i=="function"?i(e.props||{}):i):t;function gA(e,t){return nB(e,e,t)}const eg=e=>{const[,,,,t]=Uu();return t?`${e}-css-var`:""};var x1={TAB:9,ENTER:13,ESC:27},jw=U.forwardRef(function(e,t){var i=e.prefixCls,a=e.style,f=e.className,v=e.duration,g=v===void 0?4.5:v,u=e.showProgress,E=e.pauseOnHover,P=E===void 0?!0:E,I=e.eventKey,B=e.content,j=e.closable,$=e.closeIcon,X=$===void 0?"x":$,J=e.props,G=e.onClick,le=e.onNoticeClose,oe=e.times,pe=e.hovering,he=U.useState(!1),ae=fn(he,2),ve=ae[0],Se=ae[1],ke=U.useState(0),Le=fn(ke,2),Re=Le[0],me=Le[1],Ae=U.useState(0),He=fn(Ae,2),We=He[0],pt=He[1],xe=pe||ve,et=g>0&&u,Qe=function(){le(I)},Rt=function(St){(St.key==="Enter"||St.code==="Enter"||St.keyCode===x1.ENTER)&&Qe()};U.useEffect(function(){if(!xe&&g>0){var At=Date.now()-We,St=setTimeout(function(){Qe()},g*1e3-We);return function(){P&&clearTimeout(St),pt(Date.now()-At)}}},[g,xe,oe]),U.useEffect(function(){if(!xe&&et&&(P||We===0)){var At=performance.now(),St,qt=function Xe(){cancelAnimationFrame(St),St=requestAnimationFrame(function(mt){var ft=mt+We-At,Ke=Math.min(ft/(g*1e3),1);me(Ke*100),Ke<1&&Xe()})};return qt(),function(){P&&cancelAnimationFrame(St)}}},[g,We,xe,et,oe]);var we=U.useMemo(function(){return zn(j)==="object"&&j!==null?j:j?{closeIcon:X}:{}},[j,X]),tt=B0(we,!0),_t=100-(!Re||Re<0?0:Re>100?100:Re),Pt="".concat(i,"-notice");return U.createElement("div",Ti({},J,{ref:t,className:Mn(Pt,f,ut({},"".concat(Pt,"-closable"),j)),style:a,onMouseEnter:function(St){var qt;Se(!0),J==null||(qt=J.onMouseEnter)===null||qt===void 0||qt.call(J,St)},onMouseLeave:function(St){var qt;Se(!1),J==null||(qt=J.onMouseLeave)===null||qt===void 0||qt.call(J,St)},onClick:G}),U.createElement("div",{className:"".concat(Pt,"-content")},B),j&&U.createElement("a",Ti({tabIndex:0,className:"".concat(Pt,"-close"),onKeyDown:Rt,"aria-label":"Close"},tt,{onClick:function(St){St.preventDefault(),St.stopPropagation(),Qe()}}),we.closeIcon),et&&U.createElement("progress",{className:"".concat(Pt,"-progress"),max:"100",value:_t},_t+"%"))}),yA=Nt.createContext({}),_A=function(t){var i=t.children,a=t.classNames;return Nt.createElement(yA.Provider,{value:{classNames:a}},i)},sC=8,lC=3,cC=16,rB=function(t){var i={offset:sC,threshold:lC,gap:cC};if(t&&zn(t)==="object"){var a,f,v;i.offset=(a=t.offset)!==null&&a!==void 0?a:sC,i.threshold=(f=t.threshold)!==null&&f!==void 0?f:lC,i.gap=(v=t.gap)!==null&&v!==void 0?v:cC}return[!!t,i]},iB=["className","style","classNames","styles"],aB=function(t){var i=t.configList,a=t.placement,f=t.prefixCls,v=t.className,g=t.style,u=t.motion,E=t.onAllNoticeRemoved,P=t.onNoticeClose,I=t.stack,B=U.useContext(yA),j=B.classNames,$=U.useRef({}),X=U.useState(null),J=fn(X,2),G=J[0],le=J[1],oe=U.useState([]),pe=fn(oe,2),he=pe[0],ae=pe[1],ve=i.map(function(xe){return{config:xe,key:String(xe.key)}}),Se=rB(I),ke=fn(Se,2),Le=ke[0],Re=ke[1],me=Re.offset,Ae=Re.threshold,He=Re.gap,We=Le&&(he.length>0||ve.length<=Ae),pt=typeof u=="function"?u(a):u;return U.useEffect(function(){Le&&he.length>1&&ae(function(xe){return xe.filter(function(et){return ve.some(function(Qe){var Rt=Qe.key;return et===Rt})})})},[he,ve,Le]),U.useEffect(function(){var xe;if(Le&&$.current[(xe=ve[ve.length-1])===null||xe===void 0?void 0:xe.key]){var et;le($.current[(et=ve[ve.length-1])===null||et===void 0?void 0:et.key])}},[ve,Le]),Nt.createElement(bL,Ti({key:a,className:Mn(f,"".concat(f,"-").concat(a),j==null?void 0:j.list,v,ut(ut({},"".concat(f,"-stack"),!!Le),"".concat(f,"-stack-expanded"),We)),style:g,keys:ve,motionAppear:!0},pt,{onAllRemoved:function(){E(a)}}),function(xe,et){var Qe=xe.config,Rt=xe.className,we=xe.style,tt=xe.index,_t=Qe,Pt=_t.key,At=_t.times,St=String(Pt),qt=Qe,Xe=qt.className,mt=qt.style,ft=qt.classNames,Ke=qt.styles,Je=uo(qt,iB),Vt=ve.findIndex(function(Pn){return Pn.key===St}),$t={};if(Le){var Kt=ve.length-1-(Vt>-1?Vt:tt-1),Gt=a==="top"||a==="bottom"?"-50%":"0";if(Kt>0){var kt,Qt,ln;$t.height=We?(kt=$.current[St])===null||kt===void 0?void 0:kt.offsetHeight:G==null?void 0:G.offsetHeight;for(var Sn=0,bn=0;bn<Kt;bn++){var gn;Sn+=((gn=$.current[ve[ve.length-1-bn].key])===null||gn===void 0?void 0:gn.offsetHeight)+He}var En=(We?Sn:Kt*me)*(a.startsWith("top")?1:-1),Ln=!We&&G!==null&&G!==void 0&&G.offsetWidth&&(Qt=$.current[St])!==null&&Qt!==void 0&&Qt.offsetWidth?((G==null?void 0:G.offsetWidth)-me*2*(Kt<3?Kt:3))/((ln=$.current[St])===null||ln===void 0?void 0:ln.offsetWidth):1;$t.transform="translate3d(".concat(Gt,", ").concat(En,"px, 0) scaleX(").concat(Ln,")")}else $t.transform="translate3d(".concat(Gt,", 0, 0)")}return Nt.createElement("div",{ref:et,className:Mn("".concat(f,"-notice-wrapper"),Rt,ft==null?void 0:ft.wrapper),style:ct(ct(ct({},we),$t),Ke==null?void 0:Ke.wrapper),onMouseEnter:function(){return ae(function(Hn){return Hn.includes(St)?Hn:[].concat(wn(Hn),[St])})},onMouseLeave:function(){return ae(function(Hn){return Hn.filter(function(or){return or!==St})})}},Nt.createElement(jw,Ti({},Je,{ref:function(Hn){Vt>-1?$.current[St]=Hn:delete $.current[St]},prefixCls:f,classNames:ft,styles:Ke,className:Mn(Xe,j==null?void 0:j.notice),style:mt,times:At,key:Pt,eventKey:Pt,onNoticeClose:P,hovering:Le&&he.length>0})))})},oB=U.forwardRef(function(e,t){var i=e.prefixCls,a=i===void 0?"rc-notification":i,f=e.container,v=e.motion,g=e.maxCount,u=e.className,E=e.style,P=e.onAllRemoved,I=e.stack,B=e.renderNotifications,j=U.useState([]),$=fn(j,2),X=$[0],J=$[1],G=function(Le){var Re,me=X.find(function(Ae){return Ae.key===Le});me==null||(Re=me.onClose)===null||Re===void 0||Re.call(me),J(function(Ae){return Ae.filter(function(He){return He.key!==Le})})};U.useImperativeHandle(t,function(){return{open:function(Le){J(function(Re){var me=wn(Re),Ae=me.findIndex(function(pt){return pt.key===Le.key}),He=ct({},Le);if(Ae>=0){var We;He.times=(((We=Re[Ae])===null||We===void 0?void 0:We.times)||0)+1,me[Ae]=He}else He.times=0,me.push(He);return g>0&&me.length>g&&(me=me.slice(-g)),me})},close:function(Le){G(Le)},destroy:function(){J([])}}});var le=U.useState({}),oe=fn(le,2),pe=oe[0],he=oe[1];U.useEffect(function(){var ke={};X.forEach(function(Le){var Re=Le.placement,me=Re===void 0?"topRight":Re;me&&(ke[me]=ke[me]||[],ke[me].push(Le))}),Object.keys(pe).forEach(function(Le){ke[Le]=ke[Le]||[]}),he(ke)},[X]);var ae=function(Le){he(function(Re){var me=ct({},Re),Ae=me[Le]||[];return Ae.length||delete me[Le],me})},ve=U.useRef(!1);if(U.useEffect(function(){Object.keys(pe).length>0?ve.current=!0:ve.current&&(P==null||P(),ve.current=!1)},[pe]),!f)return null;var Se=Object.keys(pe);return Gy.createPortal(U.createElement(U.Fragment,null,Se.map(function(ke){var Le=pe[ke],Re=U.createElement(aB,{key:ke,configList:Le,placement:ke,prefixCls:a,className:u==null?void 0:u(ke),style:E==null?void 0:E(ke),motion:v,onNoticeClose:G,onAllNoticeRemoved:ae,stack:I});return B?B(Re,{prefixCls:a,key:ke}):Re})),f)}),sB=["getContainer","motion","prefixCls","maxCount","className","style","onAllRemoved","stack","renderNotifications"],lB=function(){return document.body},uC=0;function cB(){for(var e={},t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return i.forEach(function(f){f&&Object.keys(f).forEach(function(v){var g=f[v];g!==void 0&&(e[v]=g)})}),e}function vA(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.getContainer,i=t===void 0?lB:t,a=e.motion,f=e.prefixCls,v=e.maxCount,g=e.className,u=e.style,E=e.onAllRemoved,P=e.stack,I=e.renderNotifications,B=uo(e,sB),j=U.useState(),$=fn(j,2),X=$[0],J=$[1],G=U.useRef(),le=U.createElement(oB,{container:X,ref:G,prefixCls:f,motion:a,maxCount:v,className:g,style:u,onAllRemoved:E,stack:P,renderNotifications:I}),oe=U.useState([]),pe=fn(oe,2),he=pe[0],ae=pe[1],ve=Gm(function(ke){var Le=cB(B,ke);(Le.key===null||Le.key===void 0)&&(Le.key="rc-notification-".concat(uC),uC+=1),ae(function(Re){return[].concat(wn(Re),[{type:"open",config:Le}])})}),Se=U.useMemo(function(){return{open:ve,close:function(Le){ae(function(Re){return[].concat(wn(Re),[{type:"close",key:Le}])})},destroy:function(){ae(function(Le){return[].concat(wn(Le),[{type:"destroy"}])})}}},[]);return U.useEffect(function(){J(i())}),U.useEffect(function(){if(G.current&&he.length){he.forEach(function(Re){switch(Re.type){case"open":G.current.open(Re.config);break;case"close":G.current.close(Re.key);break;case"destroy":G.current.destroy();break}});var ke,Le;ae(function(Re){return(ke!==Re||!Le)&&(ke=Re,Le=Re.filter(function(me){return!he.includes(me)})),Le})}},[he]),[Se,le]}var uB={icon:{tag:"svg",attrs:{viewBox:"0 0 1024 1024",focusable:"false"},children:[{tag:"path",attrs:{d:"M988 548c-19.9 0-36-16.1-36-36 0-59.4-11.6-117-34.6-171.3a440.45 440.45 0 00-94.3-139.9 437.71 437.71 0 00-139.9-94.3C629 83.6 571.4 72 512 72c-19.9 0-36-16.1-36-36s16.1-36 36-36c69.1 0 136.2 13.5 199.3 40.3C772.3 66 827 103 874 150c47 47 83.9 101.8 109.7 162.7 26.7 63.1 40.2 130.2 40.2 199.3.1 19.9-16 36-35.9 36z"}}]},name:"loading",theme:"outlined"},hB=function(t,i){return U.createElement(Lh,Ti({},t,{ref:i,icon:uB}))},bA=U.forwardRef(hB);const xA=Nt.createContext(void 0),Bf=100,fB=10,Fw=Bf*fB,wA={Modal:Bf,Drawer:Bf,Popover:Bf,Popconfirm:Bf,Tooltip:Bf,Tour:Bf,FloatButton:Bf},dB={SelectLike:50,Dropdown:50,DatePicker:50,Menu:50,ImagePreview:1};function pB(e){return e in wA}const mB=(e,t)=>{const[,i]=Uu(),a=Nt.useContext(xA),f=pB(e);let v;if(t!==void 0)v=[t,t];else{let g=a??0;f?g+=(a?0:i.zIndexPopupBase)+wA[e]:g+=dB[e],v=[a===void 0?t:g,g]}return v},gB=e=>{const{componentCls:t,iconCls:i,boxShadow:a,colorText:f,colorSuccess:v,colorError:g,colorWarning:u,colorInfo:E,fontSizeLG:P,motionEaseInOutCirc:I,motionDurationSlow:B,marginXS:j,paddingXS:$,borderRadiusLG:X,zIndexPopup:J,contentPadding:G,contentBg:le}=e,oe=`${t}-notice`,pe=new Qi("MessageMoveIn",{"0%":{padding:0,transform:"translateY(-100%)",opacity:0},"100%":{padding:$,transform:"translateY(0)",opacity:1}}),he=new Qi("MessageMoveOut",{"0%":{maxHeight:e.height,padding:$,opacity:1},"100%":{maxHeight:0,padding:0,opacity:0}}),ae={padding:$,textAlign:"center",[`${t}-custom-content`]:{display:"flex",alignItems:"center"},[`${t}-custom-content > ${i}`]:{marginInlineEnd:j,fontSize:P},[`${oe}-content`]:{display:"inline-block",padding:G,background:le,borderRadius:X,boxShadow:a,pointerEvents:"all"},[`${t}-success > ${i}`]:{color:v},[`${t}-error > ${i}`]:{color:g},[`${t}-warning > ${i}`]:{color:u},[`${t}-info > ${i},
      ${t}-loading > ${i}`]:{color:E}};return[{[t]:Object.assign(Object.assign({},Rw(e)),{color:f,position:"fixed",top:j,width:"100%",pointerEvents:"none",zIndex:J,[`${t}-move-up`]:{animationFillMode:"forwards"},[`
        ${t}-move-up-appear,
        ${t}-move-up-enter
      `]:{animationName:pe,animationDuration:B,animationPlayState:"paused",animationTimingFunction:I},[`
        ${t}-move-up-appear${t}-move-up-appear-active,
        ${t}-move-up-enter${t}-move-up-enter-active
      `]:{animationPlayState:"running"},[`${t}-move-up-leave`]:{animationName:he,animationDuration:B,animationPlayState:"paused",animationTimingFunction:I},[`${t}-move-up-leave${t}-move-up-leave-active`]:{animationPlayState:"running"},"&-rtl":{direction:"rtl",span:{direction:"rtl"}}})},{[t]:{[`${oe}-wrapper`]:Object.assign({},ae)}},{[`${t}-notice-pure-panel`]:Object.assign(Object.assign({},ae),{padding:0,textAlign:"start"})}]},yB=e=>({zIndexPopup:e.zIndexPopupBase+Fw+10,contentBg:e.colorBgElevated,contentPadding:`${(e.controlHeightLG-e.fontSize*e.lineHeight)/2}px ${e.paddingSM}px`}),SA=ip("Message",e=>{const t=Fc(e,{height:150});return[gB(t)]},yB);var _B=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const vB={info:U.createElement(Nw,null),success:U.createElement(Dw,null),error:U.createElement(Lw,null),warning:U.createElement(Bw,null),loading:U.createElement(bA,null)},CA=({prefixCls:e,type:t,icon:i,children:a})=>U.createElement("div",{className:Mn(`${e}-custom-content`,`${e}-${t}`)},i||vB[t],U.createElement("span",null,a)),bB=e=>{const{prefixCls:t,className:i,type:a,icon:f,content:v}=e,g=_B(e,["prefixCls","className","type","icon","content"]),{getPrefixCls:u}=U.useContext(Ei),E=t||u("message"),P=eg(E),[I,B,j]=SA(E,P);return I(U.createElement(jw,Object.assign({},g,{prefixCls:E,className:Mn(i,B,`${E}-notice-pure-panel`,j,P),eventKey:"pure",duration:null,content:U.createElement(CA,{prefixCls:E,type:a,icon:f},v)})))};function xB(e,t){return{motionName:t??`${e}-move-up`}}function $w(e){let t;const i=new Promise(f=>{t=e(()=>{f(!0)})}),a=()=>{t==null||t()};return a.then=(f,v)=>i.then(f,v),a.promise=i,a}var wB=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const SB=8,CB=3,TB=({children:e,prefixCls:t})=>{const i=eg(t),[a,f,v]=SA(t,i);return a(U.createElement(_A,{classNames:{list:Mn(f,v,i)}},e))},EB=(e,{prefixCls:t,key:i})=>U.createElement(TB,{prefixCls:t,key:i},e),MB=U.forwardRef((e,t)=>{const{top:i,prefixCls:a,getContainer:f,maxCount:v,duration:g=CB,rtl:u,transitionName:E,onAllRemoved:P}=e,{getPrefixCls:I,getPopupContainer:B,message:j,direction:$}=U.useContext(Ei),X=a||I("message"),J=()=>({left:"50%",transform:"translateX(-50%)",top:i??SB}),G=()=>Mn({[`${X}-rtl`]:u??$==="rtl"}),le=()=>xB(X,E),oe=U.createElement("span",{className:`${X}-close-x`},U.createElement(Yy,{className:`${X}-close-icon`})),[pe,he]=vA({prefixCls:X,style:J,className:G,motion:le,closable:!1,closeIcon:oe,duration:g,getContainer:()=>(f==null?void 0:f())||(B==null?void 0:B())||document.body,maxCount:v,onAllRemoved:P,renderNotifications:EB});return U.useImperativeHandle(t,()=>Object.assign(Object.assign({},pe),{prefixCls:X,message:j})),he});let hC=0;function TA(e){const t=U.useRef(null);return[U.useMemo(()=>{const a=E=>{var P;(P=t.current)===null||P===void 0||P.close(E)},f=E=>{if(!t.current){const ve=()=>{};return ve.then=()=>{},ve}const{open:P,prefixCls:I,message:B}=t.current,j=`${I}-notice`,{content:$,icon:X,type:J,key:G,className:le,style:oe,onClose:pe}=E,he=wB(E,["content","icon","type","key","className","style","onClose"]);let ae=G;return ae==null&&(hC+=1,ae=`antd-message-${hC}`),$w(ve=>(P(Object.assign(Object.assign({},he),{key:ae,content:U.createElement(CA,{prefixCls:I,type:J,icon:X},$),placement:"top",className:Mn(J&&`${j}-${J}`,le,B==null?void 0:B.className),style:Object.assign(Object.assign({},B==null?void 0:B.style),oe),onClose:()=>{pe==null||pe(),ve()}})),()=>{a(ae)}))},g={open:f,destroy:E=>{var P;E!==void 0?a(E):(P=t.current)===null||P===void 0||P.destroy()}};return["info","success","warning","error","loading"].forEach(E=>{const P=(I,B,j)=>{let $;I&&typeof I=="object"&&"content"in I?$=I:$={content:I};let X,J;typeof B=="function"?J=B:(X=B,J=j);const G=Object.assign(Object.assign({onClose:J,duration:X},$),{type:E});return f(G)};g[E]=P}),g},[]),U.createElement(MB,Object.assign({key:"message-holder"},e,{ref:t}))]}function AB(e){return TA(e)}function PB(){const[e,t]=U.useState([]),i=U.useCallback(a=>(t(f=>[].concat(wn(f),[a])),()=>{t(f=>f.filter(v=>v!==a))}),[]);return[e,i]}function Zo(){Zo=function(){return t};var e,t={},i=Object.prototype,a=i.hasOwnProperty,f=typeof Symbol=="function"?Symbol:{},v=f.iterator||"@@iterator",g=f.asyncIterator||"@@asyncIterator",u=f.toStringTag||"@@toStringTag";function E(Re,me,Ae,He){Object.defineProperty(Re,me,{value:Ae,enumerable:!He,configurable:!He,writable:!He})}try{E({},"")}catch{E=function(Ae,He,We){return Ae[He]=We}}function P(Re,me,Ae,He){var We=me&&me.prototype instanceof j?me:j,pt=Object.create(We.prototype);return E(pt,"_invoke",function(xe,et,Qe){var Rt=1;return function(we,tt){if(Rt===3)throw Error("Generator is already running");if(Rt===4){if(we==="throw")throw tt;return{value:e,done:!0}}for(Qe.method=we,Qe.arg=tt;;){var _t=Qe.delegate;if(_t){var Pt=ae(_t,Qe);if(Pt){if(Pt===B)continue;return Pt}}if(Qe.method==="next")Qe.sent=Qe._sent=Qe.arg;else if(Qe.method==="throw"){if(Rt===1)throw Rt=4,Qe.arg;Qe.dispatchException(Qe.arg)}else Qe.method==="return"&&Qe.abrupt("return",Qe.arg);Rt=3;var At=I(xe,et,Qe);if(At.type==="normal"){if(Rt=Qe.done?4:2,At.arg===B)continue;return{value:At.arg,done:Qe.done}}At.type==="throw"&&(Rt=4,Qe.method="throw",Qe.arg=At.arg)}}}(Re,Ae,new ke(He||[])),!0),pt}function I(Re,me,Ae){try{return{type:"normal",arg:Re.call(me,Ae)}}catch(He){return{type:"throw",arg:He}}}t.wrap=P;var B={};function j(){}function $(){}function X(){}var J={};E(J,v,function(){return this});var G=Object.getPrototypeOf,le=G&&G(G(Le([])));le&&le!==i&&a.call(le,v)&&(J=le);var oe=X.prototype=j.prototype=Object.create(J);function pe(Re){["next","throw","return"].forEach(function(me){E(Re,me,function(Ae){return this._invoke(me,Ae)})})}function he(Re,me){function Ae(We,pt,xe,et){var Qe=I(Re[We],Re,pt);if(Qe.type!=="throw"){var Rt=Qe.arg,we=Rt.value;return we&&zn(we)=="object"&&a.call(we,"__await")?me.resolve(we.__await).then(function(tt){Ae("next",tt,xe,et)},function(tt){Ae("throw",tt,xe,et)}):me.resolve(we).then(function(tt){Rt.value=tt,xe(Rt)},function(tt){return Ae("throw",tt,xe,et)})}et(Qe.arg)}var He;E(this,"_invoke",function(We,pt){function xe(){return new me(function(et,Qe){Ae(We,pt,et,Qe)})}return He=He?He.then(xe,xe):xe()},!0)}function ae(Re,me){var Ae=me.method,He=Re.i[Ae];if(He===e)return me.delegate=null,Ae==="throw"&&Re.i.return&&(me.method="return",me.arg=e,ae(Re,me),me.method==="throw")||Ae!=="return"&&(me.method="throw",me.arg=new TypeError("The iterator does not provide a '"+Ae+"' method")),B;var We=I(He,Re.i,me.arg);if(We.type==="throw")return me.method="throw",me.arg=We.arg,me.delegate=null,B;var pt=We.arg;return pt?pt.done?(me[Re.r]=pt.value,me.next=Re.n,me.method!=="return"&&(me.method="next",me.arg=e),me.delegate=null,B):pt:(me.method="throw",me.arg=new TypeError("iterator result is not an object"),me.delegate=null,B)}function ve(Re){this.tryEntries.push(Re)}function Se(Re){var me=Re[4]||{};me.type="normal",me.arg=e,Re[4]=me}function ke(Re){this.tryEntries=[[-1]],Re.forEach(ve,this),this.reset(!0)}function Le(Re){if(Re!=null){var me=Re[v];if(me)return me.call(Re);if(typeof Re.next=="function")return Re;if(!isNaN(Re.length)){var Ae=-1,He=function We(){for(;++Ae<Re.length;)if(a.call(Re,Ae))return We.value=Re[Ae],We.done=!1,We;return We.value=e,We.done=!0,We};return He.next=He}}throw new TypeError(zn(Re)+" is not iterable")}return $.prototype=X,E(oe,"constructor",X),E(X,"constructor",$),E(X,u,$.displayName="GeneratorFunction"),t.isGeneratorFunction=function(Re){var me=typeof Re=="function"&&Re.constructor;return!!me&&(me===$||(me.displayName||me.name)==="GeneratorFunction")},t.mark=function(Re){return Object.setPrototypeOf?Object.setPrototypeOf(Re,X):(Re.__proto__=X,E(Re,u,"GeneratorFunction")),Re.prototype=Object.create(oe),Re},t.awrap=function(Re){return{__await:Re}},pe(he.prototype),E(he.prototype,g,function(){return this}),t.AsyncIterator=he,t.async=function(Re,me,Ae,He,We){We===void 0&&(We=Promise);var pt=new he(P(Re,me,Ae,He),We);return t.isGeneratorFunction(me)?pt:pt.next().then(function(xe){return xe.done?xe.value:pt.next()})},pe(oe),E(oe,u,"Generator"),E(oe,v,function(){return this}),E(oe,"toString",function(){return"[object Generator]"}),t.keys=function(Re){var me=Object(Re),Ae=[];for(var He in me)Ae.unshift(He);return function We(){for(;Ae.length;)if((He=Ae.pop())in me)return We.value=He,We.done=!1,We;return We.done=!0,We}},t.values=Le,ke.prototype={constructor:ke,reset:function(me){if(this.prev=this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(Se),!me)for(var Ae in this)Ae.charAt(0)==="t"&&a.call(this,Ae)&&!isNaN(+Ae.slice(1))&&(this[Ae]=e)},stop:function(){this.done=!0;var me=this.tryEntries[0][4];if(me.type==="throw")throw me.arg;return this.rval},dispatchException:function(me){if(this.done)throw me;var Ae=this;function He(we){xe.type="throw",xe.arg=me,Ae.next=we}for(var We=Ae.tryEntries.length-1;We>=0;--We){var pt=this.tryEntries[We],xe=pt[4],et=this.prev,Qe=pt[1],Rt=pt[2];if(pt[0]===-1)return He("end"),!1;if(!Qe&&!Rt)throw Error("try statement without catch or finally");if(pt[0]!=null&&pt[0]<=et){if(et<Qe)return this.method="next",this.arg=e,He(Qe),!0;if(et<Rt)return He(Rt),!1}}},abrupt:function(me,Ae){for(var He=this.tryEntries.length-1;He>=0;--He){var We=this.tryEntries[He];if(We[0]>-1&&We[0]<=this.prev&&this.prev<We[2]){var pt=We;break}}pt&&(me==="break"||me==="continue")&&pt[0]<=Ae&&Ae<=pt[2]&&(pt=null);var xe=pt?pt[4]:{};return xe.type=me,xe.arg=Ae,pt?(this.method="next",this.next=pt[2],B):this.complete(xe)},complete:function(me,Ae){if(me.type==="throw")throw me.arg;return me.type==="break"||me.type==="continue"?this.next=me.arg:me.type==="return"?(this.rval=this.arg=me.arg,this.method="return",this.next="end"):me.type==="normal"&&Ae&&(this.next=Ae),B},finish:function(me){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var He=this.tryEntries[Ae];if(He[2]===me)return this.complete(He[4],He[3]),Se(He),B}},catch:function(me){for(var Ae=this.tryEntries.length-1;Ae>=0;--Ae){var He=this.tryEntries[Ae];if(He[0]===me){var We=He[4];if(We.type==="throw"){var pt=We.arg;Se(He)}return pt}}throw Error("illegal catch attempt")},delegateYield:function(me,Ae,He){return this.delegate={i:Le(me),r:Ae,n:He},this.method==="next"&&(this.arg=e),B}},t}function fC(e,t,i,a,f,v,g){try{var u=e[v](g),E=u.value}catch(P){return void i(P)}u.done?t(E):Promise.resolve(E).then(a,f)}function ap(e){return function(){var t=this,i=arguments;return new Promise(function(a,f){var v=e.apply(t,i);function g(E){fC(v,a,f,g,u,"next",E)}function u(E){fC(v,a,f,g,u,"throw",E)}g(void 0)})}}var Ky=ct({},WR),RB=Ky.version,Wb=Ky.render,OB=Ky.unmountComponentAtNode,N0;try{var IB=Number((RB||"").split(".")[0]);IB>=18&&(N0=Ky.createRoot)}catch{}function dC(e){var t=Ky.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;t&&zn(t)==="object"&&(t.usingClientEntryPoint=e)}var s0="__rc_react_root__";function kB(e,t){dC(!0);var i=t[s0]||N0(t);dC(!1),i.render(e),t[s0]=i}function zB(e,t){Wb==null||Wb(e,t)}function DB(e,t){if(N0){kB(e,t);return}zB(e,t)}function LB(e){return w1.apply(this,arguments)}function w1(){return w1=ap(Zo().mark(function e(t){return Zo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.resolve().then(function(){var f;(f=t[s0])===null||f===void 0||f.unmount(),delete t[s0]}));case 1:case"end":return a.stop()}},e)})),w1.apply(this,arguments)}function BB(e){OB(e)}function NB(e){return S1.apply(this,arguments)}function S1(){return S1=ap(Zo().mark(function e(t){return Zo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(N0===void 0){a.next=2;break}return a.abrupt("return",LB(t));case 2:BB(t);case 3:case"end":return a.stop()}},e)})),S1.apply(this,arguments)}const jB=(e,t)=>(DB(e,t),()=>NB(t));let FB=jB;function j0(e){return FB}const l0=(e,t,i)=>i!==void 0?i:`${e}-${t}`;function F0(e,t){var i=Object.assign({},e);return Array.isArray(t)&&t.forEach(function(a){delete i[a]}),i}const $B=function(e){if(!e)return!1;if(e instanceof Element){if(e.offsetParent)return!0;if(e.getBBox){var t=e.getBBox(),i=t.width,a=t.height;if(i||a)return!0}if(e.getBoundingClientRect){var f=e.getBoundingClientRect(),v=f.width,g=f.height;if(v||g)return!0}}return!1},VB=e=>{const{componentCls:t,colorPrimary:i}=e;return{[t]:{position:"absolute",background:"transparent",pointerEvents:"none",boxSizing:"border-box",color:`var(--wave-color, ${i})`,boxShadow:"0 0 0 0 currentcolor",opacity:.2,"&.wave-motion-appear":{transition:[`box-shadow 0.4s ${e.motionEaseOutCirc}`,`opacity 2s ${e.motionEaseOutCirc}`].join(","),"&-active":{boxShadow:"0 0 0 6px currentcolor",opacity:0},"&.wave-quick":{transition:[`box-shadow ${e.motionDurationSlow} ${e.motionEaseInOut}`,`opacity ${e.motionDurationSlow} ${e.motionEaseInOut}`].join(",")}}}}},UB=Z4("Wave",e=>[VB(e)]),EA=`${r0}-wave-target`;function Yb(e){return e&&e!=="#fff"&&e!=="#ffffff"&&e!=="rgb(255, 255, 255)"&&e!=="rgba(255, 255, 255, 1)"&&!/rgba\((?:\d*, ){3}0\)/.test(e)&&e!=="transparent"}function HB(e){const{borderTopColor:t,borderColor:i,backgroundColor:a}=getComputedStyle(e);return Yb(t)?t:Yb(i)?i:Yb(a)?a:null}function Kb(e){return Number.isNaN(e)?0:e}const qB=e=>{const{className:t,target:i,component:a,registerUnmount:f}=e,v=U.useRef(null),g=U.useRef(null);U.useEffect(()=>{g.current=f()},[]);const[u,E]=U.useState(null),[P,I]=U.useState([]),[B,j]=U.useState(0),[$,X]=U.useState(0),[J,G]=U.useState(0),[le,oe]=U.useState(0),[pe,he]=U.useState(!1),ae={left:B,top:$,width:J,height:le,borderRadius:P.map(ke=>`${ke}px`).join(" ")};u&&(ae["--wave-color"]=u);function ve(){const ke=getComputedStyle(i);E(HB(i));const Le=ke.position==="static",{borderLeftWidth:Re,borderTopWidth:me}=ke;j(Le?i.offsetLeft:Kb(-parseFloat(Re))),X(Le?i.offsetTop:Kb(-parseFloat(me))),G(i.offsetWidth),oe(i.offsetHeight);const{borderTopLeftRadius:Ae,borderTopRightRadius:He,borderBottomLeftRadius:We,borderBottomRightRadius:pt}=ke;I([Ae,He,pt,We].map(xe=>Kb(parseFloat(xe))))}if(U.useEffect(()=>{if(i){const ke=Wd(()=>{ve(),he(!0)});let Le;return typeof ResizeObserver<"u"&&(Le=new ResizeObserver(ve),Le.observe(i)),()=>{Wd.cancel(ke),Le==null||Le.disconnect()}}},[]),!pe)return null;const Se=(a==="Checkbox"||a==="Radio")&&(i==null?void 0:i.classList.contains(EA));return U.createElement(Wy,{visible:!0,motionAppear:!0,motionName:"wave-motion",motionDeadline:5e3,onAppearEnd:(ke,Le)=>{var Re,me;if(Le.deadline||Le.propertyName==="opacity"){const Ae=(Re=v.current)===null||Re===void 0?void 0:Re.parentElement;(me=g.current)===null||me===void 0||me.call(g).then(()=>{Ae==null||Ae.remove()})}return!1}},({className:ke},Le)=>U.createElement("div",{ref:fw(v,Le),className:Mn(t,ke,{"wave-quick":Se}),style:ae}))},GB=(e,t)=>{var i;const{component:a}=t;if(a==="Checkbox"&&!(!((i=e.querySelector("input"))===null||i===void 0)&&i.checked))return;const f=document.createElement("div");f.style.position="absolute",f.style.left="0px",f.style.top="0px",e==null||e.insertBefore(f,e==null?void 0:e.firstChild);const v=j0();let g=null;function u(){return g}g=v(U.createElement(qB,Object.assign({},t,{target:e,registerUnmount:u})),f)},ZB=(e,t,i)=>{const{wave:a}=U.useContext(Ei),[,f,v]=Uu(),g=Gm(P=>{const I=e.current;if(a!=null&&a.disabled||!I)return;const B=I.querySelector(`.${EA}`)||I,{showEffect:j}=a||{};(j||GB)(B,{className:t,token:f,component:i,event:P,hashId:v})}),u=U.useRef(null);return P=>{Wd.cancel(u.current),u.current=Wd(()=>{g(P)})}},XB=e=>{const{children:t,disabled:i,component:a}=e,{getPrefixCls:f}=U.useContext(Ei),v=U.useRef(null),g=f("wave"),[,u]=UB(g),E=ZB(v,Mn(g,u),a);if(Nt.useEffect(()=>{const I=v.current;if(!I||I.nodeType!==1||i)return;const B=j=>{!$B(j.target)||!I.getAttribute||I.getAttribute("disabled")||I.disabled||I.className.includes("disabled")||I.className.includes("-leave")||E(j)};return I.addEventListener("click",B,!0),()=>{I.removeEventListener("click",B,!0)}},[i]),!Nt.isValidElement(t))return t??null;const P=pw(t)?fw(cM(t),v):v;return gA(t,{ref:P})},WB=e=>{const t=Nt.useContext(qm);return Nt.useMemo(()=>e?typeof e=="string"?e??t:typeof e=="function"?e(t):t:t,[e,t])},MA=U.createContext(null),YB=(e,t)=>{const i=U.useContext(MA),a=U.useMemo(()=>{if(!i)return"";const{compactDirection:f,isFirstItem:v,isLastItem:g}=i,u=f==="vertical"?"-vertical-":"-";return Mn(`${e}-compact${u}item`,{[`${e}-compact${u}first-item`]:v,[`${e}-compact${u}last-item`]:g,[`${e}-compact${u}item-rtl`]:t==="rtl"})},[e,t,i]);return{compactSize:i==null?void 0:i.compactSize,compactDirection:i==null?void 0:i.compactDirection,compactItemClassnames:a}},KB=e=>{const{children:t}=e;return U.createElement(MA.Provider,{value:null},t)};var QB=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const AA=U.createContext(void 0),JB=e=>{const{getPrefixCls:t,direction:i}=U.useContext(Ei),{prefixCls:a,size:f,className:v}=e,g=QB(e,["prefixCls","size","className"]),u=t("btn-group",a),[,,E]=Uu(),P=U.useMemo(()=>{switch(f){case"large":return"lg";case"small":return"sm";default:return""}},[f]),I=Mn(u,{[`${u}-${P}`]:P,[`${u}-rtl`]:i==="rtl"},v,E);return U.createElement(AA.Provider,{value:f},U.createElement("div",Object.assign({},g,{className:I})))},pC=/^[\u4E00-\u9FA5]{2}$/,C1=pC.test.bind(pC);function PA(e){return e==="danger"?{danger:!0}:{type:e}}function mC(e){return typeof e=="string"}function Qb(e){return e==="text"||e==="link"}function eN(e,t){if(e==null)return;const i=t?" ":"";return typeof e!="string"&&typeof e!="number"&&mC(e.type)&&C1(e.props.children)?gA(e,{children:e.props.children.split("").join(i)}):mC(e)?C1(e)?Nt.createElement("span",null,e.split("").join(i)):Nt.createElement("span",null,e):tB(e)?Nt.createElement("span",null,e):e}function tN(e,t){let i=!1;const a=[];return Nt.Children.forEach(e,f=>{const v=typeof f,g=v==="string"||v==="number";if(i&&g){const u=a.length-1,E=a[u];a[u]=`${E}${f}`}else a.push(f);i=g}),Nt.Children.map(a,f=>eN(f,t))}["default","primary","danger"].concat(wn(Aw));const T1=U.forwardRef((e,t)=>{const{className:i,style:a,children:f,prefixCls:v}=e,g=Mn(`${v}-icon`,i);return Nt.createElement("span",{ref:t,className:g,style:a},f)}),gC=U.forwardRef((e,t)=>{const{prefixCls:i,className:a,style:f,iconClassName:v}=e,g=Mn(`${i}-loading-icon`,a);return Nt.createElement(T1,{prefixCls:i,className:g,style:f,ref:t},Nt.createElement(bA,{className:v}))}),Jb=()=>({width:0,opacity:0,transform:"scale(0)"}),ex=e=>({width:e.scrollWidth,opacity:1,transform:"scale(1)"}),nN=e=>{const{prefixCls:t,loading:i,existIcon:a,className:f,style:v,mount:g}=e,u=!!i;return a?Nt.createElement(gC,{prefixCls:t,className:f,style:v}):Nt.createElement(Wy,{visible:u,motionName:`${t}-loading-icon-motion`,motionAppear:!g,motionEnter:!g,motionLeave:!g,removeOnLeave:!0,onAppearStart:Jb,onAppearActive:ex,onEnterStart:Jb,onEnterActive:ex,onLeaveStart:ex,onLeaveActive:Jb},({className:E,style:P},I)=>{const B=Object.assign(Object.assign({},v),P);return Nt.createElement(gC,{prefixCls:t,className:Mn(f,E),style:B,ref:I})})},yC=(e,t)=>({[`> span, > ${e}`]:{"&:not(:last-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineEndColor:t}}},"&:not(:first-child)":{[`&, & > ${e}`]:{"&:not(:disabled)":{borderInlineStartColor:t}}}}}),rN=e=>{const{componentCls:t,fontSize:i,lineWidth:a,groupBorderColor:f,colorErrorHover:v}=e;return{[`${t}-group`]:[{position:"relative",display:"inline-flex",[`> span, > ${t}`]:{"&:not(:last-child)":{[`&, & > ${t}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},"&:not(:first-child)":{marginInlineStart:e.calc(a).mul(-1).equal(),[`&, & > ${t}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}},[t]:{position:"relative",zIndex:1,"&:hover, &:focus, &:active":{zIndex:2},"&[disabled]":{zIndex:0}},[`${t}-icon-only`]:{fontSize:i}},yC(`${t}-primary`,f),yC(`${t}-danger`,v)]}};var iN=["b"],aN=["v"],tx=function(t){return Math.round(Number(t||0))},oN=function(t){if(t instanceof zi)return t;if(t&&zn(t)==="object"&&"h"in t&&"b"in t){var i=t,a=i.b,f=uo(i,iN);return ct(ct({},f),{},{v:a})}return typeof t=="string"&&/hsb/.test(t)?t.replace(/hsb/,"hsv"):t},Iy=function(e){np(i,e);var t=rp(i);function i(a){return Xa(this,i),t.call(this,oN(a))}return Wa(i,[{key:"toHsbString",value:function(){var f=this.toHsb(),v=tx(f.s*100),g=tx(f.b*100),u=tx(f.h),E=f.a,P="hsb(".concat(u,", ").concat(v,"%, ").concat(g,"%)"),I="hsba(".concat(u,", ").concat(v,"%, ").concat(g,"%, ").concat(E.toFixed(E===0?0:2),")");return E===1?P:I}},{key:"toHsb",value:function(){var f=this.toHsv(),v=f.v,g=uo(f,aN);return ct(ct({},g),{},{b:v,a:this.a})}}]),i}(zi),sN=function(t){return t instanceof Iy?t:new Iy(t)};sN("#1677ff");const lN=(e,t)=>(e==null?void 0:e.replace(/[^\w/]/g,"").slice(0,t?8:6))||"",cN=(e,t)=>e?lN(e,t):"";let uN=function(){function e(t){Xa(this,e);var i;if(this.cleared=!1,t instanceof e){this.metaColor=t.metaColor.clone(),this.colors=(i=t.colors)===null||i===void 0?void 0:i.map(f=>({color:new e(f.color),percent:f.percent})),this.cleared=t.cleared;return}const a=Array.isArray(t);a&&t.length?(this.colors=t.map(({color:f,percent:v})=>({color:new e(f),percent:v})),this.metaColor=new Iy(this.colors[0].color.metaColor)):this.metaColor=new Iy(a?"":t),(!t||a&&!this.colors)&&(this.metaColor=this.metaColor.setA(0),this.cleared=!0)}return Wa(e,[{key:"toHsb",value:function(){return this.metaColor.toHsb()}},{key:"toHsbString",value:function(){return this.metaColor.toHsbString()}},{key:"toHex",value:function(){return cN(this.toHexString(),this.metaColor.a<1)}},{key:"toHexString",value:function(){return this.metaColor.toHexString()}},{key:"toRgb",value:function(){return this.metaColor.toRgb()}},{key:"toRgbString",value:function(){return this.metaColor.toRgbString()}},{key:"isGradient",value:function(){return!!this.colors&&!this.cleared}},{key:"getColors",value:function(){return this.colors||[{color:this,percent:0}]}},{key:"toCssString",value:function(){const{colors:i}=this;return i?`linear-gradient(90deg, ${i.map(f=>`${f.color.toRgbString()} ${f.percent}%`).join(", ")})`:this.metaColor.toRgbString()}},{key:"equals",value:function(i){return!i||this.isGradient()!==i.isGradient()?!1:this.isGradient()?this.colors.length===i.colors.length&&this.colors.every((a,f)=>{const v=i.colors[f];return a.percent===v.percent&&a.color.equals(v.color)}):this.toHexString()===i.toHexString()}}])}();const hN=e=>({animationDuration:e,animationFillMode:"both"}),fN=e=>({animationDuration:e,animationFillMode:"both"}),RA=(e,t,i,a,f=!1)=>{const v=f?"&":"";return{[`
      ${v}${e}-enter,
      ${v}${e}-appear
    `]:Object.assign(Object.assign({},hN(a)),{animationPlayState:"paused"}),[`${v}${e}-leave`]:Object.assign(Object.assign({},fN(a)),{animationPlayState:"paused"}),[`
      ${v}${e}-enter${e}-enter-active,
      ${v}${e}-appear${e}-appear-active
    `]:{animationName:t,animationPlayState:"running"},[`${v}${e}-leave${e}-leave-active`]:{animationName:i,animationPlayState:"running",pointerEvents:"none"}}},dN=new Qi("antFadeIn",{"0%":{opacity:0},"100%":{opacity:1}}),pN=new Qi("antFadeOut",{"0%":{opacity:1},"100%":{opacity:0}}),mN=(e,t=!1)=>{const{antCls:i}=e,a=`${i}-fade`,f=t?"&":"";return[RA(a,dN,pN,e.motionDurationMid,t),{[`
        ${f}${a}-enter,
        ${f}${a}-appear
      `]:{opacity:0,animationTimingFunction:"linear"},[`${f}${a}-leave`]:{animationTimingFunction:"linear"}}]},gN=new Qi("antZoomIn",{"0%":{transform:"scale(0.2)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),yN=new Qi("antZoomOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.2)",opacity:0}}),_C=new Qi("antZoomBigIn",{"0%":{transform:"scale(0.8)",opacity:0},"100%":{transform:"scale(1)",opacity:1}}),vC=new Qi("antZoomBigOut",{"0%":{transform:"scale(1)"},"100%":{transform:"scale(0.8)",opacity:0}}),_N=new Qi("antZoomUpIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 0%"}}),vN=new Qi("antZoomUpOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 0%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 0%",opacity:0}}),bN=new Qi("antZoomLeftIn",{"0%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"0% 50%"}}),xN=new Qi("antZoomLeftOut",{"0%":{transform:"scale(1)",transformOrigin:"0% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"0% 50%",opacity:0}}),wN=new Qi("antZoomRightIn",{"0%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"100% 50%"}}),SN=new Qi("antZoomRightOut",{"0%":{transform:"scale(1)",transformOrigin:"100% 50%"},"100%":{transform:"scale(0.8)",transformOrigin:"100% 50%",opacity:0}}),CN=new Qi("antZoomDownIn",{"0%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0},"100%":{transform:"scale(1)",transformOrigin:"50% 100%"}}),TN=new Qi("antZoomDownOut",{"0%":{transform:"scale(1)",transformOrigin:"50% 100%"},"100%":{transform:"scale(0.8)",transformOrigin:"50% 100%",opacity:0}}),EN={zoom:{inKeyframes:gN,outKeyframes:yN},"zoom-big":{inKeyframes:_C,outKeyframes:vC},"zoom-big-fast":{inKeyframes:_C,outKeyframes:vC},"zoom-left":{inKeyframes:bN,outKeyframes:xN},"zoom-right":{inKeyframes:wN,outKeyframes:SN},"zoom-up":{inKeyframes:_N,outKeyframes:vN},"zoom-down":{inKeyframes:CN,outKeyframes:TN}},MN=(e,t)=>{const{antCls:i}=e,a=`${i}-${t}`,{inKeyframes:f,outKeyframes:v}=EN[t];return[RA(a,f,v,e.motionDurationMid),{[`
        ${a}-enter,
        ${a}-appear
      `]:{transform:"scale(0)",opacity:0,animationTimingFunction:e.motionEaseOutCirc,"&-prepare":{transform:"none"}},[`${a}-leave`]:{animationTimingFunction:e.motionEaseInOutCirc}}]},AN=(e,t)=>{const{r:i,g:a,b:f,a:v}=e.toRgb(),g=new Iy(e.toRgbString()).onBackground(t).toHsv();return v<=.5?g.v>.5:i*.299+a*.587+f*.114>192},OA=e=>{const{paddingInline:t,onlyIconSize:i}=e;return Fc(e,{buttonPaddingHorizontal:t,buttonPaddingVertical:0,buttonIconOnlyFontSize:i})},IA=e=>{var t,i,a,f,v,g;const u=(t=e.contentFontSize)!==null&&t!==void 0?t:e.fontSize,E=(i=e.contentFontSizeSM)!==null&&i!==void 0?i:e.fontSize,P=(a=e.contentFontSizeLG)!==null&&a!==void 0?a:e.fontSizeLG,I=(f=e.contentLineHeight)!==null&&f!==void 0?f:Av(u),B=(v=e.contentLineHeightSM)!==null&&v!==void 0?v:Av(E),j=(g=e.contentLineHeightLG)!==null&&g!==void 0?g:Av(P),$=AN(new uN(e.colorBgSolid),"#fff")?"#000":"#fff",X=Aw.reduce((J,G)=>Object.assign(Object.assign({},J),{[`${G}ShadowColor`]:`0 ${_r(e.controlOutlineWidth)} 0 ${uy(e[`${G}1`],e.colorBgContainer)}`}),{});return Object.assign(Object.assign({},X),{fontWeight:400,defaultShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlTmpOutline}`,primaryShadow:`0 ${e.controlOutlineWidth}px 0 ${e.controlOutline}`,dangerShadow:`0 ${e.controlOutlineWidth}px 0 ${e.colorErrorOutline}`,primaryColor:e.colorTextLightSolid,dangerColor:e.colorTextLightSolid,borderColorDisabled:e.colorBorder,defaultGhostColor:e.colorBgContainer,ghostBg:"transparent",defaultGhostBorderColor:e.colorBgContainer,paddingInline:e.paddingContentHorizontal-e.lineWidth,paddingInlineLG:e.paddingContentHorizontal-e.lineWidth,paddingInlineSM:8-e.lineWidth,onlyIconSize:"inherit",onlyIconSizeSM:"inherit",onlyIconSizeLG:"inherit",groupBorderColor:e.colorPrimaryHover,linkHoverBg:"transparent",textTextColor:e.colorText,textTextHoverColor:e.colorText,textTextActiveColor:e.colorText,textHoverBg:e.colorFillTertiary,defaultColor:e.colorText,defaultBg:e.colorBgContainer,defaultBorderColor:e.colorBorder,defaultBorderColorDisabled:e.colorBorder,defaultHoverBg:e.colorBgContainer,defaultHoverColor:e.colorPrimaryHover,defaultHoverBorderColor:e.colorPrimaryHover,defaultActiveBg:e.colorBgContainer,defaultActiveColor:e.colorPrimaryActive,defaultActiveBorderColor:e.colorPrimaryActive,solidTextColor:$,contentFontSize:u,contentFontSizeSM:E,contentFontSizeLG:P,contentLineHeight:I,contentLineHeightSM:B,contentLineHeightLG:j,paddingBlock:Math.max((e.controlHeight-u*I)/2-e.lineWidth,0),paddingBlockSM:Math.max((e.controlHeightSM-E*B)/2-e.lineWidth,0),paddingBlockLG:Math.max((e.controlHeightLG-P*j)/2-e.lineWidth,0)})},PN=e=>{const{componentCls:t,iconCls:i,fontWeight:a,opacityLoading:f,motionDurationSlow:v,motionEaseInOut:g,marginXS:u,calc:E}=e;return{[t]:{outline:"none",position:"relative",display:"inline-flex",gap:e.marginXS,alignItems:"center",justifyContent:"center",fontWeight:a,whiteSpace:"nowrap",textAlign:"center",backgroundImage:"none",background:"transparent",border:`${_r(e.lineWidth)} ${e.lineType} transparent`,cursor:"pointer",transition:`all ${e.motionDurationMid} ${e.motionEaseInOut}`,userSelect:"none",touchAction:"manipulation",color:e.colorText,"&:disabled > *":{pointerEvents:"none"},[`${t}-icon > svg`]:KM(),"> a":{color:"currentColor"},"&:not(:disabled)":Ow(e),[`&${t}-two-chinese-chars::first-letter`]:{letterSpacing:"0.34em"},[`&${t}-two-chinese-chars > *:not(${i})`]:{marginInlineEnd:"-0.34em",letterSpacing:"0.34em"},[`&${t}-icon-only`]:{paddingInline:0,[`&${t}-compact-item`]:{flex:"none"},[`&${t}-round`]:{width:"auto"}},[`&${t}-loading`]:{opacity:f,cursor:"default"},[`${t}-loading-icon`]:{transition:["width","opacity","margin"].map(P=>`${P} ${v} ${g}`).join(",")},[`&:not(${t}-icon-end)`]:{[`${t}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineEnd:E(u).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineEnd:0},"&-leave-start":{marginInlineEnd:0},"&-leave-active":{marginInlineEnd:E(u).mul(-1).equal()}}},"&-icon-end":{flexDirection:"row-reverse",[`${t}-loading-icon-motion`]:{"&-appear-start, &-enter-start":{marginInlineStart:E(u).mul(-1).equal()},"&-appear-active, &-enter-active":{marginInlineStart:0},"&-leave-start":{marginInlineStart:0},"&-leave-active":{marginInlineStart:E(u).mul(-1).equal()}}}}}},kA=(e,t,i)=>({[`&:not(:disabled):not(${e}-disabled)`]:{"&:hover":t,"&:active":i}}),RN=e=>({minWidth:e.controlHeight,paddingInlineStart:0,paddingInlineEnd:0,borderRadius:"50%"}),ON=e=>({borderRadius:e.controlHeight,paddingInlineStart:e.calc(e.controlHeight).div(2).equal(),paddingInlineEnd:e.calc(e.controlHeight).div(2).equal()}),IN=e=>({cursor:"not-allowed",borderColor:e.borderColorDisabled,color:e.colorTextDisabled,background:e.colorBgContainerDisabled,boxShadow:"none"}),$0=(e,t,i,a,f,v,g,u)=>({[`&${e}-background-ghost`]:Object.assign(Object.assign({color:i||void 0,background:t,borderColor:a||void 0,boxShadow:"none"},kA(e,Object.assign({background:t},g),Object.assign({background:t},u))),{"&:disabled":{cursor:"not-allowed",color:f||void 0,borderColor:v||void 0}})}),kN=e=>({[`&:disabled, &${e.componentCls}-disabled`]:Object.assign({},IN(e))}),zN=e=>({[`&:disabled, &${e.componentCls}-disabled`]:{cursor:"not-allowed",color:e.colorTextDisabled}}),V0=(e,t,i,a)=>{const v=a&&["link","text"].includes(a)?zN:kN;return Object.assign(Object.assign({},v(e)),kA(e.componentCls,t,i))},U0=(e,t,i,a,f)=>({[`&${e.componentCls}-variant-solid`]:Object.assign({color:t,background:i},V0(e,a,f))}),H0=(e,t,i,a,f)=>({[`&${e.componentCls}-variant-outlined, &${e.componentCls}-variant-dashed`]:Object.assign({borderColor:t,background:i},V0(e,a,f))}),q0=e=>({[`&${e.componentCls}-variant-dashed`]:{borderStyle:"dashed"}}),G0=(e,t,i,a)=>({[`&${e.componentCls}-variant-filled`]:Object.assign({boxShadow:"none",background:t},V0(e,i,a))}),$u=(e,t,i,a,f)=>({[`&${e.componentCls}-variant-${i}`]:Object.assign({color:t,boxShadow:"none"},V0(e,a,f,i))}),DN=e=>{const{componentCls:t}=e;return Aw.reduce((i,a)=>{const f=e[`${a}6`],v=e[`${a}1`],g=e[`${a}5`],u=e[`${a}2`],E=e[`${a}3`],P=e[`${a}7`];return Object.assign(Object.assign({},i),{[`&${t}-color-${a}`]:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:f,boxShadow:e[`${a}ShadowColor`]},U0(e,e.colorTextLightSolid,f,{background:g},{background:P})),H0(e,f,e.colorBgContainer,{color:g,borderColor:g,background:e.colorBgContainer},{color:P,borderColor:P,background:e.colorBgContainer})),q0(e)),G0(e,v,{background:u},{background:E})),$u(e,f,"link",{color:g},{color:P})),$u(e,f,"text",{color:g,background:v},{color:P,background:E}))})},{})},LN=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.defaultColor,boxShadow:e.defaultShadow},U0(e,e.solidTextColor,e.colorBgSolid,{color:e.solidTextColor,background:e.colorBgSolidHover},{color:e.solidTextColor,background:e.colorBgSolidActive})),q0(e)),G0(e,e.colorFillTertiary,{background:e.colorFillSecondary},{background:e.colorFill})),$0(e.componentCls,e.ghostBg,e.defaultGhostColor,e.defaultGhostBorderColor,e.colorTextDisabled,e.colorBorder)),$u(e,e.textTextColor,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),BN=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorPrimary,boxShadow:e.primaryShadow},H0(e,e.colorPrimary,e.colorBgContainer,{color:e.colorPrimaryTextHover,borderColor:e.colorPrimaryHover,background:e.colorBgContainer},{color:e.colorPrimaryTextActive,borderColor:e.colorPrimaryActive,background:e.colorBgContainer})),q0(e)),G0(e,e.colorPrimaryBg,{background:e.colorPrimaryBgHover},{background:e.colorPrimaryBorder})),$u(e,e.colorPrimaryText,"text",{color:e.colorPrimaryTextHover,background:e.colorPrimaryBg},{color:e.colorPrimaryTextActive,background:e.colorPrimaryBorder})),$u(e,e.colorPrimaryText,"link",{color:e.colorPrimaryTextHover,background:e.linkHoverBg},{color:e.colorPrimaryTextActive})),$0(e.componentCls,e.ghostBg,e.colorPrimary,e.colorPrimary,e.colorTextDisabled,e.colorBorder,{color:e.colorPrimaryHover,borderColor:e.colorPrimaryHover},{color:e.colorPrimaryActive,borderColor:e.colorPrimaryActive})),NN=e=>Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({color:e.colorError,boxShadow:e.dangerShadow},U0(e,e.dangerColor,e.colorError,{background:e.colorErrorHover},{background:e.colorErrorActive})),H0(e,e.colorError,e.colorBgContainer,{color:e.colorErrorHover,borderColor:e.colorErrorBorderHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),q0(e)),G0(e,e.colorErrorBg,{background:e.colorErrorBgFilledHover},{background:e.colorErrorBgActive})),$u(e,e.colorError,"text",{color:e.colorErrorHover,background:e.colorErrorBg},{color:e.colorErrorHover,background:e.colorErrorBgActive})),$u(e,e.colorError,"link",{color:e.colorErrorHover},{color:e.colorErrorActive})),$0(e.componentCls,e.ghostBg,e.colorError,e.colorError,e.colorTextDisabled,e.colorBorder,{color:e.colorErrorHover,borderColor:e.colorErrorHover},{color:e.colorErrorActive,borderColor:e.colorErrorActive})),jN=e=>Object.assign(Object.assign({},$u(e,e.colorLink,"link",{color:e.colorLinkHover},{color:e.colorLinkActive})),$0(e.componentCls,e.ghostBg,e.colorInfo,e.colorInfo,e.colorTextDisabled,e.colorBorder,{color:e.colorInfoHover,borderColor:e.colorInfoHover},{color:e.colorInfoActive,borderColor:e.colorInfoActive})),FN=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-color-default`]:LN(e),[`${t}-color-primary`]:BN(e),[`${t}-color-dangerous`]:NN(e),[`${t}-color-link`]:jN(e)},DN(e))},$N=e=>Object.assign(Object.assign(Object.assign(Object.assign({},H0(e,e.defaultBorderColor,e.defaultBg,{color:e.defaultHoverColor,borderColor:e.defaultHoverBorderColor,background:e.defaultHoverBg},{color:e.defaultActiveColor,borderColor:e.defaultActiveBorderColor,background:e.defaultActiveBg})),$u(e,e.textTextColor,"text",{color:e.textTextHoverColor,background:e.textHoverBg},{color:e.textTextActiveColor,background:e.colorBgTextActive})),U0(e,e.primaryColor,e.colorPrimary,{background:e.colorPrimaryHover,color:e.primaryColor},{background:e.colorPrimaryActive,color:e.primaryColor})),$u(e,e.colorLink,"link",{color:e.colorLinkHover,background:e.linkHoverBg},{color:e.colorLinkActive})),Vw=(e,t="")=>{const{componentCls:i,controlHeight:a,fontSize:f,borderRadius:v,buttonPaddingHorizontal:g,iconCls:u,buttonPaddingVertical:E,buttonIconOnlyFontSize:P}=e;return[{[t]:{fontSize:f,height:a,padding:`${_r(E)} ${_r(g)}`,borderRadius:v,[`&${i}-icon-only`]:{width:a,[u]:{fontSize:P}}}},{[`${i}${i}-circle${t}`]:RN(e)},{[`${i}${i}-round${t}`]:ON(e)}]},VN=e=>{const t=Fc(e,{fontSize:e.contentFontSize});return Vw(t,e.componentCls)},UN=e=>{const t=Fc(e,{controlHeight:e.controlHeightSM,fontSize:e.contentFontSizeSM,padding:e.paddingXS,buttonPaddingHorizontal:e.paddingInlineSM,buttonPaddingVertical:0,borderRadius:e.borderRadiusSM,buttonIconOnlyFontSize:e.onlyIconSizeSM});return Vw(t,`${e.componentCls}-sm`)},HN=e=>{const t=Fc(e,{controlHeight:e.controlHeightLG,fontSize:e.contentFontSizeLG,buttonPaddingHorizontal:e.paddingInlineLG,buttonPaddingVertical:0,borderRadius:e.borderRadiusLG,buttonIconOnlyFontSize:e.onlyIconSizeLG});return Vw(t,`${e.componentCls}-lg`)},qN=e=>{const{componentCls:t}=e;return{[t]:{[`&${t}-block`]:{width:"100%"}}}},GN=ip("Button",e=>{const t=OA(e);return[PN(t),VN(t),UN(t),HN(t),qN(t),FN(t),$N(t),rN(t)]},IA,{unitless:{fontWeight:!0,contentLineHeight:!0,contentLineHeightSM:!0,contentLineHeightLG:!0}});function ZN(e,t,i){const{focusElCls:a,focus:f,borderElCls:v}=i,g=v?"> *":"",u=["hover",f?"focus":null,"active"].filter(Boolean).map(E=>`&:${E} ${g}`).join(",");return{[`&-item:not(${t}-last-item)`]:{marginInlineEnd:e.calc(e.lineWidth).mul(-1).equal()},"&-item":Object.assign(Object.assign({[u]:{zIndex:2}},a?{[`&${a}`]:{zIndex:2}}:{}),{[`&[disabled] ${g}`]:{zIndex:0}})}}function XN(e,t,i){const{borderElCls:a}=i,f=a?`> ${a}`:"";return{[`&-item:not(${t}-first-item):not(${t}-last-item) ${f}`]:{borderRadius:0},[`&-item:not(${t}-last-item)${t}-first-item`]:{[`& ${f}, &${e}-sm ${f}, &${e}-lg ${f}`]:{borderStartEndRadius:0,borderEndEndRadius:0}},[`&-item:not(${t}-first-item)${t}-last-item`]:{[`& ${f}, &${e}-sm ${f}, &${e}-lg ${f}`]:{borderStartStartRadius:0,borderEndStartRadius:0}}}}function WN(e,t={focus:!0}){const{componentCls:i}=e,a=`${i}-compact`;return{[a]:Object.assign(Object.assign({},ZN(e,a,t)),XN(i,a,t))}}function YN(e,t){return{[`&-item:not(${t}-last-item)`]:{marginBottom:e.calc(e.lineWidth).mul(-1).equal()},"&-item":{"&:hover,&:focus,&:active":{zIndex:2},"&[disabled]":{zIndex:0}}}}function KN(e,t){return{[`&-item:not(${t}-first-item):not(${t}-last-item)`]:{borderRadius:0},[`&-item${t}-first-item:not(${t}-last-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderEndEndRadius:0,borderEndStartRadius:0}},[`&-item${t}-last-item:not(${t}-first-item)`]:{[`&, &${e}-sm, &${e}-lg`]:{borderStartStartRadius:0,borderStartEndRadius:0}}}}function QN(e){const t=`${e.componentCls}-compact-vertical`;return{[t]:Object.assign(Object.assign({},YN(e,t)),KN(e.componentCls,t))}}const JN=e=>{const{componentCls:t,colorPrimaryHover:i,lineWidth:a,calc:f}=e,v=f(a).mul(-1).equal(),g=u=>{const E=`${t}-compact${u?"-vertical":""}-item${t}-primary:not([disabled])`;return{[`${E} + ${E}::before`]:{position:"absolute",top:u?v:0,insetInlineStart:u?0:v,backgroundColor:i,content:'""',width:u?"100%":a,height:u?a:"100%"}}};return Object.assign(Object.assign({},g()),g(!0))},ej=Iw(["Button","compact"],e=>{const t=OA(e);return[WN(t),QN(t),JN(t)]},IA);var tj=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};function nj(e){if(typeof e=="object"&&e){let t=e==null?void 0:e.delay;return t=!Number.isNaN(t)&&typeof t=="number"?t:0,{loading:t<=0,delay:t}}return{loading:!!e,delay:0}}const rj={default:["default","outlined"],primary:["primary","solid"],dashed:["default","dashed"],link:["link","link"],text:["default","text"]},ij=Nt.forwardRef((e,t)=>{var i,a;const{loading:f=!1,prefixCls:v,color:g,variant:u,type:E,danger:P=!1,shape:I="default",size:B,styles:j,disabled:$,className:X,rootClassName:J,children:G,icon:le,iconPosition:oe="start",ghost:pe=!1,block:he=!1,htmlType:ae="button",classNames:ve,style:Se={},autoInsertSpace:ke,autoFocus:Le}=e,Re=tj(e,["loading","prefixCls","color","variant","type","danger","shape","size","styles","disabled","className","rootClassName","children","icon","iconPosition","ghost","block","htmlType","classNames","style","autoInsertSpace","autoFocus"]),me=E||"default",{button:Ae}=Nt.useContext(Ei),[He,We]=U.useMemo(()=>{if(g&&u)return[g,u];if(E||P){const te=rj[me]||[];return P?["danger",te[1]]:te}return Ae!=null&&Ae.color&&(Ae!=null&&Ae.variant)?[Ae.color,Ae.variant]:["default","outlined"]},[E,g,u,P,Ae==null?void 0:Ae.variant,Ae==null?void 0:Ae.color]),xe=He==="danger"?"dangerous":He,{getPrefixCls:et,direction:Qe,autoInsertSpace:Rt,className:we,style:tt,classNames:_t,styles:Pt}=HM("button"),At=(i=ke??Rt)!==null&&i!==void 0?i:!0,St=et("btn",v),[qt,Xe,mt]=GN(St),ft=U.useContext(i0),Ke=$??ft,Je=U.useContext(AA),Vt=U.useMemo(()=>nj(f),[f]),[$t,Kt]=U.useState(Vt.loading),[Gt,kt]=U.useState(!1),Qt=U.useRef(null),ln=dw(t,Qt),Sn=U.Children.count(G)===1&&!le&&!Qb(We),bn=U.useRef(!0);Nt.useEffect(()=>(bn.current=!1,()=>{bn.current=!0}),[]),U.useLayoutEffect(()=>{let te=null;Vt.delay>0?te=setTimeout(()=>{te=null,Kt(!0)},Vt.delay):Kt(Vt.loading);function ie(){te&&(clearTimeout(te),te=null)}return ie},[Vt.delay,Vt.loading]),U.useEffect(()=>{if(!Qt.current||!At)return;const te=Qt.current.textContent||"";Sn&&C1(te)?Gt||kt(!0):Gt&&kt(!1)}),U.useEffect(()=>{Le&&Qt.current&&Qt.current.focus()},[]);const gn=Nt.useCallback(te=>{var ie;if($t||Ke){te.preventDefault();return}(ie=e.onClick)===null||ie===void 0||ie.call(e,("href"in e,te))},[e.onClick,$t,Ke]),{compactSize:En,compactItemClassnames:Ln}=YB(St,Qe),Pn={large:"lg",small:"sm",middle:void 0},Hn=WB(te=>{var ie,de;return(de=(ie=B??En)!==null&&ie!==void 0?ie:Je)!==null&&de!==void 0?de:te}),or=Hn&&(a=Pn[Hn])!==null&&a!==void 0?a:"",dr=$t?"loading":le,sr=F0(Re,["navigate"]),Gn=Mn(St,Xe,mt,{[`${St}-${I}`]:I!=="default"&&I,[`${St}-${me}`]:me,[`${St}-dangerous`]:P,[`${St}-color-${xe}`]:xe,[`${St}-variant-${We}`]:We,[`${St}-${or}`]:or,[`${St}-icon-only`]:!G&&G!==0&&!!dr,[`${St}-background-ghost`]:pe&&!Qb(We),[`${St}-loading`]:$t,[`${St}-two-chinese-chars`]:Gt&&At&&!$t,[`${St}-block`]:he,[`${St}-rtl`]:Qe==="rtl",[`${St}-icon-end`]:oe==="end"},Ln,X,J,we),pr=Object.assign(Object.assign({},tt),Se),Jn=Mn(ve==null?void 0:ve.icon,_t.icon),br=Object.assign(Object.assign({},(j==null?void 0:j.icon)||{}),Pt.icon||{}),gr=le&&!$t?Nt.createElement(T1,{prefixCls:St,className:Jn,style:br},le):f&&typeof f=="object"&&f.icon?Nt.createElement(T1,{prefixCls:St,className:Jn,style:br},f.icon):Nt.createElement(nN,{existIcon:!!le,prefixCls:St,loading:$t,mount:bn.current}),Lr=G||G===0?tN(G,Sn&&At):null;if(sr.href!==void 0)return qt(Nt.createElement("a",Object.assign({},sr,{className:Mn(Gn,{[`${St}-disabled`]:Ke}),href:Ke?void 0:sr.href,style:pr,onClick:gn,ref:ln,tabIndex:Ke?-1:0}),gr,Lr));let Ge=Nt.createElement("button",Object.assign({},Re,{type:ae,className:Gn,style:pr,onClick:gn,disabled:Ke,ref:ln}),gr,Lr,Ln&&Nt.createElement(ej,{prefixCls:St}));return Qb(We)||(Ge=Nt.createElement(XB,{component:"Button",disabled:$t},Ge)),qt(Ge)}),Qy=ij;Qy.Group=JB;Qy.__ANT_BUTTON=!0;function nx(e){return!!(e!=null&&e.then)}const zA=e=>{const{type:t,children:i,prefixCls:a,buttonProps:f,close:v,autoFocus:g,emitEvent:u,isSilent:E,quitOnNullishReturnValue:P,actionFn:I}=e,B=U.useRef(!1),j=U.useRef(null),[$,X]=a0(!1),J=(...oe)=>{v==null||v.apply(void 0,oe)};U.useEffect(()=>{let oe=null;return g&&(oe=setTimeout(()=>{var pe;(pe=j.current)===null||pe===void 0||pe.focus({preventScroll:!0})})),()=>{oe&&clearTimeout(oe)}},[]);const G=oe=>{nx(oe)&&(X(!0),oe.then((...pe)=>{X(!1,!0),J.apply(void 0,pe),B.current=!1},pe=>{if(X(!1,!0),B.current=!1,!(E!=null&&E()))return Promise.reject(pe)}))},le=oe=>{if(B.current)return;if(B.current=!0,!I){J();return}let pe;if(u){if(pe=I(oe),P&&!nx(pe)){B.current=!1,J(oe);return}}else if(I.length)pe=I(v),B.current=!1;else if(pe=I(),!nx(pe)){J();return}G(pe)};return U.createElement(Qy,Object.assign({},PA(t),{onClick:le,loading:$,prefixCls:a},f,{ref:j}),i)},Jy=Nt.createContext({}),{Provider:DA}=Jy,bC=()=>{const{autoFocusButton:e,cancelButtonProps:t,cancelTextLocale:i,isSilent:a,mergedOkCancel:f,rootPrefixCls:v,close:g,onCancel:u,onConfirm:E}=U.useContext(Jy);return f?Nt.createElement(zA,{isSilent:a,actionFn:u,close:(...P)=>{g==null||g.apply(void 0,P),E==null||E(!1)},autoFocus:e==="cancel",buttonProps:t,prefixCls:`${v}-btn`},i):null},xC=()=>{const{autoFocusButton:e,close:t,isSilent:i,okButtonProps:a,rootPrefixCls:f,okTextLocale:v,okType:g,onConfirm:u,onOk:E}=U.useContext(Jy);return Nt.createElement(zA,{isSilent:i,type:g||"primary",actionFn:E,close:(...P)=>{t==null||t.apply(void 0,P),u==null||u(!0)},autoFocus:e==="ok",buttonProps:a,prefixCls:`${f}-btn`},v)};var LA=U.createContext(null),wC=[];function aj(e,t){var i=U.useState(function(){if(!_s())return null;var X=document.createElement("div");return X}),a=fn(i,1),f=a[0],v=U.useRef(!1),g=U.useContext(LA),u=U.useState(wC),E=fn(u,2),P=E[0],I=E[1],B=g||(v.current?void 0:function(X){I(function(J){var G=[X].concat(wn(J));return G})});function j(){f.parentElement||document.body.appendChild(f),v.current=!0}function $(){var X;(X=f.parentElement)===null||X===void 0||X.removeChild(f),v.current=!1}return t0(function(){return e?g?g(j):j():$(),$},[e]),t0(function(){P.length&&(P.forEach(function(X){return X()}),I(wC))},[P]),[f,B]}function oj(e){var t="rc-scrollbar-measure-".concat(Math.random().toString(36).substring(7)),i=document.createElement("div");i.id=t;var a=i.style;a.position="absolute",a.left="0",a.top="0",a.width="100px",a.height="100px",a.overflow="scroll";var f,v;if(e){var g=getComputedStyle(e);a.scrollbarColor=g.scrollbarColor,a.scrollbarWidth=g.scrollbarWidth;var u=getComputedStyle(e,"::-webkit-scrollbar"),E=parseInt(u.width,10),P=parseInt(u.height,10);try{var I=E?"width: ".concat(u.width,";"):"",B=P?"height: ".concat(u.height,";"):"";kh(`
#`.concat(t,`::-webkit-scrollbar {
`).concat(I,`
`).concat(B,`
}`),t)}catch(X){console.error(X),f=E,v=P}}document.body.appendChild(i);var j=e&&f&&!isNaN(f)?f:i.offsetWidth-i.clientWidth,$=e&&v&&!isNaN(v)?v:i.offsetHeight-i.clientHeight;return document.body.removeChild(i),Ay(t),{width:j,height:$}}function sj(e){return typeof document>"u"||!e||!(e instanceof Element)?{width:0,height:0}:oj(e)}function lj(){return document.body.scrollHeight>(window.innerHeight||document.documentElement.clientHeight)&&window.innerWidth>document.body.offsetWidth}var cj="rc-util-locker-".concat(Date.now()),SC=0;function uj(e){var t=!!e,i=U.useState(function(){return SC+=1,"".concat(cj,"_").concat(SC)}),a=fn(i,1),f=a[0];t0(function(){if(t){var v=sj(document.body).width,g=lj();kh(`
html body {
  overflow-y: hidden;
  `.concat(g?"width: calc(100% - ".concat(v,"px);"):"",`
}`),f)}else Ay(f);return function(){Ay(f)}},[t,f])}var hj=!1;function fj(e){return hj}var CC=function(t){return t===!1?!1:!_s()||!t?null:typeof t=="string"?document.querySelector(t):typeof t=="function"?t():t},dj=U.forwardRef(function(e,t){var i=e.open,a=e.autoLock,f=e.getContainer;e.debug;var v=e.autoDestroy,g=v===void 0?!0:v,u=e.children,E=U.useState(i),P=fn(E,2),I=P[0],B=P[1],j=I||i;U.useEffect(function(){(g||i)&&B(i)},[i,g]);var $=U.useState(function(){return CC(f)}),X=fn($,2),J=X[0],G=X[1];U.useEffect(function(){var me=CC(f);G(me??null)});var le=aj(j&&!J),oe=fn(le,2),pe=oe[0],he=oe[1],ae=J??pe;uj(a&&i&&_s()&&(ae===pe||ae===document.body));var ve=null;if(u&&pw(u)&&t){var Se=u;ve=Se.ref}var ke=dw(ve,t);if(!j||!_s()||J===void 0)return null;var Le=ae===!1||fj(),Re=u;return t&&(Re=U.cloneElement(u,{ref:ke})),U.createElement(LA.Provider,{value:he},Le?Re:Gy.createPortal(Re,ae))}),BA=U.createContext({});function pj(){var e=ct({},Dm);return e.useId}var TC=0,EC=pj();const mj=EC?function(t){var i=EC();return t||i}:function(t){var i=U.useState("ssr-id"),a=fn(i,2),f=a[0],v=a[1];return U.useEffect(function(){var g=TC;TC+=1,v("rc_unique_".concat(g))},[]),t||f};function MC(e,t,i){var a=t;return!a&&i&&(a="".concat(e,"-").concat(i)),a}function AC(e,t){var i=e["page".concat(t?"Y":"X","Offset")],a="scroll".concat(t?"Top":"Left");if(typeof i!="number"){var f=e.document;i=f.documentElement[a],typeof i!="number"&&(i=f.body[a])}return i}function gj(e){var t=e.getBoundingClientRect(),i={left:t.left,top:t.top},a=e.ownerDocument,f=a.defaultView||a.parentWindow;return i.left+=AC(f),i.top+=AC(f,!0),i}const yj=U.memo(function(e){var t=e.children;return t},function(e,t){var i=t.shouldUpdate;return!i});var _j={width:0,height:0,overflow:"hidden",outline:"none"},vj={outline:"none"},NA=Nt.forwardRef(function(e,t){var i=e.prefixCls,a=e.className,f=e.style,v=e.title,g=e.ariaId,u=e.footer,E=e.closable,P=e.closeIcon,I=e.onClose,B=e.children,j=e.bodyStyle,$=e.bodyProps,X=e.modalRender,J=e.onMouseDown,G=e.onMouseUp,le=e.holderRef,oe=e.visible,pe=e.forceRender,he=e.width,ae=e.height,ve=e.classNames,Se=e.styles,ke=Nt.useContext(BA),Le=ke.panel,Re=dw(le,Le),me=U.useRef(),Ae=U.useRef();Nt.useImperativeHandle(t,function(){return{focus:function(){var _t;(_t=me.current)===null||_t===void 0||_t.focus({preventScroll:!0})},changeActive:function(_t){var Pt=document,At=Pt.activeElement;_t&&At===Ae.current?me.current.focus({preventScroll:!0}):!_t&&At===me.current&&Ae.current.focus({preventScroll:!0})}}});var He={};he!==void 0&&(He.width=he),ae!==void 0&&(He.height=ae);var We=u?Nt.createElement("div",{className:Mn("".concat(i,"-footer"),ve==null?void 0:ve.footer),style:ct({},Se==null?void 0:Se.footer)},u):null,pt=v?Nt.createElement("div",{className:Mn("".concat(i,"-header"),ve==null?void 0:ve.header),style:ct({},Se==null?void 0:Se.header)},Nt.createElement("div",{className:"".concat(i,"-title"),id:g},v)):null,xe=U.useMemo(function(){return zn(E)==="object"&&E!==null?E:E?{closeIcon:P??Nt.createElement("span",{className:"".concat(i,"-close-x")})}:{}},[E,P,i]),et=B0(xe,!0),Qe=zn(E)==="object"&&E.disabled,Rt=E?Nt.createElement("button",Ti({type:"button",onClick:I,"aria-label":"Close"},et,{className:"".concat(i,"-close"),disabled:Qe}),xe.closeIcon):null,we=Nt.createElement("div",{className:Mn("".concat(i,"-content"),ve==null?void 0:ve.content),style:Se==null?void 0:Se.content},Rt,pt,Nt.createElement("div",Ti({className:Mn("".concat(i,"-body"),ve==null?void 0:ve.body),style:ct(ct({},j),Se==null?void 0:Se.body)},$),B),We);return Nt.createElement("div",{key:"dialog-element",role:"dialog","aria-labelledby":v?g:null,"aria-modal":"true",ref:Re,style:ct(ct({},f),He),className:Mn(i,a),onMouseDown:J,onMouseUp:G},Nt.createElement("div",{ref:me,tabIndex:0,style:vj},Nt.createElement(yj,{shouldUpdate:oe||pe},X?X(we):we)),Nt.createElement("div",{tabIndex:0,ref:Ae,style:_j}))}),jA=U.forwardRef(function(e,t){var i=e.prefixCls,a=e.title,f=e.style,v=e.className,g=e.visible,u=e.forceRender,E=e.destroyOnClose,P=e.motionName,I=e.ariaId,B=e.onVisibleChanged,j=e.mousePosition,$=U.useRef(),X=U.useState(),J=fn(X,2),G=J[0],le=J[1],oe={};G&&(oe.transformOrigin=G);function pe(){var he=gj($.current);le(j&&(j.x||j.y)?"".concat(j.x-he.left,"px ").concat(j.y-he.top,"px"):"")}return U.createElement(Wy,{visible:g,onVisibleChanged:B,onAppearPrepare:pe,onEnterPrepare:pe,forceRender:u,motionName:P,removeOnLeave:E,ref:$},function(he,ae){var ve=he.className,Se=he.style;return U.createElement(NA,Ti({},e,{ref:t,title:a,ariaId:I,prefixCls:i,holderRef:ae,style:ct(ct(ct({},Se),f),oe),className:Mn(v,ve)}))})});jA.displayName="Content";var bj=function(t){var i=t.prefixCls,a=t.style,f=t.visible,v=t.maskProps,g=t.motionName,u=t.className;return U.createElement(Wy,{key:"mask",visible:f,motionName:g,leavedClassName:"".concat(i,"-mask-hidden")},function(E,P){var I=E.className,B=E.style;return U.createElement("div",Ti({ref:P,style:ct(ct({},B),a),className:Mn("".concat(i,"-mask"),I,u)},v))})},xj=function(t){var i=t.prefixCls,a=i===void 0?"rc-dialog":i,f=t.zIndex,v=t.visible,g=v===void 0?!1:v,u=t.keyboard,E=u===void 0?!0:u,P=t.focusTriggerAfterClose,I=P===void 0?!0:P,B=t.wrapStyle,j=t.wrapClassName,$=t.wrapProps,X=t.onClose,J=t.afterOpenChange,G=t.afterClose,le=t.transitionName,oe=t.animation,pe=t.closable,he=pe===void 0?!0:pe,ae=t.mask,ve=ae===void 0?!0:ae,Se=t.maskTransitionName,ke=t.maskAnimation,Le=t.maskClosable,Re=Le===void 0?!0:Le,me=t.maskStyle,Ae=t.maskProps,He=t.rootClassName,We=t.classNames,pt=t.styles,xe=U.useRef(),et=U.useRef(),Qe=U.useRef(),Rt=U.useState(g),we=fn(Rt,2),tt=we[0],_t=we[1],Pt=mj();function At(){Yx(et.current,document.activeElement)||(xe.current=document.activeElement)}function St(){if(!Yx(et.current,document.activeElement)){var Gt;(Gt=Qe.current)===null||Gt===void 0||Gt.focus()}}function qt(Gt){if(Gt)St();else{if(_t(!1),ve&&xe.current&&I){try{xe.current.focus({preventScroll:!0})}catch{}xe.current=null}tt&&(G==null||G())}J==null||J(Gt)}function Xe(Gt){X==null||X(Gt)}var mt=U.useRef(!1),ft=U.useRef(),Ke=function(){clearTimeout(ft.current),mt.current=!0},Je=function(){ft.current=setTimeout(function(){mt.current=!1})},Vt=null;Re&&(Vt=function(kt){mt.current?mt.current=!1:et.current===kt.target&&Xe(kt)});function $t(Gt){if(E&&Gt.keyCode===x1.ESC){Gt.stopPropagation(),Xe(Gt);return}g&&Gt.keyCode===x1.TAB&&Qe.current.changeActive(!Gt.shiftKey)}U.useEffect(function(){g&&(_t(!0),At())},[g]),U.useEffect(function(){return function(){clearTimeout(ft.current)}},[]);var Kt=ct(ct(ct({zIndex:f},B),pt==null?void 0:pt.wrapper),{},{display:tt?null:"none"});return U.createElement("div",Ti({className:Mn("".concat(a,"-root"),He)},B0(t,{data:!0})),U.createElement(bj,{prefixCls:a,visible:ve&&g,motionName:MC(a,Se,ke),style:ct(ct({zIndex:f},me),pt==null?void 0:pt.mask),maskProps:Ae,className:We==null?void 0:We.mask}),U.createElement("div",Ti({tabIndex:-1,onKeyDown:$t,className:Mn("".concat(a,"-wrap"),j,We==null?void 0:We.wrapper),ref:et,onClick:Vt,style:Kt},$),U.createElement(jA,Ti({},t,{onMouseDown:Ke,onMouseUp:Je,ref:Qe,closable:he,ariaId:Pt,prefixCls:a,visible:g&&tt,onClose:Xe,onVisibleChanged:qt,motionName:MC(a,le,oe)}))))},FA=function(t){var i=t.visible,a=t.getContainer,f=t.forceRender,v=t.destroyOnClose,g=v===void 0?!1:v,u=t.afterClose,E=t.panelRef,P=U.useState(i),I=fn(P,2),B=I[0],j=I[1],$=U.useMemo(function(){return{panel:E}},[E]);return U.useEffect(function(){i&&j(!0)},[i]),!f&&g&&!B?null:U.createElement(BA.Provider,{value:$},U.createElement(dj,{open:i||f||B,autoDestroy:!1,getContainer:a,autoLock:i||B},U.createElement(xj,Ti({},t,{destroyOnClose:g,afterClose:function(){u==null||u(),j(!1)}}))))};FA.displayName="Dialog";var Bd="RC_FORM_INTERNAL_HOOKS",li=function(){el(!1,"Can not find FormContext. Please make sure you wrap Field under Form.")},Zm=U.createContext({getFieldValue:li,getFieldsValue:li,getFieldError:li,getFieldWarning:li,getFieldsError:li,isFieldsTouched:li,isFieldTouched:li,isFieldValidating:li,isFieldsValidating:li,resetFields:li,setFields:li,setFieldValue:li,setFieldsValue:li,validateFields:li,submit:li,getInternalHooks:function(){return li(),{dispatch:li,initEntityValue:li,registerField:li,useSubscribe:li,setInitialValues:li,destroyForm:li,setCallbacks:li,registerWatch:li,getFields:li,setValidateMessages:li,setPreserve:li,getInitialValue:li}}}),c0=U.createContext(null);function E1(e){return e==null?[]:Array.isArray(e)?e:[e]}function wj(e){return e&&!!e._init}function M1(){return{default:"Validation error on field %s",required:"%s is required",enum:"%s must be one of %s",whitespace:"%s cannot be empty",date:{format:"%s date %s is invalid for format %s",parse:"%s date could not be parsed, %s is invalid ",invalid:"%s date %s is invalid"},types:{string:"%s is not a %s",method:"%s is not a %s (function)",array:"%s is not an %s",object:"%s is not an %s",number:"%s is not a %s",date:"%s is not a %s",boolean:"%s is not a %s",integer:"%s is not an %s",float:"%s is not a %s",regexp:"%s is not a valid %s",email:"%s is not a valid %s",url:"%s is not a valid %s",hex:"%s is not a valid %s"},string:{len:"%s must be exactly %s characters",min:"%s must be at least %s characters",max:"%s cannot be longer than %s characters",range:"%s must be between %s and %s characters"},number:{len:"%s must equal %s",min:"%s cannot be less than %s",max:"%s cannot be greater than %s",range:"%s must be between %s and %s"},array:{len:"%s must be exactly %s in length",min:"%s cannot be less than %s in length",max:"%s cannot be greater than %s in length",range:"%s must be between %s and %s in length"},pattern:{mismatch:"%s value %s does not match pattern %s"},clone:function(){var t=JSON.parse(JSON.stringify(this));return t.clone=this.clone,t}}}var A1=M1();function Sj(e){try{return Function.toString.call(e).indexOf("[native code]")!==-1}catch{return typeof e=="function"}}function Cj(e,t,i){if(mw())return Reflect.construct.apply(null,arguments);var a=[null];a.push.apply(a,t);var f=new(e.bind.apply(e,a));return i&&Ty(f,i.prototype),f}function P1(e){var t=typeof Map=="function"?new Map:void 0;return P1=function(a){if(a===null||!Sj(a))return a;if(typeof a!="function")throw new TypeError("Super expression must either be null or a function");if(t!==void 0){if(t.has(a))return t.get(a);t.set(a,f)}function f(){return Cj(a,arguments,Ey(this).constructor)}return f.prototype=Object.create(a.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),Ty(f,a)},P1(e)}var Tj=/%[sdj%]/g,Ej=function(){};function R1(e){if(!e||!e.length)return null;var t={};return e.forEach(function(i){var a=i.field;t[a]=t[a]||[],t[a].push(i)}),t}function Js(e){for(var t=arguments.length,i=new Array(t>1?t-1:0),a=1;a<t;a++)i[a-1]=arguments[a];var f=0,v=i.length;if(typeof e=="function")return e.apply(null,i);if(typeof e=="string"){var g=e.replace(Tj,function(u){if(u==="%%")return"%";if(f>=v)return u;switch(u){case"%s":return String(i[f++]);case"%d":return Number(i[f++]);case"%j":try{return JSON.stringify(i[f++])}catch{return"[Circular]"}break;default:return u}});return g}return e}function Mj(e){return e==="string"||e==="url"||e==="hex"||e==="email"||e==="date"||e==="pattern"}function Ba(e,t){return!!(e==null||t==="array"&&Array.isArray(e)&&!e.length||Mj(t)&&typeof e=="string"&&!e)}function Aj(e,t,i){var a=[],f=0,v=e.length;function g(u){a.push.apply(a,wn(u||[])),f++,f===v&&i(a)}e.forEach(function(u){t(u,g)})}function PC(e,t,i){var a=0,f=e.length;function v(g){if(g&&g.length){i(g);return}var u=a;a=a+1,u<f?t(e[u],v):i([])}v([])}function Pj(e){var t=[];return Object.keys(e).forEach(function(i){t.push.apply(t,wn(e[i]||[]))}),t}var RC=function(e){np(i,e);var t=rp(i);function i(a,f){var v;return Xa(this,i),v=t.call(this,"Async Validation Error"),ut(ur(v),"errors",void 0),ut(ur(v),"fields",void 0),v.errors=a,v.fields=f,v}return Wa(i)}(P1(Error));function Rj(e,t,i,a,f){if(t.first){var v=new Promise(function(j,$){var X=function(le){return a(le),le.length?$(new RC(le,R1(le))):j(f)},J=Pj(e);PC(J,i,X)});return v.catch(function(j){return j}),v}var g=t.firstFields===!0?Object.keys(e):t.firstFields||[],u=Object.keys(e),E=u.length,P=0,I=[],B=new Promise(function(j,$){var X=function(G){if(I.push.apply(I,G),P++,P===E)return a(I),I.length?$(new RC(I,R1(I))):j(f)};u.length||(a(I),j(f)),u.forEach(function(J){var G=e[J];g.indexOf(J)!==-1?PC(G,i,X):Aj(G,i,X)})});return B.catch(function(j){return j}),B}function Oj(e){return!!(e&&e.message!==void 0)}function Ij(e,t){for(var i=e,a=0;a<t.length;a++){if(i==null)return i;i=i[t[a]]}return i}function OC(e,t){return function(i){var a;return e.fullFields?a=Ij(t,e.fullFields):a=t[i.field||e.fullField],Oj(i)?(i.field=i.field||e.fullField,i.fieldValue=a,i):{message:typeof i=="function"?i():i,fieldValue:a,field:i.field||e.fullField}}}function IC(e,t){if(t){for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];zn(a)==="object"&&zn(e[i])==="object"?e[i]=ct(ct({},e[i]),a):e[i]=a}}return e}var gm="enum",kj=function(t,i,a,f,v){t[gm]=Array.isArray(t[gm])?t[gm]:[],t[gm].indexOf(i)===-1&&f.push(Js(v.messages[gm],t.fullField,t[gm].join(", ")))},zj=function(t,i,a,f,v){if(t.pattern){if(t.pattern instanceof RegExp)t.pattern.lastIndex=0,t.pattern.test(i)||f.push(Js(v.messages.pattern.mismatch,t.fullField,i,t.pattern));else if(typeof t.pattern=="string"){var g=new RegExp(t.pattern);g.test(i)||f.push(Js(v.messages.pattern.mismatch,t.fullField,i,t.pattern))}}},Dj=function(t,i,a,f,v){var g=typeof t.len=="number",u=typeof t.min=="number",E=typeof t.max=="number",P=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,I=i,B=null,j=typeof i=="number",$=typeof i=="string",X=Array.isArray(i);if(j?B="number":$?B="string":X&&(B="array"),!B)return!1;X&&(I=i.length),$&&(I=i.replace(P,"_").length),g?I!==t.len&&f.push(Js(v.messages[B].len,t.fullField,t.len)):u&&!E&&I<t.min?f.push(Js(v.messages[B].min,t.fullField,t.min)):E&&!u&&I>t.max?f.push(Js(v.messages[B].max,t.fullField,t.max)):u&&E&&(I<t.min||I>t.max)&&f.push(Js(v.messages[B].range,t.fullField,t.min,t.max))},$A=function(t,i,a,f,v,g){t.required&&(!a.hasOwnProperty(t.field)||Ba(i,g||t.type))&&f.push(Js(v.messages.required,t.fullField))},nv;const Lj=function(){if(nv)return nv;var e="[a-fA-F\\d:]",t=function(ve){return ve&&ve.includeBoundaries?"(?:(?<=\\s|^)(?=".concat(e,")|(?<=").concat(e,")(?=\\s|$))"):""},i="(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)(?:\\.(?:25[0-5]|2[0-4]\\d|1\\d\\d|[1-9]\\d|\\d)){3}",a="[a-fA-F\\d]{1,4}",f=["(?:".concat(a,":){7}(?:").concat(a,"|:)"),"(?:".concat(a,":){6}(?:").concat(i,"|:").concat(a,"|:)"),"(?:".concat(a,":){5}(?::").concat(i,"|(?::").concat(a,"){1,2}|:)"),"(?:".concat(a,":){4}(?:(?::").concat(a,"){0,1}:").concat(i,"|(?::").concat(a,"){1,3}|:)"),"(?:".concat(a,":){3}(?:(?::").concat(a,"){0,2}:").concat(i,"|(?::").concat(a,"){1,4}|:)"),"(?:".concat(a,":){2}(?:(?::").concat(a,"){0,3}:").concat(i,"|(?::").concat(a,"){1,5}|:)"),"(?:".concat(a,":){1}(?:(?::").concat(a,"){0,4}:").concat(i,"|(?::").concat(a,"){1,6}|:)"),"(?::(?:(?::".concat(a,"){0,5}:").concat(i,"|(?::").concat(a,"){1,7}|:))")],v="(?:%[0-9a-zA-Z]{1,})?",g="(?:".concat(f.join("|"),")").concat(v),u=new RegExp("(?:^".concat(i,"$)|(?:^").concat(g,"$)")),E=new RegExp("^".concat(i,"$")),P=new RegExp("^".concat(g,"$")),I=function(ve){return ve&&ve.exact?u:new RegExp("(?:".concat(t(ve)).concat(i).concat(t(ve),")|(?:").concat(t(ve)).concat(g).concat(t(ve),")"),"g")};I.v4=function(ae){return ae&&ae.exact?E:new RegExp("".concat(t(ae)).concat(i).concat(t(ae)),"g")},I.v6=function(ae){return ae&&ae.exact?P:new RegExp("".concat(t(ae)).concat(g).concat(t(ae)),"g")};var B="(?:(?:[a-z]+:)?//)",j="(?:\\S+(?::\\S*)?@)?",$=I.v4().source,X=I.v6().source,J="(?:(?:[a-z\\u00a1-\\uffff0-9][-_]*)*[a-z\\u00a1-\\uffff0-9]+)",G="(?:\\.(?:[a-z\\u00a1-\\uffff0-9]-*)*[a-z\\u00a1-\\uffff0-9]+)*",le="(?:\\.(?:[a-z\\u00a1-\\uffff]{2,}))",oe="(?::\\d{2,5})?",pe='(?:[/?#][^\\s"]*)?',he="(?:".concat(B,"|www\\.)").concat(j,"(?:localhost|").concat($,"|").concat(X,"|").concat(J).concat(G).concat(le,")").concat(oe).concat(pe);return nv=new RegExp("(?:^".concat(he,"$)"),"i"),nv};var kC={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+\.)+[a-zA-Z\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]{2,}))$/,hex:/^#?([a-f0-9]{6}|[a-f0-9]{3})$/i},hy={integer:function(t){return hy.number(t)&&parseInt(t,10)===t},float:function(t){return hy.number(t)&&!hy.integer(t)},array:function(t){return Array.isArray(t)},regexp:function(t){if(t instanceof RegExp)return!0;try{return!!new RegExp(t)}catch{return!1}},date:function(t){return typeof t.getTime=="function"&&typeof t.getMonth=="function"&&typeof t.getYear=="function"&&!isNaN(t.getTime())},number:function(t){return isNaN(t)?!1:typeof t=="number"},object:function(t){return zn(t)==="object"&&!hy.array(t)},method:function(t){return typeof t=="function"},email:function(t){return typeof t=="string"&&t.length<=320&&!!t.match(kC.email)},url:function(t){return typeof t=="string"&&t.length<=2048&&!!t.match(Lj())},hex:function(t){return typeof t=="string"&&!!t.match(kC.hex)}},Bj=function(t,i,a,f,v){if(t.required&&i===void 0){$A(t,i,a,f,v);return}var g=["integer","float","array","regexp","object","method","email","number","date","url","hex"],u=t.type;g.indexOf(u)>-1?hy[u](i)||f.push(Js(v.messages.types[u],t.fullField,t.type)):u&&zn(i)!==t.type&&f.push(Js(v.messages.types[u],t.fullField,t.type))},Nj=function(t,i,a,f,v){(/^\s+$/.test(i)||i==="")&&f.push(Js(v.messages.whitespace,t.fullField))};const vr={required:$A,whitespace:Nj,type:Bj,range:Dj,enum:kj,pattern:zj};var jj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v)}a(g)},Fj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(i==null&&!t.required)return a();vr.required(t,i,f,g,v,"array"),i!=null&&(vr.type(t,i,f,g,v),vr.range(t,i,f,g,v))}a(g)},$j=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&vr.type(t,i,f,g,v)}a(g)},Vj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i,"date")&&!t.required)return a();if(vr.required(t,i,f,g,v),!Ba(i,"date")){var E;i instanceof Date?E=i:E=new Date(i),vr.type(t,E,f,g,v),E&&vr.range(t,E.getTime(),f,g,v)}}a(g)},Uj="enum",Hj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&vr[Uj](t,i,f,g,v)}a(g)},qj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&(vr.type(t,i,f,g,v),vr.range(t,i,f,g,v))}a(g)},Gj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&(vr.type(t,i,f,g,v),vr.range(t,i,f,g,v))}a(g)},Zj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&vr.type(t,i,f,g,v)}a(g)},Xj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(i===""&&(i=void 0),Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&(vr.type(t,i,f,g,v),vr.range(t,i,f,g,v))}a(g)},Wj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),i!==void 0&&vr.type(t,i,f,g,v)}a(g)},Yj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i,"string")&&!t.required)return a();vr.required(t,i,f,g,v),Ba(i,"string")||vr.pattern(t,i,f,g,v)}a(g)},Kj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i)&&!t.required)return a();vr.required(t,i,f,g,v),Ba(i)||vr.type(t,i,f,g,v)}a(g)},Qj=function(t,i,a,f,v){var g=[],u=Array.isArray(i)?"array":zn(i);vr.required(t,i,f,g,v,u),a(g)},Jj=function(t,i,a,f,v){var g=[],u=t.required||!t.required&&f.hasOwnProperty(t.field);if(u){if(Ba(i,"string")&&!t.required)return a();vr.required(t,i,f,g,v,"string"),Ba(i,"string")||(vr.type(t,i,f,g,v),vr.range(t,i,f,g,v),vr.pattern(t,i,f,g,v),t.whitespace===!0&&vr.whitespace(t,i,f,g,v))}a(g)},rx=function(t,i,a,f,v){var g=t.type,u=[],E=t.required||!t.required&&f.hasOwnProperty(t.field);if(E){if(Ba(i,g)&&!t.required)return a();vr.required(t,i,f,u,v,g),Ba(i,g)||vr.type(t,i,f,u,v)}a(u)};const gy={string:Jj,method:Zj,number:Xj,boolean:$j,regexp:Kj,integer:Gj,float:qj,array:Fj,object:Wj,enum:Hj,pattern:Yj,date:Vj,url:rx,hex:rx,email:rx,required:Qj,any:jj};var e_=function(){function e(t){Xa(this,e),ut(this,"rules",null),ut(this,"_messages",A1),this.define(t)}return Wa(e,[{key:"define",value:function(i){var a=this;if(!i)throw new Error("Cannot configure a schema with no rules");if(zn(i)!=="object"||Array.isArray(i))throw new Error("Rules must be an object");this.rules={},Object.keys(i).forEach(function(f){var v=i[f];a.rules[f]=Array.isArray(v)?v:[v]})}},{key:"messages",value:function(i){return i&&(this._messages=IC(M1(),i)),this._messages}},{key:"validate",value:function(i){var a=this,f=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},v=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){},g=i,u=f,E=v;if(typeof u=="function"&&(E=u,u={}),!this.rules||Object.keys(this.rules).length===0)return E&&E(null,g),Promise.resolve(g);function P(X){var J=[],G={};function le(pe){if(Array.isArray(pe)){var he;J=(he=J).concat.apply(he,wn(pe))}else J.push(pe)}for(var oe=0;oe<X.length;oe++)le(X[oe]);J.length?(G=R1(J),E(J,G)):E(null,g)}if(u.messages){var I=this.messages();I===A1&&(I=M1()),IC(I,u.messages),u.messages=I}else u.messages=this.messages();var B={},j=u.keys||Object.keys(this.rules);j.forEach(function(X){var J=a.rules[X],G=g[X];J.forEach(function(le){var oe=le;typeof oe.transform=="function"&&(g===i&&(g=ct({},g)),G=g[X]=oe.transform(G),G!=null&&(oe.type=oe.type||(Array.isArray(G)?"array":zn(G)))),typeof oe=="function"?oe={validator:oe}:oe=ct({},oe),oe.validator=a.getValidationMethod(oe),oe.validator&&(oe.field=X,oe.fullField=oe.fullField||X,oe.type=a.getType(oe),B[X]=B[X]||[],B[X].push({rule:oe,value:G,source:g,field:X}))})});var $={};return Rj(B,u,function(X,J){var G=X.rule,le=(G.type==="object"||G.type==="array")&&(zn(G.fields)==="object"||zn(G.defaultField)==="object");le=le&&(G.required||!G.required&&X.value),G.field=X.field;function oe(Se,ke){return ct(ct({},ke),{},{fullField:"".concat(G.fullField,".").concat(Se),fullFields:G.fullFields?[].concat(wn(G.fullFields),[Se]):[Se]})}function pe(){var Se=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],ke=Array.isArray(Se)?Se:[Se];!u.suppressWarning&&ke.length&&e.warning("async-validator:",ke),ke.length&&G.message!==void 0&&(ke=[].concat(G.message));var Le=ke.map(OC(G,g));if(u.first&&Le.length)return $[G.field]=1,J(Le);if(!le)J(Le);else{if(G.required&&!X.value)return G.message!==void 0?Le=[].concat(G.message).map(OC(G,g)):u.error&&(Le=[u.error(G,Js(u.messages.required,G.field))]),J(Le);var Re={};G.defaultField&&Object.keys(X.value).map(function(He){Re[He]=G.defaultField}),Re=ct(ct({},Re),X.rule.fields);var me={};Object.keys(Re).forEach(function(He){var We=Re[He],pt=Array.isArray(We)?We:[We];me[He]=pt.map(oe.bind(null,He))});var Ae=new e(me);Ae.messages(u.messages),X.rule.options&&(X.rule.options.messages=u.messages,X.rule.options.error=u.error),Ae.validate(X.value,X.rule.options||u,function(He){var We=[];Le&&Le.length&&We.push.apply(We,wn(Le)),He&&He.length&&We.push.apply(We,wn(He)),J(We.length?We:null)})}}var he;if(G.asyncValidator)he=G.asyncValidator(G,X.value,pe,X.source,u);else if(G.validator){try{he=G.validator(G,X.value,pe,X.source,u)}catch(Se){var ae,ve;(ae=(ve=console).error)===null||ae===void 0||ae.call(ve,Se),u.suppressValidatorError||setTimeout(function(){throw Se},0),pe(Se.message)}he===!0?pe():he===!1?pe(typeof G.message=="function"?G.message(G.fullField||G.field):G.message||"".concat(G.fullField||G.field," fails")):he instanceof Array?pe(he):he instanceof Error&&pe(he.message)}he&&he.then&&he.then(function(){return pe()},function(Se){return pe(Se)})},function(X){P(X)},g)}},{key:"getType",value:function(i){if(i.type===void 0&&i.pattern instanceof RegExp&&(i.type="pattern"),typeof i.validator!="function"&&i.type&&!gy.hasOwnProperty(i.type))throw new Error(Js("Unknown rule type %s",i.type));return i.type||"string"}},{key:"getValidationMethod",value:function(i){if(typeof i.validator=="function")return i.validator;var a=Object.keys(i),f=a.indexOf("message");return f!==-1&&a.splice(f,1),a.length===1&&a[0]==="required"?gy.required:gy[this.getType(i)]||void 0}}]),e}();ut(e_,"register",function(t,i){if(typeof i!="function")throw new Error("Cannot register a validator by type, validator is not a function");gy[t]=i});ut(e_,"warning",Ej);ut(e_,"messages",A1);ut(e_,"validators",gy);var Ys="'${name}' is not a valid ${type}",VA={default:"Validation error on field '${name}'",required:"'${name}' is required",enum:"'${name}' must be one of [${enum}]",whitespace:"'${name}' cannot be empty",date:{format:"'${name}' is invalid for format date",parse:"'${name}' could not be parsed as date",invalid:"'${name}' is invalid date"},types:{string:Ys,method:Ys,array:Ys,object:Ys,number:Ys,date:Ys,boolean:Ys,integer:Ys,float:Ys,regexp:Ys,email:Ys,url:Ys,hex:Ys},string:{len:"'${name}' must be exactly ${len} characters",min:"'${name}' must be at least ${min} characters",max:"'${name}' cannot be longer than ${max} characters",range:"'${name}' must be between ${min} and ${max} characters"},number:{len:"'${name}' must equal ${len}",min:"'${name}' cannot be less than ${min}",max:"'${name}' cannot be greater than ${max}",range:"'${name}' must be between ${min} and ${max}"},array:{len:"'${name}' must be exactly ${len} in length",min:"'${name}' cannot be less than ${min} in length",max:"'${name}' cannot be greater than ${max} in length",range:"'${name}' must be between ${min} and ${max} in length"},pattern:{mismatch:"'${name}' does not match pattern ${pattern}"}},zC=e_;function eF(e,t){return e.replace(/\\?\$\{\w+\}/g,function(i){if(i.startsWith("\\"))return i.slice(1);var a=i.slice(2,-1);return t[a]})}var DC="CODE_LOGIC_ERROR";function O1(e,t,i,a,f){return I1.apply(this,arguments)}function I1(){return I1=ap(Zo().mark(function e(t,i,a,f,v){var g,u,E,P,I,B,j,$,X;return Zo().wrap(function(G){for(;;)switch(G.prev=G.next){case 0:return g=ct({},a),delete g.ruleIndex,zC.warning=function(){},g.validator&&(u=g.validator,g.validator=function(){try{return u.apply(void 0,arguments)}catch(le){return console.error(le),Promise.reject(DC)}}),E=null,g&&g.type==="array"&&g.defaultField&&(E=g.defaultField,delete g.defaultField),P=new zC(ut({},t,[g])),I=Cm(VA,f.validateMessages),P.messages(I),B=[],G.prev=10,G.next=13,Promise.resolve(P.validate(ut({},t,i),ct({},f)));case 13:G.next=18;break;case 15:G.prev=15,G.t0=G.catch(10),G.t0.errors&&(B=G.t0.errors.map(function(le,oe){var pe=le.message,he=pe===DC?I.default:pe;return U.isValidElement(he)?U.cloneElement(he,{key:"error_".concat(oe)}):he}));case 18:if(!(!B.length&&E)){G.next=23;break}return G.next=21,Promise.all(i.map(function(le,oe){return O1("".concat(t,".").concat(oe),le,E,f,v)}));case 21:return j=G.sent,G.abrupt("return",j.reduce(function(le,oe){return[].concat(wn(le),wn(oe))},[]));case 23:return $=ct(ct({},a),{},{name:t,enum:(a.enum||[]).join(", ")},v),X=B.map(function(le){return typeof le=="string"?eF(le,$):le}),G.abrupt("return",X);case 26:case"end":return G.stop()}},e,null,[[10,15]])})),I1.apply(this,arguments)}function tF(e,t,i,a,f,v){var g=e.join("."),u=i.map(function(I,B){var j=I.validator,$=ct(ct({},I),{},{ruleIndex:B});return j&&($.validator=function(X,J,G){var le=!1,oe=function(){for(var ae=arguments.length,ve=new Array(ae),Se=0;Se<ae;Se++)ve[Se]=arguments[Se];Promise.resolve().then(function(){el(!le,"Your validator function has already return a promise. `callback` will be ignored."),le||G.apply(void 0,ve)})},pe=j(X,J,oe);le=pe&&typeof pe.then=="function"&&typeof pe.catch=="function",el(le,"`callback` is deprecated. Please return a promise instead."),le&&pe.then(function(){G()}).catch(function(he){G(he||" ")})}),$}).sort(function(I,B){var j=I.warningOnly,$=I.ruleIndex,X=B.warningOnly,J=B.ruleIndex;return!!j==!!X?$-J:j?1:-1}),E;if(f===!0)E=new Promise(function(){var I=ap(Zo().mark(function B(j,$){var X,J,G;return Zo().wrap(function(oe){for(;;)switch(oe.prev=oe.next){case 0:X=0;case 1:if(!(X<u.length)){oe.next=12;break}return J=u[X],oe.next=5,O1(g,t,J,a,v);case 5:if(G=oe.sent,!G.length){oe.next=9;break}return $([{errors:G,rule:J}]),oe.abrupt("return");case 9:X+=1,oe.next=1;break;case 12:j([]);case 13:case"end":return oe.stop()}},B)}));return function(B,j){return I.apply(this,arguments)}}());else{var P=u.map(function(I){return O1(g,t,I,a,v).then(function(B){return{errors:B,rule:I}})});E=(f?rF(P):nF(P)).then(function(I){return Promise.reject(I)})}return E.catch(function(I){return I}),E}function nF(e){return k1.apply(this,arguments)}function k1(){return k1=ap(Zo().mark(function e(t){return Zo().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",Promise.all(t).then(function(f){var v,g=(v=[]).concat.apply(v,wn(f));return g}));case 1:case"end":return a.stop()}},e)})),k1.apply(this,arguments)}function rF(e){return z1.apply(this,arguments)}function z1(){return z1=ap(Zo().mark(function e(t){var i;return Zo().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return i=0,f.abrupt("return",new Promise(function(v){t.forEach(function(g){g.then(function(u){u.errors.length&&v([u]),i+=1,i===t.length&&v([])})})}));case 2:case"end":return f.stop()}},e)})),z1.apply(this,arguments)}function ia(e){return E1(e)}function LC(e,t){var i={};return t.forEach(function(a){var f=ku(e,a);i=Mc(i,a,f)}),i}function Im(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return e&&e.some(function(a){return UA(t,a,i)})}function UA(e,t){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return!e||!t||!i&&e.length!==t.length?!1:t.every(function(a,f){return e[f]===a})}function iF(e,t){if(e===t)return!0;if(!e&&t||e&&!t||!e||!t||zn(e)!=="object"||zn(t)!=="object")return!1;var i=Object.keys(e),a=Object.keys(t),f=new Set([].concat(i,a));return wn(f).every(function(v){var g=e[v],u=t[v];return typeof g=="function"&&typeof u=="function"?!0:g===u})}function aF(e){var t=arguments.length<=1?void 0:arguments[1];return t&&t.target&&zn(t.target)==="object"&&e in t.target?t.target[e]:t}function BC(e,t,i){var a=e.length;if(t<0||t>=a||i<0||i>=a)return e;var f=e[t],v=t-i;return v>0?[].concat(wn(e.slice(0,i)),[f],wn(e.slice(i,t)),wn(e.slice(t+1,a))):v<0?[].concat(wn(e.slice(0,t)),wn(e.slice(t+1,i+1)),[f],wn(e.slice(i+1,a))):e}var oF=["name"],Pl=[];function ix(e,t,i,a,f,v){return typeof e=="function"?e(t,i,"source"in v?{source:v.source}:{}):a!==f}var Uw=function(e){np(i,e);var t=rp(i);function i(a){var f;if(Xa(this,i),f=t.call(this,a),ut(ur(f),"state",{resetCount:0}),ut(ur(f),"cancelRegisterFunc",null),ut(ur(f),"mounted",!1),ut(ur(f),"touched",!1),ut(ur(f),"dirty",!1),ut(ur(f),"validatePromise",void 0),ut(ur(f),"prevValidating",void 0),ut(ur(f),"errors",Pl),ut(ur(f),"warnings",Pl),ut(ur(f),"cancelRegister",function(){var E=f.props,P=E.preserve,I=E.isListField,B=E.name;f.cancelRegisterFunc&&f.cancelRegisterFunc(I,P,ia(B)),f.cancelRegisterFunc=null}),ut(ur(f),"getNamePath",function(){var E=f.props,P=E.name,I=E.fieldContext,B=I.prefixName,j=B===void 0?[]:B;return P!==void 0?[].concat(wn(j),wn(P)):[]}),ut(ur(f),"getRules",function(){var E=f.props,P=E.rules,I=P===void 0?[]:P,B=E.fieldContext;return I.map(function(j){return typeof j=="function"?j(B):j})}),ut(ur(f),"refresh",function(){f.mounted&&f.setState(function(E){var P=E.resetCount;return{resetCount:P+1}})}),ut(ur(f),"metaCache",null),ut(ur(f),"triggerMetaEvent",function(E){var P=f.props.onMetaChange;if(P){var I=ct(ct({},f.getMeta()),{},{destroy:E});Py(f.metaCache,I)||P(I),f.metaCache=I}else f.metaCache=null}),ut(ur(f),"onStoreChange",function(E,P,I){var B=f.props,j=B.shouldUpdate,$=B.dependencies,X=$===void 0?[]:$,J=B.onReset,G=I.store,le=f.getNamePath(),oe=f.getValue(E),pe=f.getValue(G),he=P&&Im(P,le);switch(I.type==="valueUpdate"&&I.source==="external"&&!Py(oe,pe)&&(f.touched=!0,f.dirty=!0,f.validatePromise=null,f.errors=Pl,f.warnings=Pl,f.triggerMetaEvent()),I.type){case"reset":if(!P||he){f.touched=!1,f.dirty=!1,f.validatePromise=void 0,f.errors=Pl,f.warnings=Pl,f.triggerMetaEvent(),J==null||J(),f.refresh();return}break;case"remove":{if(j&&ix(j,E,G,oe,pe,I)){f.reRender();return}break}case"setField":{var ae=I.data;if(he){"touched"in ae&&(f.touched=ae.touched),"validating"in ae&&!("originRCField"in ae)&&(f.validatePromise=ae.validating?Promise.resolve([]):null),"errors"in ae&&(f.errors=ae.errors||Pl),"warnings"in ae&&(f.warnings=ae.warnings||Pl),f.dirty=!0,f.triggerMetaEvent(),f.reRender();return}else if("value"in ae&&Im(P,le,!0)){f.reRender();return}if(j&&!le.length&&ix(j,E,G,oe,pe,I)){f.reRender();return}break}case"dependenciesUpdate":{var ve=X.map(ia);if(ve.some(function(Se){return Im(I.relatedFields,Se)})){f.reRender();return}break}default:if(he||(!X.length||le.length||j)&&ix(j,E,G,oe,pe,I)){f.reRender();return}break}j===!0&&f.reRender()}),ut(ur(f),"validateRules",function(E){var P=f.getNamePath(),I=f.getValue(),B=E||{},j=B.triggerName,$=B.validateOnly,X=$===void 0?!1:$,J=Promise.resolve().then(ap(Zo().mark(function G(){var le,oe,pe,he,ae,ve,Se;return Zo().wrap(function(Le){for(;;)switch(Le.prev=Le.next){case 0:if(f.mounted){Le.next=2;break}return Le.abrupt("return",[]);case 2:if(le=f.props,oe=le.validateFirst,pe=oe===void 0?!1:oe,he=le.messageVariables,ae=le.validateDebounce,ve=f.getRules(),j&&(ve=ve.filter(function(Re){return Re}).filter(function(Re){var me=Re.validateTrigger;if(!me)return!0;var Ae=E1(me);return Ae.includes(j)})),!(ae&&j)){Le.next=10;break}return Le.next=8,new Promise(function(Re){setTimeout(Re,ae)});case 8:if(f.validatePromise===J){Le.next=10;break}return Le.abrupt("return",[]);case 10:return Se=tF(P,I,ve,E,pe,he),Se.catch(function(Re){return Re}).then(function(){var Re=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Pl;if(f.validatePromise===J){var me;f.validatePromise=null;var Ae=[],He=[];(me=Re.forEach)===null||me===void 0||me.call(Re,function(We){var pt=We.rule.warningOnly,xe=We.errors,et=xe===void 0?Pl:xe;pt?He.push.apply(He,wn(et)):Ae.push.apply(Ae,wn(et))}),f.errors=Ae,f.warnings=He,f.triggerMetaEvent(),f.reRender()}}),Le.abrupt("return",Se);case 13:case"end":return Le.stop()}},G)})));return X||(f.validatePromise=J,f.dirty=!0,f.errors=Pl,f.warnings=Pl,f.triggerMetaEvent(),f.reRender()),J}),ut(ur(f),"isFieldValidating",function(){return!!f.validatePromise}),ut(ur(f),"isFieldTouched",function(){return f.touched}),ut(ur(f),"isFieldDirty",function(){if(f.dirty||f.props.initialValue!==void 0)return!0;var E=f.props.fieldContext,P=E.getInternalHooks(Bd),I=P.getInitialValue;return I(f.getNamePath())!==void 0}),ut(ur(f),"getErrors",function(){return f.errors}),ut(ur(f),"getWarnings",function(){return f.warnings}),ut(ur(f),"isListField",function(){return f.props.isListField}),ut(ur(f),"isList",function(){return f.props.isList}),ut(ur(f),"isPreserve",function(){return f.props.preserve}),ut(ur(f),"getMeta",function(){f.prevValidating=f.isFieldValidating();var E={touched:f.isFieldTouched(),validating:f.prevValidating,errors:f.errors,warnings:f.warnings,name:f.getNamePath(),validated:f.validatePromise===null};return E}),ut(ur(f),"getOnlyChild",function(E){if(typeof E=="function"){var P=f.getMeta();return ct(ct({},f.getOnlyChild(E(f.getControlled(),P,f.props.fieldContext))),{},{isFunction:!0})}var I=Zx(E);return I.length!==1||!U.isValidElement(I[0])?{child:I,isFunction:!1}:{child:I[0],isFunction:!1}}),ut(ur(f),"getValue",function(E){var P=f.props.fieldContext.getFieldsValue,I=f.getNamePath();return ku(E||P(!0),I)}),ut(ur(f),"getControlled",function(){var E=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},P=f.props,I=P.name,B=P.trigger,j=P.validateTrigger,$=P.getValueFromEvent,X=P.normalize,J=P.valuePropName,G=P.getValueProps,le=P.fieldContext,oe=j!==void 0?j:le.validateTrigger,pe=f.getNamePath(),he=le.getInternalHooks,ae=le.getFieldsValue,ve=he(Bd),Se=ve.dispatch,ke=f.getValue(),Le=G||function(We){return ut({},J,We)},Re=E[B],me=I!==void 0?Le(ke):{},Ae=ct(ct({},E),me);Ae[B]=function(){f.touched=!0,f.dirty=!0,f.triggerMetaEvent();for(var We,pt=arguments.length,xe=new Array(pt),et=0;et<pt;et++)xe[et]=arguments[et];$?We=$.apply(void 0,xe):We=aF.apply(void 0,[J].concat(xe)),X&&(We=X(We,ke,ae(!0))),We!==ke&&Se({type:"updateValue",namePath:pe,value:We}),Re&&Re.apply(void 0,xe)};var He=E1(oe||[]);return He.forEach(function(We){var pt=Ae[We];Ae[We]=function(){pt&&pt.apply(void 0,arguments);var xe=f.props.rules;xe&&xe.length&&Se({type:"validateField",namePath:pe,triggerName:We})}}),Ae}),a.fieldContext){var v=a.fieldContext.getInternalHooks,g=v(Bd),u=g.initEntityValue;u(ur(f))}return f}return Wa(i,[{key:"componentDidMount",value:function(){var f=this.props,v=f.shouldUpdate,g=f.fieldContext;if(this.mounted=!0,g){var u=g.getInternalHooks,E=u(Bd),P=E.registerField;this.cancelRegisterFunc=P(this)}v===!0&&this.reRender()}},{key:"componentWillUnmount",value:function(){this.cancelRegister(),this.triggerMetaEvent(!0),this.mounted=!1}},{key:"reRender",value:function(){this.mounted&&this.forceUpdate()}},{key:"render",value:function(){var f=this.state.resetCount,v=this.props.children,g=this.getOnlyChild(v),u=g.child,E=g.isFunction,P;return E?P=u:U.isValidElement(u)?P=U.cloneElement(u,this.getControlled(u.props)):(el(!u,"`children` of Field is not validate ReactElement."),P=u),U.createElement(U.Fragment,{key:f},P)}}]),i}(U.Component);ut(Uw,"contextType",Zm);ut(Uw,"defaultProps",{trigger:"onChange",valuePropName:"value"});function HA(e){var t,i=e.name,a=uo(e,oF),f=U.useContext(Zm),v=U.useContext(c0),g=i!==void 0?ia(i):void 0,u=(t=a.isListField)!==null&&t!==void 0?t:!!v,E="keep";return u||(E="_".concat((g||[]).join("_"))),U.createElement(Uw,Ti({key:E,name:g,isListField:u},a,{fieldContext:f}))}function sF(e){var t=e.name,i=e.initialValue,a=e.children,f=e.rules,v=e.validateTrigger,g=e.isListField,u=U.useContext(Zm),E=U.useContext(c0),P=U.useRef({keys:[],id:0}),I=P.current,B=U.useMemo(function(){var J=ia(u.prefixName)||[];return[].concat(wn(J),wn(ia(t)))},[u.prefixName,t]),j=U.useMemo(function(){return ct(ct({},u),{},{prefixName:B})},[u,B]),$=U.useMemo(function(){return{getKey:function(G){var le=B.length,oe=G[le];return[I.keys[oe],G.slice(le+1)]}}},[B]);if(typeof a!="function")return el(!1,"Form.List only accepts function as children."),null;var X=function(G,le,oe){var pe=oe.source;return pe==="internal"?!1:G!==le};return U.createElement(c0.Provider,{value:$},U.createElement(Zm.Provider,{value:j},U.createElement(HA,{name:[],shouldUpdate:X,rules:f,validateTrigger:v,initialValue:i,isList:!0,isListField:g??!!E},function(J,G){var le=J.value,oe=le===void 0?[]:le,pe=J.onChange,he=u.getFieldValue,ae=function(){var Le=he(B||[]);return Le||[]},ve={add:function(Le,Re){var me=ae();Re>=0&&Re<=me.length?(I.keys=[].concat(wn(I.keys.slice(0,Re)),[I.id],wn(I.keys.slice(Re))),pe([].concat(wn(me.slice(0,Re)),[Le],wn(me.slice(Re))))):(I.keys=[].concat(wn(I.keys),[I.id]),pe([].concat(wn(me),[Le]))),I.id+=1},remove:function(Le){var Re=ae(),me=new Set(Array.isArray(Le)?Le:[Le]);me.size<=0||(I.keys=I.keys.filter(function(Ae,He){return!me.has(He)}),pe(Re.filter(function(Ae,He){return!me.has(He)})))},move:function(Le,Re){if(Le!==Re){var me=ae();Le<0||Le>=me.length||Re<0||Re>=me.length||(I.keys=BC(I.keys,Le,Re),pe(BC(me,Le,Re)))}}},Se=oe||[];return Array.isArray(Se)||(Se=[]),a(Se.map(function(ke,Le){var Re=I.keys[Le];return Re===void 0&&(I.keys[Le]=I.id,Re=I.keys[Le],I.id+=1),{name:Le,key:Re,isListField:!0}}),ve,G)})))}function lF(e){var t=!1,i=e.length,a=[];return e.length?new Promise(function(f,v){e.forEach(function(g,u){g.catch(function(E){return t=!0,E}).then(function(E){i-=1,a[u]=E,!(i>0)&&(t&&v(a),f(a))})})}):Promise.resolve([])}var qA="__@field_split__";function ax(e){return e.map(function(t){return"".concat(zn(t),":").concat(t)}).join(qA)}var ym=function(){function e(){Xa(this,e),ut(this,"kvs",new Map)}return Wa(e,[{key:"set",value:function(i,a){this.kvs.set(ax(i),a)}},{key:"get",value:function(i){return this.kvs.get(ax(i))}},{key:"update",value:function(i,a){var f=this.get(i),v=a(f);v?this.set(i,v):this.delete(i)}},{key:"delete",value:function(i){this.kvs.delete(ax(i))}},{key:"map",value:function(i){return wn(this.kvs.entries()).map(function(a){var f=fn(a,2),v=f[0],g=f[1],u=v.split(qA);return i({key:u.map(function(E){var P=E.match(/^([^:]*):(.*)$/),I=fn(P,3),B=I[1],j=I[2];return B==="number"?Number(j):j}),value:g})})}},{key:"toJSON",value:function(){var i={};return this.map(function(a){var f=a.key,v=a.value;return i[f.join(".")]=v,null}),i}}]),e}(),cF=["name"],uF=Wa(function e(t){var i=this;Xa(this,e),ut(this,"formHooked",!1),ut(this,"forceRootUpdate",void 0),ut(this,"subscribable",!0),ut(this,"store",{}),ut(this,"fieldEntities",[]),ut(this,"initialValues",{}),ut(this,"callbacks",{}),ut(this,"validateMessages",null),ut(this,"preserve",null),ut(this,"lastValidatePromise",null),ut(this,"getForm",function(){return{getFieldValue:i.getFieldValue,getFieldsValue:i.getFieldsValue,getFieldError:i.getFieldError,getFieldWarning:i.getFieldWarning,getFieldsError:i.getFieldsError,isFieldsTouched:i.isFieldsTouched,isFieldTouched:i.isFieldTouched,isFieldValidating:i.isFieldValidating,isFieldsValidating:i.isFieldsValidating,resetFields:i.resetFields,setFields:i.setFields,setFieldValue:i.setFieldValue,setFieldsValue:i.setFieldsValue,validateFields:i.validateFields,submit:i.submit,_init:!0,getInternalHooks:i.getInternalHooks}}),ut(this,"getInternalHooks",function(a){return a===Bd?(i.formHooked=!0,{dispatch:i.dispatch,initEntityValue:i.initEntityValue,registerField:i.registerField,useSubscribe:i.useSubscribe,setInitialValues:i.setInitialValues,destroyForm:i.destroyForm,setCallbacks:i.setCallbacks,setValidateMessages:i.setValidateMessages,getFields:i.getFields,setPreserve:i.setPreserve,getInitialValue:i.getInitialValue,registerWatch:i.registerWatch}):(el(!1,"`getInternalHooks` is internal usage. Should not call directly."),null)}),ut(this,"useSubscribe",function(a){i.subscribable=a}),ut(this,"prevWithoutPreserves",null),ut(this,"setInitialValues",function(a,f){if(i.initialValues=a||{},f){var v,g=Cm(a,i.store);(v=i.prevWithoutPreserves)===null||v===void 0||v.map(function(u){var E=u.key;g=Mc(g,E,ku(a,E))}),i.prevWithoutPreserves=null,i.updateStore(g)}}),ut(this,"destroyForm",function(a){if(a)i.updateStore({});else{var f=new ym;i.getFieldEntities(!0).forEach(function(v){i.isMergedPreserve(v.isPreserve())||f.set(v.getNamePath(),!0)}),i.prevWithoutPreserves=f}}),ut(this,"getInitialValue",function(a){var f=ku(i.initialValues,a);return a.length?Cm(f):f}),ut(this,"setCallbacks",function(a){i.callbacks=a}),ut(this,"setValidateMessages",function(a){i.validateMessages=a}),ut(this,"setPreserve",function(a){i.preserve=a}),ut(this,"watchList",[]),ut(this,"registerWatch",function(a){return i.watchList.push(a),function(){i.watchList=i.watchList.filter(function(f){return f!==a})}}),ut(this,"notifyWatch",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];if(i.watchList.length){var f=i.getFieldsValue(),v=i.getFieldsValue(!0);i.watchList.forEach(function(g){g(f,v,a)})}}),ut(this,"timeoutId",null),ut(this,"warningUnhooked",function(){}),ut(this,"updateStore",function(a){i.store=a}),ut(this,"getFieldEntities",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return a?i.fieldEntities.filter(function(f){return f.getNamePath().length}):i.fieldEntities}),ut(this,"getFieldsMap",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,f=new ym;return i.getFieldEntities(a).forEach(function(v){var g=v.getNamePath();f.set(g,v)}),f}),ut(this,"getFieldEntitiesForNamePathList",function(a){if(!a)return i.getFieldEntities(!0);var f=i.getFieldsMap(!0);return a.map(function(v){var g=ia(v);return f.get(g)||{INVALIDATE_NAME_PATH:ia(v)}})}),ut(this,"getFieldsValue",function(a,f){i.warningUnhooked();var v,g,u;if(a===!0||Array.isArray(a)?(v=a,g=f):a&&zn(a)==="object"&&(u=a.strict,g=a.filter),v===!0&&!g)return i.store;var E=i.getFieldEntitiesForNamePathList(Array.isArray(v)?v:null),P=[];return E.forEach(function(I){var B,j,$="INVALIDATE_NAME_PATH"in I?I.INVALIDATE_NAME_PATH:I.getNamePath();if(u){var X,J;if((X=(J=I).isList)!==null&&X!==void 0&&X.call(J))return}else if(!v&&(B=(j=I).isListField)!==null&&B!==void 0&&B.call(j))return;if(!g)P.push($);else{var G="getMeta"in I?I.getMeta():null;g(G)&&P.push($)}}),LC(i.store,P.map(ia))}),ut(this,"getFieldValue",function(a){i.warningUnhooked();var f=ia(a);return ku(i.store,f)}),ut(this,"getFieldsError",function(a){i.warningUnhooked();var f=i.getFieldEntitiesForNamePathList(a);return f.map(function(v,g){return v&&!("INVALIDATE_NAME_PATH"in v)?{name:v.getNamePath(),errors:v.getErrors(),warnings:v.getWarnings()}:{name:ia(a[g]),errors:[],warnings:[]}})}),ut(this,"getFieldError",function(a){i.warningUnhooked();var f=ia(a),v=i.getFieldsError([f])[0];return v.errors}),ut(this,"getFieldWarning",function(a){i.warningUnhooked();var f=ia(a),v=i.getFieldsError([f])[0];return v.warnings}),ut(this,"isFieldsTouched",function(){i.warningUnhooked();for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];var g=f[0],u=f[1],E,P=!1;f.length===0?E=null:f.length===1?Array.isArray(g)?(E=g.map(ia),P=!1):(E=null,P=g):(E=g.map(ia),P=u);var I=i.getFieldEntities(!0),B=function(G){return G.isFieldTouched()};if(!E)return P?I.every(function(J){return B(J)||J.isList()}):I.some(B);var j=new ym;E.forEach(function(J){j.set(J,[])}),I.forEach(function(J){var G=J.getNamePath();E.forEach(function(le){le.every(function(oe,pe){return G[pe]===oe})&&j.update(le,function(oe){return[].concat(wn(oe),[J])})})});var $=function(G){return G.some(B)},X=j.map(function(J){var G=J.value;return G});return P?X.every($):X.some($)}),ut(this,"isFieldTouched",function(a){return i.warningUnhooked(),i.isFieldsTouched([a])}),ut(this,"isFieldsValidating",function(a){i.warningUnhooked();var f=i.getFieldEntities();if(!a)return f.some(function(g){return g.isFieldValidating()});var v=a.map(ia);return f.some(function(g){var u=g.getNamePath();return Im(v,u)&&g.isFieldValidating()})}),ut(this,"isFieldValidating",function(a){return i.warningUnhooked(),i.isFieldsValidating([a])}),ut(this,"resetWithFieldInitialValue",function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},f=new ym,v=i.getFieldEntities(!0);v.forEach(function(E){var P=E.props.initialValue,I=E.getNamePath();if(P!==void 0){var B=f.get(I)||new Set;B.add({entity:E,value:P}),f.set(I,B)}});var g=function(P){P.forEach(function(I){var B=I.props.initialValue;if(B!==void 0){var j=I.getNamePath(),$=i.getInitialValue(j);if($!==void 0)el(!1,"Form already set 'initialValues' with path '".concat(j.join("."),"'. Field can not overwrite it."));else{var X=f.get(j);if(X&&X.size>1)el(!1,"Multiple Field with path '".concat(j.join("."),"' set 'initialValue'. Can not decide which one to pick."));else if(X){var J=i.getFieldValue(j),G=I.isListField();!G&&(!a.skipExist||J===void 0)&&i.updateStore(Mc(i.store,j,wn(X)[0].value))}}}})},u;a.entities?u=a.entities:a.namePathList?(u=[],a.namePathList.forEach(function(E){var P=f.get(E);if(P){var I;(I=u).push.apply(I,wn(wn(P).map(function(B){return B.entity})))}})):u=v,g(u)}),ut(this,"resetFields",function(a){i.warningUnhooked();var f=i.store;if(!a){i.updateStore(Cm(i.initialValues)),i.resetWithFieldInitialValue(),i.notifyObservers(f,null,{type:"reset"}),i.notifyWatch();return}var v=a.map(ia);v.forEach(function(g){var u=i.getInitialValue(g);i.updateStore(Mc(i.store,g,u))}),i.resetWithFieldInitialValue({namePathList:v}),i.notifyObservers(f,v,{type:"reset"}),i.notifyWatch(v)}),ut(this,"setFields",function(a){i.warningUnhooked();var f=i.store,v=[];a.forEach(function(g){var u=g.name,E=uo(g,cF),P=ia(u);v.push(P),"value"in E&&i.updateStore(Mc(i.store,P,E.value)),i.notifyObservers(f,[P],{type:"setField",data:g})}),i.notifyWatch(v)}),ut(this,"getFields",function(){var a=i.getFieldEntities(!0),f=a.map(function(v){var g=v.getNamePath(),u=v.getMeta(),E=ct(ct({},u),{},{name:g,value:i.getFieldValue(g)});return Object.defineProperty(E,"originRCField",{value:!0}),E});return f}),ut(this,"initEntityValue",function(a){var f=a.props.initialValue;if(f!==void 0){var v=a.getNamePath(),g=ku(i.store,v);g===void 0&&i.updateStore(Mc(i.store,v,f))}}),ut(this,"isMergedPreserve",function(a){var f=a!==void 0?a:i.preserve;return f??!0}),ut(this,"registerField",function(a){i.fieldEntities.push(a);var f=a.getNamePath();if(i.notifyWatch([f]),a.props.initialValue!==void 0){var v=i.store;i.resetWithFieldInitialValue({entities:[a],skipExist:!0}),i.notifyObservers(v,[a.getNamePath()],{type:"valueUpdate",source:"internal"})}return function(g,u){var E=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[];if(i.fieldEntities=i.fieldEntities.filter(function(B){return B!==a}),!i.isMergedPreserve(u)&&(!g||E.length>1)){var P=g?void 0:i.getInitialValue(f);if(f.length&&i.getFieldValue(f)!==P&&i.fieldEntities.every(function(B){return!UA(B.getNamePath(),f)})){var I=i.store;i.updateStore(Mc(I,f,P,!0)),i.notifyObservers(I,[f],{type:"remove"}),i.triggerDependenciesUpdate(I,f)}}i.notifyWatch([f])}}),ut(this,"dispatch",function(a){switch(a.type){case"updateValue":{var f=a.namePath,v=a.value;i.updateValue(f,v);break}case"validateField":{var g=a.namePath,u=a.triggerName;i.validateFields([g],{triggerName:u});break}}}),ut(this,"notifyObservers",function(a,f,v){if(i.subscribable){var g=ct(ct({},v),{},{store:i.getFieldsValue(!0)});i.getFieldEntities().forEach(function(u){var E=u.onStoreChange;E(a,f,g)})}else i.forceRootUpdate()}),ut(this,"triggerDependenciesUpdate",function(a,f){var v=i.getDependencyChildrenFields(f);return v.length&&i.validateFields(v),i.notifyObservers(a,v,{type:"dependenciesUpdate",relatedFields:[f].concat(wn(v))}),v}),ut(this,"updateValue",function(a,f){var v=ia(a),g=i.store;i.updateStore(Mc(i.store,v,f)),i.notifyObservers(g,[v],{type:"valueUpdate",source:"internal"}),i.notifyWatch([v]);var u=i.triggerDependenciesUpdate(g,v),E=i.callbacks.onValuesChange;if(E){var P=LC(i.store,[v]);E(P,i.getFieldsValue())}i.triggerOnFieldsChange([v].concat(wn(u)))}),ut(this,"setFieldsValue",function(a){i.warningUnhooked();var f=i.store;if(a){var v=Cm(i.store,a);i.updateStore(v)}i.notifyObservers(f,null,{type:"valueUpdate",source:"external"}),i.notifyWatch()}),ut(this,"setFieldValue",function(a,f){i.setFields([{name:a,value:f,errors:[],warnings:[]}])}),ut(this,"getDependencyChildrenFields",function(a){var f=new Set,v=[],g=new ym;i.getFieldEntities().forEach(function(E){var P=E.props.dependencies;(P||[]).forEach(function(I){var B=ia(I);g.update(B,function(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:new Set;return j.add(E),j})})});var u=function E(P){var I=g.get(P)||new Set;I.forEach(function(B){if(!f.has(B)){f.add(B);var j=B.getNamePath();B.isFieldDirty()&&j.length&&(v.push(j),E(j))}})};return u(a),v}),ut(this,"triggerOnFieldsChange",function(a,f){var v=i.callbacks.onFieldsChange;if(v){var g=i.getFields();if(f){var u=new ym;f.forEach(function(P){var I=P.name,B=P.errors;u.set(I,B)}),g.forEach(function(P){P.errors=u.get(P.name)||P.errors})}var E=g.filter(function(P){var I=P.name;return Im(a,I)});E.length&&v(E,g)}}),ut(this,"validateFields",function(a,f){i.warningUnhooked();var v,g;Array.isArray(a)||typeof a=="string"||typeof f=="string"?(v=a,g=f):g=a;var u=!!v,E=u?v.map(ia):[],P=[],I=String(Date.now()),B=new Set,j=g||{},$=j.recursive,X=j.dirty;i.getFieldEntities(!0).forEach(function(oe){if(u||E.push(oe.getNamePath()),!(!oe.props.rules||!oe.props.rules.length)&&!(X&&!oe.isFieldDirty())){var pe=oe.getNamePath();if(B.add(pe.join(I)),!u||Im(E,pe,$)){var he=oe.validateRules(ct({validateMessages:ct(ct({},VA),i.validateMessages)},g));P.push(he.then(function(){return{name:pe,errors:[],warnings:[]}}).catch(function(ae){var ve,Se=[],ke=[];return(ve=ae.forEach)===null||ve===void 0||ve.call(ae,function(Le){var Re=Le.rule.warningOnly,me=Le.errors;Re?ke.push.apply(ke,wn(me)):Se.push.apply(Se,wn(me))}),Se.length?Promise.reject({name:pe,errors:Se,warnings:ke}):{name:pe,errors:Se,warnings:ke}}))}}});var J=lF(P);i.lastValidatePromise=J,J.catch(function(oe){return oe}).then(function(oe){var pe=oe.map(function(he){var ae=he.name;return ae});i.notifyObservers(i.store,pe,{type:"validateFinish"}),i.triggerOnFieldsChange(pe,oe)});var G=J.then(function(){return i.lastValidatePromise===J?Promise.resolve(i.getFieldsValue(E)):Promise.reject([])}).catch(function(oe){var pe=oe.filter(function(he){return he&&he.errors.length});return Promise.reject({values:i.getFieldsValue(E),errorFields:pe,outOfDate:i.lastValidatePromise!==J})});G.catch(function(oe){return oe});var le=E.filter(function(oe){return B.has(oe.join(I))});return i.triggerOnFieldsChange(le),G}),ut(this,"submit",function(){i.warningUnhooked(),i.validateFields().then(function(a){var f=i.callbacks.onFinish;if(f)try{f(a)}catch(v){console.error(v)}}).catch(function(a){var f=i.callbacks.onFinishFailed;f&&f(a)})}),this.forceRootUpdate=t});function GA(e){var t=U.useRef(),i=U.useState({}),a=fn(i,2),f=a[1];if(!t.current)if(e)t.current=e;else{var v=function(){f({})},g=new uF(v);t.current=g.getForm()}return[t.current]}var D1=U.createContext({triggerFormChange:function(){},triggerFormFinish:function(){},registerForm:function(){},unregisterForm:function(){}}),hF=function(t){var i=t.validateMessages,a=t.onFormChange,f=t.onFormFinish,v=t.children,g=U.useContext(D1),u=U.useRef({});return U.createElement(D1.Provider,{value:ct(ct({},g),{},{validateMessages:ct(ct({},g.validateMessages),i),triggerFormChange:function(P,I){a&&a(P,{changedFields:I,forms:u.current}),g.triggerFormChange(P,I)},triggerFormFinish:function(P,I){f&&f(P,{values:I,forms:u.current}),g.triggerFormFinish(P,I)},registerForm:function(P,I){P&&(u.current=ct(ct({},u.current),{},ut({},P,I))),g.registerForm(P,I)},unregisterForm:function(P){var I=ct({},u.current);delete I[P],u.current=I,g.unregisterForm(P)}})},v)},fF=["name","initialValues","fields","form","preserve","children","component","validateMessages","validateTrigger","onValuesChange","onFieldsChange","onFinish","onFinishFailed","clearOnDestroy"],dF=function(t,i){var a=t.name,f=t.initialValues,v=t.fields,g=t.form,u=t.preserve,E=t.children,P=t.component,I=P===void 0?"form":P,B=t.validateMessages,j=t.validateTrigger,$=j===void 0?"onChange":j,X=t.onValuesChange,J=t.onFieldsChange,G=t.onFinish,le=t.onFinishFailed,oe=t.clearOnDestroy,pe=uo(t,fF),he=U.useRef(null),ae=U.useContext(D1),ve=GA(g),Se=fn(ve,1),ke=Se[0],Le=ke.getInternalHooks(Bd),Re=Le.useSubscribe,me=Le.setInitialValues,Ae=Le.setCallbacks,He=Le.setValidateMessages,We=Le.setPreserve,pt=Le.destroyForm;U.useImperativeHandle(i,function(){return ct(ct({},ke),{},{nativeElement:he.current})}),U.useEffect(function(){return ae.registerForm(a,ke),function(){ae.unregisterForm(a)}},[ae,ke,a]),He(ct(ct({},ae.validateMessages),B)),Ae({onValuesChange:X,onFieldsChange:function(At){if(ae.triggerFormChange(a,At),J){for(var St=arguments.length,qt=new Array(St>1?St-1:0),Xe=1;Xe<St;Xe++)qt[Xe-1]=arguments[Xe];J.apply(void 0,[At].concat(qt))}},onFinish:function(At){ae.triggerFormFinish(a,At),G&&G(At)},onFinishFailed:le}),We(u);var xe=U.useRef(null);me(f,!xe.current),xe.current||(xe.current=!0),U.useEffect(function(){return function(){return pt(oe)}},[]);var et,Qe=typeof E=="function";if(Qe){var Rt=ke.getFieldsValue(!0);et=E(Rt,ke)}else et=E;Re(!Qe);var we=U.useRef();U.useEffect(function(){iF(we.current||[],v||[])||ke.setFields(v||[]),we.current=v},[v,ke]);var tt=U.useMemo(function(){return ct(ct({},ke),{},{validateTrigger:$})},[ke,$]),_t=U.createElement(c0.Provider,{value:null},U.createElement(Zm.Provider,{value:tt},et));return I===!1?_t:U.createElement(I,Ti({},pe,{ref:he,onSubmit:function(At){At.preventDefault(),At.stopPropagation(),ke.submit()},onReset:function(At){var St;At.preventDefault(),ke.resetFields(),(St=pe.onReset)===null||St===void 0||St.call(pe,At)}}),_t)};function NC(e){try{return JSON.stringify(e)}catch{return Math.random()}}function pF(){for(var e=arguments.length,t=new Array(e),i=0;i<e;i++)t[i]=arguments[i];var a=t[0],f=t[1],v=f===void 0?{}:f,g=wj(v)?{form:v}:v,u=g.form,E=U.useState(),P=fn(E,2),I=P[0],B=P[1],j=U.useMemo(function(){return NC(I)},[I]),$=U.useRef(j);$.current=j;var X=U.useContext(Zm),J=u||X,G=J&&J._init,le=ia(a),oe=U.useRef(le);return oe.current=le,U.useEffect(function(){if(G){var pe=J.getFieldsValue,he=J.getInternalHooks,ae=he(Bd),ve=ae.registerWatch,Se=function(me,Ae){var He=g.preserve?Ae:me;return typeof a=="function"?a(He):ku(He,oe.current)},ke=ve(function(Re,me){var Ae=Se(Re,me),He=NC(Ae);$.current!==He&&($.current=He,B(Ae))}),Le=Se(pe(),pe(!0));return I!==Le&&B(Le),ke}},[G]),I}var mF=U.forwardRef(dF),t_=mF;t_.FormProvider=hF;t_.Field=HA;t_.List=sF;t_.useForm=GA;t_.useWatch=pF;const jC=U.createContext({}),gF=({children:e,status:t,override:i})=>{const a=U.useContext(jC),f=U.useMemo(()=>{const v=Object.assign({},a);return i&&delete v.isFormItemInput,t&&(delete v.status,delete v.hasFeedback,delete v.feedbackIcon),v},[t,i,a]);return U.createElement(jC.Provider,{value:f},e)},yF=e=>{const{space:t,form:i,children:a}=e;if(a==null)return null;let f=a;return i&&(f=Nt.createElement(gF,{override:!0,status:!0},f)),t&&(f=Nt.createElement(KB,null,f)),f};function FC(...e){const t={};return e.forEach(i=>{i&&Object.keys(i).forEach(a=>{i[a]!==void 0&&(t[a]=i[a])})}),t}function $C(e){if(!e)return;const{closable:t,closeIcon:i}=e;return{closable:t,closeIcon:i}}function VC(e){const{closable:t,closeIcon:i}=e||{};return Nt.useMemo(()=>{if(!t&&(t===!1||i===!1||i===null))return!1;if(t===void 0&&i===void 0)return null;let a={closeIcon:typeof i!="boolean"&&i!==null?i:void 0};return t&&typeof t=="object"&&(a=Object.assign(Object.assign({},a),t)),a},[t,i])}const _F={};function vF(e,t,i=_F){const a=VC(e),f=VC(t),[v]=z0("global",Uf.global),g=typeof a!="boolean"?!!(a!=null&&a.disabled):!1,u=Nt.useMemo(()=>Object.assign({closeIcon:Nt.createElement(Yy,null)},i),[i]),E=Nt.useMemo(()=>a===!1?!1:a?FC(u,f,a):f===!1?!1:f?FC(u,f):u.closable?u:!1,[a,f,u]);return Nt.useMemo(()=>{var P,I;if(E===!1)return[!1,null,g,{}];const{closeIconRender:B}=u,{closeIcon:j}=E;let $=j;const X=B0(E,!0);return $!=null&&(B&&($=B(j)),$=Nt.isValidElement($)?Nt.cloneElement($,Object.assign(Object.assign(Object.assign({},$.props),{"aria-label":(I=(P=$.props)===null||P===void 0?void 0:P["aria-label"])!==null&&I!==void 0?I:v.close}),X)):Nt.createElement("span",Object.assign({"aria-label":v.close},X),$)),[!0,$,g,X]},[E,u])}const bF=()=>_s()&&window.document.documentElement,Z0=e=>{const{prefixCls:t,className:i,style:a,size:f,shape:v}=e,g=Mn({[`${t}-lg`]:f==="large",[`${t}-sm`]:f==="small"}),u=Mn({[`${t}-circle`]:v==="circle",[`${t}-square`]:v==="square",[`${t}-round`]:v==="round"}),E=U.useMemo(()=>typeof f=="number"?{width:f,height:f,lineHeight:`${f}px`}:{},[f]);return U.createElement("span",{className:Mn(t,g,u,i),style:Object.assign(Object.assign({},E),a)})},xF=new Qi("ant-skeleton-loading",{"0%":{backgroundPosition:"100% 50%"},"100%":{backgroundPosition:"0 50%"}}),X0=e=>({height:e,lineHeight:_r(e)}),km=e=>Object.assign({width:e},X0(e)),wF=e=>({background:e.skeletonLoadingBackground,backgroundSize:"400% 100%",animationName:xF,animationDuration:e.skeletonLoadingMotionDuration,animationTimingFunction:"ease",animationIterationCount:"infinite"}),ox=(e,t)=>Object.assign({width:t(e).mul(5).equal(),minWidth:t(e).mul(5).equal()},X0(e)),SF=e=>{const{skeletonAvatarCls:t,gradientFromColor:i,controlHeight:a,controlHeightLG:f,controlHeightSM:v}=e;return{[t]:Object.assign({display:"inline-block",verticalAlign:"top",background:i},km(a)),[`${t}${t}-circle`]:{borderRadius:"50%"},[`${t}${t}-lg`]:Object.assign({},km(f)),[`${t}${t}-sm`]:Object.assign({},km(v))}},CF=e=>{const{controlHeight:t,borderRadiusSM:i,skeletonInputCls:a,controlHeightLG:f,controlHeightSM:v,gradientFromColor:g,calc:u}=e;return{[a]:Object.assign({display:"inline-block",verticalAlign:"top",background:g,borderRadius:i},ox(t,u)),[`${a}-lg`]:Object.assign({},ox(f,u)),[`${a}-sm`]:Object.assign({},ox(v,u))}},UC=e=>Object.assign({width:e},X0(e)),TF=e=>{const{skeletonImageCls:t,imageSizeBase:i,gradientFromColor:a,borderRadiusSM:f,calc:v}=e;return{[t]:Object.assign(Object.assign({display:"inline-flex",alignItems:"center",justifyContent:"center",verticalAlign:"middle",background:a,borderRadius:f},UC(v(i).mul(2).equal())),{[`${t}-path`]:{fill:"#bfbfbf"},[`${t}-svg`]:Object.assign(Object.assign({},UC(i)),{maxWidth:v(i).mul(4).equal(),maxHeight:v(i).mul(4).equal()}),[`${t}-svg${t}-svg-circle`]:{borderRadius:"50%"}}),[`${t}${t}-circle`]:{borderRadius:"50%"}}},sx=(e,t,i)=>{const{skeletonButtonCls:a}=e;return{[`${i}${a}-circle`]:{width:t,minWidth:t,borderRadius:"50%"},[`${i}${a}-round`]:{borderRadius:t}}},lx=(e,t)=>Object.assign({width:t(e).mul(2).equal(),minWidth:t(e).mul(2).equal()},X0(e)),EF=e=>{const{borderRadiusSM:t,skeletonButtonCls:i,controlHeight:a,controlHeightLG:f,controlHeightSM:v,gradientFromColor:g,calc:u}=e;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:g,borderRadius:t,width:u(a).mul(2).equal(),minWidth:u(a).mul(2).equal()},lx(a,u))},sx(e,a,i)),{[`${i}-lg`]:Object.assign({},lx(f,u))}),sx(e,f,`${i}-lg`)),{[`${i}-sm`]:Object.assign({},lx(v,u))}),sx(e,v,`${i}-sm`))},MF=e=>{const{componentCls:t,skeletonAvatarCls:i,skeletonTitleCls:a,skeletonParagraphCls:f,skeletonButtonCls:v,skeletonInputCls:g,skeletonImageCls:u,controlHeight:E,controlHeightLG:P,controlHeightSM:I,gradientFromColor:B,padding:j,marginSM:$,borderRadius:X,titleHeight:J,blockRadius:G,paragraphLiHeight:le,controlHeightXS:oe,paragraphMarginTop:pe}=e;return{[t]:{display:"table",width:"100%",[`${t}-header`]:{display:"table-cell",paddingInlineEnd:j,verticalAlign:"top",[i]:Object.assign({display:"inline-block",verticalAlign:"top",background:B},km(E)),[`${i}-circle`]:{borderRadius:"50%"},[`${i}-lg`]:Object.assign({},km(P)),[`${i}-sm`]:Object.assign({},km(I))},[`${t}-content`]:{display:"table-cell",width:"100%",verticalAlign:"top",[a]:{width:"100%",height:J,background:B,borderRadius:G,[`+ ${f}`]:{marginBlockStart:I}},[f]:{padding:0,"> li":{width:"100%",height:le,listStyle:"none",background:B,borderRadius:G,"+ li":{marginBlockStart:oe}}},[`${f}> li:last-child:not(:first-child):not(:nth-child(2))`]:{width:"61%"}},[`&-round ${t}-content`]:{[`${a}, ${f} > li`]:{borderRadius:X}}},[`${t}-with-avatar ${t}-content`]:{[a]:{marginBlockStart:$,[`+ ${f}`]:{marginBlockStart:pe}}},[`${t}${t}-element`]:Object.assign(Object.assign(Object.assign(Object.assign({display:"inline-block",width:"auto"},EF(e)),SF(e)),CF(e)),TF(e)),[`${t}${t}-block`]:{width:"100%",[v]:{width:"100%"},[g]:{width:"100%"}},[`${t}${t}-active`]:{[`
        ${a},
        ${f} > li,
        ${i},
        ${v},
        ${g},
        ${u}
      `]:Object.assign({},wF(e))}}},AF=e=>{const{colorFillContent:t,colorFill:i}=e,a=t,f=i;return{color:a,colorGradientEnd:f,gradientFromColor:a,gradientToColor:f,titleHeight:e.controlHeight/2,blockRadius:e.borderRadiusSM,paragraphMarginTop:e.marginLG+e.marginXXS,paragraphLiHeight:e.controlHeight/2}},tg=ip("Skeleton",e=>{const{componentCls:t,calc:i}=e,a=Fc(e,{skeletonAvatarCls:`${t}-avatar`,skeletonTitleCls:`${t}-title`,skeletonParagraphCls:`${t}-paragraph`,skeletonButtonCls:`${t}-button`,skeletonInputCls:`${t}-input`,skeletonImageCls:`${t}-image`,imageSizeBase:i(e.controlHeight).mul(1.5).equal(),borderRadius:100,skeletonLoadingBackground:`linear-gradient(90deg, ${e.gradientFromColor} 25%, ${e.gradientToColor} 37%, ${e.gradientFromColor} 63%)`,skeletonLoadingMotionDuration:"1.4s"});return[MF(a)]},AF,{deprecatedTokens:[["color","gradientFromColor"],["colorGradientEnd","gradientToColor"]]}),PF=e=>{const{prefixCls:t,className:i,rootClassName:a,active:f,shape:v="circle",size:g="default"}=e,{getPrefixCls:u}=U.useContext(Ei),E=u("skeleton",t),[P,I,B]=tg(E),j=F0(e,["prefixCls","className"]),$=Mn(E,`${E}-element`,{[`${E}-active`]:f},i,a,I,B);return P(U.createElement("div",{className:$},U.createElement(Z0,Object.assign({prefixCls:`${E}-avatar`,shape:v,size:g},j))))},RF=e=>{const{prefixCls:t,className:i,rootClassName:a,active:f,block:v=!1,size:g="default"}=e,{getPrefixCls:u}=U.useContext(Ei),E=u("skeleton",t),[P,I,B]=tg(E),j=F0(e,["prefixCls"]),$=Mn(E,`${E}-element`,{[`${E}-active`]:f,[`${E}-block`]:v},i,a,I,B);return P(U.createElement("div",{className:$},U.createElement(Z0,Object.assign({prefixCls:`${E}-button`,size:g},j))))},OF="M365.714286 329.142857q0 45.714286-32.036571 77.677714t-77.677714 32.036571-77.677714-32.036571-32.036571-77.677714 32.036571-77.677714 77.677714-32.036571 77.677714 32.036571 32.036571 77.677714zM950.857143 548.571429l0 256-804.571429 0 0-109.714286 182.857143-182.857143 91.428571 91.428571 292.571429-292.571429zM1005.714286 146.285714l-914.285714 0q-7.460571 0-12.873143 5.412571t-5.412571 12.873143l0 694.857143q0 7.460571 5.412571 12.873143t12.873143 5.412571l914.285714 0q7.460571 0 12.873143-5.412571t5.412571-12.873143l0-694.857143q0-7.460571-5.412571-12.873143t-12.873143-5.412571zM1097.142857 164.571429l0 694.857143q0 37.741714-26.843429 64.585143t-64.585143 26.843429l-914.285714 0q-37.741714 0-64.585143-26.843429t-26.843429-64.585143l0-694.857143q0-37.741714 26.843429-64.585143t64.585143-26.843429l914.285714 0q37.741714 0 64.585143 26.843429t26.843429 64.585143z",IF=e=>{const{prefixCls:t,className:i,rootClassName:a,style:f,active:v}=e,{getPrefixCls:g}=U.useContext(Ei),u=g("skeleton",t),[E,P,I]=tg(u),B=Mn(u,`${u}-element`,{[`${u}-active`]:v},i,a,P,I);return E(U.createElement("div",{className:B},U.createElement("div",{className:Mn(`${u}-image`,i),style:f},U.createElement("svg",{viewBox:"0 0 1098 1024",xmlns:"http://www.w3.org/2000/svg",className:`${u}-image-svg`},U.createElement("title",null,"Image placeholder"),U.createElement("path",{d:OF,className:`${u}-image-path`})))))},kF=e=>{const{prefixCls:t,className:i,rootClassName:a,active:f,block:v,size:g="default"}=e,{getPrefixCls:u}=U.useContext(Ei),E=u("skeleton",t),[P,I,B]=tg(E),j=F0(e,["prefixCls"]),$=Mn(E,`${E}-element`,{[`${E}-active`]:f,[`${E}-block`]:v},i,a,I,B);return P(U.createElement("div",{className:$},U.createElement(Z0,Object.assign({prefixCls:`${E}-input`,size:g},j))))},zF=e=>{const{prefixCls:t,className:i,rootClassName:a,style:f,active:v,children:g}=e,{getPrefixCls:u}=U.useContext(Ei),E=u("skeleton",t),[P,I,B]=tg(E),j=Mn(E,`${E}-element`,{[`${E}-active`]:v},I,i,a,B);return P(U.createElement("div",{className:j},U.createElement("div",{className:Mn(`${E}-image`,i),style:f},g)))},DF=(e,t)=>{const{width:i,rows:a=2}=t;if(Array.isArray(i))return i[e];if(a-1===e)return i},LF=e=>{const{prefixCls:t,className:i,style:a,rows:f=0}=e,v=Array.from({length:f}).map((g,u)=>U.createElement("li",{key:u,style:{width:DF(u,e)}}));return U.createElement("ul",{className:Mn(t,i),style:a},v)},BF=({prefixCls:e,className:t,width:i,style:a})=>U.createElement("h3",{className:Mn(e,t),style:Object.assign({width:i},a)});function cx(e){return e&&typeof e=="object"?e:{}}function NF(e,t){return e&&!t?{size:"large",shape:"square"}:{size:"large",shape:"circle"}}function jF(e,t){return!e&&t?{width:"38%"}:e&&t?{width:"50%"}:{}}function FF(e,t){const i={};return(!e||!t)&&(i.width="61%"),!e&&t?i.rows=3:i.rows=2,i}const ng=e=>{const{prefixCls:t,loading:i,className:a,rootClassName:f,style:v,children:g,avatar:u=!1,title:E=!0,paragraph:P=!0,active:I,round:B}=e,{getPrefixCls:j,direction:$,className:X,style:J}=HM("skeleton"),G=j("skeleton",t),[le,oe,pe]=tg(G);if(i||!("loading"in e)){const he=!!u,ae=!!E,ve=!!P;let Se;if(he){const Re=Object.assign(Object.assign({prefixCls:`${G}-avatar`},NF(ae,ve)),cx(u));Se=U.createElement("div",{className:`${G}-header`},U.createElement(Z0,Object.assign({},Re)))}let ke;if(ae||ve){let Re;if(ae){const Ae=Object.assign(Object.assign({prefixCls:`${G}-title`},jF(he,ve)),cx(E));Re=U.createElement(BF,Object.assign({},Ae))}let me;if(ve){const Ae=Object.assign(Object.assign({prefixCls:`${G}-paragraph`},FF(he,ae)),cx(P));me=U.createElement(LF,Object.assign({},Ae))}ke=U.createElement("div",{className:`${G}-content`},Re,me)}const Le=Mn(G,{[`${G}-with-avatar`]:he,[`${G}-active`]:I,[`${G}-rtl`]:$==="rtl",[`${G}-round`]:B},X,a,f,oe,pe);return le(U.createElement("div",{className:Le,style:Object.assign(Object.assign({},J),v)},Se,ke))}return g??null};ng.Button=RF;ng.Avatar=PF;ng.Input=kF;ng.Image=IF;ng.Node=zF;function HC(){}const $F=U.createContext({add:HC,remove:HC});function VF(e){const t=U.useContext($F),i=U.useRef(null);return Gm(f=>{if(f){const v=e?f.querySelector(e):f;t.add(v),i.current=v}else t.remove(i.current)})}const qC=()=>{const{cancelButtonProps:e,cancelTextLocale:t,onCancel:i}=U.useContext(Jy);return Nt.createElement(Qy,Object.assign({onClick:i},e),t)},GC=()=>{const{confirmLoading:e,okButtonProps:t,okType:i,okTextLocale:a,onOk:f}=U.useContext(Jy);return Nt.createElement(Qy,Object.assign({},PA(i),{loading:e,onClick:f},t),a)};function ZA(e,t){return Nt.createElement("span",{className:`${e}-close-x`},t||Nt.createElement(Yy,{className:`${e}-close-icon`}))}const XA=e=>{const{okText:t,okType:i="primary",cancelText:a,confirmLoading:f,onOk:v,onCancel:g,okButtonProps:u,cancelButtonProps:E,footer:P}=e,[I]=z0("Modal",NM()),B=t||(I==null?void 0:I.okText),j=a||(I==null?void 0:I.cancelText),$={confirmLoading:f,okButtonProps:u,cancelButtonProps:E,okTextLocale:B,cancelTextLocale:j,okType:i,onOk:v,onCancel:g},X=Nt.useMemo(()=>$,wn(Object.values($)));let J;return typeof P=="function"||typeof P>"u"?(J=Nt.createElement(Nt.Fragment,null,Nt.createElement(qC,null),Nt.createElement(GC,null)),typeof P=="function"&&(J=P(J,{OkBtn:GC,CancelBtn:qC})),J=Nt.createElement(DA,{value:X},J)):J=P,Nt.createElement(qM,{disabled:!1},J)},UF=e=>{const{componentCls:t}=e;return{[t]:{display:"flex",flexFlow:"row wrap",minWidth:0,"&::before, &::after":{display:"flex"},"&-no-wrap":{flexWrap:"nowrap"},"&-start":{justifyContent:"flex-start"},"&-center":{justifyContent:"center"},"&-end":{justifyContent:"flex-end"},"&-space-between":{justifyContent:"space-between"},"&-space-around":{justifyContent:"space-around"},"&-space-evenly":{justifyContent:"space-evenly"},"&-top":{alignItems:"flex-start"},"&-middle":{alignItems:"center"},"&-bottom":{alignItems:"flex-end"}}}},HF=e=>{const{componentCls:t}=e;return{[t]:{position:"relative",maxWidth:"100%",minHeight:1}}},qF=(e,t)=>{const{prefixCls:i,componentCls:a,gridColumns:f}=e,v={};for(let g=f;g>=0;g--)g===0?(v[`${a}${t}-${g}`]={display:"none"},v[`${a}-push-${g}`]={insetInlineStart:"auto"},v[`${a}-pull-${g}`]={insetInlineEnd:"auto"},v[`${a}${t}-push-${g}`]={insetInlineStart:"auto"},v[`${a}${t}-pull-${g}`]={insetInlineEnd:"auto"},v[`${a}${t}-offset-${g}`]={marginInlineStart:0},v[`${a}${t}-order-${g}`]={order:0}):(v[`${a}${t}-${g}`]=[{"--ant-display":"block",display:"block"},{display:"var(--ant-display)",flex:`0 0 ${g/f*100}%`,maxWidth:`${g/f*100}%`}],v[`${a}${t}-push-${g}`]={insetInlineStart:`${g/f*100}%`},v[`${a}${t}-pull-${g}`]={insetInlineEnd:`${g/f*100}%`},v[`${a}${t}-offset-${g}`]={marginInlineStart:`${g/f*100}%`},v[`${a}${t}-order-${g}`]={order:g});return v[`${a}${t}-flex`]={flex:`var(--${i}${t}-flex)`},v},L1=(e,t)=>qF(e,t),GF=(e,t,i)=>({[`@media (min-width: ${_r(t)})`]:Object.assign({},L1(e,i))}),ZF=()=>({}),XF=()=>({});ip("Grid",UF,ZF);const WA=e=>({xs:e.screenXSMin,sm:e.screenSMMin,md:e.screenMDMin,lg:e.screenLGMin,xl:e.screenXLMin,xxl:e.screenXXLMin});ip("Grid",e=>{const t=Fc(e,{gridColumns:24}),i=WA(t);return delete i.xs,[HF(t),L1(t,""),L1(t,"-xs"),Object.keys(i).map(a=>GF(t,i[a],`-${a}`)).reduce((a,f)=>Object.assign(Object.assign({},a),f),{})]},XF);function ZC(e){return{position:e,inset:0}}const WF=e=>{const{componentCls:t,antCls:i}=e;return[{[`${t}-root`]:{[`${t}${i}-zoom-enter, ${t}${i}-zoom-appear`]:{transform:"none",opacity:0,animationDuration:e.motionDurationSlow,userSelect:"none"},[`${t}${i}-zoom-leave ${t}-content`]:{pointerEvents:"none"},[`${t}-mask`]:Object.assign(Object.assign({},ZC("fixed")),{zIndex:e.zIndexPopupBase,height:"100%",backgroundColor:e.colorBgMask,pointerEvents:"none",[`${t}-hidden`]:{display:"none"}}),[`${t}-wrap`]:Object.assign(Object.assign({},ZC("fixed")),{zIndex:e.zIndexPopupBase,overflow:"auto",outline:0,WebkitOverflowScrolling:"touch"})}},{[`${t}-root`]:mN(e)}]},YF=e=>{const{componentCls:t}=e;return[{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl"},[`${t}-centered`]:{textAlign:"center","&::before":{display:"inline-block",width:0,height:"100%",verticalAlign:"middle",content:'""'},[t]:{top:0,display:"inline-block",paddingBottom:0,textAlign:"start",verticalAlign:"middle"}},[`@media (max-width: ${e.screenSMMax}px)`]:{[t]:{maxWidth:"calc(100vw - 16px)",margin:`${_r(e.marginXS)} auto`},[`${t}-centered`]:{[t]:{flex:1}}}}},{[t]:Object.assign(Object.assign({},Rw(e)),{pointerEvents:"none",position:"relative",top:100,width:"auto",maxWidth:`calc(100vw - ${_r(e.calc(e.margin).mul(2).equal())})`,margin:"0 auto",paddingBottom:e.paddingLG,[`${t}-title`]:{margin:0,color:e.titleColor,fontWeight:e.fontWeightStrong,fontSize:e.titleFontSize,lineHeight:e.titleLineHeight,wordWrap:"break-word"},[`${t}-content`]:{position:"relative",backgroundColor:e.contentBg,backgroundClip:"padding-box",border:0,borderRadius:e.borderRadiusLG,boxShadow:e.boxShadow,pointerEvents:"auto",padding:e.contentPadding},[`${t}-close`]:Object.assign({position:"absolute",top:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),insetInlineEnd:e.calc(e.modalHeaderHeight).sub(e.modalCloseBtnSize).div(2).equal(),zIndex:e.calc(e.zIndexPopupBase).add(10).equal(),padding:0,color:e.modalCloseIconColor,fontWeight:e.fontWeightStrong,lineHeight:1,textDecoration:"none",background:"transparent",borderRadius:e.borderRadiusSM,width:e.modalCloseBtnSize,height:e.modalCloseBtnSize,border:0,outline:0,cursor:"pointer",transition:`color ${e.motionDurationMid}, background-color ${e.motionDurationMid}`,"&-x":{display:"flex",fontSize:e.fontSizeLG,fontStyle:"normal",lineHeight:_r(e.modalCloseBtnSize),justifyContent:"center",textTransform:"none",textRendering:"auto"},"&:disabled":{pointerEvents:"none"},"&:hover":{color:e.modalCloseIconHoverColor,backgroundColor:e.colorBgTextHover,textDecoration:"none"},"&:active":{backgroundColor:e.colorBgTextActive}},Ow(e)),[`${t}-header`]:{color:e.colorText,background:e.headerBg,borderRadius:`${_r(e.borderRadiusLG)} ${_r(e.borderRadiusLG)} 0 0`,marginBottom:e.headerMarginBottom,padding:e.headerPadding,borderBottom:e.headerBorderBottom},[`${t}-body`]:{fontSize:e.fontSize,lineHeight:e.lineHeight,wordWrap:"break-word",padding:e.bodyPadding,[`${t}-body-skeleton`]:{width:"100%",height:"100%",display:"flex",justifyContent:"center",alignItems:"center",margin:`${_r(e.margin)} auto`}},[`${t}-footer`]:{textAlign:"end",background:e.footerBg,marginTop:e.footerMarginTop,padding:e.footerPadding,borderTop:e.footerBorderTop,borderRadius:e.footerBorderRadius,[`> ${e.antCls}-btn + ${e.antCls}-btn`]:{marginInlineStart:e.marginXS}},[`${t}-open`]:{overflow:"hidden"}})},{[`${t}-pure-panel`]:{top:"auto",padding:0,display:"flex",flexDirection:"column",[`${t}-content,
          ${t}-body,
          ${t}-confirm-body-wrapper`]:{display:"flex",flexDirection:"column",flex:"auto"},[`${t}-confirm-body`]:{marginBottom:"auto"}}}]},KF=e=>{const{componentCls:t}=e;return{[`${t}-root`]:{[`${t}-wrap-rtl`]:{direction:"rtl",[`${t}-confirm-body`]:{direction:"rtl"}}}}},QF=e=>{const{componentCls:t}=e,i=WA(e),a=Object.assign({},i);delete a.xs;const f=`--${t.replace(".","")}-`,v=Object.keys(a).map(g=>({[`@media (min-width: ${_r(a[g])})`]:{width:`var(${f}${g}-width)`}}));return{[`${t}-root`]:{[t]:[].concat(wn(Object.keys(i).map((g,u)=>{const E=Object.keys(i)[u-1];return E?{[`${f}${g}-width`]:`var(${f}${E}-width)`}:null})),[{width:`var(${f}xs-width)`}],wn(v))}}},YA=e=>{const t=e.padding,i=e.fontSizeHeading5,a=e.lineHeightHeading5;return Fc(e,{modalHeaderHeight:e.calc(e.calc(a).mul(i).equal()).add(e.calc(t).mul(2).equal()).equal(),modalFooterBorderColorSplit:e.colorSplit,modalFooterBorderStyle:e.lineType,modalFooterBorderWidth:e.lineWidth,modalCloseIconColor:e.colorIcon,modalCloseIconHoverColor:e.colorIconHover,modalCloseBtnSize:e.controlHeight,modalConfirmIconSize:e.fontHeight,modalTitleHeight:e.calc(e.titleFontSize).mul(e.titleLineHeight).equal()})},KA=e=>({footerBg:"transparent",headerBg:e.colorBgElevated,titleLineHeight:e.lineHeightHeading5,titleFontSize:e.fontSizeHeading5,contentBg:e.colorBgElevated,titleColor:e.colorTextHeading,contentPadding:e.wireframe?0:`${_r(e.paddingMD)} ${_r(e.paddingContentHorizontalLG)}`,headerPadding:e.wireframe?`${_r(e.padding)} ${_r(e.paddingLG)}`:0,headerBorderBottom:e.wireframe?`${_r(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",headerMarginBottom:e.wireframe?0:e.marginXS,bodyPadding:e.wireframe?e.paddingLG:0,footerPadding:e.wireframe?`${_r(e.paddingXS)} ${_r(e.padding)}`:0,footerBorderTop:e.wireframe?`${_r(e.lineWidth)} ${e.lineType} ${e.colorSplit}`:"none",footerBorderRadius:e.wireframe?`0 0 ${_r(e.borderRadiusLG)} ${_r(e.borderRadiusLG)}`:0,footerMarginTop:e.wireframe?0:e.marginSM,confirmBodyPadding:e.wireframe?`${_r(e.padding*2)} ${_r(e.padding*2)} ${_r(e.paddingLG)}`:0,confirmIconMarginInlineEnd:e.wireframe?e.margin:e.marginSM,confirmBtnsMarginTop:e.wireframe?e.marginLG:e.marginSM}),QA=ip("Modal",e=>{const t=YA(e);return[YF(t),KF(t),WF(t),MN(t,"zoom"),QF(t)]},KA,{unitless:{titleLineHeight:!0}});var JF=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};let B1;const e$=e=>{B1={x:e.pageX,y:e.pageY},setTimeout(()=>{B1=null},100)};bF()&&document.documentElement.addEventListener("click",e$,!0);const JA=e=>{const{prefixCls:t,className:i,rootClassName:a,open:f,wrapClassName:v,centered:g,getContainer:u,focusTriggerAfterClose:E=!0,style:P,visible:I,width:B=520,footer:j,classNames:$,styles:X,children:J,loading:G,confirmLoading:le,zIndex:oe,mousePosition:pe,onOk:he,onCancel:ae,destroyOnHidden:ve,destroyOnClose:Se}=e,ke=JF(e,["prefixCls","className","rootClassName","open","wrapClassName","centered","getContainer","focusTriggerAfterClose","style","visible","width","footer","classNames","styles","children","loading","confirmLoading","zIndex","mousePosition","onOk","onCancel","destroyOnHidden","destroyOnClose"]),{getPopupContainer:Le,getPrefixCls:Re,direction:me,modal:Ae}=U.useContext(Ei),He=$t=>{le||ae==null||ae($t)},We=$t=>{he==null||he($t)},pt=Re("modal",t),xe=Re(),et=eg(pt),[Qe,Rt,we]=QA(pt,et),tt=Mn(v,{[`${pt}-centered`]:g??(Ae==null?void 0:Ae.centered),[`${pt}-wrap-rtl`]:me==="rtl"}),_t=j!==null&&!G?U.createElement(XA,Object.assign({},e,{onOk:We,onCancel:He})):null,[Pt,At,St,qt]=vF($C(e),$C(Ae),{closable:!0,closeIcon:U.createElement(Yy,{className:`${pt}-close-icon`}),closeIconRender:$t=>ZA(pt,$t)}),Xe=VF(`.${pt}-content`),[mt,ft]=mB("Modal",oe),[Ke,Je]=U.useMemo(()=>B&&typeof B=="object"?[void 0,B]:[B,void 0],[B]),Vt=U.useMemo(()=>{const $t={};return Je&&Object.keys(Je).forEach(Kt=>{const Gt=Je[Kt];Gt!==void 0&&($t[`--${pt}-${Kt}-width`]=typeof Gt=="number"?`${Gt}px`:Gt)}),$t},[Je]);return Qe(U.createElement(yF,{form:!0,space:!0},U.createElement(xA.Provider,{value:ft},U.createElement(FA,Object.assign({width:Ke},ke,{zIndex:mt,getContainer:u===void 0?Le:u,prefixCls:pt,rootClassName:Mn(Rt,a,we,et),footer:_t,visible:f??I,mousePosition:pe??B1,onClose:He,closable:Pt&&Object.assign({disabled:St,closeIcon:At},qt),closeIcon:At,focusTriggerAfterClose:E,transitionName:l0(xe,"zoom",e.transitionName),maskTransitionName:l0(xe,"fade",e.maskTransitionName),className:Mn(Rt,i,Ae==null?void 0:Ae.className),style:Object.assign(Object.assign(Object.assign({},Ae==null?void 0:Ae.style),P),Vt),classNames:Object.assign(Object.assign(Object.assign({},Ae==null?void 0:Ae.classNames),$),{wrapper:Mn(tt,$==null?void 0:$.wrapper)}),styles:Object.assign(Object.assign({},Ae==null?void 0:Ae.styles),X),panelRef:Xe,destroyOnClose:ve??Se}),G?U.createElement(ng,{active:!0,title:!1,paragraph:{rows:4},className:`${pt}-body-skeleton`}):J))))},t$=e=>{const{componentCls:t,titleFontSize:i,titleLineHeight:a,modalConfirmIconSize:f,fontSize:v,lineHeight:g,modalTitleHeight:u,fontHeight:E,confirmBodyPadding:P}=e,I=`${t}-confirm`;return{[I]:{"&-rtl":{direction:"rtl"},[`${e.antCls}-modal-header`]:{display:"none"},[`${I}-body-wrapper`]:Object.assign({},U4()),[`&${t} ${t}-body`]:{padding:P},[`${I}-body`]:{display:"flex",flexWrap:"nowrap",alignItems:"start",[`> ${e.iconCls}`]:{flex:"none",fontSize:f,marginInlineEnd:e.confirmIconMarginInlineEnd,marginTop:e.calc(e.calc(E).sub(f).equal()).div(2).equal()},[`&-has-title > ${e.iconCls}`]:{marginTop:e.calc(e.calc(u).sub(f).equal()).div(2).equal()}},[`${I}-paragraph`]:{display:"flex",flexDirection:"column",flex:"auto",rowGap:e.marginXS,maxWidth:`calc(100% - ${_r(e.marginSM)})`},[`${e.iconCls} + ${I}-paragraph`]:{maxWidth:`calc(100% - ${_r(e.calc(e.modalConfirmIconSize).add(e.marginSM).equal())})`},[`${I}-title`]:{color:e.colorTextHeading,fontWeight:e.fontWeightStrong,fontSize:i,lineHeight:a},[`${I}-content`]:{color:e.colorText,fontSize:v,lineHeight:g},[`${I}-btns`]:{textAlign:"end",marginTop:e.confirmBtnsMarginTop,[`${e.antCls}-btn + ${e.antCls}-btn`]:{marginBottom:0,marginInlineStart:e.marginXS}}},[`${I}-error ${I}-body > ${e.iconCls}`]:{color:e.colorError},[`${I}-warning ${I}-body > ${e.iconCls},
        ${I}-confirm ${I}-body > ${e.iconCls}`]:{color:e.colorWarning},[`${I}-info ${I}-body > ${e.iconCls}`]:{color:e.colorInfo},[`${I}-success ${I}-body > ${e.iconCls}`]:{color:e.colorSuccess}}},n$=Iw(["Modal","confirm"],e=>{const t=YA(e);return[t$(t)]},KA,{order:-1e3});var r$=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};function eP(e){const{prefixCls:t,icon:i,okText:a,cancelText:f,confirmPrefixCls:v,type:g,okCancel:u,footer:E,locale:P}=e,I=r$(e,["prefixCls","icon","okText","cancelText","confirmPrefixCls","type","okCancel","footer","locale"]);let B=i;if(!i&&i!==null)switch(g){case"info":B=U.createElement(Nw,null);break;case"success":B=U.createElement(Dw,null);break;case"error":B=U.createElement(Lw,null);break;default:B=U.createElement(Bw,null)}const j=u??g==="confirm",$=e.autoFocusButton===null?!1:e.autoFocusButton||"ok",[X]=z0("Modal"),J=P||X,G=a||(j?J==null?void 0:J.okText:J==null?void 0:J.justOkText),le=f||(J==null?void 0:J.cancelText),oe=Object.assign({autoFocusButton:$,cancelTextLocale:le,okTextLocale:G,mergedOkCancel:j},I),pe=U.useMemo(()=>oe,wn(Object.values(oe))),he=U.createElement(U.Fragment,null,U.createElement(bC,null),U.createElement(xC,null)),ae=e.title!==void 0&&e.title!==null,ve=`${v}-body`;return U.createElement("div",{className:`${v}-body-wrapper`},U.createElement("div",{className:Mn(ve,{[`${ve}-has-title`]:ae})},B,U.createElement("div",{className:`${v}-paragraph`},ae&&U.createElement("span",{className:`${v}-title`},e.title),U.createElement("div",{className:`${v}-content`},e.content))),E===void 0||typeof E=="function"?U.createElement(DA,{value:pe},U.createElement("div",{className:`${v}-btns`},typeof E=="function"?E(he,{OkBtn:xC,CancelBtn:bC}):he)):E,U.createElement(n$,{prefixCls:t}))}const i$=e=>{const{close:t,zIndex:i,maskStyle:a,direction:f,prefixCls:v,wrapClassName:g,rootPrefixCls:u,bodyStyle:E,closable:P=!1,onConfirm:I,styles:B}=e,j=`${v}-confirm`,$=e.width||416,X=e.style||{},J=e.mask===void 0?!0:e.mask,G=e.maskClosable===void 0?!1:e.maskClosable,le=Mn(j,`${j}-${e.type}`,{[`${j}-rtl`]:f==="rtl"},e.className),[,oe]=Uu(),pe=U.useMemo(()=>i!==void 0?i:oe.zIndexPopupBase+Fw,[i,oe]);return U.createElement(JA,Object.assign({},e,{className:le,wrapClassName:Mn({[`${j}-centered`]:!!e.centered},g),onCancel:()=>{t==null||t({triggerCancel:!0}),I==null||I(!1)},title:"",footer:null,transitionName:l0(u||"","zoom",e.transitionName),maskTransitionName:l0(u||"","fade",e.maskTransitionName),mask:J,maskClosable:G,style:X,styles:Object.assign({body:E,mask:a},B),width:$,zIndex:pe,closable:P}),U.createElement(eP,Object.assign({},e,{confirmPrefixCls:j})))},tP=e=>{const{rootPrefixCls:t,iconPrefixCls:i,direction:a,theme:f}=e;return U.createElement(Nl,{prefixCls:t,iconPrefixCls:i,direction:a,theme:f},U.createElement(i$,Object.assign({},e)))},Nd=[];let nP="";function rP(){return nP}const a$=e=>{var t,i;const{prefixCls:a,getContainer:f,direction:v}=e,g=NM(),u=U.useContext(Ei),E=rP()||u.getPrefixCls(),P=a||`${E}-modal`;let I=f;return I===!1&&(I=void 0),Nt.createElement(tP,Object.assign({},e,{rootPrefixCls:E,prefixCls:P,iconPrefixCls:u.iconPrefixCls,theme:u.theme,direction:v??u.direction,locale:(i=(t=u.locale)===null||t===void 0?void 0:t.Modal)!==null&&i!==void 0?i:g,getContainer:I}))};function n_(e){const t=zw(),i=document.createDocumentFragment();let a=Object.assign(Object.assign({},e),{close:E,open:!0}),f,v;function g(...I){var B;if(I.some(X=>X==null?void 0:X.triggerCancel)){var $;(B=e.onCancel)===null||B===void 0||($=B).call.apply($,[e,()=>{}].concat(wn(I.slice(1))))}for(let X=0;X<Nd.length;X++)if(Nd[X]===E){Nd.splice(X,1);break}v()}function u(I){clearTimeout(f),f=setTimeout(()=>{const B=t.getPrefixCls(void 0,rP()),j=t.getIconPrefixCls(),$=t.getTheme(),X=Nt.createElement(a$,Object.assign({},I));v=j0()(Nt.createElement(Nl,{prefixCls:B,iconPrefixCls:j,theme:$},t.holderRender?t.holderRender(X):X),i)})}function E(...I){a=Object.assign(Object.assign({},a),{open:!1,afterClose:()=>{typeof e.afterClose=="function"&&e.afterClose(),g.apply(this,I)}}),a.visible&&delete a.visible,u(a)}function P(I){typeof I=="function"?a=I(a):a=Object.assign(Object.assign({},a),I),u(a)}return u(a),Nd.push(E),{destroy:E,update:P}}function iP(e){return Object.assign(Object.assign({},e),{type:"warning"})}function aP(e){return Object.assign(Object.assign({},e),{type:"info"})}function oP(e){return Object.assign(Object.assign({},e),{type:"success"})}function sP(e){return Object.assign(Object.assign({},e),{type:"error"})}function lP(e){return Object.assign(Object.assign({},e),{type:"confirm"})}function o$({rootPrefixCls:e}){nP=e}var s$=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const l$=(e,t)=>{var i,{afterClose:a,config:f}=e,v=s$(e,["afterClose","config"]);const[g,u]=U.useState(!0),[E,P]=U.useState(f),{direction:I,getPrefixCls:B}=U.useContext(Ei),j=B("modal"),$=B(),X=()=>{var oe;a(),(oe=E.afterClose)===null||oe===void 0||oe.call(E)},J=(...oe)=>{var pe;if(u(!1),oe.some(ve=>ve==null?void 0:ve.triggerCancel)){var ae;(pe=E.onCancel)===null||pe===void 0||(ae=pe).call.apply(ae,[E,()=>{}].concat(wn(oe.slice(1))))}};U.useImperativeHandle(t,()=>({destroy:J,update:oe=>{P(pe=>{const he=typeof oe=="function"?oe(pe):oe;return Object.assign(Object.assign({},pe),he)})}}));const G=(i=E.okCancel)!==null&&i!==void 0?i:E.type==="confirm",[le]=z0("Modal",Uf.Modal);return U.createElement(tP,Object.assign({prefixCls:j,rootPrefixCls:$},E,{close:J,open:g,afterClose:X,okText:E.okText||(G?le==null?void 0:le.okText:le==null?void 0:le.justOkText),direction:E.direction||I,cancelText:E.cancelText||(le==null?void 0:le.cancelText)},v))},c$=U.forwardRef(l$);let XC=0;const u$=U.memo(U.forwardRef((e,t)=>{const[i,a]=PB();return U.useImperativeHandle(t,()=>({patchElement:a}),[]),U.createElement(U.Fragment,null,i)}));function h$(){const e=U.useRef(null),[t,i]=U.useState([]);U.useEffect(()=>{t.length&&(wn(t).forEach(g=>{g()}),i([]))},[t]);const a=U.useCallback(v=>function(u){var E;XC+=1;const P=U.createRef();let I;const B=new Promise(G=>{I=G});let j=!1,$;const X=U.createElement(c$,{key:`modal-${XC}`,config:v(u),ref:P,afterClose:()=>{$==null||$()},isSilent:()=>j,onConfirm:G=>{I(G)}});return $=(E=e.current)===null||E===void 0?void 0:E.patchElement(X),$&&Nd.push($),{destroy:()=>{function G(){var le;(le=P.current)===null||le===void 0||le.destroy()}P.current?G():i(le=>[].concat(wn(le),[G]))},update:G=>{function le(){var oe;(oe=P.current)===null||oe===void 0||oe.update(G)}P.current?le():i(oe=>[].concat(wn(oe),[le]))},then:G=>(j=!0,B.then(G))}},[]);return[U.useMemo(()=>({info:a(aP),success:a(oP),error:a(sP),warning:a(iP),confirm:a(lP)}),[]),U.createElement(u$,{key:"modal-holder",ref:e})]}const f$=e=>{const{componentCls:t,notificationMarginEdge:i,animationMaxHeight:a}=e,f=`${t}-notice`,v=new Qi("antNotificationFadeIn",{"0%":{transform:"translate3d(100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}}),g=new Qi("antNotificationTopFadeIn",{"0%":{top:-a,opacity:0},"100%":{top:0,opacity:1}}),u=new Qi("antNotificationBottomFadeIn",{"0%":{bottom:e.calc(a).mul(-1).equal(),opacity:0},"100%":{bottom:0,opacity:1}}),E=new Qi("antNotificationLeftFadeIn",{"0%":{transform:"translate3d(-100%, 0, 0)",opacity:0},"100%":{transform:"translate3d(0, 0, 0)",opacity:1}});return{[t]:{[`&${t}-top, &${t}-bottom`]:{marginInline:0,[f]:{marginInline:"auto auto"}},[`&${t}-top`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:g}},[`&${t}-bottom`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:u}},[`&${t}-topRight, &${t}-bottomRight`]:{[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:v}},[`&${t}-topLeft, &${t}-bottomLeft`]:{marginRight:{value:0,_skip_check_:!0},marginLeft:{value:i,_skip_check_:!0},[f]:{marginInlineEnd:"auto",marginInlineStart:0},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationName:E}}}}},d$=["top","topLeft","topRight","bottom","bottomLeft","bottomRight"],p$={topLeft:"left",topRight:"right",bottomLeft:"left",bottomRight:"right",top:"left",bottom:"left"},m$=(e,t)=>{const{componentCls:i}=e;return{[`${i}-${t}`]:{[`&${i}-stack > ${i}-notice-wrapper`]:{[t.startsWith("top")?"top":"bottom"]:0,[p$[t]]:{value:0,_skip_check_:!0}}}}},g$=e=>{const t={};for(let i=1;i<e.notificationStackLayer;i++)t[`&:nth-last-child(${i+1})`]={overflow:"hidden",[`& > ${e.componentCls}-notice`]:{opacity:0,transition:`opacity ${e.motionDurationMid}`}};return Object.assign({[`&:not(:nth-last-child(-n+${e.notificationStackLayer}))`]:{opacity:0,overflow:"hidden",color:"transparent",pointerEvents:"none"}},t)},y$=e=>{const t={};for(let i=1;i<e.notificationStackLayer;i++)t[`&:nth-last-child(${i+1})`]={background:e.colorBgBlur,backdropFilter:"blur(10px)","-webkit-backdrop-filter":"blur(10px)"};return Object.assign({},t)},_$=e=>{const{componentCls:t}=e;return Object.assign({[`${t}-stack`]:{[`& > ${t}-notice-wrapper`]:Object.assign({transition:`transform ${e.motionDurationSlow}, backdrop-filter 0s`,willChange:"transform, opacity",position:"absolute"},g$(e))},[`${t}-stack:not(${t}-stack-expanded)`]:{[`& > ${t}-notice-wrapper`]:Object.assign({},y$(e))},[`${t}-stack${t}-stack-expanded`]:{[`& > ${t}-notice-wrapper`]:{"&:not(:nth-last-child(-n + 1))":{opacity:1,overflow:"unset",color:"inherit",pointerEvents:"auto",[`& > ${e.componentCls}-notice`]:{opacity:1}},"&:after":{content:'""',position:"absolute",height:e.margin,width:"100%",insetInline:0,bottom:e.calc(e.margin).mul(-1).equal(),background:"transparent",pointerEvents:"auto"}}}},d$.map(i=>m$(e,i)).reduce((i,a)=>Object.assign(Object.assign({},i),a),{}))},cP=e=>{const{iconCls:t,componentCls:i,boxShadow:a,fontSizeLG:f,notificationMarginBottom:v,borderRadiusLG:g,colorSuccess:u,colorInfo:E,colorWarning:P,colorError:I,colorTextHeading:B,notificationBg:j,notificationPadding:$,notificationMarginEdge:X,notificationProgressBg:J,notificationProgressHeight:G,fontSize:le,lineHeight:oe,width:pe,notificationIconSize:he,colorText:ae}=e,ve=`${i}-notice`;return{position:"relative",marginBottom:v,marginInlineStart:"auto",background:j,borderRadius:g,boxShadow:a,[ve]:{padding:$,width:pe,maxWidth:`calc(100vw - ${_r(e.calc(X).mul(2).equal())})`,overflow:"hidden",lineHeight:oe,wordWrap:"break-word"},[`${ve}-message`]:{color:B,fontSize:f,lineHeight:e.lineHeightLG},[`${ve}-description`]:{fontSize:le,color:ae,marginTop:e.marginXS},[`${ve}-closable ${ve}-message`]:{paddingInlineEnd:e.paddingLG},[`${ve}-with-icon ${ve}-message`]:{marginInlineStart:e.calc(e.marginSM).add(he).equal(),fontSize:f},[`${ve}-with-icon ${ve}-description`]:{marginInlineStart:e.calc(e.marginSM).add(he).equal(),fontSize:le},[`${ve}-icon`]:{position:"absolute",fontSize:he,lineHeight:1,[`&-success${t}`]:{color:u},[`&-info${t}`]:{color:E},[`&-warning${t}`]:{color:P},[`&-error${t}`]:{color:I}},[`${ve}-close`]:Object.assign({position:"absolute",top:e.notificationPaddingVertical,insetInlineEnd:e.notificationPaddingHorizontal,color:e.colorIcon,outline:"none",width:e.notificationCloseButtonSize,height:e.notificationCloseButtonSize,borderRadius:e.borderRadiusSM,transition:`background-color ${e.motionDurationMid}, color ${e.motionDurationMid}`,display:"flex",alignItems:"center",justifyContent:"center",background:"none",border:"none","&:hover":{color:e.colorIconHover,backgroundColor:e.colorBgTextHover},"&:active":{backgroundColor:e.colorBgTextActive}},Ow(e)),[`${ve}-progress`]:{position:"absolute",display:"block",appearance:"none",inlineSize:`calc(100% - ${_r(g)} * 2)`,left:{_skip_check_:!0,value:g},right:{_skip_check_:!0,value:g},bottom:0,blockSize:G,border:0,"&, &::-webkit-progress-bar":{borderRadius:g,backgroundColor:"rgba(0, 0, 0, 0.04)"},"&::-moz-progress-bar":{background:J},"&::-webkit-progress-value":{borderRadius:g,background:J}},[`${ve}-actions`]:{float:"right",marginTop:e.marginSM}}},v$=e=>{const{componentCls:t,notificationMarginBottom:i,notificationMarginEdge:a,motionDurationMid:f,motionEaseInOut:v}=e,g=`${t}-notice`,u=new Qi("antNotificationFadeOut",{"0%":{maxHeight:e.animationMaxHeight,marginBottom:i},"100%":{maxHeight:0,marginBottom:0,paddingTop:0,paddingBottom:0,opacity:0}});return[{[t]:Object.assign(Object.assign({},Rw(e)),{position:"fixed",zIndex:e.zIndexPopup,marginRight:{value:a,_skip_check_:!0},[`${t}-hook-holder`]:{position:"relative"},[`${t}-fade-appear-prepare`]:{opacity:"0 !important"},[`${t}-fade-enter, ${t}-fade-appear`]:{animationDuration:e.motionDurationMid,animationTimingFunction:v,animationFillMode:"both",opacity:0,animationPlayState:"paused"},[`${t}-fade-leave`]:{animationTimingFunction:v,animationFillMode:"both",animationDuration:f,animationPlayState:"paused"},[`${t}-fade-enter${t}-fade-enter-active, ${t}-fade-appear${t}-fade-appear-active`]:{animationPlayState:"running"},[`${t}-fade-leave${t}-fade-leave-active`]:{animationName:u,animationPlayState:"running"},"&-rtl":{direction:"rtl",[`${g}-actions`]:{float:"left"}}})},{[t]:{[`${g}-wrapper`]:Object.assign({},cP(e))}}]},uP=e=>({zIndexPopup:e.zIndexPopupBase+Fw+50,width:384}),hP=e=>{const t=e.paddingMD,i=e.paddingLG;return Fc(e,{notificationBg:e.colorBgElevated,notificationPaddingVertical:t,notificationPaddingHorizontal:i,notificationIconSize:e.calc(e.fontSizeLG).mul(e.lineHeightLG).equal(),notificationCloseButtonSize:e.calc(e.controlHeightLG).mul(.55).equal(),notificationMarginBottom:e.margin,notificationPadding:`${_r(e.paddingMD)} ${_r(e.paddingContentHorizontalLG)}`,notificationMarginEdge:e.marginLG,animationMaxHeight:150,notificationStackLayer:3,notificationProgressHeight:2,notificationProgressBg:`linear-gradient(90deg, ${e.colorPrimaryBorderHover}, ${e.colorPrimary})`})},fP=ip("Notification",e=>{const t=hP(e);return[v$(t),f$(t),_$(t)]},uP),b$=Iw(["Notification","PurePanel"],e=>{const t=`${e.componentCls}-notice`,i=hP(e);return{[`${t}-pure-panel`]:Object.assign(Object.assign({},cP(i)),{width:i.width,maxWidth:`calc(100vw - ${_r(e.calc(i.notificationMarginEdge).mul(2).equal())})`,margin:0})}},uP);var x$=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};function Hw(e,t){return t===null||t===!1?null:t||U.createElement(Yy,{className:`${e}-close-icon`})}const w$={success:Dw,info:Nw,error:Lw,warning:Bw},dP=e=>{const{prefixCls:t,icon:i,type:a,message:f,description:v,actions:g,role:u="alert"}=e;let E=null;return i?E=U.createElement("span",{className:`${t}-icon`},i):a&&(E=U.createElement(w$[a]||null,{className:Mn(`${t}-icon`,`${t}-icon-${a}`)})),U.createElement("div",{className:Mn({[`${t}-with-icon`]:E}),role:u},E,U.createElement("div",{className:`${t}-message`},f),v&&U.createElement("div",{className:`${t}-description`},v),g&&U.createElement("div",{className:`${t}-actions`},g))},S$=e=>{const{prefixCls:t,className:i,icon:a,type:f,message:v,description:g,btn:u,actions:E,closable:P=!0,closeIcon:I,className:B}=e,j=x$(e,["prefixCls","className","icon","type","message","description","btn","actions","closable","closeIcon","className"]),{getPrefixCls:$}=U.useContext(Ei),X=E??u,J=t||$("notification"),G=`${J}-notice`,le=eg(J),[oe,pe,he]=fP(J,le);return oe(U.createElement("div",{className:Mn(`${G}-pure-panel`,pe,i,he,le)},U.createElement(b$,{prefixCls:J}),U.createElement(jw,Object.assign({},j,{prefixCls:J,eventKey:"pure",duration:null,closable:P,className:Mn({notificationClassName:B}),closeIcon:Hw(J,I),content:U.createElement(dP,{prefixCls:G,icon:a,type:f,message:v,description:g,actions:X})}))))};function C$(e,t,i){let a;switch(e){case"top":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:t,bottom:"auto"};break;case"topLeft":a={left:0,top:t,bottom:"auto"};break;case"topRight":a={right:0,top:t,bottom:"auto"};break;case"bottom":a={left:"50%",transform:"translateX(-50%)",right:"auto",top:"auto",bottom:i};break;case"bottomLeft":a={left:0,top:"auto",bottom:i};break;default:a={right:0,top:"auto",bottom:i};break}return a}function T$(e){return{motionName:`${e}-fade`}}function E$(e,t,i){return typeof e<"u"?e:typeof(t==null?void 0:t.closeIcon)<"u"?t.closeIcon:i==null?void 0:i.closeIcon}var M$=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const WC=24,A$=4.5,P$="topRight",R$=({children:e,prefixCls:t})=>{const i=eg(t),[a,f,v]=fP(t,i);return a(Nt.createElement(_A,{classNames:{list:Mn(f,v,i)}},e))},O$=(e,{prefixCls:t,key:i})=>Nt.createElement(R$,{prefixCls:t,key:i},e),I$=Nt.forwardRef((e,t)=>{const{top:i,bottom:a,prefixCls:f,getContainer:v,maxCount:g,rtl:u,onAllRemoved:E,stack:P,duration:I,pauseOnHover:B=!0,showProgress:j}=e,{getPrefixCls:$,getPopupContainer:X,notification:J,direction:G}=U.useContext(Ei),[,le]=Uu(),oe=f||$("notification"),pe=ke=>C$(ke,i??WC,a??WC),he=()=>Mn({[`${oe}-rtl`]:u??G==="rtl"}),ae=()=>T$(oe),[ve,Se]=vA({prefixCls:oe,style:pe,className:he,motion:ae,closable:!0,closeIcon:Hw(oe),duration:I??A$,getContainer:()=>(v==null?void 0:v())||(X==null?void 0:X())||document.body,maxCount:g,pauseOnHover:B,showProgress:j,onAllRemoved:E,renderNotifications:O$,stack:P===!1?!1:{threshold:typeof P=="object"?P==null?void 0:P.threshold:void 0,offset:8,gap:le.margin}});return Nt.useImperativeHandle(t,()=>Object.assign(Object.assign({},ve),{prefixCls:oe,notification:J})),Se});function pP(e){const t=Nt.useRef(null);return[Nt.useMemo(()=>{const a=u=>{var E;if(!t.current)return;const{open:P,prefixCls:I,notification:B}=t.current,j=`${I}-notice`,{message:$,description:X,icon:J,type:G,btn:le,actions:oe,className:pe,style:he,role:ae="alert",closeIcon:ve,closable:Se}=u,ke=M$(u,["message","description","icon","type","btn","actions","className","style","role","closeIcon","closable"]),Le=oe??le,Re=Hw(j,E$(ve,e,B));return P(Object.assign(Object.assign({placement:(E=e==null?void 0:e.placement)!==null&&E!==void 0?E:P$},ke),{content:Nt.createElement(dP,{prefixCls:j,icon:J,type:G,message:$,description:X,actions:Le,role:ae}),className:Mn(G&&`${j}-${G}`,pe,B==null?void 0:B.className),style:Object.assign(Object.assign({},B==null?void 0:B.style),he),closeIcon:Re,closable:Se??!!Re}))},v={open:a,destroy:u=>{var E,P;u!==void 0?(E=t.current)===null||E===void 0||E.close(u):(P=t.current)===null||P===void 0||P.destroy()}};return["success","info","warning","error"].forEach(u=>{v[u]=E=>a(Object.assign(Object.assign({},E),{type:u}))}),v},[]),Nt.createElement(I$,Object.assign({key:"notification-holder"},e,{ref:t}))]}function k$(e){return pP(e)}const mP=Nt.createContext({});function z$(e){return t=>U.createElement(Nl,{theme:{token:{motion:!1,zIndexPopupBase:0}}},U.createElement(e,Object.assign({},t)))}let Ol=null,jd=e=>e(),ky=[],zy={};function YC(){const{getContainer:e,duration:t,rtl:i,maxCount:a,top:f}=zy,v=(e==null?void 0:e())||document.body;return{getContainer:()=>v,duration:t,rtl:i,maxCount:a,top:f}}const D$=Nt.forwardRef((e,t)=>{const{messageConfig:i,sync:a}=e,{getPrefixCls:f}=U.useContext(Ei),v=zy.prefixCls||f("message"),g=U.useContext(mP),[u,E]=TA(Object.assign(Object.assign(Object.assign({},i),{prefixCls:v}),g.message));return Nt.useImperativeHandle(t,()=>{const P=Object.assign({},u);return Object.keys(P).forEach(I=>{P[I]=(...B)=>(a(),u[I].apply(u,B))}),{instance:P,sync:a}}),E}),L$=Nt.forwardRef((e,t)=>{const[i,a]=Nt.useState(YC),f=()=>{a(YC)};Nt.useEffect(f,[]);const v=zw(),g=v.getRootPrefixCls(),u=v.getIconPrefixCls(),E=v.getTheme(),P=Nt.createElement(D$,{ref:t,sync:f,messageConfig:i});return Nt.createElement(Nl,{prefixCls:g,iconPrefixCls:u,theme:E},v.holderRender?v.holderRender(P):P)});function W0(){if(!Ol){const e=document.createDocumentFragment(),t={fragment:e};Ol=t,jd(()=>{j0()(Nt.createElement(L$,{ref:a=>{const{instance:f,sync:v}=a||{};Promise.resolve().then(()=>{!t.instance&&f&&(t.instance=f,t.sync=v,W0())})}}),e)});return}Ol.instance&&(ky.forEach(e=>{const{type:t,skipped:i}=e;if(!i)switch(t){case"open":{jd(()=>{const a=Ol.instance.open(Object.assign(Object.assign({},zy),e.config));a==null||a.then(e.resolve),e.setCloseFn(a)});break}case"destroy":jd(()=>{Ol==null||Ol.instance.destroy(e.key)});break;default:jd(()=>{var a;const f=(a=Ol.instance)[t].apply(a,wn(e.args));f==null||f.then(e.resolve),e.setCloseFn(f)})}}),ky=[])}function B$(e){zy=Object.assign(Object.assign({},zy),e),jd(()=>{var t;(t=Ol==null?void 0:Ol.sync)===null||t===void 0||t.call(Ol)})}function N$(e){const t=$w(i=>{let a;const f={type:"open",config:e,resolve:i,setCloseFn:v=>{a=v}};return ky.push(f),()=>{a?jd(()=>{a()}):f.skipped=!0}});return W0(),t}function j$(e,t){const i=$w(a=>{let f;const v={type:e,args:t,resolve:a,setCloseFn:g=>{f=g}};return ky.push(v),()=>{f?jd(()=>{f()}):v.skipped=!0}});return W0(),i}const F$=e=>{ky.push({type:"destroy",key:e}),W0()},$$=["success","info","warning","error","loading"],V$={open:N$,destroy:F$,config:B$,useMessage:AB,_InternalPanelDoNotUseOrYouWillBeFired:bB},gP=V$;$$.forEach(e=>{gP[e]=(...t)=>j$(e,t)});var U$=function(e,t){var i={};for(var a in e)Object.prototype.hasOwnProperty.call(e,a)&&t.indexOf(a)<0&&(i[a]=e[a]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var f=0,a=Object.getOwnPropertySymbols(e);f<a.length;f++)t.indexOf(a[f])<0&&Object.prototype.propertyIsEnumerable.call(e,a[f])&&(i[a[f]]=e[a[f]]);return i};const H$=e=>{const{prefixCls:t,className:i,closeIcon:a,closable:f,type:v,title:g,children:u,footer:E}=e,P=U$(e,["prefixCls","className","closeIcon","closable","type","title","children","footer"]),{getPrefixCls:I}=U.useContext(Ei),B=I(),j=t||I("modal"),$=eg(B),[X,J,G]=QA(j,$),le=`${j}-confirm`;let oe={};return v?oe={closable:f??!1,title:"",footer:"",children:U.createElement(eP,Object.assign({},e,{prefixCls:j,confirmPrefixCls:le,rootPrefixCls:B,content:u}))}:oe={closable:f??!0,title:g,footer:E!==null&&U.createElement(XA,Object.assign({},e)),children:u},X(U.createElement(NA,Object.assign({prefixCls:j,className:Mn(J,`${j}-pure-panel`,v&&le,v&&`${le}-${v}`,i,G,$)},P,{closeIcon:ZA(j,a),closable:f},oe)))},q$=z$(H$);function yP(e){return n_(iP(e))}const $c=JA;$c.useModal=h$;$c.info=function(t){return n_(aP(t))};$c.success=function(t){return n_(oP(t))};$c.error=function(t){return n_(sP(t))};$c.warning=yP;$c.warn=yP;$c.confirm=function(t){return n_(lP(t))};$c.destroyAll=function(){for(;Nd.length;){const t=Nd.pop();t&&t()}};$c.config=o$;$c._InternalPanelDoNotUseOrYouWillBeFired=q$;let Pc=null,Rv=e=>e(),u0=[],Dy={};function KC(){const{getContainer:e,rtl:t,maxCount:i,top:a,bottom:f,showProgress:v,pauseOnHover:g}=Dy,u=(e==null?void 0:e())||document.body;return{getContainer:()=>u,rtl:t,maxCount:i,top:a,bottom:f,showProgress:v,pauseOnHover:g}}const G$=Nt.forwardRef((e,t)=>{const{notificationConfig:i,sync:a}=e,{getPrefixCls:f}=U.useContext(Ei),v=Dy.prefixCls||f("notification"),g=U.useContext(mP),[u,E]=pP(Object.assign(Object.assign(Object.assign({},i),{prefixCls:v}),g.notification));return Nt.useEffect(a,[]),Nt.useImperativeHandle(t,()=>{const P=Object.assign({},u);return Object.keys(P).forEach(I=>{P[I]=(...B)=>(a(),u[I].apply(u,B))}),{instance:P,sync:a}}),E}),Z$=Nt.forwardRef((e,t)=>{const[i,a]=Nt.useState(KC),f=()=>{a(KC)};Nt.useEffect(f,[]);const v=zw(),g=v.getRootPrefixCls(),u=v.getIconPrefixCls(),E=v.getTheme(),P=Nt.createElement(G$,{ref:t,sync:f,notificationConfig:i});return Nt.createElement(Nl,{prefixCls:g,iconPrefixCls:u,theme:E},v.holderRender?v.holderRender(P):P)});function qw(){if(!Pc){const e=document.createDocumentFragment(),t={fragment:e};Pc=t,Rv(()=>{j0()(Nt.createElement(Z$,{ref:a=>{const{instance:f,sync:v}=a||{};Promise.resolve().then(()=>{!t.instance&&f&&(t.instance=f,t.sync=v,qw())})}}),e)});return}Pc.instance&&(u0.forEach(e=>{switch(e.type){case"open":{Rv(()=>{Pc.instance.open(Object.assign(Object.assign({},Dy),e.config))});break}case"destroy":Rv(()=>{Pc==null||Pc.instance.destroy(e.key)});break}}),u0=[])}function X$(e){Dy=Object.assign(Object.assign({},Dy),e),Rv(()=>{var t;(t=Pc==null?void 0:Pc.sync)===null||t===void 0||t.call(Pc)})}function _P(e){u0.push({type:"open",config:e}),qw()}const W$=e=>{u0.push({type:"destroy",key:e}),qw()},Y$=["success","info","warning","error"],K$={open:_P,destroy:W$,config:X$,useNotification:k$,_InternalPanelDoNotUseOrYouWillBeFired:S$},vP=K$;Y$.forEach(e=>{vP[e]=t=>_P(Object.assign(Object.assign({},t),{type:e}))});const Q$=e=>{const t=e!=null&&e.algorithm?Jv(e.algorithm):Ew,i=Object.assign(Object.assign({},Hm),e==null?void 0:e.token);return wM(i,{override:e==null?void 0:e.token},t,Pw)};function J$(e){const{sizeUnit:t,sizeStep:i}=e,a=i-2;return{sizeXXL:t*(a+10),sizeXL:t*(a+6),sizeLG:t*(a+2),sizeMD:t*(a+2),sizeMS:t*(a+1),size:t*a,sizeSM:t*a,sizeXS:t*(a-1),sizeXXS:t*(a-1)}}const e8=(e,t)=>{const i=t??D0(e),a=i.fontSizeSM,f=i.controlHeight-4;return Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},i),J$(t??e)),UM(a)),{controlHeight:f}),VM(Object.assign(Object.assign({},i),{controlHeight:f})))},Rl=(e,t)=>new zi(e).setA(t).toRgbString(),_m=(e,t)=>new zi(e).lighten(t).toHexString(),t8=e=>{const t=Kd(e,{theme:"dark"});return{1:t[0],2:t[1],3:t[2],4:t[3],5:t[6],6:t[5],7:t[4],8:t[6],9:t[5],10:t[4]}},n8=(e,t)=>{const i=e||"#000",a=t||"#fff";return{colorBgBase:i,colorTextBase:a,colorText:Rl(a,.85),colorTextSecondary:Rl(a,.65),colorTextTertiary:Rl(a,.45),colorTextQuaternary:Rl(a,.25),colorFill:Rl(a,.18),colorFillSecondary:Rl(a,.12),colorFillTertiary:Rl(a,.08),colorFillQuaternary:Rl(a,.04),colorBgSolid:Rl(a,.95),colorBgSolidHover:Rl(a,1),colorBgSolidActive:Rl(a,.9),colorBgElevated:_m(i,12),colorBgContainer:_m(i,8),colorBgLayout:_m(i,0),colorBgSpotlight:_m(i,26),colorBgBlur:Rl(a,.04),colorBorder:_m(i,26),colorBorderSecondary:_m(i,19)}},r8=(e,t)=>{const i=Object.keys(Tw).map(v=>{const g=Kd(e[v],{theme:"dark"});return Array.from({length:10},()=>1).reduce((u,E,P)=>(u[`${v}-${P+1}`]=g[P],u[`${v}${P+1}`]=g[P],u),{})}).reduce((v,g)=>(v=Object.assign(Object.assign({},v),g),v),{}),a=t??D0(e),f=$M(e,{generateColorPalettes:t8,generateNeutralColorPalettes:n8});return Object.assign(Object.assign(Object.assign(Object.assign({},a),i),f),{colorPrimaryBg:f.colorPrimaryBorder,colorPrimaryBgHover:f.colorPrimaryBorderHover})};function i8(){const[e,t,i]=Uu();return{theme:e,token:t,hashId:i}}const N1={defaultSeed:Oy.token,useToken:i8,defaultAlgorithm:D0,darkAlgorithm:r8,compactAlgorithm:e8,getDesignToken:Q$,defaultConfig:Oy,_internalContext:Mw};function a8(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function o8(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var s8=function(){function e(i){var a=this;this._insertTag=function(f){var v;a.tags.length===0?a.insertionPoint?v=a.insertionPoint.nextSibling:a.prepend?v=a.container.firstChild:v=a.before:v=a.tags[a.tags.length-1].nextSibling,a.container.insertBefore(f,v),a.tags.push(f)},this.isSpeedy=i.speedy===void 0?!0:i.speedy,this.tags=[],this.ctr=0,this.nonce=i.nonce,this.key=i.key,this.container=i.container,this.prepend=i.prepend,this.insertionPoint=i.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(a){a.forEach(this._insertTag)},t.insert=function(a){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(o8(this));var f=this.tags[this.tags.length-1];if(this.isSpeedy){var v=a8(f);try{v.insertRule(a,v.cssRules.length)}catch{}}else f.appendChild(document.createTextNode(a));this.ctr++},t.flush=function(){this.tags.forEach(function(a){var f;return(f=a.parentNode)==null?void 0:f.removeChild(a)}),this.tags=[],this.ctr=0},e}(),Mo="-ms-",h0="-moz-",Vr="-webkit-",bP="comm",Gw="rule",Zw="decl",l8="@import",xP="@keyframes",c8="@layer",u8=Math.abs,Y0=String.fromCharCode,h8=Object.assign;function f8(e,t){return co(e,0)^45?(((t<<2^co(e,0))<<2^co(e,1))<<2^co(e,2))<<2^co(e,3):0}function wP(e){return e.trim()}function d8(e,t){return(e=t.exec(e))?e[0]:e}function Ur(e,t,i){return e.replace(t,i)}function j1(e,t){return e.indexOf(t)}function co(e,t){return e.charCodeAt(t)|0}function Ly(e,t,i){return e.slice(t,i)}function Pu(e){return e.length}function Xw(e){return e.length}function rv(e,t){return t.push(e),e}function p8(e,t){return e.map(t).join("")}var K0=1,Xm=1,SP=0,vs=0,wa=0,rg="";function Q0(e,t,i,a,f,v,g){return{value:e,root:t,parent:i,type:a,props:f,children:v,line:K0,column:Xm,length:g,return:""}}function ay(e,t){return h8(Q0("",null,null,"",null,null,0),e,{length:-e.length},t)}function m8(){return wa}function g8(){return wa=vs>0?co(rg,--vs):0,Xm--,wa===10&&(Xm=1,K0--),wa}function tl(){return wa=vs<SP?co(rg,vs++):0,Xm++,wa===10&&(Xm=1,K0++),wa}function Nu(){return co(rg,vs)}function Ov(){return vs}function r_(e,t){return Ly(rg,e,t)}function By(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function CP(e){return K0=Xm=1,SP=Pu(rg=e),vs=0,[]}function TP(e){return rg="",e}function Iv(e){return wP(r_(vs-1,F1(e===91?e+2:e===40?e+1:e)))}function y8(e){for(;(wa=Nu())&&wa<33;)tl();return By(e)>2||By(wa)>3?"":" "}function _8(e,t){for(;--t&&tl()&&!(wa<48||wa>102||wa>57&&wa<65||wa>70&&wa<97););return r_(e,Ov()+(t<6&&Nu()==32&&tl()==32))}function F1(e){for(;tl();)switch(wa){case e:return vs;case 34:case 39:e!==34&&e!==39&&F1(wa);break;case 40:e===41&&F1(e);break;case 92:tl();break}return vs}function v8(e,t){for(;tl()&&e+wa!==57;)if(e+wa===84&&Nu()===47)break;return"/*"+r_(t,vs-1)+"*"+Y0(e===47?e:tl())}function b8(e){for(;!By(Nu());)tl();return r_(e,vs)}function x8(e){return TP(kv("",null,null,null,[""],e=CP(e),0,[0],e))}function kv(e,t,i,a,f,v,g,u,E){for(var P=0,I=0,B=g,j=0,$=0,X=0,J=1,G=1,le=1,oe=0,pe="",he=f,ae=v,ve=a,Se=pe;G;)switch(X=oe,oe=tl()){case 40:if(X!=108&&co(Se,B-1)==58){j1(Se+=Ur(Iv(oe),"&","&\f"),"&\f")!=-1&&(le=-1);break}case 34:case 39:case 91:Se+=Iv(oe);break;case 9:case 10:case 13:case 32:Se+=y8(X);break;case 92:Se+=_8(Ov()-1,7);continue;case 47:switch(Nu()){case 42:case 47:rv(w8(v8(tl(),Ov()),t,i),E);break;default:Se+="/"}break;case 123*J:u[P++]=Pu(Se)*le;case 125*J:case 59:case 0:switch(oe){case 0:case 125:G=0;case 59+I:le==-1&&(Se=Ur(Se,/\f/g,"")),$>0&&Pu(Se)-B&&rv($>32?JC(Se+";",a,i,B-1):JC(Ur(Se," ","")+";",a,i,B-2),E);break;case 59:Se+=";";default:if(rv(ve=QC(Se,t,i,P,I,f,u,pe,he=[],ae=[],B),v),oe===123)if(I===0)kv(Se,t,ve,ve,he,v,B,u,ae);else switch(j===99&&co(Se,3)===110?100:j){case 100:case 108:case 109:case 115:kv(e,ve,ve,a&&rv(QC(e,ve,ve,0,0,f,u,pe,f,he=[],B),ae),f,ae,B,u,a?he:ae);break;default:kv(Se,ve,ve,ve,[""],ae,0,u,ae)}}P=I=$=0,J=le=1,pe=Se="",B=g;break;case 58:B=1+Pu(Se),$=X;default:if(J<1){if(oe==123)--J;else if(oe==125&&J++==0&&g8()==125)continue}switch(Se+=Y0(oe),oe*J){case 38:le=I>0?1:(Se+="\f",-1);break;case 44:u[P++]=(Pu(Se)-1)*le,le=1;break;case 64:Nu()===45&&(Se+=Iv(tl())),j=Nu(),I=B=Pu(pe=Se+=b8(Ov())),oe++;break;case 45:X===45&&Pu(Se)==2&&(J=0)}}return v}function QC(e,t,i,a,f,v,g,u,E,P,I){for(var B=f-1,j=f===0?v:[""],$=Xw(j),X=0,J=0,G=0;X<a;++X)for(var le=0,oe=Ly(e,B+1,B=u8(J=g[X])),pe=e;le<$;++le)(pe=wP(J>0?j[le]+" "+oe:Ur(oe,/&\f/g,j[le])))&&(E[G++]=pe);return Q0(e,t,i,f===0?Gw:u,E,P,I)}function w8(e,t,i){return Q0(e,t,i,bP,Y0(m8()),Ly(e,2,-2),0)}function JC(e,t,i,a){return Q0(e,t,i,Zw,Ly(e,0,a),Ly(e,a+1,-1),a)}function zm(e,t){for(var i="",a=Xw(e),f=0;f<a;f++)i+=t(e[f],f,e,t)||"";return i}function S8(e,t,i,a){switch(e.type){case c8:if(e.children.length)break;case l8:case Zw:return e.return=e.return||e.value;case bP:return"";case xP:return e.return=e.value+"{"+zm(e.children,a)+"}";case Gw:e.value=e.props.join(",")}return Pu(i=zm(e.children,a))?e.return=e.value+"{"+i+"}":""}function C8(e){var t=Xw(e);return function(i,a,f,v){for(var g="",u=0;u<t;u++)g+=e[u](i,a,f,v)||"";return g}}function T8(e){return function(t){t.root||(t=t.return)&&e(t)}}var eT=function(t){var i=new WeakMap;return function(a){if(i.has(a))return i.get(a);var f=t(a);return i.set(a,f),f}};function E8(e){var t=Object.create(null);return function(i){return t[i]===void 0&&(t[i]=e(i)),t[i]}}var M8=function(t,i,a){for(var f=0,v=0;f=v,v=Nu(),f===38&&v===12&&(i[a]=1),!By(v);)tl();return r_(t,vs)},A8=function(t,i){var a=-1,f=44;do switch(By(f)){case 0:f===38&&Nu()===12&&(i[a]=1),t[a]+=M8(vs-1,i,a);break;case 2:t[a]+=Iv(f);break;case 4:if(f===44){t[++a]=Nu()===58?"&\f":"",i[a]=t[a].length;break}default:t[a]+=Y0(f)}while(f=tl());return t},P8=function(t,i){return TP(A8(CP(t),i))},tT=new WeakMap,R8=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var i=t.value,a=t.parent,f=t.column===a.column&&t.line===a.line;a.type!=="rule";)if(a=a.parent,!a)return;if(!(t.props.length===1&&i.charCodeAt(0)!==58&&!tT.get(a))&&!f){tT.set(t,!0);for(var v=[],g=P8(i,v),u=a.props,E=0,P=0;E<g.length;E++)for(var I=0;I<u.length;I++,P++)t.props[P]=v[E]?g[E].replace(/&\f/g,u[I]):u[I]+" "+g[E]}}},O8=function(t){if(t.type==="decl"){var i=t.value;i.charCodeAt(0)===108&&i.charCodeAt(2)===98&&(t.return="",t.value="")}};function EP(e,t){switch(f8(e,t)){case 5103:return Vr+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Vr+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Vr+e+h0+e+Mo+e+e;case 6828:case 4268:return Vr+e+Mo+e+e;case 6165:return Vr+e+Mo+"flex-"+e+e;case 5187:return Vr+e+Ur(e,/(\w+).+(:[^]+)/,Vr+"box-$1$2"+Mo+"flex-$1$2")+e;case 5443:return Vr+e+Mo+"flex-item-"+Ur(e,/flex-|-self/,"")+e;case 4675:return Vr+e+Mo+"flex-line-pack"+Ur(e,/align-content|flex-|-self/,"")+e;case 5548:return Vr+e+Mo+Ur(e,"shrink","negative")+e;case 5292:return Vr+e+Mo+Ur(e,"basis","preferred-size")+e;case 6060:return Vr+"box-"+Ur(e,"-grow","")+Vr+e+Mo+Ur(e,"grow","positive")+e;case 4554:return Vr+Ur(e,/([^-])(transform)/g,"$1"+Vr+"$2")+e;case 6187:return Ur(Ur(Ur(e,/(zoom-|grab)/,Vr+"$1"),/(image-set)/,Vr+"$1"),e,"")+e;case 5495:case 3959:return Ur(e,/(image-set\([^]*)/,Vr+"$1$`$1");case 4968:return Ur(Ur(e,/(.+:)(flex-)?(.*)/,Vr+"box-pack:$3"+Mo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Vr+e+e;case 4095:case 3583:case 4068:case 2532:return Ur(e,/(.+)-inline(.+)/,Vr+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Pu(e)-1-t>6)switch(co(e,t+1)){case 109:if(co(e,t+4)!==45)break;case 102:return Ur(e,/(.+:)(.+)-([^]+)/,"$1"+Vr+"$2-$3$1"+h0+(co(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~j1(e,"stretch")?EP(Ur(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(co(e,t+1)!==115)break;case 6444:switch(co(e,Pu(e)-3-(~j1(e,"!important")&&10))){case 107:return Ur(e,":",":"+Vr)+e;case 101:return Ur(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Vr+(co(e,14)===45?"inline-":"")+"box$3$1"+Vr+"$2$3$1"+Mo+"$2box$3")+e}break;case 5936:switch(co(e,t+11)){case 114:return Vr+e+Mo+Ur(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Vr+e+Mo+Ur(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Vr+e+Mo+Ur(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Vr+e+Mo+e+e}return e}var I8=function(t,i,a,f){if(t.length>-1&&!t.return)switch(t.type){case Zw:t.return=EP(t.value,t.length);break;case xP:return zm([ay(t,{value:Ur(t.value,"@","@"+Vr)})],f);case Gw:if(t.length)return p8(t.props,function(v){switch(d8(v,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return zm([ay(t,{props:[Ur(v,/:(read-\w+)/,":"+h0+"$1")]})],f);case"::placeholder":return zm([ay(t,{props:[Ur(v,/:(plac\w+)/,":"+Vr+"input-$1")]}),ay(t,{props:[Ur(v,/:(plac\w+)/,":"+h0+"$1")]}),ay(t,{props:[Ur(v,/:(plac\w+)/,Mo+"input-$1")]})],f)}return""})}},k8=[I8],MP=function(t){var i=t.key;if(i==="css"){var a=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(a,function(J){var G=J.getAttribute("data-emotion");G.indexOf(" ")!==-1&&(document.head.appendChild(J),J.setAttribute("data-s",""))})}var f=t.stylisPlugins||k8,v={},g,u=[];g=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+i+' "]'),function(J){for(var G=J.getAttribute("data-emotion").split(" "),le=1;le<G.length;le++)v[G[le]]=!0;u.push(J)});var E,P=[R8,O8];{var I,B=[S8,T8(function(J){I.insert(J)})],j=C8(P.concat(f,B)),$=function(G){return zm(x8(G),j)};E=function(G,le,oe,pe){I=oe,$(G?G+"{"+le.styles+"}":le.styles),pe&&(X.inserted[le.name]=!0)}}var X={key:i,sheet:new s8({key:i,container:g,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:v,registered:{},insert:E};return X.sheet.hydrate(u),X};function z8(e){for(var t=0,i,a=0,f=e.length;f>=4;++a,f-=4)i=e.charCodeAt(a)&255|(e.charCodeAt(++a)&255)<<8|(e.charCodeAt(++a)&255)<<16|(e.charCodeAt(++a)&255)<<24,i=(i&65535)*1540483477+((i>>>16)*59797<<16),i^=i>>>24,t=(i&65535)*1540483477+((i>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(f){case 3:t^=(e.charCodeAt(a+2)&255)<<16;case 2:t^=(e.charCodeAt(a+1)&255)<<8;case 1:t^=e.charCodeAt(a)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var D8={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},L8=/[A-Z]|^ms/g,B8=/_EMO_([^_]+?)_([^]*?)_EMO_/g,AP=function(t){return t.charCodeAt(1)===45},nT=function(t){return t!=null&&typeof t!="boolean"},ux=E8(function(e){return AP(e)?e:e.replace(L8,"-$&").toLowerCase()}),rT=function(t,i){switch(t){case"animation":case"animationName":if(typeof i=="string")return i.replace(B8,function(a,f,v){return Ru={name:f,styles:v,next:Ru},f})}return D8[t]!==1&&!AP(t)&&typeof i=="number"&&i!==0?i+"px":i};function Ny(e,t,i){if(i==null)return"";var a=i;if(a.__emotion_styles!==void 0)return a;switch(typeof i){case"boolean":return"";case"object":{var f=i;if(f.anim===1)return Ru={name:f.name,styles:f.styles,next:Ru},f.name;var v=i;if(v.styles!==void 0){var g=v.next;if(g!==void 0)for(;g!==void 0;)Ru={name:g.name,styles:g.styles,next:Ru},g=g.next;var u=v.styles+";";return u}return N8(e,t,i)}case"function":{if(e!==void 0){var E=Ru,P=i(e);return Ru=E,Ny(e,t,P)}break}}var I=i;if(t==null)return I;var B=t[I];return B!==void 0?B:I}function N8(e,t,i){var a="";if(Array.isArray(i))for(var f=0;f<i.length;f++)a+=Ny(e,t,i[f])+";";else for(var v in i){var g=i[v];if(typeof g!="object"){var u=g;t!=null&&t[u]!==void 0?a+=v+"{"+t[u]+"}":nT(u)&&(a+=ux(v)+":"+rT(v,u)+";")}else if(Array.isArray(g)&&typeof g[0]=="string"&&(t==null||t[g[0]]===void 0))for(var E=0;E<g.length;E++)nT(g[E])&&(a+=ux(v)+":"+rT(v,g[E])+";");else{var P=Ny(e,t,g);switch(v){case"animation":case"animationName":{a+=ux(v)+":"+P+";";break}default:a+=v+"{"+P+"}"}}}return a}var iT=/label:\s*([^\s;{]+)\s*(;|$)/g,Ru;function Vf(e,t,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var a=!0,f="";Ru=void 0;var v=e[0];if(v==null||v.raw===void 0)a=!1,f+=Ny(i,t,v);else{var g=v;f+=g[0]}for(var u=1;u<e.length;u++)if(f+=Ny(i,t,e[u]),a){var E=v;f+=E[u]}iT.lastIndex=0;for(var P="",I;(I=iT.exec(f))!==null;)P+="-"+I[1];var B=z8(f)+P;return{name:B,styles:f,next:Ru}}var j8=!0;function J0(e,t,i){var a="";return i.split(" ").forEach(function(f){e[f]!==void 0?t.push(e[f]+";"):f&&(a+=f+" ")}),a}var Ww=function(t,i,a){var f=t.key+"-"+i.name;(a===!1||j8===!1)&&t.registered[f]===void 0&&(t.registered[f]=i.styles)},Yw=function(t,i,a){Ww(t,i,a);var f=t.key+"-"+i.name;if(t.inserted[i.name]===void 0){var v=i;do t.insert(i===v?"."+f:"",v,t.sheet,!0),v=v.next;while(v!==void 0)}};function aT(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function oT(e,t,i){var a=[],f=J0(e,a,i);return a.length<2?i:f+t(a)}var Kw=function(t){var i=MP(t);i.sheet.speedy=function(u){this.isSpeedy=u},i.compat=!0;var a=function(){for(var E=arguments.length,P=new Array(E),I=0;I<E;I++)P[I]=arguments[I];var B=Vf(P,i.registered,void 0);return Yw(i,B,!1),i.key+"-"+B.name},f=function(){for(var E=arguments.length,P=new Array(E),I=0;I<E;I++)P[I]=arguments[I];var B=Vf(P,i.registered),j="animation-"+B.name;return aT(i,{name:B.name,styles:"@keyframes "+j+"{"+B.styles+"}"}),j},v=function(){for(var E=arguments.length,P=new Array(E),I=0;I<E;I++)P[I]=arguments[I];var B=Vf(P,i.registered);aT(i,B)},g=function(){for(var E=arguments.length,P=new Array(E),I=0;I<E;I++)P[I]=arguments[I];return oT(i.registered,a,F8(P))};return{css:a,cx:g,injectGlobal:v,keyframes:f,hydrate:function(E){E.forEach(function(P){i.inserted[P]=!0})},flush:function(){i.registered={},i.inserted={},i.sheet.flush()},sheet:i.sheet,cache:i,getRegisteredStyles:J0.bind(null,i.registered),merge:oT.bind(null,i.registered,a)}},F8=function e(t){for(var i="",a=0;a<t.length;a++){var f=t[a];if(f!=null){var v=void 0;switch(typeof f){case"boolean":break;case"object":{if(Array.isArray(f))v=e(f);else{v="";for(var g in f)f[g]&&g&&(v&&(v+=" "),v+=g)}break}default:v=f}v&&(i&&(i+=" "),i+=v)}}return i},Hu=Kw({key:"css"});Hu.flush;Hu.hydrate;Hu.cx;Hu.merge;Hu.getRegisteredStyles;Hu.injectGlobal;Hu.keyframes;Hu.css;Hu.sheet;var $8=Hu.cache,V8=function(){function e(){Xa(this,e),ut(this,"_cacheList",[$8])}return Wa(e,[{key:"add",value:function(i){var a=this.getCache(i.key);return a||(this._cacheList.push(i),i)}},{key:"delete",value:function(i){this._cacheList=this._cacheList.filter(function(a){return a.key!==i.key})}},{key:"hasCache",value:function(i){return this._cacheList.some(function(a){return a.key===i.key})}},{key:"getCache",value:function(i){return this._cacheList.find(function(a){return a.key===i})}},{key:"getCacheList",value:function(){return this._cacheList}}]),e}(),sT=typeof document<"u",PP=function(t,i){return"".concat(t,"-").concat(i)},U8=function(t,i,a,f){var v=f.hashPriority;Ww(t,i,a);var g=".".concat(PP(t.key,i.name)),u=v==="low"?":where(".concat(g,")"):g;if(t.inserted[i.name]===void 0){var E="",P=i;do{var I=t.insert(i===P?u:"",P,t.sheet,!0);!sT&&I!==void 0&&(E+=I),P=P.next}while(P!==void 0);if(!sT&&E.length!==0)return E}},Qw=function(t){return zn(t)==="object"&&"styles"in t&&"name"in t&&"toString"in t},H8=function e(t){for(var i="",a=0;a<t.length;a++){var f=t[a];if(f!==null){var v=void 0;switch(zn(f)){case"boolean":break;case"object":{if(Array.isArray(f))v=e(f);else{v="";for(var g in f)f[g]&&g&&(v&&(v+=" "),v+=g)}break}default:v=f}v&&(i&&(i+=" "),i+=v)}}return i},q8=function(t,i,a){var f=[],v=J0(t,f,a);return f.length<2?a:v+i(f)},G8=function(t,i){return function(){for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];var g=Vf(f,t.registered,void 0);return U8(t,g,!1,i),PP(t.key,g.name)}},Z8=function(t,i){return function(){for(var a=arguments.length,f=new Array(a),v=0;v<a;v++)f[v]=arguments[v];var g=f.map(function(u){return Qw(u)?i(u):u});return q8(t.registered,i,H8(g))}},RP=function(t,i){var a=G8(t,{hashPriority:i.hashPriority||"high",label:i.label}),f=Z8(t,a);return{css:a,cx:f}},i_=function(){for(var t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];return Vf(i)},X8="acss",W8=function(t){return U.createContext(t)},hx={exports:{}},Wr={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lT;function Y8(){if(lT)return Wr;lT=1;var e=typeof Symbol=="function"&&Symbol.for,t=e?Symbol.for("react.element"):60103,i=e?Symbol.for("react.portal"):60106,a=e?Symbol.for("react.fragment"):60107,f=e?Symbol.for("react.strict_mode"):60108,v=e?Symbol.for("react.profiler"):60114,g=e?Symbol.for("react.provider"):60109,u=e?Symbol.for("react.context"):60110,E=e?Symbol.for("react.async_mode"):60111,P=e?Symbol.for("react.concurrent_mode"):60111,I=e?Symbol.for("react.forward_ref"):60112,B=e?Symbol.for("react.suspense"):60113,j=e?Symbol.for("react.suspense_list"):60120,$=e?Symbol.for("react.memo"):60115,X=e?Symbol.for("react.lazy"):60116,J=e?Symbol.for("react.block"):60121,G=e?Symbol.for("react.fundamental"):60117,le=e?Symbol.for("react.responder"):60118,oe=e?Symbol.for("react.scope"):60119;function pe(ae){if(typeof ae=="object"&&ae!==null){var ve=ae.$$typeof;switch(ve){case t:switch(ae=ae.type,ae){case E:case P:case a:case v:case f:case B:return ae;default:switch(ae=ae&&ae.$$typeof,ae){case u:case I:case X:case $:case g:return ae;default:return ve}}case i:return ve}}}function he(ae){return pe(ae)===P}return Wr.AsyncMode=E,Wr.ConcurrentMode=P,Wr.ContextConsumer=u,Wr.ContextProvider=g,Wr.Element=t,Wr.ForwardRef=I,Wr.Fragment=a,Wr.Lazy=X,Wr.Memo=$,Wr.Portal=i,Wr.Profiler=v,Wr.StrictMode=f,Wr.Suspense=B,Wr.isAsyncMode=function(ae){return he(ae)||pe(ae)===E},Wr.isConcurrentMode=he,Wr.isContextConsumer=function(ae){return pe(ae)===u},Wr.isContextProvider=function(ae){return pe(ae)===g},Wr.isElement=function(ae){return typeof ae=="object"&&ae!==null&&ae.$$typeof===t},Wr.isForwardRef=function(ae){return pe(ae)===I},Wr.isFragment=function(ae){return pe(ae)===a},Wr.isLazy=function(ae){return pe(ae)===X},Wr.isMemo=function(ae){return pe(ae)===$},Wr.isPortal=function(ae){return pe(ae)===i},Wr.isProfiler=function(ae){return pe(ae)===v},Wr.isStrictMode=function(ae){return pe(ae)===f},Wr.isSuspense=function(ae){return pe(ae)===B},Wr.isValidElementType=function(ae){return typeof ae=="string"||typeof ae=="function"||ae===a||ae===P||ae===v||ae===f||ae===B||ae===j||typeof ae=="object"&&ae!==null&&(ae.$$typeof===X||ae.$$typeof===$||ae.$$typeof===g||ae.$$typeof===u||ae.$$typeof===I||ae.$$typeof===G||ae.$$typeof===le||ae.$$typeof===oe||ae.$$typeof===J)},Wr.typeOf=pe,Wr}var cT;function K8(){return cT||(cT=1,hx.exports=Y8()),hx.exports}var fx,uT;function Q8(){if(uT)return fx;uT=1;var e=K8(),t={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},a={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},f={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},v={};v[e.ForwardRef]=a,v[e.Memo]=f;function g(X){return e.isMemo(X)?f:v[X.$$typeof]||t}var u=Object.defineProperty,E=Object.getOwnPropertyNames,P=Object.getOwnPropertySymbols,I=Object.getOwnPropertyDescriptor,B=Object.getPrototypeOf,j=Object.prototype;function $(X,J,G){if(typeof J!="string"){if(j){var le=B(J);le&&le!==j&&$(X,le,G)}var oe=E(J);P&&(oe=oe.concat(P(J)));for(var pe=g(X),he=g(J),ae=0;ae<oe.length;++ae){var ve=oe[ae];if(!i[ve]&&!(G&&G[ve])&&!(he&&he[ve])&&!(pe&&pe[ve])){var Se=I(J,ve);try{u(X,ve,Se)}catch{}}}}return X}return fx=$,fx}Q8();var J8=function(t){return t()},OP=Dm.useInsertionEffect?Dm.useInsertionEffect:!1,eV=OP||J8,hT=OP||U.useLayoutEffect,IP=U.createContext(typeof HTMLElement<"u"?MP({key:"css"}):null);IP.Provider;var kP=function(t){return U.forwardRef(function(i,a){var f=U.useContext(IP);return t(i,f,a)})},jy=U.createContext({}),tV=function(t,i){if(typeof i=="function"){var a=i(t);return a}return Ti({},t,i)},nV=eT(function(e){return eT(function(t){return tV(e,t)})}),rV=function(t){var i=U.useContext(jy);return t.theme!==i&&(i=nV(i)(t.theme)),U.createElement(jy.Provider,{value:i},t.children)},Jw={}.hasOwnProperty,$1="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",iV=function(t,i){var a={};for(var f in i)Jw.call(i,f)&&(a[f]=i[f]);return a[$1]=t,a},aV=function(t){var i=t.cache,a=t.serialized,f=t.isStringTag;return Ww(i,a,f),eV(function(){return Yw(i,a,f)}),null},oV=kP(function(e,t,i){var a=e.css;typeof a=="string"&&t.registered[a]!==void 0&&(a=t.registered[a]);var f=e[$1],v=[a],g="";typeof e.className=="string"?g=J0(t.registered,v,e.className):e.className!=null&&(g=e.className+" ");var u=Vf(v,void 0,U.useContext(jy));g+=t.key+"-"+u.name;var E={};for(var P in e)Jw.call(e,P)&&P!=="css"&&P!==$1&&(E[P]=e[P]);return E.className=g,i&&(E.ref=i),U.createElement(U.Fragment,null,U.createElement(aV,{cache:t,serialized:u,isStringTag:typeof f=="string"}),U.createElement(f,E))}),sV=oV,fT=function(t,i){var a=arguments;if(i==null||!Jw.call(i,"css"))return U.createElement.apply(void 0,a);var f=a.length,v=new Array(f);v[0]=sV,v[1]=iV(t,i);for(var g=2;g<f;g++)v[g]=a[g];return U.createElement.apply(null,v)};(function(e){var t;t||(t=e.JSX||(e.JSX={}))})(fT||(fT={}));var lV=kP(function(e,t){var i=e.styles,a=Vf([i],void 0,U.useContext(jy)),f=U.useRef();return hT(function(){var v=t.key+"-global",g=new t.sheet.constructor({key:v,nonce:t.sheet.nonce,container:t.sheet.container,speedy:t.sheet.isSpeedy}),u=!1,E=document.querySelector('style[data-emotion="'+v+" "+a.name+'"]');return t.sheet.tags.length&&(g.before=t.sheet.tags[0]),E!==null&&(u=!0,E.setAttribute("data-emotion",v),g.hydrate([E])),f.current=[g,u],function(){g.flush()}},[t]),hT(function(){var v=f.current,g=v[0],u=v[1];if(u){v[1]=!1;return}if(a.next!==void 0&&Yw(t,a.next,!0),g.tags.length){var E=g.tags[g.tags.length-1].nextElementSibling;g.before=E,g.flush()}t.insert("",a,g,!1)},[t,a.name]),null}),cV=function(t){return function(){for(var i=arguments.length,a=new Array(i),f=0;f<i;f++)a[f]=arguments[f];return U.memo(function(v){var g=t();return Ct.jsx(lV,{styles:Vf(a,void 0,ct(ct({},v),{},{theme:g}))})})}},uV=function(t){return function(i){var a=t(i);return function(f){var v=a(f),g=v.styles;return g}}},hV=["children","prefix","speedy","getStyleManager","container","nonce","insertionPoint","stylisPlugins","linters"],fV=function(t){return U.memo(function(i){var a=i.children,f=i.prefix,v=i.speedy,g=i.getStyleManager,u=i.container,E=i.nonce,P=i.insertionPoint,I=i.stylisPlugins,B=i.linters,j=uo(i,hV),$=U.useContext(t),X=f??$.sheet.key,J=u??$.sheet.container,G=v??$.sheet.isSpeedy,le=U.useMemo(function(){var pe=!1,he=Kw({speedy:G??pe,key:X,container:J,nonce:E,insertionPoint:P,stylisPlugins:I});if(typeof global<"u"){var ae=global.__ANTD_STYLE_CACHE_MANAGER_FOR_SSR__;ae&&(he.cache=ae.add(he.cache))}return he},[X,G,J,E,P,I]);U.useEffect(function(){g==null||g(le)},[le]);var oe=Ct.jsx(t.Provider,{value:le,children:a});return Object.keys(j).length||J?Ct.jsx(a5,ct(ct({linters:B,container:J},j),{},{children:oe})):oe})},dV=function(t){var i=t.css,a=t.token;return{buttonDefaultHover:i({backgroundColor:a.colorBgContainer,border:"1px solid ".concat(a.colorBorder),cursor:"pointer",":hover":{color:a.colorPrimaryHover,borderColor:a.colorPrimaryHover},":active":{color:a.colorPrimaryActive,borderColor:a.colorPrimaryActive}})}},pV=function(t){return Object.fromEntries(Object.entries(t).map(function(i){var a=fn(i,2),f=a[0],v=a[1];return[f,v.styles]}))},eS=function(){var t=N1.useToken(),i=t.token;return i},Mm=function(t){return typeof window<"u"?matchMedia&&matchMedia("(prefers-color-scheme: ".concat(t,")")):{matches:!1}},dx,zP=U.createContext({appearance:"light",setAppearance:function(){},isDarkMode:!1,themeMode:"light",setThemeMode:function(){},browserPrefers:(dx=Mm("dark"))!==null&&dx!==void 0&&dx.matches?"dark":"light"}),eb=function(){return U.useContext(zP)},mV=function(){var t=eS(),i=eb(),a=i.appearance,f=i.isDarkMode;return U.useMemo(function(){return pV(dV({token:t,css:i_}))},[t,a,f])},DP=function(){var t=eS(),i=mV();return U.useMemo(function(){return ct(ct({},t),{},{stylish:i})},[t,i])},gV=function(t){return ct(ct({},t),{},{mobile:t.xs,tablet:t.md,laptop:t.lg,desktop:t.xxl})},yV=function(){var t=eS(),i={xs:"@media (max-width: ".concat(t.screenXSMax,"px)"),sm:"@media (max-width: ".concat(t.screenSMMax,"px)"),md:"@media (max-width: ".concat(t.screenMDMax,"px)"),lg:"@media (max-width: ".concat(t.screenLGMax,"px)"),xl:"@media (max-width: ".concat(t.screenXLMax,"px)"),xxl:"@media (min-width: ".concat(t.screenXXLMin,"px)")};return U.useMemo(function(){return gV(i)},[t])},_V=function(t,i){return Object.entries(t).map(function(a){var f=fn(a,2),v=f[0],g=f[1],u=g;return Qw(g)||(u=i_(g)),i[v]?"".concat(i[v]," {").concat(u.styles,"}"):""}).join("")},vV=["stylish","appearance","isDarkMode","prefixCls","iconPrefixCls"],bV=["prefixCls","iconPrefixCls"],xV=function(t){var i=t.hashPriority,a=t.useTheme,f=t.EmotionContext;return function(v,g){var u=g==null?void 0:g.__BABEL_FILE_NAME__,E=!!u;return function(P){var I=a(),B=U.useContext(f),j=B.cache,$=RP(j,{hashPriority:(g==null?void 0:g.hashPriority)||i,label:g==null?void 0:g.label}),X=$.cx,J=$.css,G=yV(),le=U.useMemo(function(){var oe;if(v instanceof Function){var pe=I.stylish,he=I.appearance,ae=I.isDarkMode,ve=I.prefixCls,Se=I.iconPrefixCls,ke=uo(I,vV),Le=function(me){return _V(me,G)};Object.assign(Le,G),oe=v({token:ke,stylish:pe,appearance:he,isDarkMode:ae,prefixCls:ve,iconPrefixCls:Se,cx:X,css:i_,responsive:Le},P)}else oe=v;return zn(oe)==="object"&&(Qw(oe)?oe=J(oe):oe=Object.fromEntries(Object.entries(oe).map(function(Re){var me=fn(Re,2),Ae=me[0],He=me[1],We=E?"".concat(u,"-").concat(Ae):void 0;return zn(He)==="object"?E?[Ae,J(He,"label:".concat(We))]:[Ae,J(He)]:[Ae,He]}))),oe},[P,I]);return U.useMemo(function(){var oe=I.prefixCls,pe=I.iconPrefixCls,he=uo(I,bV);return{styles:le,cx:X,theme:he,prefixCls:oe,iconPrefixCls:pe}},[le,I])}}},dT=function(t){if(t.ThemeProvider)return t.ThemeProvider;var i=t.ThemeContext;return function(a){return Ct.jsx(i.Provider,{value:a.theme,children:a.children})}},wV=rV,LP=jy,BP=U.memo(function(e){var t=e.children,i=e.theme,a=e.prefixCls,f=e.getStaticInstance,v=e.staticInstanceConfig,g=eb(),u=g.appearance,E=g.isDarkMode,P=gP.useMessage(v==null?void 0:v.message),I=fn(P,2),B=I[0],j=I[1],$=vP.useNotification(v==null?void 0:v.notification),X=fn($,2),J=X[0],G=X[1],le=$c.useModal(),oe=fn(le,2),pe=oe[0],he=oe[1];U.useEffect(function(){f==null||f({message:B,modal:pe,notification:J})},[]);var ae=U.useMemo(function(){var ve=E?N1.darkAlgorithm:N1.defaultAlgorithm,Se=i;if(typeof i=="function"&&(Se=i(u)),!Se)return{algorithm:ve};var ke=Se.algorithm?Se.algorithm instanceof Array?Se.algorithm:[Se.algorithm]:[];return ct(ct({},Se),{},{algorithm:Se.algorithm?[ve].concat(wn(ke)):ve})},[i,E]);return Ct.jsxs(Nl,{prefixCls:a,theme:ae,children:[j,G,he,t]})});BP.displayName="AntdProvider";function SV(e,t){var i=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(i!=null){var a,f,v,g,u=[],E=!0,P=!1;try{if(v=(i=i.call(e)).next,t!==0)for(;!(E=(a=v.call(i)).done)&&(u.push(a.value),u.length!==t);E=!0);}catch(I){P=!0,f=I}finally{try{if(!E&&i.return!=null&&(g=i.return(),Object(g)!==g))return}finally{if(P)throw f}}return u}}function CV(e,t){return TV(e)||SV(e,t)||EV(e,t)||MV()}function TV(e){if(Array.isArray(e))return e}function EV(e,t){if(e){if(typeof e=="string")return pT(e,t);var i=Object.prototype.toString.call(e).slice(8,-1);if(i==="Object"&&e.constructor&&(i=e.constructor.name),i==="Map"||i==="Set")return Array.from(e);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return pT(e,t)}}function pT(e,t){(t==null||t>e.length)&&(t=e.length);for(var i=0,a=new Array(t);i<t;i++)a[i]=e[i];return a}function MV(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function mT(e,t){var i=t||{},a=i.defaultValue,f=i.value,v=i.onChange,g=i.postState,u=Nt.useState(function(){return f!==void 0?f:a!==void 0?typeof a=="function"?a():a:e}),E=CV(u,2),P=E[0],I=E[1],B=f!==void 0?f:P;g&&(B=g(B));function j($){I($),B!==$&&v&&v($,B)}return[B,j]}var px=function(t){typeof U.startTransition=="function"?U.startTransition(t):t()},Df,AV=function(t){var i=t.themeMode,a=t.setAppearance,f=t.setBrowserPrefers,v=function(){px(function(){Mm("dark").matches?a("dark"):a("light")})},g=function(){px(function(){Mm("dark").matches?f("dark"):f("light")})};return U.useLayoutEffect(function(){if(i!=="auto"){px(function(){a(i)});return}return setTimeout(v,1),Df||(Df=Mm("dark")),Df.addEventListener("change",v),function(){Df.removeEventListener("change",v)}},[i]),U.useLayoutEffect(function(){return Df||(Df=Mm("dark")),Df.addEventListener("change",g),function(){Df.removeEventListener("change",g)}},[]),null},NP=U.memo(function(e){var t,i=e.children,a=e.appearance,f=e.defaultAppearance,v=e.onAppearanceChange,g=e.themeMode,u=e.defaultThemeMode,E=e.onThemeModeChange,P=e.useTheme,I=P(),B=I.appearance,j=I.themeMode,$=mT("light",{value:g,defaultValue:u??j,onChange:function(Re){return E==null?void 0:E(Re)}}),X=fn($,2),J=X[0],G=X[1],le=mT("light",{value:a,defaultValue:f??B,onChange:function(Re){return v==null?void 0:v(Re)}}),oe=fn(le,2),pe=oe[0],he=oe[1],ae=U.useState((t=Mm("dark"))!==null&&t!==void 0&&t.matches?"dark":"light"),ve=fn(ae,2),Se=ve[0],ke=ve[1];return Ct.jsxs(zP.Provider,{value:{themeMode:J,setThemeMode:G,appearance:pe,setAppearance:he,isDarkMode:pe==="dark",browserPrefers:Se},children:[typeof window<"u"&&Ct.jsx(AV,{themeMode:J,setAppearance:he,setBrowserPrefers:ke}),i]})});NP.displayName="ThemeSwitcher";var PV=["stylish"],RV=function(t){var i=t.children,a=t.customToken,f=t.defaultCustomToken,v=t.customStylish,g=t.prefixCls,u=t.StyledThemeProvider,E=eb(),P=E.appearance,I=E.isDarkMode,B=DP(),j=B.stylish,$=uo(B,PV),X=U.useMemo(function(){return f?f instanceof Function?f({token:$,appearance:P,isDarkMode:I}):f:{}},[f,$,P]),J=U.useMemo(function(){return a instanceof Function?ct(ct({},X),a({token:$,appearance:P,isDarkMode:I})):ct(ct({},X),a)},[X,a,$,P]),G=U.useMemo(function(){return v?v({token:ct(ct({},$),J),stylish:j,appearance:P,isDarkMode:I,css:i_}):{}},[v,$,J,j,P]),le=U.useMemo(function(){return ct(ct({},G),j)},[G,j]),oe=ct(ct(ct(ct({},$),J),{},{stylish:le},E),{},{prefixCls:g});return Ct.jsx(u,{theme:oe,children:i})},OV=function(t){var i=t.styledConfig?dT(t.styledConfig):void 0,a=t.StyleEngineContext;return U.memo(function(f){var v=f.children,g=f.customToken,u=f.customStylish,E=f.theme,P=f.getStaticInstance,I=f.prefixCls,B=f.staticInstanceConfig,j=f.appearance,$=f.defaultAppearance,X=f.onAppearanceChange,J=f.themeMode,G=f.defaultThemeMode,le=f.onThemeModeChange,oe=f.styled,pe=U.useContext(a),he=pe.prefixCls,ae=pe.StyledThemeContext,ve=pe.CustomThemeContext,Se=U.useContext(ve),ke=oe?dT(oe):i||wV,Le=I||he;return Ct.jsx(a.Provider,{value:{prefixCls:Le,StyledThemeContext:(oe==null?void 0:oe.ThemeContext)||ae||LP,CustomThemeContext:ve},children:Ct.jsx(NP,{themeMode:J,defaultThemeMode:G,onThemeModeChange:le,defaultAppearance:$,appearance:j,onAppearanceChange:X,useTheme:t.useTheme,children:Ct.jsx(BP,{prefixCls:Le,staticInstanceConfig:B,theme:E,getStaticInstance:P,children:Ct.jsx(RV,{prefixCls:Le,customToken:g,defaultCustomToken:Se,customStylish:u,StyledThemeProvider:ke,children:v})})})})})},IV=function(t){return function(){var i=t.StyleEngineContext,a=U.useContext(i),f=a.StyledThemeContext,v=a.CustomThemeContext,g=a.prefixCls,u=DP(),E=eb(),P=U.useContext(v),I=U.useContext(f??LP)||{},B=U.useContext(Nl.ConfigContext),j=B.iconPrefixCls,$=B.getPrefixCls,X=$(),J=g&&g!=="ant"?g:X,G=U.useMemo(function(){return ct(ct(ct(ct({},u),E),P),{},{prefixCls:J,iconPrefixCls:j})},[u,E,P,J,j]);return!I||Object.keys(I).length===0?G:ct(ct({},I),{},{prefixCls:J,iconPrefixCls:j})}},jP=new V8;typeof global<"u"&&(global.__ANTD_STYLE_CACHE_MANAGER_FOR_SSR__=jP);var kV=function(t){var i,a,f,v=ct(ct({},t),{},{key:(i=t.key)!==null&&i!==void 0?i:"zcss",speedy:(a=t.speedy)!==null&&a!==void 0?a:!1}),g=Kw({key:v.key,speedy:v.speedy,container:v.container}),u=W8(g),E=fV(u);g.cache=jP.add(g.cache);var P=U.createContext(v.customToken?v.customToken:{}),I=(f=v.styled)===null||f===void 0?void 0:f.ThemeContext,B=U.createContext({CustomThemeContext:P,StyledThemeContext:I,prefixCls:v==null?void 0:v.prefixCls,iconPrefixCls:v==null?void 0:v.iconPrefixCls}),j=IV({StyleEngineContext:B}),$=xV({hashPriority:v.hashPriority,useTheme:j,EmotionContext:u}),X=cV(j),J=uV($),G=OV({styledConfig:v.styled,StyleEngineContext:B,useTheme:j});G.displayName="AntdStyleThemeProvider";var le=RP(g.cache,{hashPriority:v.hashPriority}),oe=le.cx,pe=g.injectGlobal,he=g.keyframes;return{createStyles:$,createGlobalStyle:X,createStylish:J,css:i_,cx:oe,keyframes:he,injectGlobal:pe,styleManager:g,useTheme:j,StyleProvider:E,ThemeProvider:G}},zV=kV({key:X8,speedy:!1}),DV=zV.createStyles;const V1=200,iv=8,av=.15,gT=.4,ov=10,yT=10,vm=4,Go={OPPOSITE:Ob.OPPOSITE,SAME_DIRECTION:Ob.SAME_DIRECTION,CROSSING:Ob.CROSSING},LV=({columns:e,dataSource:t,rowHeight:i,headerHeight:a,onScroll:f,tableRef:v,className:g})=>{const u=U.useRef(),E=U.useRef(),P=e.reduce(($,X)=>$+X.width,0),I=t.length*i+V1;U.useEffect(()=>{v&&(v.current=E.current)},[v]);const B=($,X,J)=>$.key==="flight_id"?X.status==="normal"?ba.ACTIVE:ba.PLANNING:"#000000",j=($,X,J)=>$.key==="taxi_time"?J?J.toFixed(1):"-":$.key==="start_time"?typeof J=="string"?new Date(J).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}):typeof J=="number"?`T+${(J/60).toFixed(1)}`:"-":$.key==="time_to_takeoff"?J!==void 0?J.toFixed(1):"-":$.key==="remaining_taxi_time"?J?(J/60).toFixed(1):"-":J||"-";return Ct.jsxs("div",{ref:E,onScroll:f,style:{width:"100%",height:"100%",overflow:"auto",backgroundColor:"#ffffff"},className:`svg-table-container ${g||""}`,children:[Ct.jsx("div",{className:"svg-table-header",style:{position:"sticky",top:0,zIndex:20,background:"#fafafa",borderBottom:"1px solid #f0f0f0"},children:Ct.jsxs("svg",{className:"svg-table-header-svg",width:P,height:a,style:{display:"block",minWidth:P,backgroundColor:"#fafafa"},children:[Ct.jsx("rect",{x:0,y:0,width:P,height:a,fill:"#fafafa",stroke:"#f0f0f0",strokeWidth:1}),e.map(($,X)=>{const J=e.slice(0,X).reduce((G,le)=>G+le.width,0);return Ct.jsxs("g",{children:[Array.isArray($.title)?$.title.map((G,le)=>Ct.jsx("text",{x:J+$.width/2,y:a/2+(le-($.title.length-1)/2)*14,textAnchor:"middle",dominantBaseline:"middle",fontSize:"11px",fontWeight:"bold",fill:"#000000",children:G},`header-line-${le}`)):Ct.jsx("text",{x:J+$.width/2,y:a/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12px",fontWeight:"bold",fill:"#000000",children:$.title}),X<e.length-1&&Ct.jsx("line",{x1:J+$.width,y1:0,x2:J+$.width,y2:a,stroke:"#f0f0f0",strokeWidth:1})]},`header-${X}`)})]})}),Ct.jsx("svg",{ref:u,className:"svg-table-body",width:P,height:I,style:{display:"block",backgroundColor:"transparent",minWidth:P},children:t.map(($,X)=>{const J=X*i,G=$.status==="normal"?ba.ACTIVE:ba.PLANNING,le="#ffffff",oe="#f5faff",pe=6,he=J+4,ae=P-12,ve=i-8;return Ct.jsxs("g",{"data-flight-id":$.flight_id,className:"svg-table-row",children:[Ct.jsx("rect",{x:pe,y:he,width:ae,height:ve,rx:4,ry:4,fill:le,stroke:G,strokeWidth:1,className:"rounded-row",style:{cursor:"pointer"},onMouseEnter:Se=>{Se.target.setAttribute("fill",oe)},onMouseLeave:Se=>{Se.target.setAttribute("fill",le)}}),e.map((Se,ke)=>{const Le=e.slice(0,ke).reduce((He,We)=>He+We.width,0),Re=$[Se.dataIndex],me=j(Se,$,Re),Ae=B(Se,$);return Ct.jsxs("g",{children:[Array.isArray(me)?Ct.jsxs("text",{x:pe+Le+Se.width/2,y:J+i/2-6,textAnchor:"middle",dominantBaseline:"middle",fontSize:"10px",fontWeight:Se.key==="flight_id"?"bold":"normal",fill:Ae,children:[Ct.jsx("tspan",{x:pe+Le+Se.width/2,dy:"0",children:me[0]},"line-0"),Ct.jsx("tspan",{x:pe+Le+Se.width/2,dy:"12",children:me[1]},"line-1")]}):Ct.jsx("text",{x:pe+Le+Se.width/2,y:J+i/2,textAnchor:"middle",dominantBaseline:"middle",fontSize:"12px",fontWeight:Se.key==="flight_id"?"bold":"normal",fill:Ae,children:me}),ke<e.length-1&&Ct.jsx("line",{x1:pe+Le+Se.width,y1:he,x2:pe+Le+Se.width,y2:he+ve,stroke:"#f0f0f0",strokeWidth:1})]},`cell-${X}-${ke}`)})]},`row-${X}`)})})]})},BV=DV(({css:e,token:t})=>{const{antCls:i}=t;return{hideScrollbar:e`
          /*  */
          ::-webkit-scrollbar {
            width: 0px;
            height: 0px;
            display: none;
          }
          
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none; /* IE and Edge */
        `,prettyScrollbar:e`
          ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
          }
          ::-webkit-scrollbar-track {
            background: transparent;
          }
          ::-webkit-scrollbar-thumb {
            background-color: rgba(24, 144, 255, 0.35);
            border-radius: 3px;
            border: 1px solid rgba(24, 144, 255, 0.15);
          }
          ::-webkit-scrollbar-thumb:hover {
            background-color: rgba(24, 144, 255, 0.55);
          }
          scrollbar-width: thin; /* Firefox */
          scrollbar-color: rgba(24, 144, 255, 0.35) transparent; /* Firefox */
        `,customTable:e`
      ${i}-table {
        ${i}-table-container {
         
          ${i}-table-body,
          ${i}-table-content {
            scrollbar-width: thin;
            scrollbar-color: #eaeaea transparent;
            scrollbar-gutter: stable;
          }
        }
        
        // 
        ${i}-table-thead > tr > th {
          height: 40px !important;
          line-height: 40px !important;
          padding: 0 8px !important;
          font-size: 12px !important;
          font-weight: bold !important;
          white-space: nowrap !important;
          text-align: center !important;
          vertical-align: middle !important;
          background-color: #fafafa !important;
          border-bottom: 1px solid #f0f0f0 !important;
          box-sizing: border-box !important;
        }
        
        ${i}-table-tbody > tr > td {
          height: 40px !important;
          line-height: 40px !important;
          padding: 0 8px !important;
          font-size: 12px !important;
          white-space: nowrap !important;
          text-align: center !important;
          vertical-align: middle !important;
          border-bottom: 1px solid #f0f0f0 !important;
          box-sizing: border-box !important;
        }
        
        // 
        ${i}-table-cell-fix-left,
        ${i}-table-cell-fix-right {
          background-color: #fff !important;
          border-right: 1px solid #f0f0f0 !important;
        }
        
        // 
        ${i}-table-table {
          table-layout: fixed !important;
        }
        
        // 
        ${i}-table-tbody > tr:hover > td {
          background-color: #f5f5f5 !important;
        }
        
        // 
        ${i}-table-body::-webkit-scrollbar {
          width: 0px;
          height: 0px;
          display: none;
        }
        
        ${i}-table-body {
          scrollbar-width: none; /* Firefox */
          -ms-overflow-style: none; /* IE and Edge */
        }
      }
    `}}),NV=fI(()=>{const{t:e}=U1(),{styles:t}=BV(),i=1200,a=400,f=U.useRef(),v=U.useRef(),g=U.useRef({}),[u,E]=U.useState({min:0,max:100}),[P,I]=U.useState([]),[B,j]=U.useState([]),$=U.useRef(),X=U.useRef(),J=U.useRef();U.useRef(!1);const G=40,le=40,oe=40,pe=Nt.useMemo(()=>[{title:e("flight.id"),width:80,dataIndex:"flight_id",key:"flight_id",fixed:"left",ellipsis:!0,render:(ke,Le)=>{const Re=Le.status==="normal"?ba.ACTIVE:ba.PLANNING;return Ct.jsx("span",{style:{color:Re,fontWeight:"bold",fontSize:"12px"},children:ke})}},{title:[e("taxi"),e("time")],dataIndex:"taxi_time",key:"taxi_time",width:70,ellipsis:!0,render:ke=>ke?ke.toFixed(1):"-"},{title:[e("start"),e("time")],dataIndex:"start_time",key:"start_time",width:70,ellipsis:!0,render:ke=>typeof ke=="string"?new Date(ke).toLocaleTimeString("en-US",{hour12:!1,hour:"2-digit",minute:"2-digit"}):typeof ke=="number"?`T+${(ke/60).toFixed(1)}`:"-"},{title:[e("time.to"),e("takeoff")],dataIndex:"time_to_takeoff",key:"time_to_takeoff",width:90,ellipsis:!1,render:ke=>{const Le=ke!==void 0?ke.toFixed(1):"-";return Ct.jsxs("div",{style:{whiteSpace:"normal",lineHeight:"1.2",fontSize:"11px",textAlign:"center"},children:[Ct.jsx("div",{children:e("time.to")}),Ct.jsxs("div",{children:[e("takeoff"),": ",Le]})]})}},{title:[e("remaining"),e("time")],dataIndex:"remaining_taxi_time",key:"remaining_taxi_time",width:90,ellipsis:!1,render:ke=>{const Le=ke?(ke/60).toFixed(1):"-";return Ct.jsxs("div",{style:{whiteSpace:"normal",lineHeight:"1.2",fontSize:"11px",textAlign:"center"},children:[Ct.jsx("div",{children:e("remaining")}),Ct.jsxs("div",{children:[e("time"),": ",Le]})]})}},{title:e("origin"),dataIndex:"origin",key:"origin",width:80,ellipsis:!0},{title:e("destination"),dataIndex:"destination",key:"destination",width:80,ellipsis:!0}],[e]),he=()=>{const ke=J.current,Le=$.current,Re=X.current;if(!ke||!Le||!Re)return;for(;ke.firstChild;)ke.removeChild(ke.firstChild);const me=ke.getBoundingClientRect(),Ae=Le==null?void 0:Le.querySelector(".svg-table-body"),He=f.current;if(!Ae||!He)return;Array.from(Ae.querySelectorAll("[data-flight-id]")).forEach((pt,xe)=>{const et=pt.getAttribute("data-flight-id"),Qe=He.querySelector(`.aircraft-icon-${CSS.escape(et)}`);if(!Qe)return;const Rt=pt.getBoundingClientRect();Qe.getBoundingClientRect();const we=pt.querySelector(".rounded-row"),tt=we?we.getBoundingClientRect():null,_t=(tt?tt.right:Rt.right)-me.left,Pt=(tt?tt.top:Rt.top)-me.top,At=(tt?tt.bottom:Rt.top+Rt.height)-me.top;He.querySelector(`.plan-bar-group-${CSS.escape(et)} .taxi-slider-${CSS.escape(et)}`);const St=He.querySelector(`.active-bar-group-${CSS.escape(et)}`),qt=He.querySelector(`.plan-bar-group-${CSS.escape(et)}`);let Xe=null,mt=null;const ft=He.querySelector(`.taxi-slider-${CSS.escape(et)}`);if(St){const Sn=St.querySelector(".remaining-slider-block"),bn=St.querySelector(".active-time-track-block"),gn=ft||Sn||bn;if(gn){const En=gn.getBoundingClientRect();Xe=En.left-me.left,mt=En}}else if(qt){const Sn=qt.querySelector(".time-track-block");if(Sn){const bn=Sn.getBoundingClientRect();Xe=bn.left-me.left,mt=bn}}if(Xe==null||!mt)return;const Ke=mt.left-me.left,Je=mt.top-me.top,Vt=Je+mt.height,$t=Pt,Kt=At,Gt=[`${_t},${$t}`,`${Ke},${Je}`,`${Ke},${Vt}`,`${_t},${Kt}`].join(" "),kt=document.createElementNS("http://www.w3.org/2000/svg","polygon");kt.setAttribute("points",Gt);const ln=!!St?ba.ACTIVE:ba.PLANNING;kt.setAttribute("fill",ln),kt.setAttribute("opacity","0.25"),kt.setAttribute("stroke","none"),ke.appendChild(kt)})},ae=ke=>{const Le=[],Re=[];return ke.planned_flights&&Object.entries(ke.planned_flights).forEach(([me,Ae])=>{Re.push(me);const He=Ae.type==="active"?"normal":"planned";Le.push({key:me,flight_id:me,status:He,taxi_time:(Ae.remaining_taxi_time||0)/60,start_time:Ae.start_time,time_to_takeoff:Ae.time_to_takeoff,remaining_taxi_time:Ae.remaining_taxi_time,origin:Ae.origin,destination:Ae.destination})}),Le.sort((me,Ae)=>{const He=me.time_to_takeoff??Number.POSITIVE_INFINITY,We=Ae.time_to_takeoff??Number.POSITIVE_INFINITY;return He-We}),{tableData:Le,aircraftIds:Re}};U.useEffect(()=>{if(mn.isDragging)return;Ao(f.current);const ke=()=>{const me=mn.getCurrentSimulation();let Ae=[];if(me&&me.simulated_state){const He=me.simulated_state;He.planned_flights&&Object.entries(He.planned_flights).forEach(([We,pt])=>{const xe=pt.start_time/60,et=pt.taxi_time/60,Qe={aircraft_id:We,type:"simulation_planning",time_to_start:xe,taxi_time:et,paths:[{start_time:xe,end_time:xe+et,duration:et,path:pt.path}],conflicts:[]};Ae.push(Qe)}),He.active_flights&&Object.entries(He.active_flights).forEach(([We,pt])=>{const xe=(pt.remaining_taxi_time||0)/60,et={aircraft_id:We,type:"simulation_active",time_to_takeoff:pt.time_to_takeoff,paths:[{time:xe,path:pt.path}],plan_time:xe,conflicts:[]};Ae.push(et)})}return Ae},Le=me=>{const Ae=(Ie,Pe,Me,Ye,xt)=>{if(Pe.length===0)return;Ie.selectAll(".simulation-flight-group").data(Pe).enter().append("g").attr("class",Ot=>`simulation-flight-group ${Ot.type}-flight`).attr("id",Ot=>`simulation-flight-${Ot.aircraft_id}`).each(function(Ot,Xt){const It=Ao(this),qe=Ot.type==="simulation_active",dn=qe?ba.ACTIVE:ba.PLANNING;let cn,en;qe?(cn=qo.LINE_WIDTH,en=qo.ACTIVE_DASH):(cn=qo.LINE_WIDTH,en=qo.PLANNING_DASH);const Wt=0;It.selectAll("line").data(Ot.paths).enter().append("line").attr("x1",at=>Ot.type==="simulation_planning"?Me(at.start_time):Me(0)).attr("x2",at=>Ot.type==="simulation_planning"?Me(at.end_time):Me(at.time)).attr("y1",(at,Ht)=>Ye(Ot.aircraft_id)+Ht*3+Wt).attr("y2",(at,Ht)=>Ye(Ot.aircraft_id)+Ht*3+Wt).attr("stroke",dn).attr("stroke-width",cn).attr("stroke-linecap","round").attr("stroke-dasharray",en).attr("opacity",1),It.selectAll(".simulation-start-point").data(Ot.paths).enter().append("circle").attr("class","simulation-start-point").attr("cx",at=>Ot.type==="simulation_planning"?Me(at.start_time):Me(0)).attr("cy",(at,Ht)=>Ye(Ot.aircraft_id)+Ht*3+Wt).attr("r",vm).attr("fill",dn).attr("stroke",dn).attr("stroke-width",2).attr("opacity",1),It.selectAll(".simulation-end-point").data(Ot.paths).enter().append("circle").attr("class","simulation-end-point").attr("cx",at=>Ot.type==="simulation_planning"?Me(at.end_time):Me(at.time)).attr("cy",(at,Ht)=>Ye(Ot.aircraft_id)+Ht*3+Wt).attr("r",vm).attr("fill",qe?dn:"white").attr("stroke",dn).attr("stroke-width",2).attr("opacity",1)})},{tableData:He,aircraftIds:We}=ae(me);I(He),j(We);let pt=0,xe=We,et=[],Qe=[],Rt=[];const we=[];me.planned_flights&&Object.entries(me.planned_flights).forEach(([Ie,Pe])=>{const Me=(Pe.start_time||0)/60,Ye=(Pe.remaining_taxi_time||0)/60,xt=Pe.time_to_takeoff,Mt=Pe.type==="active"?"active":"planning",Ot={aircraft_id:Ie,type:Mt,time_to_start:Me,taxi_time:Ye,plan_time:Ye,paths:[{start_time:Me,end_time:Me+Ye,duration:Ye,path:Pe.path}],conflicts:[]};we.push(Ot),et.push(Me),Qe.push(Ye),Rt.push(xt);const Xt=Me+Ye;Xt>pt&&(pt=Xt)}),pt=Math.ceil(pt),E({min:0,max:pt});const tt=Ao(f.current),_t=X.current?X.current.clientWidth:1200,At=(()=>{const Ie={};let Pe=le/2;return xe.forEach((Me,Ye)=>{if(Ie[Me]=Pe,Ye<xe.length-1){const xt=xe[Ye+1],Mt=me.planned_flights[xt],Ot=(Mt==null?void 0:Mt.interval_to_previous)||le;Pe+=Math.max(Ot,le)}}),Ie})(),St=Math.max(...Object.values(At))+le,qt=xe.length*le,mt=Math.max(St+V1,qt+V1),Je={top:6,right:200+20,left:200};tt.selectAll("*").remove(),tt.attr("width",_t).attr("height",mt).attr("viewBox",[0,0,_t,mt]).attr("style","max-width: 100%; height: auto;");const Vt=tt.append("g").attr("transform",`translate(${Je.left},${Je.top})`);let $t=tt.select("defs");$t.empty()&&($t=tt.append("defs")),$t.select("#overlap-chevron-arrow-opposite").empty()&&$t.append("marker").attr("id","overlap-chevron-arrow-opposite").attr("viewBox","0 0 20 20").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").attr("markerUnits","userSpaceOnUse").append("polygon").attr("points",`0,5 0,15 ${yT},10`).attr("fill",Go.OPPOSITE).attr("stroke","white").attr("stroke-width",1).attr("fill-opacity",gT).attr("stroke-opacity",1),$t.select("#overlap-chevron-arrow-same").empty()&&$t.append("marker").attr("id","overlap-chevron-arrow-same").attr("viewBox","0 0 20 20").attr("refX",0).attr("refY",10).attr("markerWidth",20).attr("markerHeight",20).attr("orient","auto").attr("markerUnits","userSpaceOnUse").append("polygon").attr("points",`0,5 0,15 ${yT},10`).attr("fill",Go.SAME_DIRECTION).attr("stroke","white").attr("stroke-width",1).attr("fill-opacity",gT).attr("stroke-opacity",1);const Kt=_t-Je.left-Je.right,Gt=Gx().domain([0,pt]).range([0,Kt]),kt=Hx().domain(xe).range(xe.map(Ie=>At[Ie])),Qt=Ie=>kt(Ie),ln=kI(Gt).tickFormat(Ie=>`T+${Ie.toFixed(0)}`).tickSizeOuter(0),Sn="#000000",bn=Ao(v.current);bn.selectAll("*").remove(),bn.attr("width",_t).attr("height",oe).attr("viewBox",[0,0,_t,oe]).attr("style","max-width: 100%; height: auto;");const gn=bn.append("g").attr("transform",`translate(${Je.left}, ${oe-6})`);gn.append("g").attr("class","x-axis").call(ln.tickPadding(6)),gn.append("text").attr("x",-10).attr("y",6-oe/2).attr("fill",Sn).attr("stroke",Sn).attr("text-anchor","end").attr("dominant-baseline","middle").text(e("flight.id"));const En=Vt.append("g").attr("class","y-axis");xe.forEach((Ie,Pe)=>{const Me=Qt(Ie);En.append("line").attr("x1",-6).attr("x2",0).attr("y1",Me).attr("y2",Me).attr("stroke","#000").attr("stroke-width",1)});const Ln=ke(),Pn=Ln.length>0;Vt.selectAll(".flight-group").data(we).enter().append("g").attr("class",Ie=>`flight-group ${Ie.type}-flight`).attr("id",Ie=>`flight-${Ie.aircraft_id}`).each(function(Ie,Pe){const Me=Ao(this),Ye=Ie.type==="active",xt=Ye?ba.ACTIVE:ba.PLANNING;let Mt,Ot;Ye?(Mt=Pn?qo.LINE_WIDTH+2:qo.LINE_WIDTH,Ot=qo.ACTIVE_DASH):(Mt=Pn?qo.LINE_WIDTH+2:qo.LINE_WIDTH,Ot=qo.PLANNING_DASH);const Xt=Pn?.4:1;Me.selectAll("line").data(Ie.paths).enter().append("line").attr("x1",It=>Gt(It.start_time)).attr("x2",It=>Gt(It.end_time)).attr("y1",(It,qe)=>Qt(Ie.aircraft_id)+qe*3).attr("y2",(It,qe)=>Qt(Ie.aircraft_id)+qe*3).attr("stroke",xt).attr("stroke-width",Mt).attr("stroke-linecap","round").attr("stroke-dasharray",Ot).attr("opacity",Xt),Me.selectAll(".start-point").data(Ie.paths).enter().append("circle").attr("class","start-point").attr("cx",It=>Gt(It.start_time)).attr("cy",(It,qe)=>Qt(Ie.aircraft_id)+qe*3).attr("r",vm).attr("fill",xt).attr("stroke",xt).attr("stroke-width",2).attr("opacity",Xt),Me.selectAll(".end-point").data(Ie.paths).enter().append("circle").attr("class","end-point").attr("cx",It=>Gt(It.end_time)).attr("cy",(It,qe)=>Qt(Ie.aircraft_id)+qe*3).attr("r",vm).attr("fill",Ie.type==="active"?xt:"white").attr("stroke",xt).attr("stroke-width",2)});const or=(Ie,Pe,Me,Ye,xt)=>{const Mt=Pe&&Array.isArray(Pe.taxiways)&&Pe.taxiways.length>0,Ot=Pe&&Array.isArray(Pe.nodes)&&Pe.nodes.length>0;if(!(Mt||Ot))return;const Xt=Ie.append("g").attr("class","overlap-layer").attr("pointer-events","none");Hx(OD);const It=en=>(Number(en)||0)/60;(Pe.taxiways||[]).forEach((en,Wt)=>{var pn,Bn,tn,xr,mi,Wn;const at=String((en==null?void 0:en.direction)||"").toLowerCase(),Ht=at==="opposite"?Go.OPPOSITE:at==="same"?Go.SAME_DIRECTION:Go.CROSSING,an=Array.isArray(en.flight_windows)?en.flight_windows:[];console.log("flightwindows",an);const Cn=an.slice().sort((Xn,rr)=>xt.indexOf(Xn.flight_id)-xt.indexOf(rr.flight_id));console.log("sorted",Cn),Cn.forEach(Xn=>{var Na,Di,ci;const rr=Xn.flight_id,lr=Ye(rr),On=It(((Na=Xn==null?void 0:Xn.time_window)==null?void 0:Na.start)??0),cr=It(((Di=Xn==null?void 0:Xn.time_window)==null?void 0:Di.end)??((ci=Xn==null?void 0:Xn.time_window)==null?void 0:ci.start)??0),Dn=Me(On),Rr=Me(cr),Yr=8;Math.abs(cr-On)<1e-6?Xt.append("circle").attr("class","overlap-point").attr("cx",Dn).attr("cy",lr).attr("r",qo.POINT_RADIUS).attr("fill",Ht).attr("opacity",.7).attr("stroke",Ht).attr("stroke-width",1):Xt.append("rect").attr("class","overlap-segment").attr("x",Math.min(Dn,Rr)).attr("y",lr-Yr/2).attr("width",Math.max(2,Math.abs(Rr-Dn))).attr("height",Yr).attr("rx",3).attr("fill",Ht).attr("opacity",.25).attr("stroke",Ht).attr("stroke-width",1)});for(let Xn=0;Xn<Cn.length-1;Xn++){const rr=Cn[Xn],lr=Cn[Xn+1],On=It(((pn=rr==null?void 0:rr.time_window)==null?void 0:pn.start)??0),cr=It(((Bn=rr==null?void 0:rr.time_window)==null?void 0:Bn.end)??((tn=rr==null?void 0:rr.time_window)==null?void 0:tn.start)??0),Dn=It(((xr=lr==null?void 0:lr.time_window)==null?void 0:xr.start)??0),Rr=It(((mi=lr==null?void 0:lr.time_window)==null?void 0:mi.end)??((Wn=lr==null?void 0:lr.time_window)==null?void 0:Wn.start)??0),Yr=Me(On),Na=Me(cr),Di=Me(Dn),ci=Me(Rr),Ca=Ye(rr.flight_id),Ta=Ye(lr.flight_id),Vc=String((en==null?void 0:en.direction)||"").toLowerCase(),bs=Vc==="same"||Vc==="opposite",Ea=cr-On,Bh=Rr-Dn;if(bs?Vc==="opposite":Ea*Bh<0){const ho=[{ax:Yr,ay:Ca,bx:Di,by:Ta,dist:Math.abs(On-Dn),label:"start-start"},{ax:Yr,ay:Ca,bx:ci,by:Ta,dist:Math.abs(On-Rr),label:"start-end"},{ax:Na,ay:Ca,bx:Di,by:Ta,dist:Math.abs(cr-Dn),label:"end-start"},{ax:Na,ay:Ca,bx:ci,by:Ta,dist:Math.abs(cr-Rr),label:"end-end"}],aa=ho.reduce((Po,xs)=>xs.dist<Po.dist?xs:Po,ho[0]);let ja=aa.ax,fo=aa.ay,ri=aa.bx,Xo=aa.by;ja>ri&&(ja=aa.bx,fo=aa.by,ri=aa.ax,Xo=aa.ay);const oa=(Ca+Ta)/2,po=(ja+ri)/2;Xt.append("path").attr("class",`overlap-connector opposing-left polyline ${aa.label}`).attr("d",`M${ja},${fo} L${ja},${oa} L${po-ov},${oa}`).attr("stroke",Go.OPPOSITE).attr("stroke-width",iv).attr("fill","none").attr("stroke-opacity",av).attr("marker-end","url(#overlap-chevron-arrow-opposite)"),Xt.append("path").attr("class",`overlap-connector opposing-right polyline ${aa.label}`).attr("d",`M${ri},${Xo} L${ri},${oa} L${po+ov},${oa}`).attr("stroke",Go.OPPOSITE).attr("stroke-width",iv).attr("fill","none").attr("stroke-opacity",av).attr("marker-end","url(#overlap-chevron-arrow-opposite)")}else{const ho=On>=Dn,aa=ho?cr:Rr,ja=ho?Rr:cr,fo=ho?Ca:Ta,ri=ho?Ta:Ca,Xo=Me(aa),oa=Me(ja),po=(Ca+Ta)/2,Po=ri>po?ri-ov:ri+ov;Xt.append("path").attr("class","overlap-connector same-direction end-to-end").attr("d",`M${Xo},${fo} L${Xo},${po} L${oa},${po} L${oa},${Po}`).attr("stroke",Go.SAME_DIRECTION).attr("stroke-width",iv).attr("fill","none").attr("stroke-opacity",av).attr("marker-end","url(#overlap-chevron-arrow-same)").style("color",Go.SAME_DIRECTION)}}});const qe=Ie.append("g").attr("class","overlap-node-layer").attr("pointer-events","none"),dn=Ao(Ie.node().ownerSVGElement);let cn=dn.select("defs");cn.empty()&&(cn=dn.append("defs")),cn.select("#gap-circle-marker").empty()&&cn.append("marker").attr("id","gap-circle-marker").attr("markerWidth",3).attr("markerHeight",3).attr("refX",1.5).attr("refY",1.5).attr("orient","auto").append("path").attr("d","M 1.5,0.25 A 1.25,1.25 0 1,1 1.5,2.75").attr("fill","none").attr("stroke",Go.CROSSING).attr("stroke-width",.8),(Pe.nodes||[]).forEach((en,Wt)=>{var an,Cn;const Ht=(Array.isArray(en.flight_windows)?en.flight_windows:Array.isArray(en.flights)?en.flights:[]).slice().sort((pn,Bn)=>xt.indexOf(pn.flight_id)-xt.indexOf(Bn.flight_id));if(!(Ht.length<2)){Ht.forEach(pn=>{var lr,On,cr;const Bn=pn.flight_id,tn=Ye(Bn),xr=It(((lr=pn==null?void 0:pn.time_window)==null?void 0:lr.start)??0),mi=It(((On=pn==null?void 0:pn.time_window)==null?void 0:On.end)??((cr=pn==null?void 0:pn.time_window)==null?void 0:cr.start)??0),Wn=Me(xr),Xn=Me(mi),rr=8;Math.abs(mi-xr)<1e-6?qe.append("circle").attr("class","overlap-point").attr("cx",Wn).attr("cy",tn).attr("r",qo.POINT_RADIUS).attr("fill",Go.CROSSING).attr("opacity",.7).attr("stroke",Go.CROSSING).attr("stroke-width",1):qe.append("rect").attr("class","overlap-segment").attr("x",Math.min(Wn,Xn)).attr("y",tn-rr/2).attr("width",Math.max(2,Math.abs(Xn-Wn))).attr("height",rr).attr("rx",3).attr("fill",Go.CROSSING).attr("opacity",.25).attr("stroke",Go.CROSSING).attr("stroke-width",1)});for(let pn=0;pn<Ht.length-1;pn++){const Bn=Ht[pn],tn=Ht[pn+1],xr=It(((an=Bn==null?void 0:Bn.time_window)==null?void 0:an.start)??0),mi=It(((Cn=tn==null?void 0:tn.time_window)==null?void 0:Cn.start)??0),Wn=Me(xr),Xn=Me(mi),rr=Ye(Bn.flight_id),lr=Ye(tn.flight_id);let On,cr,Dn,Rr,Yr;mi>xr?(On=Xn,cr=lr,Dn=Wn,Rr=rr):(On=Wn,cr=rr,Dn=Xn,Rr=lr);const Di=(cr+Rr)/2;Yr=`M${On},${cr} L${On},${Di} L${Dn},${Di} L${Dn},${Rr}`,qe.append("path").attr("class","overlap-node-connector polyline").attr("d",Yr).attr("stroke",Go.CROSSING).attr("stroke-width",iv).attr("fill","none").attr("stroke-opacity",av).attr("stroke-linejoin","round").attr("stroke-linecap","round").attr("marker-end","url(#gap-circle-marker)")}}})};Ae(Vt,Ln,Gt,Qt),or(Vt,mn.overlaps,Gt,Qt,xe);const dr=(Ie,Pe,Me,Ye)=>{if(!Pe||!Pe.edges||Pe.edges.length===0)return;const xt=Ie.append("g").attr("class","impact-graph-connections").attr("pointer-events","none"),Mt=Ao(Ie.node().ownerSVGElement);let Ot=Mt.select("defs");Ot.empty()&&(Ot=Mt.append("defs")),Ot.select("#impact-arrow").empty()&&Ot.append("marker").attr("id","impact-arrow").attr("markerWidth",12).attr("markerHeight",12).attr("refX",10).attr("refY",6).attr("orient","auto").append("polygon").attr("points","0,2 0,10 10,6").attr("fill","#6699CC").attr("stroke","none").attr("opacity",1),Pe.edges.forEach((Xt,It)=>{const qe=Xt.from,dn=Xt.to;if(!Ye.includes(qe)||!Ye.includes(dn))return;const cn=Me(qe),en=Me(dn),at=24/2,Ht=en-cn,an=Math.abs(Ht);let Cn,pn,Bn,tn;an>0?Ht>0?(Cn=0,Bn=cn+at,pn=0,tn=en-at):(Cn=0,Bn=cn-at,pn=0,tn=en+at):(Cn=at,Bn=cn,pn=-12,tn=en);const xr=Pe.nodes&&Pe.nodes[dn],mi=(xr==null?void 0:xr.delay_minutes)||0,Wn=Math.min(5,Math.max(1,Math.ceil(mi/2))),Xn=Math.max(2,Wn*1.2),rr=.6+Wn*.1,lr=(Cn+pn)/2,On=(Bn+tn)/2,cr=`M${Cn},${Bn} Q${lr-15},${On} ${pn},${tn}`;xt.append("path").attr("class",`impact-connection-${qe}-${dn}`).attr("d",cr).attr("stroke","#666").attr("stroke-width",Xn).attr("fill","none").attr("opacity",rr).attr("stroke-dasharray","4,2").attr("marker-end","url(#impact-arrow)")})};if(mn.hasCurrentSimulation()&&mn.currentSimulation.solution){const Ie=mn.currentSimulation.solution.impact_graph;dr(Vt,Ie,Qt,xe)}const sr=12,Gn=-185,pr=5,Jn=1.5,br=Math.max(...et,...Qe,...Rt),gr=Gx().domain([0,br]).range([0,br*(pr+Jn)]),Lr=tt.append("g").attr("transform",`translate(${Je.left+Gn},${Je.top})`),Ge=(Ie,Pe,Me)=>{const Ye=Vt.select(`#flight-${Ie}`);Ye.empty()||(Ye.selectAll("line").attr("x1",Gt(Pe)).attr("x2",Gt(Pe+Me)),Ye.selectAll(".start-point").attr("cx",Gt(Pe)),Ye.selectAll(".end-point").attr("cx",Gt(Pe+Me)),Ye.selectAll(".planning-indicator").attr("x",Gt(Pe+Me)-4))},te=(Ie,Pe)=>{const Me=Pe+(Pe<0?-1:Pe>0?1:0);mn.adjustFlightTime(Ie,Me*60)},ie=(Ie,Pe,Me,{containerSelector:Ye,handleMinWidth:xt=10,snapStep:Mt=1,useRaf:Ot=!0}={})=>{let Xt=0,It=null,qe=null;const dn=Ao(Ye),cn=0,en=gr(Me-Pe),Wt=Ht=>Math.max(cn,Math.min(Ht,en)),at=(Ht,an)=>{const Cn=()=>Ht.attr("x",an);Ot?(qe&&cancelAnimationFrame(qe),qe=requestAnimationFrame(Cn)):Cn()};return Sz().container(dn.node()).on("start",function(Ht){const an=Ao(this);this.getBBox().width<xt&&an.attr("pointer-events","all"),an.attr("cursor","grabbing");const pn=parseFloat(an.attr("x"))||0;Xt=Ht.x-pn,It=Math.round(gr.invert(pn)),mn.setDraggingState(!0,Ie)}).on("drag",function(Ht){const an=Ao(this);let Cn=Wt(Ht.x-Xt);at(an,Cn);const pn=gr.invert(Cn);Ge(Ie,pn,Pe)}).on("end",function(){const Ht=Ao(this);Ht.attr("cursor","grab");const an=Wt(parseFloat(Ht.attr("x"))||0),Cn=Math.round(gr.invert(an)/Mt)*Mt,pn=Wt(gr(Cn));Ht.attr("x",pn);const Bn=Cn-It,tn=we.find(xr=>xr.aircraft_id===Ie);if(tn){const xr=Cn;tn.time_to_start=xr,tn.paths&&tn.paths[0]&&(tn.paths[0].start_time=xr,tn.paths[0].end_time=xr+Pe)}mn.setDraggingState(!1,null),Bn!==0&&te(Ie,Bn),console.log(` ${Ie} : ${Bn} `),qe&&(cancelAnimationFrame(qe),qe=null)})};xe.forEach((Ie,Pe)=>{const Me=Qt(Ie)-sr/2,Ye=we.filter(It=>It.aircraft_id===Ie),xt=Ye.find(It=>It.type==="active")||Ye[0],Mt=xt&&xt.type==="active",Ot=Mt?ba.ACTIVE:ba.PLANNING,Xt=Mt?.8:.6;if(Qe[Pe]>0)if(Mt){const It=Lr.append("g").attr("class",`active-bar-group-${Ie}`),qe=xt.time_to_takeoff||0,dn=xt.plan_time,cn=Math.ceil(qe),en=Math.ceil(dn);It.selectAll(".active-time-track-block").data(kb(cn)).enter().append("rect").attr("class","active-time-track-block").attr("x",Wt=>Wt*(pr+Jn)).attr("y",Me).attr("width",pr).attr("height",sr).attr("fill","#f0f0f0").attr("stroke","#d0d0d0").attr("stroke-width",1).attr("rx",2),It.selectAll(".remaining-slider-block").data(kb(en)).enter().append("rect").attr("class","remaining-slider-block").attr("x",Wt=>Wt*(pr+Jn)).attr("y",Me).attr("width",pr).attr("height",sr).attr("fill",Ot).attr("opacity",Xt).attr("rx",2)}else{const It=Lr.append("g").attr("class",`plan-bar-group-${Ie}`),qe=Rt[Pe],dn=Math.ceil(qe);It.selectAll(".time-track-block").data(kb(dn)).enter().append("rect").attr("class","time-track-block").attr("x",an=>an*(pr+Jn)).attr("y",Me).attr("width",pr).attr("height",sr).attr("fill","#f0f0f0").attr("stroke","#d0d0d0").attr("stroke-width",1).attr("rx",2);const cn=et[Pe]||0,en=xt.taxi_time||Qe[Pe],Wt=Math.floor(cn),Ht=Math.ceil(cn+en)-Wt;It.append("rect").attr("class",`taxi-slider-${Ie}`).attr("x",Wt*(pr+Jn)).attr("y",Me).attr("width",Ht*(pr+Jn)-Jn).attr("height",sr).attr("fill",Ot).attr("opacity",Xt).attr("cursor","grab").attr("rx",2).call(ie(Ie,en,qe))}});const Ce=tt.append("g").attr("class","aircraft-icons").attr("transform",`translate(${Je.left+12},${Je.top})`);xe.forEach((Ie,Pe)=>{const Me=Qt(Ie),Ye=we.filter(It=>It.aircraft_id===Ie),xt=Ye.find(It=>It.type==="active")||Ye[0],Mt=xt&&xt.type==="active",Ot=mn.getAircraftColor(Ie,Mt),Xt=Ce.append("g").attr("class",`aircraft-icon-${Ie}`).attr("transform",`translate(0, ${Me})`);if(Xt.append("path").attr("d","M512 174.933333c23.466667 0 42.666667 8.533333 59.733333 25.6s25.6 36.266667 25.6 59.733334v192l206.933334 185.6c6.4 4.266667 10.666667 12.8 14.933333 21.333333s6.4 17.066667 6.4 25.6v23.466667c0 8.533333-2.133333 12.8-6.4 14.933333s-10.666667 2.133333-17.066667-2.133333l-204.8-140.8v149.333333c38.4 36.266667 57.6 57.6 57.6 64v36.266667c0 8.533333-2.133333 12.8-6.4 17.066666-4.266667 2.133333-10.666667 2.133333-19.2 0l-117.333333-72.533333-117.333333 72.533333c-6.4 4.266667-12.8 4.266667-19.2 0s-6.4-8.533333-6.4-17.066666v-36.266667c0-8.533333 19.2-29.866667 57.6-64v-149.333333l-204.8 140.8c-6.4 4.266667-12.8 6.4-17.066667 2.133333-4.266667-2.133333-6.4-8.533333-6.4-14.933333V684.8c0-8.533333 2.133333-17.066667 6.4-25.6 4.266667-8.533333 8.533333-17.066667 14.933333-21.333333l206.933334-185.6v-192c0-23.466667 8.533333-42.666667 25.6-59.733334s36.266667-25.6 59.733333-25.6z").attr("fill",Ot).attr("opacity",.8).attr("transform","translate(-15, -15) scale(0.03) rotate(90)"),mn.hasCurrentSimulation()&&mn.currentSimulation.solution){const It=mn.currentSimulation.solution;if(It.target_flight===Ie&&It.strategy){const qe=It.strategy,dn=Xt.append("g").attr("class",`strategy-indicator-${Ie}`).attr("transform","translate(12, -3)");dn.append("circle").attr("cx",0).attr("cy",0).attr("r",8).attr("fill","white").attr("opacity",.9);const cn=qe==="emergency_mode"?U_.EMERGENCY_MODE:qe==="waiting"?U_.WAITING:qe==="rerouting"?U_.REROUTING:U_.DEFAULT;qe==="emergency_mode"?(dn.append("rect").attr("x",-1).attr("y",-4).attr("width",2).attr("height",6).attr("fill",cn),dn.append("circle").attr("cx",0).attr("cy",3).attr("r",1).attr("fill",cn)):qe==="waiting"?(dn.append("circle").attr("cx",0).attr("cy",0).attr("r",5).attr("stroke",cn).attr("stroke-width",1).attr("fill","none"),dn.append("line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",-3).attr("stroke",cn).attr("stroke-width",1),dn.append("line").attr("x1",0).attr("y1",0).attr("x2",2).attr("y2",1).attr("stroke",cn).attr("stroke-width",1)):qe==="rerouting"?dn.append("path").attr("d","M-3,-2 Q0,-4 3,-2 L2,-3 M3,-2 L2,-1").attr("stroke",cn).attr("stroke-width",1).attr("fill","none"):dn.append("circle").attr("cx",0).attr("cy",0).attr("r",3).attr("fill",cn)}}});const Ne=tt.append("g").attr("class","aircraft-ids").attr("transform",`translate(${Je.left-50},${Je.top})`);xe.forEach((Ie,Pe)=>{const Me=Qt(Ie);Ne.append("text").attr("x",0).attr("y",Me).attr("dy","0.32em").attr("text-anchor","middle").attr("font-size","12px").attr("font-weight","bold").attr("fill","#333").text(Ie)});const ce=tt.append("g").attr("class","legend").attr("transform",`translate(${_t-Je.right+10}, 30)`).attr("pointer-events","none");ce.append("rect").attr("x",-10).attr("y",-10).attr("width",200).attr("height",100).attr("fill","none").attr("stroke","#ccc").attr("stroke-width",1).attr("rx",5),ce.append("text").attr("x",0).attr("y",10).attr("font-size","14px").attr("font-weight","bold").attr("fill","#333").text(e("legend.title"));const rt=ce.append("g").attr("transform","translate(0, 35)");rt.append("line").attr("x1",0).attr("x2",20).attr("y1",0).attr("y2",0).attr("stroke",ba.ACTIVE).attr("stroke-width",qo.LINE_WIDTH).attr("stroke-linecap","round"),rt.append("circle").attr("cx",20).attr("cy",0).attr("r",vm).attr("fill",ba.ACTIVE).attr("stroke",ba.ACTIVE).attr("stroke-width",2),rt.append("text").attr("x",35).attr("y",5).attr("font-size","12px").attr("fill","#333").text(e("legend.active"));const Ve=ce.append("g").attr("transform","translate(0, 55)");Ve.append("line").attr("x1",0).attr("x2",20).attr("y1",0).attr("y2",0).attr("stroke",ba.PLANNING).attr("stroke-width",qo.LINE_WIDTH).attr("stroke-linecap","round").attr("stroke-dasharray",qo.PLANNING_DASH),Ve.append("circle").attr("cx",20).attr("cy",0).attr("r",vm).attr("fill","white").attr("stroke",ba.PLANNING).attr("stroke-width",2),Ve.append("text").attr("x",35).attr("y",5).attr("font-size","12px").attr("fill","#333").text(e("legend.planning")),g.current={xScale:Gt,getYPosition:Qt,aircraftIds:xe,svg:tt,g:Vt.append("g").attr("class","main-group")},g.current.g},Re=Ah(()=>{if(mn.plannedFlights&&Object.keys(mn.plannedFlights).length>0){const me={planned_flights:mn.plannedFlights||{},active_flights:mn.activeFlights||{},conflicts:mn.conflicts||[]};console.log("Planned Flights:",mn.plannedFlights),console.log("Active Flights:",mn.activeFlights),console.log("Complete Data:",me),Le(me)}else console.log("WebSocket data not received, using test data...")});return()=>{Re()}},[]),U.useEffect(()=>{requestAnimationFrame(he)},[P]);const ve=ke=>{const{scrollTop:Le}=ke.target;X.current&&X.current.scrollTop!==Le&&(X.current.scrollTop=Le),requestAnimationFrame(he)},Se=ke=>{const{scrollTop:Le}=ke.target;$.current&&$.current.scrollTop!==Le&&($.current.scrollTop=Le),requestAnimationFrame(he)};return Ct.jsx("div",{style:{width:"100%",height:"100%",overflow:"hidden",padding:"10px",boxSizing:"border-box",position:"relative"},children:Ct.jsxs("div",{style:{display:"flex",width:"100%",height:"100%",gap:"10px"},children:[Ct.jsx("div",{style:{width:"33.33%",height:"100%",overflowX:"hidden"},children:Ct.jsx(LV,{columns:pe,dataSource:P,rowHeight:G,headerHeight:oe,onScroll:ve,tableRef:$,className:t.prettyScrollbar})}),Ct.jsxs("div",{ref:X,onScroll:Se,className:t.hideScrollbar,style:{width:"66.67%",height:"100%",overflow:"auto"},children:[Ct.jsx("div",{style:{position:"sticky",top:0,zIndex:20,background:"#ffffff",borderBottom:"1px solid #f0f0f0"},children:Ct.jsx("svg",{ref:v,width:"100%",height:oe,preserveAspectRatio:"xMidYMid meet",style:{maxWidth:"100%",display:"block",background:"#ffffff"}})}),Ct.jsx("svg",{ref:f,width:"100%",height:"100%",viewBox:`0 0 ${i} ${a}`,preserveAspectRatio:"xMidYMid meet",style:{maxWidth:"100%",maxHeight:"100%",display:"block"}})]}),Ct.jsx("svg",{ref:J,style:{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",zIndex:5,clipPath:`inset(${oe}px 0 0 0)`}})]})})}),jV=()=>Ct.jsxs("div",{className:"dashboard-container",children:[Ct.jsx("div",{className:"top-panel",children:Ct.jsx(NV,{})}),Ct.jsx("div",{className:"bottom-panel",children:Ct.jsx(iI,{geoJsonUrl:"/taxiwayline2.geojson"})})]});U.createContext();function FV(){const[e,t]=U.useState(0);return Ct.jsx(KP,{children:Ct.jsx("div",{className:"app",children:Ct.jsx(jV,{})})})}YP.createRoot(document.getElementById("root")).render(Ct.jsx(FV,{}));
